
name: Postcommit_asan
on: 
  push:
    branches:
      - 'main'
      - 'stable-*'
      - 'stream-nb-*'
    paths-ignore:
      - 'ydb/docs/**'
      - '.github/**'
      - '*'
jobs:
  build_and_test:
    if: ${{vars.CHECKS_SWITCH != '' && fromJSON(vars.CHECKS_SWITCH).postcommit_asan == true}}
    name: Build and test release-asan
    uses: ./.github/workflows/build_and_test_ya_provisioned.yml
    with:
      build_preset: "release-asan"
      build_target: "ydb/"
      test_size: "small,medium"
      test_type: "unittest,py3test,py2test,pytest"
      test_threads: 52
      runner_label: auto-provisioned
      put_build_results_to_cache: true
    secrets: inherit
