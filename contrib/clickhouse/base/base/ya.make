# Generated by devtools/yamaker.

LIBRARY()

LICENSE(
    Apache-2.0 AND
    BSL-1.0 AND
    MIT AND
    NTP
)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

PEERDIR(
    contrib/libs/fmt
    contrib/libs/poco/Foundation
    contrib/libs/poco/Net
    contrib/libs/poco/Util
    contrib/restricted/cityhash-1.0.2
    library/cpp/sanitizer/include
)

ADDINCL(
    GLOBAL contrib/clickhouse/base
    GLOBAL contrib/libs/miniselect/include
    GLOBAL contrib/libs/pdqsort
    contrib/restricted/cityhash-1.0.2
)

NO_COMPILER_WARNINGS()

NO_UTIL()

IF (OS_DARWIN)
    CFLAGS(
        GLOBAL -DOS_DARWIN
    )
ELSEIF (OS_LINUX)
    CFLAGS(
        GLOBAL -DOS_LINUX
    )
ENDIF()

CFLAGS(
    -DBOOST_ASIO_HAS_STD_INVOKE_RESULT=1
    -DBOOST_ASIO_STANDALONE=1
    -DBOOST_TIMER_ENABLE_DEPRECATED=1
    -DINCBIN_SILENCE_BITCODE_WARNING
    -DPOCO_ENABLE_CPP11
    -DPOCO_HAVE_FD_EPOLL
    -DPOCO_OS_FAMILY_UNIX
    -DWITH_COVERAGE=0
    -D_LIBCPP_ENABLE_THREAD_SAFETY_ANNOTATIONS
    -D__GCC_HAVE_DWARF2_CFI_ASM=1
)

SRCS(
    JSON.cpp
    StringRef.cpp
    argsToConfig.cpp
    coverage.cpp
    demangle.cpp
    errnoToString.cpp
    getAvailableMemoryAmount.cpp
    getFQDNOrHostName.cpp
    getMemoryAmount.cpp
    getPageSize.cpp
    getThreadId.cpp
    mremap.cpp
    phdr_cache.cpp
    preciseExp10.cpp
    safeExit.cpp
    shift10.cpp
    sleep.cpp
    terminalColors.cpp
    throwError.cpp
)

END()
