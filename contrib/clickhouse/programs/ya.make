# Generated by devtools/yamaker.

PROGRAM(clickhouse)

LICENSE(
    Apache-2.0 AND
    MIT
)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

PEERDIR(
    contrib/clickhouse/base/base
    contrib/clickhouse/base/widechar_width
    contrib/clickhouse/contrib/cctz-cmake
    contrib/clickhouse/src
    contrib/clickhouse/src/Common
    contrib/clickhouse/src/Parsers
    contrib/libs/cctz
    contrib/libs/cctz/tzdata
    contrib/libs/croaring
    contrib/libs/double-conversion
    contrib/libs/fmt
    contrib/libs/miniselect
    contrib/libs/pdqsort
    contrib/libs/poco/Crypto
    contrib/libs/poco/Foundation
    contrib/libs/poco/JSON
    contrib/libs/poco/Net
    contrib/libs/poco/NetSSL_OpenSSL
    contrib/libs/poco/Util
    contrib/libs/poco/XML
    contrib/libs/re2
    contrib/libs/sparsehash
    contrib/restricted/abseil-cpp/absl/base
    contrib/restricted/abseil-cpp/absl/container
    contrib/restricted/abseil-cpp/absl/debugging
    contrib/restricted/abseil-cpp/absl/hash
    contrib/restricted/abseil-cpp/absl/numeric
    contrib/restricted/abseil-cpp/absl/profiling
    contrib/restricted/abseil-cpp/absl/strings
    contrib/restricted/abseil-cpp/absl/synchronization
    contrib/restricted/abseil-cpp/absl/time
    contrib/restricted/abseil-cpp/absl/types
    contrib/restricted/boost/circular_buffer
    contrib/restricted/boost/container_hash
    contrib/restricted/boost/context
    contrib/restricted/boost/convert
    contrib/restricted/boost/dynamic_bitset
    contrib/restricted/boost/filesystem
    contrib/restricted/boost/geometry
    contrib/restricted/boost/heap
    contrib/restricted/boost/multi_index
    contrib/restricted/boost/program_options
    contrib/restricted/boost/system
    contrib/restricted/boost/tti
    contrib/restricted/cityhash-1.0.2
    contrib/restricted/dragonbox
    contrib/restricted/magic_enum
    contrib/restricted/patched/replxx
    library/cpp/clickhouse_deps/incbin_stub
    library/cpp/clickhouse_deps/re2_st_stub
)

ADDINCL(
    contrib/clickhouse/base
    contrib/clickhouse/base/pcg-random
    contrib/clickhouse/includes/configs
    contrib/clickhouse/src
    contrib/libs/croaring/include/roaring
    contrib/libs/double-conversion
    contrib/libs/miniselect/include
    contrib/libs/pdqsort
    contrib/libs/sparsehash/src
    contrib/restricted/cityhash-1.0.2
    library/cpp/clickhouse_deps/incbin_stub
)

NO_COMPILER_WARNINGS()

NO_UTIL()

IF (OS_DARWIN)
    CFLAGS(
        -DOS_DARWIN
    )
ELSEIF (OS_LINUX)
    CFLAGS(
        -DOS_LINUX
    )
ENDIF()

CFLAGS(
    -DAWS_SDK_VERSION_MAJOR=1
    -DAWS_SDK_VERSION_MINOR=10
    -DAWS_SDK_VERSION_PATCH=36
    -DBOOST_ASIO_HAS_STD_INVOKE_RESULT=1
    -DBOOST_ASIO_STANDALONE=1
    -DBOOST_TIMER_ENABLE_DEPRECATED=1
    -DENABLE_MULTITARGET_CODE=1
    -DINCBIN_SILENCE_BITCODE_WARNING
    -DPOCO_ENABLE_CPP11
    -DPOCO_HAVE_FD_EPOLL
    -DPOCO_OS_FAMILY_UNIX
    -DUNALIGNED_OK
    -DWITH_COVERAGE=0
    -DWITH_GZFILEOP
    -DX86_64
    -DXXH_INLINE_ALL
    -DZLIB_COMPAT
    -D_LIBCPP_ENABLE_THREAD_SAFETY_ANNOTATIONS
    -D__GCC_HAVE_DWARF2_CFI_ASM=1
)

SRCDIR(contrib/clickhouse)

SRCS(
    programs/client/Client.cpp
    programs/local/LocalServer.cpp
    programs/main.cpp
    programs/server/MetricsTransmitter.cpp
    programs/server/Server.cpp
    src/Common/malloc.cpp
)

END()
