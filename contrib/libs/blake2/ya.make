# Generated by devtools/yamaker from nixpkgs 24.05.

LIBRARY()

LICENSE(CC0-1.0)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

VERSION(0.98.1)

ORIGINAL_SOURCE(https://github.com/BLAKE2/libb2/archive/v0.98.1.tar.gz)

ADDINCL(
    contrib/libs/blake2/src
)

NO_COMPILER_WARNINGS()

NO_RUNTIME()

CFLAGS(
    -DHAVE_CONFIG_H
    -DSUFFIX=
)

SRCS(
    src/blake2-dispatch.c
    src/blake2bp.c
    src/blake2sp.c
)

SRC(src/blake2b-ref.c -DSUFFIX=_ref)

SRC(src/blake2s-ref.c -DSUFFIX=_ref)

IF (ARCH_X86_64 OR ARCH_I686)
    SRC_C_AVX(src/blake2b.c -DSUFFIX=_avx)
    SRC_C_SSE2(src/blake2b.c -DSUFFIX=_sse2)
    SRC_C_SSE41(src/blake2b.c -DSUFFIX=_sse41)
    SRC_C_SSSE3(src/blake2b.c -DSUFFIX=_ssse3)
    SRC_C_XOP(src/blake2b.c -DSUFFIX=_xop)
    SRC_C_AVX(src/blake2s.c -DSUFFIX=_avx)
    SRC_C_SSE2(src/blake2s.c -DSUFFIX=_sse2)
    SRC_C_SSE41(src/blake2s.c -DSUFFIX=_sse41)
    SRC_C_SSSE3(src/blake2s.c -DSUFFIX=_ssse3)
    SRC_C_XOP(src/blake2s.c -DSUFFIX=_xop)
ENDIF()

END()
