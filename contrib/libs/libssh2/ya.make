# Generated by devtools/yamaker from nixpkgs 24.05.

LIBRARY()

LICENSE(
    BSD-2-Clause AND
    BSD-3-Clause AND
    BSD-4-Clause AND
    ISC AND
    Public-Domain AND
    SSH-short
)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

VERSION(1.10.0)

ORIGINAL_SOURCE(https://github.com/libssh2/libssh2/archive/libssh2-1.10.0.tar.gz)

PEERDIR(
    contrib/libs/openssl
    contrib/libs/zlib
)

ADDINCL(
    GLOBAL contrib/libs/libssh2/include
    contrib/libs/libssh2/src
)

NO_COMPILER_WARNINGS()

NO_RUNTIME()

CFLAGS(
    -DBlowfish_decipher=__libssh2_Blowfish_decipher
    -DBlowfish_encipher=__libssh2_Blowfish_encipher
    -DBlowfish_expand0state=__libssh2_Blowfish_expand0state
    -DBlowfish_expandstate=__libssh2_Blowfish_expandstate
    -DBlowfish_initstate=__libssh2_Blowfish_initstate
    -DBlowfish_stream2word=__libssh2_Blowfish_stream2word
    -Dagent_ops_unix=__libssh2_agent_ops_unix
    -Dbcrypt_pbkdf=__libssh2_bcrypt_pbkdf
    -Dblf_cbc_decrypt=__libssh2_blf_cbc_decrypt
    -Dblf_cbc_encrypt=__libssh2_blf_cbc_encrypt
    -Dblf_dec=__libssh2_blf_dec
    -Dblf_ecb_decrypt=__libssh2_blf_ecb_decrypt
    -Dblf_ecb_encrypt=__libssh2_blf_ecb_encrypt
    -Dblf_enc=__libssh2_blf_enc
    -Dblf_key=__libssh2_blf_key
    -Dread_openssh_private_key_from_memory=__libssh2_read_openssh_private_key_from_memory
    -DHAVE_CONFIG_H
)

SRCS(
    src/agent.c
    src/agent_win.c
    src/bcrypt_pbkdf.c
    src/blowfish.c
    src/channel.c
    src/comp.c
    src/crypt.c
    src/global.c
    src/hostkey.c
    src/keepalive.c
    src/kex.c
    src/knownhost.c
    src/mac.c
    src/misc.c
    src/openssl.c
    src/packet.c
    src/pem.c
    src/publickey.c
    src/scp.c
    src/session.c
    src/sftp.c
    src/transport.c
    src/userauth.c
    src/version.c
)

END()
