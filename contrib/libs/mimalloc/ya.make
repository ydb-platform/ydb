# Generated by devtools/yamaker from nixpkgs 24.05.

LIBRARY()

LICENSE(MIT)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

VERSION(1.8.7)

ORIGINAL_SOURCE(https://github.com/microsoft/mimalloc/archive/v1.8.7.tar.gz)

PEERDIR(
    library/cpp/sanitizer/include
)

ADDINCL(
    GLOBAL contrib/libs/mimalloc/include
)

NO_COMPILER_WARNINGS()

NO_RUNTIME()

CFLAGS(
    -DMI_MALLOC_OVERRIDE
    -DMI_SHARED_LIB
    -DMI_SHARED_LIB_EXPORT
    -DMI_STATIC_LIB
)

SRCS(
    src/alloc-aligned.c
    src/alloc-posix.c
    src/alloc.c
    src/arena.c
    src/bitmap.c
    src/heap.c
    src/init.c
    src/libc.c
    src/options.c
    src/os.c
    src/page.c
    src/prim/prim.c
    src/random.c
    src/segment-map.c
    src/segment.c
    src/stats.c
)

END()
