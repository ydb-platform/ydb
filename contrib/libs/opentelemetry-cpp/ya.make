# Generated by devtools/yamaker from nixpkgs 24.05.

LIBRARY()

LICENSE(Apache-2.0)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

VERSION(1.23.0)

ORIGINAL_SOURCE(https://github.com/open-telemetry/opentelemetry-cpp/archive/v1.23.0.tar.gz)

PEERDIR(
    contrib/libs/curl
    contrib/libs/opentelemetry-cpp/api
    contrib/libs/opentelemetry-proto
    contrib/libs/protobuf
    contrib/restricted/nlohmann_json
)

ADDINCL(
    GLOBAL contrib/libs/opentelemetry-cpp/exporters/memory/include
    GLOBAL contrib/libs/opentelemetry-cpp/exporters/ostream/include
    GLOBAL contrib/libs/opentelemetry-cpp/exporters/otlp/include
    GLOBAL contrib/libs/opentelemetry-cpp/ext/include
    GLOBAL contrib/libs/opentelemetry-cpp/sdk
    GLOBAL contrib/libs/opentelemetry-cpp/sdk/include
    contrib/libs/opentelemetry-cpp/api/include
)

NO_COMPILER_WARNINGS()

NO_UTIL()

CFLAGS(
    -DOPENTELEMETRY_ABI_VERSION_NO=1
    GLOBAL -DOPENTELEMETRY_STL_VERSION=2023
)

SRCS(
    exporters/memory/src/in_memory_metric_data.cc
    exporters/memory/src/in_memory_metric_exporter_factory.cc
    exporters/memory/src/in_memory_span_exporter_factory.cc
    exporters/ostream/src/log_record_exporter.cc
    exporters/ostream/src/log_record_exporter_factory.cc
    exporters/ostream/src/metric_exporter.cc
    exporters/ostream/src/metric_exporter_factory.cc
    exporters/ostream/src/span_exporter.cc
    exporters/ostream/src/span_exporter_factory.cc
    exporters/otlp/src/otlp_environment.cc
    exporters/otlp/src/otlp_grpc_client.cc
    exporters/otlp/src/otlp_grpc_client_factory.cc
    exporters/otlp/src/otlp_grpc_exporter.cc
    exporters/otlp/src/otlp_grpc_exporter_factory.cc
    exporters/otlp/src/otlp_grpc_exporter_options.cc
    exporters/otlp/src/otlp_grpc_log_record_exporter.cc
    exporters/otlp/src/otlp_grpc_log_record_exporter_factory.cc
    exporters/otlp/src/otlp_grpc_log_record_exporter_options.cc
    exporters/otlp/src/otlp_grpc_metric_exporter.cc
    exporters/otlp/src/otlp_grpc_metric_exporter_factory.cc
    exporters/otlp/src/otlp_grpc_metric_exporter_options.cc
    exporters/otlp/src/otlp_grpc_utils.cc
    exporters/otlp/src/otlp_http.cc
    exporters/otlp/src/otlp_http_client.cc
    exporters/otlp/src/otlp_http_exporter.cc
    exporters/otlp/src/otlp_http_exporter_factory.cc
    exporters/otlp/src/otlp_http_exporter_options.cc
    exporters/otlp/src/otlp_http_log_record_exporter.cc
    exporters/otlp/src/otlp_http_log_record_exporter_factory.cc
    exporters/otlp/src/otlp_http_log_record_exporter_options.cc
    exporters/otlp/src/otlp_http_metric_exporter.cc
    exporters/otlp/src/otlp_http_metric_exporter_factory.cc
    exporters/otlp/src/otlp_http_metric_exporter_options.cc
    exporters/otlp/src/otlp_log_recordable.cc
    exporters/otlp/src/otlp_metric_utils.cc
    exporters/otlp/src/otlp_populate_attribute_utils.cc
    exporters/otlp/src/otlp_recordable.cc
    exporters/otlp/src/otlp_recordable_utils.cc
    ext/src/http/client/curl/http_client_curl.cc
    ext/src/http/client/curl/http_client_factory_curl.cc
    ext/src/http/client/curl/http_operation_curl.cc
    sdk/src/common/base64.cc
    sdk/src/common/disabled.cc
    sdk/src/common/env_variables.cc
    sdk/src/common/global_log_handler.cc
    sdk/src/common/random.cc
    sdk/src/logs/batch_log_record_processor.cc
    sdk/src/logs/batch_log_record_processor_factory.cc
    sdk/src/logs/event_logger.cc
    sdk/src/logs/event_logger_provider.cc
    sdk/src/logs/event_logger_provider_factory.cc
    sdk/src/logs/exporter.cc
    sdk/src/logs/logger.cc
    sdk/src/logs/logger_config.cc
    sdk/src/logs/logger_context.cc
    sdk/src/logs/logger_context_factory.cc
    sdk/src/logs/logger_provider.cc
    sdk/src/logs/logger_provider_factory.cc
    sdk/src/logs/multi_log_record_processor.cc
    sdk/src/logs/multi_log_record_processor_factory.cc
    sdk/src/logs/multi_recordable.cc
    sdk/src/logs/provider.cc
    sdk/src/logs/read_write_log_record.cc
    sdk/src/logs/readable_log_record.cc
    sdk/src/logs/simple_log_record_processor.cc
    sdk/src/logs/simple_log_record_processor_factory.cc
    sdk/src/metrics/aggregation/base2_exponential_histogram_aggregation.cc
    sdk/src/metrics/aggregation/base2_exponential_histogram_indexer.cc
    sdk/src/metrics/aggregation/histogram_aggregation.cc
    sdk/src/metrics/aggregation/lastvalue_aggregation.cc
    sdk/src/metrics/aggregation/sum_aggregation.cc
    sdk/src/metrics/async_instruments.cc
    sdk/src/metrics/data/circular_buffer.cc
    sdk/src/metrics/exemplar/reservoir.cc
    sdk/src/metrics/export/periodic_exporting_metric_reader.cc
    sdk/src/metrics/export/periodic_exporting_metric_reader_factory.cc
    sdk/src/metrics/export/periodic_exporting_metric_reader_options.cc
    sdk/src/metrics/instrument_metadata_validator.cc
    sdk/src/metrics/meter.cc
    sdk/src/metrics/meter_config.cc
    sdk/src/metrics/meter_context.cc
    sdk/src/metrics/meter_context_factory.cc
    sdk/src/metrics/meter_provider.cc
    sdk/src/metrics/meter_provider_factory.cc
    sdk/src/metrics/metric_reader.cc
    sdk/src/metrics/provider.cc
    sdk/src/metrics/state/filtered_ordered_attribute_map.cc
    sdk/src/metrics/state/metric_collector.cc
    sdk/src/metrics/state/observable_registry.cc
    sdk/src/metrics/state/sync_metric_storage.cc
    sdk/src/metrics/state/temporal_metric_storage.cc
    sdk/src/metrics/sync_instruments.cc
    sdk/src/metrics/view/instrument_selector_factory.cc
    sdk/src/metrics/view/meter_selector_factory.cc
    sdk/src/metrics/view/view_factory.cc
    sdk/src/metrics/view/view_registry_factory.cc
    sdk/src/resource/resource.cc
    sdk/src/resource/resource_detector.cc
    sdk/src/trace/batch_span_processor.cc
    sdk/src/trace/batch_span_processor_factory.cc
    sdk/src/trace/exporter.cc
    sdk/src/trace/provider.cc
    sdk/src/trace/random_id_generator.cc
    sdk/src/trace/random_id_generator_factory.cc
    sdk/src/trace/samplers/always_off_factory.cc
    sdk/src/trace/samplers/always_on_factory.cc
    sdk/src/trace/samplers/parent.cc
    sdk/src/trace/samplers/parent_factory.cc
    sdk/src/trace/samplers/trace_id_ratio.cc
    sdk/src/trace/samplers/trace_id_ratio_factory.cc
    sdk/src/trace/simple_processor_factory.cc
    sdk/src/trace/span.cc
    sdk/src/trace/tracer.cc
    sdk/src/trace/tracer_config.cc
    sdk/src/trace/tracer_context.cc
    sdk/src/trace/tracer_context_factory.cc
    sdk/src/trace/tracer_provider.cc
    sdk/src/trace/tracer_provider_factory.cc
    sdk/src/version/version.cc
)

IF (OS_WINDOWS)
    SRCS(
        sdk/src/common/platform/fork_windows.cc
    )
ELSE()
    SRCS(
        sdk/src/common/platform/fork_unix.cc
    )
ENDIF()

END()
