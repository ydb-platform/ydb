# Generated by devtools/yamaker from nixpkgs 24.05.

LIBRARY()

LICENSE(Apache-2.0)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

VERSION(0.7.18)

ORIGINAL_SOURCE(https://github.com/awslabs/aws-c-auth/archive/v0.7.18.tar.gz)

PEERDIR(
    contrib/restricted/aws/aws-c-cal
    contrib/restricted/aws/aws-c-common
    contrib/restricted/aws/aws-c-http
    contrib/restricted/aws/aws-c-io
    contrib/restricted/aws/aws-c-sdkutils
)

ADDINCL(
    GLOBAL contrib/restricted/aws/aws-c-auth/include
)

NO_COMPILER_WARNINGS()

NO_RUNTIME()

CFLAGS(
    -DAWS_AUTH_USE_IMPORT_EXPORT
    -DAWS_CAL_USE_IMPORT_EXPORT
    -DAWS_COMMON_USE_IMPORT_EXPORT
    -DAWS_COMPRESSION_USE_IMPORT_EXPORT
    -DAWS_HTTP_USE_IMPORT_EXPORT
    -DAWS_IO_USE_IMPORT_EXPORT
    -DAWS_SDKUTILS_USE_IMPORT_EXPORT
    -DAWS_USE_EPOLL
    -DCJSON_HIDE_SYMBOLS
    -DHAVE_SYSCONF
    -DINTEL_NO_ITTNOTIFY_API
)

IF (OS_WINDOWS)
    CFLAGS(
        -DAWS_AUTH_EXPORTS
    )
ENDIF()

SRCS(
    source/auth.c
    source/aws_imds_client.c
    source/aws_profile.c
    source/aws_signing.c
    source/credentials.c
    source/credentials_provider_anonymous.c
    source/credentials_provider_cached.c
    source/credentials_provider_chain.c
    source/credentials_provider_cognito.c
    source/credentials_provider_default_chain.c
    source/credentials_provider_delegate.c
    source/credentials_provider_ecs.c
    source/credentials_provider_environment.c
    source/credentials_provider_imds.c
    source/credentials_provider_process.c
    source/credentials_provider_profile.c
    source/credentials_provider_sso.c
    source/credentials_provider_static.c
    source/credentials_provider_sts.c
    source/credentials_provider_sts_web_identity.c
    source/credentials_provider_x509.c
    source/credentials_utils.c
    source/key_derivation.c
    source/signable.c
    source/signable_chunk.c
    source/signable_http_request.c
    source/signable_trailer.c
    source/signing.c
    source/signing_config.c
    source/signing_result.c
    source/sigv4_http_request.c
    source/sso_token_utils.c
    source/token_provider_sso_profile.c
    source/token_provider_sso_session.c
)

END()
