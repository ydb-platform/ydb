# Generated by devtools/yamaker from nixpkgs 24.05.

LIBRARY()

LICENSE(Apache-2.0)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

VERSION(0.2.20)

ORIGINAL_SOURCE(https://github.com/awslabs/aws-c-event-stream/archive/v0.2.20.tar.gz)

PEERDIR(
    contrib/restricted/aws/aws-c-common
    contrib/restricted/aws/aws-c-io
    contrib/restricted/aws/aws-checksums
)

ADDINCL(
    GLOBAL contrib/restricted/aws/aws-c-event-stream/include
)

NO_COMPILER_WARNINGS()

NO_RUNTIME()

CFLAGS(
    -DAWS_CAL_USE_IMPORT_EXPORT
    -DAWS_CHECKSUMS_USE_IMPORT_EXPORT
    -DAWS_COMMON_USE_IMPORT_EXPORT
    -DAWS_EVENT_STREAM_USE_IMPORT_EXPORT
    -DAWS_IO_USE_IMPORT_EXPORT
    -DAWS_USE_EPOLL
    -DHAVE_SYSCONF
    -DINTEL_NO_ITTNOTIFY_API
)

IF (OS_WINDOWS)
    CFLAGS(
        -DAWS_EVENT_STREAM_EXPORTS
    )
ENDIF()

SRCS(
    source/event_stream.c
    source/event_stream_channel_handler.c
    source/event_stream_rpc.c
    source/event_stream_rpc_client.c
    source/event_stream_rpc_server.c
)

END()
