# Generated by devtools/yamaker from nixpkgs 24.05.

LIBRARY()

LICENSE(Apache-2.0)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

VERSION(0.7.6)

ORIGINAL_SOURCE(https://github.com/awslabs/aws-c-http/archive/v0.7.6.tar.gz)

PEERDIR(
    contrib/restricted/aws/aws-c-cal
    contrib/restricted/aws/aws-c-common
    contrib/restricted/aws/aws-c-compression
    contrib/restricted/aws/aws-c-io
)

ADDINCL(
    GLOBAL contrib/restricted/aws/aws-c-http/include
)

NO_COMPILER_WARNINGS()

NO_RUNTIME()

CFLAGS(
    -DAWS_CAL_USE_IMPORT_EXPORT
    -DAWS_COMMON_USE_IMPORT_EXPORT
    -DAWS_COMPRESSION_USE_IMPORT_EXPORT
    -DAWS_HTTP_USE_IMPORT_EXPORT
    -DAWS_IO_USE_IMPORT_EXPORT
    -DAWS_USE_EPOLL
    -DHAVE_SYSCONF
    -DINTEL_NO_ITTNOTIFY_API
)

IF (CLANG_CL)
    CFLAGS(
        -DAWS_HTTP_EXPORTS
        -std=c99
    )
ELSEIF (OS_WINDOWS)
    CFLAGS(
        -DAWS_HTTP_EXPORTS
    )
ENDIF()

SRCS(
    source/connection.c
    source/connection_manager.c
    source/connection_monitor.c
    source/h1_connection.c
    source/h1_decoder.c
    source/h1_encoder.c
    source/h1_stream.c
    source/h2_connection.c
    source/h2_decoder.c
    source/h2_frames.c
    source/h2_stream.c
    source/hpack.c
    source/hpack_decoder.c
    source/hpack_encoder.c
    source/hpack_huffman_static.c
    source/http.c
    source/http2_stream_manager.c
    source/proxy_connection.c
    source/proxy_strategy.c
    source/random_access_set.c
    source/request_response.c
    source/statistics.c
    source/strutil.c
    source/websocket.c
    source/websocket_bootstrap.c
    source/websocket_decoder.c
    source/websocket_encoder.c
)

END()
