# Generated by devtools/yamaker from nixpkgs 22.11.

LIBRARY()

LICENSE(Apache-2.0)

LICENSE_TEXTS(.yandex_meta/licenses.list.txt)

VERSION(1.8.3)

ORIGINAL_SOURCE(https://github.com/google/benchmark/archive/v1.8.3.tar.gz)

ADDINCL(
    GLOBAL contrib/restricted/google/benchmark/include
    contrib/restricted/google/benchmark/src
)

NO_COMPILER_WARNINGS()

NO_UTIL()

CFLAGS(
    GLOBAL -DBENCHMARK_STATIC_DEFINE
    -DHAVE_POSIX_REGEX
    -DHAVE_PTHREAD_AFFINITY
    -DHAVE_STD_REGEX
    -DHAVE_STEADY_CLOCK
)

IF (OS_LINUX)
    CFLAGS(
        -DBENCHMARK_HAS_PTHREAD_AFFINITY
    )
ENDIF()

SRCS(
    src/benchmark.cc
    src/benchmark_api_internal.cc
    src/benchmark_name.cc
    src/benchmark_register.cc
    src/benchmark_runner.cc
    src/check.cc
    src/colorprint.cc
    src/commandlineflags.cc
    src/complexity.cc
    src/console_reporter.cc
    src/counter.cc
    src/csv_reporter.cc
    src/json_reporter.cc
    src/perf_counters.cc
    src/reporter.cc
    src/statistics.cc
    src/string_util.cc
    src/sysinfo.cc
    src/timers.cc
)

END()

RECURSE(
    test
)
