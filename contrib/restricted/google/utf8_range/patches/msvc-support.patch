--- contrib/restricted/google/utf8_range/range2-sse.c	(index)
+++ contrib/restricted/google/utf8_range/range2-sse.c	(working tree)
@@ -6,7 +6,12 @@

 #include <stdio.h>
 #include <stdint.h>
-#include <x86intrin.h>
+
+#if defined(_MSC_VER)
+    #include <intrin.h>
+#else
+    #include <x86intrin.h>
+#endif

 int utf8_naive(const unsigned char *data, int len);

