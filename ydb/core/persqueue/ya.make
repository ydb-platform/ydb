LIBRARY()

SRCS(
    actor_persqueue_client_iface.h
    blob.cpp
    cluster_tracker.cpp
    event_helpers.cpp
    fetch_request_actor.cpp
    header.cpp
    heartbeat.cpp
    key.cpp
    metering_sink.cpp
    mirrorer.cpp
    mirrorer.h
    ownerinfo.cpp
    partition_init.cpp
    partition_monitoring.cpp
    partition_read.cpp
    partition_scale_request.cpp
    partition_scale_manager.cpp
    partition_sourcemanager.cpp
    partition_write.cpp
    partition.cpp
    percentile_counter.cpp
    pq.cpp
    pq_database.cpp
    pq_impl.cpp
    pq_l2_cache.cpp
    pq_rl_helpers.cpp
    quota_tracker.cpp
    read_balancer__balancing.cpp
    read_balancer.cpp
    account_read_quoter.cpp
    read_quoter.cpp
    sourceid.cpp
    subscriber.cpp
    transaction.cpp
    type_codecs_defs.cpp
    user_info.cpp
    utils.cpp
    write_meta.cpp
    write_quoter.cpp
    microseconds_sliding_window.cpp
    dread_cache_service/caching_service.cpp
)

GENERATE_ENUM_SERIALIZATION(read_balancer__balancing.h)
GENERATE_ENUM_SERIALIZATION(sourceid_info.h)

PEERDIR(
    ydb/library/actors/core
    library/cpp/html/pcdata
    library/cpp/json
    ydb/core/base
    ydb/core/engine/minikql
    ydb/core/keyvalue
    ydb/core/kqp/common
    ydb/core/metering
    ydb/core/persqueue/codecs
    ydb/core/persqueue/config
    ydb/core/persqueue/events
    ydb/core/persqueue/partition_key_range
    ydb/core/persqueue/writer
    ydb/core/protos
    ydb/library/logger
    ydb/library/persqueue/counter_time_keeper
    ydb/library/persqueue/topic_parser
    ydb/library/protobuf_printer
    ydb/public/lib/base
    ydb/public/sdk/cpp/client/ydb_persqueue_public
)

END()

RECURSE_FOR_TESTS(
    ut
    dread_cache_service/ut
    ut/slow
)
