# This file was generated by the YaTool build system (https://github.com/yandex/yatool),
# from a source YaTool build configuration provided in ya.make files.
#
# If the repository supports both CMake and ya build configurations, please modify both of them.
#
# If only CMake build configuration is supported then modify only CMake files and note that only
# simple modifications are allowed like adding source-files to targets or adding simple properties
# like target_include_directories. These modifications will be ported to original ya.make files
# by maintainers. Any complex modifications which can't be easily ported back to the ya build
# system may be rejected.
#
# Please refer to the build instructions in the repository for more information about manual
# changes in this file.

get_built_tool_path(
  TOOL_enum_parser_bin
  TOOL_enum_parser_dependency
  tools/enum_parser/enum_parser
  enum_parser
)

get_built_tool_path(
  TOOL_protoc_bin
  TOOL_protoc_dependency
  contrib/tools/protoc/bin
  protoc
)

get_built_tool_path(
  TOOL_cpp_styleguide_bin
  TOOL_cpp_styleguide_dependency
  contrib/tools/protoc/plugins/cpp_styleguide
  cpp_styleguide
)

add_subdirectory(protos)
add_subdirectory(test)
add_subdirectory(benchmark)
add_subdirectory(ut)
add_subdirectory(ut_large)
add_subdirectory(ut_pg)
add_subdirectory(ut_util)

add_library(ydb-core-tablet_flat)


target_compile_options(ydb-core-tablet_flat PRIVATE
  -DUSE_CURRENT_UDF_ABI_VERSION
)

target_link_libraries(ydb-core-tablet_flat PUBLIC
  contrib-libs-cxxsupp
  yutil
  tools-enum_parser-enum_serialization_runtime
  contrib-libs-protobuf
  library-actors-util
  library-actors-core
  ydb-library-services
  cpp-containers-absl_flat_hash
  cpp-containers-intrusive_rb_tree
  cpp-containers-stack_vector
  cpp-digest-crc32c
  cpp-html-pcdata
  library-cpp-lwtrace
  cpp-lwtrace-mon
  ydb-core-base
  core-control-lib
  ydb-core-protos
  ydb-core-tablet
  core-tablet_flat-protos
  ydb-core-util
  essentials-types-binary_json
  essentials-types-dynumber
  library-mkql_proto-protos
)

target_sources(ydb-core-tablet_flat PRIVATE
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_boot_lease.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_boot_misc.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_comp.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_comp_create.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_comp_gen.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_database.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_dbase_scheme.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_dbase_apply.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_exec_broker.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_exec_commit.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_exec_commit_mgr.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_exec_seat.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_bootlogic.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_borrowlogic.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_compaction_logic.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_counters.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_data_cleanup_logic.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_db_mon.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_gclogic.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_bio_actor.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_snapshot.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_tx_env.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_txloglogic.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_fwd_misc.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_load_blob_queue.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_mem_warm.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_sausagecache.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_sausage_meta.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_part_charge_create.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_part_charge_range.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_page_label.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_part_dump.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_part_index_iter_create.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_part_loader.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_part_overlay.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_part_outset.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_part_slice.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_range_cache.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_row_versions.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_stat_table.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_stat_table_btree_index.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_stat_table_btree_index_histogram.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_stat_part_group_iter_create.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_store_hotdog.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_table.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_table_part.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_table_misc.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_table_observer.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_table_committed.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/probes.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/shared_handle.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/shared_sausagecache.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/tablet_flat_executor.cpp
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/tablet_flat_executed.cpp
  ${PROJECT_BINARY_DIR}/ydb/core/tablet_flat/flat_executor.pb.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/defs.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_cxx_database.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_database.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_bootlogic.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_borrowlogic.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_compaction_logic.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_counters.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_gclogic.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_tx_env.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_txloglogic.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_iterator.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_sausagecache.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_stat_part.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_stat_table.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_table.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_table_part.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_table_observer.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_table_committed.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_update_op.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/shared_sausagecache.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/tablet_flat_executor.h
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/tablet_flat_executed.h
)

target_proto_messages(ydb-core-tablet_flat PRIVATE
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor.proto
)


target_proto_outs(ydb-core-tablet_flat
  --cpp_out=${PROJECT_BINARY_DIR}/
  --cpp_styleguide_out=${PROJECT_BINARY_DIR}/
)

target_proto_addincls(ydb-core-tablet_flat
  ./
  ${PROJECT_SOURCE_DIR}/
  ${PROJECT_BINARY_DIR}
  ${PROJECT_SOURCE_DIR}
  ${PROJECT_SOURCE_DIR}/contrib/libs/protobuf/src
  ${PROJECT_SOURCE_DIR}/contrib/libs/opentelemetry-proto
  ${PROJECT_SOURCE_DIR}/contrib/libs/apache/orc-format/src/main/proto/orc/proto
  ${PROJECT_SOURCE_DIR}/contrib/libs/googleapis-common-protos
  ${PROJECT_BINARY_DIR}
  ${PROJECT_SOURCE_DIR}/contrib/libs/protobuf/src
)

generate_enum_serilization(ydb-core-tablet_flat
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_comp_gen.h
  INCLUDE_HEADERS
  ydb/core/tablet_flat/flat_comp_gen.h
)

generate_enum_serilization(ydb-core-tablet_flat
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_executor_compaction_logic.h
  INCLUDE_HEADERS
  ydb/core/tablet_flat/flat_executor_compaction_logic.h
)

generate_enum_serilization(ydb-core-tablet_flat
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_page_iface.h
  INCLUDE_HEADERS
  ydb/core/tablet_flat/flat_page_iface.h
)

generate_enum_serilization(ydb-core-tablet_flat
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_part_loader.h
  INCLUDE_HEADERS
  ydb/core/tablet_flat/flat_part_loader.h
)

generate_enum_serilization(ydb-core-tablet_flat
  ${PROJECT_SOURCE_DIR}/ydb/core/tablet_flat/flat_row_eggs.h
  INCLUDE_HEADERS
  ydb/core/tablet_flat/flat_row_eggs.h
)
