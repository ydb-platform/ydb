<html>
  <head>
    <link rel='stylesheet' href='../cms/ext/bootstrap.min.css'>
    <script language='javascript' type='text/javascript' src='../static/js/jquery.min.js'></script>
    <script language='javascript' type='text/javascript' src='../cms/ext/bootstrap.bundle.min.js'></script>
    <link rel='stylesheet' href='../jquery.tablesorter.css'>
    <script language='javascript' type='text/javascript' src='../jquery.tablesorter.js'></script>
    <link rel="stylesheet" href="../cms/ext/theme.blue.css"></link>

    <link rel="stylesheet" href="../cms/common.css"></link>
    <link rel="stylesheet" href="../cms/datashard.css"></link>
    <script language="javascript" type="text/javascript" src="../cms/common.js"></script>
    <script language="javascript" type="text/javascript" src="../cms/enums.js"></script>
    <script language="javascript" type="text/javascript" src="../cms/proto_types.js"></script>
    <script language="javascript" type="text/javascript" src="../cms/datashard_info.js"></script>
    <script language="javascript" type="text/javascript" src="../cms/datashard_ops_list.js"></script>
    <script language="javascript" type="text/javascript" src="../cms/datashard_op.js"></script>
    <script language="javascript" type="text/javascript" src="../cms/datashard_slow_ops.js"></script>
    <script language="javascript" type="text/javascript" src="../cms/datashard_rs.js"></script>
    <script language="javascript" type="text/javascript" src="../cms/datashard_hist.js"></script>
    <script language="javascript" type="text/javascript" src="../cms/datashard.js"></script>

    <style type="text/css">
      .table-nonfluid { width: auto; }
      .narrow-line50 {line-height: 50%}
      .narrow-line60 {line-height: 60%}
      .narrow-line70 {line-height: 70%}
      .narrow-line80 {line-height: 80%}
      .narrow-line90 {line-height: 90%}
    </style>
  </head>
  <body>
    <ol class='breadcrumb'>
      <li class='breadcrumb-item'><a id='host-ref' href='.'>YDB Developer UI</a></li>
      <li class='breadcrumb-item active' id='shard-ref'>DataShard</li>
    </ol>
    <div class="container"><h3 id="main-title">DataShard</h3>
      <div id="enums-error" class="error"></div>
      <div id="proto-types-error" class="error"></div>
      <ul class="nav nav-tabs" id="ds-tabs">
        <li class="nav-item">
          <a class="nav-link active" href="#ds-info" data-toggle="tab" id="ds-info-link">Generic Info</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#ds-ops-list" data-toggle="tab" id="ds-ops-list-link">Operations</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#ds-op" data-toggle="tab" id="ds-op-link">Operation Info</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#ds-slow-ops" data-toggle="tab" id="ds-slow-ops-link">Slow Operations</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#ds-rs" data-toggle="tab" id="ds-rs-link">Read Sets</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#ds-hist" data-toggle="tab" id="ds-hist-link">Data Histograms</a>
        </li>
      </ul>
      <div class="tab-content" style="padding-top: 10px">
        <div id="ds-info" class="tab-pane fade in active show">
          <div id="ds-info-error" class="error"></div>
          <div class="row">
            <div class="col">
              <table class="ds-info">
                <caption class="ds-info">Tablet info</caption>
                <tbody class="ds-info">
                  <tr class="ds-info">
                    <td class="ds-info">SchemeShard</td>
                    <td class="ds-info" id="tablet-info-schemeshard">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Mediator</td>
                    <td class="ds-info" id="tablet-info-mediator">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Generation</td>
                    <td class="ds-info" id="tablet-info-generation">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Role</td>
                    <td class="ds-info" id="tablet-info-role">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">State</td>
                    <td class="ds-info" id="tablet-info-state">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">HasSharedBlobs</td>
                    <td class="ds-info" id="tablet-info-shared-blobs">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Change sender</td>
                    <td class="ds-info" id="tablet-info-change-sender">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Volatile txs</td>
                    <td class="ds-info" id="tablet-info-volatile-txs">Loading...</td>
                  </tr>
                </tbody>
              </table>
              <table class="ds-info">
                <caption class="ds-info">Activities</caption>
                <tbody class="ds-info">
                  <tr class="ds-info">
                    <td class="ds-info">Last planned tx</td>
                    <td class="ds-info" id="activities-last-planned-tx">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Last completed tx</td>
                    <td class="ds-info" id="activities-last-completed-tx">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Utmost completed tx</td>
                    <td class="ds-info" id="activities-utmost-completed-tx">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Data tx complete lag (ms)</td>
                    <td class="ds-info" id="activities-data-tx-complete-lag">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Scan tx complete lag (ms)</td>
                    <td class="ds-info" id="activities-scan-tx-complete-lag">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Planned txs in-fly</td>
                    <td class="ds-info" id="activities-in-fly-planned">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Immediate txs in-fly</td>
                    <td class="ds-info" id="activities-in-fly-immediate">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Executing operations</td>
                    <td class="ds-info" id="activities-executing-ops">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Waiting operations</td>
                    <td class="ds-info" id="activities-waiting-ops">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Execute blockers</td>
                    <td class="ds-info" id="activities-execute-blockers">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Cached data txs</td>
                    <td class="ds-info" id="activities-data-tx-cached">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Out read sets</td>
                    <td class="ds-info" id="activities-out-rs">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Out read sets acks</td>
                    <td class="ds-info" id="activities-our-rs-acks">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Delayed acks</td>
                    <td class="ds-info" id="activities-delayed-acks">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Locks</td>
                    <td class="ds-info" id="activities-locks">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Broken locks</td>
                    <td class="ds-info" id="activities-broken-locks">Loading...</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col">
              <div id="user-tables">
              </div>
              <table class="ds-info">
                <caption class="ds-info">Immediate controls (<a href="../cms#page=configs&show=config-items-39">configure</a>)</caption>
                <tbody class="ds-info" id="tablet-info-controls">
                </tbody>
              </table>
              <table class="ds-info">
                <caption class="ds-info">Pipeline config</caption>
                <tbody class="ds-info">
                  <tr class="ds-info">
                    <td class="ds-info">Out-of-order enabled</td>
                    <td class="ds-info" id="pipeline-out-of-order-enabled">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Active txs limit</td>
                    <td class="ds-info" id="pipeline-active-txs-limit">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Allow immediate</td>
                    <td class="ds-info" id="pipeline-allow-immediate">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Force online RW</td>
                    <td class="ds-info" id="pipeline-force-online-rw">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Dirty online</td>
                    <td class="ds-info" id="pipeline-dirty-online">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Dirty immediate</td>
                    <td class="ds-info" id="pipeline-dirty-immediate">Loading...</td>
                  </tr>
                  <tr class="ds-info">
                    <td class="ds-info">Data tx cache limit</td>
                    <td class="ds-info" id="pipeline-data-tx-cache-limit">Loading...</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div id="ds-ops-list" class="tab-pane fade">
          <div id="ds-ops-list-error" class="error"></div>
          <table id="ds-ops-list-table" class="tablesorter">
            <thead>
              <tr>
                <th>TxId</th>
                <th>Step</th>
                <th>Kind</th>
                <th>Immediate</th>
                <th>ReadOnly</th>
                <th>Waiting</th>
                <th>Executing</th>
                <th>Complete</th>
                <th>CurrentUnit</th>
                <th>ReceivedAt</th>
              </tr>
            </thead>
            <tbody id="ds-ops-list-body">
            </tbody>
          </table>
        </div>
        <div id="ds-op" class="tab-pane fade">
          <div id="ds-op-error" class="error"></div>
          <div class="form-group row">
            <div class="col-sm-auto">
              <input type="number" id="ds-op-id-input" class="form-control" placeholder="Enter operation ID"/>
            </div>
            <button type="button" id="ds-op-show" class="btn btn-primary" data-action="show">Show</button>
          </div>
          <div id="ds-op-info"></div>
        </div>
        <div id="ds-slow-ops" class="tab-pane fade">
          <div id="ds-slow-ops-error" class="error"></div>
          <table id="ds-slow-ops-table" class="tablesorter">
            <thead>
              <tr>
                <th>TxId</th>
                <th>Step</th>
                <th>Kind</th>
                <th>ReceivedAt</th>
                <th>Immediate</th>
                <th>ReadOnly</th>
                <th>ExecutionTime</th>
              </tr>
            </thead>
            <tbody id="ds-slow-ops-body">
            </tbody>
          </table>
        </div>
        <div id="ds-rs" class="tab-pane fade">
          <div id="ds-rs-error" class="error"></div>
          <table id="ds-out-rs-table" class="tablesorter">
            <caption class="ds-info">Out Read Sets</caption>
            <thead>
              <tr>
                <th>TxId</th>
                <th>Origin</th>
                <th>Source</th>
                <th>Destination</th>
                <th>SeqNo</th>
              </tr>
            </thead>
            <tbody id="ds-out-rs-body">
            </tbody>
          </table>
          <table id="ds-out-rs-ack-table" class="tablesorter">
            <caption class="ds-info">Out Read Set Acks</caption>
            <thead>
              <tr>
                <th>TxId</th>
                <th>Origin</th>
                <th>Source</th>
                <th>Destination</th>
                <th>SeqNo</th>
              </tr>
            </thead>
            <tbody id="ds-out-rs-ack-body">
            </tbody>
          </table>
          <table id="ds-delayed-ack-table" class="tablesorter">
            <caption class="ds-info">Delayed Acks</caption>
            <thead>
              <tr>
                <th>TxId</th>
                <th>Origin</th>
                <th>Source</th>
                <th>Destination</th>
                <th>SeqNo</th>
              </tr>
            </thead>
            <tbody id="ds-delayed-ack-body">
            </tbody>
          </table>
          <table id="ds-rs-expectations-table" class="tablesorter">
            <caption class="ds-info">Expectations</caption>
            <thead>
              <tr>
                <th>TxId</th>
                <th>Step</th>
                <th>Source</th>
              </tr>
            </thead>
            <tbody id="ds-rs-expectations-body">
            </tbody>
          </table>
          <table id="ds-rs-pipes-table" class="tablesorter">
            <caption class="ds-info">Pipes</caption>
            <thead>
              <tr>
                <th>Destination</th>
                <th>OutReadSets</th>
                <th>Subscribed</th>
              </tr>
            </thead>
            <tbody id="ds-rs-pipes-body">
            </tbody>
          </table>
        </div>
        <div id="ds-hist" class="tab-pane fade">
          <div id="ds-hist-error" class="error"></div>
          <div id="ds-hist-tables"></div>
        </div>
      </div>
    </div>
  </body>
</html>
