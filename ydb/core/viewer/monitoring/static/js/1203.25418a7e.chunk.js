"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[1203],{90053:(e,t,a)=>{a.d(t,{E:()=>v});var l=a(8873),n=a(84476),s=a(24555),i=a(21334),r=a(77506),o=a(90182),d=a(48372);const c=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),u=(0,d.g4)("ydb-diagnostics-autorefresh-control",{en:c});var h=a(60712);const m=(0,r.cn)("auto-refresh-control");function v({className:e}){const t=(0,o.YQ)(),[a,r]=(0,o.Nt)();return(0,h.jsxs)("div",{className:m(null,e),children:[(0,h.jsx)(n.$,{view:"flat-secondary",onClick:()=>{t(i.F.util.invalidateTags(["All"]))},extraProps:{"aria-label":u("Refresh")},children:(0,h.jsx)(n.$.Icon,{children:(0,h.jsx)(l.A,{})})}),(0,h.jsxs)(s.l,{value:[String(a)],onUpdate:e=>{r(Number(e))},width:85,qa:"ydb-autorefresh-select",children:[(0,h.jsx)(s.l.Option,{value:"0",children:u("None")}),(0,h.jsx)(s.l.Option,{value:"15000",children:u("15 sec")}),(0,h.jsx)(s.l.Option,{value:"60000",children:u("1 min")}),(0,h.jsx)(s.l.Option,{value:"120000",children:u("2 min")}),(0,h.jsx)(s.l.Option,{value:"300000",children:u("5 min")})]})]})}},22983:(e,t,a)=>{a.d(t,{B:()=>d});var l=a(59284),n=a(84476),s=a(84375),i=a(55974),r=a(42829),o=a(60712);function d({children:e,onConfirmAction:t,onConfirmActionSuccess:a,dialogHeader:d,dialogText:c,retryButtonText:u,buttonDisabled:h=!1,buttonView:m="action",buttonTitle:v,buttonClassName:p,withPopover:b=!1,popoverContent:g,popoverPlacement:x="right",popoverDisabled:y=!0}){const[f,j]=l.useState(!1),[w,N]=l.useState(!1),[S,T]=l.useState(!1),_=()=>(0,o.jsx)(n.$,{onClick:()=>j(!0),view:m,disabled:h,loading:!h&&w,className:p,title:v,children:e});return(0,o.jsxs)(l.Fragment,{children:[(0,o.jsx)(i.g,{visible:f,header:d,text:c,withRetry:S,retryButtonText:u,onConfirm:async e=>{N(!0),await t(e)},onConfirmActionSuccess:async()=>{T(!1);try{await(null===a||void 0===a?void 0:a())}finally{N(!1)}},onConfirmActionError:e=>{T((0,r.D)(e)),N(!1)},onClose:()=>{j(!1)}}),b?(0,o.jsx)(s.A,{content:g,placement:x,disabled:y,children:_()}):_()]})}},55974:(e,t,a)=>{a.d(t,{g:()=>g});var l=a(59284),n=a(18677),s=a(71153),i=a(74321),r=a(2198),o=a(99991),d=a(89954),c=a(77506),u=a(48372);const h=JSON.parse('{"default-error":"Something went wrong, action cannot be completed","no-rights-error":"You don\'t have enough rights to complete the operation","button-confirm":"Confirm","button-retry":"Retry","button-cancel":"Cancel","button-close":"Close","checkbox-text":"I understand what I\'m doing"}'),m=(0,u.g4)("ydb-critical-action-dialog",{en:h});var v=a(60712);const p=(0,c.cn)("ydb-critical-dialog"),b=e=>e.data&&"issues"in e.data&&e.data.issues?(0,v.jsx)(d.O,{hideSeverity:!0,data:e.data}):403===e.status?m("no-rights-error"):e.statusText?e.statusText:m("default-error");function g({visible:e,header:t,text:a,withRetry:d,retryButtonText:c,withCheckBox:u,onClose:h,onConfirm:g,onConfirmActionSuccess:x,onConfirmActionError:y}){const[f,j]=l.useState(!1),[w,N]=l.useState(),[S,T]=l.useState(!1),_=async e=>(j(!0),g(e).then((()=>{x(),h()})).catch((e=>{y(e),N(e)})).finally((()=>{j(!1)})));return(0,v.jsx)(r.l,{open:e,hasCloseButton:!1,className:p(),size:"s",onClose:h,onTransitionExited:()=>{N(void 0),T(!1)},children:w?(0,v.jsxs)(l.Fragment,{children:[(0,v.jsx)(r.l.Header,{caption:t}),(0,v.jsx)(r.l.Body,{className:p("body"),children:(0,v.jsxs)("div",{className:p("body-message",{error:!0}),children:[(0,v.jsx)("span",{className:p("error-icon"),children:(0,v.jsx)(n.A,{width:"24",height:"22"})}),b(w)]})}),(0,v.jsx)(r.l.Footer,{loading:!1,preset:"default",textButtonApply:d?c||m("button-retry"):void 0,textButtonCancel:m("button-close"),onClickButtonApply:()=>_(!0),onClickButtonCancel:h})]}):(0,v.jsxs)(l.Fragment,{children:[(0,v.jsx)(r.l.Header,{caption:t}),(0,v.jsxs)(r.l.Body,{className:p("body"),children:[(0,v.jsxs)("div",{className:p("body-message",{warning:!0}),children:[(0,v.jsx)("span",{className:p("warning-icon"),children:(0,v.jsx)(o.I,{data:s.A,size:24})}),a]}),u?(0,v.jsx)(i.S,{checked:S,onUpdate:T,children:m("checkbox-text")}):null]}),(0,v.jsx)(r.l.Footer,{loading:f,preset:"default",textButtonApply:m("button-confirm"),textButtonCancel:m("button-cancel"),propsButtonApply:{type:"submit",disabled:u&&!S},onClickButtonCancel:h,onClickButtonApply:()=>_()})]})})}},42829:(e,t,a)=>{a.d(t,{D:()=>l});const l=e=>Boolean(e&&"object"===typeof e&&"retryPossible"in e&&e.retryPossible)},3685:(e,t,a)=>{a.d(t,{$:()=>r});var l=a(77506),n=a(33775),s=a(60712);const i=(0,l.cn)("ydb-entity-page-title");function r({entityName:e,status:t,id:a,className:l}){return(0,s.jsxs)("div",{className:i(null,l),children:[(0,s.jsx)("span",{className:i("prefix"),children:e}),(0,s.jsx)(n.k,{className:i("icon"),status:t,size:"s"}),a]})}},10508:(e,t,a)=>{a.d(t,{c:()=>u});var l=a(67884),n=a(96873),s=a(54090),i=a(77506),r=a(82015),o=a(33775),d=a(60712);const c=(0,i.cn)("entity-status");function u({status:e=s.m.Grey,name:t="",label:a,path:i,iconPath:u,size:h="s",mode:m="color",showStatus:v=!0,externalLink:p=!1,withLeftTrim:b=!1,hasClipboardButton:g,clipboardButtonAlwaysVisible:x=!1,className:y}){const f=()=>v?(0,d.jsx)(o.k,{className:c("icon"),status:e,size:h,mode:m}):null;return(0,d.jsxs)("div",{className:c(null,y),children:[u?(j=u,(0,d.jsx)(l.N,{target:"_blank",href:j,children:f()})):f(),a&&(0,d.jsx)("span",{title:a,className:c("label",{size:h,state:e.toLowerCase()}),children:a}),(i||t)&&(0,d.jsxs)("div",{className:c("wrapper",{"with-button":g}),children:[(0,d.jsx)("span",{className:c("link",{"with-left-trim":b}),title:t,children:i?p?(0,d.jsx)(l.N,{className:c("name"),href:i,children:t}):(0,d.jsx)(r.E,{className:c("name"),to:i,children:t}):t&&(0,d.jsx)("span",{className:c("name"),children:t})}),g&&(0,d.jsx)("div",{className:c("controls-wrapper",{visible:x}),children:(0,d.jsx)(n.b,{text:t,size:"xs",view:"normal",className:c("clipboard-button",{visible:x})})})]})]});var j}},58389:(e,t,a)=>{a.d(t,{B:()=>c});var l=a(87184),n=a(77506),s=a(90053),i=a(70043),r=a(60712);const o=(0,n.cn)("ydb-page-meta");function d({items:e,loading:t}){return(0,r.jsx)("div",{className:o("info"),children:t?(0,r.jsx)(i.E,{className:o("skeleton")}):e.filter((e=>Boolean(e))).join("\xa0\xa0\xb7\xa0\xa0")})}function c({className:e,...t}){return(0,r.jsxs)(l.s,{gap:1,alignItems:"center",justifyContent:"space-between",className:o(null,e),children:[(0,r.jsx)(d,{...t}),(0,r.jsx)(s.E,{})]})}},17594:(e,t,a)=>{a.d(t,{l:()=>d});var l=a(69024),n=a(4557),s=a(77506),i=a(16819),r=a(60712);const o=(0,s.cn)("ydb-resizeable-data-table");function d({columnsWidthLSKey:e,columns:t,settings:a,wrapperClassName:s,...d}){const[c,u]=(0,i.a)(e),h=(0,l.j)(t,c),m={...a,defaultResizeable:!0};return(0,r.jsx)("div",{className:o(null,s),children:(0,r.jsx)(n.Ay,{theme:"yandex-cloud",columns:h,onResize:u,settings:m,...d})})}},70043:(e,t,a)=>{a.d(t,{E:()=>i});var l=a(89169),n=a(66781),s=a(60712);const i=({delay:e=600,className:t})=>{const[a]=(0,n.y)(e);return a?(0,s.jsx)(l.E,{className:t}):null}},33775:(e,t,a)=>{a.d(t,{k:()=>h});var l=a(45720),n=a(16929),s=a(71153),i=a(99991),r=a(54090),o=a(77506),d=a(60712);const c=(0,o.cn)("ydb-status-icon"),u={[r.m.Blue]:l.A,[r.m.Yellow]:n.A,[r.m.Orange]:s.A,[r.m.Red]:n.A};function h({status:e=r.m.Grey,size:t="s",mode:a="color",className:l}){const n={state:e.toLowerCase(),size:t};return"icons"===a&&e in u?(0,d.jsx)(i.I,{className:c("status-icon",n,l),data:u[e]}):(0,d.jsx)("div",{className:c("status-color",n,l)})}},79737:(e,t,a)=>{a.d(t,{A:()=>r,X:()=>o});var l=a(5874),n=a(77506),s=a(60712);const i=(0,n.cn)("ydb-table");function r({children:e,className:t}){return(0,s.jsx)("div",{className:i("table-header-content",t),children:e})}function o({className:e,width:t,wrapperClassName:a,...n}){return(0,s.jsx)("div",{className:i(null,a),children:(0,s.jsx)(l.W,{headerCellClassName:({column:e})=>{var t;const a=null===(t=e.columnDef.meta)||void 0===t?void 0:t.align;return i("table-header-cell",{align:a})},cellClassName:e=>{var t,a;const l=null===e||void 0===e||null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.align,n=null===e||void 0===e||null===(a=e.column.columnDef.meta)||void 0===a?void 0:a.verticalAlign;return i("table-cell",{align:l,"vertical-align":n})},className:i("table",{width:t},e),...n})})}},27775:(e,t,a)=>{a.d(t,{i:()=>i});var l=a(47665),n=a(58267),s=a(60712);function i({state:e}){return(0,s.jsx)(l.J,{theme:(0,n._8)(e),children:e})}},47584:(e,t,a)=>{a.r(t),a.d(t,{Tablet:()=>pe,b:()=>ue});var l=a(59284),n=a(87184),s=a(23871),i=a(44992),r=a(61750),o=a(10755),d=a(67087),c=a(370),u=a(7889),h=a(3685),m=a(44508),v=a(44294),p=a(98167),b=a(58389),g=a(92459),x=a(78668),y=a(40174),f=a(21545),j=a(54090),w=a(77506),N=a(76086),S=a(90182),T=a(76938),_=a(66528);const I=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",d:"M13.756 10.164c1.665-.962 1.665-3.366 0-4.328L5.251.919C3.584-.045 1.5 1.158 1.5 3.083v9.834c0 1.925 2.084 3.128 3.751 2.164l8.505-4.917Z"}));var C=a(99991),A=a(22983),k=a(6354),D=a(48372);const E=JSON.parse('{"tablet.header":"Tablet","tablet.meta-database":"Database","tablet.meta-follower":"Follower","controls.kill":"Restart","controls.stop":"Stop","controls.resume":"Resume","controls.kill-not-allowed":"You don\'t have enough rights to restart tablet","controls.stop-not-allowed":"You don\'t have enough rights to stop tablet","controls.resume-not-allowed":"You don\'t have enough rights to resume tablet","dialog.kill-header":"Restart tablet","dialog.stop-header":"Stop tablet","dialog.resume-header":"Resume tablet","dialog.kill-text":"The tablet will be restarted. Do you want to proceed?","dialog.stop-text":"The tablet will be stopped. Do you want to proceed?","dialog.resume-text":"The tablet will be resumed. Do you want to proceed?","emptyState":"The tablet was not found","label_tablet-history":"Tablets","label_tablet-channels":"Storage"}'),B=(0,D.g4)("ydb-tablet-page",{en:E});function R(e){return Boolean(e&&"0"!==e)}var F=a(60712);const O=({tablet:e})=>{const{TabletId:t,HiveId:a}=e,s=(0,S.N4)(x._5),[i]=f.X.useKillTabletMutation(),[r]=f.X.useStopTabletMutation(),[o]=f.X.useResumeTabletMutation();if(!t)return null;const d=R(a),c=e.State===k.r.Stopped,u=e.State!==k.r.Stopped&&e.State!==k.r.Dead,h=e.State===k.r.Stopped||e.State===k.r.Deleted;return(0,F.jsxs)(n.s,{gap:2,wrap:"nowrap",children:[(0,F.jsxs)(A.B,{dialogHeader:B("dialog.kill-header"),dialogText:B("dialog.kill-text"),onConfirmAction:()=>i({id:t}).unwrap(),buttonDisabled:c||!s,withPopover:!0,buttonView:"normal",popoverContent:B("controls.kill-not-allowed"),popoverPlacement:"bottom",popoverDisabled:s,children:[(0,F.jsx)(C.I,{data:T.A}),B("controls.kill")]}),d&&(0,F.jsxs)(l.Fragment,{children:[(0,F.jsxs)(A.B,{dialogHeader:B("dialog.stop-header"),dialogText:B("dialog.stop-text"),onConfirmAction:()=>r({id:t,hiveId:a}).unwrap(),buttonDisabled:h||!s,withPopover:!0,buttonView:"normal",popoverContent:B("controls.stop-not-allowed"),popoverPlacement:"bottom",popoverDisabled:s,children:[(0,F.jsx)(C.I,{data:_.A}),B("controls.stop")]}),(0,F.jsxs)(A.B,{dialogHeader:B("dialog.resume-header"),dialogText:B("dialog.resume-text"),onConfirmAction:()=>o({id:t,hiveId:a}).unwrap(),buttonDisabled:u||!s,withPopover:!0,buttonView:"normal",popoverContent:B("controls.resume-not-allowed"),popoverPlacement:"bottom",popoverDisabled:s,children:[(0,F.jsx)(C.I,{data:I}),B("controls.resume")]})]})]})};var z=a(52905),L=a(60073),G=a(25196),P=a(27775),H=a(86200),q=a(31684),$=a(29819);const M=JSON.parse('{"field_scheme-shard":"SchemeShard","field_follower":"Follower","field_generation":"Generation","field_hive":"HiveId","field_state":"State","field_uptime":"Uptime","field_node":"Node","field_links":"Links","field_developer-ui-app":"App","field_developer-ui-counters":"Counters","field_developer-ui-executor":"Executor DB internals","field_developer-ui-state":"State Storage","title_info":"Info","title_links":"Links"}'),Y=(0,D.g4)("ydb-tablet-info",{en:M}),K=(0,w.cn)("ydb-tablet-info"),V=({tablet:e})=>{const t=(0,S.N4)(x._5),{ChangeTime:a,Generation:l,FollowerId:s,NodeId:i,HiveId:r,State:o,TenantId:{SchemeShard:d}={},TabletId:c}=e,u=R(r),h=o===k.r.Active,m=[];u&&m.push({label:Y("field_hive"),value:(0,F.jsx)(z.N_,{to:(0,g.DM)(r),className:K("link"),children:r})}),d&&m.push({label:Y("field_scheme-shard"),value:(0,F.jsx)(z.N_,{to:(0,g.DM)(d),className:K("link"),children:d})}),m.push({label:Y("field_state"),value:(0,F.jsx)(P.i,{state:o})}),h&&m.push({label:Y("field_uptime"),value:(0,H.H7)(a)}),m.push({label:Y("field_generation"),value:l},{label:Y("field_node"),value:(0,F.jsx)(z.N_,{className:K("link"),to:(0,$.vI)(String(i)),children:i})}),s&&m.push({label:Y("field_follower"),value:s});return(0,F.jsxs)(n.s,{gap:10,wrap:"nowrap",children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:K("section-title"),children:Y("title_info")}),(0,F.jsx)(L.z_,{info:m})]}),t&&c?(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{className:K("section-title"),children:Y("title_links")}),(0,F.jsxs)(n.s,{direction:"column",gap:3,children:[(0,F.jsx)(G.K,{title:Y("field_developer-ui-app"),url:(0,q._t)(c,"app")}),(0,F.jsx)(G.K,{title:Y("field_developer-ui-counters"),url:(0,q._t)(c,"counters")}),(0,F.jsx)(G.K,{title:Y("field_developer-ui-executor"),url:(0,q._t)(c,"executorInternals")}),(0,F.jsx)(G.K,{title:Y("field_developer-ui-state"),url:(0,q._t)(c,void 0,"SsId")})]})]}):null]})};var Z=a(36590),Q=a(79737),X=a(84476),J=a(33705);const W=JSON.parse('{"label_channel-index":"Channel","label_storage-pool":"Storage Pool Name","label_group-id":"Group ID","label_generation":"From generation","label_timestamp":"Timestamp"}'),U=(0,D.g4)("ydb-tablet-storage-info",{en:W}),ee=(0,w.cn)("ydb-tablet-storage-info");function te(e,t){const a=e.getValue(),l="function"===typeof t?t(a):a;return(0,F.jsx)("div",{className:ee("metrics-cell"),children:l})}function ae({row:e,name:t,hasExpand:a}){const l=e.getCanExpand();return(0,F.jsxs)(n.s,{gap:1,alignItems:"flex-start",className:ee("name-wrapper"),children:[l&&(0,F.jsx)(X.$,{view:"flat",size:"xs",onClick:e.getToggleExpandedHandler(),children:(0,F.jsx)(X.$.Icon,{children:(0,F.jsx)(J.I,{direction:e.getIsExpanded()?"bottom":"right",size:14})})}),(0,F.jsx)("div",{className:ee("name-content",{"no-control":a&&!l}),children:t})]})}function le({data:e}){const[t,a]=l.useState({}),n=l.useMemo((()=>function(e){var t;if(!e)return[];const{BoundChannels:a,TabletStorageInfo:l={}}=e,n=null!==(t=l.Channels)&&void 0!==t?t:[],s=[];for(const r of n){var i;const e=r.Channel,t=r.History;if(!e||!t||!t.length)continue;const l=[...t];l.reverse();const[n,...o]=l,d={...n,storagePoolName:null===a||void 0===a||null===(i=a[e])||void 0===i?void 0:i.StoragePoolName,channelIndex:e,children:o};s.push(d)}return s}(e)),[e]),s=l.useMemo((()=>n.some((e=>{var t;return null===(t=e.children)||void 0===t?void 0:t.length}))),[n]),i=l.useMemo((()=>{return e=s,[{accessorKey:"channelIndex",header:()=>(0,F.jsx)(Q.A,{children:U("label_channel-index")}),size:50,cell:te,meta:{align:"right"}},{accessorKey:"storagePoolName",header:()=>(0,F.jsx)(Q.A,{children:U("label_storage-pool")}),size:200,cell:te},{accessorKey:"GroupID",header:()=>(0,F.jsx)(Q.A,{className:e?ee("with-padding"):void 0,children:U("label_group-id")}),size:100,cell:t=>(0,F.jsx)(ae,{row:t.row,name:t.getValue(),hasExpand:e})},{accessorKey:"FromGeneration",header:()=>(0,F.jsx)(Q.A,{children:U("label_generation")}),size:100,cell:te,meta:{align:"right"}},{accessorKey:"Timestamp",header:()=>(0,F.jsx)(Q.A,{children:U("label_timestamp")}),size:200,cell:e=>te(e,H.Ey),meta:{align:"right"}}];var e}),[s]),r=(0,Z.K)({columns:i,data:n,getSubRows:e=>e.children,enableExpanding:!0,onExpandedChange:a,state:{expanded:t}});return(0,F.jsx)(Q.X,{table:r})}var ne=a(4557),se=a(10508),ie=a(82015),re=a(17594);const oe=[{name:"Generation",align:ne.Ay.RIGHT,render:({row:e})=>e.generation},{name:"Change time",align:ne.Ay.RIGHT,sortable:!1,render:({row:e})=>(0,H.H7)(e.changeTime)},{name:"State",sortable:!1,render:({row:e})=>(0,F.jsx)(P.i,{state:e.state})},{name:"Follower ID",sortable:!1,render:({row:e})=>e.leader?"leader":e.followerId},{name:"Node ID",align:ne.Ay.RIGHT,sortable:!1,render:({row:e})=>(0,F.jsx)(ie.E,{to:(0,$.vI)(e.nodeId),children:e.nodeId})},{name:"Node FQDN",sortable:!1,width:300,render:({row:e})=>e.fqdn?(0,F.jsx)(se.c,{name:e.fqdn,showStatus:!1,hasClipboardButton:!0}):(0,F.jsx)("span",{children:"\u2014"})}],de={displayIndices:!1},ce=({history:e})=>(0,F.jsx)(re.l,{columnsWidthLSKey:"tabletTableColumnsWidth",data:e,columns:oe,settings:de,initialSortOrder:{columnId:"Generation",order:ne.Ay.DESCENDING}}),ue=(0,w.cn)("ydb-tablet-page"),he={history:"history",channels:"channels"},me=[{id:he.history,get title(){return B("label_tablet-history")}},{id:he.channels,get title(){return B("label_tablet-channels")},isAdvanced:!0}],ve=c.z.nativeEnum(he).catch(he.history);function pe(){var e;const t=(0,S.YQ)(),{id:a}=(0,o.g)(),[{database:s,clusterName:c}]=(0,d.useQueryParams)(g.qc),[u]=(0,S.Nt)(),{currentData:h,isFetching:v,error:x}=f.X.useGetTabletQuery({id:a,database:null!==s&&void 0!==s?s:void 0},{pollingInterval:u}),j=v&&void 0===h,{data:w={},history:T=[]}=h||{},{currentData:_}=f.X.useGetTabletDescribeQuery(w.TenantId?{tenantId:w.TenantId}:i.hT),I=null!==(e=_||s)&&void 0!==e?e:void 0,C=w.Type;l.useEffect((()=>{t((0,y.g)("tablet",{tenantName:null!==s&&void 0!==s?s:void 0,tabletId:a,tabletType:C}))}),[t,s,a,C]);const{Leader:A,Type:k}=w,D=[];return I&&D.push(`${B("tablet.meta-database")}: ${I}`),k&&D.push(k),!1===A&&D.push(B("tablet.meta-follower").toUpperCase()),(0,F.jsxs)(n.s,{gap:5,direction:"column",className:ue(),children:[(0,F.jsx)(r.mg,{children:(0,F.jsx)("title",{children:`${a} \u2014 ${B("tablet.header")} \u2014 ${I||c||N.QM}`})}),(0,F.jsx)(b.B,{items:D}),(0,F.jsxs)(p.r,{loading:j,size:"l",children:[x?(0,F.jsx)(m.o,{error:x}):null,h?(0,F.jsx)(be,{id:a,tablet:w,history:T}):null]})]})}function be({id:e,tablet:t,history:a}){const l=!Object.keys(t).length,{Overall:s,HiveId:i}=t;return(0,F.jsxs)(u.q,{title:B("emptyState"),className:ue("placeholder"),isEmpty:l,children:[(0,F.jsxs)(n.s,{gap:5,direction:"column",children:[(0,F.jsx)(h.$,{entityName:B("tablet.header"),status:null!==s&&void 0!==s?s:j.m.Grey,id:e}),(0,F.jsx)(O,{tablet:t}),(0,F.jsx)(V,{tablet:t})]}),(0,F.jsx)(ge,{id:e,hiveId:i,history:a})]})}function ge({id:e,hiveId:t,history:a}){var i;const[{activeTab:r,...o},c]=(0,d.useQueryParams)(g.qc),u=!(0,S.N4)(x._5)||!R(t);let h=ve.parse(r);return u&&null!==(i=me.find((e=>e.id===h)))&&void 0!==i&&i.isAdvanced&&(h=he.history),l.useEffect((()=>{r!==h&&c({activeTab:h},"replaceIn")}),[r,h,c]),(0,F.jsxs)(n.s,{gap:5,direction:"column",children:[(0,F.jsx)("div",{children:(0,F.jsx)(s.t,{size:"l",items:me.filter((({isAdvanced:e})=>!e||!u)),activeTab:h,wrapTo:(t,a)=>{const l=(0,g.DM)(e,{...o,activeTab:t.id});return(0,F.jsx)(v.E,{to:l,children:a},t.id)}})}),"history"===h?(0,F.jsx)(ce,{history:a}):null,"channels"!==h||u?null:(0,F.jsx)(xe,{id:e,hiveId:t})]})}function xe({id:e,hiveId:t}){const[a]=(0,S.Nt)(),{currentData:l,error:n,isFetching:s}=f.X.useGetAdvancedTableInfoQuery({id:e,hiveId:t},{pollingInterval:a}),i=s&&void 0===l;return(0,F.jsxs)(p.r,{loading:i,size:"l",children:[n?(0,F.jsx)(m.o,{error:n}):null,l?(0,F.jsx)(le,{data:l}):null]})}},89954:(e,t,a)=>{a.d(t,{O:()=>_});var l=a(59284),n=a(45720),s=a(16929),i=a(71153),r=a(18677),o=a(84476),d=a(33705),c=a(99991),u=a(67884),h=a(77506),m=a(48372);const v=JSON.parse('{"default_collapse_label":"Show less","default_expand_label":"Show more","chars_count":[" ({{count}} symbol)"," ({{count}} symbols)"," ({{count}} symbols)"," ({{count}} symbols)"]}'),p=JSON.parse('{"default_collapse_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435","default_expand_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451","chars_count":[" ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b)"," ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b\u0430)"," ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)"," ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)"]}'),b=(0,m.g4)("ydb-shorty-string",{ru:p,en:v});var g=a(60712);const x=(0,h.cn)("kv-shorty-string");function y({value:e="",limit:t=200,strict:a=!1,displayLength:n=!0,render:s=e=>e,onToggle:i,expandLabel:r=b("default_expand_label"),collapseLabel:o=b("default_collapse_label")}){const[d,c]=l.useState(!1),h=(d?o:r)+(n&&!d?b("chars_count",{count:e.length}):""),m=e.length>t+(a?0:h.length),v=d||!m?e:e.slice(0,t-4)+"\xa0...";return(0,g.jsxs)("div",{className:x(),children:[s(v),m?(0,g.jsx)(u.N,{className:x("toggle"),href:"#",onClick:e=>{e.stopPropagation(),e.preventDefault(),c((e=>!e)),null===i||void 0===i||i()},children:h}):null]})}var f=a(41650);const j=["S_FATAL","S_ERROR","S_WARNING","S_INFO"];function w(e){return function(e){return!!e&&void 0!==j[e]}(e)?j[e]:"S_INFO"}const N=(0,h.cn)("kv-result-issues"),S=(0,h.cn)("kv-issues"),T=(0,h.cn)("kv-issue");function _({data:e,hideSeverity:t}){const[a,n]=l.useState(!1),s="string"===typeof e||null===e||void 0===e?void 0:e.issues,i=Array.isArray(s)&&s.length>0;return(0,g.jsxs)("div",{className:N(),children:[(0,g.jsxs)("div",{className:N("error-message"),children:[(()=>{let a;if("string"===typeof e)a=e;else{var n,s;const i=w(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.severity);a=(0,g.jsxs)(l.Fragment,{children:[t?null:(0,g.jsxs)(l.Fragment,{children:[(0,g.jsx)(E,{severity:i})," "]}),(0,g.jsx)("span",{className:N("error-message-text"),children:null===e||void 0===e||null===(s=e.error)||void 0===s?void 0:s.message})]})}return a})(),i&&(0,g.jsx)(o.$,{view:"normal",onClick:()=>n(!a),children:a?"Hide details":"Show details"})]}),i&&a&&(0,g.jsx)(I,{hideSeverity:t,issues:s})]})}function I({issues:e,hideSeverity:t}){const a=null===e||void 0===e?void 0:e.reduce(((e,t)=>{var a;const l=null!==(a=t.severity)&&void 0!==a?a:10;return Math.min(e,l)}),10);return(0,g.jsx)("div",{className:S(null),children:null===e||void 0===e?void 0:e.map(((e,l)=>(0,g.jsx)(C,{hideSeverity:t,issue:e,expanded:e===a},l)))})}function C({issue:e,hideSeverity:t,level:a=0}){const[n,s]=l.useState(!0),i=w(e.severity),r=function(e){const{position:t}=e;if("object"!==typeof t||null===t||!(0,f.kf)(t.row))return"";const{row:a,column:l}=t;return(0,f.kf)(l)?`${a}:${l}`:`line ${a}`}(e),c=e.issues,u=Array.isArray(c)&&c.length>0,h=n?"bottom":"right";return(0,g.jsxs)("div",{className:T({leaf:!u,"has-issues":u}),children:[(0,g.jsxs)("div",{className:T("line"),children:[u&&(0,g.jsx)(o.$,{view:"flat-secondary",onClick:()=>s(!n),className:T("arrow-toggle"),children:(0,g.jsx)(d.I,{direction:h,size:16})}),t?null:(0,g.jsx)(E,{severity:i}),(0,g.jsxs)("span",{className:T("message"),children:[r&&(0,g.jsx)("span",{className:T("place-text"),title:"Position",children:r}),(0,g.jsx)("div",{className:T("message-text"),children:(0,g.jsx)(y,{value:e.message,expandLabel:"Show full message"})})]}),e.issue_code?(0,g.jsxs)("span",{className:T("code"),children:["Code: ",e.issue_code]}):null]}),u&&n&&(0,g.jsx)("div",{className:T("issues"),children:(0,g.jsx)(A,{issues:c,level:a+1,expanded:n})})]})}function A(e){const{issues:t,level:a,expanded:l}=e;return(0,g.jsx)("div",{className:T("list"),children:t.map(((e,t)=>(0,g.jsx)(C,{issue:e,level:a,expanded:l},t)))})}const k={S_INFO:n.A,S_WARNING:s.A,S_ERROR:i.A,S_FATAL:r.A},D=(0,h.cn)("yql-issue-severity");function E({severity:e}){const t=e.slice(2).toLowerCase();return(0,g.jsxs)("span",{className:D({severity:t}),children:[(0,g.jsx)(c.I,{className:D("icon"),data:k[e]}),(0,g.jsx)("span",{className:D("title"),children:t})]})}},21545:(e,t,a)=>{a.d(t,{X:()=>n});var l=a(78034);const n=a(21334).F.injectEndpoints({endpoints:e=>({getTablet:e.query({queryFn:async({id:e,database:t},{signal:a})=>{try{const[n,s,i]=await Promise.all([window.api.viewer.getTablet({id:e,database:t},{signal:a}),window.api.viewer.getTabletHistory({id:e,database:t},{signal:a}),window.api.viewer.getNodesList({signal:a})]),r=(0,l.pl)(i),o=Object.keys(s).reduce(((e,t)=>{var a;const l=null===(a=s[t])||void 0===a?void 0:a.TabletStateInfo;if(l&&l.length){const a=l.find((e=>e.Leader))||l[0],{ChangeTime:n,Generation:s,State:i,Leader:o,FollowerId:d}=a,c=r&&t?r.get(Number(t)):void 0;"Dead"!==i&&e.push({nodeId:t,generation:s,changeTime:n,state:i,leader:o,followerId:d,fqdn:c})}return e}),[]),{TabletStateInfo:d=[]}=n,[c={}]=d,{TabletId:u}=c;return{data:{id:u,data:c,history:o}}}catch(n){return{error:n}}},providesTags:(e,t,a)=>["All",{type:"Tablet",id:a.id}]}),getTabletDescribe:e.query({queryFn:async({tenantId:e},{signal:t})=>{try{const a=await window.api.viewer.getTabletDescribe(e,{signal:t}),{SchemeShard:l,PathId:n}=e;return{data:(null===a||void 0===a?void 0:a.Path)||`${l}:${n}`}}catch(a){return{error:a}}},providesTags:["All"]}),getAdvancedTableInfo:e.query({queryFn:async({id:e,hiveId:t},{signal:a})=>{try{return{data:await window.api.tablets.getTabletFromHive({id:e,hiveId:t},{signal:a})}}catch(l){return{error:l}}},providesTags:(e,t,a)=>["All",{type:"Tablet",id:a.id}]}),killTablet:e.mutation({queryFn:async({id:e})=>{try{return{data:await window.api.tablets.killTablet(e)}}catch(t){return{error:t}}},invalidatesTags:(e,t,a)=>[{type:"Tablet",id:a.id},{type:"Tablet",id:"LIST"}]}),stopTablet:e.mutation({queryFn:async({id:e,hiveId:t})=>{try{return{data:await window.api.tablets.stopTablet(e,t)}}catch(a){return{error:a}}},invalidatesTags:(e,t,a)=>[{type:"Tablet",id:a.id},{type:"Tablet",id:"LIST"}]}),resumeTablet:e.mutation({queryFn:async({id:e,hiveId:t})=>{try{return{data:await window.api.tablets.resumeTablet(e,t)}}catch(a){return{error:a}}},invalidatesTags:(e,t,a)=>[{type:"Tablet",id:a.id},{type:"Tablet",id:"LIST"}]})}),overrideExisting:"throw"})},16819:(e,t,a)=>{a.d(t,{a:()=>i});var l=a(59284),n=a(69024),s=a(59001);const i=e=>{const t=l.useCallback((()=>e?s.f.readUserSettingsValue(e,{}):{}),[e]),a=l.useCallback((t=>{e&&s.f.setUserSettingsValue(e,t)}),[e]);return(0,n.a)({saveSizes:a,getSizes:t})}},58267:(e,t,a)=>{a.d(t,{PQ:()=>i,_8:()=>r});var l=a(54090),n=a(6354);const s={[n.r.Dead]:l.m.Red,[n.r.Created]:l.m.Yellow,[n.r.ResolveStateStorage]:l.m.Yellow,[n.r.Candidate]:l.m.Yellow,[n.r.BlockBlobStorage]:l.m.Yellow,[n.r.WriteZeroEntry]:l.m.Yellow,[n.r.Restored]:l.m.Yellow,[n.r.Discover]:l.m.Yellow,[n.r.Lock]:l.m.Yellow,[n.r.Stopped]:l.m.Yellow,[n.r.ResolveLeader]:l.m.Yellow,[n.r.RebuildGraph]:l.m.Yellow,[n.r.Deleted]:l.m.Green,[n.r.Active]:l.m.Green},i=(Object.keys(n.r),Object.entries(s).reduce(((e,[t,a])=>(e[a]?e[a].push(t):e[a]=[t],e)),{}),e=>{if(!e)return l.m.Grey;return t=e,Object.values(l.m).includes(t)?e:s[e];var t});function r(e){if(!e)return"unknown";switch(e){case n.r.Dead:return"danger";case n.r.Active:case n.r.Deleted:return"success";default:return"warning"}}},16929:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(59284);const n=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 2.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8.75 5a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0V5Z",clipRule:"evenodd"}))},45720:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(59284);const n=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm1-9.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8 7.75a.75.75 0 0 1 .75.75V11a.75.75 0 0 1-1.5 0V8.5A.75.75 0 0 1 8 7.75Z",clipRule:"evenodd"}))},71153:(e,t,a)=>{a.d(t,{A:()=>n});var l=a(59284);const n=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.836 2.244c.962-1.665 3.366-1.665 4.328 0l4.917 8.505c.964 1.666-.239 3.751-2.164 3.751H3.083c-1.925 0-3.128-2.085-2.164-3.751l4.917-8.505ZM8 5a.75.75 0 0 1 .75.75v2a.75.75 0 1 1-1.5 0v-2A.75.75 0 0 1 8 5Zm1 5.75a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",clipRule:"evenodd"}))},89169:(e,t,a)=>{a.d(t,{E:()=>s});var l=a(59284);const n=(0,a(69220).om)("skeleton");function s({className:e,style:t,qa:a}){return l.createElement("div",{className:n(null,e),style:t,"data-qa":a})}}}]);