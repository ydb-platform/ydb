"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[124],{14659:(e,t,n)=>{n.d(t,{U:()=>g});var o=n(68963),a=n(17176),s=n(68330),l=n(76506),i=n(71586),r=n(25822),d=n(88776),c=n(24362),u=n(30817);const p=JSON.parse('{"default-error":"Something went wrong, action cannot be completed","no-rights-error":"You don\'t have enough rights to complete the operation","button-confirm":"Confirm","button-retry":"Retry","button-cancel":"Cancel","button-close":"Close"}'),v=(0,u.wZ)("ydb-critical-action-dialog",{en:p});var m=n(75859);const h=(0,c.cn)("ydb-critical-dialog"),b=e=>403===e.status?v("no-rights-error"):e.statusText?e.statusText:v("default-error");function D(e){let{visible:t,text:n,withRetry:a,retryButtonText:s,onClose:c,onConfirm:u,onConfirmActionSuccess:p,onConfirmActionError:D}=e;const[g,k]=o.useState(!1),[f,y]=o.useState(),w=async e=>(k(!0),u(e).then((()=>{p(),c()})).catch((e=>{D(e),y(e)})).finally((()=>{k(!1)})));return(0,m.jsx)(r.V,{open:t,hasCloseButton:!1,className:h(),size:"s",onClose:c,onTransitionExited:()=>y(void 0),children:f?(0,m.jsxs)(o.Fragment,{children:[(0,m.jsxs)(r.V.Body,{className:h("body"),children:[(0,m.jsx)("span",{className:h("error-icon"),children:(0,m.jsx)(l.Z,{width:"24",height:"22"})}),b(f)]}),(0,m.jsx)(r.V.Footer,{loading:!1,preset:"default",textButtonApply:a?s||v("button-retry"):void 0,textButtonCancel:v("button-close"),onClickButtonApply:()=>w(!0),onClickButtonCancel:c})]}):(0,m.jsxs)(o.Fragment,{children:[(0,m.jsxs)(r.V.Body,{className:h("body"),children:[(0,m.jsx)("span",{className:h("warning-icon"),children:(0,m.jsx)(d.J,{data:i.Z,size:24})}),n]}),(0,m.jsx)(r.V.Footer,{loading:g,preset:"default",textButtonApply:v("button-confirm"),textButtonCancel:v("button-cancel"),propsButtonApply:{type:"submit"},onClickButtonCancel:c,onClickButtonApply:()=>w()})]})})}function g(e){let{children:t,onConfirmAction:n,onConfirmActionSuccess:l,dialogContent:i,retryButtonText:r,buttonDisabled:d=!1,buttonView:c="action",buttonClassName:u,withPopover:p=!1,popoverContent:v,popoverPlacement:h="right",popoverDisabled:b=!0}=e;const[g,k]=o.useState(!1),[f,y]=o.useState(!1),[w,x]=o.useState(!1),N=()=>(0,m.jsx)(a.z,{onClick:()=>k(!0),view:c,disabled:d,loading:!d&&f,className:u,children:t});return(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)(D,{visible:g,text:i,withRetry:w,retryButtonText:r,onConfirm:async e=>{y(!0),await n(e),y(!1)},onConfirmActionSuccess:async()=>{if(x(!1),l){y(!0);try{await l()}catch{}finally{y(!1)}}},onConfirmActionError:e=>{const t=Boolean(e&&"object"===typeof e&&"retryPossible"in e&&e.retryPossible);x(t),y(!1)},onClose:()=>{k(!1)}}),p?(0,m.jsx)(s.J,{content:v,placement:h,disabled:b,children:N()}):N()]})}},30832:(e,t,n)=>{n.d(t,{a:()=>i});var o=n(24362),a=n(98366),s=n(75859);const l=(0,o.cn)("ydb-entity-page-title");function i(e){let{entityName:t,status:n,id:o,className:i,children:r}=e;return(0,s.jsxs)("div",{className:l(null,i),children:[(0,s.jsx)("span",{className:l("prefix"),children:t}),(0,s.jsx)(a.J,{className:l("icon"),status:n,size:"s"}),o,r]})}},91816:(e,t,n)=>{n.d(t,{b:()=>c});var o=n(68963),a=n(56711),s=n(24362),l=n(42587),i=n(75859);const r=(0,s.cn)("ydb-info-viewer-skeleton"),d=()=>(0,i.jsxs)("div",{className:r("label"),children:[(0,i.jsx)(a.O,{className:r("label__text")}),(0,i.jsx)("div",{className:r("label__dots")})]}),c=e=>{let{rows:t=8,className:n,delay:s=600}=e;const c=(0,l.$)(s);let u=(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(d,{}),(0,i.jsx)(a.O,{className:r("value")})]});return c||(u=null),(0,i.jsx)("div",{className:r(null,n),children:[...new Array(t)].map(((e,t)=>(0,i.jsx)("div",{className:r("row"),children:u},"skeleton-row-".concat(t))))})}},27174:(e,t,n)=>{n.d(t,{B:()=>p});var o=n(77796),a=n(24362),s=n(50422),l=n(56711),i=n(42587),r=n(75859);const d=e=>{let{delay:t=600,className:n}=e;return(0,i.$)(t)?(0,r.jsx)(l.O,{className:n}):null},c=(0,a.cn)("ydb-page-meta");function u(e){let{items:t,loading:n}=e;return(0,r.jsx)("div",{className:c("info"),children:n?(0,r.jsx)(d,{className:c("skeleton")}):t.filter((e=>Boolean(e))).join("\xa0\xa0\xb7\xa0\xa0")})}function p(e){let{className:t,...n}=e;return(0,r.jsxs)(o.k,{gap:1,alignItems:"center",justifyContent:"space-between",className:c(null,t),children:[(0,r.jsx)(u,{...n}),(0,r.jsx)(s.q,{})]})}},22200:(e,t,n)=>{n.d(t,{K:()=>w});n(68963);var o=n(54665),a=n(14146),s=n(17880),l=n(5922),i=n(24362),r=n(34301),d=n(48169),c=n(92666),u=n(17096),p=n(55850),v=n(69214),m=n(62206),h=n(32270),b=n(67359),D=n(30817);const g=JSON.parse('{"slot-id":"VDisk Slot Id","pool-name":"Storage Pool Name","kind":"Kind","guid":"GUID","incarnation-guid":"Incarnation GUID","instance-guid":"Instance GUID","replication-status":"Replicated","state-status":"VDisk State","space-status":"Disk Space","fresh-rank-satisfaction":"Fresh Rank Satisfaction","level-rank-satisfaction":"Level Rank Satisfaction","front-queues":"Front Queues","has-unreadable-blobs":"Has Unreadable Blobs","size":"Size","read-throughput":"Read Throughput","write-throughput":"Write Throughput","links":"Links","vdisk-page":"VDisk Page","developer-ui":"Developer UI","yes":"Yes","no":"No","vdiks-title":"VDisk"}'),k=(0,D.wZ)("ydb-vDisk-info",{en:g});var f=n(75859);const y=(0,i.cn)("ydb-vdisk-info");function w(e){var t,n;let{data:i,withVDiskPageLink:c,withTitle:D,...g}=e;const w=(0,s.X_)(),N=(0,u.ix)(a.VH),{AllocatedSize:E,DiskSpace:C,FrontQueues:j,Guid:I,Replicated:S,VDiskState:B,VDiskSlotId:R,Kind:T,SatisfactionRank:P,AvailableSize:A,HasUnreadableBlobs:V,IncarnationGuid:F,InstanceGuid:O,StoragePoolName:K,ReadThroughput:L,WriteThroughput:Z,PDiskId:G,NodeId:z}=i||{},M=[];var q,H;((0,l.D)(R)&&M.push({label:k("slot-id"),value:R}),(0,l.D)(K)&&M.push({label:k("pool-name"),value:K}),(0,l.D)(B)&&M.push({label:k("state-status"),value:B}),Number(E)>=0&&Number(A)>=0&&M.push({label:k("size"),value:(0,f.jsx)(b.y,{value:E,capacity:Number(E)+Number(A),formatValues:r.q3,colorizeProgress:!0})}),(0,l.D)(T)&&M.push({label:k("kind"),value:T}),(0,l.D)(I)&&M.push({label:k("guid"),value:I}),(0,l.D)(F)&&M.push({label:k("incarnation-guid"),value:F}),(0,l.D)(O)&&M.push({label:k("instance-guid"),value:O}),(0,l.D)(S)&&M.push({label:k("replication-status"),value:k(S?"yes":"no")}),(0,l.D)(C)&&M.push({label:k("space-status"),value:(0,f.jsx)(v.A,{status:C})}),(0,l.D)(null===P||void 0===P||null===(t=P.FreshRank)||void 0===t?void 0:t.Flag))&&M.push({label:k("fresh-rank-satisfaction"),value:(0,f.jsx)(v.A,{status:null===P||void 0===P||null===(q=P.FreshRank)||void 0===q?void 0:q.Flag})});(0,l.D)(null===P||void 0===P||null===(n=P.LevelRank)||void 0===n?void 0:n.Flag)&&M.push({label:k("level-rank-satisfaction"),value:(0,f.jsx)(v.A,{status:null===P||void 0===P||null===(H=P.LevelRank)||void 0===H?void 0:H.Flag})});(0,l.D)(j)&&M.push({label:k("front-queues"),value:(0,f.jsx)(v.A,{status:j})}),(0,l.D)(V)&&M.push({label:k("has-unreadable-blobs"),value:k(V?"yes":"no")}),(0,l.D)(L)&&M.push({label:k("read-throughput"),value:(0,p.Qt)(L)}),(0,l.D)(Z)&&M.push({label:k("write-throughput"),value:(0,p.Qt)(Z)});if((0,l.D)(G)&&(0,l.D)(z)&&(0,l.D)(R)){const e=[];if(c&&w){const t=(0,o.By)(R,G,z);e.push((0,f.jsx)(h.j,{title:k("vdisk-page"),url:t,external:!1},t))}if(N){const t=(0,d.yf)({nodeId:z,pDiskId:G,vDiskSlotId:R});e.push((0,f.jsx)(h.j,{title:k("developer-ui"),url:t},t))}e.length&&M.push({label:k("links"),value:(0,f.jsx)("div",{className:y("links"),children:e})})}const J=i&&D?(0,f.jsx)(x,{data:i}):null;return(0,f.jsx)(m._P,{info:M,title:J,...g})}function x(e){let{data:t}=e;return(0,f.jsxs)("div",{className:y("title"),children:[k("vdiks-title"),(0,f.jsx)(v.A,{status:(0,c.b2)(t.Severity),name:(0,r.a2)(t.VDiskId)})]})}},65915:(e,t,n)=>{n.r(t),n.d(t,{VDiskPage:()=>Z});var o=n(68963);const a=e=>o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.28 4.78a.75.75 0 0 0 0-1.06l-2.5-2.5a.75.75 0 1 0-1.06 1.06L6.94 3.5H1.75a.75.75 0 1 0 0 1.5h5.19L5.72 6.22a.75.75 0 1 0 1.06 1.06l2.5-2.5Zm-.06 3.94-2.5 2.5a.75.75 0 0 0 0 1.06l2.5 2.5a.75.75 0 1 0 1.06-1.06L9.06 12.5h5.19a.75.75 0 0 0 0-1.5H9.06l1.22-1.22a.75.75 0 1 0-1.06-1.06ZM14 4.25a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0ZM3.75 13.5a1.75 1.75 0 1 0 0-3.5 1.75 1.75 0 0 0 0 3.5Z",clipRule:"evenodd"}));var s=n(88776),l=n(17095),i=n(49352),r=n(52846),d=n(14659),c=n(30832),u=n(26688),p=n(5922),v=n(34301),m=n(62206),h=n(67359),b=n(30817);const D=JSON.parse('{"group-id":"Group ID","pool-name":"Storage Pool Name","size":"Size","erasure":"Erasure"}'),g=(0,b.wZ)("ydb-group-info",{en:D});var k=n(75859);function f(e){let{data:t,...n}=e;const{GroupID:o,PoolName:a,Used:s,Limit:l,ErasureSpecies:i}=t,r=[];return(0,p.D)(o)&&r.push({label:g("group-id"),value:o}),(0,p.D)(a)&&r.push({label:g("pool-name"),value:a}),(0,p.D)(i)&&r.push({label:g("erasure"),value:i}),Number(s)>=0&&Number(l)>=0&&r.push({label:g("size"),value:(0,k.jsx)(h.y,{value:s,capacity:l,formatValues:v.q3,colorizeProgress:!0})}),(0,k.jsx)(m._P,{info:r,...n})}var y=n(91816),w=n(27174),x=n(79255),N=n(22200),E=n(14146),C=n(79061),j=n(99337),I=n(11431),S=n(905),B=n(3764),R=n(51688),T=n(92092);const P=S.h.injectEndpoints({endpoints:e=>({getVDiskData:e.query({queryFn:async e=>{let{nodeId:t,pDiskId:n,vDiskSlotId:o}=e;try{const{vDiskData:e,groupData:a}=await async function(e){let{nodeId:t,pDiskId:n,vDiskSlotId:o}=e,{signal:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=await Promise.all([window.api.getVDiskInfo({nodeId:t,pDiskId:n,vDiskSlotId:o},{signal:a}),window.api.getNodeWhiteboardPDiskInfo({nodeId:t,pDiskId:n},{signal:a}),window.api.getNodeInfo(t,{signal:a})]),l=function(e){var t,n,o,a,s,l,i;let[r,d,c]=e;const u=null===(t=r.VDiskStateInfo)||void 0===t?void 0:t[0],p=(0,B.w)(u),v=null===(n=d.PDiskStateInfo)||void 0===n?void 0:n[0],m=(0,B.b)(v),h=null===(o=c.SystemStateInfo)||void 0===o?void 0:o[0],b=(0,R.Ns)(h),D=null!==(a=null!==(s=p.NodeId)&&void 0!==s?s:m.NodeId)&&void 0!==a?a:b.NodeId,g=b.Host,k=null===(l=b.Roles)||void 0===l?void 0:l[0],f=b.DC,y=null!==(i=p.PDiskId)&&void 0!==i?i:m.PDiskId,w=m.Type;return{...p,NodeId:D,NodeHost:g,NodeType:k,NodeDC:f,PDiskId:y,PDiskType:w}}(s),{StoragePoolName:i,VDiskId:r={}}=l,{GroupID:d}=r;let c;if((0,p.D)(i)&&(0,p.D)(d)){c=function(e,t,n){var o,a;const s=null===(o=e.StoragePools)||void 0===o?void 0:o.find((e=>e.Name===t)),l=null===s||void 0===s||null===(a=s.Groups)||void 0===a?void 0:a.find((e=>e.GroupID===n));if(l&&s)return(0,T.mD)(l,s)}(await window.api.getStorageInfo({nodeId:t,poolName:i,groupId:d,version:I.w.v1},{signal:a}),i,d)}return{vDiskData:l,groupData:c}}({nodeId:t,pDiskId:n,vDiskSlotId:o});return{data:{vDiskData:e,groupData:a}}}catch(a){return{error:a}}},providesTags:["All"]})}),overrideExisting:"throw"});var A=n(24362),V=n(92666),F=n(17096);const O=JSON.parse('{"fqdn":"FQDN","node":"Node","pdisk":"PDisk","vdisk":"VDisk","group":"Group","evict-vdisk-button":"Evict VDisk","force-evict-vdisk-button":"Evict anyway","evict-vdisk-dialog":"VDisk will be evicted. Do you want to proceed?","evict-vdisk-not-allowed":"You don\'t have enough rights to evict VDisk"}'),K=(0,b.wZ)("ydb-vDisk-page",{en:O}),L=(0,A.cn)("ydb-vdisk-page");function Z(){const e=(0,F.zL)(),t=(0,F.ix)(j.d),n=(0,F.ix)(E.VH),[{nodeId:m,pDiskId:h,vDiskSlotId:b}]=(0,r.useQueryParams)({nodeId:r.StringParam,pDiskId:r.StringParam,vDiskSlotId:r.StringParam});o.useEffect((()=>{e((0,C.J)("vDisk",{nodeId:m,pDiskId:h,vDiskSlotId:b}))}),[e,m,h,b]);const[D]=(0,F.Rj)(),g=(0,p.D)(m)&&(0,p.D)(h)&&(0,p.D)(b)?{nodeId:m,pDiskId:h,vDiskSlotId:b}:l.CN,{currentData:I,isFetching:S,refetch:B,error:R}=P.useGetVDiskDataQuery(g,{pollingInterval:D}),T=S&&void 0===I,{vDiskData:A={},groupData:O}=I||{},{NodeHost:Z,NodeId:G,NodeType:z,NodeDC:M,PDiskId:q,PDiskType:H,Severity:J,VDiskId:U}=A,{GroupID:_,GroupGeneration:Q,Ring:Y,Domain:W,VDisk:$}=U||{},X=(0,p.D)(_)&&(0,p.D)(Q)&&(0,p.D)(Y)&&(0,p.D)(W)&&(0,p.D)($),ee=async e=>{if(X)return window.api.evictVDisk({groupId:_,groupGeneration:Q,failRealmIdx:Y,failDomainIdx:W,vDiskIdx:$,force:e}).then((e=>{if(!1===(null===e||void 0===e?void 0:e.result)){throw{statusText:e.error,retryPossible:e.forceRetryPossible}}}))},te=async()=>B(),ne=()=>{var e;return O?(0,k.jsxs)(o.Fragment,{children:[(0,k.jsx)("div",{className:L("group-title"),children:K("group")}),(0,k.jsx)(f,{data:O}),(0,k.jsx)("div",{className:L("group-disks"),children:null===(e=O.VDisks)||void 0===e?void 0:e.map((e=>(0,k.jsx)(x.c,{data:e,nodes:t,className:L("group-disk")},(0,v.a2)(e.VDiskId))))})]}):null};return(0,k.jsxs)("div",{className:L(null),children:[(()=>{const e=b?"".concat(K("vdisk")," ").concat(b):K("vdisk"),t=h?"".concat(K("pdisk")," ").concat(h):K("pdisk"),n=Z||K("node");return(0,k.jsx)(i.ql,{titleTemplate:"%s - ".concat(e," - ").concat(t," \u2014 ").concat(n," \u2014 YDB Monitoring"),defaultTitle:"".concat(e," - ").concat(t," \u2014 ").concat(n," \u2014 YDB Monitoring")})})(),(()=>{const e=Z?"".concat(K("fqdn"),": ").concat(Z):void 0,t=G?"".concat(K("node"),": ").concat(G):void 0,n=G?"".concat(K("pdisk"),": ").concat(q):void 0;return(0,k.jsx)(w.B,{loading:T,items:[e,t,z,M,n,H]})})(),(0,k.jsx)(c.a,{entityName:K("vdisk"),status:(0,V.b2)(J),id:(0,v.a2)(null===A||void 0===A?void 0:A.VDiskId)}),(0,k.jsx)("div",{className:L("controls"),children:(0,k.jsxs)(d.U,{onConfirmAction:ee,onConfirmActionSuccess:te,buttonDisabled:!X||!n,buttonView:"normal",dialogContent:K("evict-vdisk-dialog"),retryButtonText:K("force-evict-vdisk-button"),withPopover:!0,popoverContent:K("evict-vdisk-not-allowed"),popoverDisabled:n,children:[(0,k.jsx)(s.J,{data:a}),K("evict-vdisk-button")]})}),T?(0,k.jsx)(y.b,{rows:20}):(0,k.jsxs)(o.Fragment,{children:[R?(0,k.jsx)(u.V,{error:R}):null,(0,k.jsx)(N.K,{data:A}),ne()]})]})}},84317:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(68963);const a=e=>o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.5a6.501 6.501 0 0 1 6.445 5.649.75.75 0 1 1-1.488.194A5.001 5.001 0 0 0 4.43 4.5h1.32a.75.75 0 0 1 0 1.5h-3A.75.75 0 0 1 2 5.25v-3a.75.75 0 1 1 1.5 0v1.06A6.48 6.48 0 0 1 8 1.5Zm5.25 13a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-3a.75.75 0 1 0 0 1.5h1.32a5.001 5.001 0 0 1-8.528-2.843.75.75 0 1 0-1.487.194 6.501 6.501 0 0 0 10.945 3.84v1.059c0 .414.336.75.75.75Z",clipRule:"evenodd"}))},57225:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(68963);const a=e=>o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 2.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8.75 5a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0V5Z",clipRule:"evenodd"}))},67585:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(68963);const a=e=>o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm1-9.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8 7.75a.75.75 0 0 1 .75.75V11a.75.75 0 0 1-1.5 0V8.5A.75.75 0 0 1 8 7.75Z",clipRule:"evenodd"}))},76506:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(68963);const a=e=>o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14ZM6.53 5.47a.75.75 0 0 0-1.06 1.06L6.94 8 5.47 9.47a.75.75 0 1 0 1.06 1.06L8 9.06l1.47 1.47a.75.75 0 1 0 1.06-1.06L9.06 8l1.47-1.47a.75.75 0 1 0-1.06-1.06L8 6.94 6.53 5.47Z",clipRule:"evenodd"}))},71586:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(68963);const a=e=>o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.836 2.244c.962-1.665 3.366-1.665 4.328 0l4.917 8.505c.964 1.666-.239 3.751-2.164 3.751H3.083c-1.925 0-3.128-2.085-2.164-3.751l4.917-8.505ZM8 5a.75.75 0 0 1 .75.75v2a.75.75 0 1 1-1.5 0v-2A.75.75 0 0 1 8 5Zm1 5.75a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",clipRule:"evenodd"}))},25822:(e,t,n)=>{n.d(t,{V:()=>B});var o=n(68963),a=n(62685),s=n(74100),l=n(95753),i=n(57107),r=n(89459),d=n(36951),c=n(3262),u=n(31445);const p=(0,d.Ge)("modal");function v(e){let{open:t=!1,keepMounted:n=!1,disableBodyScrollLock:d=!1,disableEscapeKeyDown:v,disableOutsideClick:m,disableFocusTrap:h,disableAutoFocus:b,focusTrap:D=!0,autoFocus:g=!0,restoreFocusRef:k,onEscapeKeyDown:f,onEnterKeyDown:y,onOutsideClick:w,onClose:x,onTransitionEnter:N,onTransitionEntered:E,onTransitionExit:C,onTransitionExited:j,children:I,style:S,contentOverflow:B="visible",className:R,contentClassName:T,"aria-labelledby":P,"aria-label":A,container:V,qa:F}=e;const O=o.useRef(null),K=o.useRef(null),[L,Z]=o.useState(!1);(0,s.y)({enabled:!d&&(t||L)});const G=(0,l.H)({enabled:t||L,restoreFocusRef:k,focusTrapped:!0});return(0,c.s)({open:t,disableEscapeKeyDown:v,disableOutsideClick:m,onEscapeKeyDown:f,onEnterKeyDown:y,onOutsideClick:w,onClose:x,contentRefs:[K],type:"modal"}),o.createElement(a.Z,{nodeRef:O,in:t,addEndListener:e=>{var t;return null===(t=O.current)||void 0===t?void 0:t.addEventListener("animationend",e)},classNames:(0,u.Y)(p),mountOnEnter:!n,unmountOnExit:!n,appear:!0,onEnter:()=>{Z(!0),null===N||void 0===N||N()},onExit:()=>{Z(!0),null===C||void 0===C||C()},onEntered:()=>{Z(!1),null===E||void 0===E||E()},onExited:()=>{Z(!1),null===j||void 0===j||j()}},o.createElement(i.h,{container:V},o.createElement("div",{ref:O,style:S,className:p({open:t},R),"data-qa":F},o.createElement("div",{className:p("content-aligner")},o.createElement("div",{className:p("content-wrapper")},o.createElement(r.i,{enabled:!h&&D&&t&&!L,autoFocus:!b&&g},o.createElement("div",Object.assign({ref:K,tabIndex:-1,role:"dialog","aria-modal":t,"aria-label":A,"aria-labelledby":P,className:p("content",{"has-scroll":"auto"===B},T)},G),I)))))))}var m=n(77280),h=n(17176),b=n(88776),D=n(54973);const g=JSON.parse('{"close":"Close dialog"}'),k=JSON.parse('{"close":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432\u043e\u0435 \u043e\u043a\u043d\u043e"}'),f=(0,D.e)({en:g,ru:k},"Dialog"),y=(0,d.Ge)("dialog-btn-close");function w(e){let{onClose:t}=e;return o.createElement("div",{className:y()},o.createElement(h.z,{view:"flat",size:"l",className:y("btn"),onClick:e=>t(e,{isOutsideClick:!1}),extraProps:{"aria-label":f("close")}},o.createElement(b.J,{data:m.Z,size:20})))}const x=(0,d.Ge)("dialog-body");const N=(0,d.Ge)("dialog-divider");var E=n(44920);const C=(0,d.Ge)("dialog-footer");class j extends o.Component{constructor(){super(...arguments),this.errorTooltipRef=o.createRef(),this.handleKeyDown=e=>{"Enter"===e.key&&(e.preventDefault(),this.props.onClickButtonApply&&this.props.onClickButtonApply(e))}}componentDidMount(){this.props.listenKeyEnter&&this.attachKeyDownListeners()}componentDidUpdate(e){!this.props.listenKeyEnter&&e.listenKeyEnter&&this.detachKeyDownListeners(),this.props.listenKeyEnter&&!e.listenKeyEnter&&this.attachKeyDownListeners()}componentWillUnmount(){this.detachKeyDownListeners()}render(){const{onClickButtonCancel:e,onClickButtonApply:t,loading:n,textButtonCancel:a,textButtonApply:s,propsButtonCancel:l,propsButtonApply:i,preset:r,children:d,errorText:c,showError:u,renderButtons:p}=this.props,v=o.createElement("div",{className:C("button",{action:"cancel"})},o.createElement(h.z,Object.assign({view:s?"flat":"normal",size:"l",width:"max",onClick:e,disabled:n},l),a)),m=o.createElement("div",{className:C("button",{action:"apply"})},o.createElement(h.z,Object.assign({ref:this.errorTooltipRef,type:"submit",view:"action",size:"l",width:"max",onClick:t,loading:n,className:C("button-apply",{preset:r})},i),s),c&&o.createElement(E.G,{open:u,anchorRef:this.errorTooltipRef,placement:["bottom","top"],disableLayer:!0,disablePortal:!0,hasArrow:!0},o.createElement("div",{className:C("error")},c)));return o.createElement("div",{className:C()},o.createElement("div",{className:C("children")},d),o.createElement("div",{className:C("bts-wrapper")},p?p(m,v):o.createElement(o.Fragment,null,a&&v,s&&m)))}attachKeyDownListeners(){setTimeout((()=>{window.addEventListener("keydown",this.handleKeyDown)}),0)}detachKeyDownListeners(){window.removeEventListener("keydown",this.handleKeyDown)}}j.defaultProps={preset:"default",showError:!1,listenKeyEnter:!1};const I=(0,d.Ge)("dialog-header");const S=(0,d.Ge)("dialog");class B extends o.Component{constructor(){super(...arguments),this.handleCloseButtonClick=e=>{const{onClose:t}=this.props;t(e.nativeEvent,"closeButtonClick")}}render(){const{container:e,children:t,open:n,disableBodyScrollLock:a,disableEscapeKeyDown:s,disableOutsideClick:l,disableFocusTrap:i,disableAutoFocus:r,restoreFocusRef:d,keepMounted:c,size:u,contentOverflow:p="visible",className:m,modalClassName:h,hasCloseButton:b,onEscapeKeyDown:D,onEnterKeyDown:g,onOutsideClick:k,onClose:f,onTransitionEnter:y,onTransitionEntered:x,onTransitionExit:N,onTransitionExited:E,"aria-label":C,"aria-labelledby":j,qa:I}=this.props;return o.createElement(v,{open:n,contentOverflow:p,disableBodyScrollLock:a,disableEscapeKeyDown:s,disableOutsideClick:l,disableFocusTrap:i,disableAutoFocus:r,restoreFocusRef:d,keepMounted:c,onEscapeKeyDown:D,onEnterKeyDown:g,onOutsideClick:k,onClose:f,onTransitionEnter:y,onTransitionEntered:x,onTransitionExit:N,onTransitionExited:E,className:S("modal",h),"aria-label":C,"aria-labelledby":j,container:e,qa:I},o.createElement("div",{className:S({size:u,"has-close":b,"has-scroll":"auto"===p},m)},t,b&&o.createElement(w,{onClose:this.handleCloseButtonClick})))}}B.defaultProps={disableBodyScrollLock:!1,disableEscapeKeyDown:!1,disableOutsideClick:!1,keepMounted:!1,hasCloseButton:!0},B.Footer=j,B.Header=function(e){const{caption:t="",insertBefore:n,insertAfter:a,className:s,id:l}=e;return o.createElement("div",{className:I(null,s)},n,o.createElement("div",{className:I("caption"),id:l},t),a)},B.Body=function(e){const{className:t,hasBorders:n=!1}=e;return o.createElement("div",{className:x({"has-borders":n},t)},e.children)},B.Divider=function(e){let{className:t}=e;return o.createElement("div",{className:N(null,t)})}},56711:(e,t,n)=>{n.d(t,{O:()=>s});var o=n(68963);const a=(0,n(36951).Ge)("skeleton");function s(e){let{className:t,style:n,qa:s}=e;return o.createElement("div",{className:a(null,t),style:n,"data-qa":s})}},27320:(e,t,n)=>{n.d(t,{u:()=>c});var o=n(68963),a=n(48027),s=n(79004),l=n(44920),i=n(10288);const r=(0,n(36951).Ge)("tooltip"),d=["bottom","top"],c=e=>{const{children:t,content:n,disabled:c,placement:u=d,qa:p,id:v,className:m,style:h,disablePortal:b,contentClassName:D,openDelay:g=1e3,closeDelay:k}=e,[f,y]=o.useState(null),w=(0,s.p)(f,{openDelay:g,closeDelay:k,preventTriggerOnFocus:!0}),x=o.Children.only(t),N=x.ref,E=(0,a.c)(y,N);return o.createElement(o.Fragment,null,o.cloneElement(x,{ref:E}),f?o.createElement(l.G,{id:v,role:"tooltip",className:r(null,m),style:h,open:w&&!c,placement:u,anchorRef:{current:f},disablePortal:b,disableEscapeKeyDown:!0,disableOutsideClick:!0,disableLayer:!0,qa:p},o.createElement("div",{className:r("content",D)},o.createElement(i.x,{variant:"body-short",color:"complementary"},n))):null)}},56829:(e,t,n)=>{n.d(t,{F:()=>a});var o=n(40797);function a(){return(0,o.T)().theme}}}]);