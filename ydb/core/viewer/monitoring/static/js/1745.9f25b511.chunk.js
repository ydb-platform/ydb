"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[1745],{99683:(e,t,r)=>{r.d(t,{l:()=>o});var s=r(68330),n=r(24362),a=r(75859);const l=(0,n.cn)("ydb-cell-with-popover");function o(e){let{children:t,className:r,wrapperClassName:n,...o}=e;return(0,a.jsx)("div",{className:l(null,n),children:(0,a.jsx)(s.J,{className:l("popover",r),...o,children:t})})}},41919:(e,t,r)=>{r.d(t,{Q:()=>d});var s=r(39683),n=r(17176),a=r(88776),l=r(24362),o=r(75859);const i=(0,l.cn)("developer-ui-link-button");function d(e){let{href:t,visible:r=!1,className:l}=e;return(0,o.jsx)(n.z,{size:"s",href:t,className:i({visible:r},l),target:"_blank",children:(0,o.jsx)(a.J,{data:s.Z})})}},49201:(e,t,r)=>{r.d(t,{C:()=>i});var s=r(14979),n=r(24362);const a=(0,r(30817).wZ)("ydb-entities-count",{ru:{of:"\u0438\u0437"},en:{of:"of"}});var l=r(75859);const o=(0,n.cn)("ydb-entities-count"),i=e=>{let{total:t,current:r,label:n,loading:i,className:d}=e,u="";return n&&(u+="".concat(n,": ")),i?u+="...":(u+="".concat(r),t&&Number(t)!==Number(r)&&(u+=" ".concat(a("of")," ").concat(t))),(0,l.jsx)(s._,{theme:"info",size:"m",className:o(null,d),children:u})}},62776:(e,t,r)=>{r.d(t,{a:()=>s.a});var s=r(91173)},89778:(e,t,r)=>{r.d(t,{k:()=>m});var s=r(10502),n=r(92398),a=r(48169),l=r(51688),o=r(99683),i=r(41919),d=r(69214),u=r(27506),c=r(75859);const m=e=>{let{node:t,getNodeRef:r}=e;if(!t.Host)return(0,c.jsx)("span",{children:"\u2014"});const m=!(0,l.TA)(t);let h;r?h=r(t)+"internal":t.NodeId&&(h=(0,a.wq)(t.NodeId)+"internal");const p=m?(0,n.a3)(t.NodeId,{tenantName:t.TenantName}):void 0,g=h?(0,c.jsx)(i.Q,{href:h}):null;return(0,c.jsx)(o.l,{disabled:!m,content:(0,c.jsx)(u.bP,{data:t}),placement:["top","bottom"],behavior:s.x.Immediate,children:(0,c.jsx)(d.A,{name:t.Host,status:t.SystemState,path:p,hasClipboardButton:!0,additionalControls:g})})}},11635:(e,t,r)=>{r.d(t,{WQ:()=>D});var s=r(68963),n=r(5922),a=r(47101);const l=r(905).h.injectEndpoints({endpoints:function(e){return{fetchTableChunk:e.query({queryFn:async(e,t)=>{let{offset:r,limit:s,sortParams:n,filters:a,fetchData:l}=e,{signal:o}=t;try{return{data:await l({limit:s,offset:r,filters:a,sortParams:n,signal:o})}}catch(i){return{error:i}}},providesTags:["All"]})}}});var o=r(17096),i=r(26688),d=r(56711);const u="left",c=-1,m=40;const h=(0,r(24362).cn)("ydb-paginated-table");var p=r(75859);const g=e=>{let{children:t,className:r,height:s,width:n,align:a=u}=e;return(0,p.jsx)("td",{className:h("row-cell",{align:a},r),style:{height:"".concat(s,"px"),width:"".concat(n,"px"),maxWidth:"".concat(n,"px")},children:t})},v=e=>{let{index:t,columns:r,height:s}=e;return(0,p.jsx)("tr",{className:h("row",{loading:!0}),children:r.map((e=>(0,p.jsx)(g,{height:s,width:e.width,align:e.align,className:e.className,children:(0,p.jsx)(d.O,{style:{width:"80%",height:"50%"}})},"".concat(e.name).concat(t))))})},f=e=>{let{row:t,index:r,columns:s,getRowClassName:n,height:a}=e;const l=null===n||void 0===n?void 0:n(t);return(0,p.jsx)("tr",{className:h("row",l),children:s.map((e=>(0,p.jsx)(g,{height:a,width:e.width,align:e.align,className:e.className,children:e.render({row:t,index:r})},"".concat(e.name).concat(r))))})},w=e=>{let{columns:t,children:r}=e;return(0,p.jsx)("tr",{className:h("row",{empty:!0}),children:(0,p.jsx)("td",{colSpan:t.length,className:h("td"),children:r})})},b=e=>{var t;let{id:r,limit:a,rowHeight:d,columns:u,fetchData:c,tableName:m,filters:h,sortParams:g,observer:b,getRowClassName:x,renderErrorMessage:N,onDataFetched:j,isActive:y}=e;const S=s.useRef(null),[C,E]=s.useState(!0),[I]=(0,o.Rj)(),P={offset:r*a,limit:a,fetchData:c,filters:h,sortParams:g,tableName:m};l.useFetchTableChunkQuery(P,{skip:C||!y,pollingInterval:I});const{currentData:O,error:k}=l.endpoints.fetchTableChunk.useQueryState(P);s.useEffect((()=>{let e=0;return y&&C&&(e=window.setTimeout((()=>{E(!1)}),200)),()=>{window.clearTimeout(e)}}),[y,C]),s.useEffect((()=>{const e=S.current;return e&&b.observe(e),()=>{e&&b.unobserve(e)}}),[b]),s.useEffect((()=>{if(O&&y){const{total:e=0,found:t=0}=O;j(e,t)}}),[O,y,j]);const D=(null===O||void 0===O||null===(t=O.data)||void 0===t?void 0:t.length)||a,G=D?D*d:a*d;return(0,p.jsx)("tbody",{ref:S,id:r.toString(),style:{height:"".concat(G,"px")},children:(()=>{if(!y)return null;if(!O){if(k){const e=k;return(0,p.jsx)(w,{columns:u,children:N?N(e):(0,p.jsx)(i.V,{error:e})})}return(0,n.c)(D).map((e=>(0,p.jsx)(v,{columns:u,height:d,index:e},e)))}return O.data.map(((e,t)=>(0,p.jsx)(f,{index:t,row:e,columns:u,height:d,getRowClassName:x},t)))})()})};function x(e){let{minWidth:t,maxWidth:r,getCurrentColumnWidth:n,onResize:a}=e;const l=s.useRef(null),[o,i]=s.useState(!1);return s.useEffect((()=>{const e=l.current;if(!e)return;let s,o,d;const u=function(e){let t,r=null;return function(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];t=n,"number"!==typeof r&&(r=requestAnimationFrame((()=>{e(...t),r=null})))}}((e=>{if(N(e),"number"!==typeof s||"number"!==typeof o)return;const n=e.clientX-s,l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.max(t,Math.min(e,r))}(o+n,t,r);l!==d&&(d=l,null===a||void 0===a||a(d))})),c=e=>{N(e),void 0!==d&&(null===a||void 0===a||a(d)),i(!1),s=void 0,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)},m=e=>{o=n(),N(e),s=e.clientX,i(!0),document.addEventListener("mousemove",u),document.addEventListener("mouseup",c)};return e.addEventListener("mousedown",m),()=>{e.removeEventListener("mousedown",m),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)}}),[a,t,r,n]),(0,p.jsx)("span",{ref:l,className:h("resize-handler",{resizing:o}),onClick:e=>N(e)})}function N(e){e.preventDefault(),e.stopPropagation()}const j=e=>{let{order:t}=e;return(0,p.jsx)("svg",{className:h("sort-icon",{desc:-1===t}),viewBox:"0 0 10 6",width:"10",height:"6",children:(0,p.jsx)("path",{fill:"currentColor",d:"M0 5h10l-5 -5z"})})},y=e=>{let{sortOrder:t,sortable:r,defaultSortOrder:s}=e;return r?(0,p.jsx)("span",{className:h("sort-icon-container",{shadow:!t}),children:(0,p.jsx)(j,{order:t||s})}):null},S=e=>{var t;let{column:r,resizeable:n,sortOrder:a,defaultSortOrder:l,onSort:o,rowHeight:i,onCellMount:d,onCellUnMount:u,onColumnsResize:c}=e;const m=s.useRef(null);s.useEffect((()=>{const e=m.current;return e&&(null===d||void 0===d||d(e)),()=>{e&&(null===u||void 0===u||u(e))}}),[d,u]);const g=s.useCallback((()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect().width}),[]),v=s.useCallback((e=>{null===c||void 0===c||c(r.name,e)}),[c,r.name]),f=null!==(t=r.header)&&void 0!==t?t:r.name;return(0,p.jsx)("th",{children:(0,p.jsxs)("div",{ref:m,className:h("head-cell-wrapper"),style:{height:"".concat(i,"px"),width:"".concat(r.width,"px")},children:[(0,p.jsxs)("div",{className:h("head-cell",{align:r.align,sortable:r.sortable},r.className),onClick:()=>{r.sortable&&(null===o||void 0===o||o(r.name))},children:[(0,p.jsx)("div",{className:h("head-cell-content"),children:f}),(0,p.jsx)(y,{sortOrder:a,sortable:r.sortable,defaultSortOrder:l})]}),n?(0,p.jsx)(x,{maxWidth:r.resizeMaxWidth,minWidth:r.resizeMinWidth,getCurrentColumnWidth:g,onResize:v}):null]})})},C=e=>{let{columns:t,onSort:r,onColumnsResize:n,defaultSortOrder:a=c,rowHeight:l=m}=e;const[o,i]=s.useState({}),d=e=>{let t={};if(e===o.columnId){if(o.sortOrder&&o.sortOrder!==a)return i(t),void(null===r||void 0===r||r(t));t={sortOrder:1===o.sortOrder?-1:1,columnId:e}}else t={sortOrder:a,columnId:e};null===r||void 0===r||r(t),i(t)};return(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)("colgroup",{children:t.map((e=>(0,p.jsx)("col",{style:{width:"".concat(e.width,"px")}},e.name)))}),(0,p.jsx)("thead",{className:h("head"),children:(0,p.jsx)("tr",{children:t.map((e=>{var t;const r=o.columnId===e.name?o.sortOrder:void 0,s=n&&(null===(t=e.resizeable)||void 0===t||t);return(0,p.jsx)(S,{column:e,resizeable:s,sortOrder:r,defaultSortOrder:a,onSort:d,rowHeight:l,onColumnsResize:n},e.name)}))})})]})};var E=r(30817);const I=JSON.parse('{"empty":"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}'),P=(0,E.wZ)("ydb-paginated-table",{ru:I,en:{empty:"No data"}}),O=e=>{let{limit:t,fetchData:r,filters:l,tableName:o,columns:i,getRowClassName:d,rowHeight:u=m,parentContainer:c,initialSortParams:g,onColumnsResize:v,renderControls:f,renderErrorMessage:x,renderEmptyDataMessage:N}=e;const[j,y]=s.useState(g),[S,E]=s.useState(t),[I,O]=s.useState(0),[k,D]=s.useState([]),[G,U]=s.useState(!0),T=s.useRef(null),F=s.useCallback(((e,t)=>{E(e),O(t),U(!1)}),[]),A=(e=>{let{onEntry:t,onLeave:r,parentContainer:n}=e;const a=s.useRef();return s.useEffect((()=>(a.current=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?t(e.target.id):r(e.target.id)}))}),{root:n,rootMargin:"100%"}),()=>{var e;null===(e=a.current)||void 0===e||e.disconnect(),a.current=void 0})),[n,t,r]),a.current})({onEntry:s.useCallback((e=>{D((t=>[...new Set([...t,Number(e)])]))}),[]),onLeave:s.useCallback((e=>{D((t=>t.filter((t=>t!==Number(e)))))}),[]),parentContainer:c});s.useLayoutEffect((()=>{var e;(E(t),O(0),U(!0),c)?c.scrollTo(0,0):null===(e=T.current)||void 0===e||e.scrollTo(0,0);D([0])}),[l,t,c]);const R=()=>{if(!A)return null;if(!G&&0===I)return(0,p.jsx)("tbody",{children:(0,p.jsx)(w,{columns:i,children:N?N():P("empty")})});const e=I||t,s=Math.ceil(e/t);return(0,n.c)(s).map((e=>(0,p.jsx)(b,{id:e,limit:t,rowHeight:u,columns:i,fetchData:r,filters:l,tableName:o,sortParams:j,getRowClassName:d,renderErrorMessage:x,onDataFetched:F,isActive:k.includes(e),observer:A},e)))},_=()=>(0,p.jsxs)("table",{className:h("table"),children:[(0,p.jsx)(C,{columns:i,onSort:y,onColumnsResize:v}),R()]});return(0,p.jsx)("div",{ref:T,className:h(null),children:f?(0,p.jsxs)(a.l,{children:[(0,p.jsx)(a.l.Controls,{children:f({inited:!G,totalEntities:S,foundEntities:I})}),(0,p.jsx)(a.l.Table,{children:_()})]}):_()})};var k=r(89712);function D(e){let{columnsWidthLSKey:t,columns:r,...s}=e;const[n,a]=(0,k.M)(t),l=function(e,t){return e.map((e=>{var r;return{...e,width:null!==(r=t[e.name])&&void 0!==r?r:e.width}}))}(r,n);return(0,p.jsx)(O,{columns:l,onColumnsResize:a,...s})}},2098:(e,t,r)=>{r.d(t,{G:()=>d});var s=r(2639),n=r(19812),a=r(24362),l=r(89712),o=r(75859);const i=(0,a.cn)("ydb-resizeable-data-table");function d(e){let{columnsWidthLSKey:t,columns:r,settings:a,wrapperClassName:d,...u}=e;const[c,m]=(0,l.M)(t),h=(0,s.B)(r,c),p={...a,defaultResizeable:!0};return(0,o.jsx)("div",{className:i(null,d),children:(0,o.jsx)(n.ZP,{theme:"yandex-cloud",columns:h,onResize:m,settings:p,...u})})}},30629:(e,t,r)=>{r.d(t,{o:()=>i});var s=r(68963),n=r(77264),a=r(24362),l=r(75859);const o=(0,a.cn)("ydb-search"),i=e=>{let{onChange:t,value:r="",className:a,debounce:i=200,placeholder:d}=e;const[u,c]=s.useState(r),m=s.useRef();s.useEffect((()=>{c((e=>e!==r?r:e))}),[r]);return(0,l.jsx)(n.o,{hasClear:!0,autoFocus:!0,className:o(null,a),placeholder:d,value:u,onUpdate:e=>{c(e),window.clearTimeout(m.current),m.current=window.setTimeout((()=>{null===t||void 0===t||t(e)}),i)}})}},22692:(e,t,r)=>{r.d(t,{h:()=>o});var s=r(56711),n=r(24362),a=r(75859);const l=(0,n.cn)("table-skeleton"),o=e=>{let{rows:t=2,className:r}=e;return(0,a.jsxs)("div",{className:l(null,r),children:[(0,a.jsxs)("div",{className:l("row"),children:[(0,a.jsx)(s.O,{className:l("col-1")}),(0,a.jsx)(s.O,{className:l("col-2")}),(0,a.jsx)(s.O,{className:l("col-3")}),(0,a.jsx)(s.O,{className:l("col-4")}),(0,a.jsx)(s.O,{className:l("col-5")})]}),[...new Array(t)].map(((e,t)=>(0,a.jsx)("div",{className:l("row"),children:(0,a.jsx)(s.O,{className:l("col-full")})},"skeleton-row-".concat(t))))]})}},47101:(e,t,r)=>{r.d(t,{l:()=>o});var s=r(24362),n=r(22692),a=r(75859);const l=(0,s.cn)("ydb-table-with-controls-layout"),o=e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:l(null,r),children:t})};o.Controls=function(e){let{children:t,className:r}=e;return(0,a.jsx)("div",{className:l("controls-wrapper"),children:(0,a.jsx)("div",{className:l("controls",r),children:t})})},o.Table=function(e){let{children:t,loading:r,className:s}=e;return r?(0,a.jsx)(n.h,{className:l("loader")}):(0,a.jsx)("div",{className:l("table",s),children:t})}},43989:(e,t,r)=>{r.d(t,{X:()=>l});var s=r(79734),n=r(51688),a=r(75859);const l=e=>{let{value:t,onChange:r,className:l}=e;return(0,a.jsxs)(s.E,{value:t,onUpdate:r,className:l,children:[(0,a.jsx)(s.E.Option,{value:n.Uu.All,children:n.qU[n.Uu.All]}),(0,a.jsx)(s.E.Option,{value:n.Uu.SmallUptime,children:n.qU[n.Uu.SmallUptime]})]})}},80816:(e,t,r)=>{r.d(t,{a:()=>o});var s=r(14979),n=r(24362),a=r(75859);const l=(0,n.cn)("ydb-usage-label");function o(e){let{value:t,overloadThreshold:r=90,theme:n,...o}=e;return(0,a.jsxs)(s._,{theme:n,className:l({overload:Number(t)>=r}),...o,children:[t||0,"%"]})}},92076:(e,t,r)=>{r.d(t,{HI:()=>Y,Ty:()=>S,k8:()=>q,mk:()=>Q});var s=r(68963),n=r(71549),a=r(19812),l=r(10502),o=r(14979),i=r(68330),d=r(88776),u=r(99683),c=r(69214),m=r(80816),h=r(79255),p=r(95829),g=r(75850),v=r(24362),f=r(34301),w=r(15106),b=r(55850),x=r(10703),N=r(43817),j=(r(5384),r(75859));const y=(0,v.cn)("global-storage-groups"),S="storageGroupsColumnsWidth",C="MediaType",E="Erasure",I="GroupId",P="Used",O="Limit",k="Usage",D="UsedSpaceFlag",G="Read",U="Write",T="VDisks",F="Degraded",A={name:"PoolName",header:"Pool Name",width:250,render:e=>{var t;let{row:r}=e;const s=null===(t=r.PoolName)||void 0===t?void 0:t.split("/");return s&&(0,j.jsx)(u.l,{wrapperClassName:y("pool-name-wrapper"),content:r.PoolName,placement:["right"],behavior:l.x.Immediate,children:s[s.length-1]})},align:a.ZP.LEFT},R={name:C,header:"Type",width:100,resizeMinWidth:100,align:a.ZP.LEFT,render:e=>{let{row:t}=e;return(0,j.jsxs)(s.Fragment,{children:[(0,j.jsx)(o._,{children:t.MediaType||"\u2014"}),"\xa0",t.Encryption&&(0,j.jsx)(i.J,{content:(0,N.Z)("encrypted"),placement:"right",behavior:l.x.Immediate,children:(0,j.jsx)(o._,{children:(0,j.jsx)(d.J,{data:n.Z,size:18})})})]})},sortable:!1},_={name:E,header:"Erasure",width:100,sortAccessor:e=>e.ErasureSpecies,render:e=>{let{row:t}=e;return t.ErasureSpecies?t.ErasureSpecies:"-"},align:a.ZP.LEFT},M={name:F,header:"Degraded",width:110,resizeMinWidth:110,render:e=>{let{row:t}=e;return t.Degraded?(0,j.jsxs)(o._,{theme:(0,x._O)(t),children:["Degraded: ",t.Degraded]}):"-"},align:a.ZP.LEFT,defaultOrder:a.ZP.DESCENDING},L={name:k,header:"Usage",width:75,resizeMinWidth:75,render:e=>{let{row:t}=e;return t.Limit?(0,j.jsx)(m.a,{value:t.Usage,theme:(0,x.YC)(t.Usage)}):"-"},sortAccessor:e=>e.Limit?e.Usage:null,align:a.ZP.LEFT},Z={name:I,header:"Group ID",width:130,render:e=>{let{row:t}=e;return(0,j.jsx)("span",{className:y("group-id"),children:t.GroupID})},sortAccessor:e=>Number(e.GroupID),align:a.ZP.RIGHT},V={name:P,header:"Used",width:100,render:e=>{let{row:t}=e;return(0,b.Uz)(t.Used,!0)},align:a.ZP.RIGHT},z={name:O,header:"Limit",width:100,render:e=>{let{row:t}=e;return(0,b.Uz)(t.Limit)},align:a.ZP.RIGHT},K={name:D,header:"Space",width:110,render:e=>{let{row:t}=e;const r=t.UsedSpaceFlag;let s=g.K.Red;return r<100?s=g.K.Green:r<1e4?s=g.K.Yellow:r<1e6&&(s=g.K.Orange),(0,j.jsx)(c.A,{status:s})},align:a.ZP.CENTER},W={name:G,header:"Read",width:100,render:e=>{let{row:t}=e;return t.Read?(0,b.Qt)(t.Read):"-"},align:a.ZP.RIGHT},H={name:U,header:"Write",width:100,render:e=>{let{row:t}=e;return t.Write?(0,b.Qt)(t.Write):"-"},align:a.ZP.RIGHT},J=e=>({name:T,className:y("vdisks-column"),header:"VDisks",render:t=>{var r;let{row:s}=t;return(0,j.jsx)("div",{className:y("vdisks-wrapper"),children:null===(r=s.VDisks)||void 0===r?void 0:r.map((t=>(0,j.jsx)(h.c,{data:t,nodes:e,className:y("vdisks-item")},(0,f.a2)(t.VDiskId))))})},align:a.ZP.CENTER,width:900,resizeable:!1,sortable:!1}),Q=()=>[Z,R,_,L,V,z].map((e=>({...e,sortable:!1}))),Y=e=>[A,R,_,M,Z,L,V,J(e)],q=(e,t)=>{const r=((e,t)=>t===p.G.space?e.filter((e=>e.name!==F)):t===p.G.missing?e.filter((e=>e.name!==D)):e.filter((e=>e.name!==F&&e.name!==D)))([A,R,_,M,L,Z,V,z,K,W,H,J(e)],t);return r.map((e=>({...e,sortable:(0,w.P7)(e.name)})))}},43817:(e,t,r)=>{r.d(t,{Z:()=>l});var s=r(30817);const n=JSON.parse('{"empty.default":"No such groups","empty.out_of_space":"No groups with out of space errors","empty.degraded":"No degraded groups","show_all":"Show all groups","encrypted":"Encrypted group"}'),a=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f","empty.out_of_space":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0433\u0440\u0443\u043f\u043f","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","encrypted":"\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430"}'),l=(0,s.wZ)("ydb-storage-groups",{ru:a,en:n})},70885:(e,t,r)=>{r.d(t,{V:()=>Ye});var s=r(52317),n=r(17096),a=r(52846),l=r(82073),o=r(8747),i=r(99337),d=r(95829),u=r(95408);const c=u.z.nativeEnum(d.G).catch(d.G.all),m=u.z.nativeEnum(d.d).catch(d.d.groups);var h=r(51688),p=r(68963),g=r(49201),v=r(30629),f=r(43989),w=r(79734),b=r(75859);const x={[d.d.groups]:"Groups",[d.d.nodes]:"Nodes"},N=e=>{let{value:t,onChange:r}=e;return(0,b.jsxs)(w.E,{value:t,onUpdate:r,qa:"storage-type-filter",children:[(0,b.jsx)(w.E.Option,{value:d.d.groups,children:x[d.d.groups]}),(0,b.jsx)(w.E.Option,{value:d.d.nodes,children:x[d.d.nodes]})]})},j={[d.G.all]:"All",[d.G.missing]:"Degraded",[d.G.space]:"Out of Space"},y=e=>{let{value:t,onChange:r}=e;return(0,b.jsxs)(w.E,{value:t,onUpdate:r,qa:"storage-visible-entities-filter",children:[(0,b.jsx)(w.E.Option,{value:d.G.missing,children:j[d.G.missing]}),(0,b.jsx)(w.E.Option,{value:d.G.space,children:j[d.G.space]}),(0,b.jsx)(w.E.Option,{value:d.G.all,children:j[d.G.all]})]})};var S=r(2418),C=r(69214),E=r(24362),I=r(10703),P=r(30817);const O=JSON.parse('{"label":"Usage:","default_value":"Any","groups_count":["{{count}} group","{{count}} groups","{{count}} groups","No groups"]}'),k=JSON.parse('{"label":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435:","default_value":"\u041b\u044e\u0431\u043e\u0435","groups_count":["{{count}} \u0433\u0440\u0443\u043f\u043f\u0430","{{count}} \u0433\u0440\u0443\u043f\u043f\u044b","{{count}} \u0433\u0440\u0443\u043f\u043f","\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f"]}'),D=(0,P.wZ)("ydb-usage-filter",{ru:k,en:O}),G=(0,E.cn)("usage-filter"),U=e=>{const{className:t,value:r=[],groups:s=[],onChange:n,debounce:a=200}=e,[l,o]=p.useState(r),i=p.useRef();p.useEffect((()=>{o((e=>e.join(",")!==r.join(",")?r:e))}),[r]);const d=p.useMemo((()=>s.map((e=>{let{threshold:t,count:r}=e;return{value:String(t),text:"".concat(t,"%"),data:{count:r}}}))),[s]),u=Math.max(...s.map((e=>{let{count:t}=e;return t})));return(0,b.jsx)(S.P,{className:G(null,t),label:D("label"),value:l,placeholder:D("default_value"),options:d,multiple:!0,onUpdate:e=>{o(e),window.clearTimeout(i.current),i.current=window.setTimeout((()=>{null===n||void 0===n||n(e)}),a)},renderOption:e=>{let{value:t,data:r,text:s}=e;return(0,b.jsxs)("div",{className:G("option"),children:[(0,b.jsx)(C.A,{className:G("option-title"),status:(0,I.CZ)(Number(t)),name:s,size:"xs"}),(0,b.jsxs)("div",{className:G("option-meta"),children:[D("groups_count",{count:r.count}),(0,b.jsx)("div",{className:G("option-bar"),style:{width:"".concat(r.count/u*100,"%")}})]})]})},getOptionHeight:()=>50,popupWidth:280,disabled:0===s.length})},T=JSON.parse('{"groups":"Groups","nodes":"Nodes","controls_groups-search-placeholder":"Group ID, Pool name","controls_nodes-search-placeholder":"Node ID, FQDN"}'),F=JSON.parse('{"groups":"\u0413\u0440\u0443\u043f\u043f\u044b","nodes":"\u041d\u043e\u0434\u044b","controls_groups-search-placeholder":"ID \u0433\u0440\u0443\u043f\u043f\u044b, \u0438\u043c\u044f \u043f\u0443\u043b\u0430","controls_nodes-search-placeholder":"ID \u0443\u0437\u043b\u0430, FQDN"}'),A=(0,P.wZ)("ydb-storage",{ru:F,en:T}),R=(0,E.cn)("global-storage"),_=e=>{let{searchValue:t,handleSearchValueChange:r,withTypeSelector:s,storageType:n,handleStorageTypeChange:a,visibleEntities:l,handleVisibleEntitiesChange:o,nodesUptimeFilter:i,handleNodesUptimeFilterChange:u,withGroupsUsageFilter:c,groupsUsageFilter:m,groupsUsageFilterOptions:h,handleGroupsUsageFilterChange:w,entitiesCountCurrent:x,entitiesCountTotal:j,entitiesLoading:S}=e;const C=n===d.d.nodes,E=A(C?"nodes":"groups");return(0,b.jsxs)(p.Fragment,{children:[(0,b.jsx)(v.o,{value:t,onChange:r,placeholder:A(C?"controls_nodes-search-placeholder":"controls_groups-search-placeholder"),className:R("search")}),s&&(0,b.jsx)(N,{value:n,onChange:a}),(0,b.jsx)(y,{value:l,onChange:o}),C&&(0,b.jsx)(f.X,{value:i,onChange:u}),!C&&c&&(0,b.jsx)(U,{value:m,onChange:w,groups:h}),(0,b.jsx)(g.C,{label:E,loading:S,total:j,current:x})]})};var M=r(11635),L=r(17176),Z=r(79023),V=r(56350);const z=JSON.parse('{"default_message":"Everything is fine!","default_button_label":"Show All"}'),K=JSON.parse('{"default_message":"\u0412\u0441\u0451 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435!","default_button_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}'),W=(0,P.wZ)("ydb-storage-empty-filter",{ru:K,en:z}),H=e=>{let{title:t,message:r=W("default_message"),showAll:s=W("default_button_label"),onShowAll:n}=e;return(0,b.jsx)(Z.u,{image:(0,b.jsx)(V.Q,{name:"thumbsUp"}),position:"left",title:t,description:r,actions:n&&[(0,b.jsx)(L.z,{onClick:n,children:s},"show-all")]})};var J=r(43817);const Q=e=>{let t,{visibleEntities:r,onShowAll:s}=e;return r===d.G.space&&(t=(0,J.Z)("empty.out_of_space")),r===d.G.missing&&(t=(0,J.Z)("empty.degraded")),t?(0,b.jsx)(H,{title:t,showAll:(0,J.Z)("show_all"),onShowAll:s}):null};var Y=r(92092),q=r(11431);const B=(e,t)=>"getStorageGroups|offset".concat(t,"|limit").concat(e),X=async e=>{const{limit:t,offset:r,sortParams:s,filters:n}=e,{sortOrder:a,columnId:l}=null!==s&&void 0!==s?s:{},{searchValue:o,visibleEntities:i,database:d,nodeId:u}=null!==n&&void 0!==n?n:{},c=await window.api.getStorageInfo({version:q.w.v2,limit:t,offset:r,sortOrder:a,sortValue:l,filter:o,visibleEntities:i,database:d,nodeId:u},{concurrentId:B(t,r)}),m=(0,Y.KJ)(c);return{data:m.groups||[],found:m.found||0,total:m.total||0}};var $=r(92076);const ee=e=>{let{searchValue:t,visibleEntities:r,database:s,nodeId:n,nodesMap:a,onShowAll:l,parentContainer:o,renderControls:i,renderErrorMessage:u}=e;const c=p.useMemo((()=>({searchValue:t,visibleEntities:r,database:s,nodeId:n})),[t,r,s,n]),m=p.useMemo((()=>(0,$.k8)(a,r)),[a,r]);return(0,b.jsx)(M.WQ,{columnsWidthLSKey:$.Ty,parentContainer:o,columns:m,fetchData:X,limit:50,renderControls:i,renderErrorMessage:u,renderEmptyDataMessage:()=>r!==d.G.all?(0,b.jsx)(Q,{onShowAll:l,visibleEntities:r}):(0,J.Z)("empty.default"),filters:c,tableName:"storage-groups"})},te=JSON.parse('{"empty.default":"No such nodes","empty.out_of_space":"No nodes with out of space errors","empty.degraded":"No degraded nodes","empty.small_uptime":"No nodes with uptime < 1h","empty.several_filters":"No nodes match current filters combination","show_all":"Show all nodes"}'),re=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432","empty.out_of_space":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0443\u0437\u043b\u043e\u0432","empty.small_uptime":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432 \u0441 uptime < 1h","empty.several_filters":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0443\u0437\u043b\u044b"}'),se=(0,P.wZ)("ydb-storage-nodes",{ru:re,en:te}),ne=e=>{let t,{visibleEntities:r,nodesUptimeFilter:s,onShowAll:n}=e;return r===d.G.space&&(t=se("empty.out_of_space")),r===d.G.missing&&(t=se("empty.degraded")),s===h.Uu.SmallUptime&&(t=se("empty.small_uptime")),r!==d.G.all&&s!==h.Uu.All&&(t=se("empty.several_filters")),t?(0,b.jsx)(H,{title:t,showAll:se("show_all"),onShowAll:n}):null},ae=(e,t)=>"getStorageNodes|offset".concat(t,"|limit").concat(e),le=async e=>{const{type:t="static",storage:r=!0,limit:s,offset:n,sortParams:a,filters:l}=e,{searchValue:o,nodesUptimeFilter:i,visibleEntities:d,database:u}=null!==l&&void 0!==l?l:{},{sortOrder:c,columnId:m}=null!==a&&void 0!==a?a:{},p=await window.api.getNodes({type:t,storage:r,limit:s,offset:n,sortOrder:c,sortValue:m,filter:o,uptime:(0,h.RW)(i),visibleEntities:d,database:u},{concurrentId:ae(s,n)}),g=(0,Y.Y2)(p);return{data:g.nodes||[],found:g.found||0,total:g.total||0}};var oe=r(19812),ie=r(89778),de=r(1796),ue=r(74170),ce=r(40073),me=r(79255),he=r(54665),pe=r(17880),ge=r(5922),ve=r(34301),fe=r(92398);const we=(0,E.cn)("pdisk-storage"),be=e=>{let{nodeId:t,data:r={},vDisks:s}=e;const[n,a]=p.useState(!1),l=(0,pe.X_)(),o=p.useRef(null);let i=(0,he.ax)(he.ZP.node,{id:t,activeTab:fe.pV},{pdiskId:r.PDiskId||""});return l&&(0,ge.D)(r.PDiskId)&&(i=(0,he.ds)(r.PDiskId,t)),(0,b.jsxs)(p.Fragment,{children:[(0,b.jsx)(ce.J,{data:r,anchorRef:o,open:n}),(0,b.jsxs)("div",{className:we(),ref:o,children:[null!==s&&void 0!==s&&s.length?(0,b.jsx)("div",{className:we("vdisks"),children:s.map((e=>(0,b.jsx)("div",{className:we("vdisks-item"),style:{flexGrow:Number(e.AllocatedSize)||1},children:(0,b.jsx)(me.c,{data:e,compact:!0,stackClassName:we("donors-stack")})},(0,ve.a2)(e.VDiskId))))}):null,(0,b.jsxs)(ue.h,{to:i,className:we("content"),onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},children:[(0,b.jsx)(de.p,{diskAllocatedPercent:r.AllocatedPercent,severity:r.Severity}),(0,b.jsx)("div",{className:we("media-type"),children:r.Type})]})]})]})},xe=(0,E.cn)("global-storage-nodes"),Ne=e=>xe("node",{unavailable:(0,h.TA)(e)}),je="storageNodesColumnsWidth",ye="NodeId",Se="Host",Ce="DC",Ee="Rack",Ie="Uptime",Pe="PDisks",Oe="Missing",ke=(e,t)=>{const r=(e=>{const t=null===e||void 0===e?void 0:e.getNodeRef;return[{name:ye,header:"Node ID",width:100,align:oe.ZP.RIGHT,render:e=>{let{row:t}=e;return t.NodeId}},{name:Se,header:"Host",width:350,render:e=>{let{row:r}=e;return(0,b.jsx)(ie.k,{node:r,getNodeRef:t})},align:oe.ZP.LEFT},{name:Ce,header:"DC",width:100,render:e=>{let{row:t}=e;return t.DC||s.jX},align:oe.ZP.LEFT},{name:Ee,header:"Rack",width:100,render:e=>{let{row:t}=e;return t.Rack||"\u2014"},align:oe.ZP.LEFT},{name:Ie,header:"Uptime",width:130,sortAccessor:e=>{let{StartTime:t}=e;return t?-t:0},align:oe.ZP.RIGHT,render:e=>{let{row:t}=e;return t.Uptime}},{name:Oe,header:"Missing",width:100,align:oe.ZP.CENTER,defaultOrder:oe.ZP.DESCENDING,render:e=>{let{row:t}=e;return t.Missing}},{name:Pe,className:xe("pdisks-column"),header:"PDisks",render:e=>{var t;let{row:r}=e;return(0,b.jsx)("div",{className:xe("pdisks-wrapper"),children:null===(t=r.PDisks)||void 0===t?void 0:t.map((e=>{var t;const s=null===(t=r.VDisks)||void 0===t?void 0:t.filter((t=>t.PDiskId===e.PDiskId));return(0,b.jsx)("div",{className:xe("pdisks-item"),children:(0,b.jsx)(be,{data:e,nodeId:r.NodeId,vDisks:s})},e.PDiskId)}))})},align:oe.ZP.CENTER,sortable:!1,width:900,resizeable:!1}]})(e),n=r.map((e=>({...e,sortable:(0,h.oh)(e.name)})));return t!==d.G.missing?n.filter((e=>e.name!==Oe)):n},De=e=>{let{searchValue:t,visibleEntities:r,nodesUptimeFilter:s,database:n,additionalNodesProps:a,onShowAll:l,parentContainer:o,renderControls:i,renderErrorMessage:u}=e;const c=p.useMemo((()=>({searchValue:t,visibleEntities:r,nodesUptimeFilter:s,database:n})),[t,r,s,n]),m=p.useMemo((()=>ke(a,r)),[a,r]);return(0,b.jsx)(M.WQ,{columnsWidthLSKey:je,parentContainer:o,columns:m,fetchData:le,rowHeight:50,limit:50,renderControls:i,renderErrorMessage:u,renderEmptyDataMessage:()=>r!==d.G.all||s!==h.Uu.All?(0,b.jsx)(ne,{onShowAll:l,nodesUptimeFilter:s,visibleEntities:r}):se("empty.default"),getRowClassName:Ne,filters:c,tableName:"storage-nodes"})},Ge=e=>{var t;let{database:r,nodeId:s,parentContainer:u,additionalNodesProps:p}=e;const[g,v]=(0,a.useQueryParams)({type:a.StringParam,visible:a.StringParam,search:a.StringParam,uptimeFilter:a.StringParam}),f=m.parse(g.type),w=c.parse(g.visible),x=null!==(t=g.search)&&void 0!==t?t:"",N=h.U8.parse(g.uptimeFilter),j=e=>{v({search:e||void 0},"replaceIn")},y=e=>{v({visible:e},"replaceIn")},S=e=>{v({type:e},"replaceIn")},C=e=>{v({uptimeFilter:e},"replaceIn")},E=(0,n.ix)(i.d),I=()=>{v({visible:d.G.all,uptimeFilter:h.Uu.All},"replaceIn")},P=e=>{let{totalEntities:t,foundEntities:r,inited:n}=e;return(0,b.jsx)(_,{searchValue:x,handleSearchValueChange:j,withTypeSelector:!s,storageType:f,handleStorageTypeChange:S,visibleEntities:w,handleVisibleEntitiesChange:y,nodesUptimeFilter:N,handleNodesUptimeFilterChange:C,withGroupsUsageFilter:!1,entitiesCountCurrent:r,entitiesCountTotal:t,entitiesLoading:!n})},O=e=>403===e.status?(0,b.jsx)(l.J,{position:"left"}):(0,b.jsx)(o.V,{error:e});return f===d.d.nodes?(0,b.jsx)(De,{searchValue:x,visibleEntities:w,nodesUptimeFilter:N,database:r,additionalNodesProps:p,onShowAll:I,parentContainer:u,renderControls:P,renderErrorMessage:O}):(0,b.jsx)(ee,{searchValue:x,visibleEntities:w,database:r,nodeId:s,nodesMap:E,onShowAll:()=>{y(d.G.all)},parentContainer:u,renderControls:P,renderErrorMessage:O})};var Ue=r(86969),Te=r(1440),Fe=r(26688),Ae=r(47101),Re=r(15106),_e=r(14223);const Me=e=>e.trim().toLowerCase(),Le=(e,t)=>{const r=Me(t);return r?e.filter((e=>{var t,s;return(null===(t=e.NodeId)||void 0===t?void 0:t.toString().includes(r))||(null===(s=e.Host)||void 0===s?void 0:s.toLowerCase().includes(r))})):e},Ze=(e,t)=>{const r=Me(t);return r?e.filter((e=>{var t,s;return(null===(t=e.PoolName)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(s=e.GroupID)||void 0===s?void 0:s.toString().includes(r))})):e},Ve=(e,t)=>Array.isArray(t)&&0!==t.length?e.filter((e=>{const r=e.Usage;return t.some((e=>Number(e)<=r&&r<Number(e)+5))})):e;const ze=r(905).h.injectEndpoints({endpoints:e=>({getStorageNodesInfo:e.query({queryFn:async(e,t)=>{let{signal:r}=t;try{const t=await window.api.getNodes({storage:!0,type:"static",...e},{signal:r});return{data:(0,Y.Y2)(t)}}catch(s){return{error:s}}},providesTags:["All"]}),getStorageGroupsInfo:e.query({queryFn:async(e,t)=>{let{signal:r}=t;try{const t=await window.api.getStorageInfo({version:q.w.v1,...e},{signal:r});return{data:(0,Y.KJ)(t)}}catch(s){return{error:s}}},providesTags:["All"]})}),overrideExisting:"throw"});var Ke=r(2098);r(5384);function We(e){let{data:t,tableSettings:r,visibleEntities:s,nodes:n,onShowAll:a,sort:l,handleSort:o}=e;const i=p.useMemo((()=>(0,$.k8)(n,s)),[n,s]);return t.length||s===d.G.all?(0,b.jsx)(Ke.G,{columnsWidthLSKey:$.Ty,data:t,columns:i,settings:r,emptyDataMessage:(0,J.Z)("empty.default"),sortOrder:l,onSort:o},s):(0,b.jsx)(Q,{onShowAll:a,visibleEntities:s})}function He(e){let{data:t,tableSettings:r,visibleEntities:s,onShowAll:n,nodesUptimeFilter:a,additionalNodesProps:l,sort:o,handleSort:i}=e;const u=ke(l,s);return t.length||s===d.G.all&&a===h.Uu.All?(0,b.jsx)(Ke.G,{columnsWidthLSKey:je,data:t,columns:u,settings:{...r,dynamicRenderType:"variable"},emptyDataMessage:se("empty.default"),rowClassName:Ne,sortOrder:o,onSort:i},s):(0,b.jsx)(ne,{visibleEntities:s,nodesUptimeFilter:a,onShowAll:n})}const Je=(0,a.withDefault)({encode:a.ArrayParam.encode,decode:e=>null===e||void 0===e?e:Array.isArray(e)?e.filter(Boolean):e?[e]:[]},[]),Qe=e=>{var t;let{additionalNodesProps:r,database:l,nodeId:o}=e;const[u]=(0,n.Rj)(),[g,v]=(0,a.useQueryParams)({type:a.StringParam,visible:a.StringParam,search:a.StringParam,uptimeFilter:a.StringParam,usageFilter:Je}),f=m.parse(g.type),w=c.parse(g.visible),x=null!==(t=g.search)&&void 0!==t?t:"",N=h.U8.parse(g.uptimeFilter),j=g.usageFilter,y=(0,n.ix)(i.d),[S,C]=p.useState({sortOrder:void 0,sortValue:void 0}),E=S.sortValue?S:I.TP,[P,O]=p.useState({sortOrder:void 0,sortValue:void 0}),k=P.sortOrder?P:(0,I._r)(w),D=void 0!==o,G=D?d.d.groups:f,U=ze.useGetStorageNodesInfoQuery({database:l,visibleEntities:w},{skip:G!==d.d.nodes,pollingInterval:u}),T=ze.useGetStorageGroupsInfoQuery({database:l,visibleEntities:w,nodeId:o},{skip:G!==d.d.groups,pollingInterval:u}),{currentData:F,isFetching:A,error:M}=G===d.d.nodes?U:T,{currentData:{nodes:L=[]}={}}=U,{currentData:{groups:Z=[]}={}}=T,{nodes:V,groups:z,...K}=null!==F&&void 0!==F?F:{found:0,total:0},W=void 0===F&&A,H=p.useMemo((()=>function(e,t,r){let s=e||[];return s=Le(s,t),s=(0,_e.f)(s,r),s}(L,x,N)),[x,L,N]),J=p.useMemo((()=>function(e,t,r){let s=e||[];return s=Ze(s,t),s=Ve(s,r),s}(Z,x,j)),[x,Z,j]),Q=p.useMemo((()=>function(e){const t={};return null===e||void 0===e||e.forEach((e=>{const r=(0,Re.Ic)(e,5);Object.prototype.hasOwnProperty.call(t,r)||(t[r]=0),t[r]+=1})),Object.entries(t).map((e=>{let[t,r]=e;return{threshold:Number(t),count:r}})).sort(((e,t)=>t.threshold-e.threshold))}(Z)),[Z]),[Y,q]=(0,n.sC)(E,(e=>C(e))),[B,X]=(0,n.sC)(k,(e=>O(e))),$=e=>{v({usageFilter:e.length?e:void 0},"replaceIn")},ee=e=>{v({search:e||void 0},"replaceIn")},te=e=>{v({visible:e},"replaceIn")},re=e=>{v({type:e},"replaceIn")},se=e=>{v({uptimeFilter:e},"replaceIn")},ne=()=>{te(d.G.all),se(h.Uu.All)};return(0,Te.u)(M)?(0,b.jsx)(Ue.J,{position:"left"}):(0,b.jsxs)(Ae.l,{children:[(0,b.jsx)(Ae.l.Controls,{children:(0,b.jsx)(_,{searchValue:x,handleSearchValueChange:ee,withTypeSelector:!D,storageType:G,handleStorageTypeChange:re,visibleEntities:w,handleVisibleEntitiesChange:te,nodesUptimeFilter:N,handleNodesUptimeFilterChange:se,groupsUsageFilter:j,groupsUsageFilterOptions:Q,handleGroupsUsageFilterChange:$,entitiesCountCurrent:G===d.d.groups?J.length:H.length,entitiesCountTotal:K.total,entitiesLoading:W})}),M?(0,b.jsx)(Fe.V,{error:M}):null,(0,b.jsx)(Ae.l.Table,{loading:W,className:R("table"),children:F?(0,b.jsxs)(p.Fragment,{children:[G===d.d.groups&&(0,b.jsx)(We,{visibleEntities:w,data:J,tableSettings:s.LE,nodes:y,onShowAll:()=>te(d.G.all),sort:B,handleSort:X},"groups"),G===d.d.nodes&&(0,b.jsx)(He,{visibleEntities:w,nodesUptimeFilter:N,data:H,tableSettings:s.LE,onShowAll:ne,additionalNodesProps:r,sort:Y,handleSort:q},"nodes")]}):null})]})},Ye=e=>{let{parentContainer:t,...r}=e;const[a]=(0,n.yu)(s.Qy);return a?(0,b.jsx)(Ge,{parentContainer:t,...r}):(0,b.jsx)(Qe,{...r})}},10703:(e,t,r)=>{r.d(t,{CZ:()=>h,TP:()=>p,YC:()=>m,_O:()=>c,_r:()=>w});var s=r(81413),n=r(95829),a=r(75850),l=r(99106),o=r(51688),i=r(15106);const d=(0,l.p)(1,2,["success","warning","danger"]),u={"block-4-2":(0,l.p)(1,2,["success","warning","danger"]),"mirror-3-dc":(0,l.p)(1,3,["success","warning","danger"])},c=e=>{var t;return(void 0!==(t=e.ErasureSpecies)&&t in u?u[e.ErasureSpecies]:d)(e.Degraded)},m=(0,l.p)(80,85,["success","warning","danger"]),h=(0,l.p)(80,85,[a.K.Green,a.K.Yellow,a.K.Red]),p={sortValue:o.Hk.NodeId,sortOrder:s.zE},g={sortValue:i.t5.PoolName,sortOrder:s.zE},v={sortValue:i.t5.Degraded,sortOrder:s.hr},f={sortValue:i.t5.Usage,sortOrder:s.hr};function w(e){return e===n.G.missing?v:e===n.G.space?f:g}},14223:(e,t,r)=>{r.d(t,{A:()=>m,f:()=>u});var s=r(75850),n=r(52317),a=r(34301),l=r(27070),o=r(51688),i=r(80839);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0)===i.pu.ALL?e:e.filter((e=>{let{SystemState:t}=e;return t&&t!==s.K.Green}))},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0)===o.Uu.All?e:e.filter((e=>{let{StartTime:t}=e;return!t||(0,a.OW)(t)<n.RQ}))},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!t)return e;const r=(0,l.Y)(t);return e.filter((e=>!e.Host||(r.test(e.Host)||r.test(String(e.NodeId)))))};function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{uptimeFilter:t,searchValue:r,problemFilter:s}=arguments.length>1?arguments[1]:void 0,n=u(e,t);return n=d(n,s),n=c(n,r),n}},95829:(e,t,r)=>{r.d(t,{G:()=>s,d:()=>n});const s={all:"all",missing:"missing",space:"space"},n={groups:"groups",nodes:"nodes"}},89712:(e,t,r)=>{r.d(t,{M:()=>l});var s=r(68963),n=r(2639),a=r(18193);const l=e=>{const t=s.useCallback((()=>e?a.r.readUserSettingsValue(e,{}):{}),[e]),r=s.useCallback((t=>{e&&a.r.setUserSettingsValue(e,t)}),[e]);return(0,n.M)({saveSizes:r,getSizes:t})}},83496:(e,t,r)=>{r.d(t,{FW:()=>i,KR:()=>d,LV:()=>o,uk:()=>l});var s=r(75850),n=r(28164);const a={[n.g.Dead]:s.K.Red,[n.g.Created]:s.K.Yellow,[n.g.ResolveStateStorage]:s.K.Yellow,[n.g.Candidate]:s.K.Yellow,[n.g.BlockBlobStorage]:s.K.Yellow,[n.g.WriteZeroEntry]:s.K.Yellow,[n.g.Restored]:s.K.Yellow,[n.g.Discover]:s.K.Yellow,[n.g.Lock]:s.K.Yellow,[n.g.Stopped]:s.K.Yellow,[n.g.ResolveLeader]:s.K.Yellow,[n.g.RebuildGraph]:s.K.Yellow,[n.g.Deleted]:s.K.Green,[n.g.Active]:s.K.Green},l=Object.keys(n.g),o=Object.entries(a).reduce(((e,t)=>{let[r,s]=t;return e[s]?e[s].push(r):e[s]=[r],e}),{}),i=e=>{if(!e)return s.K.Grey;return t=e,Object.values(s.K).includes(t)?e:a[e];var t};function d(e){if(!e)return"unknown";switch(e){case n.g.Dead:return"danger";case n.g.Active:case n.g.Deleted:return"success";default:return"warning"}}},5384:()=>{}}]);