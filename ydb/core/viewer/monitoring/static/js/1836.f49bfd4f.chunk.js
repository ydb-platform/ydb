"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[1836],{81836:(e,t,i)=>{i.r(t),i.d(t,{default:()=>P});var s=i(59284),n=i(23936),o=i.n(n),l=i(905),r=i.n(l),a=i(8964),u=i(42392),c=i(22680),d=i(14750),h=i(68724),f=i(17148),p=i.n(f),g=i(66643);function m(e){const t=document.createElement("span");return t.innerText=e,t.innerHTML}const _="data-series-name",v="data-series-idx",y="_tooltip",b="_tooltip-row",w=()=>"<td />",E=e=>`<td class="_tooltip-rows__bubble-td">\n        <div class="_tooltip-rows__bubble-div" style="background-color:${e.seriesColor};"></div>\n    </td>`,S=e=>`<td class="_tooltip-rows__name-td">\n        ${e.hideSeriesName?"":m(e.seriesName)}\n    </td>`,x=e=>`<td class="_tooltip-rows__percent-td">\n        ${e.percentValue?e.percentValue+"%":""}\n    </td>`,A=e=>`<td class="_tooltip-rows__value-td">\n        ${e.value}\n    </td>`,T=e=>`<td class="_tooltip-rows__diff-td">\n        ${e.diff?` (${e.diff})`:""}\n    </td>`,O=(e,t=!1,i=1)=>`<td class="_tooltip-right__td ${t?"_tooltip-right__td_with-split-tooltip":""}" colspan="${i||1}">\n             ${e.holiday?`<div class="_tooltip-right__holiday-div">\n                    <div class="_tooltip-right__holiday-emoji">\ud83c\udf88</div>\n                    <div>\n                        ${e.holidayText}\n                        ${e.region?`<span class="_tooltip-right__holiday-region">[${e.region}]</span>`:""}\n                    </div>\n                </div>`:""}\n\n            ${e.commentDateText?`<div class="${e.xComments?"_tooltip-right__margin-bot":""}">${e.commentDateText}</div>`:""}\n\n            ${e.xComments?e.xComments.map((e=>`<div class="_tooltip-right__traf-div ${t?"_tooltip-right__traf-div_for-split-tooltip":""}" style="border-color: ${e.color};">${e.text}</div>`)).join(""):""}\n        </td>`,L=(e,{isSelectedLine:t,cellsRenderers:i,isSingleLine:s,allowComment:n,withDarkBackground:o,rowIndex:l})=>{const r=e.commentText||e.xyCommentText,a=n&&r,u=i.slice(),c=`${String(l)||""}-${String(m(e.seriesName)).slice(0,20).replace(/(\r\n|\n|\r)/gm,"")}`;return e.insertCellAt&&(Object.keys(e.insertCellAt)||[]).forEach((e=>{u.splice(Number(e),0,w)})),e.customRender?`<tr class="${b}${t?" _tooltip-selected-row":""}${s?" _tooltip-uniq-row":""}${o?" _tooltip-row-dark-bg":""}" ${_}="${c}" ${e.seriesIdx?`${v}="${e.seriesIdx}"`:""}>\n            ${0===e.customRender.trim().indexOf("<td")?e.customRender:`<td colspan="${i.length}">${e.customRender}</td>`}\n        </tr>\n        ${a?`<tr class="_tooltip-comment-row${t?" _tooltip-selected-row":""}${o?" _tooltip-row-dark-bg":""}">\n                    <td>\n                        ${e.commentText?`<div class="_tooltip-rows__comment-div">${e.commentText}</div>`:""}\n                        ${e.xyCommentText?`<div class="_tooltip-rows__comment-div">${e.xyCommentText}</div>`:""}\n                    </td>\n                </tr>`:""}`:`<tr class="${b}${t?" _tooltip-selected-row":""}${s?" _tooltip-uniq-row":""}${o?" _tooltip-row-dark-bg":""}" ${_}="${c}" ${e.seriesIdx?`${v}="${e.seriesIdx}"`:""}>\n            ${u.map(((t,i)=>e.replaceCellAt&&e.replaceCellAt[i]?"string"===typeof e.replaceCellAt[i]?e.replaceCellAt[i]:e.replaceCellAt[i](e):e.insertCellAt&&e.insertCellAt[i]?"string"===typeof e.insertCellAt[i]?e.insertCellAt[i]:e.insertCellAt[i](e):t(e))).join("")}\n        </tr>\n\n        ${a?`<tr class="_tooltip-comment-row${t?" _tooltip-selected-row":""}${o?" _tooltip-row-dark-bg":""}">\n                    <td colspan="4">\n                        ${e.commentText?`<div class="_tooltip-rows__comment-div">${e.commentText}</div>`:""}\n                        ${e.xyCommentText?`<div class="_tooltip-rows__comment-div">${e.xyCommentText}</div>`:""}\n                    </td>\n                </tr>`:""}`},I=(e,t)=>{const{splitTooltip:i,activeRowAlwaysFirstInTooltip:s}=e,n=e.lines.findIndex((({selectedSeries:e})=>e)),o=e.lines[n],l=e.lines.slice(0,(t.lastVisibleRowIndex||e.lines.length)+1),r=[];r.push(E),e.shared&&r.push(S),e.withPercent&&r.push(x),r.push(A),e.useCompareFrom&&r.push(T);const u={isSingleLine:1===l.length,cellsRenderers:r},c={cellsRenderers:r,useCompareFrom:e.useCompareFrom,isSelectedLine:!0,allowComment:n>t.lastVisibleRowIndex},d=document.body.clientHeight/(window.visualViewport&&window.visualViewport.scale||1);let h=y;return i&&(h+=` ${y}_split-tooltip`),`\n<div class="${h}" style="max-height: ${i?"auto":`${d}px`}">\n    ${e.tooltipHeader?`<div title="${(document.createRange().createContextualFragment(e.tooltipHeader).textContent||"").trim()}" class="_tooltip-date">\n                ${e.tooltipHeader.trim()}\n            </div>`:""}\n    ${i&&(e.holiday||e.commentDateText||e.xComments&&e.xComments.length)?`<table border="0" cellpadding="0" cellspacing="0">\n                <tbody>\n                    <tr>\n                        ${O(e,!0,r.length)}\n                    </tr>\n                </tbody>\n            </table>`:""}\n    <table border="0" cellpadding="0" cellspacing="0">\n        <tr>\n            <td class="_tooltip-left__td">\n                <table class="_tooltip-rows__table">\n                    ${i?"":`<thead class=_tooltip-header>\n                                ${o&&(s||t.lastVisibleRowIndex&&n>t.lastVisibleRowIndex)?L(o,c):""}\n                                <tr class="_tooltip-fake-row">${Array(r.length).fill("<td></td>").join("")}</tr>\n                            </thead>`}\n                    <tbody class="_tooltip-list">\n                        ${l.map(((e,t)=>L(e,function(e){return Object.assign(Object.assign({},u),{rowIndex:e,isSelectedLine:l.length>1&&e===n,withDarkBackground:l.length>2&&Boolean(e%2),allowComment:e!==n||!c.allowComment})}(t)))).join("")}\n                    </tbody>\n                    ${i?"":`<tbody class="_tooltip-footer">\n                                ${t.lastVisibleRowIndex&&e.hiddenRowsNumber>0?`<tr class="${b} _hidden-rows-sum${l.length%2?" _hidden-rows-sum-dark-bg":""}">\n                                            <td colspan="${r.length-1}" class="_hidden-rows-number">\n                                                ${(0,a.R)("common","tooltip-rest")} ${e.hiddenRowsNumber}\n                                            </td>\n                                            <td class="_hidden-rows-value">${e.hiddenRowsSum}</td>\n                                        </tr>`:""}\n                                <tr class="_tooltip-fake-row">${Array(r.length).fill("<td></td>").join("")}</tr>\n                                ${e.sum?`<tr class="_tooltip-rows__summ-tr">\n                                            <td class="_tooltip-rows__summ-td" colspan="${r.length-1}">${(0,a.R)("common","tooltip-sum")}</td>\n                                            <td class="_tooltip-rows__summ-td _tooltip-rows__summ-td-value">\n                                                ${e.sum}\n                                            </td>\n                                        </tr>`:""}\n                            </tbody>`}\n                </table>\n            </td>\n\n            ${!i&&(e.holiday||e.commentDateText||e.xComments&&e.xComments.length)?O(e):""}\n        </tr>\n    </table>\n</div>`},D=e=>"object"===typeof e&&null!==e?Object.values(e).reduce(((e,t)=>t)):e,M=({data:e,rowId:t})=>{const i=e.yagr.getSeriesById(t);return e.yagr.getSerieLegendColor(i)},k=(e=1,t)=>(i,s)=>{const n=(s[s.length-1]-s[0])/e;return s.map((i=>{const s=(0,d.KQ)({input:i/e,timeZone:t});return 0===s.hour()&&0===s.minute()&&0===s.second()?s.format("DD.MM.YY"):s.format(n<300?"HH:mm:ss":"HH:mm")}))},C=(e,t)=>i=>{const s=i/((null===e||void 0===e?void 0:e.timeMultiplier)||1),n=(0,d.KQ)({input:s}),o=60*(n.utcOffset()-(0,d.KQ)({input:s,timeZone:t}).utcOffset())*1e3;return new Date(n.valueOf()-o)},R=e=>{var t,i;const{data:s,libraryConfig:n,theme:o}=e,l=Object.assign(Object.assign({},n),{timeline:s.timeline,series:s.graphs}),{timeZone:r}=s,a={appearance:{locale:g.W.get("lang"),theme:o}};var u;p()(a,l.chart),l.chart=a,(null===(t=l.tooltip)||void 0===t?void 0:t.show)&&(l.tooltip=l.tooltip||{},l.tooltip.render=(null===(i=l.tooltip)||void 0===i?void 0:i.render)||(u=s,e=>{const{timeZone:t}=u,i=e.yagr.config.chart.timeMultiplier||1,s=e.options,{x:n,state:o}=e;let l=0;const r=Object.values(e.scales).reduce(((e,t)=>(l+=t.sum||0,e.concat(t.rows))),[]),a=r.length,c=D(s.sum),h=D(s.maxLines),f=D(s.value),p=o.pinned?void 0:a>h?Math.abs(h-a):void 0,g=p?f(r.slice(-p).reduce(((e,{originalValue:t})=>e+(t||0)),0)):void 0,m={activeRowAlwaysFirstInTooltip:r.length>1,tooltipHeader:(0,d.KQ)({input:n/i,timeZone:t}).format("DD MMMM YYYY HH:mm:ss"),shared:!0,lines:r.map(((t,i)=>Object.assign(Object.assign({},t),{seriesName:t.name||"Serie "+(i+1),seriesColor:M({data:e,rowId:t.id}),selectedSeries:t.active,seriesIdx:t.seriesIdx,percentValue:"number"===typeof t.transformed?t.transformed.toFixed(1):""}))),withPercent:D(s.percent),hiddenRowsNumber:p,hiddenRowsSum:g};return c&&(m.sum=f(l)),I(m,{lastVisibleRowIndex:o.pinned?r.length-1:h-1})}),l.tooltip.className||(l.tooltip.className="chartkit-yagr-tooltip"),e.customTooltip&&(l.tooltip.virtual=!0),l.tooltip.sort=l.tooltip.sort||((e,t)=>t.rowIdx-e.rowIdx)),l.axes=l.axes||{};const c=l.axes[h.defaults.DEFAULT_X_SCALE];return l.editUplotOptions=e=>Object.assign(Object.assign({},e),{tzDate:r?C(l.chart,r):void 0}),c&&!c.values&&(c.values=k(l.chart.timeMultiplier,r)),c||(l.axes[h.defaults.DEFAULT_X_SCALE]={values:k(l.chart.timeMultiplier,r)}),l},F=s.forwardRef((function(e,t){const{id:i,data:{data:n},onLoad:l,onRender:d,onChartLoad:h,tooltip:f}=e,p=s.useRef(null),[g,m]=s.useState();if(!n||r()(n))throw new u.R({code:u.iY.NO_DATA,message:(0,a.R)("error","label_no-data")});const{config:_,debug:v}=((e,t)=>{const{data:i,sources:n,libraryConfig:o}=e.data,l=(0,c.i)();return{config:s.useMemo((()=>R({data:i,libraryConfig:o,theme:l,customTooltip:Boolean(e.tooltip)})),[i,o,l,e.tooltip]),debug:s.useMemo((()=>({filename:n&&Object.values(n).map((e=>{var t;return null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.program})).filter(Boolean).join(", ")||t})),[t,n])}})(e,i),y=s.useCallback(((e,{renderTime:t})=>{null===l||void 0===l||l(Object.assign(Object.assign({},n),{widget:e,widgetRendering:t})),null===d||void 0===d||d({renderTime:t}),m(e)}),[l,d,n,m]),b=s.useCallback((()=>{g&&g.reflow()}),[]);return s.useImperativeHandle(t,(()=>({reflow(){b()}})),[b]),s.useEffect((()=>{var e,t,i,s,n;if(!g||(null===(t=null===(e=g.config)||void 0===e?void 0:e.tooltip)||void 0===t?void 0:t.virtual))return;const o={mouseMove:null,mouseDown:null};null===(i=g.plugins.tooltip)||void 0===i||i.on("render",(e=>{(e=>{const t=e.querySelector("._tooltip-header"),i=e.querySelector("._tooltip-list");if(!t||!i||!t.children.length)return;const s=t.children[0];for(let a=0;a<s.children.length;a++){const e=s.children[a];e.removeAttribute("style"),1===(null===i||void 0===i?void 0:i.children.length)&&(e.innerHTML="&nbsp;")}const n=i.children[0];for(let a=0;a<n.children.length;a++)n.children[a].removeAttribute("style");const o=t.children[0].getBoundingClientRect().width>i.children[0].getBoundingClientRect().width?t:i,l=Array.prototype.reduce.call(o.children[0].children,((e,t)=>(e.push(t.getBoundingClientRect().width),e)),[]),r=(o===t?i:t).children[0];for(let a=0;a<r.children.length;a++)r.children[a].setAttribute("style",`width: ${l[a]}px`);if(1===i.children.length)for(const a of s.children)a.innerHTML=""})(e)})),null===(s=g.plugins.tooltip)||void 0===s||s.on("pin",((e,{actions:t})=>{var i;o.mouseMove=(i={tooltip:e,yagr:g},e=>{var t;const{tooltip:s,yagr:n}=i;if(!n)return;const o=e.target,l=o&&s.contains(o)&&"TD"===o.tagName?null===(t=o.parentElement)||void 0===t?void 0:t.dataset.seriesIdx:void 0,r=l?n.uplot.series[Number(l)]:null;n.setFocus(r?r.id:null,!0)}),o.mouseDown=(e=>t=>{var i;const{tooltip:s,actions:n,yagr:o}=e;if(!o)return;const l=t.target;if(l instanceof Element){const e=l&&s.contains(l),t=l&&(null===(i=o.root.querySelector(".u-over"))||void 0===i?void 0:i.contains(l));e||t||(n.pin(!1),n.hide())}})({tooltip:e,actions:t,yagr:g}),document.addEventListener("mousemove",o.mouseMove),document.addEventListener("mousedown",o.mouseDown)})),null===(n=g.plugins.tooltip)||void 0===n||n.on("unpin",(()=>{o.mouseMove&&(document.removeEventListener("mousemove",o.mouseMove),o.mouseMove=null),o.mouseDown&&(document.removeEventListener("mousedown",o.mouseDown),o.mouseDown=null)}))}),[g]),s.useLayoutEffect((()=>{null===h||void 0===h||h({widget:g})}),[g,h]),s.createElement(s.Fragment,null,f&&g&&f({yagr:g}),s.createElement(o(),{ref:p,id:i,config:_,debug:v,onChartLoad:y}))})),P=F},46976:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TIME_MULTIPLIER=t.TOOLTIP_DEFAULT_MAX_LINES=t.TOOLTIP_X_OFFSET=t.TOOLTIP_Y_OFFSET=t.MIN_SELECTION_WIDTH=t.CURSOR_STYLE=t.MARKER_DIAMETER=t.SERIE_AREA_BORDER_WIDTH=t.SERIE_AREA_BORDER_COLOR=t.SERIE_LINE_WIDTH=t.SERIE_COLOR=t.PADDING_BOTH=t.PADDING_RIGHT=t.PADDING_LEFT=t.BARS_DRAW_MAX=t.BARS_DRAW_FACTOR=t.TYPES_ORDER=t.X_AXIS_INCRS=t.X_AXIS_SPACE=t.X_AXIS_SIZE=t.X_AXIS_TICK_GAP=t.DECADE=t.YEAR=t.DAY=t.HOUR=t.MINUTE=t.SECOND=t.Y_AXIS_LABEL_SIZE=t.Y_AXIS_SIZE=t.DEFAULT_Y_AXIS_LABEL_PADDING=t.DEFAULT_Y_AXIS_PADDING=t.DEFAULT_Y_AXIS_SIZE=t.Y_AXIS_TICK_GAP=t.AXIS_VALUES_FONT=t.AXIS_LABEL_FONT=t.DEFAULT_AXIS_FONT_SIZE=t.DARK_DEFAULT_LINE_COLOR=t.LIGHT_DEFAULT_LINE_COLOR=t.DEFAULT_TITLE_FONT_SIZE=t.DEFAULT_SYNC_KEY=t.DEFAULT_POINT_SIZE=t.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE=t.DEFAULT_SCALE_MIN_RANGE=t.DEFAULT_Y_AXIS_OFFSET=t.DEFAULT_MAX_TICKS=t.DEFAULT_CANVAS_PIXEL_RATIO=t.DEFAULT_FOCUS_ALPHA=t.DEFAULT_Y_SCALE=t.DEFAULT_X_SCALE=t.DEFAULT_X_SERIE_NAME=void 0,t.DEFAULT_X_SERIE_NAME="date",t.DEFAULT_X_SCALE="x",t.DEFAULT_Y_SCALE="y",t.DEFAULT_FOCUS_ALPHA=.3,t.DEFAULT_CANVAS_PIXEL_RATIO="undefined"===typeof window?1:window.devicePixelRatio,t.DEFAULT_MAX_TICKS=5,t.DEFAULT_Y_AXIS_OFFSET=.05,t.DEFAULT_SCALE_MIN_RANGE=.01,t.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE=.001,t.DEFAULT_POINT_SIZE=t.DEFAULT_CANVAS_PIXEL_RATIO>=2?4:2,t.DEFAULT_SYNC_KEY="sync",t.DEFAULT_TITLE_FONT_SIZE=14,t.LIGHT_DEFAULT_LINE_COLOR="#222222",t.DARK_DEFAULT_LINE_COLOR="#eeeeee",t.DEFAULT_AXIS_FONT_SIZE=11,t.AXIS_LABEL_FONT="normal 11px Lucida Grande, Arial, Helvetica, sans-serif",t.AXIS_VALUES_FONT="11px Lucida Grande, Arial, Helvetica, sans-serif",t.Y_AXIS_TICK_GAP=6,t.DEFAULT_Y_AXIS_SIZE=12,t.DEFAULT_Y_AXIS_PADDING=12,t.DEFAULT_Y_AXIS_LABEL_PADDING=2;t.Y_AXIS_SIZE=(e,i,s)=>{if(!i)return t.DEFAULT_Y_AXIS_SIZE;const n=i.reduce(((e,t)=>e.length>t.length?e:t)),{ctx:o}=e;o.save();const l=e.axes[s];o.font=l.font?l.font[0]:t.AXIS_VALUES_FONT;const{width:r}=o.measureText(n);o.restore();let a=0;if(l.label){a=l.labelSize||t.DEFAULT_AXIS_FONT_SIZE,o.font=l.labelFont?l.labelFont[0]:t.AXIS_LABEL_FONT;const{fontBoundingBoxAscent:e}=o.measureText(l.label);a=e,o.restore()}return a?r/t.DEFAULT_CANVAS_PIXEL_RATIO+a/t.DEFAULT_CANVAS_PIXEL_RATIO+t.DEFAULT_Y_AXIS_LABEL_PADDING:r/t.DEFAULT_CANVAS_PIXEL_RATIO+t.DEFAULT_Y_AXIS_PADDING},t.Y_AXIS_LABEL_SIZE=11,t.SECOND=1e3,t.MINUTE=60*t.SECOND,t.HOUR=60*t.MINUTE,t.DAY=24*t.HOUR,t.YEAR=365*t.DAY,t.DECADE=10*t.YEAR,t.X_AXIS_TICK_GAP=6,t.X_AXIS_SIZE=32,t.X_AXIS_SPACE=80,t.X_AXIS_INCRS=[1,10,50,100,200,500,t.SECOND,2*t.SECOND,5*t.SECOND,10*t.SECOND,15*t.SECOND,30*t.SECOND,t.MINUTE,5*t.MINUTE,10*t.MINUTE,30*t.MINUTE,t.HOUR,2*t.HOUR,3*t.HOUR,4*t.HOUR,6*t.HOUR,12*t.HOUR,t.DAY,2*t.DAY,3*t.DAY,5*t.DAY,10*t.DAY,15*t.DAY,30*t.DAY,60*t.DAY,120*t.DAY,180*t.DAY,t.YEAR,2*t.YEAR,5*t.YEAR,10*t.YEAR],t.TYPES_ORDER=["dots","line","area","column"],t.BARS_DRAW_FACTOR=.5,t.BARS_DRAW_MAX=100,t.PADDING_LEFT=[14,14,0,4],t.PADDING_RIGHT=[14,4,0,14],t.PADDING_BOTH=[14,4,0,4],t.SERIE_COLOR="rgba(0, 0, 0, 1)",t.SERIE_LINE_WIDTH=2,t.SERIE_AREA_BORDER_COLOR="rgba(0, 0, 0, 0.2)",t.SERIE_AREA_BORDER_WIDTH=1,t.MARKER_DIAMETER=8,t.CURSOR_STYLE="1px solid #ffa0a0",t.MIN_SELECTION_WIDTH=15;t.default=class{constructor(e,t="light"){this.setTheme(t),this.colors=e}setTheme(e){this.theme=e}get GRID(){return{show:!0,stroke:()=>this.colors.parse("--yagr-grid"),width:1}}get X_AXIS_TICKS(){return{size:8,...this.GRID}}get Y_AXIS_TICKS(){return{size:6,...this.GRID}}get AXIS_STROKE(){return this.colors.parse("--yagr-axis-stroke")}get BACKGROUND(){return this.colors.parse("--yagr-background")}get SHIFT(){var e;return(null===(e=this.theme)||void 0===e?void 0:e.startsWith("light"))?.68:-.6}get DEFAULT_LINE_COLOR(){var e;return(null===(e=this.theme)||void 0===e?void 0:e.startsWith("light"))?t.LIGHT_DEFAULT_LINE_COLOR:t.DARK_DEFAULT_LINE_COLOR}},t.TOOLTIP_Y_OFFSET=24,t.TOOLTIP_X_OFFSET=24,t.TOOLTIP_DEFAULT_MAX_LINES=10,t.TIME_MULTIPLIER=1},37100:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=l(i(16381)),a=l(i(72168)),u=i(50497),c=l(i(20500)),d=o(i(46976)),h=l(i(576)),f=i(2836),p=i(78229),g=i(65781),m=i(87102),_=i(32532);class v{get isEmpty(){return this.state.isEmptyDataSet}constructor(e,t){this.plugins={},this._meta={},this._uHooks={},this.init=()=>{var e;(null===(e=this.config.chart.size)||void 0===e?void 0:e.adaptive)&&!this.resizeOb&&(this.resizeOb=new ResizeObserver((0,u.debounce)(this.onResize,this.config.chart.size.resizeDebounceMs||100)),this.resizeOb.observe(this.root)),this.config.hooks.dispose||(this.config.hooks.dispose=[]),this.unsubscribe(),this.config.hooks.dispose.push(this.trackMouse())},this.execHooks=(e,...t)=>{const i=this.config.hooks[e];if(Array.isArray(i))for(const s of i)s&&"function"===typeof s&&s(...t)},this.initRender=(e,t)=>{var i,s,n;const o=null===(i=this.config.legend)||void 0===i?void 0:i.position;this.root.firstChild?o&&"bottom"!==o?this.root.appendChild(e.root):this.root.insertBefore(e.root,this.root.firstChild):o&&"bottom"!==o?this.root.insertBefore(e.root,this.root.firstChild):this.root.appendChild(e.root),(null===(s=this.config.legend)||void 0===s?void 0:s.show)&&(null===(n=this.plugins.legend)||void 0===n||n.init(e),this.reflow(!1)),this.initTitle(),t()},this.onResize=e=>{var t;const[i]=e;this._cache.height===i.contentRect.height&&this._cache.width===i.contentRect.width||(null===(t=this.plugins.tooltip)||void 0===t||t.reset(),this.reflow(),this.execHooks("resize",{entries:e,chart:this}))},this.initMixins(),this._startTime=performance.now(),this.state={isEmptyDataSet:!1,isMouseOver:!1,stage:"config",y2uIdx:{},subscribed:!1};const i=Object.assign({title:{},data:[],axes:{},series:[],scales:{},hooks:{},settings:{},chart:{},cursor:{},plugins:{},legend:{show:!1},tooltip:{show:!0},grid:null,markers:{}},t);this.config=i,this.inStage("config",(()=>{var t;this.id=e.id||(0,u.genId)(),this.root=e,this.root.classList.add("yagr"),this.root.id||(this.root.id=this.id);const s=new c.default,n=this.config.cursor.sync,o=this.config.chart;o.series||(o.series={type:"line"}),o.size||(o.size={adaptive:!0}),o.appearance||(o.appearance={locale:"en"}),o.select||(o.select={}),this.utils={colors:s,i18n:(0,h.default)((null===(t=i.chart.appearance)||void 0===t?void 0:t.locale)||"en"),theme:new d.default(s)},s.setContext(e),n&&(this.utils.sync=r.default.sync("string"===typeof n?n:d.DEFAULT_SYNC_KEY)),!o.size.adaptive&&o.size.width&&o.size.height&&(e.style.width=(0,u.px)(o.size.width),e.style.height=(0,u.px)(o.size.height)),this.plugins.legend=new a.default,this.setTheme(o.appearance.theme||"light"),this.createUplotOptions(),this._cache={height:this.options.height,width:this.options.width},i.editUplotOptions&&(this.options=i.editUplotOptions(this.options))})).inStage("processing",(()=>{this.transformSeries()})).inStage("uplot",(()=>{this.uplot=new r.default(this.options,this.series,this.initRender),this.canvas=e.querySelector("canvas"),this.init();const t=performance.now()-this._startTime;this._meta.processTime=t})).inStage("render")}redraw(e=!0,t=!0){this.uplot.redraw(e,t)}getSeriesById(e){return this.uplot.series[this.state.y2uIdx[e]]}getSerieLegendColor(e){const{legendColorKey:t,color:i,lineColor:s}=e;let n=i;switch(t){case"lineColor":s&&(n=s);break;case"color":n=i}return n}dispose(){var e,t,i,s;this.resizeOb&&this.resizeOb.unobserve(this.root),this.unsubscribe(),null===(t=null===(e=this.plugins)||void 0===e?void 0:e.tooltip)||void 0===t||t.dispose(),null===(s=null===(i=this.plugins)||void 0===i?void 0:i.legend)||void 0===s||s.destroy(),this.uplot.destroy(),this._uHooks={},this.execHooks("dispose",{chart:this})}toDataUrl(){return this.canvas.toDataURL("img/png")}subscribe(){var e;this.state.subscribed||(null===(e=this.utils.sync)||void 0===e||e.sub(this.uplot),this.state.subscribed=!0)}unsubscribe(){var e;null===(e=this.utils.sync)||void 0===e||e.unsub(this.uplot),this.state.subscribed=!1}inStage(e,t){this.state.stage,this.execHooks("stage",{chart:this,stage:e});try{t&&t()}catch(i){console.error(i),this.onError(i)}return this}initTitle(){if(this.config.title&&this.config.title.fontSize){const e=this.config.title.fontSize,t=this.root.querySelector(".u-title");t.setAttribute("style",`font-size:${e}px;line-height:${e}px;`),t.innerHTML=this.config.title.text}}onError(e){return this.execHooks("error",{stage:this.state.stage,error:e,chart:this}),e}trackMouse(){const e=()=>{this.state.isMouseOver=!0},t=()=>{this.state.isMouseOver=!1};return this.root.addEventListener("mouseover",e),this.root.addEventListener("mouseleave",t),()=>{this.root.removeEventListener("mouseover",e),this.root.removeEventListener("mouseleave",t)}}get clientHeight(){var e;const t=this.config.title.text?(this.config.title.fontSize||d.DEFAULT_TITLE_FONT_SIZE)+8:0;return this.root.clientHeight-t-((null===(e=this.plugins.legend)||void 0===e?void 0:e.state.totalSpace)||0)}reflow(e=!0){const t=this.root.clientWidth,i=this.clientHeight;this._cache.width=t,this.options.width=t,this._cache.height=i,this.options.height=i,e&&this.uplot.setSize({width:this.options.width,height:this.options.height}),e&&this.uplot.redraw()}}(0,m.applyMixins)(v,[f.CreateUplotOptionsMixin,p.TransformSeriesMixin,g.DynamicUpdatesMixin,_.BatchMixin]),t.default=v},576:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const i={ru:{"hide-all":"\u0421\u043a\u0440\u044b\u0442\u044c \u0432\u0441\u0435","show-all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435",sum:"\u0421\u0443\u043c\u043c\u0430",scale:"\u0428\u043a\u0430\u043b\u0430",series:"\u041b\u0438\u043d\u0438\u044f",weekend:"\u0412\u044b\u0445\u043e\u0434\u043d\u043e\u0439",nodata:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"},en:{"hide-all":"Hide all","show-all":"Show all",sum:"Total",scale:"Scale",series:"Series",weekend:"Weekend",nodata:"No data"}};t.default=(e="en")=>("string"!==typeof e&&(i.custom=e,e="custom"),t=>i[e][t]||t)},32532:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BatchMixin=void 0;const n=s(i(16381)),o=s(i(72168));t.BatchMixin=class{initMixin(){this._batch={active:!1,fns:[]}}batch(e){var t;return this._batch.active?e(this._batch):(this._batch.active=!0,e(this._batch),this._batch.reinit?this.fullUpdate():(this._batch.redrawLegend&&(null===(t=this.plugins.legend)||void 0===t||t.redraw()),this._batch.reopt&&this.createUplotOptions(!0),this._batch.recalc&&this.inStage("processing",(()=>{this.transformSeries()})).inStage("listen"),this._batch.fns.length&&this.uplot.batch((()=>this._batch.fns.forEach((e=>e(this._batch))))),this._batch.redraw&&this.uplot&&this.redraw(...this._batch.redraw),void(this._batch={active:!1,fns:[]})))}fullUpdate(){let e,t;this.inStage("dispose",(()=>{var i;if(this.uplot){const i=this.uplot.cursor;e=i.left,t=i.top,this.uplot.destroy()}null===(i=this.plugins.legend)||void 0===i||i.destroy()})).inStage("config",(()=>{this.plugins.legend=new o.default,this._batch={active:!1,fns:[]},this.createUplotOptions(!0),this.options=this.config.editUplotOptions?this.config.editUplotOptions(this.options):this.options})).inStage("processing",(()=>{this.transformSeries()})).inStage("uplot",(()=>{this.uplot=new n.default(this.options,this.series,this.initRender),e&&t&&e>0&&t>0&&this.uplot.setCursor({left:e,top:t}),this.state.subscribed||this.unsubscribe()})).inStage("listen")}}},2836:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUplotOptionsMixin=void 0;const n=s(i(25700)),o=s(i(60758)),l=i(46976),r=i(28265),a=s(i(67903)),u=i(81891),c=i(24793),d=i(27658),h=i(48643),f=s(i(15648));function p(e,t){for(const i of e||[])if(i===t)return;null===e||void 0===e||e.push(t)}t.CreateUplotOptionsMixin=class{initMixin(){this._uHooks.onDraw=()=>{if("listen"===this.state.stage)return;this.state.stage="listen",this.execHooks("stage",{chart:this,stage:this.state.stage});const e=performance.now()-this._startTime;this._meta.renderTime=e,this.execHooks("load",{chart:this,meta:this._meta})},this._uHooks.ready=()=>{const e=performance.now()-this._startTime;this._meta.initTime=e,this.execHooks("inited",{chart:this,meta:{initTime:e}})},this._uHooks.drawClear=e=>{const{ctx:t}=e;t.save(),t.fillStyle=this.utils.theme.BACKGROUND,t.fillRect(l.DEFAULT_CANVAS_PIXEL_RATIO,l.DEFAULT_CANVAS_PIXEL_RATIO,e.width*l.DEFAULT_CANVAS_PIXEL_RATIO-2*l.DEFAULT_CANVAS_PIXEL_RATIO,e.height*l.DEFAULT_CANVAS_PIXEL_RATIO-2*l.DEFAULT_CANVAS_PIXEL_RATIO),t.restore()},this._uHooks.setSelect=e=>{const{left:t,width:i}=e.select,[s,n]=[e.posToVal(t,l.DEFAULT_X_SCALE),e.posToVal(t+i,l.DEFAULT_X_SCALE)],{timeMultiplier:o=l.TIME_MULTIPLIER}=this.config.chart||{};this.execHooks("onSelect",{from:Math.ceil(s/o),to:Math.ceil(n/o),chart:this}),e.setSelect({width:0,height:0,top:0,left:0},!1)}}createUplotOptions(e=!1){var t,i,s,g,m,_,v,y,b,w,E;const{config:S}=this,x=[];let A=null===(t=this.plugins)||void 0===t?void 0:t.tooltip;if(S.tooltip&&!1!==S.tooltip.show&&(A?A.updateOptions(S.tooltip):A=(0,n.default)(this,S.tooltip),x.push(A.uplot),this.plugins.tooltip=A),e)this.plugins.plotLines&&x.push(this.plugins.plotLines.uplot);else{const e=(0,f.default)(this.config.plotLines||{})(this);this.plugins.plotLines=e,x.push(e.uplot)}Object.entries(S.plugins).forEach((([e,t])=>{const i=t(this);x.push(i.uplot),Object.assign(this.plugins,{[e]:i})}));const T=S.chart,O={width:this.root.clientWidth,height:this.clientHeight,title:null===(i=S.title)||void 0===i?void 0:i.text,plugins:x,focus:{alpha:l.DEFAULT_FOCUS_ALPHA},series:[{id:l.DEFAULT_X_SERIE_NAME,$c:S.timeline,scale:l.DEFAULT_X_SCALE,count:S.timeline.length}],ms:T.timeMultiplier||l.TIME_MULTIPLIER,hooks:S.hooks||{}};if(this.state.isEmptyDataSet=0===S.timeline.length||0===S.series.length||S.series.every((({data:e})=>0===e.length)),O.cursor=O.cursor||{},O.cursor.points=O.cursor.points||{},O.cursor.drag=O.cursor.drag||{dist:(null===(s=T.select)||void 0===s?void 0:s.minWidth)||l.MIN_SELECTION_WIDTH,x:null===(g=O.cursor.y)||void 0===g||g,y:null!==(m=O.cursor.y)&&void 0!==m&&m,setScale:null===(v=null===(_=T.select)||void 0===_?void 0:_.zoom)||void 0===v||v},this.utils.sync&&(O.cursor.sync=O.cursor.sync||{key:this.utils.sync.key}),S.cursor){const e=(0,o.default)(this,S.cursor);this.plugins.cursor=e,x.push(e.uplot)}const L=S.series||[],I=O.series;for(let n=L.length-1;n>=0;n--){const e=(0,r.configureSeries)(this,L[n]||{},n),t=I.push(e);this.state.y2uIdx[e.id||n]=t-1}const D=(0,a.default)(this,S);x.push(D),O.series=I,S.scales&&0!==Object.keys(S.scales).length||(S.scales={x:{},y:{}}),O.scales=O.scales||{},O.scales=(0,u.configureScales)(this,O.scales,S),O.axes=O.axes||[];return O.axes.push(...(0,c.configureAxes)(this,S)),O.hooks=S.hooks||{},O.hooks.draw=O.hooks.draw||[],O.hooks.ready=O.hooks.ready||[],O.hooks.drawClear=O.hooks.drawClear||[],O.hooks.setSelect=O.hooks.setSelect||[],p(O.hooks.draw,this._uHooks.onDraw),p(O.hooks.ready,this._uHooks.ready),p(O.hooks.drawClear,this._uHooks.drawClear),p(O.hooks.setSelect,this._uHooks.setSelect),O.drawOrder=(null===(y=T.appearance)||void 0===y?void 0:y.drawOrder)?null===(b=T.appearance)||void 0===b?void 0:b.drawOrder.filter((e=>e===h.DrawOrderKey.Series||e===h.DrawOrderKey.Axes)):[h.DrawOrderKey.Series,h.DrawOrderKey.Axes],O.legend={show:!1},O.padding=(null===(w=S.chart.size)||void 0===w?void 0:w.padding)||(0,d.getPaddingByAxes)(O),null===(E=this.plugins.legend)||void 0===E||E.preInit(this,this.config.legend,O),O.height=this.clientHeight,this.options=O,O}}},65781:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicUpdatesMixin=void 0;const n=s(i(576)),o=i(46976),l=i(28265),r=i(24793),a=i(50497);function u(e,t,i,s=!1){var n,o,l,r,u,c,d,h,f,p,g,m;if(s)return e.config={...e.config,...i},void(t.reinit=!0);const _=function(e,t){return function(i,s){const n=(0,a.get)(e,i),o=(0,a.get)(t,i);return s?!s(n,o):n!==o}}(e.config,i);i.title&&_("title")&&e.setTitle(i.title),(null===(o=null===(n=i.chart)||void 0===n?void 0:n.appearance)||void 0===o?void 0:o.theme)&&_("chart.appearance.theme")&&e.setTheme(null===(r=null===(l=i.chart)||void 0===l?void 0:l.appearance)||void 0===r?void 0:r.theme),(null===(c=null===(u=i.chart)||void 0===u?void 0:u.appearance)||void 0===c?void 0:c.locale)&&_("chart.appearance.locale")&&e.setLocale(null===(h=null===(d=i.chart)||void 0===d?void 0:d.appearance)||void 0===h?void 0:h.locale),i.axes&&_("axes",a.deepIsEqual)&&e.setAxes(i.axes),i.scales&&_("scales",a.deepIsEqual)&&e.setScales(i.scales);Boolean(i.series)&&function(e,t){if(e.length!==(null===t||void 0===t?void 0:t.length))return!0;const i=new Map,s=new Map;return e.forEach((e=>{i.set(e.id,e)})),t.forEach((e=>{s.set(e.id,e)})),!(!t.some((({id:e})=>!i.has(e)))&&!e.some((({id:e})=>!s.has(e))))}(e.config.series,i.series)&&(t.redrawLegend=!0),(i.series||i.timeline)&&e.setSeries(null!==(f=i.timeline)&&void 0!==f?f:e.config.timeline,null!==(p=i.series)&&void 0!==p?p:e.config.series,{incremental:!1}),i.tooltip&&_("tooltip")&&(null===(g=e.plugins.tooltip)||void 0===g||g.updateOptions(i.tooltip)),i.legend&&_("legend")&&(t.reinit=!0),null===(m=e.plugins.tooltip)||void 0===m||m.reset(),t.reopt=!0,e.config={...e.config,...i}}function c(e,t,i,s={incremental:!0,splice:!1}){let n,o=[],r=[],a=null,u=!1,c=!1;if(["number","string"].includes(typeof t)?(u=!1,n=!1,r=[i],a=t):"number"===typeof t[0]?(o=t,r=i,u=Boolean(s.incremental),n=!s.incremental):(r=t,n=!0),this.isEmpty&&r.some((({data:e})=>null===e||void 0===e?void 0:e.length)))e.reinit=!0;else{if(!1===n){let t=!1;if(u&&this.config.timeline.push(...o),r.forEach((i=>{var s,n;let o="number"===typeof a?this.config.series[0]:this.config.series.find((({id:e})=>e===i.id||e===a)),r=null===o||void 0===o?void 0:o.id;if("number"===typeof a&&this.state.y2uIdx[a]&&(o=this.config.series[a],r=a),o&&r){const{data:a,...d}=i,h=this.state.y2uIdx[r];"dots"!==o.type&&"dots"!==i.type&&"dots"!==(null===(s=this.config.chart.series)||void 0===s?void 0:s.type)||(e.reinit=!0),u?o.data=a?o.data.concat(a):o.data:(null===a||void 0===a?void 0:a.length)&&(o.data=a,c=!0);const f=(0,l.configureSeries)(this,Object.assign(o,d),h),p=this.options.series[h],g=this.uplot.series[h];g.show!==f.show&&e.fns.push((()=>{this.uplot.setSeries(h,{show:f.show})})),null!==g._focus&&g._focus===f.focus||e.fns.push((()=>{this.uplot.setSeries(h,{focus:f.focus})})),g.color!==f.color&&(t=!0),f.scale&&(null===(n=this.config.scales[f.scale])||void 0===n?void 0:n.stacking)&&(c=!0),(0,l.overrideSeriesInUpdate)(p,f),(0,l.overrideSeriesInUpdate)(g,f)}else e.fns.push((()=>{const e=(0,l.configureSeries)(this,i,this.config.series.length);this.state.y2uIdx[e.id]=this.uplot.series.length,this.uplot.addSeries(e,this.config.series.length)})),this.config.series.push(i)})),t&&e.fns.push((()=>{var e;null===(e=this.plugins.cursor)||void 0===e||e.updatePoints()})),s.splice){const e=r[0].data.length;this.config.series.forEach((t=>{t.data.splice(0,e)})),this.config.timeline.splice(0,o.length)}}else this.config.timeline=o,this.config.series=r,e.reinit=!0;e.reinit||(this._batch.fns.push((()=>{var e,t;return null===(t=null===(e=this.plugins)||void 0===e?void 0:e.tooltip)||void 0===t?void 0:t.reset()})),(c||o.length)&&(e.recalc=!0,e.fns.push((()=>{this.uplot.setData(this.series)}))))}}t.DynamicUpdatesMixin=class{setLocale(e){this.batch((t=>function(e,t,i){e.utils.i18n=(0,n.default)(i),t.redrawLegend=!0}(this,t,e)))}setTitle(e){this.batch((t=>{this.config.title=e,this.initTitle(),t.redraw=[!0,!0]}))}setTheme(e){this.batch((t=>function(e,t,i){e.utils.theme.setTheme(t);const s=["light","light-hc","dark","dark-hc"].map((e=>`yagr_theme_${e}`));e.root.classList.remove(...s),e.root.classList.add("yagr_theme_"+t),i.redraw=[!1,!0]}(this,e,t)))}setAxes(e){this.batch((t=>function(e,t,i){const{x:s,...n}=i;if(s){const t=e.uplot.axes.find((({scale:e})=>e===o.DEFAULT_X_SCALE));t&&(0,r.updateAxis)(e,t,{scale:o.DEFAULT_X_SCALE,...s})}Object.entries(n).forEach((([t,i])=>{const s=e.uplot.axes.find((({scale:e})=>e===t));s&&(0,r.updateAxis)(e,s,{scale:t,...i})})),t.redraw=(0,r.getRedrawOptionsForAxesUpdate)(i)}(this,t,e)))}setSeries(e,t,i={incremental:!0,splice:!1}){this.batch((s=>c.call(this,s,e,t,i)))}setFocus(e,t){this.batch((()=>function(e,t,i){var s;const n=null===t?null:e.state.y2uIdx[t];null===(s=e.plugins.cursor)||void 0===s||s.focus(n,i),e.uplot.setSeries(n,{focus:i})}(this,e,t)))}setVisible(e,t,i=!0){this.batch((s=>function(e,t,i,s,n){const l=null===t?null:e.state.y2uIdx[t];(null===t?e.config.series:[e.config.series.find((({id:e})=>e===t))]).forEach((e=>{e&&(e.show=i)})),n.fns.push((()=>{e.uplot.setSeries(l,{show:i})})),e.options.series=e.uplot.series;let r=!1;if(l){const t=e.uplot.series[l];t.show=i;const s=t.scale||o.DEFAULT_Y_SCALE,n=e.config.scales[s];r=Boolean(n&&n.stacking)}else r=e.options.series.reduce(((t,s)=>{var n;const{scale:o}=s;return s.show=i,Boolean(o&&(null===(n=e.config.scales[o])||void 0===n?void 0:n.stacking)||t)}),!1);r&&(n.recalc=!0,n.fns.push((()=>{var t;e.uplot.setData(e.series,!0),s&&(null===(t=e.plugins.legend)||void 0===t||t.update())})))}(this,e,t,i,s)))}setScales(e){this.batch((t=>function(e,t,i){let s=!1,n=!1;Object.entries(t).forEach((([t,i])=>{const o=e.config.scales[t];if(o){const{stacking:e}=o,{stacking:t}=i;e!==t&&(s=!0),i.normalize===o.normalize&&i.normalizeBase===o.normalizeBase||(n=!0)}}));const l=Object.entries(t).every((([t,i])=>{const s=e.config.scales[t],{min:n,max:o,...l}=s,{min:r,max:u,...c}=i;return!(!1===(0,a.deepIsEqual)(c,l))&&(n!==r||o!==u)})),r=Object.keys(t).includes(o.DEFAULT_X_SCALE);if(l&&!r)return Object.entries(t).forEach((([t,s])=>{i.fns.push((()=>{e.uplot.setScale(t,{min:s.min,max:s.max})}))}));(s||n)&&(i.reinit=!0),e.config.scales=t,i.reinit=!0}(this,e,t)))}setConfig(e,t=!1){this.batch((i=>u(this,i,e,t)))}}},78229:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransformSeriesMixin=void 0;const s=i(46976),n=i(50497);t.TransformSeriesMixin=class{transformSeries(){const e=performance.now(),t=[],i=this.config,o=i.timeline;let l=i.processing||!1,r=this.config.series.map((({data:e})=>e));l&&l.interpolation&&(r=(0,n.preprocess)(r,o,l),l=!1);const a=Boolean(l&&l.nullValues),u=l&&l.nullValues||{},c={};for(let d=0;d<r.length;d++){let e=[];const i=d+1,l=r[d],h=this.options.series.length-i,f=this.options.series[h],p=f.scale||s.DEFAULT_Y_SCALE,g=this.config.scales[p]||{},m=g.stacking,_=f.stackGroup||0;let v=!0;m&&!c[p]&&(this.options.focus=this.options.focus||{alpha:1.1},this.options.focus.alpha=1.1,c[p]=[]),m&&!c[p][_]&&(c[p][_]=new Array(o.length).fill(0)),f.count=0;for(let t=0;t<l.length;t++){let i=l[t];if(a&&u[String(i)]&&(i=null),f.transform&&(f._transformed=!0,i=f.transform(i,r,t)),g.transform&&(f._transformed=!0,i=g.transform(i,r,t)),null===i){if("line"===f.type||"dots"===f.type){e.push(null);continue}i=m?0:null}if(v=!1,g.normalize){const e=(0,n.getSumByIdx)(this.options.series,t,p);i=e&&(null!==i&&void 0!==i?i:0)/e*(g.normalizeBase||100),f.normalizedData=f.normalizedData||[],f.normalizedData[t]=i}g.stacking&&(!1===f.show&&(i=0),i=c[p][_][t]+=null!==i&&void 0!==i?i:0),"logarithmic"===g.type&&0===i&&(i=1),f.sum=(f.sum||0)+(i||0);"number"===typeof f.$c[t]&&(f.count+=1),e.push(i)}f.avg=(f.sum||0)/f.count,f.empty=v,f.postProcess&&(e=f.postProcess(e,d,this)),t.unshift(e)}return t.unshift(this.config.timeline),this.series=t,this.execHooks("processed",{chart:this,meta:{processTime:performance.now()-e}}),this.series}}},60758:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cursorPoint=void 0;const n=i(46976),o=s(i(20500)),l=i(50497);function r(e,t,i){if(i||(i=t.querySelector("span")),!i)return;t.style.background=`${e.color}`,i.style.background=e.color||n.SERIE_COLOR;const s=o.default.parseRgba(e.color)||[256,256,256,0];t.style.boxShadow=`0px 0px 0px 1px rgba(${s[0]}, ${s[1]}, ${s[2]}, 0.5)`}function a(e,t){const i=e.series[t],s=(0,l.html)("span"),n=(0,l.html)("div",{class:"yagr-point","data-idx":String(t)},i.empty?void 0:s);return i.empty?(n.style.display="none",n):(r(i,n,s),n)}function u(e,t){return void 0===t?Array.from(e.querySelectorAll(".yagr-point")):[e.querySelector(`.yagr-point[data-idx="${t}"]`)]}t.cursorPoint=a,t.default=function(e,t){var i,s,o;const c=e.config.processing||{},d=Boolean(c.interpolation),h=null===(i=c.interpolation)||void 0===i?void 0:i.value,f=!1!==t.snapToValues&&(t.snapToValues||"closest"),p=!!d&&(null!==(o=null===(s=c.interpolation)||void 0===s?void 0:s.snapToValues)&&void 0!==o?o:"closest");let g={};const m=(e,t,i)=>{const s=e.series[t];if(s.scale===n.DEFAULT_X_SCALE)return i;const o=s.$c||e.data[t],r=o[i];return d&&r===h?(0,l.findDataIdx)(o,s,i,p,h):null===r?(0,l.findDataIdx)(o,s,i,f,null):i};return{showPoints:t=>{const i=e.uplot.over;if(!i)return;u(i,t).forEach((e=>{e.style.visibility="visible"}))},hidePoints:t=>{const i=e.uplot.over;if(!i)return;u(i,t).forEach((e=>{e.style.visibility="hidden"}))},pin:t=>{var i;const s=e.root.querySelector(".u-over");if(s)if(t){const e=document.createElement("div");e.classList.add("yagr-points-holder"),s.querySelectorAll(".yagr-point").forEach((t=>{const i=t.cloneNode(!0);e.appendChild(i);const s=i.dataset.idx;s&&(g[s]=i)})),s.appendChild(e)}else g={},null===(i=s.querySelector(".yagr-points-holder"))||void 0===i||i.remove()},updatePoints:()=>{e.root.querySelectorAll(".yagr-point").forEach((t=>{const i=Number(t.dataset.idx);if(isNaN(i))return;r(e.uplot.series[i],t)}))},focus:(e,t)=>{Object.entries(g).forEach((([i,s])=>{s.style.display=null!==e?i===String(e)&&t?"block":"none":t?"block":"none"}))},uplot:{opts:(e,i)=>{var s;i.cursor=i.cursor||{};const o=i.series.filter((e=>e.empty)).length,l=i.series.length-1,r=null!==(s=null===t||void 0===t?void 0:t.maxMarkers)&&void 0!==s?s:50;i.cursor.points={show:l-o<=r&&a,size:(e,i)=>{const s=e.series[i];return(s.cursorOptions?s.cursorOptions.markersSize:null===t||void 0===t?void 0:t.markersSize)||n.MARKER_DIAMETER}},i.cursor.dataIdx=m},hooks:{...t.hideMarkers&&{setCursor:i=>{var s,n;const o=i.cursor.idx;if(!(0,l.isNil)(o))for(let l=1;l<i.series.length;l++){const r=i.series[l].$c[o];t.hideMarkers(r,l)?null===(s=e.plugins.cursor)||void 0===s||s.hidePoints(l):null===(n=e.plugins.cursor)||void 0===n||n.showPoints(l)}}},init:e=>{const i=e.root.querySelector(".u-cursor-x");i&&(t.x&&!1===t.x.visible&&(i.style.display="none"),i.style.borderRight=t.x&&t.x.style||n.CURSOR_STYLE);const s=e.root.querySelector(".u-cursor-y");s&&(t.y&&!1!==t.y.visible?s.style.borderBottom=t.y.style||n.CURSOR_STYLE:s.style.display="none")}}}}}},72168:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasOneVisibleLine=void 0;const s=i(46976),n=i(50497),o=i(11213),l="null";t.hasOneVisibleLine=e=>e.some((({show:e,id:t})=>t!==s.DEFAULT_X_SERIE_NAME&&e));const r=(e,i)=>i.length>3&&e((0,t.hasOneVisibleLine)(i)?"hide-all":"show-all");t.default=class{constructor(){this.pagesCount=0,this.state={page:0,pages:1,pageSize:0,rowsPerPage:1,paginated:!1,requiredSpace:0,totalSpace:0},this.itemsHtml="",this.preInit=(e,t,i)=>{this.yagr=e,this.options=Object.assign({show:!1,position:"bottom",fontSize:12,maxLegendSpace:.3,className:void 0,behaviour:"basic"},t||{}),this.calc(i)},this.init=e=>{var t;this.options.show&&(this.uplot=e,null===(t=e.root.querySelector(".u-legend"))||void 0===t||t.remove(),this.render())},this.update=()=>{this.yagr.root.querySelectorAll("[data-serie-id]").forEach((e=>{var t,i;const s=e.getAttribute("data-serie-id");if(!s||s===l)return;const n=null===(i=null===(t=this.uplot)||void 0===t?void 0:t.series[this.yagr.state.y2uIdx[s]])||void 0===i?void 0:i.show;e.classList[n?"remove":"add"]("yagr-legend__item_hidden")}))},this.measureLegend=e=>{const t=this.yagr.root,i=(0,n.html)("div",{class:"yagr-legend",style:{visibility:"hidden"}},e);t.appendChild(i);const s=i.childNodes[0].getBoundingClientRect();return i.remove(),s},this.nextPage=()=>{const{state:e}=this;this.state.page+=1,this.items&&(this.items.style.transform=`translate(0, ${-1*e.page*e.pageSize}px)`,this.renderPagination())},this.prevPage=()=>{const{state:e}=this;this.state.page-=1,this.items&&(this.items.style.transform=`translate(0, ${-1*e.page*e.pageSize}px)`,this.renderPagination())}}redraw(){this.options.show&&this.render()}destroy(){var e;this._onDestroy&&this._onDestroy(),null===(e=this.legendEl)||void 0===e||e.remove()}applyHandlers(){const{yagr:e,uplot:i}=this;if(!i)return()=>{};const s=e.root.querySelectorAll("[data-serie-id]"),n=[],a={basic:s=>()=>{const n=s.getAttribute("data-serie-id"),o=[];if(n===l){const e=!(0,t.hasOneVisibleLine)(i.series);for(let t=1;t<i.series.length;t++)o.push([i.series[t],e])}else{const e=i.series.find((({id:e})=>e===n));if(!e)return;o.push([e,!e.show])}o.forEach((([t,i])=>{if(t.show===i)return;const s=e.root.querySelector(`[data-serie-id="${t.id}"]`);e.setVisible(t.id,i,!1),null===s||void 0===s||s.classList[i?"remove":"add"]("yagr-legend__item_hidden")}));const a=e.root.querySelector(".yagr-legend__all-series");if(a){const e=r(this.yagr.utils.i18n,i.series);a.innerHTML=e||""}},extended:s=>{const n=(t,i)=>{const s=e.root.querySelector(`[data-serie-id="${t}"]`);e.setVisible(t,i,!1),null===s||void 0===s||s.classList[i?"remove":"add"]("yagr-legend__item_hidden")},o=e=>{this.state.startSerieRange=e;const s=i.series.filter((t=>t.id!==e.id)),o=!(0,t.hasOneVisibleLine)(s)&&!1!==e.show;i.series.forEach((t=>{const i=e.id===t.id||o;n(t.id,i)}))},l=e=>{this.state.startSerieRange||(this.state.startSerieRange=i.series[1]);const t=[];i.series.forEach(((i,s)=>{var n;i.id===e.id&&t.push(s),i.id===(null===(n=this.state.startSerieRange)||void 0===n?void 0:n.id)&&t.push(s)})),i.series.forEach(((e,i)=>{const s=i>=t[0]&&i<=t[1];n(e.id,s)}))};return e=>{const t=s.getAttribute("data-serie-id"),r=i.series.find((({id:e})=>e===t));r&&(e.preventDefault(),e.ctrlKey||e.metaKey?(e=>{n(e.id,!e.show)})(r):e.shiftKey?l(r):o(r))}}},u=t=>()=>{const i=t.getAttribute("data-serie-id");if(t.classList.contains("yagr-legend__item_hidden")||i===l)return;const s=this.yagr.uplot.series.find((({id:e})=>e===i));s&&(e.setFocus(s.id,!0),e.redraw(!0,!1))},c=()=>{e.setFocus(null,!0),e.redraw(!0,!1)};s.forEach((e=>{const t=a[this.options.behaviour||"basic"](e),i=u(e);e.addEventListener("click",t),e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",c),e.addEventListener("mousedown",o.preventMouseEvents),n.push((()=>{e.removeEventListener("click",t),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",c),e.removeEventListener("mousedown",o.preventMouseEvents)}))}));const d=()=>n.forEach((e=>e()));return this._onDestroy=d,d}render(){var e,t;let i=!1;const{uplot:s,options:o}=this;if(!s)return;let l=this.yagr.root.querySelector(".yagr-legend");if(l?i=!0:l=(0,n.html)("div",{class:`yagr-legend yagr-legend__${this.options.position} ${(null===o||void 0===o?void 0:o.className)||""}`}),l){if(i||("top"===o.position?s.root.before(l):null===(e=s.root)||void 0===e||e.after(l)),this.legendEl=l,this.itemsHtml&&!i||this.calc(this.yagr.options),l.innerHTML=`<div class="yagr-legend__container" style="height: ${this.state.requiredSpace}px">${this.itemsHtml}</div>`,this.items=l.querySelector(".yagr-legend__items"),this.container=l.querySelector(".yagr-legend__container"),this.state.paginated){const e=this.renderPagination();null===(t=this.container)||void 0===t||t.after(e)}else this.items.style.justifyContent="center";this.applyHandlers()}}renderPagination(){const{state:e}=this;let t=this.yagr.root.querySelector(".yagr-legend__pagination");if(t){const e=t.querySelector(".yagr-legend__icon-down"),i=t.querySelector(".yagr-legend__icon-up");e.removeEventListener("click",this.nextPage),i.removeEventListener("click",this.prevPage)}else t=(0,n.html)("div",{class:"yagr-legend__pagination"});const i=0===e.page?"yagr-legend__icon-up_disabled":"",s=e.page===e.pages-1?"yagr-legend__icon-down_disabled":"";t.innerHTML=`<span class="yagr-legend__icon-up ${i}"></span>\n<span class="yagr-legend__pagination-text">${e.page+1}/${e.pages}</span>\n<span class="yagr-legend__icon-down ${s}"></span>`;const o=t.querySelector(".yagr-legend__icon-down"),l=t.querySelector(".yagr-legend__icon-up");return s||o.addEventListener("click",this.nextPage),i||l.addEventListener("click",this.prevPage),t}createIconLineElement(e){return(0,n.html)("span",{class:`yagr-legend__icon yagr-legend__icon_${e.type}`,style:{"background-color":this.yagr.getSerieLegendColor(e)}})}createSerieNameElement(e){const t=(0,n.html)("span");return t.innerText=e.name||"unnamed",t}renderItems(e){const t=r(this.yagr.utils.i18n,e.series),i="extended"!==this.options.behaviour&&(e=>e.length>3&&l||void 0)(e.series),s=i?[i]:[];for(let n=1;n<e.series.length;n++)s.push(e.series[n]);return`<div class="yagr-legend__items">${s.map((e=>{let s,n,o=" ";if(e===l)s=t,n=i,o=" yagr-legend__all-series ";else{n=e.id;const t=this.createIconLineElement(e),i=this.createSerieNameElement(e);s=`${t.outerHTML}${i.outerHTML}`}return`<div class="yagr-legend__item${o}${"string"===typeof e||!1!==e.show?"":"yagr-legend__item_hidden"}" data-serie-id="${n}">${s}</div>`})).join("")}</div>`}calc(e){if(!this.options.show)return;const t=e.height-this.VERTICAL_PADDING,i=this.renderItems(e),{height:s}=this.measureLegend(i),n=this.options.fontSize+2,o=t*this.options.maxLegendSpace,l=Math.floor(o/n),r=l-1,a=Math.min(r*n,o),u=Math.min(l*n,o),c=s>a&&a>0,d=Math.min(c?u:a,s),h=Math.ceil(s/a),f=c?this.VERTICAL_PADDING+18:this.VERTICAL_PADDING;this.state.requiredSpace=d,this.state.totalSpace=d+f,this.state.paginated=c,this.state.page=this.state.page||0,this.state.pages=h,this.state.pageSize=a,this.state.rowsPerPage=l,this.itemsHtml=i}get VERTICAL_PADDING(){return"bottom"===this.options.position?20:48}}},67903:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.drawMarkersIfRequired=t.renderCircle=void 0;const s=i(46976),n=i(50497);t.renderCircle=(e,t,i,n,o,l,r,a)=>{const{ctx:u}=e,c=Math.round(e.valToPos(t,s.DEFAULT_X_SCALE,!0)),d=Math.round(e.valToPos(i,a||s.DEFAULT_Y_SCALE,!0));if(u.beginPath(),u.arc(c,d,2*n,0,2*Math.PI),u.fillStyle=l,o){const e=u.lineWidth,t=u.strokeStyle;u.lineWidth=o,u.strokeStyle=r,u.stroke(),u.lineWidth=e,u.strokeStyle=t}u.fill(),u.closePath()},t.drawMarkersIfRequired=function(e,i,o,l){const{color:r,scale:a,spanGaps:u,count:c,pointsSize:d}=e.series[i];if(u&&c>1)return!1;let h,f=o;for(;f<=l;){const o=e.data[i][f];if(null===o){h=o,f++;continue}const l=f+1,u=e.data[i][l];(0,n.isNil)(h)&&(0,n.isNil)(u)&&(0,t.renderCircle)(e,e.data[0][f],o,null!==d&&void 0!==d?d:s.DEFAULT_POINT_SIZE/2,0,r,r,a||s.DEFAULT_Y_SCALE),h=o,f++}},t.default=function(e,i){var n;const{size:o=s.DEFAULT_POINT_SIZE,strokeWidth:l=2,strokeColor:r="#ffffff",show:a}=i.markers,u=null===(n=i.chart)||void 0===n?void 0:n.series,c=(null===u||void 0===u?void 0:u.pointsSize)||s.DEFAULT_POINT_SIZE;function d(i,n,u,d){const{scale:h,_focus:f,color:p,getFocusedColor:g,type:m}=i.series[n];let _=u;const v="dots"===m?a?o:c:o;for(;_<=d;){const o=i.data[n][_];null!==o&&(0,t.renderCircle)(i,i.data[0][_],o,v,l,(f||null===f?p:g(e,n))||p,r,h||s.DEFAULT_Y_SCALE),_++}}const h=(e,t)=>{0!==e&&null!==e&&("dots"===t.type||i.markers.show)&&(t.points=t.points||{},t.points.show=d)};return{opts:(e,t)=>{(i.markers.show||t.series.some((e=>"dots"===e.type)))&&t.series.forEach(((e,t)=>h(t,e)))},hooks:{addSeries:(e,t)=>{const i=e.series[t];h(t,i)},setSeries:(e,t,i)=>{h(t,i)}}}}},15648:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(46976),n=i(48643),o=i(50497),l=i(80152),r={[n.DrawOrderKey.Series]:0,[n.DrawOrderKey.Axes]:1,plotLines:2},a={"012":"draw",102:"draw",201:"drawClear",210:"drawClear",120:"drawAxes","021":"drawSeries"};t.default=function(e){let t=new Map;return function(i){var n;const u=null===(n=i.config.chart.appearance)||void 0===n?void 0:n.drawOrder,c=(u?u.map((e=>r[e])):[0,1,2]).join(""),d=a[c]||"drawClear";function h(e){var i;if(e.id)return e.id;return(null===(i=Array.from(t.entries()).find((([t,i])=>(0,o.deepIsEqual)(i,e))))||void 0===i?void 0:i[0])||(0,o.genId)()}function f(n){const{ctx:o}=n,{height:r,top:a,width:u,left:c}=n.bbox,d=n.data[0];for(const h of t.values()){if(!h.scale)continue;if(e.render){e.render(n,h);continue}o.save(),o.fillStyle=i.utils.colors.parse(h.color);const{scale:t,value:f}=h,p=Array.isArray(f),[g,m]=p?(0,l.calculateFromTo)(f,t,d,n):[n.valToPos(f,t,!0),0];if(p){const e=h.accent;t===s.DEFAULT_X_SCALE?(o.fillRect(g,a,m-g,r),e&&(o.fillStyle=e.color,o.fillRect(g,a-e.space,m-g,e.space))):(o.fillRect(c,g,u,m-g),e&&(o.fillStyle=e.color,o.fillRect(u+c,g,e.space,m-g)))}else{const e=h;if(o.beginPath(),t===s.DEFAULT_X_SCALE){const e=n.data[0][n.data[0].length-1];if(g-n.valToPos(e,t,!0)>0)continue;o.moveTo(g,a),o.lineTo(g,r+a)}else o.moveTo(c,g),o.lineTo(u+c,g);o.lineWidth=e.width||s.DEFAULT_CANVAS_PIXEL_RATIO,o.strokeStyle=e.color||"#000",e.dash&&o.setLineDash(e.dash),o.stroke()}o.restore()}}const p="drawSeries"===d?(e,t)=>{t===e.series.length-1&&f(e)}:f;function g(e){e?t.forEach(((i,s)=>{i.scale===e&&t.delete(s)})):t.clear()}return{get:function(){return Array.from(t.values())},clear:g,remove:function(e){for(const i of e){const e=h(i);t.delete(e)}},add:function(e){for(const i of e){const e=h(i);t.set(e,i)}},update:function(e,i){if(!e||0===e.length)return void g(i);const s=new Set;for(const n of e){const e=h(n);t.set(e,n),s.add(e)}for(const[n,o]of t.entries())i&&o.scale!==i||s.has(n)||t.delete(n)},uplot:{opts:()=>{const e=i.config;t=new Map;for(const i in e.axes)if(e.axes.hasOwnProperty(i)){const s=e.axes[i];if(s.plotLines)for(const e of s.plotLines)t.set(e.id||(0,o.genId)(),{...e,scale:i})}},hooks:{[d]:p}}}}}},4553:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculateFromTo=t.getPosition=void 0;const s=i(46976);function n(e,t,i,n){return e>0&&t===s.DEFAULT_X_SCALE?i:e>0&&t!==s.DEFAULT_X_SCALE||e<=0&&t===s.DEFAULT_X_SCALE?0:n}t.getPosition=n,t.calculateFromTo=function(e,t,i,o){return e.map((e=>{var l,r;if(Math.abs(e)!==1/0){if(t===s.DEFAULT_X_SCALE)return Math.min(Math.max(e,i[0]),i[i.length-1]);{const i=o.scales[t];return Math.min(Math.max(e,null!==(l=i.min)&&void 0!==l?l:e),null!==(r=i.max)&&void 0!==r?r:e)}}const a=n(e,t,o.width,o.height);return o.posToVal(a,t)})).map((e=>o.valToPos(e,t,!0)))}},80152:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculateFromTo=void 0;var s=i(4553);Object.defineProperty(t,"calculateFromTo",{enumerable:!0,get:function(){return s.calculateFromTo}})},48840:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=i(50497),n={size:["height","width"],clientSize:["clientHeight","clientWidth"],offsetSize:["offsetHeight","offsetWidth"],maxSize:["maxHeight","maxWidth"],before:["top","left"],marginBefore:["marginTop","marginLeft"],after:["bottom","right"],marginAfter:["marginBottom","marginRight"],scrollOffset:["pageYOffset","pageXOffset"],offset:["offsetY","offsetY"],offsetOpt:["yOffset","xOffset"],bodyScroll:["scrollHeight","scrollWidth"],inner:["innerHeight","innerWidth"]};function o(e){return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}t.default=function(e,t,i="bottom",l={}){let r;r=t instanceof Element||t instanceof Range?o(e.getBoundingClientRect()):t;const a=Object.assign({top:r.bottom||0,bottom:r.top||0,left:r.right||0,right:r.left||0},r),u={top:0,left:0,bottom:window.innerHeight,right:window.innerWidth};l.bound&&((l.bound instanceof Element||l.bound instanceof Range)&&(l.bound=o(l.bound.getBoundingClientRect())),Object.assign(u,l.bound));const c=getComputedStyle(e),{primary:d,secondary:h}=Object.entries(n).reduce(((e,[t,s])=>({primary:{...e.primary,[t]:s["top"===i||"bottom"===i?0:1]},secondary:{...e.secondary,[t]:s["top"===i||"bottom"===i?1:0]}})),{primary:{},secondary:{}});e.style.position="absolute",e.style.maxWidth="",e.style.maxHeight="";const f=l[d.offsetOpt]||0,p=parseInt(c[h.marginBefore],10),g=p+parseInt(c[h.marginAfter],10),m=u[h.after]-u[h.before]-g,_=parseInt(c[h.maxSize],10);(!_||m<_)&&(e.style[h.maxSize]=(0,s.px)(m));const v=parseInt(c[d.marginBefore],10)+parseInt(c[d.marginAfter],10),y=a[d.before]-u[d.before]-v,b=u[d.after]-a[d.after]-v-f;(i===d.before&&e[d.offsetSize]>y||i===d.after&&e[d.offsetSize]>b)&&(i=y>b?d.before:d.after);const w=i===d.before?y:b,E=parseInt(c[d.maxSize],10);(!E||w<E)&&(e.style[d.maxSize]=(0,s.px)(w));const S=document.body[d.bodyScroll]-window[d.inner],x=Math.max(Math.min(window[d.scrollOffset],S),0),A=t=>Math.max(u[d.before],Math.min(t,u[d.after]-e[d.offsetSize]-v));i===d.before?(e.style[d.before]=x+A(a[d.before]-e[d.offsetSize]-v)-f+"px",e.style[d.after]="auto"):(e.style[d.before]=(0,s.px)(x+A(a[d.after])+f),e.style[d.after]="auto");const T=document.body[h.bodyScroll]-window[h.inner],O=Math.max(Math.min(window[h.scrollOffset],T),0);var L;return e.style[h.before]=(0,s.px)(O+(L=a[h.before]-p,Math.max(u[h.before],Math.min(L,u[h.after]-e[h.offsetSize]-g)))),e.style[h.after]="auto",e.dataset.side=i,{side:i,anchorRect:a,boundRect:u}}},74947:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderTooltip=void 0;const s=i(48130);t.renderTooltip=function(e){if(0===e.scales.length)return e.yagr.utils.i18n("nodata");const[t,i]=e.options.title?"string"===typeof e.options.title?[e.options.title,!1]:["",!0]:["",!1];return`${t?`<div class="__title">${t}</div>`:""}${e.scales.map((t=>{const n=(0,s.getOptionValue)(e.options.title,t.scale),o=e.scales.length>1?e.options.scales?`${(0,s.getOptionValue)(e.options.scales,t.scale)||""}`:`${e.yagr.utils.i18n("scale")}: ${t.scale}`:"";return`\n<div class="__section" data-scale=${t.scale}>\n    ${i&&n?`<div class="_section_title">${n}</div>`:""}\n    ${o?`<div class="__section_scale">${o}</div>`:""}\n    <div class="__section_body">${function(e,t,i){const n=e.slice(0,(0,s.getOptionValue)(t.maxLines,i));return n.map((({value:i,name:n="unnamed",color:o,active:l,transformed:r,seriesIdx:a},u)=>{const c=`\n<span class="yagr-tooltip__val">${i}</span>\n    ${"number"===typeof r?`<span class="yagr-tooltip__tf">${r.toFixed(2)}</span>`:""}\n`;return`\n<div class="yagr-tooltip__item ${l?"_active":""}" data-series="${a}">\n    ${t.showIndicies?`<span class="yagr-tooltip__idx">${e.length-u}</span>`:""}\n    <span class="yagr-tooltip__mark" style="background-color: ${o}"></span>${(0,s.escapeHTML)(n)}&nbsp;&nbsp;${c}\n</div>`})).join("")+(e.length>n.length?`<div class="yagr-tooltip__item _more">+${e.length-n.length}</div>`:"")}(t.rows,e.options,t.scale)}</div>\n    ${(0,s.getOptionValue)(e.options.sum,t.scale)?`\n        <div class="__section_sum">\n            ${e.yagr.utils.i18n("sum")}: ${t.sum}\n        </div>\n    `:""}\n</div>`})).join("")}`}},25700:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(i(48840)),o=i(46976),l=i(50497),r=i(74947),a=i(48130),u=(e,t,i,s,n)=>{var o,r,a;const u=Array.isArray(i.$c)?i.$c:t;let c=u[s];if(n&&c===n.value){const e=null!==(o=n.snapToValues)&&void 0!==o?o:"closest";c=u[(0,l.findDataIdx)(u,i,s,e,n.value)]}else if(null===c){const t=null!==(r=e.snapToValues)&&void 0!==r?r:"closest",n=null!==(a=i.snapToValues)&&void 0!==a?a:t;c=u[(0,l.findDataIdx)(u,i,s,n,null)]}return c},c={maxLines:o.TOOLTIP_DEFAULT_MAX_LINES,highlight:!0,sum:!1,render:r.renderTooltip,pinable:!0,strategy:"pin",sort:void 0,showIndicies:!1,hideNoData:!1,className:"yagr-tooltip_default",xOffset:o.TOOLTIP_X_OFFSET,yOffset:o.TOOLTIP_Y_OFFSET,virtual:!1,showEmpty:!1,onUpdate:"reset"};class d{constructor(e,t={}){var i,s;this.handlers={init:[],mount:[],show:[],pin:[],unpin:[],hide:[],render:[],destroy:[],reset:[]},this.placement=n.default,this.renderTooltipCloses=()=>{},this.skipNextMouseUp=!1,this.emit=(e,t)=>{this.handlers[e].forEach((i=>{i(this.tOverlay,{state:this.state,actions:{pin:this.pin,show:this.show,hide:this.hide,dispose:this.dispose,reset:this.reset},data:t,yagr:this.yagr,event:e})}))},this.reset=()=>{var e;"none"!==this.opts.onUpdate?(this.state.visible&&this.hide(),this.state.pinned&&this.pin(!1),this.emit("reset")):null===(e=this.yagr.plugins.cursor)||void 0===e||e.pin(!1)},this.show=()=>{const e=!this.state.visible;this.state.visible=!0,this.tOverlay.style.display="block",e&&this.emit("show")},this.hide=()=>{const e=this.state.visible;this.state.visible=!1,this.tOverlay.style.display="none",this.emit("hide"),e&&this.emit("show")},this.pin=(e,t)=>{var i;this.state.pinned=e;const s=this.state.range||[];if(null===(i=this.yagr.plugins.cursor)||void 0===i||i.pin(e&&(null===s[1]||s.length<2)),this.opts.virtual)return this.emit(e?"pin":"unpin");t&&this.placement(this.tOverlay,{left:t.x+this.bLeft,top:this.bTop+t.y-(this.opts.yOffset||0)},"right",{bound:this.bound,xOffset:this.opts.xOffset,yOffset:this.opts.yOffset});const n=this.tOverlay.querySelector("._tooltip-list");e?(this.state.visible||this.show(),this.tOverlay.classList.add("yagr-tooltip_pinned"),n&&(null===n||void 0===n?void 0:n.clientHeight)&&(n.style.height=(0,l.px)(n.clientHeight)),this.opts.render===r.renderTooltip&&(document.addEventListener("mousemove",this.checkFocus),document.addEventListener("mousedown",this.detectClickOutside))):(this.tOverlay.classList.remove("yagr-tooltip_pinned"),this.opts.render===r.renderTooltip&&(document.removeEventListener("mousemove",this.checkFocus),document.removeEventListener("mousedown",this.detectClickOutside))),this.emit(e?"pin":"unpin")},this.checkFocus=e=>{const t=e.target;let i;t&&this.tOverlay.contains(t)&&t.classList.contains("yagr-tooltip__item")&&(i=t.dataset.series);const s=i?this.yagr.uplot.series[Number(i)]:null;i&&s?(this.state.focusedSeries=i,this.yagr.setFocus(s.id,!0)):this.state.focusedSeries&&(this.state.focusedSeries=null,this.yagr.setFocus(null,!0))},this.render=e=>{const t=this.yagr.uplot;let{left:i,top:s}=e;const{idx:n}=e,{opts:r,state:d}=this;if(r.show&&"function"===typeof r.show&&!1===r.show(this.yagr))return void this.hide();(i<0||s<0)&&!d.pinned&&this.isNotInDrag&&this.hide(),s=(0,l.inBetween)(s,0,t.bbox.top+t.bbox.height),i=(0,l.inBetween)(i,0,t.bbox.left+t.bbox.width);const{data:h}=t;if(null===h||(0,l.isNil)(n)||void 0===s)return;const f=h[0][n],p={},g={},m={};let _=t.series.length-1;for(;_>=1;){const e=t.series[_];if(!e.show){_-=1;continue}const i=e.scale||o.DEFAULT_Y_SCALE;m[i]=m[i]||[],m[i].push(_),_-=1}Object.entries(m).forEach((([e,o])=>{var c;g[e]=g[e]||{rows:[]};const d=g[e],h=Number(t.posToVal(s,e).toFixed(2)),f=(0,a.getOptionValue)(r.value,e);for(const i of o){const s=t.data[i],o=t.series[i];let l=u(this.yagr.config.cursor,s,o,n,this.interpolation),h=l;"string"===typeof l&&(h=l,l=null),(0,a.getOptionValue)(r.sum,e)&&(p[e]=p[e]||0,p[e]+=l||0);const g=s[n],m=o.$c&&o.$c[n]===this.stripValue?l:g;if(null===l&&r.hideNoData||!1===o.showInTooltip)continue;const _=null!==(c=o.precision)&&void 0!==c?c:(0,a.getOptionValue)(r.precision,e),v=o.formatter?o.formatter(h,o):f(h,_),y={id:o.id,name:o.name,dataValue:o.$c[n],originalValue:l,value:v,y:m,displayY:g,color:this.yagr.getSerieLegendColor(o),seriesIdx:i,rowIdx:d.rows.length?d.rows[d.rows.length-1].rowIdx+1:0};o.normalizedData&&(y.transformed=o.normalizedData[n]),o._transformed&&(y.transformed=s[n]),r.omitBy&&r.omitBy(y)||d.rows.push(y)}if((0,a.getOptionValue)(r.highlight,e)&&d.rows.length){const u=(0,a.getOptionValue)(r.tracking,e);let c=0;"area"===u?c=(0,l.findInRange)(d,h,(0,a.getOptionValue)(r.stickToRanges,e)):"sticky"===u?c=(0,l.findSticky)(d,h):"function"===typeof u&&(c=u(d,h,{x:t.posToVal(i,"x"),y:t.posToVal(s,e),idx:n,scale:e,series:this.yagr.series,serieIndicies:o,interpolation:this.interpolation})),null!==c&&(d.rows[c].active=!0)}const m=(0,a.getOptionValue)(r.sort,e);m&&d.rows.sort(m)}));if(!Object.values(g).some((({rows:e})=>e.length>0))&&!r.showEmpty)return void this.hide();this.onMouseEnter();const v=this.over.getBoundingClientRect();this.bLeft=v.left,this.bTop=v.top,this.bWidth=v.width;const y={left:i+this.bLeft,top:this.bTop+s-(r.yOffset||0)};this.renderTooltipCloses=()=>{const e={scales:Object.entries(g).map((([e,t])=>({scale:e,rows:t.rows,sum:p[e]}))),options:r,x:f},t=Object.values(g).some((({rows:e})=>e.filter((({id:e})=>{var t;return null===(t=this.yagr.getSeriesById(e))||void 0===t?void 0:t.show})).length>0));t||r.showEmpty?(r.virtual||(this.tOverlay.innerHTML=r.render({...e,state:d,yagr:this.yagr,defaultRender:c.render}),this.placement(this.tOverlay,y,"right",{bound:this.bound,xOffset:r.xOffset,yOffset:r.yOffset})),this.emit("render",{...e,anchor:y})):this.hide()},d.pinned||this.renderTooltipCloses()},this.initWithUplot=e=>{this.over=e.root.querySelector(".u-over"),this.over.addEventListener("mousedown",this.onMouseDown),this.over.addEventListener("mousemove",this.onMouseMove),this.over.addEventListener("mouseenter",this.onMouseEnter),this.over.addEventListener("mouseleave",this.onMouseLeave),document.addEventListener("mouseup",this.onMouseUp)},this.setSize=()=>{const e=this.over.getBoundingClientRect();this.bLeft=e.left,this.bTop=e.top},this.dispose=()=>{this.over.removeEventListener("mousedown",this.onMouseDown),this.over.removeEventListener("mousemove",this.onMouseMove),this.over.removeEventListener("mouseenter",this.onMouseEnter),this.over.removeEventListener("mouseleave",this.onMouseLeave),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.checkFocus),document.removeEventListener("mousedown",this.detectClickOutside),this.tOverlay.remove(),this.state.mounted=!1,this.emit("destroy")},this.updateOptions=e=>{Object.assign(this.opts,e),this.tOverlay.className=`yagr-tooltip ${this.opts.className||""}`},this.on=(e,t)=>{this.handlers[e].push(t)},this.off=(e,t)=>{this.handlers[e]=this.handlers[e].filter((e=>e!==t))},this.detectClickOutside=e=>{const t=e.target;if(t instanceof Element){const e=t&&this.tOverlay.contains(t),i=t&&this.over.contains(t);e||i||(this.pin(!1),this.hide())}},this.onMouseDown=e=>{this.state.range=[this.getCursorPosition(),null],this.state.pinned&&(this.pin(!1),this.hide(),this.render({left:e.clientX-this.bLeft,top:e.clientY-this.bTop,idx:this.yagr.uplot.posToIdx(e.clientX-this.bLeft)}),this.skipNextMouseUp=!0)},this.onMouseMove=()=>{var e;(null===(e=this.state.range)||void 0===e?void 0:e.length)&&(this.state.range[1]=this.getCursorPosition())},this.setCursorLeaved=e=>{const t=this.over.getBoundingClientRect(),i=e.clientX,s=this.state.range,n=s[0],o=i-t.left>n.clientX,l=this.yagr.config.timeline;let r;o?(s[1]={clientX:this.bWidth,value:this.yagr.uplot.posToVal(this.bWidth,"x"),idx:l.length-1},r=s[1]):(s[1]=s[0],s[0]={clientX:0,value:this.yagr.uplot.posToVal(0,"x"),idx:0},r=s[0]),this.yagr.uplot.setCursor({left:r.clientX,top:e.clientY-t.top})},this.onMouseUp=e=>{if(null===this.state.range)return;const[t]=this.state.range||[];let i;if(i=e.target===this.over?this.getCursorPosition():this.state.range[1],"none"===this.opts.strategy)return;const s=t&&t.clientX===(null===i||void 0===i?void 0:i.clientX),n=t&&t.clientX!==(null===i||void 0===i?void 0:i.clientX),o=this.opts.strategy;(s&&!this.skipNextMouseUp&&"drag"!==o||n&&("all"===o||"drag"===o))&&(this.pin(!this.state.pinned),this.show(),this.renderTooltipCloses()),this.state.range=null,this.skipNextMouseUp=!1},this.onMouseEnter=()=>{this.show()},this.onMouseLeave=e=>{var t;const i=this.state.pinned;(null===(t=this.state.range)||void 0===t?void 0:t[0])&&this.setCursorLeaved(e),!i&&this.isNotInDrag&&this.hide()},this.defaultTooltipValueFormatter=(e,t)=>{const i=this.yagr.config.processing||{};return"string"===typeof e?i.nullValues&&i.nullValues.hasOwnProperty(e)?i.nullValues[e]:"-":"number"===typeof e?e.toFixed("number"===typeof t?t:"number"===typeof this.opts.precision?this.opts.precision:2):"-"},this.getCursorPosition=()=>{const e=this.yagr.uplot.cursor.left;return void 0===e?null:{clientX:e,value:this.yagr.uplot.posToVal(e,"x"),idx:this.yagr.uplot.posToIdx(e)}},this.yagr=e,this.over=null===(i=null===e||void 0===e?void 0:e.uplot)||void 0===i?void 0:i.over,this.opts={...c,strategy:t.pinable?"pin":c.strategy,tracking:"area"===(null===(s=e.config.chart.series)||void 0===s?void 0:s.type)?"area":"sticky",value:this.defaultTooltipValueFormatter,...t},this.bound=this.opts.boundClassName&&document.querySelector(this.opts.boundClassName)||document.body,this.renderNode=this.opts.renderClassName&&document.querySelector(this.opts.renderClassName)||document.body,this.tOverlay=document.createElement("div"),this.tOverlay.id=`${e.id}_tooltip`,this.tOverlay.className=`yagr-tooltip ${this.opts.className||""}`,this.tOverlay.style.display="none",this.state={mounted:!1,pinned:!1,visible:!1,range:null,focusedSeries:null},this.bLeft=0,this.bTop=0,this.bWidth=0,this.opts.virtual?this.placement=()=>{}:(this.renderNode.appendChild(this.tOverlay),this.state.mounted=!0,this.emit("mount"))}get interpolation(){var e;return null===(e=this.yagr.config.processing)||void 0===e?void 0:e.interpolation}get stripValue(){return this.interpolation?this.interpolation.value:void 0}get isNotInDrag(){var e;return"none"===this.opts.strategy||"pin"===this.opts.strategy||!(null===(e=this.state.range)||void 0===e?void 0:e[1])}}t.default=function(e,t={}){const i=new d(e,t),s=()=>({hooks:{destroy:()=>{i.dispose()},init:e=>{i.initWithUplot(e)},setSize:()=>{i.setSize()},setCursor:e=>{i.render(e.cursor)}}}),n=s();return{state:i.state,pin:i.pin,show:i.show,hide:i.hide,uplot:n,display:i.render,updateOptions:i.updateOptions,on:i.on,off:i.off,tooltip:i,dispose:i.dispose,reInit:function(e){const t=s();i.reset(),e.hooks.init.push(t.hooks.init),e.hooks.destroy.push(t.hooks.destroy),e.hooks.setSize.push(t.hooks.setSize),e.hooks.setCursor.push(t.hooks.setCursor)},reset:i.reset}}},98190:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},48130:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.escapeHTML=t.getOptionValue=void 0,t.getOptionValue=function(e,t){return"object"===typeof e?e[t]:e},t.escapeHTML=function(e){const t=document.createElement("span");return t.innerText=e,t.innerHTML}},89353:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},24793:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.configureAxes=t.updateAxis=t.getRedrawOptionsForAxesUpdate=t.getTimeFormatter=t.getDefaultNumberFormatter=t.getAxisPositioning=void 0;const r=l(i(16381)),a=o(i(46976)),u=i(50497),c=i(48643),d={right:c.Axis.Side.Right,top:c.Axis.Side.Top,bottom:c.Axis.Side.Bottom,left:c.Axis.Side.Left},h={left:c.Axis.Align.Right,right:c.Axis.Align.Left,top:void 0,bottom:void 0};t.getAxisPositioning=(e,t)=>({side:e?d[e]:c.Axis.Side.Left,align:t||(e?h[e]:void 0)});t.getDefaultNumberFormatter=(e,t="")=>i=>{if((0,u.isNil)(i))return t;if(0===i)return"0";const s=Math.abs(i),n="auto"===e?2:e,[o,l]=(0,u.getUnitSuffix)(s),r=i/o;return("auto"===e?String(r).replace(/\.(\d{5,})/,(e=>e.slice(0,6))):(0,u.toFixed)(r,n))+l};const f=e=>{const i=e.precision,s=(0,t.getDefaultNumberFormatter)("number"===typeof i?i:i||"auto","");return function(e,t){return t.map(s)}},p=r.default.fmtDate("{DD}.{MM}.{YYYY}"),g=r.default.fmtDate("{HH}:{mm}:{ss}"),m=r.default.fmtDate("{mm}:{ss}"),_=r.default.fmtDate("{mm}:{ss}.{fff}"),v=r.default.fmtDate("{YYYY}");function y(e,t){let i=p;const s=Math.ceil(e/t);return s<=a.SECOND?i=_:s<=a.MINUTE?i=m:s<=a.DAY?i=g:s>=a.YEAR&&(i=v),e=>i(new Date(e))}function b(e,i){var s,n;const o=i.utils.theme,l=i.config,r={splits:e.splitsCount?(c=e.splitsCount,(e,t,i,s)=>{if(c<=2)return[i,s];const n=Math.abs(s-i)/(c-1);let o=n;const l=[];for(;i+o<s;)l.push(i+o),o+=n;return[i,...l,s]}):e.splits,show:"undefined"===typeof e.show||e.show,label:e.label||void 0,labelSize:e.labelSize||a.Y_AXIS_LABEL_SIZE,labelFont:e.labelFont||a.AXIS_LABEL_FONT,font:e.font||a.AXIS_VALUES_FONT,stroke:e.stroke||(()=>o.AXIS_STROKE),ticks:e.ticks?{...o.Y_AXIS_TICKS,...e.ticks}:o.Y_AXIS_TICKS,grid:l.grid||e.grid||o.GRID};var c;return e.scale===a.DEFAULT_X_SCALE?Object.assign(r,{getFormatter:y,gap:null!==(s=e.gap)&&void 0!==s?s:a.X_AXIS_TICK_GAP,size:(0,u.asFn)(e.size)||(()=>a.X_AXIS_SIZE),values:e.values||(0,t.getTimeFormatter)(l),ticks:e.ticks?{...o.X_AXIS_TICKS,...e.ticks}:o.X_AXIS_TICKS,scale:a.DEFAULT_X_SCALE,space:e.space||(()=>a.X_AXIS_SPACE),incrs:e.incrs||(()=>a.X_AXIS_INCRS.map((e=>e*(l.chart.timeMultiplier||a.TIME_MULTIPLIER)))),side:2,stroke:e.stroke||(()=>o.AXIS_STROKE)}):(Object.assign(r,{gap:null!==(n=e.gap)&&void 0!==n?n:a.Y_AXIS_TICK_GAP,size:(0,u.asFn)(e.size)||a.Y_AXIS_SIZE,values:e.values||f(e),scale:e.scale||a.DEFAULT_Y_SCALE,getFormatter:()=>(0,t.getDefaultNumberFormatter)("number"===typeof e.precision?e.precision:e.precision||"auto",""),...(0,t.getAxisPositioning)(e.side||"left",e.align)}),e.space&&(r.space=e.space),r)}function w(e){let t,i;return[e=e.replace(/(\d+)px/,((e,s)=>(0,u.px)(t=Math.round((i=Number(s))*window.devicePixelRatio)))),t,i]}t.getTimeFormatter=e=>{const t=e.chart.timeMultiplier||a.TIME_MULTIPLIER;return(e,i)=>{const s=y((i[i.length-1]-i[0])/t,i.length);return i.map((e=>s(e/t)))}},t.getRedrawOptionsForAxesUpdate=function(e){const t=[!1,!0];return Object.values(e).forEach((e=>{["align","side","size","label","labelFont","labelGap","labelSize"].some((t=>void 0!==e[t]))&&(t[1]=!0)})),t},t.updateAxis=function(e,t,i){var s,n,o;const l=b({...i,font:t.font},e);l.ticks={...t.ticks,...l.ticks},l.grid={...t.grid,...l.grid},l.border={...t.border,...l.border},l.splits=l.splits||t.splits,i.font&&i.font!==(null===(s=t.font)||void 0===s?void 0:s[0])&&(l.font=w(i.font)),i.labelFont&&i.labelFont!==(null===(n=t.labelFont)||void 0===n?void 0:n[0])&&(l.labelFont=w(i.labelFont)),Object.assign(t,l),null===(o=e.plugins.plotLines)||void 0===o||o.update(i.plotLines,i.scale)},t.configureAxes=function(e,t){const i=[];Object.entries(t.axes).forEach((([t,s])=>{i.push(b({...s,scale:t},e))}));const s=a.DEFAULT_X_SCALE,n=a.DEFAULT_Y_SCALE;return t.axes[s]||i.push(b({scale:s},e)),i.find((({scale:e})=>e!==s))||i.push(b({scale:n},e)),i}},27658:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getPaddingByAxes=void 0;const l=o(i(46976));t.getPaddingByAxes=function(e){let t=!1,i=!1;return e.axes?e.axes.forEach((e=>{e.scale!==l.DEFAULT_X_SCALE&&(void 0!==e.side&&3!==e.side||(t=!0),1===e.side&&(i=!0))})):t=!0,t&&!i?l.PADDING_LEFT:i&&!t?l.PADDING_RIGHT:l.PADDING_BOTH}},20500:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSerieFocusColors=t.getFocusedColor=void 0;const i=[0,0,0,.6];class s{static parseRgba(e){const t=e.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*(\d+\.?\d*)?\s*\)/);return t?[t[1],t[2],t[3],t[4]||1].map(Number):null}parse(e="000"){const t=e.startsWith("var(--");let i,s=e,n=!0;const o=this.context,l=o.style.color;return t||e.startsWith("--")?(n=!1,i=t?e.slice(4,-1):e):e.startsWith("#")||e.startsWith("rgb")||(o.style.color=e,i="color",n=!1),s=n?s:getComputedStyle(o).getPropertyValue(i),o.style.color=l,s}setContext(e){this.context=e}rgba(e){return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}toRgba(e,t){return s.parseRgba(this.parse(e))||t}shade([e,t,i,s],n){const o=n<0,l=o?0:255*n,r=o?1+n:1-n;return"rgba("+Math.round(e*r+l)+","+Math.round(t*r+l)+","+Math.round(i*r+l)+","+s+")"}}t.default=s;t.getFocusedColor=(e,t)=>{const n=e.utils.theme.SHIFT,o=e.uplot.series[t],l=s.parseRgba(o.color)||i;return e.utils.colors.shade(l,n)};t.getSerieFocusColors=(e,t)=>(i,s)=>{const n=i.series[s];return!1===n._focus?n.getFocusedColor(e,s):n[t]}},50497:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inBetween=t.isNil=t.asPlain=t.asFn=t.deepIsEqual=t.get=t.html=t.px=t.debounce=t.exec=t.preprocess=t.genId=t.findDataIdx=t.toFixed=t.getUnitSuffix=t.findSticky=t.getSumByIdx=t.findInRange=void 0;t.findInRange=(e,t,i=!0)=>{const s=t>=0;let n=-1/0,o=null,l=1/0,r=null;const a=[];let u=null;for(let c=e.rows.length-1;c>=0;c--){const i=e.rows[c],{displayY:d,rowIdx:h}=i;let f;null!==d&&(d>n&&(n=d,o=i.rowIdx),d<l&&(l=d,r=i.rowIdx)),f=null===d||(s?d<0:d>=0)?null:s?t>d?null:d-t:t<d?null:Math.abs(d-t);const p=null===u?1/0:a[u],g=null===f?p:Math.min(p,f);(null!==f&&p===f||g!==p)&&(u=h)}return null===u&&i?t>=n?o:t<=l?r:null:u};t.getSumByIdx=(e,t,i)=>{let s=0,n=0;for(;n<e.length;){const o=e[e.length-n-1],l=o.$c;if(n+=1,o.scale!==i||!1===o.show)continue;const r=l[t];s+="number"===typeof r?r:0}return s};t.findSticky=(e,t)=>{let i,s,n=0;for(;!s&&n<e.rows.length;){const o=e.rows[n].displayY;null!==o&&(i=n,s=Math.abs(o-(t||0))),n+=1}if(!s||void 0===i)return null;for(n=i+1;n<e.rows.length;n++){const o=e.rows[n].displayY;if(null===o)continue;const l=Math.abs(o-t);s>l&&(s=l,i=n)}return i};t.getUnitSuffix=e=>e>=1e18?[1e18,"E"]:e>=1e15?[1e15,"P"]:e>=1e12?[1e12,"T"]:e>=1e9?[1e9,"G"]:e>=1e6?[1e6,"M"]:e>=1e3?[1e3,"K"]:[1,""],t.toFixed=function(e,t){if(0===t)return parseInt(e);if(Number.isInteger(e))return e+"."+"0".repeat(t);const[i,s]=e.toString().split(".");return s.length>=t?`${i}.${s.slice(0,t)}`:`${i}.${s}${"0".repeat(t-s.length)}`},t.findDataIdx=function(e,t,i,s="closest",n=null){var o;let l=i,r=i;const a=null!==(o=t.snapToValues)&&void 0!==o?o:s;if(!1===a)return i;if("left"===a||"closest"===a)for(let u=i-1;u>=0;u--)if(e[u]!==n){l=u;break}if("right"===a||"closest"===a)for(let u=i+1;u<e.length;u++)if(e[u]!==n){r=u;break}return"left"===a?l:"right"===a?r:r-i>i-l?l:r};const i=(e,t,i,s,n,o,l,r="linear")=>{let a=null;const u=e[o];switch(r){case"linear":if(null===t||null===i)return null;a=t+(u-s)*(i-t)/(n-s),(isNaN(a)||Math.abs(a)===1/0)&&(a=null);break;case"previous":a=t;break;case"next":a=i;break;case"left":a=l[l.length-1]===e.length-1||null===i?null:t;break;case"right":a=0===l[0]?null:i;break;case"closest":a=Math.abs(s-e[o])<Math.abs(n-e[o])?t:i;break;default:a=r}return a};t.genId=()=>Date.now().toString(36)+Math.random().toString(36).substring(2);t.preprocess=(e,t,s)=>{const n=[],o=s.nullValues||{},l=s.interpolation;for(let r=0;r<e.length;r++){const s=e[r],a=[];let u,c,d=[],h=null,f=null;for(let e=0;e<s.length;e++){let n=s[e];if(l&&n===l.value)d.push(e);else{if(o[n]&&(n=null),d.length){f=n,c=t[e];for(const e of d)a[e]=i(t,h,f,u||t[0],c||t[t.length-1],e,d,l&&l.type);d=[]}h=n,u=t[e],a.push(n)}}if(f=null,d.length)for(const e of d)a.push(i(t,h,f,u||t[0],c||t[t.length-1],e,d,l&&l.type));n.push(a)}return n};t.exec=(e,...t)=>"function"===typeof e?e(...t):e,t.debounce=function(e,t=300){let i;return(...s)=>{clearTimeout(i),i=setTimeout((()=>e(...s)),t)}};t.px=e=>e+"px";function s(e){return null===e||void 0===e}t.html=(e,t={},i)=>{const s=document.createElement(e);return Object.keys(t).forEach((e=>{const i=t[e];s.setAttribute(e,"object"===typeof i?Object.entries(i).map((([e,t])=>`${e}:${t}`)).join(";"):i)})),i&&("string"===typeof i?s.innerHTML=i:s.appendChild(i)),s},t.get=function(e,t){return t.split(".").reduce(((e,t)=>{var i,s;return null!==(s=null===(i=Object.getOwnPropertyDescriptor(e,t))||void 0===i?void 0:i.value)&&void 0!==s?s:{}}),e)},t.deepIsEqual=function e(t,i){if(typeof t!==typeof i)return!1;if("function"!==typeof t&&"function"!==typeof i||(t=t.toString(),i=i.toString()),"object"!==typeof t||s(t)||s(i))return t===i;const n=t,o=i,l=Object.keys(n),r=Object.keys(o);if(l.length!==r.length)return!1;for(const s of l){if(!o.hasOwnProperty(s))return!1;if(!e(n[s],o[s]))return!1}return!0},t.asFn=function(e){return"function"===typeof e||"undefined"===typeof e?e:()=>e},t.asPlain=function(e){return"function"===typeof e?e():e},t.isNil=s,t.inBetween=function(e,t,i){return e>=t&&e<=i?e:e<t?t:i}},11213:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.preventMouseEvents=void 0;t.preventMouseEvents=e=>e.preventDefault()},87102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=void 0,t.applyMixins=function(e,t){const i=[];t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((i=>{Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i)||Object.create(null))})),t.prototype.initMixin&&i.push(t.prototype.initMixin)})),e.prototype.initMixins=function(){i.forEach((e=>e.call(this)))}}},88274:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pathsRenderer=void 0;const r=l(i(16381)),a=o(i(46976));t.pathsRenderer=function(e,t,i,s){const n=e.series[t],{type:o,interpolation:l}=n;let u;switch(o){case"column":u=r.default.paths.bars&&r.default.paths.bars({size:[a.BARS_DRAW_FACTOR,a.BARS_DRAW_MAX],...e.series[t].renderOptions||{}});break;case"dots":u=()=>null;break;default:switch(l){case"smooth":u=r.default.paths.spline&&r.default.paths.spline();break;case"left":u=r.default.paths.stepped&&r.default.paths.stepped({align:1});break;case"right":u=r.default.paths.stepped&&r.default.paths.stepped({align:-1});break;default:u=r.default.paths.linear&&r.default.paths.linear()}}return u?u(e,t,i,s):null}},81891:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.configureScales=t.niceScale=t.offsetScale=t.getScaleRange=void 0;const s=i(46976),n=i(48643);function o(e,t,i){const n=e>=0&&i.stacking,o=t<=0&&i.stacking;return{min:n?0:Math.round(e-Math.abs(e)*(i.offset||s.DEFAULT_Y_AXIS_OFFSET)),max:o?0:Math.round(t+Math.abs(t)*(i.offset||s.DEFAULT_Y_AXIS_OFFSET))}}function l(e,t,i){const n=e>=0&&i.stacking,o=t<=0&&i.stacking?0:"number"===typeof i.max?i.max:t,l=n?0:"number"===typeof i.min?i.min:e;if(l===o)return l>=0?{min:l,max:l+2}:{min:l-1,max:l+1};const a=r(o-l,!1),u=r(a/(s.DEFAULT_MAX_TICKS-1),!0);let c=Math.ceil(o/u)*u;c=isNaN(c)?100:c;let d=(n?Math.min(0,l):Math.floor(l/u)*u)||0;return d===c&&(d-=1,c+=1),{min:d,max:c}}function r(e,t){const i=Math.floor(Math.log10(e)),s=e/10**i;return(t?s<1.5?1:s<3?2:s<7?5:10:s<=1?1:s<=2?2:s<=5?5:10)*10**i}t.getScaleRange=(e,t)=>{const i=e.range;if("function"===typeof i)return(e,s,n)=>i(e,s,n,t);if(e.normalize)return[0,e.normalizeBase||100];if("auto"===e.range)return;let n;switch(e.range){case void 0:case"nice":n=l;break;case"offset":n=o;break;default:throw new Error(`Unknown scale range type ${e.range}`)}return(i,o,l)=>{let{min:a,max:u}=n(o,l,e,t);const c=e.minRange||s.DEFAULT_SCALE_MIN_RANGE;if(Math.abs(u-a)<c&&(a>=0?u+=c:(u+=c/2,a-=c/2)),a="number"===typeof e.min?e.min:a,u="number"===typeof e.max?e.max:u,"logarithmic"===e.type){const t="number"===typeof e.min;a<=0?a=s.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE:t||(a=Math.min(a,s.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE))}return(a>=u||u<=a)&&("number"===typeof e.max?a=u-(r(u-.1*u,!1)||1):u=a+(r(a+.1*a,!1)||1)),[a,u]}},t.offsetScale=o,t.niceScale=l,t.configureScales=function(e,i,o){const l=o.scales?{...o.scales}:{};return Object.keys(o.scales).length||(l.y={}),Object.entries(l).forEach((([l,r])=>{i[l]=i[l]||{};const a=i[l];if(l===s.DEFAULT_X_SCALE)return;const u="number"===typeof r.min?r.min:null,c="number"===typeof r.max?r.max:null;if(null!==c&&null!==u){if(c<=u)throw new Error("Invalid scale config. .max should be > .min");a.range=[u,c]}const d="logarithmic"===r.type;if(d)return a.distr=n.Scale.Distr.Logarithmic,void(a.range=(0,t.getScaleRange)(r,o));e.isEmpty?a.range=[null===u?d?1:0:u,null===c?100:c]:a.range=(0,t.getScaleRange)(r,o)})),i.x||(i.x={time:!0}),i}},28265:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.overrideSeriesInUpdate=t.configureSeries=void 0;const l=o(i(46976)),r=i(50497),a=i(20500),u=i(67903),c=i(88274);function d(e,t,i,s){if(void 0!==e[i])return e[i];const n=t.config.chart.series;return n&&i in n?n[i]:s}t.configureSeries=function(e,t,i){var s,n;const o=d(t,e,"type","line"),h={...t,type:o,show:null===(s=t.show)||void 0===s||s,name:t.name||`${e.utils.i18n("series")} ${i+1}`,color:t.color?e.utils.colors.parse(t.color):e.utils.theme.DEFAULT_LINE_COLOR,id:(void 0===t.id?t.name:String(t.id))||(0,r.genId)(),$c:t.data,scale:t.scale||l.DEFAULT_Y_SCALE,count:0,sum:0,avg:0,getFocusedColor:a.getFocusedColor};h.points=h.points||{};const f=(0,a.getSerieFocusColors)(e,"color");return"area"===h.type&&(h.lineColor=e.utils.colors.parse(d(t,e,"lineColor",l.SERIE_AREA_BORDER_COLOR)),h.lineWidth=d(t,e,"lineWidth",l.SERIE_AREA_BORDER_WIDTH),h.fill=f,h.stroke=(0,a.getSerieFocusColors)(e,"lineColor"),h.width=h.lineWidth,h.points.show=u.drawMarkersIfRequired,h.interpolation=d(t,e,"interpolation","linear"),h.spanGaps=d(t,e,"spanGaps",!1)),"line"===h.type&&(h.width=d(t,e,"width",l.SERIE_LINE_WIDTH),h.width=h.width||l.SERIE_LINE_WIDTH,h.stroke=f,h.points.show=u.drawMarkersIfRequired,h.interpolation=d(t,e,"interpolation","linear"),h.spanGaps=d(t,e,"spanGaps",!1)),"column"===h.type&&(h.stroke=f,h.fill=f,h.points.show=!1,h.width=null!==(n=h.width)&&void 0!==n?n:0,h.renderOptions=d(h,e,"renderOptions")),"dots"===h.type&&(h.stroke=()=>h.color,h.fill=f,h.width=2,h.pointsSize=d(h,e,"pointsSize",l.DEFAULT_POINT_SIZE)),h.paths=c.pathsRenderer,h};t.overrideSeriesInUpdate=(e,t)=>{var i,s,n,o,l,r,a,u,c,d,h,f;e.$c=null!==(i=t.$c)&&void 0!==i?i:e.$c,e.show=null!==(s=t.show)&&void 0!==s?s:e.show,e.data=null!==(n=t.data)&&void 0!==n?n:e.data,e.width=null!==(o=t.width)&&void 0!==o?o:e.width,e.pointsSize=null!==(l=t.pointsSize)&&void 0!==l?l:e.pointsSize,e.color=null!==(r=t.color)&&void 0!==r?r:e.color,e.lineColor=null!==(a=t.lineColor)&&void 0!==a?a:e.lineColor,e.lineWidth=null!==(u=t.lineWidth)&&void 0!==u?u:e.lineWidth,e.stroke=null!==(c=t.stroke)&&void 0!==c?c:e.stroke,e.getFocusedColor=null!==(d=t.getFocusedColor)&&void 0!==d?d:e.getFocusedColor,e.formatter=null!==(h=t.formatter)&&void 0!==h?h:e.formatter,e.paths=null!==(f=t.paths)&&void 0!==f?f:e.paths}},48643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Axis=t.Scale=t.DrawOrderKey=void 0,t.DrawOrderKey={Series:"series",Axes:"axes"},t.Scale={Distr:{Linear:1,Ordinal:2,Logarithmic:3,ArcSinh:4,Custom:5}},t.Axis={Side:{Top:0,Right:1,Bottom:2,Left:3},Align:{Right:0,Left:1}}},68724:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,o(i(89353),t),o(i(98190),t);const a=l(i(46976));t.defaults=a;const u=r(i(37100));"undefined"!==typeof window&&Object.assign(window,{Yagr:u.default}),t.default=u.default},23936:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,s,n)}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return n(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useTooltipState=void 0;const r=o(i(59284)),a=l(i(37100));t.default=r.forwardRef((function({id:e,config:t,className:i="",debug:s,onChartLoad:n,onSelect:o,update:l="dynamic"},u){const c=r.useRef(null),d=r.useRef();r.useImperativeHandle(u,(()=>({yagr:()=>d.current,domElement:()=>c.current})));const h=r.useCallback((()=>{if(c.current){t.hooks=t.hooks||{};const e=t.hooks;if(n){const t=e.load||[];t.push((({chart:e,meta:t})=>{n(e,t)})),e.load=t}if(o){const t=e.onSelect||[];t.push((({from:e,to:t})=>o(e,t))),e.onSelect=t}d.current=new a.default(c.current,t)}}),[]);r.useEffect((()=>{var e;t&&(null===(e=d.current)||void 0===e||e.setConfig(t,"hard"===l))}),[t]),r.useEffect((()=>(h(),()=>{var e;null===(e=d.current)||void 0===e||e.dispose(),d.current=void 0})),[]);const f=r.useCallback((e=>{if(d.current&&(e.ctrlKey||e.metaKey)&&e.shiftKey){const e=d.current.toDataUrl().replace("image/png","image/octet-stream"),t=document.createElement("a");t.href=e,t.download=((null===s||void 0===s?void 0:s.filename)||d.current.id)+".png",t.click()}}),[e,d]);return r.createElement("div",{id:e,onClick:f,className:`yagr ${i}`,ref:c})}));t.useTooltipState=(e,t)=>{r.useEffect((()=>{var i;if(!e.current||!t.current)return;const s=t.current,n=e.current.yagr();n&&(null===(i=null===n||void 0===n?void 0:n.plugins)||void 0===i?void 0:i.tooltip)&&(n.plugins.tooltip.on("render",((e,t)=>{s.onChange(t)})),n.plugins.tooltip.on("show",((e,t)=>{s.onChange(t)})),n.plugins.tooltip.on("show",((e,t)=>{s.onChange(t)})))}),[e.current])}},16381:(e,t,i)=>{i.r(t),i.d(t,{default:()=>xs});const s="uplot",n="u-hz",o="u-vt",l="u-title",r="u-wrap",a="u-under",u="u-over",c="u-axis",d="u-off",h="u-select",f="u-cursor-x",p="u-cursor-y",g="u-cursor-pt",m="u-legend",_="u-live",v="u-inline",y="u-series",b="u-marker",w="u-label",E="u-value",S="width",x="height",A="top",T="bottom",O="left",L="right",I="#000",D=I+"0",M="mousemove",k="mousedown",C="mouseup",R="mouseenter",F="mouseleave",P="dblclick",U="change",N="dppxchange",$="--",j="undefined"!=typeof window,X=j?document:null,z=j?window:null,H=j?navigator:null;let Y,B;function V(e,t){if(null!=t){let i=e.classList;!i.contains(t)&&i.add(t)}}function W(e,t){let i=e.classList;i.contains(t)&&i.remove(t)}function G(e,t,i){e.style[t]=i+"px"}function K(e,t,i,s){let n=X.createElement(e);return null!=t&&V(n,t),null!=i&&i.insertBefore(n,s),n}function q(e,t){return K("div",e,t)}const Z=new WeakMap;function J(e,t,i,s,n){let o="translate("+t+"px,"+i+"px)";o!=Z.get(e)&&(e.style.transform=o,Z.set(e,o),t<0||i<0||t>s||i>n?V(e,d):W(e,d))}const Q=new WeakMap;function ee(e,t,i){let s=t+i;s!=Q.get(e)&&(Q.set(e,s),e.style.background=t,e.style.borderColor=i)}const te=new WeakMap;function ie(e,t,i,s){let n=t+""+i;n!=te.get(e)&&(te.set(e,n),e.style.height=i+"px",e.style.width=t+"px",e.style.marginLeft=s?-t/2+"px":0,e.style.marginTop=s?-i/2+"px":0)}const se={passive:!0},ne={...se,capture:!0};function oe(e,t,i,s){t.addEventListener(e,i,s?ne:se)}function le(e,t,i,s){t.removeEventListener(e,i,se)}function re(e,t,i,s){let n;i=i||0;let o=(s=s||t.length-1)<=2147483647;for(;s-i>1;)n=o?i+s>>1:Se((i+s)/2),t[n]<e?i=n:s=n;return e-t[i]<=t[s]-e?i:s}function ae(e,t,i,s){for(let n=1==s?t:i;n>=t&&n<=i;n+=s)if(null!=e[n])return n;return-1}function ue(e,t,i,s){let n=Ie(e),o=Ie(t);e==t&&(-1==n?(e*=i,t/=i):(e/=i,t*=i));let l=10==i?De:Me,r=1==o?Ae:Se,a=(1==n?Se:Ae)(l(Ee(e))),u=r(l(Ee(t))),c=Le(i,a),d=Le(i,u);return 10==i&&(a<0&&(c=Ge(c,-a)),u<0&&(d=Ge(d,-u))),s||2==i?(e=c*n,t=d*o):(e=We(e,c),t=Ve(t,d)),[e,t]}function ce(e,t,i,s){let n=ue(e,t,i,s);return 0==e&&(n[0]=0),0==t&&(n[1]=0),n}j&&function e(){let t=devicePixelRatio;Y!=t&&(Y=t,B&&le(U,B,e),B=matchMedia(`(min-resolution: ${Y-.001}dppx) and (max-resolution: ${Y+.001}dppx)`),oe(U,B,e),z.dispatchEvent(new CustomEvent(N)))}();const de=.1,he={mode:3,pad:de},fe={pad:0,soft:null,mode:0},pe={min:fe,max:fe};function ge(e,t,i,s){return ot(i)?_e(e,t,i):(fe.pad=i,fe.soft=s?0:null,fe.mode=s?3:0,_e(e,t,pe))}function me(e,t){return null==e?t:e}function _e(e,t,i){let s=i.min,n=i.max,o=me(s.pad,0),l=me(n.pad,0),r=me(s.hard,-Re),a=me(n.hard,Re),u=me(s.soft,Re),c=me(n.soft,-Re),d=me(s.mode,0),h=me(n.mode,0),f=t-e,p=De(f),g=Oe(Ee(e),Ee(t)),m=De(g),_=Ee(m-p);(f<1e-24||_>10)&&(f=0,0!=e&&0!=t||(f=1e-24,2==d&&u!=Re&&(o=0),2==h&&c!=-Re&&(l=0)));let v=f||g||1e3,y=De(v),b=Le(10,Se(y)),w=Ge(We(e-v*(0==f?0==e?.1:1:o),b/10),24),E=e>=u&&(1==d||3==d&&w<=u||2==d&&w>=u)?u:Re,S=Oe(r,w<E&&e>=E?E:Te(E,w)),x=Ge(Ve(t+v*(0==f?0==t?.1:1:l),b/10),24),A=t<=c&&(1==h||3==h&&x>=c||2==h&&x<=c)?c:-Re,T=Te(a,x>A&&t<=A?A:Oe(A,x));return S==T&&0==S&&(T=100),[S,T]}const ve=new Intl.NumberFormat(j?H.language:"en-US"),ye=e=>ve.format(e),be=Math,we=be.PI,Ee=be.abs,Se=be.floor,xe=be.round,Ae=be.ceil,Te=be.min,Oe=be.max,Le=be.pow,Ie=be.sign,De=be.log10,Me=be.log2,ke=(e,t=1)=>be.sinh(e)*t,Ce=(e,t=1)=>be.asinh(e/t),Re=1/0;function Fe(e){return 1+(0|De((e^e>>31)-(e>>31)))}function Pe(e,t,i){return Te(Oe(e,t),i)}function Ue(e){return"function"==typeof e?e:()=>e}const Ne=e=>e,$e=(e,t)=>t,je=e=>null,Xe=e=>!0,ze=(e,t)=>e==t,He=/\.\d*?(?=9{6,}|0{6,})/gm,Ye=e=>{if(it(e)||Ke.has(e))return e;const t=`${e}`,i=t.match(He);if(null==i)return e;let s=i[0].length-1;if(-1!=t.indexOf("e-")){let[e,i]=t.split("e");return+`${Ye(e)}e${i}`}return Ge(e,s)};function Be(e,t){return Ye(Ge(Ye(e/t))*t)}function Ve(e,t){return Ye(Ae(Ye(e/t))*t)}function We(e,t){return Ye(Se(Ye(e/t))*t)}function Ge(e,t=0){if(it(e))return e;let i=10**t,s=e*i*(1+Number.EPSILON);return xe(s)/i}const Ke=new Map;function qe(e){return((""+e).split(".")[1]||"").length}function Ze(e,t,i,s){let n=[],o=s.map(qe);for(let l=t;l<i;l++){let t=Ee(l),i=Ge(Le(e,l),t);for(let r=0;r<s.length;r++){let a=10==e?+`${s[r]}e${l}`:s[r]*i,u=(l>=0?0:t)+(l>=o[r]?0:o[r]),c=10==e?a:Ge(a,u);n.push(c),Ke.set(c,u)}}return n}const Je={},Qe=[],et=[null,null],tt=Array.isArray,it=Number.isInteger,st=e=>void 0===e;function nt(e){return"string"==typeof e}function ot(e){let t=!1;if(null!=e){let i=e.constructor;t=null==i||i==Object}return t}function lt(e){return null!=e&&"object"==typeof e}const rt=Object.getPrototypeOf(Uint8Array),at="__proto__";function ut(e,t=ot){let i;if(tt(e)){let s=e.find((e=>null!=e));if(tt(s)||t(s)){i=Array(e.length);for(let s=0;s<e.length;s++)i[s]=ut(e[s],t)}else i=e.slice()}else if(e instanceof rt)i=e.slice();else if(t(e)){i={};for(let s in e)s!=at&&(i[s]=ut(e[s],t))}else i=e;return i}function ct(e){let t=arguments;for(let i=1;i<t.length;i++){let s=t[i];for(let t in s)t!=at&&(ot(e[t])?ct(e[t],ut(s[t])):e[t]=ut(s[t]))}return e}function dt(e,t,i){for(let s,n=0,o=-1;n<t.length;n++){let l=t[n];if(l>o){for(s=l-1;s>=0&&null==e[s];)e[s--]=null;for(s=l+1;s<i&&null==e[s];)e[o=s++]=null}}}const ht="undefined"==typeof queueMicrotask?e=>Promise.resolve().then(e):queueMicrotask;const ft=["January","February","March","April","May","June","July","August","September","October","November","December"],pt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function gt(e){return e.slice(0,3)}const mt=pt.map(gt),_t=ft.map(gt),vt={MMMM:ft,MMM:_t,WWWW:pt,WWW:mt};function yt(e){return(e<10?"0":"")+e}const bt={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,t)=>t.MMMM[e.getMonth()],MMM:(e,t)=>t.MMM[e.getMonth()],MM:e=>yt(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>yt(e.getDate()),D:e=>e.getDate(),WWWW:(e,t)=>t.WWWW[e.getDay()],WWW:(e,t)=>t.WWW[e.getDay()],HH:e=>yt(e.getHours()),H:e=>e.getHours(),h:e=>{let t=e.getHours();return 0==t?12:t>12?t-12:t},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>yt(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>yt(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>{return((t=e.getMilliseconds())<10?"00":t<100?"0":"")+t;var t}};function wt(e,t){t=t||vt;let i,s=[],n=/\{([a-z]+)\}|[^{]+/gi;for(;i=n.exec(e);)s.push("{"==i[0][0]?bt[i[1]]:i[0]);return e=>{let i="";for(let n=0;n<s.length;n++)i+="string"==typeof s[n]?s[n]:s[n](e,t);return i}}const Et=(new Intl.DateTimeFormat).resolvedOptions().timeZone;const St=e=>e%1==0,xt=[1,2,2.5,5],At=Ze(10,-32,0,xt),Tt=Ze(10,0,32,xt),Ot=Tt.filter(St),Lt=At.concat(Tt),It="{YYYY}",Dt="\n"+It,Mt="{M}/{D}",kt="\n"+Mt,Ct=kt+"/{YY}",Rt="{aa}",Ft="{h}:{mm}"+Rt,Pt="\n"+Ft,Ut=":{ss}",Nt=null;function $t(e){let t=1e3*e,i=60*t,s=60*i,n=24*s,o=30*n,l=365*n;return[(1==e?Ze(10,0,3,xt).filter(St):Ze(10,-3,0,xt)).concat([t,5*t,10*t,15*t,30*t,i,5*i,10*i,15*i,30*i,s,2*s,3*s,4*s,6*s,8*s,12*s,n,2*n,3*n,4*n,5*n,6*n,7*n,8*n,9*n,10*n,15*n,o,2*o,3*o,4*o,6*o,l,2*l,5*l,10*l,25*l,50*l,100*l]),[[l,It,Nt,Nt,Nt,Nt,Nt,Nt,1],[28*n,"{MMM}",Dt,Nt,Nt,Nt,Nt,Nt,1],[n,Mt,Dt,Nt,Nt,Nt,Nt,Nt,1],[s,"{h}"+Rt,Ct,Nt,kt,Nt,Nt,Nt,1],[i,Ft,Ct,Nt,kt,Nt,Nt,Nt,1],[t,Ut,Ct+" "+Ft,Nt,kt+" "+Ft,Nt,Pt,Nt,1],[e,Ut+".{fff}",Ct+" "+Ft,Nt,kt+" "+Ft,Nt,Pt,Nt,1]],function(t){return(r,a,u,c,d,h)=>{let f=[],p=d>=l,g=d>=o&&d<l,m=t(u),_=Ge(m*e,3),v=Gt(m.getFullYear(),p?0:m.getMonth(),g||p?1:m.getDate()),y=Ge(v*e,3);if(g||p){let i=g?d/o:0,s=p?d/l:0,n=_==y?_:Ge(Gt(v.getFullYear()+s,v.getMonth()+i,1)*e,3),r=new Date(xe(n/e)),a=r.getFullYear(),u=r.getMonth();for(let o=0;n<=c;o++){let l=Gt(a+s*o,u+i*o,1),r=l-t(Ge(l*e,3));n=Ge((+l+r)*e,3),n<=c&&f.push(n)}}else{let o=d>=n?n:d,l=y+(Se(u)-Se(_))+Ve(_-y,o);f.push(l);let p=t(l),g=p.getHours()+p.getMinutes()/i+p.getSeconds()/s,m=d/s,v=h/r.axes[a]._space;for(;l=Ge(l+d,1==e?0:3),!(l>c);)if(m>1){let e=Se(Ge(g+m,6))%24,i=t(l).getHours()-e;i>1&&(i=-1),l-=i*s,g=(g+m)%24,Ge((l-f[f.length-1])/d,3)*v>=.7&&f.push(l)}else f.push(l)}return f}}]}const[jt,Xt,zt]=$t(1),[Ht,Yt,Bt]=$t(.001);function Vt(e,t){return e.map((e=>e.map(((i,s)=>0==s||8==s||null==i?i:t(1==s||0==e[8]?i:e[1]+i)))))}function Wt(e,t){return(i,s,n,o,l)=>{let r,a,u,c,d,h,f=t.find((e=>l>=e[0]))||t[t.length-1];return s.map((t=>{let i=e(t),s=i.getFullYear(),n=i.getMonth(),o=i.getDate(),l=i.getHours(),p=i.getMinutes(),g=i.getSeconds(),m=s!=r&&f[2]||n!=a&&f[3]||o!=u&&f[4]||l!=c&&f[5]||p!=d&&f[6]||g!=h&&f[7]||f[1];return r=s,a=n,u=o,c=l,d=p,h=g,m(i)}))}}function Gt(e,t,i){return new Date(e,t,i)}function Kt(e,t){return t(e)}Ze(2,-53,53,[1]);const qt="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Zt(e,t){return(i,s,n,o)=>null==o?$:t(e(s))}const Jt={show:!0,live:!0,isolate:!1,mount:()=>{},markers:{show:!0,width:2,stroke:function(e,t){let i=e.series[t];return i.width?i.stroke(e,t):i.points.width?i.points.stroke(e,t):null},fill:function(e,t){return e.series[t].fill(e,t)},dash:"solid"},idx:null,idxs:null,values:[]};const Qt=[0,0];function ei(e,t,i,s=!0){return e=>{0==e.button&&(!s||e.target==t)&&i(e)}}function ti(e,t,i,s=!0){return e=>{(!s||e.target==t)&&i(e)}}const ii={show:!0,x:!0,y:!0,lock:!1,move:function(e,t,i){return Qt[0]=t,Qt[1]=i,Qt},points:{one:!1,show:function(e,t){let i=e.cursor.points,s=q(),n=i.size(e,t);G(s,S,n),G(s,x,n);let o=n/-2;G(s,"marginLeft",o),G(s,"marginTop",o);let l=i.width(e,t,n);return l&&G(s,"borderWidth",l),s},size:function(e,t){return e.series[t].points.size},width:0,stroke:function(e,t){let i=e.series[t].points;return i._stroke||i._fill},fill:function(e,t){let i=e.series[t].points;return i._fill||i._stroke}},bind:{mousedown:ei,mouseup:ei,click:ei,dblclick:ei,mousemove:ti,mouseleave:ti,mouseenter:ti},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,t)=>{t.stopPropagation(),t.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,t,i,s,n)=>s-n,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},si={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ni=ct({},si,{filter:$e}),oi=ct({},ni,{size:10}),li=ct({},si,{show:!1}),ri='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',ai="bold "+ri,ui={show:!0,scale:"x",stroke:I,space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:ai,side:2,grid:ni,ticks:oi,border:li,font:ri,lineGap:1.5,rotate:0},ci="Value",di="Time",hi={show:!0,scale:"x",auto:!1,sorted:1,min:Re,max:-Re,idxs:[]};function fi(e,t,i,s,n){return t.map((e=>null==e?"":ye(e)))}function pi(e,t,i,s,n,o,l){let r=[],a=Ke.get(n)||0;for(let u=i=l?i:Ge(Ve(i,n),a);u<=s;u=Ge(u+n,a))r.push(Object.is(u,-0)?0:u);return r}function gi(e,t,i,s,n,o,l){const r=[],a=e.scales[e.axes[t].scale].log,u=Se((10==a?De:Me)(i));n=Le(a,u),10==a&&(n=Lt[re(n,Lt)]);let c=i,d=n*a;10==a&&(d=Lt[re(d,Lt)]);do{r.push(c),c+=n,10!=a||Ke.has(c)||(c=Ge(c,Ke.get(n))),c>=d&&(d=(n=c)*a,10==a&&(d=Lt[re(d,Lt)]))}while(c<=s);return r}function mi(e,t,i,s,n,o,l){let r=e.scales[e.axes[t].scale].asinh,a=s>r?gi(e,t,Oe(r,i),s,n):[r],u=s>=0&&i<=0?[0]:[];return(i<-r?gi(e,t,Oe(r,-s),-i,n):[r]).reverse().map((e=>-e)).concat(u,a)}const _i=/./,vi=/[12357]/,yi=/[125]/,bi=/1/,wi=(e,t,i,s)=>e.map(((e,n)=>4==t&&0==e||n%s==0&&i.test(e.toExponential()[e<0?1:0])?e:null));function Ei(e,t,i,s,n){let o=e.axes[i],l=o.scale,r=e.scales[l],a=e.valToPos,u=o._space,c=a(10,l),d=a(9,l)-c>=u?_i:a(7,l)-c>=u?vi:a(5,l)-c>=u?yi:bi;if(d==bi){let e=Ee(a(1,l)-c);if(e<u)return wi(t.slice().reverse(),r.distr,d,Ae(u/e)).reverse()}return wi(t,r.distr,d,1)}function Si(e,t,i,s,n){let o=e.axes[i],l=o.scale,r=o._space,a=e.valToPos,u=Ee(a(1,l)-a(2,l));return u<r?wi(t.slice().reverse(),3,_i,Ae(r/u)).reverse():t}function xi(e,t,i,s){return null==s?$:null==t?"":ye(t)}const Ai={show:!0,scale:"y",stroke:I,space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:ai,side:3,grid:ni,ticks:oi,border:li,font:ri,lineGap:1.5,rotate:0};const Ti={scale:null,auto:!0,sorted:0,min:Re,max:-Re},Oi=(e,t,i,s,n)=>n,Li={show:!0,auto:!0,sorted:0,gaps:Oi,alpha:1,facets:[ct({},Ti,{scale:"x"}),ct({},Ti,{scale:"y"})]},Ii={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Oi,alpha:1,points:{show:function(e,t){let{scale:i,idxs:s}=e.series[0],n=e._data[0],o=e.valToPos(n[s[0]],i,!0),l=e.valToPos(n[s[1]],i,!0),r=Ee(l-o)/(e.series[t].points.space*Y);return s[1]-s[0]<=r},filter:null},values:null,min:Re,max:-Re,idxs:[],path:null,clip:null};function Di(e,t,i,s,n){return i/10}const Mi={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},ki=ct({},Mi,{time:!1,ori:1}),Ci={};function Ri(e,t){let i=Ci[e];return i||(i={key:e,plots:[],sub(e){i.plots.push(e)},unsub(e){i.plots=i.plots.filter((t=>t!=e))},pub(e,t,s,n,o,l,r){for(let a=0;a<i.plots.length;a++)i.plots[a]!=t&&i.plots[a].pub(e,t,s,n,o,l,r)}},null!=e&&(Ci[e]=i)),i}const Fi=1,Pi=2;function Ui(e,t,i){const s=e.mode,n=e.series[t],o=2==s?e._data[t]:e._data,l=e.scales,r=e.bbox;let a=o[0],u=2==s?o[1]:o[t],c=2==s?l[n.facets[0].scale]:l[e.series[0].scale],d=2==s?l[n.facets[1].scale]:l[n.scale],h=r.left,f=r.top,p=r.width,g=r.height,m=e.valToPosH,_=e.valToPosV;return 0==c.ori?i(n,a,u,c,d,m,_,h,f,p,g,Bi,Wi,Ki,Zi,Qi):i(n,a,u,c,d,_,m,f,h,g,p,Vi,Gi,qi,Ji,es)}function Ni(e,t){let i=0,s=0,n=me(e.bands,Qe);for(let o=0;o<n.length;o++){let e=n[o];e.series[0]==t?i=e.dir:e.series[1]==t&&(1==e.dir?s|=1:s|=2)}return[i,1==s?-1:2==s?1:3==s?2:0]}function $i(e,t,i,s,n){let o=e.mode,l=e.series[t],r=2==o?l.facets[1].scale:l.scale,a=e.scales[r];return-1==n?a.min:1==n?a.max:3==a.distr?1==a.dir?a.min:a.max:0}function ji(e,t,i,s,n,o){return Ui(e,t,((e,t,l,r,a,u,c,d,h,f,p)=>{let g=e.pxRound;const m=r.dir*(0==r.ori?1:-1),_=0==r.ori?Wi:Gi;let v,y;1==m?(v=i,y=s):(v=s,y=i);let b=g(u(t[v],r,f,d)),w=g(c(l[v],a,p,h)),E=g(u(t[y],r,f,d)),S=g(c(1==o?a.max:a.min,a,p,h)),x=new Path2D(n);return _(x,E,S),_(x,b,S),_(x,b,w),x}))}function Xi(e,t,i,s,n,o){let l=null;if(e.length>0){l=new Path2D;const r=0==t?Ki:qi;let a=i;for(let t=0;t<e.length;t++){let i=e[t];if(i[1]>i[0]){let e=i[0]-a;e>0&&r(l,a,s,e,s+o),a=i[1]}}let u=i+n-a,c=10;u>0&&r(l,a,s-c/2,u,s+o+c)}return l}function zi(e,t,i,s,n,o,l){let r=[],a=e.length;for(let u=1==n?i:s;u>=i&&u<=s;u+=n){if(null===t[u]){let c=u,d=u;if(1==n)for(;++u<=s&&null===t[u];)d=u;else for(;--u>=i&&null===t[u];)d=u;let h=o(e[c]),f=d==c?h:o(e[d]),p=c-n;h=l<=0&&p>=0&&p<a?o(e[p]):h;let g=d+n;f=l>=0&&g>=0&&g<a?o(e[g]):f,f>=h&&r.push([h,f])}}return r}function Hi(e){return 0==e?Ne:1==e?xe:t=>Be(t,e)}function Yi(e){let t=0==e?Bi:Vi,i=0==e?(e,t,i,s,n,o)=>{e.arcTo(t,i,s,n,o)}:(e,t,i,s,n,o)=>{e.arcTo(i,t,n,s,o)},s=0==e?(e,t,i,s,n)=>{e.rect(t,i,s,n)}:(e,t,i,s,n)=>{e.rect(i,t,n,s)};return(e,n,o,l,r,a=0,u=0)=>{0==a&&0==u?s(e,n,o,l,r):(a=Te(a,l/2,r/2),u=Te(u,l/2,r/2),t(e,n+a,o),i(e,n+l,o,n+l,o+r,a),i(e,n+l,o+r,n,o+r,u),i(e,n,o+r,n,o,u),i(e,n,o,n+l,o,a),e.closePath())}}const Bi=(e,t,i)=>{e.moveTo(t,i)},Vi=(e,t,i)=>{e.moveTo(i,t)},Wi=(e,t,i)=>{e.lineTo(t,i)},Gi=(e,t,i)=>{e.lineTo(i,t)},Ki=Yi(0),qi=Yi(1),Zi=(e,t,i,s,n,o)=>{e.arc(t,i,s,n,o)},Ji=(e,t,i,s,n,o)=>{e.arc(i,t,s,n,o)},Qi=(e,t,i,s,n,o,l)=>{e.bezierCurveTo(t,i,s,n,o,l)},es=(e,t,i,s,n,o,l)=>{e.bezierCurveTo(i,t,n,s,l,o)};function ts(e){return(e,t,i,s,n)=>Ui(e,t,((t,o,l,r,a,u,c,d,h,f,p)=>{let g,m,{pxRound:_,points:v}=t;0==r.ori?(g=Bi,m=Zi):(g=Vi,m=Ji);const y=Ge(v.width*Y,3);let b=(v.size-v.width)/2*Y,w=Ge(2*b,3),E=new Path2D,S=new Path2D,{left:x,top:A,width:T,height:O}=e.bbox;Ki(S,x-w,A-w,T+2*w,O+2*w);const L=e=>{if(null!=l[e]){let t=_(u(o[e],r,f,d)),i=_(c(l[e],a,p,h));g(E,t+b,i),m(E,t,i,b,0,2*we)}};if(n)n.forEach(L);else for(let e=i;e<=s;e++)L(e);return{stroke:y>0?E:null,fill:E,clip:S,flags:Fi|Pi}}))}function is(e){return(t,i,s,n,o,l)=>{s!=n&&(o!=s&&l!=s&&e(t,i,s),o!=n&&l!=n&&e(t,i,n),e(t,i,l))}}const ss=is(Wi),ns=is(Gi);function os(e){const t=me(e?.alignGaps,0);return(e,i,s,n)=>Ui(e,i,((o,l,r,a,u,c,d,h,f,p,g)=>{let m,_,v=o.pxRound,y=e=>v(c(e,a,p,h)),b=e=>v(d(e,u,g,f));0==a.ori?(m=Wi,_=ss):(m=Gi,_=ns);const w=a.dir*(0==a.ori?1:-1),E={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Fi},S=E.stroke;let x,A,T,O=Re,L=-Re,I=y(l[1==w?s:n]),D=ae(r,s,n,1*w),M=ae(r,s,n,-1*w),k=y(l[D]),C=y(l[M]),R=!1;for(let e=1==w?s:n;e>=s&&e<=n;e+=w){let t=y(l[e]),i=r[e];t==I?null!=i?(A=b(i),O==Re&&(m(S,t,A),x=A),O=Te(A,O),L=Oe(A,L)):null===i&&(R=!0):(O!=Re&&(_(S,I,O,L,x,A),T=I),null!=i?(A=b(i),m(S,t,A),O=L=x=A):(O=Re,L=-Re,null===i&&(R=!0)),I=t)}O!=Re&&O!=L&&T!=I&&_(S,I,O,L,x,A);let[F,P]=Ni(e,i);if(null!=o.fill||0!=F){let t=E.fill=new Path2D(S),s=b(o.fillTo(e,i,o.min,o.max,F));m(t,C,s),m(t,k,s)}if(!o.spanGaps){let u=[];R&&u.push(...zi(l,r,s,n,w,y,t)),E.gaps=u=o.gaps(e,i,s,n,u),E.clip=Xi(u,a.ori,h,f,p,g)}return 0!=P&&(E.band=2==P?[ji(e,i,s,n,S,-1),ji(e,i,s,n,S,1)]:ji(e,i,s,n,S,P)),E}))}function ls(e,t,i,s,n,o,l=Re){if(e.length>1){let r=null;for(let a=0,u=1/0;a<e.length;a++)if(void 0!==t[a]){if(null!=r){let t=Ee(e[a]-e[r]);t<u&&(u=t,l=Ee(i(e[a],s,n,o)-i(e[r],s,n,o)))}r=a}}return l}function rs(e,t,i,s,n,o){const l=e.length;if(l<2)return null;const r=new Path2D;if(i(r,e[0],t[0]),2==l)s(r,e[1],t[1]);else{let i=Array(l),s=Array(l-1),o=Array(l-1),a=Array(l-1);for(let n=0;n<l-1;n++)o[n]=t[n+1]-t[n],a[n]=e[n+1]-e[n],s[n]=o[n]/a[n];i[0]=s[0];for(let e=1;e<l-1;e++)0===s[e]||0===s[e-1]||s[e-1]>0!==s[e]>0?i[e]=0:(i[e]=3*(a[e-1]+a[e])/((2*a[e]+a[e-1])/s[e-1]+(a[e]+2*a[e-1])/s[e]),isFinite(i[e])||(i[e]=0));i[l-1]=s[l-2];for(let u=0;u<l-1;u++)n(r,e[u]+a[u]/3,t[u]+i[u]*a[u]/3,e[u+1]-a[u]/3,t[u+1]-i[u+1]*a[u]/3,e[u+1],t[u+1])}return r}const as=new Set;function us(){for(let e of as)e.syncRect(!0)}j&&(oe("resize",z,us),oe("scroll",z,us,!0),oe(N,z,(()=>{xs.pxRatio=Y})));const cs=os(),ds=ts();function hs(e,t,i,s){return(s?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map(((e,s)=>fs(e,s,t,i)))}function fs(e,t,i,s){return ct({},0==t?i:s,e)}function ps(e,t,i){return null==t?et:[t,i]}const gs=ps;function ms(e,t,i){return null==t?et:ge(t,i,de,!0)}function _s(e,t,i,s){return null==t?et:ue(t,i,e.scales[s].log,!1)}const vs=_s;function ys(e,t,i,s){return null==t?et:ce(t,i,e.scales[s].log,!1)}const bs=ys;function ws(e,t,i,s,n){let o=Oe(Fe(e),Fe(t)),l=t-e,r=re(n/s*l,i);do{let e=i[r],t=s*e/l;if(t>=n&&o+(e<5?Ke.get(e):0)<=17)return[e,t]}while(++r<i.length);return[0,0]}function Es(e){let t,i;return[e=e.replace(/(\d+)px/,((e,s)=>(t=xe((i=+s)*Y))+"px")),t,i]}function Ss(e){e.show&&[e.font,e.labelFont].forEach((e=>{let t=Ge(e[2]*Y,1);e[0]=e[0].replace(/[0-9.]+px/,t+"px"),e[1]=t}))}function xs(e,t,i){const I={mode:me(e.mode,1)},U=I.mode;function j(e,t){return((3==t.distr?De(e>0?e:t.clamp(I,e,t.min,t.max,t.key)):4==t.distr?Ce(e,t.asinh):100==t.distr?t.fwd(e):e)-t._min)/(t._max-t._min)}function H(e,t,i,s){let n=j(e,t);return s+i*(-1==t.dir?1-n:n)}function B(e,t,i,s){let n=j(e,t);return s+i*(-1==t.dir?n:1-n)}function Z(e,t,i,s){return 0==t.ori?H(e,t,i,s):B(e,t,i,s)}I.valToPosH=H,I.valToPosV=B;let Q=!1;I.status=0;const te=I.root=q(s);if(null!=e.id&&(te.id=e.id),V(te,e.class),e.title){q(l,te).textContent=e.title}const se=K("canvas"),ne=I.ctx=se.getContext("2d"),ae=q(r,te);oe("click",ae,(e=>{if(e.target===pe){(an!=nn||un!=on)&&vn.click(I,e)}}),!0);const fe=I.under=q(a,ae);ae.appendChild(se);const pe=I.over=q(u,ae),_e=+me((e=ut(e)).pxAlign,1),ve=Hi(_e);(e.plugins||[]).forEach((t=>{t.opts&&(e=t.opts(I,e)||e)}));const ye=e.ms||.001,be=I.series=1==U?hs(e.series||[],hi,Ii,!1):(Se=e.series||[null],Ie=Li,Se.map(((e,t)=>0==t?{}:ct({},Ie,e))));var Se,Ie;const Me=I.axes=hs(e.axes||[],ui,Ai,!0),Fe=I.scales={},Ne=I.bands=e.bands||[];Ne.forEach((e=>{e.fill=Ue(e.fill||null),e.dir=me(e.dir,-1)}));const He=2==U?be[1].facets[0].scale:be[0].scale,Ye={axes:function(){for(let e=0;e<Me.length;e++){let t=Me[e];if(!t.show||!t._show)continue;let i,s,n=t.side,o=n%2,l=t.stroke(I,e),r=0==n||3==n?-1:1;if(t.label){let e=t.labelGap*r,a=xe((t._lpos+e)*Y);Ns(t.labelFont[0],l,"center",2==n?A:T),ne.save(),1==o?(i=s=0,ne.translate(a,xe(_i+yi/2)),ne.rotate((3==n?-we:we)/2)):(i=xe(ai+vi/2),s=a),ne.fillText(t.label,i,s),ne.restore()}let[a,u]=t._found;if(0==u)continue;let c=Fe[t.scale],d=0==o?vi:yi,h=0==o?ai:_i,f=xe(t.gap*Y),p=t._splits,g=2==c.distr?p.map((e=>Cs[e])):p,m=2==c.distr?Cs[p[1]]-Cs[p[0]]:a,_=t.ticks,v=t.border,y=_.show?xe(_.size*Y):0,b=t._rotate*-we/180,w=ve(t._pos*Y),E=w+(y+f)*r;s=0==o?E:0,i=1==o?E:0,Ns(t.font[0],l,1==t.align?O:2==t.align?L:b>0?O:b<0?L:0==o?"center":3==n?L:O,b||1==o?"middle":2==n?A:T);let S=t.font[1]*t.lineGap,x=p.map((e=>ve(Z(e,c,d,h)))),D=t._values;for(let e=0;e<D.length;e++){let t=D[e];if(null!=t){0==o?i=x[e]:s=x[e],t=""+t;let n=-1==t.indexOf("\n")?[t]:t.split(/\n/gm);for(let e=0;e<n.length;e++){let t=n[e];b?(ne.save(),ne.translate(i,s+e*S),ne.rotate(b),ne.fillText(t,0,0),ne.restore()):ne.fillText(t,i,s+e*S)}}}_.show&&Ws(x,_.filter(I,g,e,u,m),o,n,w,y,Ge(_.width*Y,3),_.stroke(I,e),_.dash,_.cap);let M=t.grid;M.show&&Ws(x,M.filter(I,g,e,u,m),o,0==o?2:1,0==o?_i:ai,0==o?yi:vi,Ge(M.width*Y,3),M.stroke(I,e),M.dash,M.cap),v.show&&Ws([w],[1],0==o?1:0,0==o?1:2,1==o?_i:ai,1==o?yi:vi,Ge(v.width*Y,3),v.stroke(I,e),v.dash,v.cap)}eo("drawAxes")},series:function(){ns>0&&(be.forEach(((e,i)=>{if(i>0&&e.show&&(Xs(i,!1),Xs(i,!0),null==e._paths)){ks!=e.alpha&&(ne.globalAlpha=ks=e.alpha);let s=2==U?[0,t[i][0].length-1]:function(e){let t=Pe(os-1,0,ns-1),i=Pe(ls+1,0,ns-1);for(;null==e[t]&&t>0;)t--;for(;null==e[i]&&i<ns-1;)i++;return[t,i]}(t[i]);e._paths=e.paths(I,i,s[0],s[1]),1!=ks&&(ne.globalAlpha=ks=1)}})),be.forEach(((e,t)=>{if(t>0&&e.show){ks!=e.alpha&&(ne.globalAlpha=ks=e.alpha),null!=e._paths&&zs(t,!1);{let i=null!=e._paths?e._paths.gaps:null,s=e.points.show(I,t,os,ls,i),n=e.points.filter(I,t,s,i);(s||n)&&(e.points._paths=e.points.paths(I,t,os,ls,n),zs(t,!0))}1!=ks&&(ne.globalAlpha=ks=1),eo("drawSeries",t)}})))}},Ve=(e.drawOrder||["axes","series"]).map((e=>Ye[e]));function We(t){let i=Fe[t];if(null==i){let s=(e.scales||Je)[t]||Je;if(null!=s.from)We(s.from),Fe[t]=ct({},Fe[s.from],s,{key:t});else{i=Fe[t]=ct({},t==He?Mi:ki,s),i.key=t;let e=i.time,n=i.range,o=tt(n);if((t!=He||2==U&&!e)&&(!o||null!=n[0]&&null!=n[1]||(n={min:null==n[0]?he:{mode:1,hard:n[0],soft:n[0]},max:null==n[1]?he:{mode:1,hard:n[1],soft:n[1]}},o=!1),!o&&ot(n))){let e=n;n=(t,i,s)=>null==i?et:ge(i,s,e)}i.range=Ue(n||(e?gs:t==He?3==i.distr?vs:4==i.distr?bs:ps:3==i.distr?_s:4==i.distr?ys:ms)),i.auto=Ue(!o&&i.auto),i.clamp=Ue(i.clamp||Di),i._min=i._max=null}}}We("x"),We("y"),1==U&&be.forEach((e=>{We(e.scale)})),Me.forEach((e=>{We(e.scale)}));for(let s in e.scales)We(s);const Ze=Fe[He],it=Ze.distr;let rt,at;0==Ze.ori?(V(te,n),rt=H,at=B):(V(te,o),rt=B,at=H);const dt={};for(let s in Fe){let e=Fe[s];null==e.min&&null==e.max||(dt[s]={min:e.min,max:e.max},e.min=e.max=null)}const ft=e.tzDate||(e=>new Date(xe(e/ye))),pt=e.fmtDate||wt,gt=1==ye?zt(ft):Bt(ft),mt=Wt(ft,Vt(1==ye?Xt:Yt,pt)),_t=Zt(ft,Kt(qt,pt)),vt=[],yt=I.legend=ct({},Jt,e.legend),bt=yt.show,Et=yt.markers;let St,xt,At;yt.idxs=vt,Et.width=Ue(Et.width),Et.dash=Ue(Et.dash),Et.stroke=Ue(Et.stroke),Et.fill=Ue(Et.fill);let Tt,It=[],Dt=[],Mt=!1,kt={};if(yt.live){const e=be[1]?be[1].values:null;Mt=null!=e,Tt=Mt?e(I,1,0):{_:0};for(let t in Tt)kt[t]=$}if(bt)if(St=K("table",m,te),At=K("tbody",null,St),yt.mount(I,St),Mt){xt=K("thead",null,St,At);let e=K("tr",null,xt);for(var Ct in K("th",null,e),Tt)K("th",w,e).textContent=Ct}else V(St,v),yt.live&&V(St,_);const Rt={show:!0},Ft={show:!1};const Pt=new Map;function Ut(e,t,i,s=!0){const n=Pt.get(t)||{},o=zi.bind[e](I,t,i,s);o&&(oe(e,t,n[e]=o),Pt.set(t,n))}function Nt(e,t,i){const s=Pt.get(t)||{};for(let n in s)null!=e&&n!=e||(le(n,t,s[n]),delete s[n]);null==e&&Pt.delete(t)}let $t=0,Gt=0,Qt=0,ei=0,ti=0,si=0,ni=ti,oi=si,li=Qt,ri=ei,ai=0,_i=0,vi=0,yi=0;I.bbox={};let bi=!1,wi=!1,Ti=!1,Oi=!1,Ci=!1,Ui=!1;function Ni(e,t,i){(i||e!=I.width||t!=I.height)&&ji(e,t),qs(!1),Ti=!0,wi=!0,pn()}function ji(e,t){I.width=$t=Qt=e,I.height=Gt=ei=t,ti=si=0,function(){let e=!1,t=!1,i=!1,s=!1;Me.forEach(((n,o)=>{if(n.show&&n._show){let{side:o,_size:l}=n,r=o%2,a=l+(null!=n.label?n.labelSize:0);a>0&&(r?(Qt-=a,3==o?(ti+=a,s=!0):i=!0):(ei-=a,0==o?(si+=a,e=!0):t=!0))}})),es[0]=e,es[1]=i,es[2]=t,es[3]=s,Qt-=ss[1]+ss[3],ti+=ss[3],ei-=ss[2]+ss[0],si+=ss[0]}(),function(){let e=ti+Qt,t=si+ei,i=ti,s=si;function n(n,o){switch(n){case 1:return e+=o,e-o;case 2:return t+=o,t-o;case 3:return i-=o,i+o;case 0:return s-=o,s+o}}Me.forEach(((e,t)=>{if(e.show&&e._show){let t=e.side;e._pos=n(t,e._size),null!=e.label&&(e._lpos=n(t,e.labelSize))}}))}();let i=I.bbox;ai=i.left=Be(ti*Y,.5),_i=i.top=Be(si*Y,.5),vi=i.width=Be(Qt*Y,.5),yi=i.height=Be(ei*Y,.5)}const Xi=3;I.setSize=function({width:e,height:t}){Ni(e,t)};const zi=I.cursor=ct({},ii,{drag:{y:2==U}},e.cursor);if(null==zi.dataIdx){let e=zi.hover,i=e.skip=new Set(e.skip??[]);i.add(void 0);let s=e.prox=Ue(e.prox),n=e.bias??=0;zi.dataIdx=(e,o,l,r)=>{if(0==o)return l;let a=l,u=s(e,o,l,r)??Re,c=u>=0&&u<Re,d=0==Ze.ori?Qt:ei,h=zi.left,f=t[0],p=t[o];if(i.has(p[l])){a=null;let e,t=null,s=null;if(0==n||-1==n)for(e=l;null==t&&e-- >0;)i.has(p[e])||(t=e);if(0==n||1==n)for(e=l;null==s&&e++<p.length;)i.has(p[e])||(s=e);if(null!=t||null!=s)if(c){let e=h-(null==t?-1/0:rt(f[t],Ze,d,0)),i=(null==s?1/0:rt(f[s],Ze,d,0))-h;e<=i?e<=u&&(a=t):i<=u&&(a=s)}else a=null==s?t:null==t?s:l-t<=s-l?t:s}else if(c){Ee(h-rt(f[l],Ze,d,0))>u&&(a=null)}return a}}const Yi=e=>{zi.event=e};zi.idxs=vt,zi._lock=!1;let Bi=zi.points;Bi.show=Ue(Bi.show),Bi.size=Ue(Bi.size),Bi.stroke=Ue(Bi.stroke),Bi.width=Ue(Bi.width),Bi.fill=Ue(Bi.fill);const Vi=I.focus=ct({},e.focus||{alpha:.3},zi.focus),Wi=Vi.prox>=0,Gi=Wi&&Bi.one;let Ki=[],qi=[],Zi=[];function Ji(e,t){let i=Bi.show(I,t);if(i)return V(i,g),V(i,e.class),J(i,-10,-10,Qt,ei),pe.insertBefore(i,Ki[t]),i}function Qi(e,t){if(1==U||t>0){let t=1==U&&Fe[e.scale].time,i=e.value;e.value=t?nt(i)?Zt(ft,Kt(i,pt)):i||_t:i||xi,e.label=e.label||(t?di:ci)}if(Gi||t>0){e.width=null==e.width?1:e.width,e.paths=e.paths||cs||je,e.fillTo=Ue(e.fillTo||$i),e.pxAlign=+me(e.pxAlign,_e),e.pxRound=Hi(e.pxAlign),e.stroke=Ue(e.stroke||null),e.fill=Ue(e.fill||null),e._stroke=e._fill=e._paths=e._focus=null;let t=Ge((3+2*(Oe(1,e.width)||1))*1,3),i=e.points=ct({},{size:t,width:Oe(1,.2*t),stroke:e.stroke,space:2*t,paths:ds,_stroke:null,_fill:null},e.points);i.show=Ue(i.show),i.filter=Ue(i.filter),i.fill=Ue(i.fill),i.stroke=Ue(i.stroke),i.paths=Ue(i.paths),i.pxAlign=e.pxAlign}if(bt){let i=function(e,t){if(0==t&&(Mt||!yt.live||2==U))return et;let i=[],s=K("tr",y,At,At.childNodes[t]);V(s,e.class),e.show||V(s,d);let n=K("th",null,s);if(Et.show){let e=q(b,n);if(t>0){let i=Et.width(I,t);i&&(e.style.border=i+"px "+Et.dash(I,t)+" "+Et.stroke(I,t)),e.style.background=Et.fill(I,t)}}let o=q(w,n);for(var l in o.textContent=e.label,t>0&&(Et.show||(o.style.color=e.width>0?Et.stroke(I,t):Et.fill(I,t)),Ut("click",n,(t=>{if(zi._lock)return;Yi(t);let i=be.indexOf(e);if((t.ctrlKey||t.metaKey)!=yt.isolate){let e=be.some(((e,t)=>t>0&&t!=i&&e.show));be.forEach(((t,s)=>{s>0&&An(s,e?s==i?Rt:Ft:Rt,!0,io.setSeries)}))}else An(i,{show:!e.show},!0,io.setSeries)}),!1),Wi&&Ut(R,n,(t=>{zi._lock||(Yi(t),An(be.indexOf(e),In,!0,io.setSeries))}),!1)),Tt){let e=K("td",E,s);e.textContent="--",i.push(e)}return[s,i]}(e,t);It.splice(t,0,i[0]),Dt.splice(t,0,i[1]),yt.values.push(null)}if(zi.show){vt.splice(t,0,null);let i=null;Gi?0==t&&(i=Ji(e,t)):t>0&&(i=Ji(e,t)),Ki.splice(t,0,i),qi.splice(t,0,0),Zi.splice(t,0,0)}eo("addSeries",t)}I.addSeries=function(e,t){t=null==t?be.length:t,e=1==U?fs(e,t,hi,Ii):fs(e,t,{},Li),be.splice(t,0,e),Qi(be[t],t)},I.delSeries=function(e){if(be.splice(e,1),bt){yt.values.splice(e,1),Dt.splice(e,1);let t=It.splice(e,1)[0];Nt(null,t.firstChild),t.remove()}zi.show&&(vt.splice(e,1),Ki.splice(e,1)[0].remove(),qi.splice(e,1),Zi.splice(e,1)),eo("delSeries",e)};const es=[!1,!1,!1,!1];function ts(e,t,i,s){let[n,o,l,r]=i,a=t%2,u=0;return 0==a&&(r||o)&&(u=0==t&&!n||2==t&&!l?xe(ui.size/3):0),1==a&&(n||l)&&(u=1==t&&!o||3==t&&!r?xe(Ai.size/2):0),u}const is=I.padding=(e.padding||[ts,ts,ts,ts]).map((e=>Ue(me(e,ts)))),ss=I._padding=is.map(((e,t)=>e(I,t,es,0)));let ns,os=null,ls=null;const rs=1==U?be[0].idxs:null;let us,xs,As,Ts,Os,Ls,Is,Ds,Ms,ks,Cs=null,Rs=!1;function Fs(e,i){if(t=null==e?[]:e,I.data=I._data=t,2==U){ns=0;for(let e=1;e<be.length;e++)ns+=t[e][0].length}else{0==t.length&&(I.data=I._data=t=[[]]),Cs=t[0],ns=Cs.length;let e=t;if(2==it){e=t.slice();let i=e[0]=Array(ns);for(let e=0;e<ns;e++)i[e]=e}I._data=t=e}if(qs(!0),eo("setData"),2==it&&(Ti=!0),!1!==i){let e=Ze;e.auto(I,Rs)?Ps():xn(He,e.min,e.max),Oi=Oi||zi.left>=0,Ui=!0,pn()}}function Ps(){let e,i;Rs=!0,1==U&&(ns>0?(os=rs[0]=0,ls=rs[1]=ns-1,e=t[0][os],i=t[0][ls],2==it?(e=os,i=ls):e==i&&(3==it?[e,i]=ue(e,e,Ze.log,!1):4==it?[e,i]=ce(e,e,Ze.log,!1):Ze.time?i=e+xe(86400/ye):[e,i]=ge(e,i,de,!0))):(os=rs[0]=e=null,ls=rs[1]=i=null)),xn(He,e,i)}function Us(e,t,i,s,n,o){e??=D,i??=Qe,s??="butt",n??=D,o??="round",e!=us&&(ne.strokeStyle=us=e),n!=xs&&(ne.fillStyle=xs=n),t!=As&&(ne.lineWidth=As=t),o!=Os&&(ne.lineJoin=Os=o),s!=Ls&&(ne.lineCap=Ls=s),i!=Ts&&ne.setLineDash(Ts=i)}function Ns(e,t,i,s){t!=xs&&(ne.fillStyle=xs=t),e!=Is&&(ne.font=Is=e),i!=Ds&&(ne.textAlign=Ds=i),s!=Ms&&(ne.textBaseline=Ms=s)}function $s(e,t,i,s,n=0){if(s.length>0&&e.auto(I,Rs)&&(null==t||null==t.min)){let t=me(os,0),o=me(ls,s.length-1),l=null==i.min?3==e.distr?function(e,t,i){let s=Re,n=-Re;for(let o=t;o<=i;o++){let t=e[o];null!=t&&t>0&&(t<s&&(s=t),t>n&&(n=t))}return[s,n]}(s,t,o):function(e,t,i,s){let n=Re,o=-Re;if(1==s)n=e[t],o=e[i];else if(-1==s)n=e[i],o=e[t];else for(let l=t;l<=i;l++){let t=e[l];null!=t&&(t<n&&(n=t),t>o&&(o=t))}return[n,o]}(s,t,o,n):[i.min,i.max];e.min=Te(e.min,i.min=l[0]),e.max=Oe(e.max,i.max=l[1])}}I.setData=Fs;const js={min:null,max:null};function Xs(e,t){let i=t?be[e].points:be[e];i._stroke=i.stroke(I,e),i._fill=i.fill(I,e)}function zs(e,i){let s=i?be[e].points:be[e],{stroke:n,fill:o,clip:l,flags:r,_stroke:a=s._stroke,_fill:u=s._fill,_width:c=s.width}=s._paths;c=Ge(c*Y,3);let d=null,h=c%2/2;i&&null==u&&(u=c>0?"#fff":a);let f=1==s.pxAlign&&h>0;if(f&&ne.translate(h,h),!i){let e=ai-c/2,t=_i-c/2,i=vi+c,s=yi+c;d=new Path2D,d.rect(e,t,i,s)}i?Ys(a,c,s.dash,s.cap,u,n,o,r,l):function(e,i,s,n,o,l,r,a,u,c,d){let h=!1;0!=u&&Ne.forEach(((f,p)=>{if(f.series[0]==e){let e,g=be[f.series[1]],m=t[f.series[1]],_=(g._paths||Je).band;tt(_)&&(_=1==f.dir?_[0]:_[1]);let v=null;g.show&&_&&function(e,t,i){for(t=me(t,0),i=me(i,e.length-1);t<=i;){if(null!=e[t])return!0;t++}return!1}(m,os,ls)?(v=f.fill(I,p)||l,e=g._paths.clip):_=null,Ys(i,s,n,o,v,r,a,u,c,d,e,_),h=!0}})),h||Ys(i,s,n,o,l,r,a,u,c,d)}(e,a,c,s.dash,s.cap,u,n,o,r,d,l),f&&ne.translate(-h,-h)}const Hs=Fi|Pi;function Ys(e,t,i,s,n,o,l,r,a,u,c,d){Us(e,t,i,s,n),(a||u||d)&&(ne.save(),a&&ne.clip(a),u&&ne.clip(u)),d?(r&Hs)==Hs?(ne.clip(d),c&&ne.clip(c),Vs(n,l),Bs(e,o,t)):r&Pi?(Vs(n,l),ne.clip(d),Bs(e,o,t)):r&Fi&&(ne.save(),ne.clip(d),c&&ne.clip(c),Vs(n,l),ne.restore(),Bs(e,o,t)):(Vs(n,l),Bs(e,o,t)),(a||u||d)&&ne.restore()}function Bs(e,t,i){i>0&&(t instanceof Map?t.forEach(((e,t)=>{ne.strokeStyle=us=t,ne.stroke(e)})):null!=t&&e&&ne.stroke(t))}function Vs(e,t){t instanceof Map?t.forEach(((e,t)=>{ne.fillStyle=xs=t,ne.fill(e)})):null!=t&&e&&ne.fill(t)}function Ws(e,t,i,s,n,o,l,r,a,u){let c=l%2/2;1==_e&&ne.translate(c,c),Us(r,l,a,u,r),ne.beginPath();let d,h,f,p,g=n+(0==s||3==s?-o:o);0==i?(h=n,p=g):(d=n,f=g);for(let m=0;m<e.length;m++)null!=t[m]&&(0==i?d=f=e[m]:h=p=e[m],ne.moveTo(d,h),ne.lineTo(f,p));ne.stroke(),1==_e&&ne.translate(-c,-c)}function Gs(e){let t=!0;return Me.forEach(((i,s)=>{if(!i.show)return;let n=Fe[i.scale];if(null==n.min)return void(i._show&&(t=!1,i._show=!1,qs(!1)));i._show||(t=!1,i._show=!0,qs(!1));let o=i.side,l=o%2,{min:r,max:a}=n,[u,c]=function(e,t,i,s){let n,o=Me[e];if(s<=0)n=[0,0];else{let l=o._space=o.space(I,e,t,i,s);n=ws(t,i,o._incrs=o.incrs(I,e,t,i,s,l),s,l)}return o._found=n}(s,r,a,0==l?Qt:ei);if(0==c)return;let d=2==n.distr,h=i._splits=i.splits(I,s,r,a,u,c,d),f=2==n.distr?h.map((e=>Cs[e])):h,p=2==n.distr?Cs[h[1]]-Cs[h[0]]:u,g=i._values=i.values(I,i.filter(I,f,s,c,p),s,c,p);i._rotate=2==o?i.rotate(I,g,s,c):0;let m=i._size;i._size=Ae(i.size(I,g,s,e)),null!=m&&i._size!=m&&(t=!1)})),t}function Ks(e){let t=!0;return is.forEach(((i,s)=>{let n=i(I,s,es,e);n!=ss[s]&&(t=!1),ss[s]=n})),t}function qs(e){be.forEach(((t,i)=>{i>0&&(t._paths=null,e&&(1==U?(t.min=null,t.max=null):t.facets.forEach((e=>{e.min=null,e.max=null}))))}))}let Zs,Js,Qs,en,tn,sn,nn,on,ln,rn,an,un,cn=!1,dn=!1,hn=[];function fn(){dn=!1;for(let e=0;e<hn.length;e++)eo(...hn[e]);hn.length=0}function pn(){cn||(ht(gn),cn=!0)}function gn(){if(bi&&(!function(){for(let t in Fe){let e=Fe[t];null==dt[t]&&(null==e.min||null!=dt[He]&&e.auto(I,Rs))&&(dt[t]=js)}for(let t in Fe){let e=Fe[t];null==dt[t]&&null!=e.from&&null!=dt[e.from]&&(dt[t]=js)}null!=dt[He]&&qs(!0);let e={};for(let t in dt){let i=dt[t];if(null!=i){let s=e[t]=ut(Fe[t],lt);if(null!=i.min)ct(s,i);else if(t!=He||2==U)if(0==ns&&null==s.from){let e=s.range(I,null,null,t);s.min=e[0],s.max=e[1]}else s.min=Re,s.max=-Re}}if(ns>0){be.forEach(((i,s)=>{if(1==U){let n=i.scale,o=dt[n];if(null==o)return;let l=e[n];if(0==s){let e=l.range(I,l.min,l.max,n);l.min=e[0],l.max=e[1],os=re(l.min,t[0]),ls=re(l.max,t[0]),ls-os>1&&(t[0][os]<l.min&&os++,t[0][ls]>l.max&&ls--),i.min=Cs[os],i.max=Cs[ls]}else i.show&&i.auto&&$s(l,o,i,t[s],i.sorted);i.idxs[0]=os,i.idxs[1]=ls}else if(s>0&&i.show&&i.auto){let[n,o]=i.facets,l=n.scale,r=o.scale,[a,u]=t[s],c=e[l],d=e[r];null!=c&&$s(c,dt[l],n,a,n.sorted),null!=d&&$s(d,dt[r],o,u,o.sorted),i.min=o.min,i.max=o.max}}));for(let t in e){let i=e[t],s=dt[t];if(null==i.from&&(null==s||null==s.min)){let e=i.range(I,i.min==Re?null:i.min,i.max==-Re?null:i.max,t);i.min=e[0],i.max=e[1]}}}for(let t in e){let i=e[t];if(null!=i.from){let s=e[i.from];if(null==s.min)i.min=i.max=null;else{let e=i.range(I,s.min,s.max,t);i.min=e[0],i.max=e[1]}}}let i={},s=!1;for(let t in e){let n=e[t],o=Fe[t];if(o.min!=n.min||o.max!=n.max){o.min=n.min,o.max=n.max;let e=o.distr;o._min=3==e?De(o.min):4==e?Ce(o.min,o.asinh):100==e?o.fwd(o.min):o.min,o._max=3==e?De(o.max):4==e?Ce(o.max,o.asinh):100==e?o.fwd(o.max):o.max,i[t]=s=!0}}if(s){be.forEach(((e,t)=>{2==U?t>0&&i.y&&(e._paths=null):i[e.scale]&&(e._paths=null)}));for(let e in i)Ti=!0,eo("setScale",e);zi.show&&zi.left>=0&&(Oi=Ui=!0)}for(let t in dt)dt[t]=null}(),bi=!1),Ti&&(!function(){let e=!1,t=0;for(;!e;){t++;let i=Gs(t),s=Ks(t);e=t==Xi||i&&s,e||(ji(I.width,I.height),wi=!0)}}(),Ti=!1),wi){if(G(fe,O,ti),G(fe,A,si),G(fe,S,Qt),G(fe,x,ei),G(pe,O,ti),G(pe,A,si),G(pe,S,Qt),G(pe,x,ei),G(ae,S,$t),G(ae,x,Gt),se.width=xe($t*Y),se.height=xe(Gt*Y),Me.forEach((({_el:e,_show:t,_size:i,_pos:s,side:n})=>{if(null!=e)if(t){let t=n%2==1;G(e,t?"left":"top",s-(3===n||0===n?i:0)),G(e,t?"width":"height",i),G(e,t?"top":"left",t?si:ti),G(e,t?"height":"width",t?ei:Qt),W(e,d)}else V(e,d)})),us=xs=As=Os=Ls=Is=Ds=Ms=Ts=null,ks=1,$n(!0),ti!=ni||si!=oi||Qt!=li||ei!=ri){qs(!1);let e=Qt/li,t=ei/ri;if(zi.show&&!Oi&&zi.left>=0){zi.left*=e,zi.top*=t,Qs&&J(Qs,xe(zi.left),0,Qt,ei),en&&J(en,0,xe(zi.top),Qt,ei);for(let i=0;i<Ki.length;i++){let s=Ki[i];null!=s&&(qi[i]*=e,Zi[i]*=t,J(s,Ae(qi[i]),Ae(Zi[i]),Qt,ei))}}if(wn.show&&!Ci&&wn.left>=0&&wn.width>0){wn.left*=e,wn.width*=e,wn.top*=t,wn.height*=t;for(let e in zn)G(En,e,wn[e])}ni=ti,oi=si,li=Qt,ri=ei}eo("setSize"),wi=!1}$t>0&&Gt>0&&(ne.clearRect(0,0,se.width,se.height),eo("drawClear"),Ve.forEach((e=>e())),eo("draw")),wn.show&&Ci&&(Sn(wn),Ci=!1),zi.show&&Oi&&(Un(null,!0,!1),Oi=!1),yt.show&&yt.live&&Ui&&(Fn(),Ui=!1),Q||(Q=!0,I.status=1,eo("ready")),Rs=!1,cn=!1}function mn(e,i){let s=Fe[e];if(null==s.from){if(0==ns){let t=s.range(I,i.min,i.max,e);i.min=t[0],i.max=t[1]}if(i.min>i.max){let e=i.min;i.min=i.max,i.max=e}if(ns>1&&null!=i.min&&null!=i.max&&i.max-i.min<1e-16)return;e==He&&2==s.distr&&ns>0&&(i.min=re(i.min,t[0]),i.max=re(i.max,t[0]),i.min==i.max&&i.max++),dt[e]=i,bi=!0,pn()}}I.batch=function(e,t=!1){cn=!0,dn=t,e(I),gn(),t&&hn.length>0&&queueMicrotask(fn)},I.redraw=(e,t)=>{Ti=t||!1,!1!==e?xn(He,Ze.min,Ze.max):pn()},I.setScale=mn;let _n=!1;const vn=zi.drag;let yn=vn.x,bn=vn.y;zi.show&&(zi.x&&(Zs=q(f,pe)),zi.y&&(Js=q(p,pe)),0==Ze.ori?(Qs=Zs,en=Js):(Qs=Js,en=Zs),an=zi.left,un=zi.top);const wn=I.select=ct({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),En=wn.show?q(h,wn.over?pe:fe):null;function Sn(e,t){if(wn.show){for(let t in e)wn[t]=e[t],t in zn&&G(En,t,e[t]);!1!==t&&eo("setSelect")}}function xn(e,t,i){mn(e,{min:t,max:i})}function An(e,t,i,s){null!=t.focus&&function(e){if(e!=Ln){let t=null==e,i=1!=Vi.alpha;be.forEach(((s,n)=>{if(1==U||n>0){let o=t||0==n||n==e;s._focus=t?null:o,i&&function(e,t){be[e].alpha=t,zi.show&&Ki[e]&&(Ki[e].style.opacity=t);bt&&It[e]&&(It[e].style.opacity=t)}(n,o?1:Vi.alpha)}})),Ln=e,i&&pn()}}(e),null!=t.show&&be.forEach(((i,s)=>{s>0&&(e==s||null==e)&&(i.show=t.show,function(e){let t=be[e],i=bt?It[e]:null;t.show?i&&W(i,d):(i&&V(i,d),J(Gi?Ki[0]:Ki[e],-10,-10,Qt,ei))}(s,t.show),2==U?(xn(i.facets[0].scale,null,null),xn(i.facets[1].scale,null,null)):xn(i.scale,null,null),pn())})),!1!==i&&eo("setSeries",e,t),s&&oo("setSeries",I,e,t)}let Tn,On,Ln;I.setSelect=Sn,I.setSeries=An,I.addBand=function(e,t){e.fill=Ue(e.fill||null),e.dir=me(e.dir,-1),t=null==t?Ne.length:t,Ne.splice(t,0,e)},I.setBand=function(e,t){ct(Ne[e],t)},I.delBand=function(e){null==e?Ne.length=0:Ne.splice(e,1)};const In={focus:!0};function Dn(e,t,i){let s=Fe[t];i&&(e=e/Y-(1==s.ori?si:ti));let n=Qt;1==s.ori&&(n=ei,e=n-e),-1==s.dir&&(e=n-e);let o=s._min,l=o+(s._max-o)*(e/n),r=s.distr;return 3==r?Le(10,l):4==r?ke(l,s.asinh):100==r?s.bwd(l):l}function Mn(e,t){G(En,O,wn.left=e),G(En,S,wn.width=t)}function kn(e,t){G(En,A,wn.top=e),G(En,x,wn.height=t)}bt&&Wi&&Ut(F,St,(e=>{zi._lock||(Yi(e),null!=Ln&&An(null,In,!0,io.setSeries))})),I.valToIdx=e=>re(e,t[0]),I.posToIdx=function(e,i){return re(Dn(e,He,i),t[0],os,ls)},I.posToVal=Dn,I.valToPos=(e,t,i)=>0==Fe[t].ori?H(e,Fe[t],i?vi:Qt,i?ai:0):B(e,Fe[t],i?yi:ei,i?_i:0),I.setCursor=(e,t,i)=>{an=e.left,un=e.top,Un(null,t,i)};let Cn=0==Ze.ori?Mn:kn,Rn=1==Ze.ori?Mn:kn;function Fn(e,t){if(null!=e&&(e.idxs?e.idxs.forEach(((e,t)=>{vt[t]=e})):st(e.idx)||vt.fill(e.idx),yt.idx=vt[0]),bt&&yt.live){for(let e=0;e<be.length;e++)(e>0||1==U&&!Mt)&&Pn(e,vt[e]);!function(){if(bt&&yt.live)for(let e=2==U?1:0;e<be.length;e++){if(0==e&&Mt)continue;let t=yt.values[e],i=0;for(let s in t)Dt[e][i++].firstChild.nodeValue=t[s]}}()}Ui=!1,!1!==t&&eo("setLegend")}function Pn(e,i){let s,n=be[e],o=0==e&&2==it?Cs:t[e];Mt?s=n.values(I,e,i)??kt:(s=n.value(I,null==i?null:o[i],e,i),s=null==s?kt:{_:s}),yt.values[e]=s}function Un(e,i,s){let n;ln=an,rn=un,[an,un]=zi.move(I,an,un),zi.left=an,zi.top=un,zi.show&&(Qs&&J(Qs,xe(an),0,Qt,ei),en&&J(en,0,xe(un),Qt,ei));let o=os>ls;Tn=Re,On=null;let l=0==Ze.ori?Qt:ei,r=1==Ze.ori?Qt:ei;if(an<0||0==ns||o){n=zi.idx=null;for(let e=0;e<be.length;e++){let t=Ki[e];null!=t&&J(t,-10,-10,Qt,ei)}Wi&&An(null,In,!0,null==e&&io.setSeries),yt.live&&(vt.fill(n),Ui=!0)}else{let e,i,s;1==U&&(e=0==Ze.ori?an:un,i=Dn(e,He),n=zi.idx=re(i,t[0],os,ls),s=rt(t[0][n],Ze,l,0));let o=-10,a=-10,u=0,c=0,d=!0,h="",f="";for(let p=2==U?1:0;p<be.length;p++){let e=be[p],g=vt[p],m=null==g?null:1==U?t[p][g]:t[p][1][g],_=zi.dataIdx(I,p,n,i),v=null==_?null:1==U?t[p][_]:t[p][1][_];Ui=Ui||v!=m||_!=g,vt[p]=_;let y=_==n?s:rt(1==U?t[0][_]:t[p][0][_],Ze,l,0);if(p>0&&e.show){let t=null==v?-10:at(v,1==U?Fe[e.scale]:Fe[e.facets[1].scale],r,0);if(Wi&&null!=v){let i=1==Ze.ori?an:un,s=Ee(Vi.dist(I,p,_,t,i));if(s<Tn){let t=Vi.bias;if(0!=t){let n=Dn(i,e.scale),o=n>=0?1:-1;o==(v>=0?1:-1)&&(1==o?1==t?v>=n:v<=n:1==t?v<=n:v>=n)&&(Tn=s,On=p)}else Tn=s,On=p}}if(Ui||Gi){let e,i;0==Ze.ori?(e=y,i=t):(e=t,i=y);let s,n,l,r,g,m,_=!0,v=Bi.bbox;if(null!=v){_=!1;let e=v(I,p);l=e.left,r=e.top,s=e.width,n=e.height}else l=e,r=i,s=n=Bi.size(I,p);if(m=Bi.fill(I,p),g=Bi.stroke(I,p),Gi)p==On&&Tn<=Vi.prox&&(o=l,a=r,u=s,c=n,d=_,h=m,f=g);else{let e=Ki[p];null!=e&&(qi[p]=l,Zi[p]=r,ie(e,s,n,_),ee(e,m,g),J(e,Ae(l),Ae(r),Qt,ei))}}}}if(Gi){let e=Vi.prox;if(Ui||(null==Ln?Tn<=e:Tn>e||On!=Ln)){let e=Ki[0];qi[0]=o,Zi[0]=a,ie(e,u,c,d),ee(e,h,f),J(e,Ae(o),Ae(a),Qt,ei)}}}if(wn.show&&_n)if(null!=e){let[t,i]=io.scales,[s,n]=io.match,[o,a]=e.cursor.sync.scales,u=e.cursor.drag;if(yn=u._x,bn=u._y,yn||bn){let u,c,d,h,f,{left:p,top:g,width:m,height:_}=e.select,v=e.scales[o].ori,y=e.posToVal,b=null!=t&&s(t,o),w=null!=i&&n(i,a);b&&yn?(0==v?(u=p,c=m):(u=g,c=_),d=Fe[t],h=rt(y(u,o),d,l,0),f=rt(y(u+c,o),d,l,0),Cn(Te(h,f),Ee(f-h))):Cn(0,l),w&&bn?(1==v?(u=p,c=m):(u=g,c=_),d=Fe[i],h=at(y(u,a),d,r,0),f=at(y(u+c,a),d,r,0),Rn(Te(h,f),Ee(f-h))):Rn(0,r)}else Hn()}else{let e=Ee(ln-tn),t=Ee(rn-sn);if(1==Ze.ori){let i=e;e=t,t=i}yn=vn.x&&e>=vn.dist,bn=vn.y&&t>=vn.dist;let i,s,n=vn.uni;null!=n?yn&&bn&&(yn=e>=n,bn=t>=n,yn||bn||(t>e?bn=!0:yn=!0)):vn.x&&vn.y&&(yn||bn)&&(yn=bn=!0),yn&&(0==Ze.ori?(i=nn,s=an):(i=on,s=un),Cn(Te(i,s),Ee(s-i)),bn||Rn(0,r)),bn&&(1==Ze.ori?(i=nn,s=an):(i=on,s=un),Rn(Te(i,s),Ee(s-i)),yn||Cn(0,l)),yn||bn||(Cn(0,0),Rn(0,0))}if(vn._x=yn,vn._y=bn,null==e){if(s){if(null!=so){let[e,t]=io.scales;io.values[0]=null!=e?Dn(0==Ze.ori?an:un,e):null,io.values[1]=null!=t?Dn(1==Ze.ori?an:un,t):null}oo(M,I,an,un,Qt,ei,n)}if(Wi){let e=s&&io.setSeries,t=Vi.prox;null==Ln?Tn<=t&&An(On,In,!0,e):Tn>t?An(null,In,!0,e):On!=Ln&&An(On,In,!0,e)}}Ui&&(yt.idx=n,Fn()),!1!==i&&eo("setCursor")}I.setLegend=Fn;let Nn=null;function $n(e=!1){e?Nn=null:(Nn=pe.getBoundingClientRect(),eo("syncRect",Nn))}function jn(e,t,i,s,n,o,l){zi._lock||_n&&null!=e&&0==e.movementX&&0==e.movementY||(Xn(e,t,i,s,n,o,l,!1,null!=e),null!=e?Un(null,!0,!0):Un(t,!0,!1))}function Xn(e,t,i,s,n,o,l,r,a){if(null==Nn&&$n(!1),Yi(e),null!=e)i=e.clientX-Nn.left,s=e.clientY-Nn.top;else{if(i<0||s<0)return an=-10,void(un=-10);let[e,l]=io.scales,r=t.cursor.sync,[a,u]=r.values,[c,d]=r.scales,[h,f]=io.match,p=t.axes[0].side%2==1,g=0==Ze.ori?Qt:ei,m=1==Ze.ori?Qt:ei,_=p?o:n,v=p?n:o,y=p?s:i,b=p?i:s;if(i=null!=c?h(e,c)?Z(a,Fe[e],g,0):-10:g*(y/_),s=null!=d?f(l,d)?Z(u,Fe[l],m,0):-10:m*(b/v),1==Ze.ori){let e=i;i=s,s=e}}a&&((i<=1||i>=Qt-1)&&(i=Be(i,Qt)),(s<=1||s>=ei-1)&&(s=Be(s,ei))),r?(tn=i,sn=s,[nn,on]=zi.move(I,i,s)):(an=i,un=s)}Object.defineProperty(I,"rect",{get:()=>(null==Nn&&$n(!1),Nn)});const zn={width:0,height:0,left:0,top:0};function Hn(){Sn(zn,!1)}let Yn,Bn,Vn,Wn;function Gn(e,t,i,s,n,o,l){_n=!0,yn=bn=vn._x=vn._y=!1,Xn(e,t,i,s,n,o,0,!0,!1),null!=e&&(Ut(C,X,Kn,!1),oo(k,I,nn,on,Qt,ei,null));let{left:r,top:a,width:u,height:c}=wn;Yn=r,Bn=a,Vn=u,Wn=c,Hn()}function Kn(e,t,i,s,n,o,l){_n=vn._x=vn._y=!1,Xn(e,t,i,s,n,o,0,!1,!0);let{left:r,top:a,width:u,height:c}=wn,d=u>0||c>0,h=Yn!=r||Bn!=a||Vn!=u||Wn!=c;if(d&&h&&Sn(wn),vn.setScale&&d&&h){let e=r,t=u,i=a,s=c;if(1==Ze.ori&&(e=a,t=c,i=r,s=u),yn&&xn(He,Dn(e,He),Dn(e+t,He)),bn)for(let n in Fe){let e=Fe[n];n!=He&&null==e.from&&e.min!=Re&&xn(n,Dn(i+s,n),Dn(i,n))}Hn()}else zi.lock&&(zi._lock=!zi._lock,Un(null,!0,!1));null!=e&&(Nt(C,X),oo(C,I,an,un,Qt,ei,null))}function qn(e,t,i,s,n,o,l){zi._lock||(Yi(e),Ps(),Hn(),null!=e&&oo(P,I,an,un,Qt,ei,null))}function Zn(){Me.forEach(Ss),Ni(I.width,I.height,!0)}oe(N,z,Zn);const Jn={};Jn.mousedown=Gn,Jn.mousemove=jn,Jn.mouseup=Kn,Jn.dblclick=qn,Jn.setSeries=(e,t,i,s)=>{-1!=(i=(0,io.match[2])(I,t,i))&&An(i,s,!0,!1)},zi.show&&(Ut(k,pe,Gn),Ut(M,pe,jn),Ut(R,pe,(e=>{Yi(e),$n(!1)})),Ut(F,pe,(function(e,t,i,s,n,o,l){if(zi._lock)return;Yi(e);let r=_n;if(_n){let e,t,i=!0,s=!0,n=10;0==Ze.ori?(e=yn,t=bn):(e=bn,t=yn),e&&t&&(i=an<=n||an>=Qt-n,s=un<=n||un>=ei-n),e&&i&&(an=an<nn?0:Qt),t&&s&&(un=un<on?0:ei),Un(null,!0,!0),_n=!1}an=-10,un=-10,Un(null,!0,!0),r&&(_n=r)})),Ut(P,pe,qn),as.add(I),I.syncRect=$n);const Qn=I.hooks=e.hooks||{};function eo(e,t,i){dn?hn.push([e,t,i]):e in Qn&&Qn[e].forEach((e=>{e.call(null,I,t,i)}))}(e.plugins||[]).forEach((e=>{for(let t in e.hooks)Qn[t]=(Qn[t]||[]).concat(e.hooks[t])}));const to=(e,t,i)=>i,io=ct({key:null,setSeries:!1,filters:{pub:Xe,sub:Xe},scales:[He,be[1]?be[1].scale:null],match:[ze,ze,to],values:[null,null]},zi.sync);2==io.match.length&&io.match.push(to),zi.sync=io;const so=io.key,no=Ri(so);function oo(e,t,i,s,n,o,l){io.filters.pub(e,t,i,s,n,o,l)&&no.pub(e,t,i,s,n,o,l)}function lo(){eo("init",e,t),Fs(t||e.data,!1),dt[He]?mn(He,dt[He]):Ps(),Ci=wn.show&&(wn.width>0||wn.height>0),Oi=Ui=!0,Ni(e.width,e.height)}return no.sub(I),I.pub=function(e,t,i,s,n,o,l){io.filters.sub(e,t,i,s,n,o,l)&&Jn[e](null,t,i,s,n,o,l)},I.destroy=function(){no.unsub(I),as.delete(I),Pt.clear(),le(N,z,Zn),te.remove(),St?.remove(),eo("destroy")},be.forEach(Qi),Me.forEach((function(e,t){if(e._show=e.show,e.show){let i=e.side%2,s=Fe[e.scale];null==s&&(e.scale=i?be[1].scale:He,s=Fe[e.scale]);let n=s.time;e.size=Ue(e.size),e.space=Ue(e.space),e.rotate=Ue(e.rotate),tt(e.incrs)&&e.incrs.forEach((e=>{!Ke.has(e)&&Ke.set(e,qe(e))})),e.incrs=Ue(e.incrs||(2==s.distr?Ot:n?1==ye?jt:Ht:Lt)),e.splits=Ue(e.splits||(n&&1==s.distr?gt:3==s.distr?gi:4==s.distr?mi:pi)),e.stroke=Ue(e.stroke),e.grid.stroke=Ue(e.grid.stroke),e.ticks.stroke=Ue(e.ticks.stroke),e.border.stroke=Ue(e.border.stroke);let o=e.values;e.values=tt(o)&&!tt(o[0])?Ue(o):n?tt(o)?Wt(ft,Vt(o,pt)):nt(o)?function(e,t){let i=wt(t);return(t,s,n,o,l)=>s.map((t=>i(e(t))))}(ft,o):o||mt:o||fi,e.filter=Ue(e.filter||(s.distr>=3&&10==s.log?Ei:3==s.distr&&2==s.log?Si:$e)),e.font=Es(e.font),e.labelFont=Es(e.labelFont),e._size=e.size(I,null,t,0),e._space=e._rotate=e._incrs=e._found=e._splits=e._values=null,e._size>0&&(es[t]=!0,e._el=q(c,ae))}})),i?i instanceof HTMLElement?(i.appendChild(te),lo()):i(I,lo):lo(),I}xs.assign=ct,xs.fmtNum=ye,xs.rangeNum=ge,xs.rangeLog=ue,xs.rangeAsinh=ce,xs.orient=Ui,xs.pxRatio=Y,xs.join=function(e,t){if(function(e){let t=e[0][0],i=t.length;for(let s=1;s<e.length;s++){let n=e[s][0];if(n.length!=i)return!1;if(n!=t)for(let e=0;e<i;e++)if(n[e]!=t[e])return!1}return!0}(e)){let t=e[0].slice();for(let i=1;i<e.length;i++)t.push(...e[i].slice(1));return function(e,t=100){const i=e.length;if(i<=1)return!0;let s=0,n=i-1;for(;s<=n&&null==e[s];)s++;for(;n>=s&&null==e[n];)n--;if(n<=s)return!0;const o=Oe(1,Se((n-s+1)/t));for(let l=e[s],r=s+o;r<=n;r+=o){const t=e[r];if(null!=t){if(t<=l)return!1;l=t}}return!0}(t[0])||(t=function(e){let t=e[0],i=t.length,s=Array(i);for(let o=0;o<s.length;o++)s[o]=o;s.sort(((e,i)=>t[e]-t[i]));let n=[];for(let o=0;o<e.length;o++){let t=e[o],l=Array(i);for(let e=0;e<i;e++)l[e]=t[s[e]];n.push(l)}return n}(t)),t}let i=new Set;for(let l=0;l<e.length;l++){let t=e[l][0],s=t.length;for(let e=0;e<s;e++)i.add(t[e])}let s=[Array.from(i).sort(((e,t)=>e-t))],n=s[0].length,o=new Map;for(let l=0;l<n;l++)o.set(s[0][l],l);for(let l=0;l<e.length;l++){let i=e[l],r=i[0];for(let e=1;e<i.length;e++){let a=i[e],u=Array(n).fill(void 0),c=t?t[l][e]:1,d=[];for(let e=0;e<a.length;e++){let t=a[e],i=o.get(r[e]);null===t?0!=c&&(u[i]=t,2==c&&d.push(i)):u[i]=t}dt(u,d,n),s.push(u)}}return s},xs.fmtDate=wt,xs.tzDate=function(e,t){let i;return"UTC"==t||"Etc/UTC"==t?i=new Date(+e+6e4*e.getTimezoneOffset()):t==Et?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:t})),i.setMilliseconds(e.getMilliseconds())),i},xs.sync=Ri;{xs.addGap=function(e,t,i){let s=e[e.length-1];s&&s[0]==t?s[1]=i:e.push([t,i])},xs.clipGaps=Xi;let e=xs.paths={points:ts};e.linear=os,e.stepped=function(e){const t=me(e.align,1),i=me(e.ascDesc,!1),s=me(e.alignGaps,0),n=me(e.extend,!1);return(e,o,l,r)=>Ui(e,o,((a,u,c,d,h,f,p,g,m,_,v)=>{let y=a.pxRound,{left:b,width:w}=e.bbox,E=e=>y(f(e,d,_,g)),S=e=>y(p(e,h,v,m)),x=0==d.ori?Wi:Gi;const A={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Fi},T=A.stroke,O=d.dir*(0==d.ori?1:-1);l=ae(c,l,r,1),r=ae(c,l,r,-1);let L=S(c[1==O?l:r]),I=E(u[1==O?l:r]),D=I,M=I;n&&-1==t&&(M=b,x(T,M,L)),x(T,I,L);for(let e=1==O?l:r;e>=l&&e<=r;e+=O){let i=c[e];if(null==i)continue;let s=E(u[e]),n=S(i);1==t?x(T,s,L):x(T,D,n),x(T,s,n),L=n,D=s}let k=D;n&&1==t&&(k=b+w,x(T,k,L));let[C,R]=Ni(e,o);if(null!=a.fill||0!=C){let t=A.fill=new Path2D(T),i=S(a.fillTo(e,o,a.min,a.max,C));x(t,k,i),x(t,M,i)}if(!a.spanGaps){let n=[];n.push(...zi(u,c,l,r,O,E,s));let h=a.width*Y/2,f=i||1==t?h:-h,p=i||-1==t?-h:h;n.forEach((e=>{e[0]+=f,e[1]+=p})),A.gaps=n=a.gaps(e,o,l,r,n),A.clip=Xi(n,d.ori,g,m,_,v)}return 0!=R&&(A.band=2==R?[ji(e,o,l,r,T,-1),ji(e,o,l,r,T,1)]:ji(e,o,l,r,T,R)),A}))},e.bars=function(e){const t=me((e=e||Je).size,[.6,Re,1]),i=e.align||0,s=e.gap||0;let n=e.radius;n=null==n?[0,0]:"number"==typeof n?[n,0]:n;const o=Ue(n),l=1-t[0],r=me(t[1],Re),a=me(t[2],1),u=me(e.disp,Je),c=me(e.each,(e=>{})),{fill:d,stroke:h}=u;return(e,t,n,f)=>Ui(e,t,((p,g,m,_,v,y,b,w,E,S,x)=>{let A,T,O=p.pxRound,L=i,I=s*Y,D=r*Y,M=a*Y;0==_.ori?[A,T]=o(e,t):[T,A]=o(e,t);const k=_.dir*(0==_.ori?1:-1);let C,R,F,P=0==_.ori?Ki:qi,U=0==_.ori?c:(e,t,i,s,n,o,l)=>{c(e,t,i,n,s,l,o)},N=me(e.bands,Qe).find((e=>e.series[0]==t)),$=null!=N?N.dir:0,j=p.fillTo(e,t,p.min,p.max,$),X=O(b(j,v,x,E)),z=S,H=O(p.width*Y),B=!1,V=null,W=null,G=null,K=null;null==d||0!=H&&null==h||(B=!0,V=d.values(e,t,n,f),W=new Map,new Set(V).forEach((e=>{null!=e&&W.set(e,new Path2D)})),H>0&&(G=h.values(e,t,n,f),K=new Map,new Set(G).forEach((e=>{null!=e&&K.set(e,new Path2D)}))));let{x0:q,size:Z}=u;if(null!=q&&null!=Z){L=1,g=q.values(e,t,n,f),2==q.unit&&(g=g.map((t=>e.posToVal(w+t*S,_.key,!0))));let i=Z.values(e,t,n,f);R=2==Z.unit?i[0]*S:y(i[0],_,S,w)-y(0,_,S,w),z=ls(g,m,y,_,S,w,z),F=z-R+I}else z=ls(g,m,y,_,S,w,z),F=z*l+I,R=z-F;F<1&&(F=0),H>=R/2&&(H=0),F<5&&(O=Ne);let J=F>0;R=O(Pe(z-F-(J?H:0),M,D)),C=(0==L?R/2:L==k?0:R)-L*k*((0==L?I/2:0)+(J?H/2:0));const Q={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},ee=B?null:new Path2D;let te=null;if(null!=N)te=e.data[N.series[1]];else{let{y0:i,y1:s}=u;null!=i&&null!=s&&(m=s.values(e,t,n,f),te=i.values(e,t,n,f))}let ie=A*R,se=T*R;for(let i=1==k?n:f;i>=n&&i<=f;i+=k){let s=m[i];if(null==s)continue;if(null!=te){let e=te[i]??0;if(s-e==0)continue;X=b(e,v,x,E)}let n=y(2!=_.distr||null!=u?g[i]:i,_,S,w),o=b(me(s,j),v,x,E),l=O(n-C),r=O(Oe(o,X)),a=O(Te(o,X)),c=r-a;if(null!=s){let n=s<0?se:ie,o=s<0?ie:se;B?(H>0&&null!=G[i]&&P(K.get(G[i]),l,a+Se(H/2),R,Oe(0,c-H),n,o),null!=V[i]&&P(W.get(V[i]),l,a+Se(H/2),R,Oe(0,c-H),n,o)):P(ee,l,a+Se(H/2),R,Oe(0,c-H),n,o),U(e,t,i,l-H/2,a,R+H,c)}}return H>0?Q.stroke=B?K:ee:B||(Q._fill=0==p.width?p._fill:p._stroke??p._fill,Q.width=0),Q.fill=B?W:ee,Q}))},e.spline=function(e){return function(e,t){const i=me(t?.alignGaps,0);return(t,s,n,o)=>Ui(t,s,((l,r,a,u,c,d,h,f,p,g,m)=>{let _,v,y,b=l.pxRound,w=e=>b(d(e,u,g,f)),E=e=>b(h(e,c,m,p));0==u.ori?(_=Bi,y=Wi,v=Qi):(_=Vi,y=Gi,v=es);const S=u.dir*(0==u.ori?1:-1);n=ae(a,n,o,1),o=ae(a,n,o,-1);let x=w(r[1==S?n:o]),A=x,T=[],O=[];for(let e=1==S?n:o;e>=n&&e<=o;e+=S)if(null!=a[e]){let t=w(r[e]);T.push(A=t),O.push(E(a[e]))}const L={stroke:e(T,O,_,y,v,b),fill:null,clip:null,band:null,gaps:null,flags:Fi},I=L.stroke;let[D,M]=Ni(t,s);if(null!=l.fill||0!=D){let e=L.fill=new Path2D(I),i=E(l.fillTo(t,s,l.min,l.max,D));y(e,A,i),y(e,x,i)}if(!l.spanGaps){let e=[];e.push(...zi(r,a,n,o,S,w,i)),L.gaps=e=l.gaps(t,s,n,o,e),L.clip=Xi(e,u.ori,f,p,g,m)}return 0!=M&&(L.band=2==M?[ji(t,s,n,o,I,-1),ji(t,s,n,o,I,1)]:ji(t,s,n,o,I,M)),L}))}(rs,e)}}}}]);