(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[18522],{2680:(e,s,n)=>{var t=n(43665),a=n(81061),r=n(28293),o=n(19305);e.exports=function(e,s){return function(n,l){var i=o(n)?t:a,d=s?s():{};return i(n,e,r(l,2),d)}}},2796:(e,s,n)=>{"use strict";n.d(s,{A:()=>a});var t=n(59284);const a=e=>t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.25 8A.75.75 0 0 1 2 7.25h10.19L9.47 4.53a.75.75 0 0 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H2A.75.75 0 0 1 1.25 8",clipRule:"evenodd"}))},14719:(e,s,n)=>{"use strict";n.r(s),n.d(s,{Cluster:()=>ln});var t=n(59284),a=n(1608),r=n(96727),o=n(29859),l=n(66212),i=n(61750),d=n(10755),c=n(80987),u=n(90053),p=n(89898),m=n(37477),h=n(97677),v=n(44294),x=n(55340),g=n(78321),j=n(92459),f=n(67028),b=n(67298),N=n(40174),y=n(54090),w=n(51114),C=n(77506),E=n(47779),D=n(12888),A=n(81188),S=n(61323),k=n(62844),M=n(37377),_=n(88616),T=n(93381),I=n(65872),O=n(64470),P=n(4557),V=n(80136),z=n(47653),R=n(15151),L=n(28539),B=n(44508),G=n(19280),H=n(48295),$=n(9252),U=n(17594),q=n(95963),J=n(69326),W=n(90101),K=n(32752),Z=n(54309),F=n(44526),Q=n(10508),Y=n(25196),X=n(63719),ee=n(60712);function se({tenant:e,additionalTenantsProps:s}){const n=(0,D.X)(),t=((e,s)=>{var n;if("function"!==typeof(null===s||void 0===s?void 0:s.prepareTenantBackend))return;let t;const a=null!==(n=e.NodeIds)&&void 0!==n?n:e.sharedNodeIds;a&&a.length>0&&(t=a[Math.floor(Math.random()*a.length)].toString());return s.prepareTenantBackend(t)})(e,s),a=Boolean(t),r=(0,F.f)(s,null===e||void 0===e?void 0:e.Name,null===e||void 0===e?void 0:e.Type),o=r.length>0&&n?(0,ee.jsx)(W.u,{responsive:!0,children:(0,ee.jsx)(W.u.Item,{name:(0,X.A)("field_links"),children:(0,ee.jsx)(K.s,{gap:2,wrap:"wrap",children:r.map((({title:e,url:s})=>(0,ee.jsx)(Y.K,{title:e,url:s},e)))})})}):null;return(0,ee.jsx)(Q.c,{externalLink:a,name:e.Name||(0,X.A)("context_unknown"),withLeftTrim:!0,status:e.Overall,infoPopoverContent:o,hasClipboardButton:!0,path:(0,Z.YL)({database:w.J.useDatabaseId?e.Id:e.Name,backend:t},{withBasename:a})})}var ne=n(88610),te=n(53850),ae=n(23536),re=n.n(ae),oe=n(76086),le=n(56674);const ie=(0,te.Mz)((e=>e),(e=>le.GJ.endpoints.getTenantsInfo.select({clusterName:e}))),de=(0,te.Mz)((e=>e),((e,s)=>ie(s)),(e=>(0,ne.CN)(e,oe.Xm)),((e,s,n)=>{var t;const a=null!==(t=s(e).data)&&void 0!==t?t:[];return!n&&a.length>1?a.filter((e=>"Domain"!==e.Type)):a})),ce=e=>e.tenants.searchValue,ue=(0,te.Mz)([de,ne.yV,ce],((e,s,n)=>{let t=((e,s)=>s===ne.s$.ALL?e:e.filter((e=>e.Overall&&e.Overall!==y.m.Green)))(e,s);return t=((e,s)=>e.filter((e=>{const n=new RegExp(re()(s),"i");return n.test(e.Name||"")||n.test(e.controlPlaneName)})))(t,n),t}));var pe=n(12506),me=n(46549),he=n(56839),ve=n(28232),xe=n(41650),ge=n(48372);const je=JSON.parse('{"create-database":"Create database","remove":"Remove","edit":"Edit"}'),fe=(0,ge.g4)("ydb-tenants-table",{en:je}),be=(0,C.cn)("tenants");const Ne=({additionalTenantsProps:e,scrollContainerRef:s})=>{const n=(0,E.YQ)(),a=(0,ve.H)(),r=(0,f.$h)(),[o]=(0,E.Nt)(),{currentData:l,isFetching:i,error:d}=le.GJ.useGetTenantsInfoQuery({clusterName:a,isMetaDatabasesAvailable:r},{pollingInterval:o}),c=i&&void 0===l,[u,p]=t.useState(),m=(0,f.sH)()&&void 0!==w.J.onCreateDB,h=(0,f.g7)()&&void 0!==w.J.onEditDB,v=(0,f.TW)()&&void 0!==w.J.onDeleteDB,x=(0,E.N4)((e=>de(e,a))),g=(0,E.N4)(ce),j=(0,E.N4)((e=>ue(e,a))),b=(0,E.N4)(ne.yV),[N]=(0,E.iK)(oe._X),y=e=>{n((0,ne.$u)(e))},C=e=>{n((0,le.gB)(e))};return(0,ee.jsx)("div",{className:be("table-wrapper"),children:(0,ee.jsxs)(J.L,{fullHeight:!0,children:[(0,ee.jsx)(J.L.Controls,{renderExtraControls:()=>m&&a&&!c?(0,ee.jsxs)(V.$,{view:"action",onClick:()=>{var e;return null===(e=w.J.onCreateDB)||void 0===e?void 0:e.call(w.J,{clusterName:a})},children:[(0,ee.jsx)(z.I,{data:T.A}),fe("create-database")]}):null,children:(0,ee.jsxs)(t.Fragment,{children:[(0,ee.jsx)(q.v,{value:g,onChange:C,placeholder:"Database name",className:be("search")}),(0,ee.jsx)($.k,{value:b,onChange:y}),(0,ee.jsx)(L.T,{total:x.length,current:(null===j||void 0===j?void 0:j.length)||0,label:"Databases",loading:c})]})}),d?(0,ee.jsx)(B.o,{error:d}):null,(0,ee.jsx)(J.L.Table,{scrollContainerRef:s,loading:c,scrollDependencies:[g,b,u],children:l?(()=>{const s=[{name:"Name",header:"Database",render:({row:s})=>(0,ee.jsx)(se,{tenant:s,additionalTenantsProps:e}),width:440,sortable:!0,defaultOrder:P.Ay.DESCENDING},{name:"controlPlaneName",header:"Name",render:({row:e})=>e.controlPlaneName,width:200,sortable:!0,defaultOrder:P.Ay.DESCENDING},{name:"Type",width:200,resizeMinWidth:150,render:({row:e})=>"Serverless"!==e.Type?e.Type:(0,ee.jsxs)("div",{className:be("type"),children:[(0,ee.jsx)("span",{className:be("type-value"),children:e.Type}),(0,ee.jsx)(V.$,{className:be("type-button"),onClick:()=>C(e.sharedTenantName||""),children:"Show shared"})]})},{name:"State",width:150,render:({row:e})=>function(e){if(!e)return oe.Pd;switch(e){case pe.Uw.STATE_UNSPECIFIED:return"Unspecified";case pe.Uw.PENDING_RESOURCES:return"Pending";default:return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}}(e.State)},{name:"cpu",header:"CPU",width:80,render:({row:e})=>e.cpu&&e.cpu>1e4?(0,he.iM)(e.cpu):oe.Pd,align:P.Ay.RIGHT,defaultOrder:P.Ay.DESCENDING},{name:"memory",header:"Memory",width:120,render:({row:e})=>e.memory?(0,he.vX)(e.memory):oe.Pd,align:P.Ay.RIGHT,defaultOrder:P.Ay.DESCENDING},{name:"storage",header:"Storage",width:120,render:({row:e})=>e.storage?(0,he.vX)(e.storage):oe.Pd,align:P.Ay.RIGHT,defaultOrder:P.Ay.DESCENDING}];if(N&&s.push({name:"Network",header:"Network",width:120,align:P.Ay.RIGHT,defaultOrder:P.Ay.DESCENDING,sortAccessor:({NetworkWriteThroughput:e=0})=>Number(e),render:({row:e})=>{const{NetworkWriteThroughput:s}=e;return(0,xe.kf)(s)?(0,me.z3)({value:s,size:"mb",withSpeedLabel:!0,precision:2}):oe.Pd}}),s.push({name:"nodesCount",header:"Nodes",width:100,render:({row:e})=>e.nodesCount?(0,he.ZV)(e.nodesCount):oe.Pd,align:P.Ay.RIGHT,defaultOrder:P.Ay.DESCENDING},{name:"groupsCount",header:"Groups",width:100,render:({row:e})=>e.groupsCount?(0,he.ZV)(e.groupsCount):oe.Pd,align:P.Ay.RIGHT,defaultOrder:P.Ay.DESCENDING},{name:"PoolStats",header:"Pools",width:100,resizeMinWidth:60,sortAccessor:({PoolStats:e=[]})=>e.reduce(((e,s)=>e+(s.Usage||0)),0),defaultOrder:P.Ay.DESCENDING,align:P.Ay.LEFT,render:({row:e})=>(0,ee.jsx)(H._,{pools:e.PoolStats})}),a&&(v||h)){const e=function({clusterName:e,isEditDBAvailable:s,isDeleteDBAvailable:n}){return{name:"actions",header:"",width:40,resizeable:!1,align:P.Ay.CENTER,render:({row:t})=>{const a=[];return"Domain"===t.Type?null:(s&&a.push({text:fe("edit"),iconStart:(0,ee.jsx)(I.A,{}),action:()=>{var s;null===(s=w.J.onEditDB)||void 0===s||s.call(w.J,{clusterName:e,databaseData:t})}}),n&&a.push({text:fe("remove"),iconStart:(0,ee.jsx)(O.A,{}),action:()=>{var s;null===(s=w.J.onDeleteDB)||void 0===s||s.call(w.J,{clusterName:e,databaseData:t})},theme:"danger"}),a.length?(0,ee.jsx)(R.r,{items:a}):null)}}}({clusterName:a,isDeleteDBAvailable:v,isEditDBAvailable:h});s.push(e)}return 0===j.length&&b!==ne.s$.ALL?(0,ee.jsx)(G.v,{name:"thumbsUp",width:200}):(0,ee.jsx)(U.l,{columnsWidthLSKey:"databasesTableColumnsWidth",data:j,columns:s,settings:oe.N3,emptyDataMessage:"No such tenants",onSortChange:p})})():null})]})})};var ye=n(2468),we=n(55111),Ce=n(12207),Ee=n(88908),De=n(370),Ae=n(98167),Se=n(60448),ke=n(15298),Me=n(95109),_e=n(86782);function Te(e){return[(0,Me._E)(),(0,Me.Nh)(e),(0,Me.OV)(),(0,Me.jl)(),(0,Me.pH)(),(0,Me.fr)(),(0,Me.ID)()]}const Ie=({nodes:e})=>{const s=(0,f.Z9)(),n=Te({}),t=s?n:n.filter((e=>e.name!==_e.vg.PileName));return(0,ee.jsx)(U.l,{columnsWidthLSKey:"versionsTableColumnsWidth",data:e,columns:t,settings:oe.N3})};var Oe=n(2796),Pe=n(69448),Ve=n(45923),ze=n(13066),Re=n(49461);const Le=JSON.parse('{"title_overall":"Overall","title_storage-nodes":"Storage Nodes","title_database-nodes":"Database Nodes","title_other-nodes":"Other Nodes","title_database":"Database","title_version":"Version","nodes-count":{"one":"{{count}} node","other":"{{count}} nodes"},"group-by":"Group by:","action_expand":"Expand all","action_collapse":"Collapse all"}'),Be=(0,ge.g4)("ydb-versions",{en:Le}),Ge=(0,C.cn)("ydb-versions-nodes-tree-title"),He=({title:e,isDatabase:s,expanded:n,nodes:a,items:r,versionColor:o,preparedVersions:l,onClick:i})=>{const c=(0,d.W6)(),u=t.useCallback((e=>{e.nativeEvent.composedPath().some($e)||null===i||void 0===i||i()}),[i]),p=t.useMemo((()=>r?r.reduce(((e,s)=>s.nodes?e+s.nodes.length:e),0):a?a.length:0),[r,a]);return(0,ee.jsxs)("div",{className:Ge("overview"),onClick:u,children:[(0,ee.jsxs)(K.s,{gap:2,alignItems:"center",children:[o&&!s?(0,ee.jsx)("div",{className:Ge("version-color"),style:{background:o}}):null,s?(0,ee.jsx)(z.I,{data:Pe.A}):null,e?(0,ee.jsxs)(t.Fragment,{children:[e,(0,ee.jsx)(Re.b,{text:e,size:"s",className:Ge("clipboard-button"),view:"flat"})]}):null,s?(0,ee.jsxs)(V.$,{size:"s",onClick:()=>c.push((0,Z.YL)({database:e,diagnosticsTab:"nodes"})),children:[Be("nodes-count",{count:p}),(0,ee.jsx)(z.I,{data:Oe.A})]}):(0,ee.jsx)(Ee.E,{variant:"body-2",color:"hint",children:Be("nodes-count",{count:p})})]}),(0,ee.jsxs)(K.s,{alignItems:"center",gap:4,children:[s&&l?(0,ee.jsx)("div",{className:Ge("version-progress"),children:(0,ee.jsx)(Se.p,{preparedVersions:l,withTitles:!1})}):null,(0,ee.jsx)(z.I,{className:Ge("icon"),data:n?Ve.A:ze.A})]})]})};function $e(e){return e instanceof HTMLElement&&("BUTTON"===e.nodeName&&!e.hasAttribute("disabled")&&"true"!==e.getAttribute("aria-disabled")||e.hasAttribute("tabindex")&&e.tabIndex>-1)}const Ue=(0,C.cn)("ydb-versions-block"),qe=({expanded:e,renderHeader:s,renderContent:n})=>(0,ee.jsxs)("div",{className:Ue(null),children:[s(),e?(0,ee.jsx)(K.s,{direction:"column",className:Ue("content"),children:n()}):null]}),Je=(0,C.cn)("ydb-versions-grouped-node-tree"),We=({title:e,isDatabase:s,nodes:n,items:a,expanded:r=!1,versionColor:o,preparedVersions:l})=>{const[i,d]=t.useState(!1);t.useEffect((()=>{d(r)}),[r]);const c=()=>{d((e=>!e))};return(0,ee.jsx)("div",{className:Je("wrapper"),children:(0,ee.jsx)(qe,{expanded:i,renderHeader:()=>(0,ee.jsx)(He,{title:e,isDatabase:s,expanded:i,nodes:n,items:a,versionColor:o,preparedVersions:l,onClick:c}),renderContent:()=>a?null===a||void 0===a?void 0:a.map(((e,s)=>(0,ee.jsx)(We,{title:e.title,isDatabase:e.isDatabase,nodes:e.nodes,expanded:r,versionColor:e.versionColor,preparedVersions:e.preparedVersions},s))):(0,ee.jsx)(Ie,{nodes:n||[]})})})};var Ke=n(78018),Ze=n.n(Ke),Fe=n(66592),Qe=n(38596),Ye=n(20564);const Xe=(e=[],s)=>{const n=e.reduce(((e,s)=>(s.Version&&(e[s.Version]?e[s.Version]=e[s.Version]+1:e[s.Version]=1),e)),{}),t=Object.keys(n).map((e=>{const t=(0,Qe.U)(e),a=null===s||void 0===s?void 0:s.get(t);return{title:e,version:e,count:n[e],minorVersion:t,...a}}));return(0,Ye.M)(t)};function es(e,s){const n=e.map((e=>{const n=(0,Qe.U)(e.name),t=null===s||void 0===s?void 0:s.get(n);return{title:e.name,version:e.name,count:e.count,minorVersion:n,...t}}));return(0,Ye.M)(n)}let ss=function(e){return e.VERSION="Version",e.TENANT="Database",e.STORAGE="Storage",e}({});const ns=(e,s)=>{var n;return(null===(n=e.title)||void 0===n?void 0:n.localeCompare(s.title||""))||-1},ts=(e,s,n)=>{if(e&&e.length){if(n===ss.VERSION){const n=Ze()(e,"Version");return Object.keys(n).map((e=>{const t=n[e].filter(ls),a=Ze()(t,"Tenants"),r=Object.keys(a).map((e=>({title:e,isDatabase:!0,nodes:a[e]}))).sort(ns);return r.length?{title:e,items:r,versionColor:(0,Fe.xH)(e,s)}:null})).filter((e=>Boolean(e)))}{const n=e.filter(ls),t=Ze()(n,"Tenants");return Object.keys(t).map((e=>{const n=Xe(t[e],s),a=Ze()(t[e],"Version"),r=Object.keys(a).map((e=>({title:e,nodes:a[e],versionColor:(0,Fe.xH)(e,s)})));return r.length?{title:e,isDatabase:!0,items:r,preparedVersions:n}:null})).filter((e=>Boolean(e))).sort(ns)}}},as=(e,s)=>{if(!e||!e.length)return;const n=e.filter(os),t=Ze()(n,"Version");return Object.keys(t).map((e=>({title:e,nodes:t[e],versionColor:(0,Fe.xH)(e,s)})))},rs=(e,s)=>{if(!e||!e.length)return;const n=e.filter((e=>!os(e)&&!ls(e)&&e.Version)),t=Ze()(n,"Version");return Object.keys(t).map((e=>({title:e,nodes:t[e],versionColor:(0,Fe.xH)(e,s)})))};function os(e){var s;return Boolean(null===(s=e.Roles)||void 0===s?void 0:s.includes("Storage"))}function ls(e){return Boolean(e.Tenants)}var is=n(4980),ds=n(39567),cs=n(98730),us=n(21691);function ps(e){const s=function(){const[e]=(0,c.useQueryParam)("clusterName",c.StringParam),s=(0,E.N4)((e=>e.singleClusterMode)),{data:n}=ds.ub.useGetClustersListQuery(void 0,{skip:s});return t.useMemo((()=>{if(s)return;const t=(n||[]).find((s=>s.name===e)),a=(null===t||void 0===t?void 0:t.versions)||[];return()=>(0,us.kG)((0,us.HD)(a))}),[s,n,e])}();return t.useMemo((()=>s?s():(0,Fe.jh)(null===e||void 0===e?void 0:e.Versions)),[null===e||void 0===e?void 0:e.Versions,s])}const ms=(0,C.cn)("ydb-versions");function hs({cluster:e,loading:s}){const[n]=(0,E.Nt)(),{currentData:a,isLoading:r}=ke.s.useGetNodesQuery({tablets:!1,fieldsRequired:["SystemState","SubDomainKey"]},{pollingInterval:n}),o=ps(e),l=function({cluster:e,versionsDataMap:s,clusterLoading:n}){const{currentData:a}=ke.s.useGetNodesQuery((0,cs.LH)(e)||n?is.hT:{tablets:!1,fieldsRequired:["SystemState","SubDomainKey"],group:"Version"});return t.useMemo((()=>(0,cs.LH)(e)&&e.MapVersions?es(Object.entries(e.MapVersions).map((([e,s])=>({name:e,count:s}))),s):a?Array.isArray(a.tableGroups)?es(a.tableGroups,s):Xe(a.nodes,s):[]),[a,s,e])}({cluster:e,versionsDataMap:o,clusterLoading:s});return(0,ee.jsx)(Ae.r,{loading:s||r,children:(0,ee.jsx)(xs,{preparedVersions:l,nodes:null===a||void 0===a?void 0:a.nodes,versionsDataMap:o})})}const vs=De.z.nativeEnum(ss).catch(ss.VERSION);function xs({preparedVersions:e,nodes:s,versionsDataMap:n}){const[{groupBy:a},r]=(0,c.useQueryParams)({groupBy:c.StringParam}),o=vs.parse(a),l=t.useMemo((()=>ts(s,n,o)),[o,s,n]),i=t.useMemo((()=>as(s,n)),[s,n]),d=t.useMemo((()=>rs(s,n)),[s,n]);return(0,ee.jsxs)(K.s,{className:ms(),direction:"column",gap:6,children:[(0,ee.jsxs)(K.s,{gap:3,direction:"column",className:ms("overall"),children:[(0,ee.jsx)(Ee.E,{variant:"subheader-3",children:Be("title_overall")}),(0,ee.jsx)(Se.p,{preparedVersions:e,size:"m"})]}),(0,ee.jsx)(gs,{sectionTitle:Be("title_storage-nodes"),nodes:i}),(0,ee.jsx)(gs,{sectionTitle:Be("title_database-nodes"),nodes:l,renderControls:()=>{const e=[{value:ss.TENANT,content:Be("title_database")},{value:ss.VERSION,content:Be("title_version")}];return(0,ee.jsx)(Ce.l,{label:Be("group-by"),value:[o],options:e,onUpdate:e=>{return s=e[0],void r({groupBy:s},"replaceIn");var s},width:200,size:"m"})}}),(0,ee.jsx)(gs,{sectionTitle:Be("title_other-nodes"),nodes:d})]})}function gs({sectionTitle:e,renderControls:s,nodes:n}){const[a,r]=t.useState(!1);if(null===n||void 0===n||!n.length)return null;return(0,ee.jsxs)(K.s,{gap:3,direction:"column",children:[(0,ee.jsxs)(K.s,{justifyContent:"space-between",children:[(0,ee.jsxs)(K.s,{gap:3,children:[(0,ee.jsx)(Ee.E,{variant:"subheader-3",children:e}),null===s||void 0===s?void 0:s()]}),(0,ee.jsxs)(V.$,{onClick:()=>r((e=>!e)),children:[(0,ee.jsx)(z.I,{data:a?ye.A:we.A}),Be(a?"action_collapse":"action_expand")]})]}),n.map((({title:e,isDatabase:s,nodes:n,items:t,versionColor:r,preparedVersions:o})=>(0,ee.jsx)(We,{title:e,isDatabase:s,nodes:n,items:t,versionColor:r,expanded:a,preparedVersions:o},e)))]})}var js=n(44520),fs=n(7435),bs=n(80967),Ns=n(42655),ys=n(52443),ws=n(91611);const Cs=(0,C.cn)("bridge-info-table");const Es=t.memo((function({pile:e}){const s=t.useCallback((()=>{if(!e.State)return oe.Pd;const s=function(e){if(!e)return"unknown";switch(e.toUpperCase()){case cs.tI.PRIMARY:case cs.tI.PROMOTED:case cs.tI.SYNCHRONIZED:return"success";case cs.tI.NOT_SYNCHRONIZED:return"warning";case cs.tI.SUSPENDED:case cs.tI.DISCONNECTED:return"danger";case cs.tI.UNSPECIFIED:default:return"unknown"}}(e.State);return(0,ee.jsx)(ys.J,{theme:s,children:e.State})}),[e.State]),n=t.useMemo((()=>[{name:(0,ws.A)("field_state"),content:s()},{name:(0,ws.A)("field_nodes"),content:void 0===e.Nodes?oe.Pd:(0,he.ZV)(e.Nodes)}]),[s,e.Nodes]);return(0,ee.jsxs)(K.s,{direction:"column",gap:3,className:Cs("pile-card"),children:[(0,ee.jsx)(Ee.E,{variant:"body-2",children:e.Name||oe.Pd}),(0,ee.jsx)(W.u,{nameMaxWidth:160,children:n.map((({name:e,content:s})=>(0,ee.jsx)(W.u.Item,{name:e,children:s},e)))})]})})),Ds=t.memo((function({piles:e}){const s=t.useMemo((()=>e.map(((e,s)=>{var n;return(0,ee.jsx)(Es,{pile:e},null!==(n=e.PileId)&&void 0!==n?n:s)}))),[e]);return(0,ee.jsx)(K.s,{gap:2,className:Cs(),children:s})}));var As=n(87842);const Ss=(0,C.cn)("cluster-info");var ks=n(15132);const Ms=({tags:e,className:s="",gap:n=1})=>(0,ee.jsx)(K.s,{className:s,gap:n,wrap:"wrap",alignItems:"center",children:e&&e.map(((e,s)=>(0,ee.jsx)(ys.J,{size:"s",children:e},s)))});var _s=n(96344),Ts=n(35736);const Is=(0,C.cn)("ydb-disk-groups-stats"),Os={good:"success",warning:"warning",danger:"danger"};function Ps({stats:e,storageType:s}){const{erasure:n,allocatedSize:t,availableSize:a}=e,r=(0,me.fn)(Math.max(t,a)),o=(0,me.z3)({value:t,size:r}),l=(0,me.z3)({value:a,size:r}),i=Math.floor(t/(t+a)*100),d=[{name:(0,ws.A)("erasure"),content:n},{name:(0,ws.A)("allocated"),content:o},{name:(0,ws.A)("available"),content:l},{name:(0,ws.A)("usage"),content:(0,ee.jsxs)(K.s,{gap:2,alignItems:"center",children:[(0,ee.jsx)(_s.k,{theme:Os[(0,Ts.w)({fillWidth:i})],className:Is("progress"),value:i,size:"s"}),(0,ee.jsxs)(Ee.E,{color:"secondary",children:[i,"%"]})]})}];return(0,ee.jsxs)(K.s,{direction:"column",gap:3,className:Is(),children:[(0,ee.jsxs)(Ee.E,{variant:"body-2",children:[s," ",(0,ee.jsx)(Ee.E,{color:"secondary",variant:"body-2",children:`${(0,he.ZV)(e.createdGroups)} ${(0,ws.A)("context_of")} ${(0,he.ZV)(e.totalGroups)}`})]}),(0,ee.jsx)(W.u,{nameMaxWidth:160,children:d.map((({name:e,content:s})=>(0,ee.jsx)(W.u.Item,{name:e,children:s},e)))})]})}const Vs={Green:5,Blue:4,Yellow:3,Orange:2,Red:1,Grey:0},zs=(e,s)=>{var n;const a=[],r=(e=>{if((0,cs.LH)(e)&&e.MapDataCenters)return Object.entries(e.MapDataCenters).map((([e,s])=>(0,ee.jsxs)(t.Fragment,{children:[e," : ",(0,he.ZV)(s)]},e)))})(e);if(null!==r&&void 0!==r&&r.length&&a.push({label:(0,ws.A)("label_dc"),value:(0,ee.jsx)(Ms,{tags:r,gap:2,className:Ss("dc")})}),(0,cs.LH)(e)&&e.MapNodeStates){const s=Object.entries(e.MapNodeStates);s.sort(((e,s)=>Vs[s[0]]-Vs[e[0]]));const n=s.map((([e,s])=>(0,ee.jsx)(m.c.Label,{withStatusName:!1,status:e,size:"s",iconSize:12,children:(0,he.ZV)(s)},e)));a.push({label:(0,ws.A)("label_nodes-state"),value:(0,ee.jsx)(K.s,{gap:2,children:n})})}return a.push({label:(0,ws.A)("label_load"),value:(0,ee.jsx)(ks.O,{value:null===e||void 0===e?void 0:e.LoadAverage,capacity:null!==(n=null===e||void 0===e?void 0:e.RealNumberOfCpus)&&void 0!==n?n:null===e||void 0===e?void 0:e.NumberOfCpus})}),a.push(...s),a};const Rs=({cluster:e,loading:s,error:n,additionalClusterProps:a={},groupStats:r={},bridgePiles:o})=>{const{info:l=[],links:i=[]}=a,d=function(){const{cores:e,logging:s}=(0,b.Zd)();return t.useMemo((()=>{const n=[];return null!==e&&void 0!==e&&e.url&&n.push({title:(0,ws.A)("link_cores"),url:null===e||void 0===e?void 0:e.url}),null!==s&&void 0!==s&&s.url&&n.push({title:(0,ws.A)("link_logging"),url:null===s||void 0===s?void 0:s.url}),null!==s&&void 0!==s&&s.slo_logs_url&&n.push({title:(0,ws.A)("link_slo-logs"),url:s.slo_logs_url}),n}),[e,s])}(),c=i.concat(d),u=zs(null!==e&&void 0!==e?e:{},l),p=()=>s?(0,ee.jsx)(Ns.y,{className:Ss("skeleton"),rows:4}):n&&!e?null:(0,ee.jsxs)(W.u,{nameMaxWidth:200,children:[u.map((({label:e,value:s})=>(0,ee.jsx)(W.u.Item,{name:e,children:s},e))),c.length>0&&(0,ee.jsx)(W.u.Item,{name:(0,ws.A)("title_links"),children:(0,ee.jsx)(K.s,{direction:"column",gap:2,children:c.map((({title:e,url:s})=>(0,ee.jsx)(Y.K,{title:e,url:s},e)))})})]}),m=(0,As.lq)(r);return(0,ee.jsxs)(K.s,{gap:4,direction:"column",className:Ss(),children:[n?(0,ee.jsx)(B.o,{error:n,className:Ss("error")}):null,(0,ee.jsxs)(Ls,{children:[(0,ee.jsx)(Ee.E,{as:"div",variant:"subheader-2",className:Ss("section-title"),children:(0,ws.A)("title_details")}),p()]}),(()=>{const e=function(e){const s=[];return Object.entries(e).forEach((([e,n])=>{Object.values(n).forEach((n=>{s.push((0,ee.jsx)(Ps,{stats:n,storageType:e},`${e}|${n.erasure}`))}))})),s}(r);return s?null:(0,ee.jsx)(Ls,{children:(0,ee.jsxs)(K.s,{gap:6,width:"full",children:[(0,ee.jsxs)(K.s,{direction:"column",gap:2,children:[(0,ee.jsxs)(Ee.E,{as:"div",variant:"subheader-2",className:Ss("section-title"),children:[(0,ws.A)("title_storage-groups")," ",(0,ee.jsx)(Ee.E,{variant:"subheader-2",color:"secondary",children:(0,he.ZV)(m)})]}),(0,ee.jsx)(K.s,{gap:2,children:e})]}),null!==o&&void 0!==o&&o.length?(0,ee.jsxs)(K.s,{direction:"column",gap:2,className:Ss("bridge-table"),children:[(0,ee.jsxs)(Ee.E,{as:"div",variant:"subheader-2",className:Ss("section-title"),children:[(0,ws.A)("title_bridge")," ",(0,ee.jsx)(Ee.E,{variant:"subheader-2",color:"secondary",children:(0,he.ZV)(o.length)})]}),(0,ee.jsx)(Ds,{piles:o})]}):null]})})})()]})};function Ls({children:e}){return(0,ee.jsx)(K.s,{direction:"column",gap:3,children:e})}var Bs=n(21049),Gs=n(70043);const Hs=(0,C.cn)("ydb-cluster-dashboard"),$s={good:y.m.Green,warning:y.m.Yellow,danger:y.m.Red};function Us({children:e,className:s,collapsed:n}){return(0,ee.jsx)(K.s,{gap:"6",alignItems:"center",className:Hs("card",{collapsed:n},s),children:e})}function qs({title:e,children:s,legend:n,collapsed:t,...a}){const{main:r,secondary:o,note:l}=n;if(t){const{status:s,fillWidth:n}=a,t=n.toFixed(n>0?0:1);return(0,ee.jsx)(m.c.Label,{withStatusName:!1,status:$s[s],children:`${e} : ${t}%`})}return(0,ee.jsxs)(Us,{children:[(0,ee.jsx)(Bs.e,{...a,children:s}),(0,ee.jsxs)("div",{className:Hs("legend-wrapper"),children:[r&&(0,ee.jsx)(Bs.e.Legend,{children:r}),o&&(0,ee.jsx)(Bs.e.Legend,{color:"secondary",note:l,variant:"body-1",children:o})]})]})}function Js({collapsed:e}){return(0,ee.jsx)(Us,{className:Hs("skeleton-wrapper"),collapsed:e,children:(0,ee.jsx)(Gs.E,{className:Hs("skeleton")})})}function Ws({collapsed:e}){return(0,ee.jsxs)(t.Fragment,{children:[(0,ee.jsx)(Js,{collapsed:e}),(0,ee.jsx)(Js,{collapsed:e}),(0,ee.jsx)(Js,{collapsed:e})]})}var Ks,Zs=n(57428),Fs=n(18836);function Qs({collapsed:e,value:s,capacity:n,...t}){const{status:a,percents:r,legend:o,fill:l}=(0,Fs.s)({value:s,capacity:n,legendFormatter:Zs.vs,...t});return(0,ee.jsx)(qs,{collapsed:e,status:a,fillWidth:l,title:(0,ws.A)("title_cpu"),legend:{main:o,secondary:(0,ws.A)("context_cpu"),note:(0,ws.A)("context_cpu-description")},children:(0,ee.jsx)(Bs.e.Value,{children:r})})}function Ys({value:e,capacity:s,collapsed:n,...t}){const{status:a,percents:r,legend:o,fill:l}=(0,Fs.s)({value:e,capacity:s,legendFormatter:Zs.cO,...t});return(0,ee.jsx)(qs,{status:a,fillWidth:l,title:(0,ws.A)("title_memory"),collapsed:n,legend:{main:o,secondary:(0,ws.A)("context_memory"),note:(0,ws.A)("context_memory-description")},children:(0,ee.jsx)(Bs.e.Value,{children:r})})}function Xs({percentsValue:e,throughput:s,collapsed:n,...t}){const[a]=(0,bs.i)(oe._X);if(!a)return null;const{status:r,percents:o,fill:l}=(0,Fs.v)({fillWidth:100*e,...t}),i=(d=s,(0,me.z3)({value:d,withSpeedLabel:!0}));var d;return(0,ee.jsx)(qs,{status:r,fillWidth:l,title:(0,ws.A)("title_network"),collapsed:n,legend:{main:i,secondary:(0,ws.A)("context_network"),note:(0,ws.A)("context_network-description")},children:(0,ee.jsx)(Bs.e.Value,{children:o})})}function en({value:e,capacity:s,groups:n,collapsed:t,...a}){const{status:r,percents:o,legend:l,fill:i}=(0,Fs.s)({value:e,capacity:s,legendFormatter:Zs.cO,...a});return(0,ee.jsx)(qs,{status:r,fillWidth:i,title:(0,ws.A)("title_storage"),collapsed:t,legend:{main:l,secondary:(0,ws.A)("context_storage",{count:n}),note:(0,ws.A)("context_storage-description")},children:(0,ee.jsx)(Bs.e.Value,{children:o})})}function sn(){return sn=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},sn.apply(null,arguments)}const nn=function(e){return t.createElement("svg",sn({viewBox:"0 0 16 15"},e),Ks||(Ks=t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.98 1.826a.75.75 0 00-.96-1.152L10.376 3.71a1.25 1.25 0 01-1.196.225l-2.155-.718a2.75 2.75 0 00-2.973.837L.926 7.767a.75.75 0 101.148.966l3.125-3.712a1.25 1.25 0 011.352-.38l2.155.718a2.75 2.75 0 002.63-.496l3.644-3.037zM13.5 8h-2a.5.5 0 00-.5.5V13a.5.5 0 00.5.5h2a.5.5 0 00.5-.5V8.5a.5.5 0 00-.5-.5zm-4 5a.5.5 0 01-.5.5H7a.5.5 0 01-.5-.5v-2.5A.5.5 0 017 10h2a.5.5 0 01.5.5V13zM5 13a.5.5 0 01-.5.5h-2A.5.5 0 012 13v-.5a.5.5 0 01.5-.5h2a.5.5 0 01.5.5v.5zm-2.5 2h11a2 2 0 002-2V8.5a2 2 0 00-2-2h-2a2 2 0 00-2 2v.063A2.004 2.004 0 009 8.5H7a2 2 0 00-2 2v.063a2.005 2.005 0 00-.5-.063h-2a2 2 0 00-2 2v.5a2 2 0 002 2z",fill:"currentColor"})))};function tn(e){const[s,n]=(0,bs.i)(oe.zU),a=(0,f.Z9)(),r=t.useMemo((()=>{var s;if(!a||!(0,cs.E5)(e.cluster))return;const{BridgeInfo:n}=e.cluster;return null!==n&&void 0!==n&&null!==(s=n.Piles)&&void 0!==s&&s.length?n.Piles:void 0}),[e.cluster,a]);return e.error?(0,ee.jsx)(B.o,{error:e.error,className:Hs("error")}):(0,ee.jsx)(js.E,{arrowPosition:"end",size:"l",expanded:s,onUpdate:()=>n(!s),className:Hs("overview-wrapper",{collapsed:!s}),summary:(0,ee.jsxs)(K.s,{alignItems:"center",justifyContent:"space-between",width:"100%",className:Hs("disclosure-summary"),children:[(0,ee.jsxs)(K.s,{gap:2,alignItems:"center",children:[(0,ee.jsx)(z.I,{data:nn,size:16}),(0,ee.jsx)(Ee.E,{variant:"body-2",color:"primary",className:Hs("title"),children:(0,ws.A)("label_overview")})]}),!s&&(0,ee.jsx)(an,{...e,collapsed:!0})]}),children:(0,ee.jsxs)("div",{className:Hs("disclosure-content"),children:[(0,ee.jsx)(an,{...e}),(0,ee.jsx)(Rs,{...e,bridgePiles:r})]})})}function an({collapsed:e,...s}){return(0,f.fp)()?(0,ee.jsx)(K.s,{wrap:!0,className:Hs("dashboard-wrapper",{collapsed:e}),children:(0,ee.jsx)(rn,{...s,collapsed:e})}):null}function rn({cluster:e,groupStats:s={},loading:n,collapsed:t}){if(n)return(0,ee.jsx)(Ws,{collapsed:t});const a=[];if((0,cs.LH)(e)){const{CoresUsed:s,NumberOfCpus:n,CoresTotal:r}=e,o=null!==r&&void 0!==r?r:n;(0,fs.f8)(s)&&(0,fs.f8)(o)&&a.push((0,ee.jsx)(Qs,{value:s,capacity:o,collapsed:t},"cores"))}const{StorageTotal:r,StorageUsed:o}=e;if((0,fs.f8)(r)&&(0,fs.f8)(o)){const e=(0,As.lq)(s);a.push((0,ee.jsx)(en,{value:o,capacity:r,groups:e,collapsed:t},"storage"))}const{MemoryTotal:l,MemoryUsed:i}=e;if((0,fs.f8)(l)&&(0,fs.f8)(i)&&a.push((0,ee.jsx)(Ys,{value:i,capacity:l,collapsed:t},"memory")),(0,cs.E5)(e)){const{NetworkUtilization:s,NetworkWriteThroughput:n}=e;(0,fs.f8)(s)&&a.push((0,ee.jsx)(Xs,{percentsValue:s,throughput:n,collapsed:t},"network"))}return a}const on=(0,C.cn)("ydb-cluster");function ln({additionalClusterProps:e,additionalTenantsProps:s}){var n;const C=t.useRef(null),T=(0,f.fp)(),I=(0,g.s)(),O=(0,As.iJ)(),P=(0,D.b)(),V=(0,f.RK)(),z=P&&V,[R]=(0,E.Nt)(),L=(0,E.YQ)(),B=function(){const e=(0,E.YQ)(),s=(0,E.N4)((e=>e.cluster.defaultClusterTab)),n=(0,g.s)(),a=(0,As.iJ)(),r=(0,d.W5)(j.Ay.cluster),{activeTab:o}=(null===r||void 0===r?void 0:r.params)||{};let l;const i=!n&&o===As.Bi.network,c=!a&&o===As.Bi.events;l=i||c?b.Oy:(0,As.eC)(o)?o:s;return t.useEffect((()=>{l!==s&&e((0,b.Yv)(l))}),[l,s,e]),l}(),[{clusterName:G,backend:H}]=(0,c.useQueryParams)({clusterName:c.StringParam,backend:c.StringParam}),$=(0,E.N4)((e=>(0,b.zR)(e,null!==G&&void 0!==G?G:void 0))),{title:U}=(0,b.Zd)(),q=null!==U&&void 0!==U?U:$,{data:{clusterData:J,groupsStats:W}={},isLoading:K,error:Z}=b.Zh.useGetClusterInfoQuery(null!==G&&void 0!==G?G:void 0,{pollingInterval:R}),F=Z&&"object"===typeof Z?Z:void 0,Q=(0,E.N4)((e=>(0,b.ds)(e,null!==G&&void 0!==G?G:void 0)));t.useEffect((()=>{L((0,N.g)("cluster",{}))}),[L]);const Y=t.useMemo((()=>{const e=[];return I||e.push(As.Bi.network),O||e.push(As.Bi.events),z||e.push(As.Bi.configs),As.bn.filter((s=>!e.includes(s.id)))}),[O,I,z]),X=t.useMemo((()=>Y.find((({id:e})=>e===B))),[B,Y]),{appTitle:se}=(0,A.J)();return(0,ee.jsx)(p.e,{children:(0,ee.jsxs)("div",{className:on(),ref:C,children:[(0,ee.jsx)(i.mg,{defaultTitle:`${q} \u2014 ${se}`,titleTemplate:`%s \u2014 ${q} \u2014 ${se}`,children:X?(0,ee.jsx)("title",{children:X.title}):null}),(0,ee.jsx)("div",{className:on("header"),children:(()=>{if(K)return(0,ee.jsx)(a.E,{className:on("title-skeleton")});const e=(null===J||void 0===J?void 0:J.Overall)||y.m.Grey;return(0,ee.jsxs)(m.c,{className:on("title"),children:[q,(0,ee.jsx)(m.c.Label,{status:e,note:h.D[e]})]})})()}),(0,ee.jsx)("div",{className:on("sticky-wrapper"),children:(0,ee.jsx)(u.E,{className:on("auto-refresh-control")})}),T&&(0,ee.jsx)("div",{className:on("dashboard"),children:(0,ee.jsx)(tn,{cluster:null!==J&&void 0!==J?J:{},groupStats:W,loading:K,error:F||(null===J||void 0===J?void 0:J.error),additionalClusterProps:e})}),(0,ee.jsx)("div",{className:on("tabs-sticky-wrapper"),children:(0,ee.jsx)(r.f,{value:B,children:(0,ee.jsx)(o.w,{size:"l",children:Y.map((({id:e,title:s})=>{const n=(0,As.a)(e,{clusterName:G,backend:H});return(0,ee.jsx)(l.o,{value:e,children:(0,ee.jsx)(v.E,{view:"primary",as:"tab",to:n,onClick:()=>{L((0,b.Yv)(e))},children:s})},e)}))})})}),(0,ee.jsx)("div",{className:on("content"),children:(0,ee.jsxs)(d.dO,{children:[(0,ee.jsx)(d.qh,{path:(0,j.a3)((0,As.a)(As.Bi.tablets)).pathname,children:(0,ee.jsx)(_.Q,{loading:K,tablets:Q,scrollContainerRef:C})}),(0,ee.jsx)(d.qh,{path:(0,j.a3)((0,As.a)(As.Bi.tenants)).pathname,children:(0,ee.jsx)(Ne,{additionalTenantsProps:s,scrollContainerRef:C})}),(0,ee.jsx)(d.qh,{path:(0,j.a3)((0,As.a)(As.Bi.nodes)).pathname,children:(0,ee.jsx)(k.G,{scrollContainerRef:C})}),(0,ee.jsx)(d.qh,{path:(0,j.a3)((0,As.a)(As.Bi.storage)).pathname,children:(0,ee.jsx)(M.z,{scrollContainerRef:C})}),I&&(0,ee.jsx)(d.qh,{path:(0,j.a3)((0,As.a)(As.Bi.network)).pathname,children:(0,ee.jsx)(x.x,{scrollContainerRef:C})}),(0,ee.jsx)(d.qh,{path:(0,j.a3)((0,As.a)(As.Bi.versions)).pathname,children:(0,ee.jsx)(hs,{cluster:J,loading:K})}),O&&(0,ee.jsx)(d.qh,{path:(0,j.a3)((0,As.a)(As.Bi.events)).pathname,children:null===(n=w.J.renderEvents)||void 0===n?void 0:n.call(w.J,{scrollContainerRef:C})}),z&&(0,ee.jsx)(d.qh,{path:(0,j.a3)((0,As.a)(As.Bi.configs)).pathname,children:(0,ee.jsx)(S.U,{className:on("cluster-configs"),scrollContainerRef:C})}),(0,ee.jsx)(d.qh,{render:()=>(0,ee.jsx)(d.rd,{to:(0,j.a3)((0,As.a)(B))})})]})})]})})}},36388:(e,s,n)=>{"use strict";n.d(s,{A:()=>a});var t=n(59284);const a=e=>t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 13.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14m1-4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0M8.75 5a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0z",clipRule:"evenodd"}))},42655:(e,s,n)=>{"use strict";n.d(s,{y:()=>c});var t=n(59284),a=n(1608),r=n(77506),o=n(66781),l=n(60712);const i=(0,r.cn)("ydb-info-viewer-skeleton"),d=()=>(0,l.jsxs)("div",{className:i("label"),children:[(0,l.jsx)(a.E,{className:i("label__text")}),(0,l.jsx)("div",{className:i("label__dots")})]}),c=({rows:e=8,className:s,delay:n=600})=>{const[r]=(0,o.y)(n);let c=(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(d,{}),(0,l.jsx)(a.E,{className:i("value")})]});return r||(c=null),(0,l.jsx)("div",{className:i(null,s),children:[...new Array(e)].map(((e,s)=>(0,l.jsx)("div",{className:i("row"),children:c},`skeleton-row-${s}`)))})}},43665:e=>{e.exports=function(e,s,n,t){for(var a=-1,r=null==e?0:e.length;++a<r;){var o=e[a];s(t,o,n(o),e)}return t}},44520:(e,s,n)=>{"use strict";n.d(s,{E:()=>C});var t=n(60712),a=n(59284),r=n(62609),o=n(79411);const l=a.createContext(void 0),i=a.createContext(void 0);function d(e){const{size:s,disabled:n,defaultExpanded:r,arrowPosition:d,summary:c,keepMounted:u,onUpdate:p,onSummaryKeyDown:m,expanded:h}=e,[v,x]=a.useState((()=>Boolean(r))),g=void 0!==h,j=(0,o.u)(),f=`disclosure${j}`;return(0,t.jsx)(l.Provider,{value:{size:s,disabled:n,summary:c,arrowPosition:d,keepMounted:u,expanded:g?h:v,ariaControls:j,ariaLabelledby:f,onSummaryKeyDown:m},children:(0,t.jsx)(i.Provider,{value:()=>{x((e=>!e));p(g?!h:!v)},children:e.children})})}function c(){const e=a.useContext(l);if(void 0===e)throw new Error("useDisclosureAttributes must be used within DisclosureProvider");return e}var u=n(72630),p=n(6871);const m=(0,n(10417).om)("disclosure"),h="disclosure-summary",v="disclosure-details";function x({children:e,qa:s,className:n}){const r=a.useRef(null),{ariaControls:o,ariaLabelledby:l,keepMounted:i,expanded:d}=c();return(0,t.jsx)(u.A,{nodeRef:r,in:d,addEndListener:e=>r.current?.addEventListener("animationend",e),classNames:(0,p.L)(m),mountOnEnter:!i,unmountOnExit:!i,appear:!0,children:(0,t.jsx)("div",{ref:r,id:o,role:"region","aria-labelledby":l,className:m("content",{visible:d},n),"data-qa":s||v,children:e})})}x.displayName="DisclosureDetails";var g=n(60461),j=n(52140);const f={m:14,l:16,xl:20};function b(){(0,j.m)('[Disclosure] Physical values (left, right) of "arrowPosition" property are deprecated. Use logical values (start, end) instead.')}function N({children:e,qa:s}){const n=function(){const e=a.useContext(i);if(void 0===e)throw new Error("useToggleDisclosure must be used within DisclosureProvider");return e}(),{ariaControls:r,ariaLabelledby:o,expanded:l,disabled:d,onSummaryKeyDown:u}=c(),p={onClick:n,ariaControls:r,id:o,expanded:l,disabled:d,qa:s,onKeyDown:u};return e(p,(0,t.jsx)(y,{...p}))}const y=a.forwardRef((function({onClick:e,ariaControls:s,id:n,expanded:a,disabled:r,qa:o,onKeyDown:l,className:i},d){const{size:u,summary:p,arrowPosition:v}=c();let x=v;return"left"===x&&(b(),x="start"),"right"===x&&(b(),x="end"),(0,t.jsxs)("button",{type:"button","aria-expanded":a,className:m("trigger",{disabled:r,arrow:x},i),"aria-controls":s,id:n,onClick:e,disabled:r,"data-qa":o||h,onKeyDown:l,ref:d,children:[(0,t.jsx)(g.I,{size:f[u],direction:a?"top":"bottom"}),p]})}));N.displayName="DisclosureSummary";const w=(0,r.g)(N),C=a.forwardRef((function(e,s){const{size:n="m",disabled:r=!1,defaultExpanded:o=!1,arrowPosition:l="start",summary:i="",className:c,keepMounted:u=!0,children:p,onUpdate:h=()=>{},onSummaryKeyDown:v,expanded:g,qa:j}=e,[f,b]=function(e,{disclosureQa:s}){const n=a.Children.toArray(e);let r,o;const l=[];for(const t of n){if(w(t)){if(r)throw new Error("Only one <Disclosure.Summary> component is allowed");r=t}else l.push(t)}l.length>0&&(o=(0,t.jsx)(x,{qa:s&&`${s}-details`,children:l}));r||(r=(0,t.jsx)(N,{qa:s&&`${s}-summary`,children:e=>(0,t.jsx)(y,{...e})}));return[r,o]}(p,{disclosureQa:j});return(0,t.jsx)(d,{disabled:r,defaultExpanded:o,expanded:g,keepMounted:u,size:n,summary:i,arrowPosition:l,onUpdate:h,onSummaryKeyDown:v,children:(0,t.jsxs)("section",{ref:s,className:m({size:n},c),"data-qa":j,children:[f,b]})})}));C.Summary=N,C.Details=x,C.displayName="Disclosure"},45923:(e,s,n)=>{"use strict";n.d(s,{A:()=>a});var t=n(59284);const a=e=>t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.03 10.53a.75.75 0 0 1-1.06 0L8 6.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06",clipRule:"evenodd"}))},60448:(e,s,n)=>{"use strict";n.d(s,{p:()=>j});var t=n(59284),a=n(80136),r=n(32752),o=n(24342),l=n(13847),i=n(77506),d=n(48372);const c=JSON.parse('{"action_show_more":"Show {{count}} more","action_hide":"Hide {{count}}","tooltip_nodes":{"one":"{{count}} Node","other":"{{count}} Nodes"}}'),u=(0,d.g4)("ydb-versions-bar",{en:c});var p=n(60712);const m=(0,i.cn)("ydb-versions-bar"),h=4,v=h-1,x=200,g=200;function j({preparedVersions:e,withTitles:s=!0,size:n="s"}){const i=e.length>h&&"s"===n,[d,c]=t.useState(),[j,b]=t.useState(!1),N=t.useMemo((()=>{const s=e.reduce(((e,s)=>e+(s.count||0)),0);return e.map((e=>({value:(e.count||0)/s*100,color:e.color,version:e.version,count:e.count})))}),[e]),y=t.useMemo((()=>j?e:i?e.slice(0,v):e),[j,e,i]),w=e=>{e.preventDefault(),e.stopPropagation(),b(!0)},C=e=>{e.preventDefault(),e.stopPropagation(),b(!1)},E=t.useMemo((()=>(0,l.debounce)((e=>{c(e)}),x)),[]),D=t.useMemo((()=>(E.cancel(),(0,l.debounce)((()=>{c(void 0)}),x))),[E]),A=e=>Boolean(d&&d!==e);return(0,p.jsxs)(r.s,{direction:"column",className:m("bar-wrapper",{size:n}),wrap:!0,children:[(0,p.jsx)(r.s,{className:m("bar",{size:n}),grow:1,children:N.map((e=>(0,p.jsx)(o.m,{content:(0,p.jsxs)(t.Fragment,{children:[u("tooltip_nodes",{count:e.count}),(0,p.jsx)("br",{}),e.version]}),placement:"m"===n?"auto":"top-start",openDelay:g,children:(0,p.jsx)("span",{onMouseEnter:()=>{E(e.version)},onMouseLeave:D,className:m("version",{dimmed:A(e.version),size:n}),style:{backgroundColor:e.color,width:`${e.value}%`}})},e.version)))}),s&&(0,p.jsxs)(r.s,{className:m("titles-wrapper",{size:n}),children:[y.map((e=>(0,p.jsx)(f,{version:e.version,color:e.color||"",count:e.count,isDimmed:A(e.version),onMouseEnter:()=>{E(e.version)},onMouseLeave:D,size:n},e.version))),(()=>{if(!i)return null;const s=e.length-v;return j?(0,p.jsx)(a.$,{view:"flat-secondary",size:"s",onClick:C,className:m("button"),children:u("action_hide",{count:s})}):(0,p.jsx)(a.$,{view:"flat-secondary",size:"s",onClick:w,className:m("button"),children:u("action_show_more",{count:s})})})()]})]})}function f({version:e,color:s,count:n,isDimmed:t,onMouseEnter:a,onMouseLeave:l,size:i}){return(0,p.jsx)(o.m,{content:u("tooltip_nodes",{count:n}),placement:"bottom-end",openDelay:g,children:(0,p.jsxs)(r.s,{alignItems:"center",className:m("title",{size:i}),children:[(0,p.jsx)(b,{size:i,dimmed:t,color:s}),(0,p.jsx)("div",{className:m("title-text",{dimmed:t,size:i}),onMouseEnter:a,onMouseLeave:l,children:e})]})})}function b({size:e,dimmed:s,color:n}){const t="m"===e?8:6,a=t/2;return(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:`0 0 ${t} ${t}`,fill:"none",className:m("version-icon",{dimmed:s}),children:(0,p.jsx)("circle",{cx:a,cy:a,r:a,fill:n})})}},70043:(e,s,n)=>{"use strict";n.d(s,{E:()=>o});var t=n(1608),a=n(66781),r=n(60712);const o=({delay:e=600,className:s})=>{const[n]=(0,a.y)(e);return n?(0,r.jsx)(t.E,{className:s}):null}},78018:(e,s,n)=>{var t=n(80472),a=n(2680),r=Object.prototype.hasOwnProperty,o=a((function(e,s,n){r.call(e,n)?e[n].push(s):t(e,n,[s])}));e.exports=o},81061:(e,s,n)=>{var t=n(75125);e.exports=function(e,s,n,a){return t(e,(function(e,t,r){s(a,e,n(e),r)})),a}},91364:(e,s,n)=>{"use strict";n.d(s,{A:()=>a});var t=n(59284);const a=e=>t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5 13.5h6a1.5 1.5 0 0 0 1.5-1.5V7.243a1.5 1.5 0 0 0-.44-1.061L8.819 2.939a1.5 1.5 0 0 0-1.06-.439H5A1.5 1.5 0 0 0 3.5 4v8A1.5 1.5 0 0 0 5 13.5m9-6.257a3 3 0 0 0-.879-2.122L9.88 1.88A3 3 0 0 0 7.757 1H5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3zM5 8.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5A.75.75 0 0 1 5 8.25m.75 2.25a.75.75 0 0 0 0 1.5h2.5a.75.75 0 0 0 0-1.5z",clipRule:"evenodd"}))}}]);