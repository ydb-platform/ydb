"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[2180],{99683:(e,t,r)=>{r.d(t,{l:()=>o});var n=r(68330),s=r(24362),a=r(75859);const l=(0,s.cn)("ydb-cell-with-popover");function o(e){let{children:t,className:r,wrapperClassName:s,...o}=e;return(0,a.jsx)("div",{className:l(null,s),children:(0,a.jsx)(n.J,{className:l("popover",r),...o,children:t})})}},79023:(e,t,r)=>{r.d(t,{u:()=>y});var n,s,a,l,o,i,d,c,u,m,h,p=r(88776),g=r(24362),v=r(68963);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}const w=function(e){return v.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 383 396",fill:"none"},e),n||(n=v.createElement("path",{d:"M307.333 168.43c9.4-14.2 14.1-32.6 14.1-55.3 0-34.4-11.7-61.9-35.3-82.2-23.4-20.5-63-30.7-106.7-30.7-13.1 0-24.1.9-34.8 2.7-10.7 1.8-20.1 3.9-28.2 6.3-5.4 1.6-16.1 5.7-23.3 8.6-4.1 1.7-6.9 6-6.9 10.8v39.5c0 8.2 7.8 13.8 14.9 10.5a458.74 458.74 0 001.806-.818c2.367-1.074 4.452-2.02 5.894-2.581 5.7-2.3 12.4-4.2 20.1-5.8 7.7-1.6 16.3-2.4 25.7-2.4 22.2 0 43.1 5 52.3 14.9 9.2 10 13.8 22.499 13.8 37.499 0 13-2.7 24.1-8.2 33.2-5.5 9.1-13.1 18-22.9 26.5-7.9 6.9-15.2 13.5-22 19.8-6.8 6.3-12.6 13.2-17.5 20.7s-8.7 16-11.3 25.3c-1.6 5.6-2.7 20.3-3.3 31-.3 6.6 4.5 12.2 10.7 12.2h51.2c5.4 0 10-4.4 10.6-10.2.6-5.7 2-12.5 5.5-17.8 4-5.9 8.7-11.8 14.7-17.3s13-11 20.9-16.7c8-5.6 16.2-12.1 24.9-19.4 12.8-11.4 23.9-24.1 33.3-38.3zm-167.6 212.7c9 9.5 20.1 14.2 33.4 14.2 6.3 0 12.4-1.3 18.2-4 5.8-2.6 10.9-6 15.2-10.3 4.3-4.3 7.7-9.4 10.2-15.2 2.5-5.8 3.7-12.1 3.7-19 0-6.8-1.2-13.2-3.7-19-2.5-5.8-5.9-10.9-10.2-15.4-4.3-4.5-9.4-7.9-15.2-10.3-5.8-2.4-11.9-3.6-18.2-3.6-13.3 0-24.4 4.6-33.4 13.9s-13.5 20.8-13.5 34.5c0 13.4 4.5 24.8 13.5 34.2z",fill:"#ECF2F9"})),s||(s=v.createElement("path",{d:"M213.933 353.03h-193.5c-10 0-18.2-8.2-18.2-18.2v-125.4c0-10 8.2-18.2 18.2-18.2h193.5c10 0 18.2 8.2 18.2 18.2v125.4c0 10.1-8.2 18.2-18.2 18.2z",stroke:"#00E6C5",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4 10"})),a||(a=v.createElement("path",{d:"M21.034 214.732a5.2 5.2 0 100-10.4 5.2 5.2 0 000 10.4zm16.899 0a5.2 5.2 0 100-10.4 5.2 5.2 0 000 10.4zm16.9 0a5.2 5.2 0 100-10.4 5.2 5.2 0 000 10.4z",fill:"#2EE5C0"})),l||(l=v.createElement("path",{d:"M2.533 228.129h228.9",stroke:"#00E6C5",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4 10"})),o||(o=v.createElement("path",{d:"M301.033 264.83l-216.9 12c-7.3.4-13.3-5.2-13.3-12.5V96.93c0-7.3 6-12.9 13.3-12.5l216.9 12c5.6.3 10.1 5.7 10.1 12v144.4c0 6.3-4.5 11.7-10.1 12z",fill:"#027BF3"})),i||(i=v.createElement("path",{d:"M90.433 107.93c3.4.2 6.1-2.4 6.1-5.8s-2.7-6.3-6.1-6.4c-3.3-.2-6.1 2.4-6.1 5.8s2.7 6.3 6.1 6.4zm19.8.798c3.3.1 6-2.5 6-5.8s-2.7-6.1-6-6.3c-3.3-.1-6 2.5-6 5.8s2.7 6.2 6 6.3zm25.2-4.9c0 3.3-2.6 5.9-5.8 5.7-3.2-.1-5.9-2.9-5.9-6.2 0-3.3 2.6-5.9 5.9-5.7 3.2.1 5.8 2.9 5.8 6.2zm66.001 61.703l19.1-20.9 17.4 19.1-18.9 20.9 18.9 20.5-17.4 19.5-19.1-20.5-19.4 21.5-18.1-19.1 19.6-21.5-19.6-21 18.1-19.5 19.4 21z",fill:"#fff"})),d||(d=v.createElement("path",{d:"M327.433 112.83c0-28.4-21.7-37.1-33.5-37.9-.1 0-33.5 2.3-33.5 45.3 0 25.5 21.2 45.5 46 44.6 7.8-.3 14.9-2.6 21-6.4v-45.6z",fill:"#67B0F8"})),c||(c=v.createElement("path",{d:"M380.534 195.931c-2.9 3.4-7.6 3.7-10.5.8l-38.6-39 11.3-12.2 37.8 39c2.9 3 2.9 8 0 11.4z",fill:"#FF4645"})),u||(u=v.createElement("path",{d:"M342.833 145.629l-11.3 12.2 3.7 3.7c1.9 1.9 4.9 2 6.8.2 1.1-1 2.2-2.1 3.2-3.2.6-.7 1.3-1.4 1.9-2.1 1.6-1.9 1.5-4.8-.3-6.6l-4-4.2z",fill:"#D93654"})),m||(m=v.createElement("path",{d:"M267.633 154.13c-23-21.401-23-57.3 0-78.1 21.9-19.8 55.1-17 74.4 4.3 18.4 20.399 18.4 51.7 0 71.6-19.3 20.8-52.5 22.6-74.4 2.2zm9.4-10.802c15.6 15 39.8 14.2 54.1-.9 13.8-14.6 13.8-37.8 0-52.8-14.3-15.5-38.5-17-54.1-2.5-16.2 15.1-16.2 40.7 0 56.2z",fill:"#00236B"})),h||(h=v.createElement("path",{d:"M41.034 42.73a2 2 0 10-4 0h4zm-4 8.3a2 2 0 004 0h-4zm4 17.2a2 2 0 10-4 0h4zm-4 8.9a2 2 0 004 0h-4zm19.2-15.2a2 2 0 000-4v4zm-8.2-4a2 2 0 100 4v-4zm-17.9 4a2 2 0 000-4v4zm-8.2-4a2 2 0 100 4v-4zm15.1-15.2v8.3h4v-8.3h-4zm0 25.5v8.9h4v-8.9h-4zm19.2-10.3h-8.2v4h8.2v-4zm-26.1 0h-8.2v4h8.2v-4z",fill:"#2EE5C0"})))};var x=r(75859);const b=(0,g.cn)("empty-state"),N={s:150,m:250,l:350},y=e=>{let{image:t,title:r,description:n,actions:s,size:a="m",position:l="center"}=e;return(0,x.jsx)("div",{className:b({size:a}),children:(0,x.jsxs)("div",{className:b("wrapper",{size:a,position:l}),children:[(0,x.jsx)("div",{className:b("image"),children:t||(0,x.jsx)(p.J,{data:w,width:N[a],height:N[a]})}),(0,x.jsx)("div",{className:b("title",{size:a}),children:r}),(0,x.jsx)("div",{className:b("description"),children:n}),(0,x.jsx)("div",{className:b("actions"),children:s})]})})}},49201:(e,t,r)=>{r.d(t,{C:()=>l});var n=r(14979);const s=(0,r(30817).wZ)("ydb-entities-count",{ru:{of:"\u0438\u0437"},en:{of:"of"}});var a=r(75859);const l=e=>{let{total:t,current:r,label:l,loading:o,className:i}=e,d="";return l&&(d+="".concat(l,": ")),o?d+="...":(d+="".concat(r),t&&Number(t)!==Number(r)&&(d+=" ".concat(s("of")," ").concat(t))),(0,a.jsx)(n._,{theme:"info",size:"m",className:i,children:d})}},82073:(e,t,r)=>{r.d(t,{J:()=>o});var n=r(79023),s=r(56350),a=r(68746),l=r(75859);const o=e=>{let{title:t,description:r,...o}=e;return(0,l.jsx)(n.u,{image:(0,l.jsx)(s.Q,{name:"403"}),title:t||(0,a.Z)("403.title"),description:r||(0,a.Z)("403.description"),...o})}},86969:(e,t,r)=>{r.d(t,{J:()=>n.J});var n=r(82073)},8747:(e,t,r)=>{r.d(t,{V:()=>a});var n=r(68746),s=r(75859);const a=e=>{let{error:t,className:r,defaultMessage:a=(0,n.Z)("responseError.defaultMessage")}=e,l="";return t&&"string"===typeof t&&(l=t),t&&"object"===typeof t&&("data"in t&&"string"===typeof t.data?l=t.data:"statusText"in t&&"string"===typeof t.statusText?l=t.statusText:"message"in t&&"string"===typeof t.message&&(l=t.message)),(0,s.jsx)("div",{className:"error ".concat(r),children:l||a})}},26688:(e,t,r)=>{r.d(t,{V:()=>n.V});var n=r(8747)},68746:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(30817);const s=JSON.parse('{"403.title":"Access denied","403.description":"You don\u2019t have the necessary roles to view this page.","responseError.defaultMessage":"Response error"}'),a=JSON.parse('{"403.title":"\u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d","403.description":"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b.","responseError.defaultMessage":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430"}'),l=(0,n.wZ)("ydb-errors-access-denied",{ru:a,en:s})},16670:(e,t,r)=>{r.d(t,{a:()=>o});var n=r(2982),s=r(24362),a=r(75859);const l=(0,s.cn)("ydb-loader"),o=e=>{let{size:t="m",className:r}=e;return(0,a.jsx)("div",{className:l(null,r),children:(0,a.jsx)(n.a,{size:t})})}},65890:(e,t,r)=>{r.d(t,{k:()=>g});var n=r(39683),s=r(17176),a=r(88776),l=r(10502),o=r(92398),i=r(24362),d=r(51688),c=r(99683),u=r(69214),m=r(27506),h=r(75859);const p=(0,i.cn)("ydb-node-host-wrapper"),g=e=>{let{node:t,getNodeRef:r}=e;if(!t.Host)return(0,h.jsx)("span",{children:"\u2014"});const i=!(0,d.TA)(t),g=i&&r?r(t)+"internal":void 0,v=i?(0,o.a3)(t.NodeId,{tenantName:t.TenantName}):void 0,f=g?(0,h.jsx)(s.z,{size:"s",href:g,className:p("external-button"),target:"_blank",children:(0,h.jsx)(a.J,{data:n.Z})}):null;return(0,h.jsx)(c.l,{disabled:!i,content:(0,h.jsx)(m.bP,{data:t}),placement:["top","bottom"],behavior:l.x.Immediate,children:(0,h.jsx)(u.A,{name:t.Host,status:t.SystemState,path:v,hasClipboardButton:!0,additionalControls:f})})}},35113:(e,t,r)=>{r.d(t,{WQ:()=>_});var n=r(68963),s=r(5922),a=r(26688),l=r(47101),o=r(56711);const i="left",d=-1,c=40;const u=(0,r(24362).cn)("ydb-paginated-table");var m=r(75859);const h=e=>{let{children:t,className:r,height:n,width:s,align:a=i}=e;return(0,m.jsx)("td",{className:u("row-cell",{align:a},r),style:{height:"".concat(n,"px"),width:"".concat(s,"px"),maxWidth:"".concat(s,"px")},children:t})},p=e=>{let{index:t,columns:r,height:n}=e;return(0,m.jsx)("tr",{className:u("row"),children:r.map((e=>(0,m.jsx)(h,{height:n,width:e.width,align:e.align,className:e.className,children:(0,m.jsx)(o.O,{style:{width:"80%",height:"50%"}})},"".concat(e.name).concat(t))))})},g=e=>{let{row:t,index:r,columns:n,getRowClassName:s,height:a}=e;const l=null===s||void 0===s?void 0:s(t);return(0,m.jsx)("tr",{className:u("row",l),children:n.map((e=>(0,m.jsx)(h,{height:a,width:e.width,align:e.align,className:e.className,children:e.render({row:t,index:r})},"".concat(e.name).concat(r))))})},v=e=>{let{columns:t,children:r}=e;return(0,m.jsx)("tr",{className:u("row",{empty:!0}),children:(0,m.jsx)("td",{colSpan:t.length,className:u("td"),children:r})})},f=(0,n.memo)((function(e){var t;let{id:r,chunkSize:a,rowHeight:l,columns:o,chunkData:i,observer:d,getRowClassName:c}=e;const u=n.useRef(null);n.useEffect((()=>{const e=u.current;return e&&d.observe(e),()=>{e&&d.unobserve(e)}}),[d]);const h=null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.length,v=h?h*l:a*l;return(0,m.jsx)("tbody",{ref:u,id:r.toString(),style:{height:"".concat(v,"px")},children:(()=>{var e;return i&&i.active?i.loading||i.error?(0,s.c)(a).map((e=>(0,m.jsx)(p,{columns:o,height:l,index:e},e))):null===(e=i.data)||void 0===e?void 0:e.map(((e,t)=>(0,m.jsx)(g,{index:t,row:e,columns:o,height:l,getRowClassName:c},t))):null})()})}));function w(e){let{minWidth:t,maxWidth:r,getCurrentColumnWidth:s,onResize:a}=e;const l=n.useRef(null),[o,i]=n.useState(!1);return n.useEffect((()=>{const e=l.current;if(!e)return;let n,o,d;const c=function(e){let t,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];t=s,"number"!==typeof r&&(r=requestAnimationFrame((()=>{e(...t),r=null})))}}((e=>{if(x(e),"number"!==typeof n||"number"!==typeof o)return;const s=e.clientX-n,l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.max(t,Math.min(e,r))}(o+s,t,r);l!==d&&(d=l,null===a||void 0===a||a(d))})),u=e=>{x(e),void 0!==d&&(null===a||void 0===a||a(d)),i(!1),n=void 0,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)},m=e=>{o=s(),x(e),n=e.clientX,i(!0),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u)};return e.addEventListener("mousedown",m),()=>{e.removeEventListener("mousedown",m),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)}}),[a,t,r,s]),(0,m.jsx)("span",{ref:l,className:u("resize-handler",{resizing:o}),onClick:e=>x(e)})}function x(e){e.preventDefault(),e.stopPropagation()}const b=e=>{let{order:t}=e;return(0,m.jsx)("svg",{className:u("sort-icon",{desc:-1===t}),viewBox:"0 0 10 6",width:"10",height:"6",children:(0,m.jsx)("path",{fill:"currentColor",d:"M0 5h10l-5 -5z"})})},N=e=>{let{sortOrder:t,sortable:r,defaultSortOrder:n}=e;return r?(0,m.jsx)("span",{className:u("sort-icon-container",{shadow:!t}),children:(0,m.jsx)(b,{order:t||n})}):null},y=e=>{var t;let{column:r,resizeable:s,sortOrder:a,defaultSortOrder:l,onSort:o,rowHeight:i,onCellMount:d,onCellUnMount:c,onColumnsResize:h}=e;const p=n.useRef(null);n.useEffect((()=>{const e=p.current;return e&&(null===d||void 0===d||d(e)),()=>{e&&(null===c||void 0===c||c(e))}}),[d,c]);const g=n.useCallback((()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect().width}),[]),v=n.useCallback((e=>{null===h||void 0===h||h(r.name,e)}),[h,r.name]),f=null!==(t=r.header)&&void 0!==t?t:r.name;return(0,m.jsx)("th",{children:(0,m.jsxs)("div",{ref:p,className:u("head-cell-wrapper"),style:{height:"".concat(i,"px"),width:"".concat(r.width,"px")},children:[(0,m.jsxs)("div",{className:u("head-cell",{align:r.align,sortable:r.sortable},r.className),onClick:()=>{r.sortable&&(null===o||void 0===o||o(r.name))},children:[(0,m.jsx)("div",{className:u("head-cell-content"),children:f}),(0,m.jsx)(N,{sortOrder:a,sortable:r.sortable,defaultSortOrder:l})]}),s?(0,m.jsx)(w,{maxWidth:r.resizeMaxWidth,minWidth:r.resizeMinWidth,getCurrentColumnWidth:g,onResize:v}):null]})})},j=e=>{let{columns:t,onSort:r,onColumnsResize:s,defaultSortOrder:a=d,rowHeight:l=c}=e;const[o,i]=n.useState({}),h=e=>{let t={};if(e===o.columnId){if(o.sortOrder&&o.sortOrder!==a)return i(t),void(null===r||void 0===r||r(t));t={sortOrder:1===o.sortOrder?-1:1,columnId:e}}else t={sortOrder:a,columnId:e};null===r||void 0===r||r(t),i(t)};return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)("colgroup",{children:t.map((e=>(0,m.jsx)("col",{style:{width:"".concat(e.width,"px")}},e.name)))}),(0,m.jsx)("thead",{className:u("head"),children:(0,m.jsx)("tr",{children:t.map((e=>{var t;const r=o.columnId===e.name?o.sortOrder:void 0,n=s&&(null===(t=e.resizeable)||void 0===t||t);return(0,m.jsx)(y,{column:e,resizeable:n,sortOrder:r,defaultSortOrder:a,onSort:h,rowHeight:l,onColumnsResize:s},e.name)}))})})]})};var E=r(30817);const S=JSON.parse('{"empty":"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}'),C=(0,E.wZ)("ydb-paginated-table",{ru:S,en:{empty:"No data"}}),k="infiniteTable/INIT_CHUNK",O="infiniteTable/REMOVE_CHUNK",I="infiniteTable/SET_CHUNK_LOADING",T="infiniteTable/SET_CHUNK_DATA",z="infiniteTable/SET_CHUNK_ERROR",U="infiniteTable/RESET_CHUNKS",D=e=>({type:k,data:{id:e}}),G=e=>{let{limit:t,fetchData:r,columns:o,getRowClassName:i,rowHeight:d=c,parentContainer:h,initialSortParams:p,onColumnsResize:g,renderControls:w,renderEmptyDataMessage:x,renderErrorMessage:b,dependencyArray:N}=e;const y=n.useRef(!1),E=n.useRef(null),[S,G]=n.useReducer(((e,t)=>{switch(t.type){case T:{const{id:r,data:n}=t.data;return{...e,[r]:{loading:!1,wasLoaded:!0,active:!0,data:n}}}case z:{const{id:r,error:n}=t.data;return{...e,[r]:{loading:!1,wasLoaded:!0,active:!0,error:n}}}case k:{const{id:r}=t.data;return{...e,[r]:{loading:!1,wasLoaded:!1,active:!0}}}case I:{const{id:r}=t.data;return{...e,[r]:{loading:!0,wasLoaded:!1,active:!0}}}case O:{const{id:r}=t.data,n={...e};return delete n[r],n}case U:return{};default:return e}}),{}),[R,_]=n.useState(p),[P,A]=n.useState(t),[M,F]=n.useState(0),[L,Z]=n.useState(),V=n.useRef({}),K=n.useCallback((async e=>{G((e=>({type:I,data:{id:e}}))(e));const n=setTimeout((async()=>{const n=Number(e)*t;try{const s=await r(t,n,R),{data:a,total:l,found:o}=s;A(l),F(o),y.current=!0,G(((e,t)=>({type:T,data:{id:e,data:t}}))(e,a))}catch(s){if(null!==s&&void 0!==s&&s.isCancelled)return;G(((e,t)=>({type:z,data:{id:e,error:t}}))(e,s)),Z(s)}}),200);if(V.current[e]){const t=V.current[e];window.clearTimeout(t)}V.current[e]=n}),[r,t,R]),W=n.useCallback((e=>{G(D(e))}),[]),H=n.useCallback((e=>{if(G((e=>({type:O,data:{id:e}}))(e)),V.current[e]){const t=V.current[e];window.clearTimeout(t),delete V.current[e]}}),[]);n.useEffect((()=>()=>{Object.values(V.current).forEach((e=>{window.clearTimeout(e)})),V.current={}}),[]),n.useEffect((()=>{for(const e of Object.keys(S)){const t=S[Number(e)];null===t||void 0===t||!t.active||null!==t&&void 0!==t&&t.loading||null!==t&&void 0!==t&&t.wasLoaded||K(e)}}),[K,S]),n.useEffect((()=>{var e;(A(t),F(0),Z(void 0),G({type:U}),y.current=!1,h)?h.scrollTo(0,0):null===(e=E.current)||void 0===e||e.scrollTo(0,0);G(D("0"))}),[N,t,h]);const J=e=>{_(e),(()=>{for(const t of Object.keys(S)){var e;null!==(e=S[Number(t)])&&void 0!==e&&e.active&&G(D(t))}})()},Y=(e=>{let{onEntry:t,onLeave:r,parentContainer:s}=e;const a=n.useRef();return n.useEffect((()=>(a.current=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?t(e.target.id):r(e.target.id)}))}),{root:s,rootMargin:"100%"}),()=>{var e;null===(e=a.current)||void 0===e||e.disconnect(),a.current=void 0})),[s,t,r]),a.current})({onEntry:W,onLeave:H,parentContainer:h}),Q=M||t,B=Math.ceil(Q/t),q=()=>y.current&&0===M?(0,m.jsx)("tbody",{children:(0,m.jsx)(v,{columns:o,children:x?x():C("empty")})}):!y.current&&L?(0,m.jsx)("tbody",{children:(0,m.jsx)(v,{columns:o,children:b?b(L):(0,m.jsx)(a.V,{error:L})})}):Y?(0,s.c)(B).map((e=>{const r=S[e];return(0,m.jsx)(f,{observer:Y,id:e,chunkSize:t,rowHeight:d,columns:o,chunkData:r,getRowClassName:i},e)})):null,X=()=>(0,m.jsxs)("table",{className:u("table"),children:[(0,m.jsx)(j,{columns:o,onSort:J,onColumnsResize:g}),q()]});return(0,m.jsx)("div",{ref:E,className:u(null),children:w?(0,m.jsxs)(l.l,{children:[(0,m.jsx)(l.l.Controls,{children:w({inited:y.current,totalEntities:P,foundEntities:M})}),(0,m.jsx)(l.l.Table,{children:X()})]}):X()})};var R=r(89712);function _(e){let{columnsWidthLSKey:t,columns:r,...n}=e;const[s,a]=(0,R.M)(t),l=function(e,t){return e.map((e=>{var r;return{...e,width:null!==(r=t[e.name])&&void 0!==r?r:e.width}}))}(r,s);return(0,m.jsx)(G,{columns:l,onColumnsResize:a,...n})}},2098:(e,t,r)=>{r.d(t,{G:()=>d});var n=r(2639),s=r(19812),a=r(24362),l=r(89712),o=r(75859);const i=(0,a.cn)("ydb-resizeable-data-table");function d(e){let{columnsWidthLSKey:t,columns:r,settings:a,wrapperClassName:d,...c}=e;const[u,m]=(0,l.M)(t),h=(0,n.B)(r,u),p={...a,defaultResizeable:!0};return(0,o.jsx)("div",{className:i(null,d),children:(0,o.jsx)(s.ZP,{theme:"yandex-cloud",columns:h,onResize:m,settings:p,...c})})}},30629:(e,t,r)=>{r.d(t,{o:()=>i});var n=r(68963),s=r(77264),a=r(24362),l=r(75859);const o=(0,a.cn)("ydb-search"),i=e=>{let{onChange:t,value:r="",className:a,debounce:i=200,placeholder:d}=e;const[c,u]=n.useState(r),m=n.useRef();n.useEffect((()=>{u((e=>e!==r?r:e))}),[r]);return(0,l.jsx)(s.o,{hasClear:!0,autoFocus:!0,className:o(null,a),placeholder:d,value:c,onUpdate:e=>{u(e),window.clearTimeout(m.current),m.current=window.setTimeout((()=>{null===t||void 0===t||t(e)}),i)}})}},22692:(e,t,r)=>{r.d(t,{h:()=>o});var n=r(56711),s=r(24362),a=r(75859);const l=(0,s.cn)("table-skeleton"),o=e=>{let{rows:t=2,className:r}=e;return(0,a.jsxs)("div",{className:l(null,r),children:[(0,a.jsxs)("div",{className:l("row"),children:[(0,a.jsx)(n.O,{className:l("col-1")}),(0,a.jsx)(n.O,{className:l("col-2")}),(0,a.jsx)(n.O,{className:l("col-3")}),(0,a.jsx)(n.O,{className:l("col-4")}),(0,a.jsx)(n.O,{className:l("col-5")})]}),[...new Array(t)].map(((e,t)=>(0,a.jsx)("div",{className:l("row"),children:(0,a.jsx)(n.O,{className:l("col-full")})},"skeleton-row-".concat(t))))]})}},47101:(e,t,r)=>{r.d(t,{l:()=>o});var n=r(24362),s=r(22692),a=r(75859);const l=(0,n.cn)("ydb-table-with-controls-layout"),o=e=>{let{children:t,className:r}=e;return(0,a.jsx)("div",{className:l(null,r),children:t})};o.Controls=function(e){let{children:t,className:r}=e;return(0,a.jsx)("div",{className:l("controls-wrapper"),children:(0,a.jsx)("div",{className:l("controls",r),children:t})})},o.Table=function(e){let{children:t,loading:r,className:n}=e;return r?(0,a.jsx)(s.h,{className:l("loader")}):(0,a.jsx)("div",{className:l("table",n),children:t})}},43989:(e,t,r)=>{r.d(t,{X:()=>l});var n=r(79734),s=r(51688),a=r(75859);const l=e=>{let{value:t,onChange:r,className:l}=e;return(0,a.jsxs)(n.E,{value:t,onUpdate:r,className:l,children:[(0,a.jsx)(n.E.Option,{value:s.Uu.All,children:s.qU[s.Uu.All]}),(0,a.jsx)(n.E.Option,{value:s.Uu.SmallUptime,children:s.qU[s.Uu.SmallUptime]})]})}},80816:(e,t,r)=>{r.d(t,{a:()=>o});var n=r(14979),s=r(24362),a=r(75859);const l=(0,s.cn)("ydb-usage-label");function o(e){let{value:t,overloadThreshold:r=90,theme:s,...o}=e;return(0,a.jsxs)(n._,{theme:s,className:l({overload:Number(t)>=r}),...o,children:[t||0,"%"]})}},92076:(e,t,r)=>{r.d(t,{HI:()=>Q,Ty:()=>E,k8:()=>B,mk:()=>Y});var n=r(68963),s=r(71549),a=r(19812),l=r(10502),o=r(14979),i=r(68330),d=r(88776),c=r(99683),u=r(69214),m=r(80816),h=r(79255),p=r(95829),g=r(75850),v=r(24362),f=r(4119),w=r(15106),x=r(47651),b=r(10703),N=r(43817),y=(r(5384),r(75859));const j=(0,v.cn)("global-storage-groups"),E="storageGroupsColumnsWidth",S="MediaType",C="Erasure",k="GroupId",O="Used",I="Limit",T="Usage",z="UsedSpaceFlag",U="Read",D="Write",G="VDisks",R="Degraded",_={name:"PoolName",header:"Pool Name",width:250,render:e=>{var t;let{row:r}=e;const n=null===(t=r.PoolName)||void 0===t?void 0:t.split("/");return n&&(0,y.jsx)(c.l,{wrapperClassName:j("pool-name-wrapper"),content:r.PoolName,placement:["right"],behavior:l.x.Immediate,children:n[n.length-1]})},align:a.ZP.LEFT},P={name:S,header:"Type",width:100,resizeMinWidth:100,align:a.ZP.LEFT,render:e=>{let{row:t}=e;return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(o._,{children:t.MediaType||"\u2014"}),"\xa0",t.Encryption&&(0,y.jsx)(i.J,{content:(0,N.Z)("encrypted"),placement:"right",behavior:l.x.Immediate,children:(0,y.jsx)(o._,{children:(0,y.jsx)(d.J,{data:s.Z,size:18})})})]})},sortable:!1},A={name:C,header:"Erasure",width:100,render:e=>{let{row:t}=e;return t.ErasureSpecies?t.ErasureSpecies:"-"},align:a.ZP.LEFT,sortable:!1},M={name:R,header:"Degraded",width:110,resizeMinWidth:110,render:e=>{let{row:t}=e;return t.Degraded?(0,y.jsxs)(o._,{theme:(0,b._O)(t),children:["Degraded: ",t.Degraded]}):"-"},align:a.ZP.LEFT,defaultOrder:a.ZP.DESCENDING},F={name:T,header:"Usage",width:75,resizeMinWidth:75,render:e=>{let{row:t}=e;return t.Limit?(0,y.jsx)(m.a,{value:t.Usage,theme:(0,b.YC)(t.Usage)}):"-"},sortAccessor:e=>e.Limit?e.Usage:null,align:a.ZP.LEFT,sortable:!1},L={name:k,header:"Group ID",width:130,render:e=>{let{row:t}=e;return(0,y.jsx)("span",{className:j("group-id"),children:t.GroupID})},sortAccessor:e=>Number(e.GroupID),align:a.ZP.RIGHT,sortable:!1},Z={name:O,header:"Used",width:100,render:e=>{let{row:t}=e;return(0,x.Uz)(t.Used,!0)},align:a.ZP.RIGHT,sortable:!1},V={name:I,header:"Limit",width:100,render:e=>{let{row:t}=e;return(0,x.Uz)(t.Limit)},align:a.ZP.RIGHT,sortable:!1},K={name:z,header:"Space",width:110,render:e=>{let{row:t}=e;const r=t.UsedSpaceFlag;let n=g.K.Red;return r<100?n=g.K.Green:r<1e4?n=g.K.Yellow:r<1e6&&(n=g.K.Orange),(0,y.jsx)(u.A,{status:n})},align:a.ZP.CENTER},W={name:U,header:"Read",width:100,render:e=>{let{row:t}=e;return t.Read?(0,x.Qt)(t.Read):"-"},align:a.ZP.RIGHT},H={name:D,header:"Write",width:100,render:e=>{let{row:t}=e;return t.Write?(0,x.Qt)(t.Write):"-"},align:a.ZP.RIGHT},J=e=>({name:G,className:j("vdisks-column"),header:"VDisks",render:t=>{var r;let{row:n}=t;return(0,y.jsx)("div",{className:j("vdisks-wrapper"),children:null===(r=n.VDisks)||void 0===r?void 0:r.map((t=>(0,y.jsx)(h.c,{data:t,nodes:e,className:j("vdisks-item")},(0,f.a2)(t.VDiskId))))})},align:a.ZP.CENTER,width:900,resizeable:!1}),Y=()=>[L,P,A,F,Z,V],Q=e=>[_,P,A,M,L,F,Z,J(e)],B=(e,t)=>{const r=((e,t)=>t===p.G.space?e.filter((e=>e.name!==R)):t===p.G.missing?e.filter((e=>e.name!==z)):e.filter((e=>e.name!==R&&e.name!==z)))([_,P,A,M,F,L,Z,V,K,W,H,J(e)],t);return r.map((e=>({...e,sortable:(0,w.P7)(e.name)})))}},43817:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(30817);const s=JSON.parse('{"empty.default":"No such groups","empty.out_of_space":"No groups with out of space errors","empty.degraded":"No degraded groups","show_all":"Show all groups","encrypted":"Encrypted group"}'),a=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f","empty.out_of_space":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0433\u0440\u0443\u043f\u043f","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","encrypted":"\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430"}'),l=(0,n.wZ)("ydb-storage-groups",{ru:a,en:s})},70885:(e,t,r)=>{r.d(t,{V:()=>Je});var n=r(52317),s=r(34051),a=r(52846),l=r(82073),o=r(8747),i=r(99337),d=r(95829),c=r(95408);const u=c.z.nativeEnum(d.G).catch(d.G.all),m=c.z.nativeEnum(d.d).catch(d.d.groups);var h=r(51688),p=r(68963),g=r(49201),v=r(30629),f=r(43989),w=r(79734),x=r(75859);const b={[d.d.groups]:"Groups",[d.d.nodes]:"Nodes"},N=e=>{let{value:t,onChange:r}=e;return(0,x.jsxs)(w.E,{value:t,onUpdate:r,qa:"storage-type-filter",children:[(0,x.jsx)(w.E.Option,{value:d.d.groups,children:b[d.d.groups]}),(0,x.jsx)(w.E.Option,{value:d.d.nodes,children:b[d.d.nodes]})]})},y={[d.G.all]:"All",[d.G.missing]:"Degraded",[d.G.space]:"Out of Space"},j=e=>{let{value:t,onChange:r}=e;return(0,x.jsxs)(w.E,{value:t,onUpdate:r,qa:"storage-visible-entities-filter",children:[(0,x.jsx)(w.E.Option,{value:d.G.missing,children:y[d.G.missing]}),(0,x.jsx)(w.E.Option,{value:d.G.space,children:y[d.G.space]}),(0,x.jsx)(w.E.Option,{value:d.G.all,children:y[d.G.all]})]})};var E=r(2418),S=r(69214),C=r(24362),k=r(10703),O=r(30817);const I=JSON.parse('{"label":"Usage:","default_value":"Any","groups_count":["{{count}} group","{{count}} groups","{{count}} groups","No groups"]}'),T=JSON.parse('{"label":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435:","default_value":"\u041b\u044e\u0431\u043e\u0435","groups_count":["{{count}} \u0433\u0440\u0443\u043f\u043f\u0430","{{count}} \u0433\u0440\u0443\u043f\u043f\u044b","{{count}} \u0433\u0440\u0443\u043f\u043f","\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f"]}'),z=(0,O.wZ)("ydb-usage-filter",{ru:T,en:I}),U=(0,C.cn)("usage-filter"),D=e=>{const{className:t,value:r=[],groups:n=[],onChange:s,debounce:a=200}=e,[l,o]=p.useState(r),i=p.useRef();p.useEffect((()=>{o((e=>e.join(",")!==r.join(",")?r:e))}),[r]);const d=p.useMemo((()=>n.map((e=>{let{threshold:t,count:r}=e;return{value:String(t),text:"".concat(t,"%"),data:{count:r}}}))),[n]),c=Math.max(...n.map((e=>{let{count:t}=e;return t})));return(0,x.jsx)(E.P,{className:U(null,t),label:z("label"),value:l,placeholder:z("default_value"),options:d,multiple:!0,onUpdate:e=>{o(e),window.clearTimeout(i.current),i.current=window.setTimeout((()=>{null===s||void 0===s||s(e)}),a)},renderOption:e=>{let{value:t,data:r,text:n}=e;return(0,x.jsxs)("div",{className:U("option"),children:[(0,x.jsx)(S.A,{className:U("option-title"),status:(0,k.CZ)(Number(t)),name:n,size:"xs"}),(0,x.jsxs)("div",{className:U("option-meta"),children:[z("groups_count",{count:r.count}),(0,x.jsx)("div",{className:U("option-bar"),style:{width:"".concat(r.count/c*100,"%")}})]})]})},getOptionHeight:()=>50,popupWidth:280,disabled:0===n.length})},G=JSON.parse('{"groups":"Groups","nodes":"Nodes","controls_groups-search-placeholder":"Group ID, Pool name","controls_nodes-search-placeholder":"Node ID, FQDN"}'),R=JSON.parse('{"groups":"\u0413\u0440\u0443\u043f\u043f\u044b","nodes":"\u041d\u043e\u0434\u044b","controls_groups-search-placeholder":"ID \u0433\u0440\u0443\u043f\u043f\u044b, \u0438\u043c\u044f \u043f\u0443\u043b\u0430","controls_nodes-search-placeholder":"ID \u0443\u0437\u043b\u0430, FQDN"}'),_=(0,O.wZ)("ydb-storage",{ru:R,en:G}),P=(0,C.cn)("global-storage"),A=e=>{let{searchValue:t,handleSearchValueChange:r,withTypeSelector:n,storageType:s,handleStorageTypeChange:a,visibleEntities:l,handleVisibleEntitiesChange:o,nodesUptimeFilter:i,handleNodesUptimeFilterChange:c,withGroupsUsageFilter:u,groupsUsageFilter:m,groupsUsageFilterOptions:h,handleGroupsUsageFilterChange:w,entitiesCountCurrent:b,entitiesCountTotal:y,entitiesLoading:E}=e;const S=s===d.d.nodes,C=_(S?"nodes":"groups");return(0,x.jsxs)(p.Fragment,{children:[(0,x.jsx)(v.o,{value:t,onChange:r,placeholder:_(S?"controls_nodes-search-placeholder":"controls_groups-search-placeholder"),className:P("search")}),n&&(0,x.jsx)(N,{value:s,onChange:a}),(0,x.jsx)(j,{value:l,onChange:o}),S&&(0,x.jsx)(f.X,{value:i,onChange:c}),!S&&u&&(0,x.jsx)(D,{value:m,onChange:w,groups:h}),(0,x.jsx)(g.C,{label:C,loading:E,total:y,current:b})]})};var M=r(35113),F=r(17176),L=r(79023),Z=r(56350);const V=JSON.parse('{"default_message":"Everything is fine!","default_button_label":"Show All"}'),K=JSON.parse('{"default_message":"\u0412\u0441\u0451 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435!","default_button_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}'),W=(0,O.wZ)("ydb-storage-empty-filter",{ru:K,en:V}),H=e=>{let{title:t,message:r=W("default_message"),showAll:n=W("default_button_label"),onShowAll:s}=e;return(0,x.jsx)(L.u,{image:(0,x.jsx)(Z.Q,{name:"thumbsUp"}),position:"left",title:t,description:r,actions:s&&[(0,x.jsx)(F.z,{onClick:s,children:n},"show-all")]})};var J=r(43817);const Y=e=>{let t,{visibleEntities:r,onShowAll:n}=e;return r===d.G.space&&(t=(0,J.Z)("empty.out_of_space")),r===d.G.missing&&(t=(0,J.Z)("empty.degraded")),t?(0,x.jsx)(H,{title:t,showAll:(0,J.Z)("show_all"),onShowAll:n}):null};var Q=r(92092),B=r(11431);const q=(e,t)=>"getStorageGroups|offset".concat(t,"|limit").concat(e),X=async e=>{let{limit:t,offset:r,...n}=e;const s=await window.api.getStorageInfo({version:B.w.v2,limit:t,offset:r,...n},{concurrentId:q(t,r)}),a=(0,Q.KJ)(s);return{data:a.groups||[],found:a.found||0,total:a.total||0}};var $=r(92076);const ee=e=>{let{searchValue:t,visibleEntities:r,tenant:n,nodeId:s,nodesMap:a,onShowAll:l,parentContainer:o,renderControls:i,renderErrorMessage:c}=e;const u=p.useMemo((()=>[t,r,n,s]),[t,r,n,s]),m=p.useCallback((async function(e,a){let{sortOrder:l,columnId:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return await X({limit:e,offset:a,filter:t,visibleEntities:r,tenant:n,nodeId:s,sortOrder:l,sortValue:o})}),[s,t,n,r]),h=p.useMemo((()=>(0,$.k8)(a,r)),[a,r]);return(0,x.jsx)(M.WQ,{columnsWidthLSKey:$.Ty,parentContainer:o,columns:h,fetchData:m,limit:50,renderControls:i,renderErrorMessage:c,renderEmptyDataMessage:()=>r!==d.G.all?(0,x.jsx)(Y,{onShowAll:l,visibleEntities:r}):(0,J.Z)("empty.default"),dependencyArray:u})},te=JSON.parse('{"empty.default":"No such nodes","empty.out_of_space":"No nodes with out of space errors","empty.degraded":"No degraded nodes","empty.small_uptime":"No nodes with uptime < 1h","empty.several_filters":"No nodes match current filters combination","show_all":"Show all nodes"}'),re=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432","empty.out_of_space":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0443\u0437\u043b\u043e\u0432","empty.small_uptime":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432 \u0441 uptime < 1h","empty.several_filters":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0443\u0437\u043b\u044b"}'),ne=(0,O.wZ)("ydb-storage-nodes",{ru:re,en:te}),se=e=>{let t,{visibleEntities:r,nodesUptimeFilter:n,onShowAll:s}=e;return r===d.G.space&&(t=ne("empty.out_of_space")),r===d.G.missing&&(t=ne("empty.degraded")),n===h.Uu.SmallUptime&&(t=ne("empty.small_uptime")),r!==d.G.all&&n!==h.Uu.All&&(t=ne("empty.several_filters")),t?(0,x.jsx)(H,{title:t,showAll:ne("show_all"),onShowAll:s}):null},ae=(e,t)=>"getStorageNodes|offset".concat(t,"|limit").concat(e),le=async e=>{let{type:t="static",storage:r=!0,limit:n,offset:s,...a}=e;const l=await window.api.getNodes({type:t,storage:r,limit:n,offset:s,...a},{concurrentId:ae(n,s)}),o=(0,Q.Y2)(l);return{data:o.nodes||[],found:o.found||0,total:o.total||0}};var oe=r(19812),ie=r(65890),de=r(1796),ce=r(74170),ue=r(40073),me=r(79255),he=r(54665),pe=r(5922),ge=r(4119),ve=r(92398);const fe=(0,C.cn)("pdisk-storage"),we=e=>{let{nodeId:t,data:r={},vDisks:a}=e;const[l,o]=p.useState(!1),[i]=(0,s.yu)(n.fo),d=p.useRef(null);let c=(0,he.ax)(he.ZP.node,{id:t,activeTab:ve.pV},{pdiskId:r.PDiskId||""});return i&&(0,pe.D)(r.PDiskId)&&(c=(0,he.ds)(r.PDiskId,t)),(0,x.jsxs)(p.Fragment,{children:[(0,x.jsx)(ue.J,{data:r,anchorRef:d,open:l}),(0,x.jsxs)("div",{className:fe(),ref:d,children:[null!==a&&void 0!==a&&a.length?(0,x.jsx)("div",{className:fe("vdisks"),children:a.map((e=>(0,x.jsx)("div",{className:fe("vdisks-item"),style:{flexGrow:Number(e.AllocatedSize)||1},children:(0,x.jsx)(me.c,{data:e,compact:!0,stackClassName:fe("donors-stack")})},(0,ge.a2)(e.VDiskId))))}):null,(0,x.jsxs)(ce.h,{to:c,className:fe("content"),onMouseEnter:()=>{o(!0)},onMouseLeave:()=>{o(!1)},children:[(0,x.jsx)(de.p,{diskAllocatedPercent:r.AllocatedPercent,severity:r.Severity}),(0,x.jsx)("div",{className:fe("media-type"),children:r.Type})]})]})]})},xe=(0,C.cn)("global-storage-nodes"),be=e=>xe("node",{unavailable:(0,h.TA)(e)}),Ne="storageNodesColumnsWidth",ye="NodeId",je="Host",Ee="DC",Se="Rack",Ce="Uptime",ke="PDisks",Oe="Missing",Ie=(e,t)=>{const r=(e=>{const t=null===e||void 0===e?void 0:e.getNodeRef;return[{name:ye,header:"Node ID",width:100,align:oe.ZP.RIGHT,render:e=>{let{row:t}=e;return t.NodeId}},{name:je,header:"Host",width:350,render:e=>{let{row:r}=e;return(0,x.jsx)(ie.k,{node:r,getNodeRef:t})},align:oe.ZP.LEFT},{name:Ee,header:"DC",width:100,render:e=>{let{row:t}=e;return t.DC||n.jX},align:oe.ZP.LEFT},{name:Se,header:"Rack",width:100,render:e=>{let{row:t}=e;return t.Rack||"\u2014"},align:oe.ZP.LEFT},{name:Ce,header:"Uptime",width:130,sortAccessor:e=>{let{StartTime:t}=e;return t?-t:0},align:oe.ZP.RIGHT,render:e=>{let{row:t}=e;return t.Uptime}},{name:Oe,header:"Missing",width:100,align:oe.ZP.CENTER,defaultOrder:oe.ZP.DESCENDING,render:e=>{let{row:t}=e;return t.Missing}},{name:ke,className:xe("pdisks-column"),header:"PDisks",render:e=>{var t;let{row:r}=e;return(0,x.jsx)("div",{className:xe("pdisks-wrapper"),children:null===(t=r.PDisks)||void 0===t?void 0:t.map((e=>{var t;const n=null===(t=r.VDisks)||void 0===t?void 0:t.filter((t=>t.PDiskId===e.PDiskId));return(0,x.jsx)("div",{className:xe("pdisks-item"),children:(0,x.jsx)(we,{data:e,nodeId:r.NodeId,vDisks:n})},e.PDiskId)}))})},align:oe.ZP.CENTER,sortable:!1,width:900,resizeable:!1}]})(e),s=r.map((e=>({...e,sortable:(0,h.oh)(e.name)})));return t!==d.G.missing?s.filter((e=>e.name!==Oe)):s},Te=e=>{let{searchValue:t,visibleEntities:r,nodesUptimeFilter:n,tenant:s,additionalNodesProps:a,onShowAll:l,parentContainer:o,renderControls:i,renderErrorMessage:c}=e;const u=p.useMemo((()=>[t,r,n,s]),[t,r,n,s]),m=p.useCallback((async function(e,a){let{sortOrder:l,columnId:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return await le({limit:e,offset:a,filter:t,uptime:(0,h.RW)(n),visibleEntities:r,tenant:s,sortOrder:l,sortValue:o})}),[n,t,s,r]),g=p.useMemo((()=>Ie(a,r)),[a,r]);return(0,x.jsx)(M.WQ,{columnsWidthLSKey:Ne,parentContainer:o,columns:g,fetchData:m,rowHeight:50,limit:50,renderControls:i,renderErrorMessage:c,renderEmptyDataMessage:()=>r!==d.G.all||n!==h.Uu.All?(0,x.jsx)(se,{onShowAll:l,nodesUptimeFilter:n,visibleEntities:r}):ne("empty.default"),getRowClassName:be,dependencyArray:u})},ze=e=>{var t;let{tenant:r,nodeId:n,parentContainer:c,additionalNodesProps:p}=e;const[g,v]=(0,a.useQueryParams)({type:a.StringParam,visible:a.StringParam,search:a.StringParam,uptimeFilter:a.StringParam}),f=m.parse(g.type),w=u.parse(g.visible),b=null!==(t=g.search)&&void 0!==t?t:"",N=h.U8.parse(g.uptimeFilter),y=e=>{v({search:e||void 0},"replaceIn")},j=e=>{v({visible:e},"replaceIn")},E=e=>{v({type:e},"replaceIn")},S=e=>{v({uptimeFilter:e},"replaceIn")},C=(0,s.ix)(i.d),k=()=>{v({visible:d.G.all,uptimeFilter:h.Uu.All},"replaceIn")},O=e=>{let{totalEntities:t,foundEntities:r,inited:s}=e;return(0,x.jsx)(A,{searchValue:b,handleSearchValueChange:y,withTypeSelector:!n,storageType:f,handleStorageTypeChange:E,visibleEntities:w,handleVisibleEntitiesChange:j,nodesUptimeFilter:N,handleNodesUptimeFilterChange:S,withGroupsUsageFilter:!1,entitiesCountCurrent:r,entitiesCountTotal:t,entitiesLoading:!s})},I=e=>403===e.status?(0,x.jsx)(l.J,{position:"left"}):(0,x.jsx)(o.V,{error:e});return f===d.d.nodes?(0,x.jsx)(Te,{searchValue:b,visibleEntities:w,nodesUptimeFilter:N,tenant:r,additionalNodesProps:p,onShowAll:k,parentContainer:c,renderControls:O,renderErrorMessage:I}):(0,x.jsx)(ee,{searchValue:b,visibleEntities:w,tenant:r,nodeId:n,nodesMap:C,onShowAll:()=>{j(d.G.all)},parentContainer:c,renderControls:O,renderErrorMessage:I})};var Ue=r(86969),De=r(26688),Ge=r(47101),Re=r(15106),_e=r(14223);const Pe=e=>e.trim().toLowerCase(),Ae=(e,t)=>{const r=Pe(t);return r?e.filter((e=>{var t,n;return(null===(t=e.NodeId)||void 0===t?void 0:t.toString().includes(r))||(null===(n=e.Host)||void 0===n?void 0:n.toLowerCase().includes(r))})):e},Me=(e,t)=>{const r=Pe(t);return r?e.filter((e=>{var t,n;return(null===(t=e.PoolName)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(n=e.GroupID)||void 0===n?void 0:n.toString().includes(r))})):e},Fe=(e,t)=>Array.isArray(t)&&0!==t.length?e.filter((e=>{const r=e.Usage;return t.some((e=>Number(e)<=r&&r<Number(e)+5))})):e;const Le=r(905).h.injectEndpoints({endpoints:e=>({getStorageNodesInfo:e.query({queryFn:async(e,t)=>{let{signal:r}=t;try{const t=await window.api.getNodes({storage:!0,type:"static",tablets:!1,...e},{signal:r});return{data:(0,Q.Y2)(t)}}catch(n){return{error:n}}},providesTags:["All"]}),getStorageGroupsInfo:e.query({queryFn:async(e,t)=>{let{signal:r}=t;try{const t=await window.api.getStorageInfo({version:B.w.v1,...e},{signal:r});return{data:(0,Q.KJ)(t)}}catch(n){return{error:n}}},providesTags:["All"]})}),overrideExisting:"throw"});var Ze=r(2098);r(5384);function Ve(e){let{data:t,tableSettings:r,visibleEntities:n,nodes:s,onShowAll:a,sort:l,handleSort:o}=e;const i=p.useMemo((()=>(0,$.k8)(s,n)),[s,n]);return t.length||n===d.G.all?(0,x.jsx)(Ze.G,{columnsWidthLSKey:$.Ty,data:t,columns:i,settings:r,emptyDataMessage:(0,J.Z)("empty.default"),sortOrder:l,onSort:o},n):(0,x.jsx)(Y,{onShowAll:a,visibleEntities:n})}function Ke(e){let{data:t,tableSettings:r,visibleEntities:n,onShowAll:s,nodesUptimeFilter:a,additionalNodesProps:l,sort:o,handleSort:i}=e;const c=Ie(l,n);return t.length||n===d.G.all&&a===h.Uu.All?(0,x.jsx)(Ze.G,{columnsWidthLSKey:Ne,data:t,columns:c,settings:{...r,dynamicRenderType:"variable"},emptyDataMessage:ne("empty.default"),rowClassName:be,sortOrder:o,onSort:i},n):(0,x.jsx)(se,{visibleEntities:n,nodesUptimeFilter:a,onShowAll:s})}const We=(0,a.withDefault)({encode:a.ArrayParam.encode,decode:e=>null===e||void 0===e?e:Array.isArray(e)?e.filter(Boolean):e?[e]:[]},[]),He=e=>{var t;let{additionalNodesProps:r,tenant:l,nodeId:o}=e;const[c]=(0,s.Rj)(),[g,v]=(0,a.useQueryParams)({type:a.StringParam,visible:a.StringParam,search:a.StringParam,uptimeFilter:a.StringParam,usageFilter:We}),f=m.parse(g.type),w=u.parse(g.visible),b=null!==(t=g.search)&&void 0!==t?t:"",N=h.U8.parse(g.uptimeFilter),y=g.usageFilter,j=(0,s.ix)(i.d),[E,S]=p.useState({sortOrder:void 0,sortValue:void 0}),C=E.sortValue?E:k.TP,[O,I]=p.useState({sortOrder:void 0,sortValue:void 0}),T=O.sortOrder?O:(0,k._r)(w),z=void 0!==o,U=z?d.d.groups:f,D=Le.useGetStorageNodesInfoQuery({tenant:l,visibleEntities:w},{skip:U!==d.d.nodes,pollingInterval:c}),G=Le.useGetStorageGroupsInfoQuery({tenant:l,visibleEntities:w,nodeId:o},{skip:U!==d.d.groups,pollingInterval:c}),{currentData:R,isFetching:_,error:M}=U===d.d.nodes?D:G,{currentData:{nodes:F=[]}={}}=D,{currentData:{groups:L=[]}={}}=G,{nodes:Z,groups:V,...K}=null!==R&&void 0!==R?R:{found:0,total:0},W=void 0===R&&_,H=p.useMemo((()=>function(e,t,r){let n=e||[];return n=Ae(n,t),n=(0,_e.f)(n,r),n}(F,b,N)),[b,F,N]),J=p.useMemo((()=>function(e,t,r){let n=e||[];return n=Me(n,t),n=Fe(n,r),n}(L,b,y)),[b,L,y]),Y=p.useMemo((()=>function(e){const t={};return null===e||void 0===e||e.forEach((e=>{const r=(0,Re.Ic)(e,5);Object.prototype.hasOwnProperty.call(t,r)||(t[r]=0),t[r]+=1})),Object.entries(t).map((e=>{let[t,r]=e;return{threshold:Number(t),count:r}})).sort(((e,t)=>t.threshold-e.threshold))}(L)),[L]),[Q,B]=(0,s.sC)(C,(e=>S(e))),[q,X]=(0,s.sC)(T,(e=>I(e))),$=e=>{v({usageFilter:e.length?e:void 0},"replaceIn")},ee=e=>{v({search:e||void 0},"replaceIn")},te=e=>{v({visible:e},"replaceIn")},re=e=>{v({type:e},"replaceIn")},ne=e=>{v({uptimeFilter:e},"replaceIn")},se=()=>{te(d.G.all),ne(h.Uu.All)};return M?403===M.status?(0,x.jsx)(Ue.J,{position:"left"}):(0,x.jsx)(De.V,{error:M}):(0,x.jsxs)(Ge.l,{children:[(0,x.jsx)(Ge.l.Controls,{children:(0,x.jsx)(A,{searchValue:b,handleSearchValueChange:ee,withTypeSelector:!z,storageType:U,handleStorageTypeChange:re,visibleEntities:w,handleVisibleEntitiesChange:te,nodesUptimeFilter:N,handleNodesUptimeFilterChange:ne,groupsUsageFilter:y,groupsUsageFilterOptions:Y,handleGroupsUsageFilterChange:$,entitiesCountCurrent:U===d.d.groups?J.length:H.length,entitiesCountTotal:K.total,entitiesLoading:W})}),(0,x.jsx)(Ge.l.Table,{loading:W,className:P("table"),children:(0,x.jsxs)(p.Fragment,{children:[U===d.d.groups&&(0,x.jsx)(Ve,{visibleEntities:w,data:J,tableSettings:n.LE,nodes:j,onShowAll:()=>te(d.G.all),sort:q,handleSort:X},"groups"),U===d.d.nodes&&(0,x.jsx)(Ke,{visibleEntities:w,nodesUptimeFilter:N,data:H,tableSettings:n.LE,onShowAll:se,additionalNodesProps:r,sort:Q,handleSort:B},"nodes")]})})]})},Je=e=>{let{parentContainer:t,...r}=e;const[a]=(0,s.yu)(n.Qy);return a?(0,x.jsx)(ze,{parentContainer:t,...r}):(0,x.jsx)(He,{...r})}},10703:(e,t,r)=>{r.d(t,{CZ:()=>h,TP:()=>p,YC:()=>m,_O:()=>u,_r:()=>w});var n=r(81413),s=r(95829),a=r(75850),l=r(99106),o=r(51688),i=r(15106);const d=(0,l.p)(1,2,["success","warning","danger"]),c={"block-4-2":(0,l.p)(1,2,["success","warning","danger"]),"mirror-3-dc":(0,l.p)(1,3,["success","warning","danger"])},u=e=>{var t;return(void 0!==(t=e.ErasureSpecies)&&t in c?c[e.ErasureSpecies]:d)(e.Degraded)},m=(0,l.p)(80,85,["success","warning","danger"]),h=(0,l.p)(80,85,[a.K.Green,a.K.Yellow,a.K.Red]),p={sortValue:o.Hk.NodeId,sortOrder:n.zE},g={sortValue:i.t5.PoolName,sortOrder:n.zE},v={sortValue:i.t5.Degraded,sortOrder:n.hr},f={sortValue:i.t5.Usage,sortOrder:n.hr};function w(e){return e===s.G.missing?v:e===s.G.space?f:g}},14223:(e,t,r)=>{r.d(t,{A:()=>m,f:()=>c});var n=r(75850),s=r(52317),a=r(4119),l=r(27070),o=r(51688),i=r(80839);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0)===i.pu.ALL?e:e.filter((e=>{let{SystemState:t}=e;return t&&t!==n.K.Green}))},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0)===o.Uu.All?e:e.filter((e=>{let{StartTime:t}=e;return!t||(0,a.OW)(t)<s.RQ}))},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!t)return e;const r=(0,l.Y)(t);return e.filter((e=>!e.Host||(r.test(e.Host)||r.test(String(e.NodeId)))))};function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{uptimeFilter:t,searchValue:r,problemFilter:n}=arguments.length>1?arguments[1]:void 0,s=c(e,t);return s=d(s,n),s=u(s,r),s}},95829:(e,t,r)=>{r.d(t,{G:()=>n,d:()=>s});const n={all:"all",missing:"missing",space:"space"},s={groups:"groups",nodes:"nodes"}},89712:(e,t,r)=>{r.d(t,{M:()=>l});var n=r(68963),s=r(2639),a=r(18193);const l=e=>{const t=n.useCallback((()=>e?a.r.readUserSettingsValue(e,{}):{}),[e]),r=n.useCallback((t=>{e&&a.r.setUserSettingsValue(e,t)}),[e]);return(0,s.M)({saveSizes:r,getSizes:t})}},83496:(e,t,r)=>{r.d(t,{FW:()=>i,KR:()=>d,LV:()=>o,uk:()=>l});var n=r(75850),s=r(28164);const a={[s.g.Dead]:n.K.Red,[s.g.Created]:n.K.Yellow,[s.g.ResolveStateStorage]:n.K.Yellow,[s.g.Candidate]:n.K.Yellow,[s.g.BlockBlobStorage]:n.K.Yellow,[s.g.WriteZeroEntry]:n.K.Yellow,[s.g.Restored]:n.K.Yellow,[s.g.Discover]:n.K.Yellow,[s.g.Lock]:n.K.Yellow,[s.g.Stopped]:n.K.Yellow,[s.g.ResolveLeader]:n.K.Yellow,[s.g.RebuildGraph]:n.K.Yellow,[s.g.Deleted]:n.K.Green,[s.g.Active]:n.K.Green},l=Object.keys(s.g),o=Object.entries(a).reduce(((e,t)=>{let[r,n]=t;return e[n]?e[n].push(r):e[n]=[r],e}),{}),i=e=>{if(!e)return n.K.Grey;return t=e,Object.values(n.K).includes(t)?e:a[e];var t};function d(e){if(!e)return"unknown";switch(e){case s.g.Dead:return"danger";case s.g.Active:case s.g.Deleted:return"success";default:return"warning"}}},5384:()=>{}}]);