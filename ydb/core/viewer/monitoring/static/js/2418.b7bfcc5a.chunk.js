"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[2418],{46318:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(68963);const i=e=>o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.488 3.43a.75.75 0 0 1 .081 1.058l-6 7a.75.75 0 0 1-1.1.042l-3.5-3.5A.75.75 0 0 1 4.03 6.97l2.928 2.927 5.473-6.385a.75.75 0 0 1 1.057-.081Z",clipRule:"evenodd"}))},2418:(e,t,n)=>{n.d(t,{P:()=>$});var o=n(68963),i=n(59926),s=n(56407),r=n(48027),l=n(95097),a=n(34505);var c=n(89646),u=n(38581),d=n(85636),h=n(97908),p=n(79805),v=n(77264),m=n(36951),f=n(95868);const g=(0,m.Ge)("select-filter"),b={padding:"4px 4px 0"},C=o.forwardRef(((e,t)=>{const{onChange:n,onKeyDown:i,renderFilter:s,size:r,value:l,placeholder:a}=e,c=o.useRef(null);return o.useImperativeHandle(t,(()=>({focus:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.focus({preventScroll:!0})}})),[]),s?s({onChange:n,onKeyDown:i,value:l,ref:c,style:b}):o.createElement("div",{className:g(),style:b},o.createElement(v.o,{controlRef:c,controlProps:{className:g("input"),size:1},size:r,value:l,placeholder:a,onUpdate:n,onKeyDown:i,qa:f.Gd.FILTER_INPUT}))}));C.displayName="SelectFilter";var E=n(24917);const w=e=>Boolean(e&&"label"in e),T=e=>{const t=e.reduce(((e,t)=>("label"in t?(e.push({label:t.label,disabled:!0}),e.push(...t.options||[])):e.push(t),e)),[]);return Object.defineProperty(t,f.YV,{enumerable:!1,value:{}}),t},y=e=>{const{getOptionHeight:t,getOptionGroupHeight:n,size:o,option:i,index:s,mobile:r}=e;let l=r?f.el:f._X[o];if(w(i)){const e=0===s?0:f.rn;return l=""===i.label?0:l,n?n(i,s):l+e}return t?t(i,s):l},S=e=>"string"===typeof e.content?e.content:"string"===typeof e.children?e.children:e.text?e.text:e.value,O=e=>(e=>o.Children.toArray(e))(e).reduce(((e,t)=>{let{props:n}=t;if("label"in n){const t=n.options||(e=>o.Children.toArray(e).reduce(((e,t)=>{let{props:n}=t;return"value"in n&&e.push(n),e}),[]))(n.children);e.push({options:t,label:n.label})}return"value"in n&&e.push(Object.assign({},n)),e}),[]),R=(e,t)=>t?t.findIndex((t=>{if(w(t))return!1;if(t.disabled)return!1;const n=S(t);return(o=e,new RegExp(o.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"i")).test(n);var o})):-1,H=e=>{var t;return(null===(t=null===e||void 0===e?void 0:e.current)||void 0===t?void 0:t.getItems())||[]},N=e=>{const{options:t,filter:n,filterOption:o}=e,i=t.filter((e=>!!w(e)||(o?o(e,n):((e,t)=>{const n=S(e).toLocaleLowerCase(),o=t.toLocaleLowerCase();return-1!==n.indexOf(o)})(e,n))));return i.reduce(((e,t,n)=>{const o=w(t),s=w(e[e.length-1]),r=n===i.length-1;return o&&s&&e.pop(),(!o||o&&!r)&&e.push(t),e}),[])},k=(0,m.Ge)("select-list"),x=e=>{let{option:t,renderOptionGroup:n}=e;return n?o.createElement("div",{className:k("group-label-custom")},n(t)):o.createElement("div",{className:k("group-label",{empty:""===t.label})},o.createElement("div",{className:k("group-label-content")},t.label))};var z=n(46318),I=n(88776);const A=(0,m.Ge)("select-list"),L=e=>{let{option:t}=e;const{content:n,children:i,disabled:s}=t;return o.createElement("span",{className:A("option-default-label",{disabled:s})},n||i)},P=e=>{const{renderOption:t,value:n,option:i,multiple:s}=e,r=-1!==n.indexOf(i.value),l=t?t(i):o.createElement(L,{option:i});return o.createElement("div",{"data-qa":i.qa,className:A("option",{colored:r&&!s,disabled:i.disabled})},s&&o.createElement(I.J,{className:A("tick-icon",{shown:r&&s}),data:z.Z}),l)};var W=n(63096),F=n(2982);const M=e=>{const t=o.useRef(null);return(0,W.s)({element:t.current,onIntersect:null===e||void 0===e?void 0:e.onIntersect}),o.createElement("div",{ref:t,className:(0,f.V_)("loading-indicator")},o.createElement(F.a,null))},Y={value:"__SELECT_LIST_ITEM_LOADING__",disabled:!0},B=o.forwardRef(((e,t)=>{const{onOptionClick:n,renderOption:i,renderOptionGroup:s,getOptionHeight:r,getOptionGroupHeight:l,size:a,flattenOptions:c,value:u,multiple:d,virtualized:h,mobile:p,loading:v,onLoadMore:m,id:g,onChangeActive:b}=e,C=o.useMemo((()=>v?[...c,Y]:c),[c,v]),w=o.useMemo((()=>c.reduce(((e,t,n)=>("value"in t&&u.includes(t.value)&&e.push(n),e)),[])),[c,u]),T=(e=>{const{getOptionHeight:t,getOptionGroupHeight:n,size:o,options:i,mobile:s}=e;return i.reduce(((e,i,r)=>e+y({getOptionHeight:t,getOptionGroupHeight:n,size:o,option:i,index:r,mobile:s})),0)})({options:C,getOptionHeight:r,getOptionGroupHeight:l,size:a,mobile:p}),S=o.useCallback(((e,t)=>y({getOptionHeight:r,getOptionGroupHeight:l,size:a,option:e,index:t,mobile:p})),[r,l,p,a]),O=o.useCallback(((e,t,n)=>{if("label"in e){const t=s?e=>s(e,{itemHeight:S(e,n)}):void 0;return o.createElement(x,{option:e,renderOptionGroup:t})}if(e.value===Y.value)return o.createElement(M,{onIntersect:0===n?void 0:m});const r=i?e=>i(e,{itemHeight:S(e,n)}):void 0;return o.createElement(P,{option:e,value:u,multiple:d,renderOption:r})}),[i,s,u,d,S,m]);return o.createElement(E.a,{ref:t,className:(0,f.V_)({size:a,virtualized:h,mobile:p}),qa:f.Gd.LIST,itemClassName:(0,f.V_)("item"),itemHeight:S,itemsHeight:h?T:void 0,items:C,filterable:!1,virtualized:h,renderItem:O,onItemClick:n,selectedItemIndex:w,id:g,role:"listbox",onChangeActive:b})}));B.displayName="SelectList";const G=(0,m.Ge)("select-empty-placeholder"),_=e=>{let{renderEmptyOptions:t,filter:n}=e;return o.createElement("div",{className:G({empty:!t})},null===t||void 0===t?void 0:t({filter:n}))};var V=n(24119),D=n(58414),j=n(92006);function q(e){const{name:t,value:n,disabled:i,form:s,onReset:r}=e,l=(0,j.q)({onReset:r,initialValue:n});return!t||i?null:0===n.length?o.createElement("input",{ref:l,type:"hidden",name:t,value:n,form:s,disabled:i}):o.createElement(o.Fragment,null,n.map(((e,n)=>o.createElement("input",{key:e,ref:0===n?l:void 0,value:e,type:"hidden",name:t,form:s,disabled:i}))))}const K=e=>{const{onChange:t,open:n,disabled:s}=e,[r,l]=o.useState(""),[a,c]=o.useState(),u=o.useCallback((e=>{if(clearTimeout(a),e){const e=window.setTimeout((()=>l("")),f.gX);c(e)}}),[a]),d=o.useCallback((e=>{e.stopPropagation();const t=((e,t)=>{const n=1===e.length;let o="";return e===i.V.BACKSPACE&&t.length?o=t.slice(0,t.length-1):n&&(o=(t+e).trim()),o})(e.key,r);r!==t&&(u(t),l(t))}),[u,r]);o.useEffect((()=>(n&&!s?document.addEventListener("keydown",d):n||s||l(""),()=>{n&&!s&&document.removeEventListener("keydown",d)})),[d,n,s]),o.useEffect((()=>(n||clearTimeout(a),()=>clearTimeout(a))),[n,a]),o.useEffect((()=>{t(r)}),[t,r])};var U=n(63639),J=n.n(U);function Z(e){return J()(e,[f.YV])}const X=e=>{let{renderFilter:t,renderList:n}=e;return o.createElement(o.Fragment,null,t(),n())},$=o.forwardRef((function(e,t){const{onUpdate:n,onOpenChange:v,onFilterChange:m,renderControl:g,renderFilter:b,renderOption:y,renderOptionGroup:k,renderSelectedOption:x,renderEmptyOptions:z,renderPopup:I=X,getOptionHeight:A,getOptionGroupHeight:L,filterOption:P,name:W,form:F,className:M,controlClassName:Y,popupClassName:G,qa:j,value:U,defaultValue:$,defaultOpen:Q,open:ee,label:te,placeholder:ne,filterPlaceholder:oe,width:ie,popupWidth:se,popupPlacement:re,error:le,virtualizationThreshold:ae=f._7,view:ce="normal",size:ue="m",pin:de="round-round",multiple:he=!1,disabled:pe=!1,filterable:ve=!1,filter:me,disablePortal:fe,hasClear:ge=!1,onClose:be,id:Ce,hasCounter:Ee,renderCounter:we,title:Te}=e,ye=(0,p.X)(),[Se,Oe]=(0,s.z)(me,"",m),Re=o.useRef(null),He=o.useRef(null),Ne=o.useRef(null),ke=o.useRef(null),xe=(0,r.c)(t,He),{value:ze,open:Ie,activeIndex:Ae,toggleOpen:Le,setValue:Pe,handleSelection:We,handleClearValue:Fe,setActiveIndex:Me}=(e=>{let{defaultOpen:t,onClose:n,onOpenChange:i,open:r,value:c,defaultValue:u=[],multiple:d,onUpdate:h}=e;const[p,v]=(0,s.z)(c,u,h),[m,f]=o.useState(),g=(0,a.Z)({defaultOpen:t,onClose:n,onOpenChange:i,open:r}),{toggleOpen:b}=g,C=(0,l._T)(g,["toggleOpen"]),E=o.useCallback((e=>{if(!p.includes(e.value)){const t=[e.value];v(t)}b(!1)}),[p,v,b]),w=o.useCallback((e=>{const t=p.includes(e.value)?p.filter((t=>t!==e.value)):[...p,e.value];v(t)}),[p,v]),T=o.useCallback((e=>{d?w(e):E(e)}),[d,E,w]),y=o.useCallback((()=>{v([])}),[v]);return Object.assign({value:p,activeIndex:m,setValue:v,handleSelection:T,handleClearValue:y,toggleOpen:b,setActiveIndex:f},C)})({onUpdate:n,value:U,defaultValue:$,defaultOpen:Q,multiple:he,open:ee,onClose:be,onOpenChange:v});o.useEffect((()=>{!Ie&&ve&&ye&&setTimeout((()=>{Oe("")}),300)}),[Ie,ve,Oe,ye]);const Ye=function(e){const{filter:t="",filterable:n,filterOption:i}=e,s=o.useMemo((()=>Z(e.options)?e.options:T(e.options)),[e.options]),r=o.useMemo((()=>n?N({options:s,filter:t,filterOption:i}):s),[t,n,i,s]);return s[f.YV].filteredOptions=r,s}({options:e.options||O(e.children),filter:Se,filterable:ve,filterOption:P}),Be=function(e){if(!Z(e))throw Error("You should use options generated by useSelectOptions hook");return J()(e,[f.YV,"filteredOptions"])}(Ye),Ge=((e,t,n)=>{if(0===t.length)return null;const i=e.filter((e=>!w(e))),s=t.reduce(((e,t)=>{const n=i.find((e=>e.value===t));return e.push(n||{value:t}),e}),[]);return n?s.map(((e,t)=>o.createElement(o.Fragment,{key:e.value},n(e,t)))):s.map((e=>S(e))).join(", ")})(Ye,ze,x),_e=Be.length>=ae,{errorMessage:Ve,errorPlacement:De,validationState:je}=(0,h.II)({error:le,errorMessage:e.errorMessage,errorPlacement:e.errorPlacement||"outside",validationState:e.validationState}),qe=(0,c.u)(),Ke="invalid"===je,Ue=Ke&&Boolean(Ve)&&"outside"===De,Je=Ke&&Boolean(Ve)&&"inside"===De,Ze=o.useCallback((e=>{var t,n;if(e&&!(null===e||void 0===e?void 0:e.disabled)&&!("label"in e)){if(he){const e=null===(t=null===ke||void 0===ke?void 0:ke.current)||void 0===t?void 0:t.getActiveItem();null===(n=Ne.current)||void 0===n||n.focus(),"number"===typeof e&&setTimeout((()=>{var t;null===(t=null===ke||void 0===ke?void 0:ke.current)||void 0===t||t.activateItem(e,!0)}),50)}We(e)}}),[We,he]),Xe=o.useCallback((e=>{var t;[i.V.ENTER,i.V.SPACEBAR].includes(e.key)&&Ie&&(e.preventDefault(),e.key===i.V.SPACEBAR&&Ze((e=>{var t;const n=H(e),o=null===(t=null===e||void 0===e?void 0:e.current)||void 0===t?void 0:t.getActiveItem();return"number"===typeof o?n[o]:void 0})(ke))),[i.V.ARROW_DOWN,i.V.ARROW_UP].includes(e.key)&&!Ie&&(e.preventDefault(),Le()),null===(t=null===ke||void 0===ke?void 0:ke.current)||void 0===t||t.onKeyDown(e)}),[Ze,Ie,Le]),$e=o.useCallback((e=>{var t;null===(t=null===ke||void 0===ke?void 0:ke.current)||void 0===t||t.onKeyDown(e)}),[]),Qe=o.useCallback((e=>{var t;if(e){const n=R(e,H(ke));"number"===typeof n&&-1!==n&&(null===(t=null===ke||void 0===ke?void 0:ke.current)||void 0===t||t.activateItem(n,!0))}}),[]);K({onChange:Qe,open:Ie,disabled:ve}),o.useEffect((()=>{var e;Ie&&((e=>{var t;const n=H(e);null===(t=null===e||void 0===e?void 0:e.current)||void 0===t||t.activateItem(E.a.findNextIndex(n,0,1),!1)})(ke),ve&&(null===(e=Ne.current)||void 0===e||e.focus()))}),[Ie,ve]);const et=Object.assign({},"max"===ie&&{width:ie}),tt={};"number"===typeof ie&&(tt.width=ie);const nt=o.useCallback((()=>Le(!1)),[Le]),{onFocus:ot,onBlur:it}=e,{focusWithinProps:st}=(0,u.L)({onFocusWithin:ot,onBlurWithin:o.useCallback((e=>{null===it||void 0===it||it(e),nt()}),[nt,it])}),rt=(0,c.u)(),lt=null!==Ce&&void 0!==Ce?Ce:rt,at="select-popup-".concat(lt);return o.createElement("div",Object.assign({ref:Re,className:(0,f.sj)(et,M)},st,{style:tt}),o.createElement(V.Y,{toggleOpen:Le,hasClear:ge,clearValue:Fe,ref:xe,className:Y,qa:j,view:ce,size:ue,pin:de,label:te,placeholder:ne,selectedOptionsContent:Ge,isErrorVisible:Ke,errorMessage:Je?Ve:void 0,open:Ie,disabled:pe,onKeyDown:Xe,renderControl:g,value:ze,popupId:at,selectId:lt,activeIndex:Ae,hasCounter:he&&Ee,renderCounter:we,title:Te}),o.createElement(D.h,{ref:Re,className:G,controlRef:He,width:se,open:Ie,handleClose:nt,disablePortal:fe,virtualized:_e,mobile:ye,placement:re,onAfterClose:ve?()=>{Oe("")}:void 0},I({renderFilter:()=>ve?o.createElement(C,{ref:Ne,size:ue,value:Se,placeholder:oe,onChange:Oe,onKeyDown:$e,renderFilter:b}):null,renderList:()=>Be.length||e.loading?o.createElement(B,{ref:ke,size:ue,value:ze,mobile:ye,flattenOptions:Be,multiple:he,virtualized:_e,onOptionClick:Ze,renderOption:y,renderOptionGroup:k,getOptionHeight:A,getOptionGroupHeight:L,loading:e.loading,onLoadMore:e.onLoadMore,id:at,onChangeActive:Me}):o.createElement(_,{filter:Se,renderEmptyOptions:z})})),o.createElement(d.Z,{errorMessage:Ue?Ve:null,errorMessageId:qe}),o.createElement(q,{name:W,value:ze,disabled:pe,form:F,onReset:Pe}))}));$.Option=e=>null,$.OptionGroup=e=>null},24119:(e,t,n)=>{n.d(t,{Y:()=>w});var o=n(68963),i=n(93316),s=n(57542),r=n(85198),l=n.n(r),a=n(89646),c=n(88776),u=n(68330),d=n(95868),h=n(54973);const p=JSON.parse('{"label_clear":"Clear","label_show-error-info":"Show popup with error info"}'),v=JSON.parse('{"label_clear":"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c","label_show-error-info":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043f\u0430\u043f \u0441 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0435\u0439 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435"}'),m=(0,h.e)({en:p,ru:v},"Select");var f=n(77280);const g=e=>{const{size:t,onClick:n,onMouseEnter:i,onMouseLeave:s,renderIcon:r}=e,l=r?r():o.createElement(c.J,{className:(0,d.Hu)("clear"),data:f.Z});return o.createElement("button",{className:(0,d.Hu)({size:t}),"aria-label":m("label_clear"),onClick:n,onMouseEnter:i,onMouseLeave:s,"data-qa":d.Gd.CLEAR,type:"button"},l)};g.displayName="SelectClear";var b=n(10288);const C=(0,n(36951).Ge)("select-counter");function E(e){let{count:t,size:n,disabled:i}=e;return o.createElement("div",{className:C({size:n})},o.createElement(b.x,{variant:"xl"===n?"body-2":"body-1",color:i?"hint":"primary",className:C("text")},t))}const w=o.forwardRef(((e,t)=>{const{toggleOpen:n,clearValue:r,onKeyDown:h,renderControl:p,view:v,size:f,pin:b,selectedOptionsContent:C,className:w,qa:T,label:y,placeholder:S,isErrorVisible:O,errorMessage:R,open:H,disabled:N,value:k,hasClear:x,popupId:z,selectId:I,activeIndex:A,renderCounter:L,hasCounter:P,title:W}=e,F=Boolean(C),M=Boolean(S&&!F),Y=Array.isArray(k)&&!l()(k.filter(Boolean)),B=(0,a.u)(),[G,_]=o.useState(!1),V={open:H,size:f,pin:b,disabled:N,error:O,"has-clear":x,"no-active":G,"has-value":Y},D={open:H,size:f,view:v,pin:b,disabled:N,error:O},j=o.useCallback((e=>{e&&e.currentTarget!==document.activeElement&&"focus"in e.currentTarget&&e.currentTarget.focus(),n()}),[n]),q=o.useCallback((()=>{_(!0)}),[]),K=o.useCallback((()=>{_(!1)}),[]),U=o.useCallback((()=>{_(!1),r()}),[r]),J=()=>{if(!P)return null;const e=Number(null===k||void 0===k?void 0:k.length)||0,t=o.createElement(E,{count:e,size:f,disabled:N});return L?L(t,{count:e,size:f,disabled:N}):t},Z=e=>{const t=!(null===k||void 0===k?void 0:k[0]);return!x||!r||t||N?null:o.createElement(g,{size:f,onClick:U,onMouseEnter:q,onMouseLeave:K,renderIcon:e.renderIcon})};return p?p({onKeyDown:h,onClear:r,onClick:j,renderClear:e=>Z(e),renderCounter:J,ref:t,open:Boolean(H),popupId:z,selectId:I,activeIndex:A},{value:k}):o.createElement(o.Fragment,null,o.createElement("div",{className:(0,d.e9)(V),role:"group"},o.createElement("button",{id:I,ref:t,role:"combobox","aria-controls":z,className:(0,d.JW)(D,w),"aria-haspopup":"listbox","aria-expanded":H,"aria-activedescendant":void 0===A?void 0:"".concat(z,"-item-").concat(A),disabled:N,onClick:j,onKeyDown:h,type:"button","data-qa":T,title:W},y&&o.createElement("span",{className:(0,d.e9)("label")},y),M&&o.createElement("span",{className:(0,d.e9)("placeholder")},S),F&&o.createElement("span",{className:(0,d.e9)("option-text")},C)),J(),Z({}),R&&o.createElement(u.J,{content:R,tooltipId:B},o.createElement("button",{"aria-label":m("label_show-error-info"),"aria-describedby":B,className:(0,d.e9)("error-icon")},o.createElement(c.J,{data:i.Z,size:"s"===f?12:16}))),o.createElement(c.J,{className:(0,d.e9)("chevron-icon",{disabled:N}),data:s.Z,"aria-hidden":"true"})))}));w.displayName="SelectControl"},58414:(e,t,n)=>{n.d(t,{h:()=>S});var o=n(68963),i=n(44920),s=n(74100),r=n(57107),l=n(95097),a=n(66573);var c=n(84584);var u=n(36951);const d=(0,u.Ge)("sheet");class h{constructor(e,t){this.x=e,this.y=t,this.timeStamp=Date.now()}}class p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.points=[],this.pointsLen=e,this.clear()}clear(){this.points=new Array(this.pointsLen)}addMovement(e){let{x:t,y:n}=e;this.points.pop(),this.points.unshift(new h(t,n))}getYAcceleration(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=this.points[0],n=this.points[e];return t&&n?(t.y-n.y)/Math.pow(t.timeStamp-n.timeStamp,2):0}}let v=[];class m extends o.Component{constructor(){super(...arguments),this.veilRef=o.createRef(),this.sheetRef=o.createRef(),this.sheetTopRef=o.createRef(),this.sheetContentRef=o.createRef(),this.sheetInnerContentRef=o.createRef(),this.sheetTitleRef=o.createRef(),this.velocityTracker=new p,this.observer=null,this.resizeWindowTimer=null,this.state={startScrollTop:0,startY:0,deltaY:0,prevSheetHeight:0,swipeAreaTouched:!1,contentTouched:!1,veilTouched:!1,isAnimating:!1,inWindowResizeScope:!1},this.setStyles=e=>{let{status:t,deltaHeight:n=0}=e;if(!this.sheetRef.current||!this.veilRef.current)return;const o=this.sheetHeight-n,i="showing"===t?"translate3d(0, -".concat(o,"px, 0)"):"translate3d(0, 0, 0)";let s=0;"showing"===t&&(s=0===n?1:o/this.sheetHeight),this.veilRef.current.style.opacity=String(s),this.sheetRef.current.style.transform=i},this.getResultHeight=e=>{const t=.9*window.innerHeight-this.sheetTopHeight;return e>=t?t:e},this.show=()=>{this.setState({isAnimating:!0},(()=>{this.setStyles({status:"showing"}),this.setHash()}))},this.hide=()=>{this.setState({isAnimating:!0},(()=>{this.setStyles({status:"hiding"}),this.removeHash()}))},this.onSwipeAreaTouchStart=e=>{this.velocityTracker.clear(),this.setState({startY:e.nativeEvent.touches[0].clientY,swipeAreaTouched:!0})},this.onContentTouchStart=e=>{this.props.allowHideOnContentScroll&&!this.state.swipeAreaTouched&&(this.velocityTracker.clear(),this.setState({startY:e.nativeEvent.touches[0].clientY,startScrollTop:this.sheetScrollTop,contentTouched:!0}))},this.onSwipeAriaTouchMove=e=>{const t=e.nativeEvent.touches[0].clientY-this.state.startY;this.velocityTracker.addMovement({x:e.nativeEvent.touches[0].clientX,y:e.nativeEvent.touches[0].clientY}),this.setState({deltaY:t}),t<=0||this.setStyles({status:"showing",deltaHeight:t})},this.onContentTouchMove=e=>{if(!this.props.allowHideOnContentScroll)return;if(!this.state.startY)return void this.onContentTouchStart(e);const{startScrollTop:t,swipeAreaTouched:n}=this.state;if(n||this.sheetScrollTop>0||t>0&&t!==this.sheetScrollTop)return;const o=e.nativeEvent.touches[0].clientY-this.state.startY;this.velocityTracker.addMovement({x:e.nativeEvent.touches[0].clientX,y:e.nativeEvent.touches[0].clientY}),this.setState({deltaY:o}),o<=0||this.setStyles({status:"showing",deltaHeight:o})},this.onTouchEndAction=e=>{const t=this.velocityTracker.getYAcceleration();this.sheetHeight<=e?this.props.hideSheet():e>50&&t<=.08&&t>=-.02||t>.08?this.hide():0!==e&&this.show()},this.onSwipeAriaTouchEnd=()=>{const{deltaY:e}=this.state;this.onTouchEndAction(e),this.setState({startY:0,deltaY:0,swipeAreaTouched:!1})},this.onContentTouchEnd=()=>{const{deltaY:e,swipeAreaTouched:t}=this.state;this.props.allowHideOnContentScroll&&!t&&(this.onTouchEndAction(e),this.setState({startY:0,deltaY:0,contentTouched:!1}))},this.onVeilClick=()=>{this.setState({veilTouched:!0}),this.hide()},this.onVeilTransitionEnd=()=>{this.setState({isAnimating:!1}),"0"===this.veilOpacity&&this.props.hideSheet()},this.onContentTransitionEnd=e=>{"height"===e.propertyName&&this.sheetContentRef.current&&(this.sheetContentRef.current.style.transition="none")},this.onResizeWindow=()=>{this.setState({inWindowResizeScope:!0}),this.resizeWindowTimer&&window.clearTimeout(this.resizeWindowTimer),this.resizeWindowTimer=window.setTimeout((()=>{this.onResize()}),25)},this.onResize=()=>{if(!this.sheetRef.current||!this.sheetContentRef.current)return;const e=this.sheetFullHeight;if(e===this.state.prevSheetHeight&&!this.state.inWindowResizeScope)return;const t=this.getResultHeight(e);this.sheetContentRef.current.style.transition=this.state.prevSheetHeight>e?"height 0s ease ".concat("0.3s"):"none",this.sheetContentRef.current.style.height="".concat(t-this.sheetTopHeight,"px"),this.sheetRef.current.style.transform="translate3d(0, -".concat(t,"px, 0)"),this.setState({prevSheetHeight:e,inWindowResizeScope:!1})}}componentDidMount(){this.addListeners(),this.show();const e=this.getResultHeight(this.sheetFullHeight);this.setInitialStyles(e),this.setState({prevSheetHeight:e})}componentDidUpdate(e){const{visible:t,location:n}=this.props;!e.visible&&t&&this.show(),(e.visible&&!t||this.shouldClose(e))&&this.hide(),e.location.pathname!==n.pathname&&(v=[])}componentWillUnmount(){this.removeListeners()}render(){const{content:e,contentClassName:t,swipeAreaClassName:n,hideTopBar:i,title:s}=this.props,{deltaY:r,swipeAreaTouched:l,contentTouched:a,veilTouched:c,isAnimating:u,inWindowResizeScope:h}=this.state,p={"with-transition":!r||c},v={"with-transition":!h&&p["with-transition"]},m={"without-scroll":r>0&&a||l};return o.createElement(o.Fragment,null,o.createElement("div",{ref:this.veilRef,className:d("veil",p),onClick:u?void 0:this.onVeilClick,onTransitionEnd:this.onVeilTransitionEnd,role:"presentation"}),o.createElement("div",{ref:this.sheetRef,className:d("sheet",v),role:"dialog","aria-modal":"true","aria-label":s},!i&&o.createElement("div",{ref:this.sheetTopRef,className:d("sheet-top")},o.createElement("div",{className:d("sheet-top-resizer")})),o.createElement("div",{className:d("sheet-swipe-area",n),onTouchStart:this.onSwipeAreaTouchStart,onTouchMove:this.onSwipeAriaTouchMove,onTouchEnd:this.onSwipeAriaTouchEnd}),o.createElement("div",{ref:this.sheetContentRef,className:d("sheet-content",m,t),onTouchStart:this.onContentTouchStart,onTouchMove:this.onContentTouchMove,onTouchEnd:this.onContentTouchEnd,onTransitionEnd:this.onContentTransitionEnd},s&&o.createElement("div",{ref:this.sheetTitleRef,className:d("sheet-content-title")},s),o.createElement("div",{ref:this.sheetInnerContentRef},e))))}get veilOpacity(){var e;return(null===(e=this.veilRef.current)||void 0===e?void 0:e.style.opacity)||0}get sheetTopHeight(){var e;return(null===(e=this.sheetTopRef.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0}get sheetHeight(){var e;return(null===(e=this.sheetRef.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0}get innerContentHeight(){var e;return(null===(e=this.sheetInnerContentRef.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0}get sheetTitleHeight(){var e;return(null===(e=this.sheetTitleRef.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0}get sheetScrollTop(){var e;return(null===(e=this.sheetContentRef.current)||void 0===e?void 0:e.scrollTop)||0}get sheetFullHeight(){return this.sheetTitleHeight+this.innerContentHeight+this.sheetTopHeight}setInitialStyles(e){this.sheetContentRef.current&&this.sheetInnerContentRef.current&&(this.sheetContentRef.current.style.height="".concat(e,"px"))}addListeners(){window.addEventListener("resize",this.onResizeWindow),this.sheetInnerContentRef.current&&(this.observer=new ResizeObserver((()=>{this.state.inWindowResizeScope||this.onResize()})),this.observer.observe(this.sheetInnerContentRef.current))}removeListeners(){window.removeEventListener("resize",this.onResizeWindow),this.observer&&this.observer.disconnect()}setHash(){const{id:e,platform:t,location:n,history:o}=this.props;if(t===a.t.BROWSER)return;const i=Object.assign(Object.assign({},n),{hash:e});switch(t){case a.t.IOS:n.hash&&v.push(n.hash),o.replace(i);break;case a.t.ANDROID:o.push(i)}}removeHash(){var e;const{id:t,platform:n,location:o,history:i}=this.props;if(n!==a.t.BROWSER&&o.hash==="#".concat(t))switch(n){case a.t.IOS:i.replace(Object.assign(Object.assign({},o),{hash:null!==(e=v.pop())&&void 0!==e?e:""}));break;case a.t.ANDROID:i.goBack()}}shouldClose(e){const{id:t,platform:n,location:o,history:i}=this.props;return n!==a.t.BROWSER&&"POP"===i.action&&e.location.hash!==o.hash&&o.hash!=="#".concat(t)}}m.defaultProps={id:"sheet",allowHideOnContentScroll:!0};const f=function(e){var t;const n=(i=e).displayName||i.name||"Component";var i;return(t=class extends o.Component{render(){return o.createElement(e,Object.assign({},this.props,{mobile:this.context.mobile,platform:this.context.platform,useHistory:this.context.useHistory,useLocation:this.context.useLocation}))}}).displayName="withMobile(".concat(n,")"),t.contextType=c.z,t}(function(e){const t=t=>{const{useHistory:n,useLocation:i}=t,s=(0,l._T)(t,["useHistory","useLocation"]);return o.createElement(e,Object.assign({},s,{history:n(),location:i()}))},n=e.displayName||e.name||"Component";return t.displayName="withRouterWrapper(".concat(n,")"),t}(m)),g=e=>{let{children:t,onClose:n,visible:i,id:l,title:a,className:c,contentClassName:u,swipeAreaClassName:h,allowHideOnContentScroll:p,hideTopBar:v,qa:m}=e;const[g,b]=o.useState(i),[C,E]=o.useState(i);(0,s.y)({enabled:g}),!C&&i&&b(!0),i!==C&&E(i);return g?o.createElement(r.h,null,o.createElement("div",{"data-qa":m,className:d(null,c)},o.createElement(f,{id:l,content:t,contentClassName:u,swipeAreaClassName:h,title:a,visible:i,allowHideOnContentScroll:p,hideTopBar:v,hideSheet:()=>{n&&n(),b(!1)}}))):null};var b=n(95868);const C=e=>e-2*b.YF,E=(e,t,n)=>{let o=t;return o="number"===typeof e?e:"fit"===e?C(t):((e,t)=>t?e>b.T7?e:b.T7:C(e))(t,n),"".concat(o,"px")},w=e=>{const{width:t,disablePortal:n,virtualized:o}=e;return[{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:e=>{let{state:n,name:i}=e;var s;if(null===(s=n.modifiersData["".concat(i,"#persistent")])||void 0===s?void 0:s.skip)return;const r=E(t,n.rects.reference.width,o);"number"!==typeof t&&"fit"!==t?(n.styles.popper.minWidth=r,n.styles.popper.width=void 0):(n.styles.popper.minWidth=r,n.styles.popper.width=r),n.styles.popper.maxWidth="max(90vw, ".concat(C(n.rects.reference.width),"px)"),n.modifiersData["".concat(i,"#persistent")]={skip:"number"!==typeof t}},effect:e=>{let{state:n,name:i}=e;var s;if(null===(s=n.modifiersData["".concat(i,"#persistent")])||void 0===s?void 0:s.skip)return;const r=E(t,n.elements.reference.offsetWidth,o);"number"!==typeof t&&"fit"!==t?n.elements.popper.style.minWidth=r:(n.elements.popper.style.minWidth=r,n.elements.popper.style.width=r),n.elements.popper.style.maxWidth="max(90vw, ".concat(n.elements.reference.offsetWidth,"px)")}},{name:"preventOverflow",options:{padding:10,altBoundary:n,altAxis:!0}}]},T=(0,u.Ge)("select-popup"),y=["bottom-start","bottom-end","top-start","top-end"],S=o.forwardRef(((e,t)=>{let{handleClose:n,onAfterClose:s,width:r,open:l,placement:a=y,controlRef:c,children:u,className:d,disablePortal:h,virtualized:p,mobile:v,id:m}=e;return v?o.createElement(g,{qa:b.Gd.SHEET,className:d,visible:Boolean(l),onClose:n},u):o.createElement(i.G,{contentClassName:T(null,d),qa:b.Gd.POPUP,anchorRef:t,placement:a,offset:[b.YF,b.YF],open:l,onClose:n,disablePortal:h,restoreFocus:!0,restoreFocusRef:c,modifiers:w({width:r,disablePortal:h,virtualized:p}),id:m,onTransitionExited:s},u)}));S.displayName="SelectPopup"},95868:(e,t,n)=>{n.d(t,{Gd:()=>f,Hu:()=>a,JW:()=>r,T7:()=>p,V_:()=>l,YF:()=>h,YV:()=>g,_7:()=>m,_X:()=>c,e9:()=>s,el:()=>u,gX:()=>v,rn:()=>d,sj:()=>i});var o=n(36951);const i=(0,o.Ge)("select"),s=(0,o.Ge)("select-control"),r=(0,o.Ge)("select-control__button"),l=(0,o.Ge)("select-list"),a=(0,o.Ge)("select-clear"),c={s:28,m:28,l:32,xl:36},u=32,d=5,h=1,p=100,v=2e3,m=50,f={LIST:"select-list",POPUP:"select-popup",SHEET:"select-sheet",CLEAR:"select-clear",FILTER_INPUT:"select-filter-input"},g=Symbol("flatten")},38581:(e,t,n)=>{n.d(t,{L:()=>s});var o=n(68963);class i{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o,i;this.nativeEvent=t,this.target=null!==(o=n.target)&&void 0!==o?o:t.target,this.currentTarget=null!==(i=n.currentTarget)&&void 0!==i?i:t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}}function s(e){const{onFocusWithin:t,onBlurWithin:n,onFocusWithinChange:s,isDisabled:r}=e,l=o.useRef(!1),a=o.useCallback((e=>{l.current||document.activeElement!==e.target||(l.current=!0,t&&t(e),s&&s(!0))}),[t,s]),c=o.useCallback((e=>{l.current&&(l.current=!1,n&&n(e),s&&s(!1))}),[n,s]),{onBlur:u,onFocus:d}=function(e){let{onFocus:t,onBlur:n,isDisabled:s}=e;const r=o.useRef(!1),l=o.useRef(null);o.useEffect((()=>{if(s)return;const e=function(){r.current=!1},t=function(e){if(!r.current&&l.current){const t=new FocusEvent("blur",Object.assign(Object.assign({},e),{relatedTarget:e.target,bubbles:!1,cancelable:!1}));n(new i("blur",t,{target:l.current,currentTarget:l.current})),l.current=null}};return window.addEventListener("focus",e,{capture:!0}),window.addEventListener("focusin",t),()=>{window.removeEventListener("focus",e,{capture:!0}),window.removeEventListener("focusin",t)}}),[s,n]);const a=o.useCallback((e=>{null!==e.relatedTarget&&e.relatedTarget!==document.body&&e.relatedTarget!==document||(n(e),l.current=null)}),[n]),c=function(e){const t=o.useRef({isFocused:!1,observer:null});return o.useEffect((()=>{const e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}}),[]),o.useCallback((n=>{const o=n.target;if(o instanceof HTMLButtonElement||o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement||o instanceof HTMLSelectElement){t.current.isFocused=!0;const n=n=>{t.current.isFocused=!1,o.disabled&&(null===e||void 0===e||e(new i("blur",n))),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};o.addEventListener("focusout",n,{once:!0});const s=new MutationObserver((()=>{if(t.current.isFocused&&o.disabled){s.disconnect(),t.current.observer=null;const e=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),o.dispatchEvent(new FocusEvent("focusout",{relatedTarget:e,bubbles:!0}))}}));s.observe(o,{attributes:!0,attributeFilter:["disabled"]}),t.current.observer=s}}),[e])}(n),u=o.useCallback((e=>{r.current=!0,l.current=e.target,c(e),t(e)}),[c,t]);return{onBlur:a,onFocus:u}}({onFocus:a,onBlur:c,isDisabled:r});return r?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:u}}}},34505:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(68963),i=n(56407);const s=e=>{var t;const{onOpenChange:n,onClose:s}=e,r=o.useCallback((e=>{null===n||void 0===n||n(e),!1===e&&s&&s()}),[n,s]),[l,a]=(0,i.z)(e.open,null!==(t=e.defaultOpen)&&void 0!==t&&t,r),c=o.useCallback((e=>{a("boolean"===typeof e?e:!l)}),[l,a]);return{open:l,toggleOpen:c}}}}]);