(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[26158],{23536:(e,t,s)=>{var n=s(68814),i=/[\\^$.*+?()[\]{}|]/g,d=RegExp(i.source);e.exports=function(e){return(e=n(e))&&d.test(e)?e.replace(i,"\\$&"):e}},53807:(e,t,s)=>{"use strict";s.d(t,{O:()=>je});var n=s(60712),i=s(27738),d=s(80136),a=s(47653),l=s(59284),r=s(66821);const o=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.5 6V5a2.5 2.5 0 0 0-5 0v1zM4 5v1a3 3 0 0 0-3 3v3a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3V5a4 4 0 0 0-8 0m6.5 2.5H12A1.5 1.5 0 0 1 13.5 9v3a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 12V9A1.5 1.5 0 0 1 4 7.5zm-1.75 2a.75.75 0 0 0-1.5 0v2a.75.75 0 0 0 1.5 0z",clipRule:"evenodd"}));var c=s(53202),u=s(79411),p=s(711),m=s(88908),I=s(28735),h=s(65797),f=s(57650),x=s(66246),y=s(14044),b=s(32752),g=s(10417);const v=(0,g.om)("list-container-view"),S=l.forwardRef((function({as:e="div",role:t="listbox",children:s,id:i,className:d,fixedHeight:a,extraProps:l,qa:r,style:o},c){return(0,n.jsx)(b.s,{qa:r,as:e,direction:"column",ref:c,grow:!0,tabIndex:-1,id:i,role:t,style:o,className:v({"fixed-height":a},d),...l,children:s})})),B=e=>null!==e&&"object"===typeof e&&"data"in e,C=(0,g.om)("list-recursive-renderer");function j({id:e,itemSchema:t,list:s,...i}){const d=i.children(e,s.structure.idToFlattenIndex[e]);if(B(t)&&t.children){const a=!s.state.expandedById||!(e in s.state.expandedById)||s.state.expandedById[e];return(0,n.jsxs)("ul",{style:i.style,className:C(null,i.className),role:"group",children:[d,a&&Boolean(s.structure.groupsState[e]?.childrenIds)&&t.children.map(((t,d)=>(0,n.jsx)(j,{list:s,id:s.structure.groupsState[e].childrenIds[d],itemSchema:t,...i},d)))]})}return d}function w({containerRef:e,renderItem:t,list:s,...i}){return(0,n.jsx)(S,{ref:e,...i,children:s.structure.items.map(((e,i)=>(0,n.jsx)(j,{itemSchema:e,id:s.structure.rootIds[i],list:s,children:t},i)))})}const k=({list:e,multiple:t})=>({id:s})=>{e.state.disabledById[s]||(e.state.setActiveItemId(s),e.state.expandedById&&s in e.state.expandedById&&e.state.setExpanded?e.state.setExpanded((e=>({...e,[s]:!e[s]}))):e.state.setSelected((e=>({...t?e:{},[s]:!t||!e[s]}))))};var N=s(80702);const E="data-list-item",R={s:[22,44],m:[26,44],l:[34,52],xl:[44,62]},D=({containerRef:e,onItemClick:t,enabled:s,list:n})=>{const i=l.useCallback(((t,s=!0)=>{"number"===typeof t&&n.structure.visibleFlattenIds[t]&&(s&&((e,t)=>{if(document){const s=(t||document).querySelector(`[${E}="${e}"]`);s&&s.scrollIntoView?.({block:"nearest"})}})(n.structure.visibleFlattenIds[t],e?.current),n.state.setActiveItemId?.(n.structure.visibleFlattenIds[t]))}),[n.structure.visibleFlattenIds,n.state,e]),d=l.useCallback(((e,t,s=0)=>{e.preventDefault();const d="string"===typeof n.state.activeItemId?n.structure.visibleFlattenIds.findIndex((e=>e===n.state.activeItemId)):-1,a=(({list:e,index:t,step:s,disabledItemsById:n={}})=>{const i=e.length;let d=(t+i)%i;for(let a=0;a<i;a+=1){const t=e[d];if(t&&!n[t])return d;d=(d+i+s)%i}})({list:n.structure.visibleFlattenIds,index:(d>-1?d:s)+t,step:Math.sign(t),disabledItemsById:n.state.disabledById});i(a)}),[i,n.state.activeItemId,n.state.disabledById,n.structure.visibleFlattenIds]);l.useLayoutEffect((()=>{const i=e?.current;if(s||!i)return;const a=e=>{switch(e.key){case N.D.ARROW_DOWN:d(e,1,-1);break;case N.D.ARROW_UP:d(e,-1);break;case N.D.SPACEBAR:case N.D.ENTER:n.state.activeItemId&&!n.state.disabledById[n.state.activeItemId]&&(e.preventDefault(),t?.({id:n.state.activeItemId}))}};return i.addEventListener("keydown",a),()=>{i.removeEventListener("keydown",a)}}),[e,s,d,n.state.activeItemId,n.state.disabledById,t])};var F=s(32989),P=s(25569),$=s(78068),A=s(60461);const O=(0,g.om)("list-item-expand-icon"),M=({expanded:e,behavior:t="action",disabled:s})=>(0,n.jsx)(A.I,{direction:T({behavior:t,expanded:e}),className:O(null,(0,$.$)({color:s?"hint":void 0})),size:16});function T({behavior:e,expanded:t}){return t&&"action"===e?"top":t&&"state"===e||t&&"state-inverse"===e||"action"===e?"bottom":"state"===e?"right":"state-inverse"===e?"left":"bottom"}const z=(0,g.om)("list-item-view"),L=e=>"object"===typeof e&&null!==e&&"title"in e,q=({children:e,indentation:t=1,className:s,...i})=>(0,n.jsx)(b.s,{width:16*t,className:z("slot",s),...i,children:e}),_=e=>e&&e>=1?(0,n.jsx)(q,{indentation:Math.floor(e)}):null,V=({startSlot:e,subtitle:t,endSlot:s,disabled:i,hasSelectionIcon:d,isGroup:l,indentation:r,expanded:o,selected:c,title:u,expandIconPlacement:p="start",renderExpandIcon:I=M})=>{const h=l?(0,n.jsx)(I,{behavior:"start"===p?"state":"action",expanded:o,disabled:i}):null;return(0,n.jsxs)(b.s,{alignItems:"center",justifyContent:"space-between",gap:"4",className:z("content"),children:[(0,n.jsxs)(b.s,{gap:"2",alignItems:"center",grow:!0,children:[d&&(0,n.jsx)(q,{children:c?(0,n.jsx)(a.I,{data:P.A,size:16,className:(0,$.$)({color:"info"})}):null}),_(r),"start"===p&&h,e,(0,n.jsxs)("div",{className:z("main-content"),children:["string"===typeof u?(0,n.jsx)(m.E,{ellipsis:!0,color:i?"hint":void 0,variant:l?"subheader-1":void 0,children:u}):u,"string"===typeof t?(0,n.jsx)(m.E,{ellipsis:!0,color:i?"hint":"secondary",children:t}):t]})]}),(0,n.jsxs)(b.s,{gap:"2",children:["end"===p&&h,s]})]})},U=l.forwardRef((function({id:e,as:t,size:s="m",active:i,selected:d,disabled:a,selectionViewType:l="multiple",activeOnHover:r,className:o,height:c,dragging:u,style:p,content:m,role:I="option",onClick:h,...f},x){const y=t||"li",b=a?void 0:h,g="boolean"===typeof r?r:Boolean(b),v={minHeight:`var(--g-list-item-height, ${c??R[s][Number(Boolean(!!L(m)&&m?.subtitle))]}px)`,...p};return(0,n.jsx)(y,{[E]:e,role:I,"aria-selected":d,onClick:b,className:z({active:u||i,selected:d&&"single"===l,activeOnHover:g,radius:s,size:s,dragging:u,clickable:Boolean(b)},(0,F.Y)({px:2},o)),style:v,ref:x,...f,children:L(m)?(0,n.jsx)(V,{...m,hasSelectionIcon:"multiple"===l,selected:d,disabled:a}):m})})),W=(0,g.om)("tree-list"),H=({qa:e,id:t,size:s="m",className:i,list:d,multiple:a,containerRef:r,renderItem:o,renderContainer:c=w,onItemClick:p,mapItemDataToContentProps:m})=>{const I=(0,u.u)(),h=t??I,f=l.useRef(null),x=r??f,y=l.useMemo((()=>{if(null===p)return;return(e,t)=>{const s={id:e.id,list:d};if(p)p?.(s,t);else{k({list:d,multiple:a})(s,t)}}}),[p,d,a]);D({containerRef:x,onItemClick:y,list:d});return c({qa:e,id:`list-${h}`,size:s,containerRef:x,className:W(null,i),list:d,renderItem:(t,i,l)=>{const r=(({qa:e,list:t,onItemClick:s,mapItemDataToContentProps:n,size:i="m",multiple:d=!1,id:a})=>{const l={...t.structure.itemsState[a],...t.structure.groupsState[a],isLastItem:a===t.structure.visibleFlattenIds[t.structure.visibleFlattenIds.length-1]},r={id:a,size:i,selected:Boolean(t.state.selectedById[a]),disabled:Boolean(t.state.disabledById?.[a]),active:a===t.state.activeItemId,onClick:s?e=>s({id:a},e):void 0,selectionViewType:Boolean(d)&&!l.childrenIds?"multiple":"single",content:{expanded:t.state.expandedById?.[a],indentation:l.indentation,isGroup:t.state.expandedById&&a in t.state.expandedById,...n(t.structure.itemsById[a])}};return e&&(r.qa=((e,t)=>`${e}-${t}`)(e,a)),{data:t.structure.itemsById[a],props:r,context:l}})({qa:e,id:t,size:s,multiple:a,mapItemDataToContentProps:m,onItemClick:y,list:d});return o?o({id:t,data:r.data,props:r.props,context:r.context,index:i,renderContainerProps:l,list:d}):(0,n.jsx)(U,{...r.props,...l})}})};var J=s(44900),G=s(59706),Y=s(11282);const K=({item:e,groupedId:t,getItemId:s})=>{let n=t;return"function"===typeof s?n=s(B(e)?e.data:e):e&&"object"===typeof e&&"id"in e&&e.id&&(n=e.id),n},Q=(e,t)=>t?`${t}-${e}`:`${e}`;function X({items:e,expandedById:t,getItemId:s}){const n=l.useMemo((()=>function({items:e,getItemId:t,expandedById:s={}}){const n=[],i=(e,d,a,l)=>{const r=Q(a,l),o=K({groupedId:r,item:d,getItemId:t});return l||n.push(o),e.push(o),B(d)&&d.children&&(o in s&&!s[o]||e.push(...d.children.reduce(((e,t,s)=>i(e,t,s,o)),[]))),e},d=e.reduce(((e,t,s)=>i(e,t,s)),[]),a={};for(const[l,r]of d.entries())a[r]=l;return{rootIds:n,visibleFlattenIds:d,idToFlattenIndex:a}}({items:e,expandedById:t,getItemId:s})),[e,t,s]);return n}function Z({items:e,defaultExpandedState:t="expanded",getItemId:s}){const n={itemsById:{},groupsState:{},itemsState:{},initialState:{disabledById:{},selectedById:{},expandedById:{}}},i=({item:e,index:d,parentGroupedId:a,parentId:l})=>{const r=Q(d,a),o=K({groupedId:r,item:e,getItemId:s});l&&n.groupsState[l].childrenIds.push(o),n.itemsById[o]=e.data,n.itemsState[o]||(n.itemsState[o]={indentation:0}),"undefined"!==typeof l&&(n.itemsState[o].parentId=l),"undefined"!==typeof e.selected&&(n.initialState.selectedById[o]=e.selected),"undefined"!==typeof e.disabled&&(n.initialState.disabledById[o]=e.disabled),r&&(n.itemsState[o].indentation=(e=>e.split("-"))(r).length-1),e.children&&(n.groupsState[o]={childrenIds:[]},n.initialState.expandedById&&("undefined"===typeof e.expanded?n.initialState.expandedById[o]="expanded"===t:n.initialState.expandedById[o]=e.expanded),e.children.forEach(((e,t)=>{i({item:e,index:t,parentGroupedId:r,parentId:o})})))};return e.forEach(((e,t)=>B(e)?i({item:e,index:t}):(({item:e,index:t})=>{const i=K({groupedId:String(t),item:e,getItemId:s});n.itemsById[i]=e,n.itemsState[i]||(n.itemsState[i]={indentation:0}),e&&"object"===typeof e&&("selected"in e&&"boolean"===typeof e.selected&&(n.initialState.selectedById[i]=e.selected),"disabled"in e&&"boolean"===typeof e.disabled&&(n.initialState.disabledById[i]=e.disabled))})({item:e,index:t}))),n}const ee=({items:e,getItemId:t,defaultExpandedState:s="expanded",withExpandedState:n=!0,initialState:i,controlledState:d})=>{const{itemsById:a,groupsState:r,itemsState:o,initialState:c}=function({items:e,getItemId:t,defaultExpandedState:s}){const n=l.useRef(t).current;return l.useMemo((()=>Z({items:e,getItemId:n,defaultExpandedState:s})),[n,s,e])}({items:e,getItemId:t,defaultExpandedState:s}),u=(({initialState:e,withExpandedState:t})=>{const s=l.useRef(e),n=s.current!==e;s.current=e;const[i,d]=l.useState((()=>e?.disabledById??{})),[a,r]=l.useState((()=>e?.selectedById??{})),[o,c]=l.useState((()=>e?.expandedById??{})),[u,p]=l.useState((()=>e?.activeItemId));n&&(e?.disabledById&&d((t=>({...e.disabledById,...t}))),e?.selectedById&&r((t=>({...e.selectedById,...t}))),e?.expandedById&&c((t=>({...e.expandedById,...t}))),p((t=>t??e?.activeItemId)));const m={disabledById:i,selectedById:a,activeItemId:u,setDisabled:d,setSelected:r,setActiveItemId:p};return t&&(m.expandedById=o,m.setExpanded=c),m})({initialState:l.useMemo((()=>({expandedById:{...c.expandedById,...i?.expandedById},selectedById:{...c.selectedById,...i?.selectedById},disabledById:{...c.disabledById,...i?.disabledById},activeItemId:i?.activeItemId})),[c.disabledById,c.expandedById,c.selectedById,i?.activeItemId,i?.disabledById,i?.expandedById,i?.selectedById]),withExpandedState:n}),p=l.useMemo((()=>d?{...u,...d}:u),[d,u]),{visibleFlattenIds:m,idToFlattenIndex:I,rootIds:h}=X({items:e,expandedById:p.expandedById,getItemId:t});return{state:p,structure:{rootIds:h,items:e,visibleFlattenIds:m,idToFlattenIndex:I,itemsById:a,groupsState:r,itemsState:o}}},te=({defaultValue:e=[],value:t,onUpdate:s})=>{const[n,i]=l.useState(e),d=t??n,a=!t;return l.useMemo((()=>{const e=d.reduce(((e,t)=>(e[t]=!0,e)),{});return{value:d,selectedById:e,setSelected:t=>{const n=(e=>Object.entries(e).reduce(((e,[t,s])=>(s&&e.push(t),e)),[]))("function"===typeof t?t(e):t);a?i(n):s?.(n)},setInnerValue:a?i:void 0}}),[s,a,d])},se=(0,g.om)("tree-select"),ne=e=>(0,n.jsx)(U,{...e.props,...e.renderContainerProps}),ie=l.forwardRef((function({id:e,qa:t,title:s,placement:i,slotBeforeListBody:d,slotAfterListBody:a,size:r="m",defaultOpen:o,width:c,containerRef:p,className:m,containerClassName:b,popupClassName:g,open:v,multiple:S,popupWidth:B,popupDisablePortal:C,items:j,value:w,defaultValue:N,placeholder:E,disabled:R=!1,withExpandedState:D=!0,defaultExpandedState:F="expanded",hasClear:P,errorMessage:$,errorPlacement:A,validationState:O,onClose:M,onOpenChange:T,onUpdate:z,renderControl:L,renderItem:q=ne,renderContainer:_,mapItemDataToContentProps:V,onFocus:U,onBlur:W,getItemId:K,onItemClick:Q},X){const Z=(0,Y.I)(),ie=(0,u.u)(),de=e??ie,ae=`tree-select-popup-${de}`,le=l.useRef(null),re=l.useRef(null),oe=l.useRef(null),ce=p??oe,{errorMessage:ue,errorPlacement:pe,validationState:me}=(0,G.Av)({errorMessage:$,errorPlacement:A||"outside",validationState:O}),Ie=(0,u.u)(),he="invalid"===me,fe=he&&Boolean(ue)&&"outside"===pe,xe=he&&Boolean(ue)&&"inside"===pe,ye=(0,I.N)(X,re),{toggleOpen:be,open:ge}=(0,f.F)({defaultOpen:o,onClose:M,onOpenChange:T,open:v}),{value:ve,selectedById:Se,setSelected:Be}=te({value:w,defaultValue:N,onUpdate:z}),Ce=ee({controlledState:{selectedById:Se,setSelected:Be},items:j,getItemId:K,defaultExpandedState:F,withExpandedState:D}),je=l.useMemo((()=>{if(null===Q)return;return(e,t)=>{const s={id:e.id,list:Ce};if(Q)Q?.(s,t);else{k({list:Ce,multiple:S})(s,t);const n=Ce.state.expandedById&&e.id in Ce.state.expandedById;S||n||be(!1)}}}),[Q,Ce,S,be]);l.useLayoutEffect((()=>(ge&&ce.current?.focus({preventScroll:!0}),()=>Ce.state.setActiveItemId(void 0))),[ge]);const we=l.useCallback((()=>be(!1)),[be]),{focusWithinProps:ke}=(0,h.R)({onFocusWithin:U,onBlurWithin:l.useCallback((e=>{W?.(e),we()}),[we,W])}),Ne={list:Ce,open:ge,placeholder:E,toggleOpen:be,clearValue:()=>Ce.state.setSelected({}),ref:ye,size:r,value:ve,disabled:R,id:de,activeItemId:Ce.state.activeItemId,title:s,errorMessage:xe?ue:void 0,errorPlacement:pe,validationState:me,hasClear:P,isErrorVisible:he},Ee=L?L(Ne):(0,n.jsx)(x.Y,{...Ne,selectedOptionsContent:l.Children.toArray(ve.map((e=>e in Ce.structure.itemsById?V(Ce.structure.itemsById[e]).title:""))).join(", "),view:"normal",pin:"round-round",popupId:ae,selectId:de}),Re={..."max"===c&&{width:c}},De={};return"number"===typeof c&&(De.width=c),(0,n.jsxs)("div",{ref:le,...ke,className:se(Re,m),style:De,children:[Ee,(0,n.jsxs)(y.t,{ref:le,className:se("popup",{size:r},g),controlRef:re,width:B,placement:i,open:ge,handleClose:we,disablePortal:C,mobile:Z,id:ae,children:[d,(0,n.jsx)(H,{list:Ce,size:r,className:se("list",b),qa:t,multiple:S,id:`list-${de}`,containerRef:ce,onItemClick:je,renderContainer:_,mapItemDataToContentProps:V,renderItem:q??ne}),a]}),(0,n.jsx)(J.o,{errorMessage:fe?ue:null,errorMessageId:Ie})]})}));var de=s(79602),ae=s(43781);function le(e,t){return!t||"object"!==typeof t||!("title"in t)||"string"!==typeof t.title||t.title.toLowerCase().includes((e||"").toLowerCase())}function re({items:e,initialFilterValue:t="",filterItem:s,onFilterChange:n,filterItems:i,debounceTimeout:d=300}){const a=l.useRef(null),[r,o]=l.useState(t),[c,u]=l.useState(e),[p,m]=l.useState(e),I=l.useCallback(((e,t)=>{if(i)return()=>i(e,t);if(e){const n=s||le;return()=>function(e,t){const s=(e,n)=>{if(B(n)&&n.children){const i=n.children.reduce(s,[]);i.length?e.push({...n,data:n.data,children:i}):t(n.data)&&e.push({...n,data:n.data,children:[]})}else if(B(n)&&t(n.data)){const{children:t,...s}=n;e.push(s)}else!B(n)&&t(n)&&e.push(n);return e};return e.reduce(s,[])}(t,(t=>n(e,t)))}return()=>t}),[s,i]);e!==c&&(m(I(r,e)),u(e));const h=l.useCallback(ae((t=>m(I(t,e))),d),[m,I,e,d]),{onFilterUpdate:f,reset:x}=l.useMemo((()=>({reset:()=>{o(t),n?.(t),h(t)},onFilterUpdate:e=>{o(e),n?.(e),h(e)}})),[h,t,n]);return{filterRef:a,filter:r,reset:x,items:p,onFilterUpdate:f}}var oe=s(3169);const ce=JSON.parse('{"button_apply":"Apply","button_reset":"Reset","button_switcher":"Columns"}'),ue=JSON.parse('{"button_apply":"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c","button_reset":"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c","button_switcher":"\u041a\u043e\u043b\u043e\u043d\u043a\u0438"}'),pe=(0,oe.N)({en:ce,ru:ue},"TableColumnSetupInner"),me=(0,g.om)("inner-table-column-setup"),Ie=me("controls"),he=me("filter-input"),fe=me("empty-placeholder"),xe={isDragDisabled:!0},ye=e=>({title:e.title}),be=(e,t)=>"string"!==typeof t.title||t.title.toLowerCase().includes(e.trim().toLowerCase()),ge=e=>{const{renderSwitcher:t,popupWidth:s,popupPlacement:I,items:h,onUpdate:f,sortable:x,renderControls:y,className:g,defaultItems:v=h,showResetButton:B,filterable:C,filterPlaceholder:j,filterEmptyMessage:w,filterSettings:k=be}=e,[N,E]=l.useState(!1),[R,D]=l.useState(x),[F,P]=l.useState(x);x!==F&&(P(x),D(x));const[$,A]=l.useState(h),[O,M]=l.useState(h);h!==O&&(M(h),A(h));const T=re({items:$,filterItem:k,debounceTimeout:0}),z=()=>{const e=$.map((({id:e,isSelected:t})=>({id:e,isSelected:t})));f(e),W(!1)},L=()=>(0,n.jsx)(d.$,{view:"action",width:"max",onClick:z,children:pe("button_apply")}),q="function"===typeof B?B($):B,_=(({onDragEnd:e,renderControls:t})=>{const s=(0,u.u)();return({renderItem:i,list:d,containerRef:a,id:r,className:o})=>{const{stickyStartItemIdList:u,sortableItemIdList:p,stickyEndItemIdList:m}=((e,t)=>{let s=0;for(;s!==t.length;s++){const n=e[t[s]];if("left"!==n?.sticky&&"start"!==n?.sticky)break}let n=t.length;for(;0!==n;n--){const s=e[t[n-1]];if("right"!==s?.sticky&&"end"!==s?.sticky)break}return{stickyStartItemIdList:t.slice(0,s),sortableItemIdList:t.slice(s,n),stickyEndItemIdList:t.slice(n)}})(d.structure.itemsById,d.structure.visibleFlattenIds),I=u.map(((e,t)=>i(e,t,xe))),h=p.map(((e,t)=>i(e,t+u.length))),f=m.map(((e,t)=>i(e,I.length+h.length+t,xe)));return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsxs)(S,{ref:a,id:r,className:o,children:[I,(0,n.jsx)(c.JY,{onDragEnd:e,children:(0,n.jsx)(c.gL,{droppableId:s,renderClone:(e,t,s)=>{const n={provided:e,snapshot:t};return i(d.structure.visibleFlattenIds[s.source.index],s.source.index,n)},children:e=>(0,n.jsxs)("div",{...e.droppableProps,ref:e.innerRef,children:[h,e.placeholder]})})}),f]}),(0,n.jsx)("div",{className:Ie,children:t()})]})}})({onDragEnd:({destination:e,source:t})=>{void 0!==e?.index&&e?.index!==t.index&&A((s=>((e,t,s)=>{const n=[...e],[i]=n.splice(t,1);return n.splice(s,0,i),n})(s,t.index,e.index)))},renderControls:()=>y?y({DefaultApplyButton:L,onApply:z}):(0,n.jsxs)(b.s,{gapRow:1,direction:"column",className:Ie,children:[q&&(0,n.jsx)(d.$,{onClick:()=>{A(v)},width:"max",children:pe("button_reset")}),(0,n.jsx)(L,{})]})}),V=(e=>({data:t,props:s,index:i,renderContainerProps:d})=>{const u=!1===e||!0===d?.isDragDisabled,p=u?void 0:(0,n.jsx)(a.I,{data:r.A,size:16}),m=t.isRequired?(0,n.jsx)(a.I,{data:o}):void 0,I=!t.isRequired&&s.selected,h={...s,selected:I,selectionViewType:t.isRequired?"single":"multiple",content:{...s.content,startSlot:m,endSlot:p}};if(u)return(0,l.createElement)(U,{...h,key:h.id});const f=(e,t)=>(0,n.jsx)(U,{...h,...e.draggableProps,...e.dragHandleProps,ref:e.innerRef,dragging:t.isDragging});return d?.provided&&d.snapshot?f(d.provided,d.snapshot):(0,n.jsx)(c.sx,{draggableId:s.id,index:i,isDragDisabled:u,children:f},`item-key-${s.id}`)})(R),W=e=>{E(e),!1===e&&(A(h),D(x),T.reset())},H=l.useMemo((()=>(e=>{const t=[];return e.forEach((({id:e,isSelected:s})=>{s&&t.push(e)})),t})($)),[$]),J=(G=w,()=>(0,n.jsx)(m.E,{className:fe,children:G}));var G;const Y=C?(0,n.jsx)(de.k,{size:"m",view:"clear",placeholder:j,value:T.filter,className:he,onUpdate:e=>{T.onFilterUpdate(e),D(!e.length)},hasClear:!0}):null,K=T.filter&&!T.items.length?J:_;return(0,n.jsx)(ie,{className:me(null,g),mapItemDataToContentProps:ye,multiple:!0,size:"l",open:N,value:H,items:T.filter?T.items:$,onUpdate:e=>{A((t=>t.map((t=>({...t,isSelected:t.isRequired||e.includes(t.id)})))))},popupWidth:s,onOpenChange:W,placement:I,slotBeforeListBody:Y,renderContainer:K,renderControl:({toggleOpen:e})=>{const s=(0,p.h)(e);return t?.({onClick:e,onKeyDown:s})||(0,n.jsxs)(d.$,{onClick:e,onKeyDown:s,children:[(0,n.jsx)(a.I,{data:i.A}),pe("button_switcher")]})},renderItem:V})},ve=JSON.parse('{"button_switcher":"Columns"}'),Se=JSON.parse('{"button_switcher":"\u041a\u043e\u043b\u043e\u043d\u043a\u0438"}'),Be=(0,oe.N)({en:ve,ru:Se},"TableColumnSetup"),Ce=(0,g.om)("table-column-setup"),je=e=>{const{switcher:t,renderSwitcher:s,disabled:l,popupWidth:r,popupPlacement:o,className:c,items:u,sortable:p=!0,showStatus:m,onUpdate:I}=e,h=()=>{if(!m)return null;const e=`${u.reduce(((e,t)=>t.selected?e+1:e),0)}/${u.length}`;return(0,n.jsx)("span",{className:Ce("status"),children:e})},f=u.map((({id:e,title:t,required:s,selected:n,sticky:i})=>({id:e,title:t,isRequired:s,isSelected:n,sticky:i})));return(0,n.jsx)(ge,{items:f,onUpdate:e=>{I(e.map((({id:e,isSelected:t})=>{const s=u.find((t=>t.id===e));return{id:e,selected:t,title:s?.title,required:s?.required}})))},popupPlacement:o,popupWidth:r,renderSwitcher:e=>s?.(e)||t||(0,n.jsxs)(d.$,{disabled:l,onClick:e.onClick,children:[(0,n.jsx)(a.I,{data:i.A}),Be("button_switcher"),h()]}),sortable:p,className:Ce(null,c)})}}}]);