"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[3017],{74003:(e,t,r)=>{r.d(t,{q:()=>h});var n=r(26714),s=r(72616),o=r(26390),a=r(78759),i=r(99294),l=r(55842),d=r(37711);const u=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),c=(0,d.wZ)("ydb-diagnostics-autorefresh-control",{en:u});var m=r(10161);const p=(0,i.cn)("auto-refresh-control");function h(e){let{className:t}=e;const r=(0,l.zL)(),[i,d]=(0,l.Rj)();return(0,m.jsxs)("div",{className:p(null,t),children:[(0,m.jsx)(s.z,{view:"flat-secondary",onClick:()=>{r(a.h.util.invalidateTags(["All"]))},extraProps:{"aria-label":c("Refresh")},children:(0,m.jsx)(s.z.Icon,{children:(0,m.jsx)(n.Z,{})})}),(0,m.jsxs)(o.P,{value:[String(i)],onUpdate:e=>{d(Number(e))},width:85,qa:"ydb-autorefresh-select",children:[(0,m.jsx)(o.P.Option,{value:"0",children:c("None")}),(0,m.jsx)(o.P.Option,{value:"15000",children:c("15 sec")}),(0,m.jsx)(o.P.Option,{value:"60000",children:c("1 min")}),(0,m.jsx)(o.P.Option,{value:"120000",children:c("2 min")}),(0,m.jsx)(o.P.Option,{value:"300000",children:c("5 min")})]})]})}},61168:(e,t,r)=>{r.d(t,{l:()=>l});var n=r(16318),s=r(99294),o=r(10161);const a=(0,s.cn)("ydb-cell-with-popover"),i=100;function l(e){let{children:t,className:r,wrapperClassName:s,fullWidth:l,...d}=e;return(0,o.jsx)("div",{className:a({fullWidth:l},s),children:(0,o.jsx)(n.J,{delayClosing:i,delayOpening:i,className:a("popover",{"full-width":l},r),...d,children:t})})}},43926:(e,t,r)=>{r.d(t,{f:()=>a});var n=r(34706),s=r(24874),o=r(10161);const a=e=>{let{children:t,content:r,className:a,pinOnClick:i,hasArrow:l=!0,placement:d=["top","bottom"],...u}=e;const[c,m]=n.useState(!1),[p,h]=n.useState(!1),g=n.useRef(null);return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(s.G,{anchorRef:g,open:p||c,placement:d,hasArrow:l,onOutsideClick:()=>{h(!1)},...u,children:r}),(0,o.jsx)("span",{className:a,ref:g,onClick:i?()=>{h(!0)}:void 0,onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},children:t})]})}},90457:(e,t,r)=>{r.d(t,{p:()=>d});r(34706);var n=r(99294),s=r(27810),o=r(53458),a=r(55842),i=r(10161);const l=(0,n.cn)("storage-disk-progress-bar");function d(e){let{diskAllocatedPercent:t=-1,severity:r,compact:n,faded:d,inactive:u,empty:c,content:m,className:p}=e;const[h]=(0,a.yu)(s.yT),g={inverted:h,compact:n,faded:d,empty:c,inactive:u},v=void 0!==r&&(0,o.b2)(r);v&&(g[v.toLocaleLowerCase()]=!0);return(0,i.jsxs)("div",{className:l(g,p),role:"meter","aria-label":"Disk allocated space","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t,children:[(()=>{if(n)return(0,i.jsx)("div",{className:l("fill-bar",g),style:{width:"100%"}});const e=h?100-t:t;return t>=0?(0,i.jsx)("div",{className:l("fill-bar",g),style:{width:`${e}%`}}):null})(),m||(!n&&t>=0?(0,i.jsx)("div",{className:l("title"),children:`${Math.round(t)}%`}):null)]})}},14325:(e,t,r)=>{r.d(t,{C:()=>l});var n=r(2634),s=r(99294);const o=(0,r(37711).wZ)("ydb-entities-count",{ru:{of:"\u0438\u0437"},en:{of:"of"}});var a=r(10161);const i=(0,s.cn)("ydb-entities-count"),l=e=>{let{total:t,current:r,label:s,loading:l,className:d}=e,u="";return s&&(u+=`${s}: `),l?u+="...":(u+=`${r}`,t&&Number(t)!==Number(r)&&(u+=` ${o("of")} ${t}`)),(0,a.jsx)(n._,{theme:"info",size:"m",className:i(null,d),children:u})}},62508:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(17823),s=r(99175),o=r(77468),a=r(99294),i=r(32489),l=r(73287),d=r(10161);const u=(0,a.cn)("entity-status");function c(e){let{status:t=o.K.Grey,name:r="",label:a,path:c,iconPath:m,size:p="s",mode:h="color",showStatus:g=!0,externalLink:v=!1,withLeftTrim:S=!1,hasClipboardButton:f,clipboardButtonAlwaysVisible:x=!1,className:w}=e;const N=()=>g?(0,d.jsx)(l.J,{className:u("icon"),status:t,size:p,mode:h}):null;return(0,d.jsxs)("div",{className:u(null,w),children:[m?(b=m,(0,d.jsx)(n.r,{target:"_blank",href:b,children:N()})):N(),a&&(0,d.jsx)("span",{title:a,className:u("label",{size:p,state:t.toLowerCase()}),children:a}),(c||r)&&(0,d.jsxs)("div",{className:u("wrapper",{"with-button":f}),children:[(0,d.jsx)("span",{className:u("link",{"with-left-trim":S}),title:r,children:c?v?(0,d.jsx)(n.r,{className:u("name"),href:c,children:r}):(0,d.jsx)(i.h,{className:u("name"),to:c,children:r}):r&&(0,d.jsx)("span",{className:u("name"),children:r})}),f&&(0,d.jsx)("div",{className:u("controls-wrapper",{visible:x}),children:(0,d.jsx)(s.m,{text:r,size:"xs",view:"normal",className:u("clipboard-button",{visible:x})})})]})]});var b}},91890:(e,t,r)=>{r.d(t,{I:()=>u});var n=r(34706),s=r(24874),o=r(58399),a=r.n(o),i=r(99294),l=r(10161);const d=(0,i.cn)("hover-popup"),u=e=>{let{children:t,popupContent:r,showPopup:o,offset:i,anchorRef:u,onShowPopup:c,onHidePopup:m,placement:p=["top","bottom"],contentClassName:h}=e;const[g,v]=n.useState(!1),S=n.useRef(null),f=n.useMemo((()=>a()((()=>{v(!0),null===c||void 0===c||c()}),100)),[c]),x=n.useCallback((()=>{v(!1),null===m||void 0===m||m()}),[m]),w=n.useMemo((()=>a()(x,100)),[x]),N=f,[b,k]=n.useState(!1),[y,D]=n.useState(!1),I=n.useCallback((()=>{k(!0)}),[]),j=n.useCallback((()=>{k(!1)}),[]),P=n.useCallback((()=>{D(!0)}),[]),C=n.useCallback((()=>{D(!1)}),[]),E=n.useCallback((()=>{D(!1),k(!1),x()}),[x]),T=g||o||b||y;return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)("span",{ref:S,onMouseEnter:N,onMouseLeave:()=>{f.cancel(),w()},children:t}),(0,l.jsx)(s.G,{contentClassName:d(null,h),anchorRef:u||S,open:T,onMouseEnter:I,onMouseLeave:j,onEscapeKeyDown:E,onBlur:C,placement:p,hasArrow:!0,offset:i||[0,12],children:(0,l.jsx)("div",{onContextMenu:P,children:r})})]})}},92146:(e,t,r)=>{r.d(t,{O:()=>N});var n=r(53216),s=r(83797),o=r(10142),a=r(99294),i=r(27810),l=r(95440),d=r(73689),u=r(91890),c=r(20760),m=r(37711);const p=JSON.parse('{"text_external-consumption":"External Consumption","text_allocator-caches":"Allocator Caches","text_shared-cache":"Shared Cache","text_memtable":"MemTable","text_query-execution":"Query Execution","text_usage":"Usage","text_soft-limit":"Soft Limit","text_hard-limit":"Hard Limit","text_other":"Other"}'),h=(0,m.wZ)("ydb-memory-viewer",{en:p});function g(e){return(0,d.kE)(e)?parseFloat(String(e)):void 0}var v=r(10161);const S=1,f=.01*i.GS,x=(0,a.cn)("memory-viewer"),w=(e,t)=>[(0,o.td)({value:e,size:"gb",withSizeLabel:!1,precision:2}),(0,o.td)({value:t,size:"gb",withSizeLabel:!0,precision:1})];function N(e){let{stats:t,percents:r,formatValues:a,className:i,warningThreshold:m=60,dangerThreshold:p=80}=e;const N=t.AnonRss,b=t.HardLimit,k=(0,n.F)();let y=Math.round(parseFloat(String(N))/parseFloat(String(b))*100)||0;y=y>100?100:y;let D=N,I=b,j="/";r?(D=y+"%",I="",j=""):a&&([D,I]=a(Number(N),Number(b)));const P=function(e){const t=[{label:h("text_shared-cache"),key:"SharedCacheConsumption",value:g(e.SharedCacheConsumption),capacity:g(e.SharedCacheLimit),isInfo:!1},{label:h("text_query-execution"),key:"QueryExecutionConsumption",value:g(e.QueryExecutionConsumption),capacity:g(e.QueryExecutionLimit),isInfo:!1},{label:h("text_memtable"),key:"MemTableConsumption",value:g(e.MemTableConsumption),capacity:g(e.MemTableLimit),isInfo:!1},{label:h("text_allocator-caches"),key:"AllocatorCachesMemory",value:g(e.AllocatorCachesMemory),isInfo:!1}],r=t.filter((e=>void 0!==e.value)).reduce(((e,t)=>e+t.value),0),n=g(e.AnonRss);if(n){const e=Math.max(0,n-r);t.push({label:h("text_other"),key:"Other",value:e,isInfo:!1})}return t.push({label:h("text_external-consumption"),key:"ExternalConsumption",value:g(e.ExternalConsumption),isInfo:!0},{label:h("text_usage"),key:"Usage",value:g(e.AnonRss),isInfo:!0},{label:h("text_soft-limit"),key:"SoftLimit",value:g(e.SoftLimit),isInfo:!0},{label:h("text_hard-limit"),key:"HardLimit",value:g(e.HardLimit),isInfo:!0}),t.filter((e=>void 0!==e.value))}(t),C=(0,l.S)({fillWidth:y,warningThreshold:m,dangerThreshold:p,colorizeProgress:!0});let E=0;return(0,v.jsx)(u.I,{popupContent:(0,v.jsx)(s.w,{responsive:!0,children:P.map((e=>{let{label:t,value:r,capacity:n,key:a}=e;return(0,v.jsx)(s.w.Item,{name:(0,v.jsxs)("div",{className:x("container"),children:[(0,v.jsx)("div",{className:x("legend",{type:a})}),(0,v.jsx)("div",{className:x("name"),children:t})]}),children:n?(0,v.jsx)(c.y,{value:r,capacity:n,formatValues:w,colorizeProgress:!0}):(0,o.td)({value:r,size:"gb",withSizeLabel:!0,precision:2})},t)}))}),children:(0,v.jsx)("div",{className:x({theme:k,status:C},i),children:(0,v.jsxs)("div",{className:x("progress-container"),children:[P.filter((e=>{let{isInfo:t}=e;return!t})).map((e=>{if(e.value<f)return null;const t=Math.max((r=e.value,N?r/parseFloat(String(b))*100:0),S);var r;const n=E;return E+=t,(0,v.jsx)("div",{className:x("segment",{type:e.key}),style:{width:`${t}%`,left:`${n}%`}},e.key)})),(0,v.jsx)("div",{className:x("text"),children:(0,d.kE)(b)?`${D} ${j} ${I}`:D})]})})})}},66970:(e,t,r)=>{r.d(t,{J:()=>S,b:()=>v});var n=r(34706),s=r(65e3),o=r(4969),a=r(77468),i=r(25665),l=r(27810),d=r(70340),u=r(55842),c=r(73689),m=r(41591),p=r(90808),h=r(10161);const g=[a.K.Orange,a.K.Red,a.K.Yellow],v=(e,t,r)=>{const{AvailableSize:n,TotalSize:s,State:o,PDiskId:a,NodeId:u,StringifiedId:m,Path:v,Realtime:S,Type:f,Device:x}=e,w=[{label:"PDisk",value:null!==m&&void 0!==m?m:l.jX},{label:"State",value:o||"not available"},{label:"Type",value:f||"unknown"}];if(u&&w.push({label:"Node Id",value:u}),t&&w.push({label:"Host",value:t}),v&&w.push({label:"Path",value:v}),(0,c.kE)(s)&&w.push({label:"Available",value:`${(0,c.Uz)(n)} of ${(0,c.Uz)(s)}`}),S&&g.includes(S)&&w.push({label:"Realtime",value:S}),x&&g.includes(x)&&w.push({label:"Device",value:x}),r&&(0,i.D)(u)&&(0,i.D)(a)){const e=(0,d.ok)({nodeId:u,pDiskId:a});w.push({label:"Links",value:(0,h.jsx)(p.j,{title:"Developer UI",url:e})})}return w},S=e=>{let{data:t}=e;const r=(0,u.ix)(s.VH),a=(0,u.ix)(o.s),l=(0,i.D)(t.NodeId)?null===a||void 0===a?void 0:a.get(t.NodeId):void 0,d=n.useMemo((()=>v(t,l,r)),[t,l,r]);return(0,h.jsx)(m._P,{title:"PDisk",info:d,size:"s"})}},25747:(e,t,r)=>{r.d(t,{WQ:()=>M});var n=r(34706),s=r(74640);const o=r(78759).h.injectEndpoints({endpoints:function(e){return{fetchTableChunk:e.query({queryFn:async(e,t)=>{let{offset:r,limit:n,sortParams:s,filters:o,columnsIds:a,fetchData:i}=e,{signal:l}=t;try{return{data:await i({limit:n,offset:r,filters:o,sortParams:s,columnsIds:a,signal:l})}}catch(d){return{error:d}}},providesTags:["All"]})}}});var a=r(25665),i=r(55842),l=r(15327),d=r(5194);const u="left",c=!0,m=-1,p=41;const h=(0,r(99294).cn)("ydb-paginated-table");var g=r(10161);const v=e=>{let{children:t,className:r,height:n,width:s,align:o=u,resizeable:a}=e;return(0,g.jsx)("td",{className:h("row-cell",{align:o},r),style:{height:`${n}px`,width:`${s}px`,maxWidth:a?`${s}px`:void 0},children:t})},S=e=>{let{index:t,columns:r,height:n}=e;return(0,g.jsx)("tr",{className:h("row",{loading:!0}),children:r.map((e=>{var r;const s=null!==(r=e.resizeable)&&void 0!==r?r:c;return(0,g.jsx)(v,{height:n,width:e.width,align:e.align,className:e.className,resizeable:s,children:(0,g.jsx)(d.O,{className:h("row-skeleton"),style:{width:"80%",height:"50%"}})},`${e.name}${t}`)}))})},f=e=>{let{row:t,index:r,columns:n,getRowClassName:s,height:o}=e;const a=null===s||void 0===s?void 0:s(t);return(0,g.jsx)("tr",{className:h("row",a),children:n.map((e=>{var n;const s=null!==(n=e.resizeable)&&void 0!==n?n:c;return(0,g.jsx)(v,{height:o,width:e.width,align:e.align,className:e.className,resizeable:s,children:e.render({row:t,index:r})},`${e.name}${r}`)}))})},x=e=>{let{columns:t,children:r}=e;return(0,g.jsx)("tr",{className:h("row",{empty:!0}),children:(0,g.jsx)("td",{colSpan:t.length,className:h("td"),children:r})})};var w=r(37711);const N=JSON.parse('{"empty":"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}'),b=(0,w.wZ)("ydb-paginated-table",{ru:N,en:{empty:"No data"}});const k=n.memo;const y=k((function(e){var t;let{id:r,chunkSize:s,calculatedCount:d,rowHeight:u,columns:c,fetchData:m,tableName:p,filters:h,sortParams:v,getRowClassName:w,renderErrorMessage:N,renderEmptyDataMessage:k,onDataFetched:y,isActive:D}=e;const[I,j]=n.useState(!0),[P]=(0,i.Rj)(),C={offset:r*s,limit:s,fetchData:m,filters:h,sortParams:v,columnsIds:c.map((e=>e.name)),tableName:p};o.useFetchTableChunkQuery(C,{skip:I||!D,pollingInterval:P});const{currentData:E,error:T}=o.endpoints.fetchTableChunk.useQueryState(C);n.useEffect((()=>{let e=0;return D&&I&&(e=window.setTimeout((()=>{j(!1)}),200)),()=>{window.clearTimeout(e)}}),[D,I]),n.useEffect((()=>{if(E&&D){const{total:e=0,found:t=0}=E;y(e,t)}}),[E,D,y]);const U=(null===E||void 0===E||null===(t=E.data)||void 0===t?void 0:t.length)||d;return(0,g.jsx)("tbody",{id:r.toString(),style:{height:U*u+"px",display:D?"table-row-group":"block"},children:(()=>{var e;if(!D)return null;if(!E){if(T){const e=T;return(0,g.jsx)(x,{columns:c,children:N?N(e):(0,g.jsx)(l.V,{error:e})})}return(0,a.c$)(U).map((e=>(0,g.jsx)(S,{columns:c,height:u,index:e},e)))}return null!==(e=E.data)&&void 0!==e&&e.length?E.data.map(((e,t)=>(0,g.jsx)(f,{index:t,row:e,columns:c,height:u,getRowClassName:w},t))):(0,g.jsx)(x,{columns:c,children:k?k():b("empty")})})()})}));function D(e){let{minWidth:t,maxWidth:r,getCurrentColumnWidth:s,onResize:o}=e;const a=n.useRef(null),[i,l]=n.useState(!1);return n.useEffect((()=>{const e=a.current;if(!e)return;let n,i,d;const u=function(e){let t,r=null;return function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];t=s,"number"!==typeof r&&(r=requestAnimationFrame((()=>{e(...t),r=null})))}}((e=>{if(I(e),"number"!==typeof n||"number"!==typeof i)return;const s=e.clientX-n,a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.max(t,Math.min(e,r))}(i+s,t,r);a!==d&&(d=a,null===o||void 0===o||o(d))})),c=e=>{I(e),void 0!==d&&(null===o||void 0===o||o(d)),l(!1),n=void 0,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)},m=e=>{i=s(),I(e),n=e.clientX,l(!0),document.addEventListener("mousemove",u),document.addEventListener("mouseup",c)};return e.addEventListener("mousedown",m),()=>{e.removeEventListener("mousedown",m),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)}}),[o,t,r,s]),(0,g.jsx)("span",{ref:a,className:h("resize-handler",{resizing:i}),onClick:e=>I(e)})}function I(e){e.preventDefault(),e.stopPropagation()}const j=e=>{let{order:t}=e;return(0,g.jsx)("svg",{className:h("sort-icon",{desc:-1===t}),viewBox:"0 0 10 6",width:"10",height:"6",children:(0,g.jsx)("path",{fill:"currentColor",d:"M0 5h10l-5 -5z"})})},P=e=>{let{sortOrder:t,sortable:r,defaultSortOrder:n}=e;return r?(0,g.jsx)("span",{className:h("sort-icon-container",{shadow:!t}),children:(0,g.jsx)(j,{order:t||n})}):null},C=e=>{var t;let{column:r,resizeable:s,sortOrder:o,defaultSortOrder:a,onSort:i,rowHeight:l,onCellMount:d,onCellUnMount:u,onColumnsResize:c}=e;const m=n.useRef(null);n.useEffect((()=>{const e=m.current;return e&&(null===d||void 0===d||d(e)),()=>{e&&(null===u||void 0===u||u(e))}}),[d,u]);const p=n.useCallback((()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect().width}),[]),v=n.useCallback((e=>{null===c||void 0===c||c(r.name,e)}),[c,r.name]),S=null!==(t=r.header)&&void 0!==t?t:r.name,f={height:`${l}px`,width:`${r.width}px`,minWidth:s?`${r.width}px`:void 0,maxWidth:s?`${r.width}px`:void 0};return(0,g.jsxs)("th",{ref:m,className:h("head-cell-wrapper"),style:f,children:[(0,g.jsxs)("div",{className:h("head-cell",{align:r.align,sortable:r.sortable},r.className),onClick:()=>{r.sortable&&(null===i||void 0===i||i(r.name))},children:[(0,g.jsx)("div",{className:h("head-cell-content"),children:S}),(0,g.jsx)(P,{sortOrder:o,sortable:r.sortable,defaultSortOrder:a})]}),s?(0,g.jsx)(D,{maxWidth:r.resizeMaxWidth,minWidth:r.resizeMinWidth,getCurrentColumnWidth:p,onResize:v}):null]})},E=e=>{let{columns:t,onSort:r,onColumnsResize:s,defaultSortOrder:o=m,rowHeight:a=p}=e;const[i,l]=n.useState({}),d=e=>{let t={};if(e===i.columnId){if(i.sortOrder&&i.sortOrder!==o)return l(t),void(null===r||void 0===r||r(t));t={sortOrder:1===i.sortOrder?-1:1,columnId:e}}else t={sortOrder:o,columnId:e};null===r||void 0===r||r(t),l(t)};return(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)("colgroup",{children:t.map((e=>(0,g.jsx)("col",{style:{width:`${e.width}px`}},e.name)))}),(0,g.jsx)("thead",{className:h("head"),children:(0,g.jsx)("tr",{children:t.map((e=>{var t;const r=i.columnId===e.name?i.sortOrder:void 0,n=s&&(null!==(t=e.resizeable)&&void 0!==t?t:c);return(0,g.jsx)(C,{column:e,resizeable:n,sortOrder:r,defaultSortOrder:o,onSort:d,rowHeight:a,onColumnsResize:s},e.name)}))})})]})};var T=r(76421);const U=1,G=e=>{let{limit:t,initialEntitiesCount:r,fetchData:o,filters:a,tableName:i,columns:l,getRowClassName:d,rowHeight:u=p,parentRef:c,initialSortParams:m,onColumnsResize:v,renderControls:S,renderErrorMessage:f,renderEmptyDataMessage:x,containerClassName:w}=e;const N=r||0,b=r||1,[k,D]=n.useState(m),[I,j]=n.useState(N),[P,C]=n.useState(b),[G,R]=n.useState(!0),M=n.useRef(null),L=(e=>{let{parentRef:t,tableRef:r,totalItems:s,rowHeight:o,chunkSize:a,overscanCount:i=U}=e;const l=n.useMemo((()=>Math.ceil(s/a)),[a,s]),[d,u]=n.useState(0),[c,m]=n.useState(Math.min(i,Math.max(l-1,0))),p=n.useCallback((()=>{const e=null===t||void 0===t?void 0:t.current,n=r.current;if(!e||!n)return null;const s=function(e,t){let r=e,n=0;for(;r&&r!==t;)n+=r.offsetTop,r=r.offsetParent;return n}(n,e),d=e.scrollTop,u=Math.max(d-s,0),c=u+e.clientHeight;return{start:Math.max(Math.floor(u/o/a)-i,0),end:Math.min(Math.floor(c/o/a)+i,Math.max(l-1,0))}}),[t,r,o,a,i,l]),h=n.useCallback((()=>{const e=p();e&&(u(e.start),m(e.end))}),[p]);return n.useEffect((()=>{const e=null===t||void 0===t?void 0:t.current;if(!e)return;const r=(0,T.throttle)(h,100,{leading:!0,trailing:!0});return e.addEventListener("scroll",r),()=>{e.removeEventListener("scroll",r),r.cancel()}}),[h,t]),n.useMemo((()=>{const e=Array(l).fill(!1);for(let t=d;t<=c;t++)e[t]=!0;return e}),[l,d,c])})({parentRef:c,tableRef:M,totalItems:P,rowHeight:u,chunkSize:t}),A=n.useMemo((()=>P?P%t||t:1),[P,t]),z=n.useCallback(((e,t)=>{j(e),C(t),R(!1)}),[]);n.useLayoutEffect((()=>{j(N),C(b),R(!0),null!==c&&void 0!==c&&c.current&&c.current.scrollTo(0,0)}),[a,b,N,c]);const V=()=>(0,g.jsxs)("table",{className:h("table"),children:[(0,g.jsx)(E,{columns:l,onSort:D,onColumnsResize:v}),L.map(((e,r)=>(0,g.jsx)(y,{id:r,calculatedCount:r===L.length-1?A:t,chunkSize:t,rowHeight:u,columns:l,fetchData:o,filters:a,tableName:i,sortParams:k,getRowClassName:d,renderErrorMessage:f,renderEmptyDataMessage:x,onDataFetched:z,isActive:e},r)))]});return(0,g.jsx)("div",{ref:M,className:h(null,w),children:S?(0,g.jsxs)(s.l,{children:[(0,g.jsx)(s.l.Controls,{children:S({inited:!G,totalEntities:I,foundEntities:P})}),(0,g.jsx)(s.l.Table,{children:V()})]}):V()})};var R=r(46154);function M(e){let{columnsWidthLSKey:t,columns:r,...n}=e;const[s,o]=(0,R.M)(t),a=function(e,t){return e.map((e=>{var r;return{...e,width:null!==(r=t[e.name])&&void 0!==r?r:e.width}}))}(r,s);return(0,g.jsx)(G,{columns:a,onColumnsResize:o,containerClassName:h("resizeable-table-container"),...n})}},31580:(e,t,r)=>{r.d(t,{m:()=>u});var n=r(99294),s=r(43926),o=r(13467),a=r(10161);const i=(0,n.cn)("ydb-pool-bar"),l=e=>{let{data:t={}}=e;const{Usage:r=0}=t,n=Math.min(100*r,100),l=(e=>e>=75?"danger":e>=50&&e<75?"warning":"normal")(n);return(0,a.jsx)(s.f,{className:i({type:l}),content:(0,a.jsx)(o.A8,{data:t,className:i("popup-content")}),children:(0,a.jsx)("div",{style:{height:`${n}%`},className:i("value",{type:l})})})},d=(0,n.cn)("ydb-pools-graph"),u=e=>{let{pools:t=[]}=e;return(0,a.jsx)("div",{className:d(),children:t.map(((e,t)=>(0,a.jsx)(l,{data:e},t)))})}},20760:(e,t,r)=>{r.d(t,{y:()=>m});var n=r(53216),s=r(99294),o=r(38980),a=r(95440),i=r(73689),l=r(10161);const d=(0,s.cn)("progress-viewer"),u=e=>(0,o.uf)((0,o.W0)(Number(e),2)),c=(e,t)=>[u(e),u(t)];function m(e){let{value:t,capacity:r,formatValues:s=c,percents:o,className:u,size:m="xs",colorizeProgress:p,inverseColorize:h,warningThreshold:g=60,dangerThreshold:v=80,hideCapacity:S}=e;const f=(0,n.F)();let x=Math.round(parseFloat(String(t))/parseFloat(String(r))*100)||0;x=x>100?100:x;let w=t,N=r,b="/";o?(w=x+"%",N="",b=""):s&&([w,N]=s(Number(t),Number(r)));const k=(0,a.S)({fillWidth:x,warningThreshold:g,dangerThreshold:v,colorizeProgress:p,inverseColorize:h});p&&!(0,i.kE)(r)&&(x=100);const y={width:x+"%"};return(0,i.kE)(t)?(0,l.jsxs)("div",{className:d({size:m,theme:f,status:k},u),children:[(0,l.jsx)("div",{className:d("line"),style:y}),(0,l.jsx)("span",{className:d("text"),children:(0,i.kE)(r)&&!S?`${w} ${b} ${N}`:w})]}):(0,l.jsx)("div",{className:`${d({size:m})} ${u} error`,children:"no data"})}},74116:(e,t,r)=>{r.d(t,{G:()=>d});var n=r(59769),s=r(71624),o=r(99294),a=r(46154),i=r(10161);const l=(0,o.cn)("ydb-resizeable-data-table");function d(e){let{columnsWidthLSKey:t,columns:r,settings:o,wrapperClassName:d,...u}=e;const[c,m]=(0,a.M)(t),p=(0,n.B)(r,c),h={...o,defaultResizeable:!0};return(0,i.jsx)("div",{className:l(null,d),children:(0,i.jsx)(s.ZP,{theme:"yandex-cloud",columns:p,onResize:m,settings:h,...u})})}},76485:(e,t,r)=>{r.d(t,{o:()=>l});var n=r(34706),s=r(86357),o=r(99294),a=r(10161);const i=(0,o.cn)("ydb-search"),l=e=>{let{onChange:t,value:r="",width:o,className:l,debounce:d=200,placeholder:u}=e;const[c,m]=n.useState(r),p=n.useRef();n.useEffect((()=>{m((e=>e!==r?r:e))}),[r]);return(0,a.jsx)(s.o,{hasClear:!0,autoFocus:!0,style:{width:o},className:i(null,l),placeholder:u,value:c,onUpdate:e=>{m(e),window.clearTimeout(p.current),p.current=window.setTimeout((()=>{null===t||void 0===t||t(e)}),d)}})}},73287:(e,t,r)=>{r.d(t,{J:()=>m});var n=r(29254),s=r(96334),o=r(15268),a=r(14561),i=r(77468),l=r(99294),d=r(10161);const u=(0,l.cn)("ydb-status-icon"),c={[i.K.Blue]:n.Z,[i.K.Yellow]:s.Z,[i.K.Orange]:o.Z,[i.K.Red]:s.Z};function m(e){let{status:t=i.K.Grey,size:r="s",mode:n="color",className:s}=e;const o={state:t.toLowerCase(),size:r};return"icons"===n&&t in c?(0,d.jsx)(a.J,{className:u("status-icon",o,s),data:c[t]}):(0,d.jsx)("div",{className:u("status-color",o,s)})}},22877:(e,t,r)=>{r.d(t,{h:()=>l});var n=r(5194),s=r(99294),o=r(83658),a=r(10161);const i=(0,s.cn)("table-skeleton"),l=e=>{let{rows:t=2,delay:r=600,className:s}=e;const[l]=(0,o.$)(r);return(0,a.jsxs)("div",{className:i("wrapper",{hidden:!l},s),children:[(0,a.jsxs)("div",{className:i("row"),children:[(0,a.jsx)(n.O,{className:i("col-1")}),(0,a.jsx)(n.O,{className:i("col-2")}),(0,a.jsx)(n.O,{className:i("col-3")}),(0,a.jsx)(n.O,{className:i("col-4")}),(0,a.jsx)(n.O,{className:i("col-5")})]}),[...new Array(t)].map(((e,t)=>(0,a.jsx)("div",{className:i("row"),children:(0,a.jsx)(n.O,{className:i("col-full")})},`skeleton-row-${t}`)))]})}},74640:(e,t,r)=>{r.d(t,{l:()=>i});var n=r(99294),s=r(22877),o=r(10161);const a=(0,n.cn)("ydb-table-with-controls-layout"),i=e=>{let{children:t,className:r}=e;return(0,o.jsx)("div",{className:a(null,r),children:t})};i.Controls=function(e){let{children:t,className:r}=e;return(0,o.jsx)("div",{className:a("controls-wrapper"),children:(0,o.jsx)("div",{className:a("controls",r),children:t})})},i.Table=function(e){let{children:t,loading:r,className:n}=e;return r?(0,o.jsx)(s.h,{className:a("loader")}):(0,o.jsx)("div",{className:a("table",n),children:t})}},56065:(e,t,r)=>{r.d(t,{X:()=>a});var n=r(67661),s=r(96183),o=r(10161);const a=e=>{let{value:t,onChange:r,className:a}=e;return(0,o.jsxs)(n.E,{value:t,onUpdate:r,className:a,children:[(0,o.jsx)(n.E.Option,{value:s.Uu.All,children:s.qU[s.Uu.All]}),(0,o.jsx)(n.E.Option,{value:s.Uu.SmallUptime,children:s.qU[s.Uu.SmallUptime]})]})}},46931:(e,t,r)=>{r.d(t,{a:()=>i});var n=r(2634),s=r(99294),o=r(10161);const a=(0,s.cn)("ydb-usage-label");function i(e){let{value:t,overloadThreshold:r=90,theme:s,...i}=e;return(0,o.jsxs)(n._,{theme:s,className:a({overload:Number(t)>=r}),...i,children:[t||0,"%"]})}},4893:(e,t,r)=>{r.d(t,{T:()=>C});var n=r(99294),s=r(90457),o=r(91890),a=r(67653),i=r(34706),l=r(2634),d=r(65e3),u=r(4969),c=r(77468),m=r(25665),p=r(27810),h=r(70340),g=r(53458),v=r(55842),S=r(73689),f=r(41591),x=r(90808),w=r(66970),N=r(75544),b=r(46878),k=r(38980);function y(e){let t;const r=(0,g.Iz)(e)?e.VDiskSlotId:e.VSlotId;return(0,m.D)(r)&&(0,m.D)(e.PDiskId)&&(0,m.D)(e.NodeId)?t=(0,b.By)(r,e.PDiskId,e.NodeId):(0,m.D)(e.NodeId)&&(0,g.Iz)(e)&&(t=(0,b.ax)(b.ZP.node,{id:e.NodeId,activeTab:N.pV},{pdiskId:e.PDiskId,vdiskId:(0,k.a2)(e.VDiskId)})),t}var D=r(10161);const I=(0,n.cn)("vdisk-storage-popup"),j=e=>{let{data:t}=e;const r=(0,g.Iz)(t),n=(0,v.ix)(d.VH),s=i.useMemo((()=>r?((e,t)=>{var r,n,s,o;const{NodeId:a,PDiskId:i,VDiskSlotId:l,StringifiedId:d,VDiskState:u,SatisfactionRank:p,DiskSpace:g,FrontQueues:v,Replicated:f,UnsyncedVDisks:w,AllocatedSize:N,ReadThroughput:b,WriteThroughput:k,StoragePoolName:y}=e,I=[{label:"VDisk",value:d},{label:"State",value:null!==u&&void 0!==u?u:"not available"}];var j,P;if(y&&I.push({label:"StoragePool",value:y}),p&&(null===(r=p.FreshRank)||void 0===r?void 0:r.Flag)!==c.K.Green&&I.push({label:"Fresh",value:null===(j=p.FreshRank)||void 0===j?void 0:j.Flag}),p&&(null===(n=p.LevelRank)||void 0===n?void 0:n.Flag)!==c.K.Green&&I.push({label:"Level",value:null===(P=p.LevelRank)||void 0===P?void 0:P.Flag}),p&&null!==(s=p.FreshRank)&&void 0!==s&&s.RankPercent&&I.push({label:"Fresh",value:p.FreshRank.RankPercent}),p&&null!==(o=p.LevelRank)&&void 0!==o&&o.RankPercent&&I.push({label:"Level",value:p.LevelRank.RankPercent}),g&&g!==c.K.Green&&I.push({label:"Space",value:g}),v&&v!==c.K.Green&&I.push({label:"FrontQueues",value:v}),f||I.push({label:"Replicated",value:"NO"}),w&&I.push({label:"UnsyncVDisks",value:w}),Number(N)&&I.push({label:"Allocated",value:(0,S.Uz)(N)}),Number(b)&&I.push({label:"Read",value:(0,S.Qt)(b)}),Number(k)&&I.push({label:"Write",value:(0,S.Qt)(k)}),t&&(0,m.D)(a)&&(0,m.D)(i)&&(0,m.D)(l)){const e=(0,h.yf)({nodeId:a,pDiskId:i,vDiskSlotId:l});I.push({label:"Links",value:(0,D.jsx)(x.j,{title:"Developer UI",url:e})})}return I})(t,n):((e,t)=>{const{NodeId:r,PDiskId:n,VSlotId:s,StoragePoolName:o}=e,a=[{label:"State",value:"not available"}];if(o&&a.push({label:"StoragePool",value:o}),a.push({label:"NodeId",value:null!==r&&void 0!==r?r:p.jX},{label:"PDiskId",value:null!==n&&void 0!==n?n:p.jX},{label:"VSlotId",value:null!==s&&void 0!==s?s:p.jX}),t&&(0,m.D)(r)&&(0,m.D)(n)&&(0,m.D)(s)){const e=(0,h.yf)({nodeId:r,pDiskId:n,vDiskSlotId:s});a.push({label:"Links",value:(0,D.jsx)(x.j,{title:"Developer UI",url:e})})}return a})(t,n)),[t,r,n]),o=(0,v.ix)(u.s),N=(0,m.D)(t.NodeId)?null===o||void 0===o?void 0:o.get(t.NodeId):void 0,b=i.useMemo((()=>r&&t.PDisk&&(0,w.b)(t.PDisk,N,n)),[t,N,r,n]),k=[];if("Donors"in t&&t.Donors){const e=t.Donors;for(const t of e)k.push({label:"VDisk",value:(0,D.jsx)(a.h,{to:y(t),children:t.StringifiedId})})}return(0,D.jsxs)("div",{className:I(),children:[t.DonorMode&&(0,D.jsx)(l._,{className:I("donor-label"),children:"Donor"}),(0,D.jsx)(f._P,{title:"VDisk",info:s,size:"s"}),b&&(0,D.jsx)(f._P,{title:"PDisk",info:b,size:"s"}),k.length>0&&(0,D.jsx)(f._P,{title:"Donors",info:k,size:"s"})]})},P=(0,n.cn)("ydb-vdisk-component"),C=e=>{let{data:t={},compact:r,inactive:n,showPopup:i,onShowPopup:l,onHidePopup:d,progressBarClassName:u}=e;const c=y(t);return(0,D.jsx)(o.I,{showPopup:i,onShowPopup:l,onHidePopup:d,popupContent:(0,D.jsx)(j,{data:t}),children:(0,D.jsx)("div",{className:P(),children:(0,D.jsx)(a.h,{to:c,className:P("content"),children:(0,D.jsx)(s.p,{diskAllocatedPercent:t.AllocatedPercent,severity:t.Severity,compact:r,inactive:n,className:u})})})})}},2387:(e,t,r)=>{r.d(t,{O5:()=>ne,O8:()=>q,eb:()=>H,EF:()=>z,cB:()=>$,Up:()=>L,gs:()=>B,OJ:()=>K,rh:()=>_,Fi:()=>J,qQ:()=>Y,A6:()=>M,iJ:()=>A,_5:()=>re,o9:()=>W,n2:()=>F,KO:()=>V,oY:()=>te,ek:()=>ee,As:()=>Q,TX:()=>X,VQ:()=>O,Zi:()=>Z});var n=r(71624),s=r(83797),o=r(16124),a=r(25665),i=r(99294),l=r(27810),d=r(38980),u=r(61734),c=r(73689),m=r(61168),p=r(92146),h=r(2194),g=r(75544),v=r(70340),S=r(96183),f=r(62508),x=r(13467),w=r(10161);const N=e=>{let{node:t,getNodeRef:r,database:n,statusForIcon:s}=e;if(!t.Host)return(0,w.jsx)("span",{children:"\u2014"});const o="ConnectStatus"===s?t.ConnectStatus:t.SystemState,a=!(0,S.TA)(t);let i;if(r){const e=r(t);i=e?(0,v.i1)(e):void 0}else if(t.NodeId){const e=(0,v.wq)(t.NodeId);i=(0,v.i1)(e)}const l=a?(0,g.a3)(t.NodeId,{database:null!==n&&void 0!==n?n:t.TenantName}):void 0;return(0,w.jsx)(m.l,{disabled:!a,content:(0,w.jsx)(x.bP,{data:t,nodeHref:i}),placement:["top","bottom"],behavior:h.x.Immediate,delayClosing:200,children:(0,w.jsx)(f.A,{name:t.Host,status:o,path:l,hasClipboardButton:!0})})};var b=r(31580),k=r(20760),y=r(26836),D=r(55973);const I=(0,i.cn)("tablets-statistic"),j=e=>{let{tablets:t=[],database:r,nodeId:n}=e;const s=(e=>e.map((e=>({label:(0,l.qV)(e.Type),type:e.Type,count:e.Count,state:(0,D.FW)(e.State)}))).sort(((e,t)=>String(e.label).localeCompare(String(t.label)))))(t);return(0,w.jsx)("div",{className:I(),children:s.map(((e,t)=>{var s;const o=(0,g.a3)(n,{database:r},g.IA),a=`${e.label}: ${e.count}`,i=I("tablet",{state:null===(s=e.state)||void 0===s?void 0:s.toLowerCase()});return(0,w.jsx)(y.rU,{to:o,className:i,children:a},t)}))})};var P=r(46931),C=r(60918),E=r(5628),T=r(83627);function U(e){return(0,T.zm)((0,T.BO)(e,1))}function G(e){const t=(0,T.BO)(e,1);return(Number(t)<=0?"":"+")+(0,T.zm)(t)}const R=(0,i.cn)("ydb-nodes-columns");function M(){return{name:C.xv.NodeId,header:"#",width:80,render:e=>{let{row:t}=e;return t.NodeId},align:n.ZP.RIGHT}}function L(e){let{getNodeRef:t,database:r}=e,{statusForIcon:s="SystemState"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{name:C.xv.Host,header:C.Pr.Host,render:e=>{let{row:n}=e;return(0,w.jsx)(N,{node:n,getNodeRef:t,database:r,statusForIcon:s})},width:350,align:n.ZP.LEFT}}function A(){return{name:C.xv.NodeName,header:C.Pr.NodeName,align:n.ZP.LEFT,render:e=>{let{row:t}=e;return t.NodeName||l.jX},width:200}}function z(){return{name:C.xv.DC,header:C.Pr.DC,align:n.ZP.LEFT,render:e=>{let{row:t}=e;return t.DC||l.jX},width:60}}function V(){return{name:C.xv.Rack,header:C.Pr.Rack,align:n.ZP.LEFT,render:e=>{let{row:t}=e;return t.Rack||l.jX},width:100}}function Z(){return{name:C.xv.Version,header:C.Pr.Version,width:200,align:n.ZP.LEFT,render:e=>{let{row:t}=e;return(0,w.jsx)(m.l,{content:t.Version,children:t.Version})}}}function O(){return{name:C.xv.Uptime,header:C.Pr.Uptime,sortAccessor:e=>{let{StartTime:t}=e;return t?-t:0},render:e=>{let{row:t}=e;return t.Uptime},align:n.ZP.RIGHT,width:110}}function F(){return{name:C.xv.RAM,header:C.Pr.RAM,sortAccessor:e=>{let{MemoryUsed:t=0}=e;return Number(t)},defaultOrder:n.ZP.DESCENDING,render:e=>{let{row:t}=e;const[r,n]=(0,c.kE)(t.MemoryUsed)&&(0,c.kE)(t.MemoryLimit)?(0,d.QO)(Number(t.MemoryUsed),Number(t.MemoryLimit),"gb",void 0,!0):[0,0];return(0,w.jsx)(m.l,{placement:["top","auto"],fullWidth:!0,content:(0,w.jsxs)(s.w,{responsive:!0,children:[(0,w.jsx)(s.w.Item,{name:(0,E.Z)("field_memory-used"),children:r}),(0,w.jsx)(s.w.Item,{name:(0,E.Z)("field_memory-limit"),children:n})]}),children:(0,w.jsx)(k.y,{value:t.MemoryUsed,capacity:t.MemoryLimit,formatValues:(e,t)=>(0,d.QO)(e,t,"gb",void 0,!0),className:R("column-ram"),colorizeProgress:!0,hideCapacity:!0})})},align:n.ZP.LEFT,width:80,resizeMinWidth:40}}function _(){return{name:C.xv.Memory,header:C.Pr.Memory,defaultOrder:n.ZP.DESCENDING,render:e=>{let{row:t}=e;return t.MemoryStats?(0,w.jsx)(p.O,{formatValues:d.q3,stats:t.MemoryStats}):(0,w.jsx)(k.y,{value:t.MemoryUsed,capacity:t.MemoryLimit,formatValues:d.q3,colorizeProgress:!0})},align:n.ZP.LEFT,width:300,resizeMinWidth:170}}function W(){return{name:C.xv.Pools,header:C.Pr.Pools,sortAccessor:e=>{let{PoolStats:t=[]}=e;return Math.max(...t.map((e=>{let{Usage:t}=e;return Number(t)})))},defaultOrder:n.ZP.DESCENDING,render:e=>{let{row:t}=e;return t.PoolStats?(0,w.jsx)(b.m,{pools:t.PoolStats}):l.jX},align:n.ZP.LEFT,width:80,resizeMinWidth:60}}function H(){return{name:C.xv.CPU,header:C.Pr.CPU,sortAccessor:e=>{let{PoolStats:t=[]}=e;return Math.max(...t.map((e=>{let{Usage:t}=e;return Number(t)})))},defaultOrder:n.ZP.DESCENDING,render:e=>{let{row:t}=e;if(!t.PoolStats)return l.jX;let r=(0,c.kE)(t.CoresUsed)&&(0,c.kE)(t.CoresTotal)?t.CoresUsed/t.CoresTotal:void 0;if(void 0===r){let e=0;r=t.PoolStats.reduce(((t,r)=>(e+=Number(r.Threads),t+Number(r.Usage)*Number(r.Threads))),0),r/=e}return(0,w.jsx)(m.l,{placement:["top","auto"],fullWidth:!0,content:(0,w.jsx)(s.w,{responsive:!0,children:t.PoolStats.map((e=>(0,c.kE)(e.Usage)?(0,w.jsx)(s.w.Item,{name:e.Name,children:(0,x.gK)("Usage",e.Usage).value},e.Name):null))}),children:(0,w.jsx)(k.y,{className:R("column-cpu"),value:r,capacity:1,colorizeProgress:!0,percents:!0})})},align:n.ZP.LEFT,width:80,resizeMinWidth:40}}function B(){return{name:C.xv.LoadAverage,header:C.Pr.LoadAverage,sortAccessor:e=>{let{LoadAveragePercents:t=[]}=e;return t[0]},defaultOrder:n.ZP.DESCENDING,render:e=>{let{row:t}=e;return(0,w.jsx)(k.y,{value:t.LoadAveragePercents&&t.LoadAveragePercents.length>0?t.LoadAveragePercents[0]:void 0,percents:!0,colorizeProgress:!0,capacity:100})},align:n.ZP.LEFT,width:170,resizeMinWidth:170}}function K(){return{name:C.xv.Load,header:C.Pr.Load,sortAccessor:e=>{let{LoadAveragePercents:t=[]}=e;return t[0]},defaultOrder:n.ZP.DESCENDING,render:e=>{let{row:t}=e;return t.LoadAveragePercents&&t.LoadAveragePercents.length>0?(0,w.jsx)(P.a,{value:t.LoadAveragePercents[0].toFixed(),theme:(0,o.w)(t.LoadAveragePercents[0])}):l.jX},align:n.ZP.LEFT,width:80,resizeMinWidth:70}}function $(){return{name:C.xv.DiskSpaceUsage,header:C.Pr.DiskSpaceUsage,render:e=>{let{row:t}=e;return(0,a.D)(t.DiskSpaceUsage)?(0,w.jsx)(P.a,{value:Math.floor(t.DiskSpaceUsage),theme:(0,u.H)(t.DiskSpaceUsage)}):l.jX},align:n.ZP.LEFT,width:115,resizeMinWidth:75}}function Q(){return{name:C.xv.TotalSessions,header:C.Pr.TotalSessions,render:e=>{var t;let{row:r}=e;return null!==(t=r.TotalSessions)&&void 0!==t?t:l.jX},align:n.ZP.RIGHT,width:100}}function X(e){let{database:t}=e;return{name:C.xv.Tablets,header:C.Pr.Tablets,width:500,resizeMinWidth:500,render:e=>{let{row:r}=e;return r.Tablets?(0,w.jsx)(j,{database:null!==t&&void 0!==t?t:r.TenantName,nodeId:r.NodeId,tablets:r.Tablets}):l.jX},align:n.ZP.LEFT,sortable:!1}}function J(){return{name:C.xv.Missing,header:C.Pr.Missing,render:e=>{let{row:t}=e;return t.Missing},align:n.ZP.CENTER,defaultOrder:n.ZP.DESCENDING}}function q(){return{name:C.xv.Connections,header:C.Pr.Connections,render:e=>{let{row:t}=e;return(0,c.kE)(t.Connections)?t.Connections:l.jX},align:n.ZP.RIGHT,width:130}}function Y(){return{name:C.xv.NetworkUtilization,header:C.Pr.NetworkUtilization,render:e=>{let{row:t}=e;const{NetworkUtilization:r,NetworkUtilizationMin:n=0,NetworkUtilizationMax:o=0}=t;return(0,c.kE)(r)?(0,w.jsx)(m.l,{placement:["top","auto"],fullWidth:!0,content:(0,w.jsxs)(s.w,{responsive:!0,children:[(0,w.jsx)(s.w.Item,{name:(0,E.Z)("sum"),children:(0,d.T3)(r)},"NetworkUtilization"),(0,w.jsx)(s.w.Item,{name:(0,E.Z)("min"),children:(0,d.T3)(n)},"NetworkUtilizationMin"),(0,w.jsx)(s.w.Item,{name:(0,E.Z)("max"),children:(0,d.T3)(o)},"NetworkUtilizationMax")]}),children:(0,d.T3)(r)}):l.jX},align:n.ZP.RIGHT,width:110}}function ee(){return{name:C.xv.SendThroughput,header:C.Pr.SendThroughput,render:e=>{let{row:t}=e;return(0,c.kE)(t.SendThroughput)?(0,c.Qt)(t.SendThroughput):l.jX},align:n.ZP.RIGHT,width:110}}function te(){return{name:C.xv.ReceiveThroughput,header:C.Pr.ReceiveThroughput,render:e=>{let{row:t}=e;return(0,c.kE)(t.ReceiveThroughput)?(0,c.Qt)(t.ReceiveThroughput):l.jX},align:n.ZP.RIGHT,width:110}}function re(){return{name:C.xv.PingTime,header:C.Pr.PingTime,render:e=>{let{row:t}=e;const{PingTimeUs:r,PingTimeMinUs:n=0,PingTimeMaxUs:o=0}=t;return(0,c.kE)(r)?(0,w.jsx)(m.l,{placement:["top","auto"],fullWidth:!0,content:(0,w.jsxs)(s.w,{responsive:!0,children:[(0,w.jsx)(s.w.Item,{name:(0,E.Z)("avg"),children:U(r)},"PingTimeUs"),(0,w.jsx)(s.w.Item,{name:(0,E.Z)("min"),children:U(n)},"PingTimeMinUs"),(0,w.jsx)(s.w.Item,{name:(0,E.Z)("max"),children:U(o)},"PingTimeMaxUs")]}),children:U(r)}):l.jX},align:n.ZP.RIGHT,width:110}}function ne(){return{name:C.xv.ClockSkew,header:C.Pr.ClockSkew,render:e=>{let{row:t}=e;const{ClockSkewUs:r,ClockSkewMinUs:n=0,ClockSkewMaxUs:o=0}=t;return(0,c.kE)(r)?(0,w.jsx)(m.l,{placement:["top","auto"],fullWidth:!0,content:(0,w.jsxs)(s.w,{responsive:!0,children:[(0,w.jsx)(s.w.Item,{name:(0,E.Z)("avg"),children:G(r)},"ClockSkewUs"),(0,w.jsx)(s.w.Item,{name:(0,E.Z)("min"),children:G(n)},"ClockSkewMinUs"),(0,w.jsx)(s.w.Item,{name:(0,E.Z)("max"),children:G(o)},"ClockSkewMaxUs")]}),children:G(r)}):l.jX},align:n.ZP.RIGHT,width:110}}},60918:(e,t,r)=>{r.d(t,{Gd:()=>c,Ke:()=>m,Pr:()=>a,WN:()=>d,t5:()=>s,ws:()=>l,xv:()=>o});var n=r(5628);const s="nodesTableColumnsWidth",o={NodeId:"NodeId",Host:"Host",Database:"Database",NodeName:"NodeName",DC:"DC",Rack:"Rack",Version:"Version",Uptime:"Uptime",Memory:"Memory",RAM:"RAM",CPU:"CPU",Pools:"Pools",LoadAverage:"LoadAverage",Load:"Load",DiskSpaceUsage:"DiskSpaceUsage",TotalSessions:"TotalSessions",Connections:"Connections",NetworkUtilization:"NetworkUtilization",SendThroughput:"SendThroughput",ReceiveThroughput:"ReceiveThroughput",PingTime:"PingTime",ClockSkew:"ClockSkew",Missing:"Missing",Tablets:"Tablets",PDisks:"PDisks"},a={get NodeId(){return(0,n.Z)("node-id")},get Host(){return(0,n.Z)("host")},get Database(){return(0,n.Z)("database")},get NodeName(){return(0,n.Z)("node-name")},get DC(){return(0,n.Z)("dc")},get Rack(){return(0,n.Z)("rack")},get Version(){return(0,n.Z)("version")},get Uptime(){return(0,n.Z)("uptime")},get Memory(){return(0,n.Z)("memory")},get RAM(){return(0,n.Z)("ram")},get Pools(){return(0,n.Z)("pools")},get CPU(){return(0,n.Z)("cpu")},get LoadAverage(){return(0,n.Z)("load-average")},get Load(){return(0,n.Z)("load")},get DiskSpaceUsage(){return(0,n.Z)("disk-usage")},get TotalSessions(){return(0,n.Z)("sessions")},get Connections(){return(0,n.Z)("connections")},get NetworkUtilization(){return(0,n.Z)("utilization")},get SendThroughput(){return(0,n.Z)("send")},get ReceiveThroughput(){return(0,n.Z)("receive")},get PingTime(){return(0,n.Z)("ping")},get ClockSkew(){return(0,n.Z)("skew")},get Missing(){return(0,n.Z)("missing")},get Tablets(){return(0,n.Z)("tablets")},get PDisks(){return(0,n.Z)("pdisks")}},i={get NodeId(){return(0,n.Z)("node-id")},get Host(){return(0,n.Z)("host")},get NodeName(){return(0,n.Z)("node-name")},get Database(){return(0,n.Z)("database")},get DiskSpaceUsage(){return(0,n.Z)("disk-usage")},get DC(){return(0,n.Z)("dc")},get Rack(){return(0,n.Z)("rack")},get Missing(){return(0,n.Z)("missing")},get Uptime(){return(0,n.Z)("uptime")},get Version(){return(0,n.Z)("version")},get SystemState(){return(0,n.Z)("system-state")},get ConnectStatus(){return(0,n.Z)("connect-status")},get NetworkUtilization(){return(0,n.Z)("network-utilization")},get ClockSkew(){return(0,n.Z)("clock-skew")},get PingTime(){return(0,n.Z)("ping-time")}};function l(e){return i[e]}const d={NodeId:["NodeId"],Host:["Host","Rack","Database","SystemState"],Database:["Database"],NodeName:["NodeName"],DC:["DC"],Rack:["Rack"],Version:["Version"],Uptime:["Uptime"],Memory:["Memory","MemoryDetailed"],RAM:["Memory"],Pools:["CPU"],CPU:["CPU"],LoadAverage:["LoadAverage"],Load:["LoadAverage"],DiskSpaceUsage:["DiskSpaceUsage"],TotalSessions:["SystemState"],Connections:["Connections"],NetworkUtilization:["NetworkUtilization"],SendThroughput:["SendThroughput"],ReceiveThroughput:["ReceiveThroughput"],PingTime:["PingTime"],ClockSkew:["ClockSkew"],Missing:["Missing"],Tablets:["Tablets","Database"],PDisks:["PDisks"]},u={NodeId:"NodeId",Host:"Host",Database:"Database",NodeName:"NodeName",DC:"DC",Rack:"Rack",Version:"Version",Uptime:"Uptime",Memory:"Memory",RAM:"Memory",CPU:"CPU",Pools:"CPU",LoadAverage:"LoadAverage",Load:"LoadAverage",DiskSpaceUsage:"DiskSpaceUsage",TotalSessions:void 0,Connections:"Connections",NetworkUtilization:"NetworkUtilization",SendThroughput:"SendThroughput",ReceiveThroughput:"ReceiveThroughput",PingTime:"PingTime",ClockSkew:"ClockSkew",Missing:"Missing",Tablets:void 0,PDisks:void 0};function c(e){return u[e]}function m(e){return Boolean(c(e))}},5628:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(37711);const s=JSON.parse('{"node-id":"Node ID","host":"Host","database":"Database","node-name":"Node Name","dc":"DC","rack":"Rack","version":"Version","uptime":"Uptime","memory":"Detailed Memory","ram":"RAM","cpu":"CPU","pools":"Pools","disk-usage":"Disk Usage","tablets":"Tablets","load-average":"Load Average","load":"Load","sessions":"Sessions","missing":"Missing","pdisks":"PDisks","field_memory-used":"Memory used","field_memory-limit":"Memory limit","system-state":"System State","connect-status":"Connect Status","utilization":"Utilization","network-utilization":"Network Utilization","connections":"Connections","clock-skew":"Clock Skew","skew":"Skew","ping-time":"Ping Time","ping":"Ping","send":"Send","receive":"Receive","max":"Max","min":"Min","avg":"Avg","sum":"Sum"}'),o=(0,n.wZ)("ydb-nodes-columns",{en:s})},98530:(e,t,r)=>{r.d(t,{l:()=>g});var n=r(34706),s=r(90457),o=r(91890),a=r(67653),i=r(66970),l=r(4893),d=r(46878),u=r(25665),c=r(99294),m=r(14418),p=r(10161);const h=(0,c.cn)("pdisk-storage"),g=e=>{let{data:t={},vDisks:r,showPopup:c,onShowPopup:g,onHidePopup:v,className:S,progressBarClassName:f,viewContext:x}=e;const{NodeId:w,PDiskId:N}=t,b=(0,u.D)(w)&&(0,u.D)(N),k=n.useRef(null);let y;return b&&(y=(0,d.ds)(N,w)),(0,p.jsxs)("div",{className:h(null,S),ref:k,children:[null!==r&&void 0!==r&&r.length?(0,p.jsx)("div",{className:h("vdisks"),children:r.map((e=>(0,p.jsx)("div",{className:h("vdisks-item"),style:{flexGrow:Number(e.AllocatedSize)||1},children:(0,p.jsx)(l.T,{data:e,inactive:!(0,m.XW)(e,x),compact:!0})},e.StringifiedId)))}):null,(0,p.jsx)(o.I,{showPopup:c,anchorRef:k,onShowPopup:g,onHidePopup:v,popupContent:(0,p.jsx)(i.J,{data:t}),children:(0,p.jsxs)(a.h,{to:y,className:h("content"),children:[(0,p.jsx)(s.p,{diskAllocatedPercent:t.AllocatedPercent,severity:t.Severity,className:f}),(0,p.jsx)("div",{className:h("media-type"),children:t.Type})]})})]})}},96635:(e,t,r)=>{r.d(t,{V:()=>ne,m:()=>re});var n=r(34706),s=r(51553),o=r(71624),a=r(2194),i=r(2634),l=r(16318),d=r(14561),u=r(61168),c=r(67653),m=r(73287),p=r(46931),h=r(38980),g=r(53458),v=r(99294),S=r(10161);const f=(0,v.cn)("stack"),x=e=>{let{children:t,className:r}=e;return(0,S.jsx)("div",{className:f(null,r),children:n.Children.map(t,((e,t)=>n.isValidElement(e)?(0,S.jsx)("div",{className:f("layer"),style:{"--ydb-stack-level":t},children:e}):null))})};var w=r(4893);function N(e){let{data:t,className:r,stackClassName:n,...s}=e;const{Donors:o,...a}=t||{},i=o&&o.length>0?(0,S.jsxs)(x,{className:n,children:[(0,S.jsx)(w.T,{data:a,...s}),o.map((e=>{const t=(0,g.Iz)(e);return(0,S.jsx)(w.T,{data:e,...s},(0,h.a2)(t?e.VDiskId:e))}))]}):(0,S.jsx)(w.T,{data:t,...s});return(0,S.jsx)("div",{className:r,children:i})}var b=r(46878),k=r(25665),y=r(27810),D=r(61734),I=r(83627),j=r(73689),P=r(75246),C=r(79777),E=r(98530),T=r(14418);const U=(0,v.cn)("ydb-storage-disks"),G=300;function R(e){let{vDisks:t=[],viewContext:r}=e;const[s,o]=n.useState(),{theme:{spaceBaseSize:a}}=(0,P.l)();if(!t.length)return null;const i=(G-a*(t.length-1))/t.length;return(0,S.jsxs)("div",{className:U(null),children:[(0,S.jsx)(C.k,{direction:"row",gap:1,grow:!0,style:{width:G},children:null===t||void 0===t?void 0:t.map((e=>(0,S.jsx)(M,{vDisk:e,inactive:!(0,T.XW)(e,r),highlightedVDisk:s,setHighlightedVDisk:o,unavailableVDiskWidth:i},e.StringifiedId)))}),(0,S.jsx)("div",{className:U("pdisks-wrapper"),children:null===t||void 0===t?void 0:t.map((e=>{var t;return(0,S.jsx)(L,{vDisk:e,highlightedVDisk:s,setHighlightedVDisk:o},null===e||void 0===e||null===(t=e.PDisk)||void 0===t?void 0:t.StringifiedId)}))})]})}function M(e){let{vDisk:t,highlightedVDisk:r,inactive:n,setHighlightedVDisk:s,unavailableVDiskWidth:o}=e;const a={...t,PDisk:void 0},i=t.StringifiedId,l=(0,k.D)(a.AllocatedSize)?void 0:o,d=Number(a.AllocatedSize)||1;return(0,S.jsx)("div",{style:{flexGrow:d,minWidth:l},className:U("vdisk-item"),children:(0,S.jsx)(w.T,{data:a,compact:!0,inactive:n,showPopup:r===i,onShowPopup:()=>s(i),onHidePopup:()=>s(void 0),progressBarClassName:U("vdisk-progress-bar")})})}function L(e){let{vDisk:t,highlightedVDisk:r,setHighlightedVDisk:n}=e;const s=t.StringifiedId;return t.PDisk?(0,S.jsx)(E.l,{className:U("pdisk-item"),progressBarClassName:U("pdisk-progress-bar"),data:t.PDisk,showPopup:r===s,onShowPopup:()=>n(s),onHidePopup:()=>n(void 0)}):null}var A=r(50791),z=r(78090);const V=(0,v.cn)("ydb-storage-groups-columns"),Z={name:z.tn.PoolName,header:z.G0.PoolName,width:250,render:e=>{let{row:t}=e;return t.PoolName?(0,S.jsx)(u.l,{content:t.PoolName,placement:["right"],behavior:a.x.Immediate,className:V("pool-name-wrapper"),children:(0,S.jsx)("span",{className:V("pool-name"),children:t.PoolName})}):y.jX},align:o.ZP.LEFT},O={name:z.tn.MediaType,header:z.G0.MediaType,width:100,resizeMinWidth:100,align:o.ZP.LEFT,render:e=>{let{row:t}=e;return(0,S.jsxs)(n.Fragment,{children:[(0,S.jsx)(i._,{children:t.MediaType||"\u2014"}),"\xa0",t.Encryption&&(0,S.jsx)(l.J,{content:(0,A.Z)("encrypted"),placement:"right",behavior:a.x.Immediate,children:(0,S.jsx)(i._,{children:(0,S.jsx)(d.J,{data:s.Z,size:18})})})]})},sortable:!1},F={name:z.tn.Erasure,header:z.G0.Erasure,width:100,sortAccessor:e=>e.ErasureSpecies,render:e=>{let{row:t}=e;return t.ErasureSpecies?t.ErasureSpecies:"-"},align:o.ZP.LEFT},_={name:z.tn.Degraded,header:z.G0.Degraded,width:110,resizeMinWidth:110,render:e=>{let{row:t}=e;return t.Degraded?(0,S.jsxs)(i._,{theme:(0,T._O)(t),children:["Degraded: ",t.Degraded]}):"-"},align:o.ZP.LEFT,defaultOrder:o.ZP.DESCENDING},W={name:z.tn.Usage,header:z.G0.Usage,width:85,resizeMinWidth:75,render:e=>{let{row:t}=e;return(0,k.D)(t.Usage)?(0,S.jsx)(p.a,{value:Math.floor(t.Usage),theme:(0,D.H)(t.Usage)}):y.jX},align:o.ZP.LEFT},H={name:z.tn.DiskSpaceUsage,header:z.G0.DiskSpaceUsage,width:115,resizeMinWidth:75,render:e=>{let{row:t}=e;return(0,k.D)(t.DiskSpaceUsage)?(0,S.jsx)(p.a,{value:Math.floor(t.DiskSpaceUsage),theme:(0,D.H)(t.DiskSpaceUsage)}):y.jX},align:o.ZP.LEFT},B={name:z.tn.GroupId,header:z.G0.GroupId,width:130,render:e=>{let{row:t}=e;return t.GroupId?(0,S.jsx)(c.h,{className:V("group-id"),to:(0,b.Uu)(t.GroupId),children:t.GroupId}):"-"},sortAccessor:e=>Number(e.GroupId),align:o.ZP.RIGHT},K={name:z.tn.Used,header:z.G0.Used,width:100,render:e=>{let{row:t}=e;return(0,j.Uz)(t.Used,!0)},align:o.ZP.RIGHT},$={name:z.tn.Limit,header:z.G0.Limit,width:100,render:e=>{let{row:t}=e;return(0,j.Uz)(t.Limit)},align:o.ZP.RIGHT},Q={name:z.tn.DiskSpace,header:z.G0.DiskSpace,width:70,render:e=>{let{row:t}=e;return(0,S.jsx)(m.J,{status:t.DiskSpace})},align:o.ZP.CENTER},X={name:z.tn.Read,header:z.G0.Read,width:100,render:e=>{let{row:t}=e;return t.Read?(0,j.Qt)(t.Read):"-"},align:o.ZP.RIGHT},J={name:z.tn.Write,header:z.G0.Write,width:100,render:e=>{let{row:t}=e;return t.Write?(0,j.Qt)(t.Write):"-"},align:o.ZP.RIGHT},q={name:z.tn.Latency,header:z.G0.Latency,width:100,render:e=>{let{row:t}=e;return(0,k.D)(t.LatencyPutTabletLogMs)?(0,I.zm)(t.LatencyPutTabletLogMs):y.jX},align:o.ZP.RIGHT},Y={name:z.tn.AllocationUnits,header:z.G0.AllocationUnits,width:150,render:e=>{let{row:t}=e;return(0,k.D)(t.AllocationUnits)?(0,h.uf)(t.AllocationUnits):y.jX},align:o.ZP.RIGHT},ee=e=>({name:z.tn.VDisks,header:z.G0.VDisks,className:V("vdisks-column"),render:t=>{var r;let{row:n}=t;return(0,S.jsx)("div",{className:V("vdisks-wrapper"),children:null===(r=n.VDisks)||void 0===r?void 0:r.map((t=>(0,S.jsx)(N,{data:t,inactive:!(0,T.XW)(t,null===e||void 0===e?void 0:e.viewContext),className:V("vdisks-item")},t.StringifiedId)))})},align:o.ZP.CENTER,width:900,resizeable:!1,sortable:!1}),te=e=>({name:z.tn.VDisksPDisks,header:z.G0.VDisksPDisks,className:V("disks-column"),render:t=>{let{row:r}=t;return(0,S.jsx)(R,{vDisks:r.VDisks,viewContext:null===e||void 0===e?void 0:e.viewContext})},align:o.ZP.CENTER,width:900,resizeable:!1,sortable:!1}),re=()=>[B,O,F,W,K,$].map((e=>({...e,sortable:!1}))),ne=e=>[B,Z,O,F,_,W,H,K,$,Q,X,J,q,Y,ee(e),te(e)].map((e=>({...e,sortable:(0,z.cz)(e.name)})))},78090:(e,t,r)=>{r.d(t,{nu:()=>u,h2:()=>S,Rt:()=>c,tn:()=>d,G0:()=>m,Ty:()=>i,r8:()=>g,j0:()=>l,re:()=>x,cz:()=>w,Hx:()=>v});var n=r(75475),s=r(37711);const o=JSON.parse('{"pool-name":"Pool Name","type":"Type","encryption":"Encryption","erasure":"Erasure","degraded":"Degraded","missing-disks":"Missing Disks","state":"State","usage":"Usage","disk-usage":"Disk usage","group-id":"Group ID","used":"Used","limit":"Limit","space":"Space","read":"Read","write":"Write","latency":"Latency","allocation-units":"Allocation Units","vdisks":"VDisks","vdisks-pdisks":"VDisks with PDisks"}'),a=(0,s.wZ)("ydb-storage-groups-columns",{en:o}),i="storageGroupsColumnsWidth",l="storageGroupsSelectedColumns",d={GroupId:"GroupId",PoolName:"PoolName",MediaType:"MediaType",Erasure:"Erasure",Used:"Used",Limit:"Limit",Usage:"Usage",DiskSpaceUsage:"DiskSpaceUsage",DiskSpace:"DiskSpace",Read:"Read",Write:"Write",Latency:"Latency",AllocationUnits:"AllocationUnits",VDisks:"VDisks",VDisksPDisks:"VDisksPDisks",Degraded:"Degraded"},u=["GroupId","PoolName","MediaType","Erasure","Used","Limit","Usage","Read","Write","VDisks"],c=["GroupId"],m={get PoolName(){return a("pool-name")},get MediaType(){return a("type")},get Erasure(){return a("erasure")},get GroupId(){return a("group-id")},get Used(){return a("used")},get Limit(){return a("limit")},get Usage(){return a("usage")},get DiskSpaceUsage(){return a("disk-usage")},get DiskSpace(){return a("space")},get Read(){return a("read")},get Write(){return a("write")},get Latency(){return a("latency")},get AllocationUnits(){return a("allocation-units")},get VDisks(){return a("vdisks")},get VDisksPDisks(){return a("vdisks-pdisks")},get Degraded(){return a("missing-disks")}},p={get GroupId(){return a("group-id")},get Erasure(){return a("erasure")},get Usage(){return a("usage")},get DiskSpaceUsage(){return a("disk-usage")},get PoolName(){return a("pool-name")},get Kind(){return a("type")},get Encryption(){return a("encryption")},get MediaType(){return a("type")},get MissingDisks(){return a("missing-disks")},get State(){return a("state")},get Latency(){return a("latency")}},h=["PoolName","MediaType","Encryption","Erasure","Usage","DiskSpaceUsage","State","MissingDisks","Latency"],g=h.map((e=>({value:e,content:p[e]}))),v=n.z.custom((e=>h.includes(e))).catch(void 0),S={GroupId:["GroupId"],PoolName:["PoolName"],MediaType:["MediaType","Encryption"],Erasure:["Erasure"],Used:["Used"],Limit:["Limit"],Usage:["Usage"],DiskSpaceUsage:["DiskSpaceUsage"],DiskSpace:["State"],Read:["Read"],Write:["Write"],Latency:["Latency"],AllocationUnits:["AllocationUnits"],VDisks:["VDisk","PDisk","Read","Write"],VDisksPDisks:["VDisk","PDisk","Read","Write"],Degraded:["MissingDisks"]},f={GroupId:"GroupId",PoolName:"PoolName",MediaType:"MediaType",Erasure:"Erasure",Used:"Used",Limit:"Limit",Usage:"Usage",DiskSpaceUsage:"DiskSpaceUsage",DiskSpace:void 0,Read:"Read",Write:"Write",Latency:"Latency",AllocationUnits:"AllocationUnits",VDisks:void 0,VDisksPDisks:void 0,Degraded:"Degraded"};function x(e){return f[e]}function w(e){return Boolean(x(e))}},50791:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(37711);const s=JSON.parse('{"empty.default":"No such groups","empty.out_of_space":"No groups with out of space errors","empty.degraded":"No degraded groups","show_all":"Show all groups","encrypted":"Encrypted group"}'),o=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f","empty.out_of_space":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0433\u0440\u0443\u043f\u043f","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","encrypted":"\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430"}'),a=(0,n.wZ)("ydb-storage-groups",{ru:o,en:s})},58095:(e,t,r)=>{r.d(t,{V:()=>qe});var n=r(27810),s=r(55842),o=r(34706),a=r(87149),i=r(48653),l=r(74640),d=r(39202),u=r(89085),c=r(53366),m=r(23795),p=r(26390),h=r(14325),g=r(76485),v=r(56065),S=r(78090),f=r(75475),x=r(60918);const w="storageNodesColumnsWidth",N="storageNodesSelectedColumns",b=["NodeId","Host","DC","Rack","Pools","Uptime","PDisks"],k=["NodeId"],y=["Host","DC","Rack","Version","Uptime","Missing","DiskSpaceUsage"],D=y.map((e=>({value:e,content:(0,x.ws)(e)}))),I=f.z.custom((e=>y.includes(e))).catch(void 0);var j=r(67661),P=r(34695),C=r(10161);const E={[P.d.groups]:"Groups",[P.d.nodes]:"Nodes"},T=e=>{let{value:t,onChange:r}=e;return(0,C.jsxs)(j.E,{value:t,onUpdate:r,qa:"storage-type-filter",children:[(0,C.jsx)(j.E.Option,{value:P.d.groups,children:E[P.d.groups]}),(0,C.jsx)(j.E.Option,{value:P.d.nodes,children:E[P.d.nodes]})]})},U={[P.G.all]:"All",[P.G.missing]:"Degraded",[P.G.space]:"Out of Space"},G=e=>{let{value:t,onChange:r}=e;return(0,C.jsxs)(j.E,{value:t,onUpdate:r,qa:"storage-visible-entities-filter",children:[(0,C.jsx)(j.E.Option,{value:P.G.missing,children:U[P.G.missing]}),(0,C.jsx)(j.E.Option,{value:P.G.space,children:U[P.G.space]}),(0,C.jsx)(j.E.Option,{value:P.G.all,children:U[P.G.all]})]})};var R=r(37711);const M=JSON.parse('{"groups":"Groups","nodes":"Nodes","controls_groups-search-placeholder":"Group ID, Pool name","controls_nodes-search-placeholder":"Node ID, FQDN","controls_group-by-placeholder":"Group by:","no-nodes":"No such nodes","no-groups":"No such groups"}'),L=(0,R.wZ)("ydb-storage",{en:M});var A=r(71037),z=r(15327),V=r(99294);const Z=(0,V.cn)("global-storage"),O=e=>403===e.status?(0,C.jsx)(A.J,{position:"left"}):(0,C.jsx)(z.V,{error:e});var F=r(99495);const _=f.z.nativeEnum(P.G).catch(P.G.all),W=f.z.nativeEnum(P.d).catch(P.d.groups);var H=r(96183);function B(){var e;const[t,r]=(0,F.useQueryParams)({type:F.StringParam,visible:F.StringParam,search:F.StringParam,uptimeFilter:F.StringParam,storageNodesGroupBy:F.StringParam,storageGroupsGroupBy:F.StringParam}),n=W.parse(t.type),s=_.parse(t.visible),o=null!==(e=t.search)&&void 0!==e?e:"",a=H.U8.parse(t.uptimeFilter),i=S.Hx.parse(t.storageGroupsGroupBy),l=I.parse(t.storageNodesGroupBy),d=e=>{r({visible:e},"replaceIn")},u=e=>{r({uptimeFilter:e},"replaceIn")};return{storageType:n,visibleEntities:s,searchValue:o,nodesUptimeFilter:a,storageGroupsGroupByParam:i,storageNodesGroupByParam:l,handleTextFilterChange:e=>{r({search:e||void 0},"replaceIn")},handleVisibleEntitiesChange:d,handleStorageTypeChange:e=>{r({type:e},"replaceIn")},handleUptimeFilterChange:u,handleStorageGroupsGroupByParamChange:e=>{r({storageGroupsGroupBy:e},"replaceIn")},handleStorageNodesGroupByParamChange:e=>{r({storageNodesGroupBy:e},"replaceIn")},handleShowAllGroups:()=>{d("all")},handleShowAllNodes:()=>{d("all"),u(H.Uu.All)}}}function K(e){let{withTypeSelector:t,withGroupBySelect:r,entitiesCountCurrent:n,entitiesCountTotal:s,entitiesLoading:a,columnsToSelect:i,handleSelectedColumnsUpdate:l}=e;const{searchValue:d,storageType:u,visibleEntities:v,storageGroupsGroupByParam:f,handleTextFilterChange:x,handleStorageTypeChange:w,handleVisibleEntitiesChange:N,handleStorageGroupsGroupByParamChange:b}=B();return(0,C.jsxs)(o.Fragment,{children:[(0,C.jsx)(g.o,{value:d,onChange:x,placeholder:L("controls_groups-search-placeholder"),className:Z("search")}),t&&(0,C.jsx)(T,{value:u,onChange:w}),r?null:(0,C.jsx)(G,{value:v,onChange:N}),(0,C.jsx)(c.N,{popupWidth:200,items:i,showStatus:!0,onUpdate:l,sortable:!1}),r?(0,C.jsxs)(o.Fragment,{children:[(0,C.jsx)(m.x,{variant:"body-2",children:L("controls_group-by-placeholder")}),(0,C.jsx)(p.P,{hasClear:!0,placeholder:"-",width:150,defaultValue:f?[f]:void 0,onUpdate:e=>{b(e[0])},options:S.r8})]}):null,(0,C.jsx)(h.C,{label:L("groups"),loading:a,total:s,current:n})]})}function $(e){let{withTypeSelector:t,withGroupBySelect:r,entitiesCountCurrent:n,entitiesCountTotal:s,entitiesLoading:a,columnsToSelect:i,handleSelectedColumnsUpdate:l}=e;const{searchValue:d,storageType:u,visibleEntities:S,nodesUptimeFilter:f,storageNodesGroupByParam:x,handleTextFilterChange:w,handleStorageTypeChange:N,handleVisibleEntitiesChange:b,handleUptimeFilterChange:k,handleStorageNodesGroupByParamChange:y}=B();return(0,C.jsxs)(o.Fragment,{children:[(0,C.jsx)(g.o,{value:d,onChange:w,placeholder:L("controls_nodes-search-placeholder"),className:Z("search")}),t&&(0,C.jsx)(T,{value:u,onChange:N}),r?null:(0,C.jsx)(G,{value:S,onChange:b}),r?null:(0,C.jsx)(v.X,{value:f,onChange:k}),(0,C.jsx)(c.N,{popupWidth:200,items:i,showStatus:!0,onUpdate:l,sortable:!1}),r?(0,C.jsxs)(o.Fragment,{children:[(0,C.jsx)(m.x,{variant:"body-2",children:L("controls_group-by-placeholder")}),(0,C.jsx)(p.P,{hasClear:!0,placeholder:"-",width:150,defaultValue:x?[x]:void 0,onUpdate:e=>{y(e[0])},options:D})]}):null,(0,C.jsx)(h.C,{label:L("nodes"),loading:a,total:s,current:n})]})}var Q=r(25747),X=r(72616),J=r(90205),q=r(91538);const Y=JSON.parse('{"default_message":"Everything is fine!","default_button_label":"Show All"}'),ee=JSON.parse('{"default_message":"\u0412\u0441\u0451 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435!","default_button_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}'),te=(0,R.wZ)("ydb-storage-empty-filter",{ru:ee,en:Y}),re=e=>{let{title:t,message:r=te("default_message"),showAll:n=te("default_button_label"),onShowAll:s}=e;return(0,C.jsx)(J.u,{image:(0,C.jsx)(q.Q,{name:"thumbsUp"}),position:"left",title:t,description:r,actions:s&&[(0,C.jsx)(X.z,{onClick:s,children:n},"show-all")]})};var ne=r(50791);const se=e=>{let t,{visibleEntities:r,onShowAll:n}=e;return r===P.G.space&&(t=(0,ne.Z)("empty.out_of_space")),r===P.G.missing&&(t=(0,ne.Z)("empty.degraded")),t?(0,C.jsx)(re,{title:t,showAll:(0,ne.Z)("show_all"),onShowAll:n}):null};var oe=r(55993),ae=r(89991),ie=r(83023);const le=e=>{let{columns:t,database:r,nodeId:n,groupId:s,pDiskId:a,filterGroup:l,filterGroupBy:u,searchValue:c,visibleEntities:m,onShowAll:p,parentRef:h,renderControls:g,renderErrorMessage:v,initialEntitiesCount:f}=e;const x=(0,d.rU)(),w=(0,d.tS)(),N=(b=w,o.useCallback((async e=>{const{limit:t,offset:r,sortParams:n,filters:s,columnsIds:o}=e,{sortOrder:a,columnId:i}=null!==n&&void 0!==n?n:{},{searchValue:l,visibleEntities:d,database:u,nodeId:c,groupId:m,pDiskId:p,filterGroup:h,filterGroupBy:g}=null!==s&&void 0!==s?s:{},v=(0,S.re)(i),f=v?(0,ae.A)(v,a):void 0,x=(0,ie.w)(o,S.h2),{groups:w,found:N,total:k}=await(0,oe.R)({limit:t,offset:r,sort:f,filter:l,with:d,database:u,nodeId:c,groupId:m,pDiskId:p,filter_group:h,filter_group_by:g,fieldsRequired:x,shouldUseGroupsHandler:b});return{data:w||[],found:N||0,total:k||0}}),[b]));var b;const k=o.useMemo((()=>({searchValue:c,visibleEntities:m,database:r,nodeId:n,groupId:s,pDiskId:a,filterGroup:l,filterGroupBy:u})),[c,m,r,n,s,a,l,u]);return(0,C.jsx)(i.s,{loading:!x,children:(0,C.jsx)(Q.WQ,{columnsWidthLSKey:S.Ty,parentRef:h,columns:t,fetchData:N,limit:50,initialEntitiesCount:f,renderControls:g,renderErrorMessage:v,renderEmptyDataMessage:()=>m!==P.G.all?(0,C.jsx)(se,{onShowAll:p,visibleEntities:m}):(0,ne.Z)("empty.default"),filters:k,tableName:"storage-groups"})})};var de=r(97485),ue=r(96635);function ce(e){return o.useMemo((()=>(0,ue.V)({viewContext:e})),[e])}function me(e){let{visibleEntities:t,viewContext:r}=e;const n=ce(r),s=o.useMemo((()=>t===P.G.missing?[...S.Rt,S.tn.Degraded]:t===P.G.space?[...S.Rt,S.tn.DiskSpace]:S.Rt),[t]);return(0,de.N)(n,S.j0,S.G0,S.nu,s)}var pe=r(78326),he=r(18258);function ge(e){const{storageGroupsGroupByParam:t,visibleEntities:r,handleShowAllGroups:n}=B(),s=(0,d.rU)(),a=(0,d.Pq)();o.useEffect((()=>{a&&"all"!==r&&n()}),[n,a,r]);return(0,C.jsx)(i.s,{loading:!s,children:a&&t?(0,C.jsx)(Se,{...e}):(0,C.jsx)(ve,{...e})})}function ve(e){let{database:t,nodeId:r,groupId:n,pDiskId:s,viewContext:o,parentRef:a,initialEntitiesCount:i}=e;const{searchValue:l,visibleEntities:u,handleShowAllGroups:c}=B(),m=(0,d.Pq)(),{columnsToShow:p,columnsToSelect:h,setColumns:g}=me({visibleEntities:u,viewContext:o});return(0,C.jsx)(le,{database:t,nodeId:r,groupId:n,pDiskId:s,searchValue:l,visibleEntities:u,onShowAll:c,parentRef:a,renderControls:e=>{let{totalEntities:t,foundEntities:r,inited:n}=e;return(0,C.jsx)(K,{withTypeSelector:!0,withGroupBySelect:m,entitiesCountCurrent:r,entitiesCountTotal:t,entitiesLoading:!n,columnsToSelect:h,handleSelectedColumnsUpdate:g})},renderErrorMessage:O,columns:p,initialEntitiesCount:i})}function Se(e){let{database:t,nodeId:r,groupId:n,pDiskId:o,parentRef:i,viewContext:d}=e;const[c]=(0,s.Rj)(),{searchValue:m,storageGroupsGroupByParam:p,visibleEntities:h,handleShowAllGroups:g}=B(),{columnsToShow:v,columnsToSelect:S,setColumns:f}=me({visibleEntities:h,viewContext:d}),{currentData:x,isFetching:w,error:N}=u.y.useGetStorageGroupsInfoQuery({database:t,with:"all",nodeId:r,groupId:n,pDiskId:o,filter:m,shouldUseGroupsHandler:!0,group:p},{pollingInterval:c}),b=void 0===x&&w,{tableGroups:k,found:y=0,total:D=0}=x||{},{expandedGroups:I,setIsGroupExpanded:j}=(0,he.r)(k);return(0,C.jsxs)(l.l,{children:[(0,C.jsx)(l.l.Controls,{children:(0,C.jsx)(K,{withTypeSelector:!0,withGroupBySelect:!0,entitiesCountCurrent:y,entitiesCountTotal:D,entitiesLoading:b,columnsToSelect:S,handleSelectedColumnsUpdate:f})}),N?(0,C.jsx)(a.V,{error:N}):null,(0,C.jsx)(l.l.Table,{loading:b,className:Z("groups-wrapper"),children:null!==k&&void 0!==k&&k.length?k.map((e=>{let{name:s,count:a}=e;const l=I[s];return(0,C.jsx)(pe.G,{title:s,count:a,entityName:L("groups"),expanded:l,onIsExpandedChange:j,children:(0,C.jsx)(le,{database:t,parentRef:i,nodeId:r,groupId:n,pDiskId:o,filterGroup:s,filterGroupBy:p,searchValue:m,visibleEntities:"all",onShowAll:g,renderErrorMessage:O,columns:v,initialEntitiesCount:a})},s)})):L("no-groups")})]})}var fe=r(10730),xe=r(61979);const we=JSON.parse('{"empty.default":"No such nodes","empty.out_of_space":"No nodes with out of space errors","empty.degraded":"No degraded nodes","empty.small_uptime":"No nodes with uptime < 1h","empty.several_filters":"No nodes match current filters combination","show_all":"Show all nodes"}'),Ne=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432","empty.out_of_space":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0443\u0437\u043b\u043e\u0432","empty.small_uptime":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432 \u0441 uptime < 1h","empty.several_filters":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0443\u0437\u043b\u044b"}'),be=(0,R.wZ)("ydb-storage-nodes",{ru:Ne,en:we}),ke=e=>{let t,{visibleEntities:r,nodesUptimeFilter:n,onShowAll:s}=e;return r===P.G.space&&(t=be("empty.out_of_space")),r===P.G.missing&&(t=be("empty.degraded")),n===H.Uu.SmallUptime&&(t=be("empty.small_uptime")),r!==P.G.all&&n!==H.Uu.All&&(t=be("empty.several_filters")),t?(0,C.jsx)(re,{title:t,showAll:be("show_all"),onShowAll:s}):null};var ye=r(69541);const De=async e=>{const{type:t="static",storage:r=!0,limit:n,offset:s,sortParams:o,filters:a,columnsIds:i}=e,{searchValue:l,nodesUptimeFilter:d,visibleEntities:u,database:c,nodeId:m,groupId:p,filterGroup:h,filterGroupBy:g}=null!==a&&void 0!==a?a:{},{sortOrder:v,columnId:S}=null!==o&&void 0!==o?o:{},f=(0,x.Gd)(S),w=f?(0,ae.A)(f,v):void 0,N=(0,ie.w)(i,x.WN),b=await window.api.getNodes({type:t,storage:r,limit:n,offset:s,sort:w,filter:l,uptime:(0,H.RW)(d),with:u,database:c,node_id:m,group_id:p,filter_group:h,filter_group_by:g,fieldsRequired:N}),k=(0,ye.Y2)(b);return{data:k.nodes||[],found:k.found||0,total:k.total||0}},Ie=(0,V.cn)("ydb-storage-nodes"),je=e=>Ie("node",{unavailable:(0,H.TA)(e)}),Pe=e=>{let{columns:t,database:r,nodeId:n,groupId:s,filterGroup:a,filterGroupBy:i,searchValue:l,visibleEntities:d,nodesUptimeFilter:u,onShowAll:c,parentRef:m,renderControls:p,renderErrorMessage:h,initialEntitiesCount:g}=e;const v=o.useMemo((()=>({searchValue:l,visibleEntities:d,nodesUptimeFilter:u,database:r,nodeId:n,groupId:s,filterGroup:a,filterGroupBy:i})),[l,d,u,r,n,s,a,i]);return(0,C.jsx)(Q.WQ,{columnsWidthLSKey:w,parentRef:m,columns:t,fetchData:De,rowHeight:51,limit:50,initialEntitiesCount:g,renderControls:p,renderErrorMessage:h,renderEmptyDataMessage:()=>d!==P.G.all||u!==H.Uu.All?(0,C.jsx)(ke,{onShowAll:c,nodesUptimeFilter:u,visibleEntities:d}):be("empty.default"),getRowClassName:je,filters:v,tableName:"storage-nodes"})};var Ce=r(71624),Ee=r(2387),Te=r(98530);const Ue=(0,V.cn)("ydb-storage-nodes-columns"),Ge=e=>{let{viewContext:t}=e;return{name:x.xv.PDisks,header:x.Pr.PDisks,className:Ue("pdisks-column"),render:e=>{var r;let{row:n}=e;return(0,C.jsx)("div",{className:Ue("pdisks-wrapper"),children:null===(r=n.PDisks)||void 0===r?void 0:r.map((e=>{var r;const s=null===(r=n.VDisks)||void 0===r?void 0:r.filter((t=>t.PDiskId===e.PDiskId));return(0,C.jsx)("div",{className:Ue("pdisks-item"),children:(0,C.jsx)(Te.l,{data:e,vDisks:s,viewContext:t})},e.PDiskId)}))})},align:Ce.ZP.CENTER,sortable:!1,width:900,resizeable:!1}},Re=e=>{let{database:t,additionalNodesProps:r,viewContext:n}=e;const s=null===r||void 0===r?void 0:r.getNodeRef;return[(0,Ee.A6)(),(0,Ee.iJ)(),(0,Ee.Up)({getNodeRef:s,database:t}),(0,Ee.EF)(),(0,Ee.KO)(),(0,Ee.Zi)(),(0,Ee.rh)(),(0,Ee.n2)(),(0,Ee.o9)(),(0,Ee.eb)(),(0,Ee.cB)(),(0,Ee.VQ)(),(0,Ee.Fi)(),Ge({viewContext:n})].map((e=>({...e,sortable:(0,x.Ke)(e.name)})))};function Me(e){let{visibleEntities:t,database:r,additionalNodesProps:n,viewContext:s}=e;const a=o.useMemo((()=>Re({database:r,additionalNodesProps:n,viewContext:s})),[r,n,s]),i=o.useMemo((()=>t===P.G.missing?[...k,x.xv.Missing]:k),[t]);return(0,de.N)(a,N,x.Pr,b,i)}const Le=e=>{const{storageNodesGroupByParam:t,visibleEntities:r,nodesUptimeFilter:n,handleShowAllNodes:s}=B(),a=(0,d.rU)(),l=(0,d.th)();o.useEffect((()=>{!l||"all"===r&&n===H.Uu.All||s()}),[s,n,l,r]);return(0,C.jsx)(i.s,{loading:!a,children:l&&t?(0,C.jsx)(ze,{...e}):(0,C.jsx)(Ae,{...e})})};function Ae(e){let{database:t,nodeId:r,groupId:n,viewContext:s,parentRef:o,initialEntitiesCount:a}=e;const{searchValue:i,visibleEntities:l,nodesUptimeFilter:u,handleShowAllNodes:c}=B(),m=(0,d.th)(),{columnsToShow:p,columnsToSelect:h,setColumns:g}=Ve({database:t,viewContext:s});return(0,C.jsx)(Pe,{database:t,nodeId:r,groupId:n,searchValue:i,visibleEntities:l,nodesUptimeFilter:u,onShowAll:c,parentRef:o,renderControls:e=>{let{totalEntities:t,foundEntities:r,inited:n}=e;return(0,C.jsx)($,{withTypeSelector:!0,withGroupBySelect:m,entitiesCountCurrent:r,entitiesCountTotal:t,entitiesLoading:!n,columnsToSelect:h,handleSelectedColumnsUpdate:g})},renderErrorMessage:O,columns:p,initialEntitiesCount:a})}function ze(e){let{database:t,groupId:r,nodeId:n,viewContext:o,parentRef:a}=e;const[i]=(0,s.Rj)(),{searchValue:d,storageNodesGroupByParam:c,handleShowAllNodes:m}=B(),{columnsToShow:p,columnsToSelect:h,setColumns:g}=Ve({database:t,viewContext:o}),{currentData:v,isFetching:S,error:f}=u.y.useGetStorageNodesInfoQuery({database:t,with:"all",filter:d,node_id:n,group_id:r,group:c},{pollingInterval:i}),x=void 0===v&&S,{tableGroups:w,found:N=0,total:b=0}=v||{},{expandedGroups:k,setIsGroupExpanded:y}=(0,he.r)(w);return(0,C.jsxs)(l.l,{children:[(0,C.jsx)(l.l.Controls,{children:(0,C.jsx)($,{withTypeSelector:!0,withGroupBySelect:!0,entitiesCountCurrent:N,entitiesCountTotal:b,entitiesLoading:x,columnsToSelect:h,handleSelectedColumnsUpdate:g})}),f?(0,C.jsx)(z.V,{error:f}):null,(0,C.jsx)(l.l.Table,{loading:x,className:Z("groups-wrapper"),children:null!==w&&void 0!==w&&w.length?w.map((e=>{let{name:s,count:o}=e;const i=k[s];return(0,C.jsx)(pe.G,{title:s,count:o,entityName:L("nodes"),expanded:i,onIsExpandedChange:y,children:(0,C.jsx)(Pe,{database:t,parentRef:a,nodeId:n,groupId:r,searchValue:d,visibleEntities:"all",nodesUptimeFilter:H.Uu.All,onShowAll:m,filterGroup:s,filterGroupBy:c,renderErrorMessage:O,columns:p,initialEntitiesCount:o})},s)})):L("no-nodes")})]})}function Ve(e){let{database:t,viewContext:r}=e;const{balancer:n}=(0,fe.kW)(),{additionalNodesProps:s}=(0,xe.f)({balancer:n}),{visibleEntities:o}=B();return Me({additionalNodesProps:s,visibleEntities:o,database:t,viewContext:r})}var Ze=r(14418);const Oe=e=>{const{storageType:t}=B();return"nodes"===t?(0,C.jsx)(Le,{initialEntitiesCount:(0,Ze._M)(e.viewContext),...e}):(0,C.jsx)(ge,{initialEntitiesCount:(0,Ze.le)(e.viewContext),...e})};var Fe=r(93225),_e=r(82114);const We=e=>e.trim().toLowerCase(),He=(e,t)=>{const r=We(t);return r?e.filter((e=>{var t,n;return(null===(t=e.NodeId)||void 0===t?void 0:t.toString().includes(r))||(null===(n=e.Host)||void 0===n?void 0:n.toLowerCase().includes(r))})):e},Be=(e,t)=>{const r=We(t);return r?e.filter((e=>{var t,n;return(null===(t=e.PoolName)||void 0===t?void 0:t.toLowerCase().includes(r))||(null===(n=e.GroupId)||void 0===n?void 0:n.toString().includes(r))})):e};var Ke=r(74116);function $e(e){let{data:t,columns:r,visibleEntities:s,onShowAll:o,sort:a,handleSort:i}=e;return t.length||s===P.G.all?(0,C.jsx)(Ke.G,{columnsWidthLSKey:S.Ty,data:t,columns:r,settings:n.LE,emptyDataMessage:(0,ne.Z)("empty.default"),sortOrder:a,onSort:i},s):(0,C.jsx)(se,{onShowAll:o,visibleEntities:s})}const Qe={...n.LE,dynamicRenderMinSize:51};function Xe(e){let{data:t,columns:r,visibleEntities:n,nodesUptimeFilter:s,sort:o,onShowAll:a,handleSort:i}=e;return t.length||n===P.G.all&&s===H.Uu.All?(0,C.jsx)(Ke.G,{columnsWidthLSKey:w,data:t,columns:r,settings:Qe,emptyDataMessage:be("empty.default"),rowClassName:je,sortOrder:o,onSort:i},n):(0,C.jsx)(ke,{visibleEntities:n,nodesUptimeFilter:s,onShowAll:a})}const Je=e=>{var t,r;let{database:n,viewContext:a,nodeId:i,groupId:c,pDiskId:m}=e;const{balancer:p}=(0,fe.kW)(),{additionalNodesProps:h}=(0,xe.f)({balancer:p}),{storageType:g,searchValue:v,visibleEntities:S,nodesUptimeFilter:f,handleShowAllGroups:x,handleShowAllNodes:w}=B(),N=(0,d.rU)(),b=(0,d.tS)(),[k]=(0,s.Rj)(),y="groups"===g,D="nodes"===g,[I,j]=o.useState({sortOrder:void 0,sortValue:void 0}),P=I.sortValue?I:Ze.TP,[E,T]=o.useState({sortOrder:void 0,sortValue:void 0}),U=E.sortOrder?E:(0,Ze._r)(S),{columnsToShow:G,columnsToSelect:R,setColumns:M}=Me({additionalNodesProps:h,visibleEntities:S,database:n,viewContext:a}),{columnsToShow:L,columnsToSelect:V,setColumns:O}=me({visibleEntities:S,viewContext:a}),F=u.y.useGetStorageNodesInfoQuery({database:n,with:S,node_id:i,group_id:c},{skip:!D,pollingInterval:k}),_=u.y.useGetStorageGroupsInfoQuery({database:n,with:S,nodeId:i,groupId:c,pDiskId:m,shouldUseGroupsHandler:b,fieldsRequired:"all"},{skip:!y||!N,pollingInterval:k}),{currentData:W,isFetching:H,error:Q}=D?F:_,{currentData:{nodes:X=[]}={}}=F,{currentData:{groups:J=[]}={}}=_,q=(null===(t=F.currentData)||void 0===t?void 0:t.total)||0,Y=(null===(r=_.currentData)||void 0===r?void 0:r.total)||0,ee=void 0===W&&H,te=o.useMemo((()=>function(e,t,r){let n=e||[];return n=He(n,t),n=(0,_e.f)(n,r),n}(X,v,f)),[X,f,v]),re=o.useMemo((()=>function(e,t){let r=e||[];return r=Be(r,t),r}(J,v)),[v,J]),[ne,se]=(0,s.sC)(P,(e=>j(e))),[oe,ae]=(0,s.sC)(U,(e=>T(e)));return(0,Fe.u)(Q)?(0,C.jsx)(A.J,{position:"left"}):(0,C.jsxs)(l.l,{children:[(0,C.jsx)(l.l.Controls,{children:(0,C.jsxs)(o.Fragment,{children:[y?(0,C.jsx)(K,{withTypeSelector:!0,entitiesCountCurrent:re.length,entitiesCountTotal:Y,entitiesLoading:ee,columnsToSelect:V,handleSelectedColumnsUpdate:O}):null,D?(0,C.jsx)($,{withTypeSelector:!0,entitiesCountCurrent:te.length,entitiesCountTotal:q,entitiesLoading:ee,columnsToSelect:R,handleSelectedColumnsUpdate:M}):null]})}),Q?(0,C.jsx)(z.V,{error:Q}):null,(0,C.jsx)(l.l.Table,{loading:ee||!N,className:Z("table"),children:W?(0,C.jsxs)(o.Fragment,{children:[y?(0,C.jsx)($e,{visibleEntities:S,data:re,onShowAll:x,sort:oe,handleSort:ae,columns:L},"groups"):null,D?(0,C.jsx)(Xe,{visibleEntities:S,nodesUptimeFilter:f,data:te,onShowAll:w,sort:ne,handleSort:se,columns:G},"nodes"):null]}):null})]})},qe=e=>{var t,r,o,a;let{parentRef:i,...l}=e;const[d]=(0,s.yu)(n.Qy),u={nodeId:null===(t=l.nodeId)||void 0===t?void 0:t.toString(),pDiskId:null===(r=l.pDiskId)||void 0===r?void 0:r.toString(),groupId:null===(o=l.groupId)||void 0===o?void 0:o.toString(),vDiskSlotId:null===(a=l.vDiskSlotId)||void 0===a?void 0:a.toString()};return d?(0,C.jsx)(Oe,{parentRef:i,viewContext:u,...l}):(0,C.jsx)(Je,{viewContext:u,...l})}},78326:(e,t,r)=>{r.d(t,{G:()=>d});r(34706);var n=r(81778),s=r(23795),o=r(2634),a=r(99294),i=r(10161);const l=(0,a.cn)("ydb-table-group");function d(e){let{children:t,title:r,entityName:a,count:d,expanded:u=!1,onIsExpandedChange:c}=e;const m=()=>{c(r,!u)};return(0,i.jsxs)("div",{className:l(null),children:[(0,i.jsx)("button",{onClick:m,className:l("button"),title:r,children:(0,i.jsxs)("div",{className:l("title-wrapper"),children:[(0,i.jsx)(n.F,{direction:u?"top":"bottom"}),(0,i.jsxs)("div",{className:l("title"),children:[(0,i.jsx)(s.x,{variant:"subheader-2",children:r}),(0,i.jsxs)(s.x,{variant:"body-2",color:"secondary",className:l("count"),children:[a,": ",(0,i.jsx)(o._,{theme:"normal",children:d})]})]})]})}),u?(0,i.jsx)("div",{className:l("content"),children:t}):null]})}},18258:(e,t,r)=>{r.d(t,{r:()=>s});var n=r(34706);function s(e){const[t,r]=n.useState({});n.useEffect((()=>{null!==e&&void 0!==e&&e.length&&r((t=>e.reduce(((e,r)=>{let{name:n}=r;const s=t[n];return{...e,[n]:null!==s&&void 0!==s&&s}}),{})))}),[e]);return{expandedGroups:t,setIsGroupExpanded:n.useCallback(((e,t)=>{r((r=>({...r,[e]:t})))}),[])}}},14418:(e,t,r)=>{r.d(t,{TP:()=>m,XW:()=>S,_M:()=>x,_O:()=>c,_r:()=>v,le:()=>w});var n=r(20560),s=r(60918),o=r(34695),a=r(25665),i=r(84029),l=r(78090);const d=(0,i.p)(1,2,["success","warning","danger"]),u={"block-4-2":(0,i.p)(1,2,["success","warning","danger"]),"mirror-3-dc":(0,i.p)(1,3,["success","warning","danger"])},c=e=>{var t;return(void 0!==(t=e.ErasureSpecies)&&t in u?u[e.ErasureSpecies]:d)(e.Degraded)},m={sortValue:s.xv.NodeId,sortOrder:n.zE},p={sortValue:l.tn.PoolName,sortOrder:n.zE},h={sortValue:l.tn.Degraded,sortOrder:n.hr},g={sortValue:l.tn.Usage,sortOrder:n.hr};function v(e){return e===o.G.missing?h:e===o.G.space?g:p}function S(e,t){var r;let n=!0;return(0,a.D)(null===(r=e.VDiskId)||void 0===r?void 0:r.GroupID)&&null!==t&&void 0!==t&&t.groupId&&(n&&=String(e.VDiskId.GroupID)===t.groupId),(0,a.D)(e.NodeId)&&null!==t&&void 0!==t&&t.nodeId&&(n&&=String(e.NodeId)===t.nodeId),(0,a.D)(e.PDiskId)&&null!==t&&void 0!==t&&t.pDiskId&&(n&&=String(e.PDiskId)===t.pDiskId),(0,a.D)(e.VDiskSlotId)&&null!==t&&void 0!==t&&t.vDiskSlotId&&(n&&=String(e.VDiskSlotId)===t.vDiskSlotId),n}const f=10;function x(e){let{nodeId:t,pDiskId:r,vDiskSlotId:n}=e;return(0,a.D)(t)||(0,a.D)(r)||(0,a.D)(n)?1:f}function w(e){let{vDiskSlotId:t,groupId:r}=e;return(0,a.D)(r)||(0,a.D)(t)?1:f}},82114:(e,t,r)=>{r.d(t,{A:()=>m,f:()=>u});var n=r(77468),s=r(27810),o=r(38980),a=r(89991),i=r(96183),l=r(32341);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0)===l.pu.ALL?e:e.filter((e=>{let{SystemState:t}=e;return t&&t!==n.K.Green}))},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0)===i.Uu.All?e:e.filter((e=>{let{StartTime:t}=e;return!t||(0,o.OW)(t)<s.RQ}))},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!t)return e;const r=(0,a.Y)(t);return e.filter((e=>!e.Host||(r.test(e.Host)||r.test(String(e.NodeId)))))};function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{uptimeFilter:t,searchValue:r,problemFilter:n}=arguments.length>1?arguments[1]:void 0,s=u(e,t);return s=d(s,n),s=c(s,r),s}},16124:(e,t,r)=>{r.d(t,{n:()=>o,w:()=>a});var n=r(84029),s=r(96183);const o=e=>{var t;const r=(e.Nodes||[]).map((e=>{const{SystemState:t,...r}=e;return{...r,...(0,s.Ns)(t)}}));return{Nodes:r,NodeGroups:null===(t=e.NodeGroups)||void 0===t?void 0:t.map((e=>{let{GroupName:t,NodeCount:r}=e;if(t&&r)return{name:t,count:Number(r)}})).filter((e=>Boolean(e))),TotalNodes:Number(e.TotalNodes)||r.length,FoundNodes:Number(e.FoundNodes)}},a=(0,n.p)(60,80,["success","warning","danger"])},34695:(e,t,r)=>{r.d(t,{G:()=>n,d:()=>s});const n={all:"all",missing:"missing",space:"space"},s={groups:"groups",nodes:"nodes"}},55993:(e,t,r)=>{r.d(t,{R:()=>s});var n=r(69541);async function s(e,t){let{version:r="v2",shouldUseGroupsHandler:s,...o}=e;if(s&&"v1"!==r){const e=await window.api.getStorageGroups({...o},t);return(0,n._u)(e)}{const e=await window.api.getStorageInfo({version:r,...o},t);return(0,n.S9)(e)}}},89085:(e,t,r)=>{r.d(t,{y:()=>a});var n=r(78759),s=r(55993),o=r(69541);const a=n.h.injectEndpoints({endpoints:e=>({getStorageNodesInfo:e.query({queryFn:async(e,t)=>{let{signal:r}=t;try{const t=await window.api.getNodes({storage:!0,type:"static",...e},{signal:r});return{data:(0,o.Y2)(t)}}catch(n){return{error:n}}},providesTags:["All","StorageData"]}),getStorageGroupsInfo:e.query({queryFn:async(e,t)=>{let{signal:r}=t;try{return{data:await(0,s.R)(e,{signal:r})}}catch(n){return{error:n}}},providesTags:["All","StorageData"]})}),overrideExisting:"throw"})},69541:(e,t,r)=>{r.d(t,{_u:()=>b,Y2:()=>w,S9:()=>N});var n=r(96234),s=r(38392),o=r(53458),a=r(26612),i=r(96183),l=r(61734),d=r(83627),u=r(38980),c=r(69715),m=r(29919),p=r(77668);function h(){var e,t,r,n;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{Whiteboard:i={},PDisk:l,...d}=s,g={...i,...d,VDiskId:i.VDiskId},v=l?function(){var e,t,r;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{Whiteboard:s,...i}=n,l={...s,...i,PDiskId:null===s||void 0===s?void 0:s.PDiskId},d=i.PDiskId||(0,o.CH)(l.NodeId,l.PDiskId),{AllocatedPercent:u,AllocatedSize:m,AvailableSize:h,TotalSize:g}=(0,a.kd)({AvailableSize:l.AvailableSize,TotalSize:l.TotalSize}),v=null!==(e=null===(t=i.Type)||void 0===t?void 0:t.toUpperCase())&&void 0!==e?e:(0,p.y)(null===s||void 0===s?void 0:s.Category),S=(0,c.y)({State:null===s||void 0===s?void 0:s.State,AllocatedPercent:u}),f=null!==(r=i.SlotSize)&&void 0!==r?r:null===s||void 0===s?void 0:s.EnforcedDynamicSlotSize;return{...l,StringifiedId:d,AllocatedPercent:u,AllocatedSize:m,AvailableSize:h,TotalSize:g,Type:v,Severity:S,SlotSize:f}}({...l,NodeId:g.NodeId}):void 0,S=null!==(e=null===v||void 0===v?void 0:v.PDiskId)&&void 0!==e?e:null===i||void 0===i?void 0:i.PDiskId,f=null!==(t=d.VDiskId)&&void 0!==t?t:(0,u.a2)(i.VDiskId),x=(0,m.Z)(g),w=(0,a.Jn)({AvailableSize:null!==(r=g.AvailableSize)&&void 0!==r?r:null===l||void 0===l?void 0:l.AvailableSize,AllocatedSize:g.AllocatedSize}),N=null===(n=d.Donors)||void 0===n?void 0:n.map((e=>h({...e,Whiteboard:{...e.Whiteboard,DonorMode:!0}})));return{...g,...w,PDisk:v,Donors:N,PDiskId:S,StringifiedId:f,Severity:x}}function g(e){const{DiskSpace:t,VDisks:r=[]}=e;return t||(0,o.b2)(Math.max(...r.map((e=>(0,o.Or)(e.DiskSpace)))))}const v=(e,t)=>{var r;const n=(0,a.se)(e);return{...n,StoragePoolName:t,Donors:null===n||void 0===n||null===(r=n.Donors)||void 0===r?void 0:r.map((e=>({...e,StoragePoolName:t})))}},S=e=>{const{VDisks:t=[],PoolName:r,Usage:n=0,Read:s=0,Write:o=0,Used:a=0,Limit:i=0,Degraded:l=0,Kind:d,MediaType:u,GroupID:c,Overall:m,GroupGeneration:p}=e,h=t.map((e=>v(e,r))),S=100*Number(n),f=g(e);return{...e,PoolName:r,GroupId:c,MediaType:u||d,VDisks:h,Usage:S,Overall:m,GroupGeneration:p?String(p):void 0,Read:Number(s),Write:Number(o),Used:Number(a),Limit:Number(i),Degraded:Number(l),DiskSpace:f}},f=(e,t)=>{let r=[];return e?r=e.map(S):null===t||void 0===t||t.forEach((e=>{var t;null===(t=e.Groups)||void 0===t||t.forEach((t=>{r.push(((e,t)=>{var r;let o,i=0,d=0,u=0,c=0,m=0;const{Name:p,MediaType:h}=t;if(e.VDisks)for(const l of e.VDisks){const{Replicated:e,VDiskState:t,AvailableSize:r,AllocatedSize:p,PDisk:h,ReadThroughput:g,WriteThroughput:v}=l,{Type:S,State:f,AvailableSize:x}=(0,a.TD)(h);e&&f===n.w.Normal&&t===s.H.OK||(i+=1);const w=Number(null!==r&&void 0!==r?r:x)||0,N=Number(p)||0;d+=N,u+=w+N,c+=Number(g)||0,m+=Number(v)||0,o=!S||S!==o&&o?"Mixed":S}const S=null===(r=e.VDisks)||void 0===r?void 0:r.map((e=>v(e,p))),f=u?(0,l.I)({Used:d,Limit:u},5):void 0,x=g(e);return{...e,GroupGeneration:e.GroupGeneration?String(e.GroupGeneration):void 0,GroupId:e.GroupID,Overall:e.Overall,VDisks:S,Usage:f,Read:c,Write:m,PoolName:p,Used:d,Limit:u,Degraded:i,MediaType:h||o||void 0,DiskSpace:x}})(t,e))}))})),r},x=e=>{var t,r,s;const o=(null===(t=e.PDisks)||void 0===t?void 0:t.filter((e=>e.State!==n.w.Normal)).length)||0,l=null===(r=e.PDisks)||void 0===r?void 0:r.map((t=>({...(0,a.TD)(t),NodeId:e.NodeId}))),d=null===(s=e.VDisks)||void 0===s?void 0:s.map((t=>({...(0,a.se)(t),NodeId:e.NodeId})));return{...(0,i.Ns)(e.SystemState),NodeId:e.NodeId,DiskSpaceUsage:e.DiskSpaceUsage,PDisks:l,VDisks:d,Missing:o}},w=e=>{const{Nodes:t,TotalNodes:r,FoundNodes:n,NodeGroups:s}=e,o=null===s||void 0===s?void 0:s.map((e=>{let{GroupName:t,NodeCount:r}=e;if(t&&r)return{name:t,count:Number(r)}})).filter((e=>Boolean(e))),a=null===t||void 0===t?void 0:t.map(x);return{nodes:a,total:Number(r)||(null===a||void 0===a?void 0:a.length),found:Number(n),tableGroups:o}},N=e=>{const{StoragePools:t,StorageGroups:r,TotalGroups:n,FoundGroups:s}=e,o=f(r,t);return{groups:o,total:Number(n)||o.length,found:Number(s)}};function b(e){const{FoundGroups:t,TotalGroups:r,StorageGroups:n=[],StorageGroupGroups:s}=e,o=n.map((e=>{const{Usage:t,DiskSpaceUsage:r,Read:n,Write:s,Used:o,Limit:a,MissingDisks:i,VDisks:l=[],Overall:u,LatencyPutTabletLog:c,LatencyPutUserData:m,LatencyGetFast:p}=e,v=l.map(h),S=g(e);return{...e,Usage:t,DiskSpaceUsage:r,Read:Number(n),Write:Number(s),Used:Number(o),Limit:Number(a),LatencyPutTabletLogMs:(0,d.BO)(c),LatencyPutUserDataMs:(0,d.BO)(m),LatencyGetFastMs:(0,d.BO)(p),Degraded:Number(i),Overall:u,VDisks:v,DiskSpace:S}})),a=null===s||void 0===s?void 0:s.map((e=>{let{GroupName:t,GroupCount:r}=e;if(t&&r)return{name:t,count:Number(r)}})).filter((e=>Boolean(e)));return{groups:o,total:Number(r)||o.length,found:Number(t),tableGroups:a}}},96234:(e,t,r)=>{let n;r.d(t,{w:()=>n}),function(e){e.Initial="Initial",e.InitialFormatRead="InitialFormatRead",e.InitialFormatReadError="InitialFormatReadError",e.InitialSysLogRead="InitialSysLogRead",e.InitialSysLogReadError="InitialSysLogReadError",e.InitialSysLogParseError="InitialSysLogParseError",e.InitialCommonLogRead="InitialCommonLogRead",e.InitialCommonLogReadError="InitialCommonLogReadError",e.InitialCommonLogParseError="InitialCommonLogParseError",e.CommonLoggerInitError="CommonLoggerInitError",e.Normal="Normal",e.OpenFileError="OpenFileError",e.ChunkQuotaError="ChunkQuotaError",e.DeviceIoError="DeviceIoError",e.Missing="Missing",e.Timeout="Timeout",e.NodeDisconnected="NodeDisconnected",e.Unknown="Unknown"}(n||(n={}))},38392:(e,t,r)=>{let n;r.d(t,{H:()=>n}),function(e){e.Initial="Initial",e.LocalRecoveryError="LocalRecoveryError",e.SyncGuidRecovery="SyncGuidRecovery",e.SyncGuidRecoveryError="SyncGuidRecoveryError",e.OK="OK",e.PDiskError="PDiskError"}(n||(n={}))},69715:(e,t,r)=>{r.d(t,{y:()=>i});var n=r(77468),s=r(84029),o=r(53443);const a=(0,s.p)(85,95,[n.K.Green,n.K.Yellow,n.K.Red]);function i(e){const t=function(e){return t=e,void 0!==t&&t in o.tH?o.tH[e]:o.i6;var t}(e.State),r=a(e.AllocatedPercent||0);return t!==o.i6&&r?Math.max(t,o.oO[r]):t}},29919:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(53443);function s(e){const{DiskSpace:t,VDiskState:r,FrontQueues:s,Replicated:a}=e;if(!r)return n.i6;const i=o(t),l=function(e){var t;if(!e)return n.i6;return null!==(t=n.mr[e])&&void 0!==t?t:n.i6}(r),d=Math.min(n.oO.Orange,o(s));let u=Math.max(i,l,d);return a||u!==n.oO.Green||(u=n.oO.Blue),u}function o(e){var t;return e&&null!==(t=n.oO[e])&&void 0!==t?t:n.i6}},53443:(e,t,r)=>{r.d(t,{i6:()=>i,mG:()=>a,mr:()=>d,oO:()=>o,s:()=>l,tH:()=>u});var n=r(96234),s=r(38392);const o={Grey:0,Green:1,Blue:2,Yellow:3,Orange:4,Red:5},a=Object.entries(o).reduce(((e,t)=>{let[r,n]=t;return{...e,[n]:r}}),{}),i=o.Grey,l=a[i],d={[s.H.OK]:o.Green,[s.H.Initial]:o.Yellow,[s.H.SyncGuidRecovery]:o.Yellow,[s.H.LocalRecoveryError]:o.Red,[s.H.SyncGuidRecoveryError]:o.Red,[s.H.PDiskError]:o.Red},u={[n.w.Initial]:o.Grey,[n.w.Normal]:o.Green,[n.w.InitialFormatRead]:o.Yellow,[n.w.InitialSysLogRead]:o.Yellow,[n.w.InitialCommonLogRead]:o.Yellow,[n.w.InitialFormatReadError]:o.Red,[n.w.InitialSysLogReadError]:o.Red,[n.w.InitialSysLogParseError]:o.Red,[n.w.InitialCommonLogReadError]:o.Red,[n.w.InitialCommonLogParseError]:o.Red,[n.w.CommonLoggerInitError]:o.Red,[n.w.OpenFileError]:o.Red,[n.w.ChunkQuotaError]:o.Red,[n.w.DeviceIoError]:o.Red}},77668:(e,t,r)=>{r.d(t,{y:()=>s});const n={HDD:"HDD",SSD:"SSD",MVME:"NVME"};function s(e){if(!e)return;const t=function(e,t){const r={};return Object.entries(t).reduce(((t,n)=>{let[s,o]=n;const a=e.length-t,i=a-o;return r[s]=e.substring(i,a)||"0",t+o}),0),r}(BigInt(e).toString(2),{isSolidState:1,kind:55,typeExt:8});if("1"===t.isSolidState)switch(parseInt(t.typeExt,2)){case 0:return n.SSD;case 2:return n.MVME}else if("0"===t.typeExt)return n.HDD}},53458:(e,t,r)=>{r.d(t,{CH:()=>l,FR:()=>d,Iz:()=>o,Or:()=>i,b2:()=>a});var n=r(25665),s=r(53443);function o(e){return"VDiskId"in e}function a(e){return void 0===e?s.s:s.mG[e]||s.s}function i(e){return e?s.oO[e]:0}function l(e,t){if((0,n.D)(e)&&(0,n.D)(t))return`${e}-${t}`}function d(e,t,r){return[e,t,r].join("-")}},26612:(e,t,r)=>{r.d(t,{Jn:()=>u,TD:()=>d,kd:()=>c,se:()=>l});var n=r(38980),s=r(69715),o=r(29919),a=r(77668),i=r(53458);function l(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(0,i.Iz)(t)){const{NodeId:e,PDiskId:r,VSlotId:s}=t;return{StringifiedId:(0,n.a2)({NodeId:e,PDiskId:r,VSlotId:s}),NodeId:e,PDiskId:r,VDiskSlotId:s}}const{PDisk:r,PDiskId:s,VDiskId:a,NodeId:c,Donors:m,AvailableSize:p,AllocatedSize:h,...g}=t,v=r?d({...r,NodeId:null!==(e=null===r||void 0===r?void 0:r.NodeId)&&void 0!==e?e:c}):void 0,S=null!==s&&void 0!==s?s:null===v||void 0===v?void 0:v.PDiskId,f=u({AvailableSize:null!==p&&void 0!==p?p:null===r||void 0===r?void 0:r.AvailableSize,AllocatedSize:h}),x=(0,o.Z)(t),w=(0,n.a2)(a);return{...g,...f,VDiskId:a,NodeId:c,PDiskId:S,PDisk:v,Donors:null===m||void 0===m?void 0:m.map((e=>l({...e,DonorMode:!0}))),Severity:x,StringifiedId:w}}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{AvailableSize:t,TotalSize:r,Category:n,State:o,PDiskId:l,NodeId:d,EnforcedDynamicSlotSize:u,...m}=e,p=(0,i.CH)(l,d),h=(0,a.y)(n),g=c({AvailableSize:t,TotalSize:r}),v=(0,s.y)({State:o,AllocatedPercent:g.AllocatedPercent});return{...m,...g,PDiskId:l,NodeId:d,StringifiedId:p,Type:h,Category:n,State:o,Severity:v,SlotSize:u}}function u(e){let{AvailableSize:t,AllocatedSize:r}=e;const n=Number(t),s=Number(r),o=s+n;return{AvailableSize:n,AllocatedSize:s,TotalSize:o,AllocatedPercent:Math.round(100*s/o)}}function c(e){let{AvailableSize:t,TotalSize:r}=e;const n=Number(t),s=Number(r),o=s-n;return{AvailableSize:n,TotalSize:s,AllocatedSize:o,AllocatedPercent:Math.round(100*o/s)}}},89991:(e,t,r)=>{r.d(t,{A:()=>a,Y:()=>i});var n=r(20560),s=r(78171),o=r.n(s);const a=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.hr)===n.hr?`-${e}`:e},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new RegExp(o()(e),"i")}},84029:(e,t,r)=>{r.d(t,{p:()=>n});const n=(e,t,r)=>n=>0<=n&&n<e?r[0]:e<=n&&n<t?r[1]:t<=n?r[2]:void 0},97485:(e,t,r)=>{r.d(t,{N:()=>o});var n=r(34706),s=r(9951);const o=(e,t,r,o,a)=>{const[i,l]=n.useState((()=>s.r.readUserSettingsValue(t,o)));return{columnsToShow:n.useMemo((()=>e.filter((e=>{const t=e.name,r=i.includes(t),n=null===a||void 0===a?void 0:a.includes(t);return r||n}))),[e,a,i]),columnsToSelect:n.useMemo((()=>e.map((e=>e.name)).map((e=>{const t=null===a||void 0===a?void 0:a.includes(e),n=i.includes(e);return{id:e,title:r[e],selected:t||n,required:t,sticky:t?"start":void 0}}))),[e,r,a,i]),setColumns:n.useCallback((e=>{const r=e.filter((e=>e.selected)).map((e=>e.id));s.r.setUserSettingsValue(t,r),l(r)}),[t])}}},46154:(e,t,r)=>{r.d(t,{M:()=>a});var n=r(34706),s=r(59769),o=r(9951);const a=e=>{const t=n.useCallback((()=>e?o.r.readUserSettingsValue(e,{}):{}),[e]),r=n.useCallback((t=>{e&&o.r.setUserSettingsValue(e,t)}),[e]);return(0,s.M)({saveSizes:r,getSizes:t})}},95440:(e,t,r)=>{function n(e){let{inverseColorize:t,warningThreshold:r=60,dangerThreshold:n=80,colorizeProgress:s,fillWidth:o}=e,a=t?"danger":"good";return s&&(o>r&&o<=n?a="warning":o>n&&(a=t?"good":"danger")),a}r.d(t,{S:()=>n})},61734:(e,t,r)=>{r.d(t,{H:()=>o,I:()=>s});var n=r(84029);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=e.Limit?100*e.Used/e.Limit:0;return Math.floor(r/t)*t},o=(0,n.p)(80,85,["success","warning","danger"])},83023:(e,t,r)=>{function n(e,t){const r=e.reduce(((e,r)=>(t[r].forEach((t=>{e.add(t)})),e)),new Set);return Array.from(r).sort()}r.d(t,{w:()=>n})},55973:(e,t,r)=>{r.d(t,{FW:()=>a,KR:()=>i});var n=r(77468),s=r(9038);const o={[s.g.Dead]:n.K.Red,[s.g.Created]:n.K.Yellow,[s.g.ResolveStateStorage]:n.K.Yellow,[s.g.Candidate]:n.K.Yellow,[s.g.BlockBlobStorage]:n.K.Yellow,[s.g.WriteZeroEntry]:n.K.Yellow,[s.g.Restored]:n.K.Yellow,[s.g.Discover]:n.K.Yellow,[s.g.Lock]:n.K.Yellow,[s.g.Stopped]:n.K.Yellow,[s.g.ResolveLeader]:n.K.Yellow,[s.g.RebuildGraph]:n.K.Yellow,[s.g.Deleted]:n.K.Green,[s.g.Active]:n.K.Green},a=(Object.keys(s.g),Object.entries(o).reduce(((e,t)=>{let[r,n]=t;return e[n]?e[n].push(r):e[n]=[r],e}),{}),e=>{if(!e)return n.K.Grey;return t=e,Object.values(n.K).includes(t)?e:o[e];var t});function i(e){if(!e)return"unknown";switch(e){case s.g.Dead:return"danger";case s.g.Active:case s.g.Deleted:return"success";default:return"warning"}}}}]);