"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[3230],{90053:(e,t,s)=>{s.d(t,{E:()=>h});var n=s(8873),r=s(84476),o=s(24555),a=s(21334),i=s(77506),l=s(90182),d=s(48372);const u=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),c=(0,d.g4)("ydb-diagnostics-autorefresh-control",{en:u});var m=s(60712);const p=(0,i.cn)("auto-refresh-control");function h({className:e}){const t=(0,l.YQ)(),[s,i]=(0,l.Nt)();return(0,m.jsxs)("div",{className:p(null,e),children:[(0,m.jsx)(r.$,{view:"flat-secondary",onClick:()=>{t(a.F.util.invalidateTags(["All"]))},extraProps:{"aria-label":c("Refresh")},children:(0,m.jsx)(r.$.Icon,{children:(0,m.jsx)(n.A,{})})}),(0,m.jsxs)(o.l,{value:[String(s)],onUpdate:e=>{i(Number(e))},width:85,qa:"ydb-autorefresh-select",children:[(0,m.jsx)(o.l.Option,{value:"0",children:c("None")}),(0,m.jsx)(o.l.Option,{value:"15000",children:c("15 sec")}),(0,m.jsx)(o.l.Option,{value:"60000",children:c("1 min")}),(0,m.jsx)(o.l.Option,{value:"120000",children:c("2 min")}),(0,m.jsx)(o.l.Option,{value:"300000",children:c("5 min")})]})]})}},71661:(e,t,s)=>{s.d(t,{s:()=>l});var n=s(84375),r=s(77506),o=s(60712);const a=(0,r.cn)("ydb-cell-with-popover"),i=100;function l({children:e,className:t,wrapperClassName:s,fullWidth:r,...l}){return(0,o.jsx)("div",{className:a({fullWidth:r},s),children:(0,o.jsx)(n.A,{delayClosing:i,delayOpening:i,className:a("popover",{"full-width":r},t),...l,children:e})})}},24543:(e,t,s)=>{s.d(t,{u:()=>a});var n=s(59284),r=s(39238),o=s(60712);const a=({children:e,content:t,className:s,pinOnClick:a,hasArrow:i=!0,placement:l=["top","bottom"],...d})=>{const[u,c]=n.useState(!1),[m,p]=n.useState(!1),h=n.useRef(null);return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(r.z,{anchorRef:h,open:m||u,placement:l,hasArrow:i,onOutsideClick:()=>{p(!1)},...d,children:t}),(0,o.jsx)("span",{className:s,ref:h,onClick:a?()=>{p(!0)}:void 0,onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},children:e})]})}},88226:(e,t,s)=>{s.d(t,{V:()=>d});s(59284);var n=s(77506),r=s(76086),o=s(7187),a=s(90182),i=s(60712);const l=(0,n.cn)("storage-disk-progress-bar");function d({diskAllocatedPercent:e=-1,severity:t,compact:s,faded:n,inactive:d,empty:u,content:c,className:m}){const[p]=(0,a.iK)(r.TJ),h={inverted:p,compact:s,faded:n,empty:u,inactive:d},g=void 0!==t&&(0,o.XY)(t);g&&(h[g.toLocaleLowerCase()]=!0);return(0,i.jsxs)("div",{className:l(h,m),role:"meter","aria-label":"Disk allocated space","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e,children:[(()=>{if(s)return(0,i.jsx)("div",{className:l("fill-bar",h),style:{width:"100%"}});const t=p?100-e:e;return e>=0?(0,i.jsx)("div",{className:l("fill-bar",h),style:{width:`${t}%`}}):null})(),c||(!s&&e>=0?(0,i.jsx)("div",{className:l("title"),children:`${Math.round(e)}%`}):null)]})}},53755:(e,t,s)=>{s.d(t,{T:()=>l});var n=s(47665),r=s(77506);const o=(0,s(48372).g4)("ydb-entities-count",{ru:{of:"\u0438\u0437"},en:{of:"of"}});var a=s(60712);const i=(0,r.cn)("ydb-entities-count"),l=({total:e,current:t,label:s,loading:r,className:l})=>{let d="";return s&&(d+=`${s}: `),r?d+="...":(d+=`${t}`,e&&Number(e)!==Number(t)&&(d+=` ${o("of")} ${e}`)),(0,a.jsx)(n.J,{theme:"info",size:"m",className:i(null,l),children:d})}},10508:(e,t,s)=>{s.d(t,{c:()=>c});var n=s(67884),r=s(96873),o=s(54090),a=s(77506),i=s(82015),l=s(33775),d=s(60712);const u=(0,a.cn)("entity-status");function c({status:e=o.m.Grey,name:t="",label:s,path:a,iconPath:c,size:m="s",mode:p="color",showStatus:h=!0,externalLink:g=!1,withLeftTrim:v=!1,hasClipboardButton:f,clipboardButtonAlwaysVisible:S=!1,className:N}){const k=()=>h?(0,d.jsx)(l.k,{className:u("icon"),status:e,size:m,mode:p}):null;return(0,d.jsxs)("div",{className:u(null,N),children:[c?(b=c,(0,d.jsx)(n.N,{target:"_blank",href:b,children:k()})):k(),s&&(0,d.jsx)("span",{title:s,className:u("label",{size:m,state:e.toLowerCase()}),children:s}),(a||t)&&(0,d.jsxs)("div",{className:u("wrapper",{"with-button":f}),children:[(0,d.jsx)("span",{className:u("link",{"with-left-trim":v}),title:t,children:a?g?(0,d.jsx)(n.N,{className:u("name"),href:a,children:t}):(0,d.jsx)(i.E,{className:u("name"),to:a,children:t}):t&&(0,d.jsx)("span",{className:u("name"),children:t})}),f&&(0,d.jsx)("div",{className:u("controls-wrapper",{visible:S}),children:(0,d.jsx)(r.b,{text:t,size:"xs",view:"normal",className:u("clipboard-button",{visible:S})})})]})]});var b}},13096:(e,t,s)=>{s.d(t,{P:()=>u});var n=s(59284),r=s(39238),o=s(43781),a=s.n(o),i=s(77506),l=s(60712);const d=(0,i.cn)("hover-popup"),u=({children:e,popupContent:t,showPopup:s,offset:o,anchorRef:i,onShowPopup:u,onHidePopup:c,placement:m=["top","bottom"],contentClassName:p})=>{const[h,g]=n.useState(!1),v=n.useRef(null),f=n.useMemo((()=>a()((()=>{g(!0),null===u||void 0===u||u()}),100)),[u]),S=n.useCallback((()=>{g(!1),null===c||void 0===c||c()}),[c]),N=n.useMemo((()=>a()(S,100)),[S]),k=f,[b,y]=n.useState(!1),[x,w]=n.useState(!1),D=n.useCallback((()=>{y(!0)}),[]),I=n.useCallback((()=>{y(!1)}),[]),C=n.useCallback((()=>{w(!0)}),[]),j=n.useCallback((()=>{w(!1)}),[]),P=n.useCallback((()=>{w(!1),y(!1),S()}),[S]),A=h||s||b||x;return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)("span",{ref:v,onMouseEnter:k,onMouseLeave:()=>{f.cancel(),N()},children:e}),(0,l.jsx)(r.z,{contentClassName:d(null,p),anchorRef:i||v,open:A,onMouseEnter:D,onMouseLeave:I,onEscapeKeyDown:P,onBlur:j,placement:m,hasArrow:!0,offset:o||[0,12],children:(0,l.jsx)("div",{onContextMenu:C,children:t})})]})}},73473:(e,t,s)=>{s.d(t,{S:()=>b});var n=s(38501),r=s(40336),o=s(46549),a=s(77506),i=s(76086),l=s(35736),d=s(41650),u=s(13096),c=s(15132),m=s(48372);const p=JSON.parse('{"text_external-consumption":"External Consumption","text_allocator-caches":"Allocator Caches","text_shared-cache":"Shared Cache","text_memtable":"MemTable","text_query-execution":"Query Execution","text_usage":"Usage","text_soft-limit":"Soft Limit","text_hard-limit":"Hard Limit","text_other":"Other"}'),h=(0,m.g4)("ydb-memory-viewer",{en:p});function g(e){return(0,d.kf)(e)?parseFloat(String(e)):void 0}var v=s(60712);const f=1,S=.01*i.J7,N=(0,a.cn)("memory-viewer"),k=(e,t)=>[(0,o.z3)({value:e,size:"gb",withSizeLabel:!1,precision:2}),(0,o.z3)({value:t,size:"gb",withSizeLabel:!0,precision:1})];function b({stats:e,percents:t,formatValues:s,className:a,warningThreshold:i=60,dangerThreshold:m=80}){var p;const b=null!==(p=e.AnonRss)&&void 0!==p?p:function(e){const t=g(e.AllocatedMemory)||0,s=g(e.AllocatorCachesMemory)||0;return String(t+s)}(e),y=e.HardLimit,x=(0,n.D)();let w=Math.round(parseFloat(String(b))/parseFloat(String(y))*100)||0;w=w>100?100:w;let D=b,I=y,C="/";t?(D=w+"%",I="",C=""):s&&([D,I]=s(Number(b),Number(y)));const j=function(e,t){const s=[{label:h("text_shared-cache"),key:"SharedCacheConsumption",value:g(e.SharedCacheConsumption),capacity:g(e.SharedCacheLimit),isInfo:!1},{label:h("text_query-execution"),key:"QueryExecutionConsumption",value:g(e.QueryExecutionConsumption),capacity:g(e.QueryExecutionLimit),isInfo:!1},{label:h("text_memtable"),key:"MemTableConsumption",value:g(e.MemTableConsumption),capacity:g(e.MemTableLimit),isInfo:!1},{label:h("text_allocator-caches"),key:"AllocatorCachesMemory",value:g(e.AllocatorCachesMemory),isInfo:!1}],n=s.filter((e=>void 0!==e.value)).reduce(((e,t)=>e+t.value),0),r=Math.max(0,t-n);return s.push({label:h("text_other"),key:"Other",value:r,isInfo:!1}),s.push({label:h("text_external-consumption"),key:"ExternalConsumption",value:g(e.ExternalConsumption),isInfo:!0},{label:h("text_usage"),key:"Usage",value:t,isInfo:!0},{label:h("text_soft-limit"),key:"SoftLimit",value:g(e.SoftLimit),isInfo:!0},{label:h("text_hard-limit"),key:"HardLimit",value:g(e.HardLimit),isInfo:!0}),s.filter((e=>void 0!==e.value))}(e,Number(b)),P=(0,l.w)({fillWidth:w,warningThreshold:i,dangerThreshold:m,colorizeProgress:!0});let A=0;return(0,v.jsx)(u.P,{popupContent:(0,v.jsx)(r.u,{responsive:!0,children:j.map((({label:e,value:t,capacity:s,key:n})=>(0,v.jsx)(r.u.Item,{name:(0,v.jsxs)("div",{className:N("container"),children:[(0,v.jsx)("div",{className:N("legend",{type:n})}),(0,v.jsx)("div",{className:N("name"),children:e})]}),children:s?(0,v.jsx)(c.O,{value:t,capacity:s,formatValues:k,colorizeProgress:!0}):(0,o.z3)({value:t,size:"gb",withSizeLabel:!0,precision:2})},e)))}),children:(0,v.jsx)("div",{className:N({theme:x,status:P},a),children:(0,v.jsxs)("div",{className:N("progress-container"),children:[j.filter((({isInfo:e})=>!e)).map((e=>{if(e.value<S)return null;const t=Math.max((s=e.value,b?s/parseFloat(String(y))*100:0),f);var s;const n=A;return A+=t,(0,v.jsx)("div",{className:N("segment",{type:e.key}),style:{width:`${t}%`,left:`${n}%`}},e.key)})),(0,v.jsx)("div",{className:N("text"),children:(0,d.kf)(y)?`${D} ${C} ${I}`:D})]})})})}},96927:(e,t,s)=>{s.d(t,{O:()=>f,f:()=>v});var n=s(59284),r=s(78668),o=s(24600),a=s(54090),i=s(7435),l=s(76086),d=s(31684),u=s(90182),c=s(41650),m=s(60073),p=s(25196),h=s(60712);const g=[a.m.Orange,a.m.Red,a.m.Yellow],v=(e,t,s)=>{const{AvailableSize:n,TotalSize:r,State:o,PDiskId:a,NodeId:u,StringifiedId:m,Path:v,Realtime:f,Type:S,Device:N}=e,k=[{label:"PDisk",value:null!==m&&void 0!==m?m:l.Pd},{label:"State",value:o||"not available"},{label:"Type",value:S||"unknown"}];if(u&&k.push({label:"Node Id",value:u}),t&&k.push({label:"Host",value:t}),v&&k.push({label:"Path",value:v}),(0,c.kf)(r)&&k.push({label:"Available",value:`${(0,c.wb)(n)} of ${(0,c.wb)(r)}`}),f&&g.includes(f)&&k.push({label:"Realtime",value:f}),N&&g.includes(N)&&k.push({label:"Device",value:N}),s&&(0,i.f8)(u)&&(0,i.f8)(a)){const e=(0,d.ar)({nodeId:u,pDiskId:a});k.push({label:"Links",value:(0,h.jsx)(p.K,{title:"Developer UI",url:e})})}return k},f=({data:e})=>{const t=(0,u.N4)(r._5),s=(0,u.N4)(o.E),a=(0,i.f8)(e.NodeId)?null===s||void 0===s?void 0:s.get(e.NodeId):void 0,l=n.useMemo((()=>v(e,a,t)),[e,a,t]);return(0,h.jsx)(m.z_,{title:"PDisk",info:l,size:"s"})}},40427:(e,t,s)=>{s.d(t,{k5:()=>E});var n=s(59284),r=s(89073);const o=s(21334).F.injectEndpoints({endpoints:function(e){return{fetchTableChunk:e.query({queryFn:async({offset:e,limit:t,sortParams:s,filters:n,columnsIds:r,fetchData:o},{signal:a})=>{try{return{data:await o({limit:t,offset:e,filters:n,sortParams:s,columnsIds:r,signal:a})}}catch(i){return{error:i}}},providesTags:["All"]})}}});var a=s(7435),i=s(90182),l=s(44508),d=s(89169);const u=!0;const c=(0,s(77506).cn)("ydb-paginated-table");var m=s(60712);const p=({children:e,className:t,height:s,width:n,align:r="left",resizeable:o})=>(0,m.jsx)("td",{className:c("row-cell",{align:r},t),style:{height:`${s}px`,width:`${n}px`,maxWidth:o?`${n}px`:void 0},children:e}),h=({index:e,columns:t,height:s})=>(0,m.jsx)("tr",{className:c("row",{loading:!0}),children:t.map((t=>{var n;const r=null!==(n=t.resizeable)&&void 0!==n?n:u;return(0,m.jsx)(p,{height:s,width:t.width,align:t.align,className:t.className,resizeable:r,children:(0,m.jsx)(d.E,{className:c("row-skeleton"),style:{width:"80%",height:"50%"}})},`${t.name}${e}`)}))}),g=({row:e,index:t,columns:s,getRowClassName:n,height:r})=>{const o=null===n||void 0===n?void 0:n(e);return(0,m.jsx)("tr",{className:c("row",o),children:s.map((s=>{var n;const o=null!==(n=s.resizeable)&&void 0!==n?n:u;return(0,m.jsx)(p,{height:r,width:s.width,align:s.align,className:s.className,resizeable:o,children:s.render({row:e,index:t})},`${s.name}${t}`)}))})},v=({columns:e,children:t})=>(0,m.jsx)("tr",{className:c("row",{empty:!0}),children:(0,m.jsx)("td",{colSpan:e.length,className:c("td"),children:t})});var f=s(48372);const S=JSON.parse('{"empty":"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}'),N=(0,f.g4)("ydb-paginated-table",{ru:S,en:{empty:"No data"}});const k=n.memo;const b=k((function({id:e,chunkSize:t,calculatedCount:s,rowHeight:r,columns:d,fetchData:u,tableName:c,filters:p,sortParams:f,getRowClassName:S,renderErrorMessage:k,renderEmptyDataMessage:b,onDataFetched:y,isActive:x}){var w;const[D,I]=n.useState(!0),[C]=(0,i.Nt)(),j={offset:e*t,limit:t,fetchData:u,filters:p,sortParams:f,columnsIds:d.map((e=>e.name)),tableName:c};o.useFetchTableChunkQuery(j,{skip:D||!x,pollingInterval:C});const{currentData:P,error:A}=o.endpoints.fetchTableChunk.useQueryState(j);n.useEffect((()=>{let e=0;return x&&D&&(e=window.setTimeout((()=>{I(!1)}),200)),()=>{window.clearTimeout(e)}}),[x,D]),n.useEffect((()=>{if(P&&x){const{total:e=0,found:t=0}=P;y(e,t)}}),[P,x,y]);const E=(null===P||void 0===P||null===(w=P.data)||void 0===w?void 0:w.length)||s;return(0,m.jsx)("tbody",{id:e.toString(),style:{height:E*r+"px",display:x?"table-row-group":"block"},children:(()=>{var e;if(!x)return null;if(!P){if(A){const e=A;return(0,m.jsx)(v,{columns:d,children:k?k(e):(0,m.jsx)(l.o,{error:e})})}return(0,a._e)(E).map((e=>(0,m.jsx)(h,{columns:d,height:r,index:e},e)))}return null!==(e=P.data)&&void 0!==e&&e.length?P.data.map(((e,t)=>(0,m.jsx)(g,{index:t,row:e,columns:d,height:r,getRowClassName:S},t))):(0,m.jsx)(v,{columns:d,children:b?b():N("empty")})})()})}));function y({minWidth:e,maxWidth:t,getCurrentColumnWidth:s,onResize:r}){const o=n.useRef(null),[a,i]=n.useState(!1);return n.useEffect((()=>{const n=o.current;if(!n)return;let a,l,d;const u=function(e){let t,s=null;return function(...n){t=n,"number"!==typeof s&&(s=requestAnimationFrame((()=>{e(...t),s=null})))}}((s=>{if(x(s),"number"!==typeof a||"number"!==typeof l)return;const n=s.clientX-a,o=function(e,t=40,s=1/0){return Math.max(t,Math.min(e,s))}(l+n,e,t);o!==d&&(d=o,null===r||void 0===r||r(d))})),c=e=>{x(e),void 0!==d&&(null===r||void 0===r||r(d)),i(!1),a=void 0,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)},m=e=>{l=s(),x(e),a=e.clientX,i(!0),document.addEventListener("mousemove",u),document.addEventListener("mouseup",c)};return n.addEventListener("mousedown",m),()=>{n.removeEventListener("mousedown",m),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)}}),[r,e,t,s]),(0,m.jsx)("span",{ref:o,className:c("resize-handler",{resizing:a}),onClick:e=>x(e)})}function x(e){e.preventDefault(),e.stopPropagation()}const w=({order:e})=>(0,m.jsx)("svg",{className:c("sort-icon",{desc:-1===e}),viewBox:"0 0 10 6",width:"10",height:"6",children:(0,m.jsx)("path",{fill:"currentColor",d:"M0 5h10l-5 -5z"})}),D=({sortOrder:e,sortable:t,defaultSortOrder:s})=>t?(0,m.jsx)("span",{className:c("sort-icon-container",{shadow:!e}),children:(0,m.jsx)(w,{order:e||s})}):null,I=({column:e,resizeable:t,sortOrder:s,defaultSortOrder:r,onSort:o,rowHeight:a,onCellMount:i,onCellUnMount:l,onColumnsResize:d})=>{var u;const p=n.useRef(null);n.useEffect((()=>{const e=p.current;return e&&(null===i||void 0===i||i(e)),()=>{e&&(null===l||void 0===l||l(e))}}),[i,l]);const h=n.useCallback((()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect().width}),[]),g=n.useCallback((t=>{null===d||void 0===d||d(e.name,t)}),[d,e.name]),v=null!==(u=e.header)&&void 0!==u?u:e.name,f={height:`${a}px`,width:`${e.width}px`,minWidth:t?`${e.width}px`:void 0,maxWidth:t?`${e.width}px`:void 0};return(0,m.jsxs)("th",{ref:p,className:c("head-cell-wrapper"),style:f,children:[(0,m.jsxs)("div",{className:c("head-cell",{align:e.align,sortable:e.sortable},e.className),onClick:()=>{e.sortable&&(null===o||void 0===o||o(e.name))},children:[(0,m.jsx)("div",{className:c("head-cell-content"),children:v}),(0,m.jsx)(D,{sortOrder:s,sortable:e.sortable,defaultSortOrder:r})]}),t?(0,m.jsx)(y,{maxWidth:e.resizeMaxWidth,minWidth:e.resizeMinWidth,getCurrentColumnWidth:h,onResize:g}):null]})},C=({columns:e,onSort:t,onColumnsResize:s,defaultSortOrder:r=-1,rowHeight:o=41})=>{const[a,i]=n.useState({}),l=e=>{let s={};if(e===a.columnId){if(a.sortOrder&&a.sortOrder!==r)return i(s),void(null===t||void 0===t||t(s));s={sortOrder:1===a.sortOrder?-1:1,columnId:e}}else s={sortOrder:r,columnId:e};null===t||void 0===t||t(s),i(s)};return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)("colgroup",{children:e.map((e=>(0,m.jsx)("col",{style:{width:`${e.width}px`}},e.name)))}),(0,m.jsx)("thead",{className:c("head"),children:(0,m.jsx)("tr",{children:e.map((e=>{var t;const n=a.columnId===e.name?a.sortOrder:void 0,i=s&&(null!==(t=e.resizeable)&&void 0!==t?t:u);return(0,m.jsx)(I,{column:e,resizeable:i,sortOrder:n,defaultSortOrder:r,onSort:l,rowHeight:o,onColumnsResize:s},e.name)}))})})]})};var j=s(13847);const P=({limit:e,initialEntitiesCount:t,fetchData:s,filters:o,tableName:a,columns:i,getRowClassName:l,rowHeight:d=41,parentRef:u,initialSortParams:p,onColumnsResize:h,renderControls:g,renderErrorMessage:v,renderEmptyDataMessage:f,containerClassName:S})=>{const N=t||0,k=t||1,[y,x]=n.useState(p),[w,D]=n.useState(N),[I,P]=n.useState(k),[A,E]=n.useState(!0),T=n.useRef(null),U=(({parentRef:e,tableRef:t,totalItems:s,rowHeight:r,chunkSize:o,overscanCount:a=1})=>{const i=n.useMemo((()=>Math.ceil(s/o)),[o,s]),[l,d]=n.useState(0),[u,c]=n.useState(Math.min(a,Math.max(i-1,0))),m=n.useCallback((()=>{const s=null===e||void 0===e?void 0:e.current,n=t.current;if(!s||!n)return null;const l=function(e,t){let s=e,n=0;for(;s&&s!==t;)n+=s.offsetTop,s=s.offsetParent;return n}(n,s),d=s.scrollTop,u=Math.max(d-l,0),c=u+s.clientHeight;return{start:Math.max(Math.floor(u/r/o)-a,0),end:Math.min(Math.floor(c/r/o)+a,Math.max(i-1,0))}}),[e,t,r,o,a,i]),p=n.useCallback((()=>{const e=m();e&&(d(e.start),c(e.end))}),[m]);return n.useEffect((()=>{const t=null===e||void 0===e?void 0:e.current;if(!t)return;const s=(0,j.throttle)(p,100,{leading:!0,trailing:!0});return t.addEventListener("scroll",s),()=>{t.removeEventListener("scroll",s),s.cancel()}}),[p,e]),n.useMemo((()=>{const e=Array(i).fill(!1);for(let t=l;t<=u;t++)e[t]=!0;return e}),[i,l,u])})({parentRef:u,tableRef:T,totalItems:I,rowHeight:d,chunkSize:e}),G=n.useMemo((()=>I?I%e||e:1),[I,e]),R=n.useCallback(((e,t)=>{D(e),P(t),E(!1)}),[]);n.useLayoutEffect((()=>{D(N),P(k),E(!0),null!==u&&void 0!==u&&u.current&&u.current.scrollTo(0,0)}),[o,k,N,u]);const L=()=>(0,m.jsxs)("table",{className:c("table"),children:[(0,m.jsx)(C,{columns:i,onSort:x,onColumnsResize:h}),U.map(((t,n)=>(0,m.jsx)(b,{id:n,calculatedCount:n===U.length-1?G:e,chunkSize:e,rowHeight:d,columns:i,fetchData:s,filters:o,tableName:a,sortParams:y,getRowClassName:l,renderErrorMessage:v,renderEmptyDataMessage:f,onDataFetched:R,isActive:t},n)))]});return(0,m.jsx)("div",{ref:T,className:c(null,S),children:g?(0,m.jsxs)(r.L,{children:[(0,m.jsx)(r.L.Controls,{children:g({inited:!A,totalEntities:w,foundEntities:I})}),(0,m.jsx)(r.L.Table,{children:L()})]}):L()})};var A=s(16819);function E({columnsWidthLSKey:e,columns:t,...s}){const[n,r]=(0,A.a)(e),o=function(e,t){return e.map((e=>{var s;return{...e,width:null!==(s=t[e.name])&&void 0!==s?s:e.width}}))}(t,n);return(0,m.jsx)(P,{columns:o,onColumnsResize:r,containerClassName:c("resizeable-table-container"),...s})}},48295:(e,t,s)=>{s.d(t,{_:()=>u});var n=s(77506),r=s(24543),o=s(80176),a=s(60712);const i=(0,n.cn)("ydb-pool-bar"),l=({data:e={}})=>{const{Usage:t=0}=e,s=Math.min(100*t,100),n=(e=>e>=75?"danger":e>=50&&e<75?"warning":"normal")(s);return(0,a.jsx)(r.u,{className:i({type:n}),content:(0,a.jsx)(o.HG,{data:e,className:i("popup-content")}),children:(0,a.jsx)("div",{style:{height:`${s}%`},className:i("value",{type:n})})})},d=(0,n.cn)("ydb-pools-graph"),u=({pools:e=[]})=>(0,a.jsx)("div",{className:d(),children:e.map(((e,t)=>(0,a.jsx)(l,{data:e},t)))})},15132:(e,t,s)=>{s.d(t,{O:()=>m});var n=s(38501),r=s(77506),o=s(86200),a=s(35736),i=s(41650),l=s(60712);const d=(0,r.cn)("progress-viewer"),u=e=>(0,o.ZV)((0,o.CR)(Number(e),2)),c=(e,t)=>[u(e),u(t)];function m({value:e,capacity:t,formatValues:s=c,percents:r,className:o,size:u="xs",colorizeProgress:m,inverseColorize:p,warningThreshold:h=60,dangerThreshold:g=80,hideCapacity:v}){const f=(0,n.D)();let S=Math.round(parseFloat(String(e))/parseFloat(String(t))*100)||0;S=S>100?100:S;let N=e,k=t,b="/";r?(N=S+"%",k="",b=""):s&&([N,k]=s(Number(e),Number(t)));const y=(0,a.w)({fillWidth:S,warningThreshold:h,dangerThreshold:g,colorizeProgress:m,inverseColorize:p});m&&!(0,i.kf)(t)&&(S=100);const x={width:S+"%"};return(0,i.kf)(e)?(0,l.jsxs)("div",{className:d({size:u,theme:f,status:y},o),children:[(0,l.jsx)("div",{className:d("line"),style:x}),(0,l.jsx)("span",{className:d("text"),children:(0,i.kf)(t)&&!v?`${N} ${b} ${k}`:N})]}):(0,l.jsx)("div",{className:`${d({size:u})} ${o} error`,children:"no data"})}},17594:(e,t,s)=>{s.d(t,{l:()=>d});var n=s(69024),r=s(4557),o=s(77506),a=s(16819),i=s(60712);const l=(0,o.cn)("ydb-resizeable-data-table");function d({columnsWidthLSKey:e,columns:t,settings:s,wrapperClassName:o,...d}){const[u,c]=(0,a.a)(e),m=(0,n.j)(t,u),p={...s,defaultResizeable:!0};return(0,i.jsx)("div",{className:l(null,o),children:(0,i.jsx)(r.Ay,{theme:"yandex-cloud",columns:m,onResize:c,settings:p,...d})})}},41775:(e,t,s)=>{s.d(t,{v:()=>l});var n=s(59284),r=s(28664),o=s(77506),a=s(60712);const i=(0,o.cn)("ydb-search"),l=({onChange:e,value:t="",width:s,className:o,debounce:l=200,placeholder:d})=>{const[u,c]=n.useState(t),m=n.useRef();n.useEffect((()=>{c((e=>e!==t?t:e))}),[t]);return(0,a.jsx)(r.k,{hasClear:!0,autoFocus:!0,style:{width:s},className:i(null,o),placeholder:d,value:u,onUpdate:t=>{c(t),window.clearTimeout(m.current),m.current=window.setTimeout((()=>{null===e||void 0===e||e(t)}),l)}})}},33775:(e,t,s)=>{s.d(t,{k:()=>m});var n=s(45720),r=s(16929),o=s(71153),a=s(99991),i=s(54090),l=s(77506),d=s(60712);const u=(0,l.cn)("ydb-status-icon"),c={[i.m.Blue]:n.A,[i.m.Yellow]:r.A,[i.m.Orange]:o.A,[i.m.Red]:r.A};function m({status:e=i.m.Grey,size:t="s",mode:s="color",className:n}){const r={state:e.toLowerCase(),size:t};return"icons"===s&&e in c?(0,d.jsx)(a.I,{className:u("status-icon",r,n),data:c[e]}):(0,d.jsx)("div",{className:u("status-color",r,n)})}},19228:(e,t,s)=>{s.d(t,{Q:()=>l});var n=s(89169),r=s(77506),o=s(66781),a=s(60712);const i=(0,r.cn)("table-skeleton"),l=({rows:e=2,delay:t=600,className:s})=>{const[r]=(0,o.y)(t);return(0,a.jsxs)("div",{className:i("wrapper",{hidden:!r},s),children:[(0,a.jsxs)("div",{className:i("row"),children:[(0,a.jsx)(n.E,{className:i("col-1")}),(0,a.jsx)(n.E,{className:i("col-2")}),(0,a.jsx)(n.E,{className:i("col-3")}),(0,a.jsx)(n.E,{className:i("col-4")}),(0,a.jsx)(n.E,{className:i("col-5")})]}),[...new Array(e)].map(((e,t)=>(0,a.jsx)("div",{className:i("row"),children:(0,a.jsx)(n.E,{className:i("col-full")})},`skeleton-row-${t}`)))]})}},89073:(e,t,s)=>{s.d(t,{L:()=>i});var n=s(77506),r=s(19228),o=s(60712);const a=(0,n.cn)("ydb-table-with-controls-layout"),i=({children:e,className:t})=>(0,o.jsx)("div",{className:a(null,t),children:e});i.Controls=function({children:e,className:t}){return(0,o.jsx)("div",{className:a("controls-wrapper"),children:(0,o.jsx)("div",{className:a("controls",t),children:e})})},i.Table=function({children:e,loading:t,className:s}){return t?(0,o.jsx)(r.Q,{className:a("loader")}):(0,o.jsx)("div",{className:a("table",s),children:e})}},64934:(e,t,s)=>{s.d(t,{j:()=>a});var n=s(44433),r=s(78034),o=s(60712);const a=({value:e,onChange:t,className:s})=>(0,o.jsxs)(n.a,{value:e,onUpdate:t,className:s,children:[(0,o.jsx)(n.a.Option,{value:r.cW.All,children:r.DG[r.cW.All]}),(0,o.jsx)(n.a.Option,{value:r.cW.SmallUptime,children:r.DG[r.cW.SmallUptime]})]})},13342:(e,t,s)=>{s.d(t,{U:()=>i});var n=s(47665),r=s(77506),o=s(60712);const a=(0,r.cn)("ydb-usage-label");function i({value:e,overloadThreshold:t=90,theme:s,...r}){return(0,o.jsxs)(n.J,{theme:s,className:a({overload:Number(e)>=t}),...r,children:[e||0,"%"]})}},8809:(e,t,s)=>{s.d(t,{y:()=>P});var n=s(77506),r=s(88226),o=s(13096),a=s(44294),i=s(59284),l=s(47665),d=s(78668),u=s(24600),c=s(54090),m=s(7435),p=s(76086),h=s(31684),g=s(7187),v=s(90182),f=s(41650),S=s(60073),N=s(25196),k=s(96927),b=s(29819),y=s(92459),x=s(86200);function w(e){let t;const s=(0,g.NJ)(e)?e.VDiskSlotId:e.VSlotId;return(0,m.f8)(s)&&(0,m.f8)(e.PDiskId)&&(0,m.f8)(e.NodeId)?t=(0,y.yX)(s,e.PDiskId,e.NodeId):(0,m.f8)(e.NodeId)&&(0,g.NJ)(e)&&(t=(0,y.KY)(y.Ay.node,{id:e.NodeId,activeTab:b.mX},{pdiskId:e.PDiskId,vdiskId:(0,x.U9)(e.VDiskId)})),t}var D=s(60712);const I=(0,n.cn)("vdisk-storage-popup"),C=({data:e})=>{const t=(0,g.NJ)(e),s=(0,v.N4)(d._5),n=i.useMemo((()=>t?((e,t)=>{var s,n,r,o;const{NodeId:a,PDiskId:i,VDiskSlotId:l,StringifiedId:d,VDiskState:u,SatisfactionRank:p,DiskSpace:g,FrontQueues:v,Replicated:S,UnsyncedVDisks:k,AllocatedSize:b,ReadThroughput:y,WriteThroughput:x,StoragePoolName:w}=e,I=[{label:"VDisk",value:d},{label:"State",value:null!==u&&void 0!==u?u:"not available"}];var C,j;if(w&&I.push({label:"StoragePool",value:w}),p&&(null===(s=p.FreshRank)||void 0===s?void 0:s.Flag)!==c.m.Green&&I.push({label:"Fresh",value:null===(C=p.FreshRank)||void 0===C?void 0:C.Flag}),p&&(null===(n=p.LevelRank)||void 0===n?void 0:n.Flag)!==c.m.Green&&I.push({label:"Level",value:null===(j=p.LevelRank)||void 0===j?void 0:j.Flag}),p&&null!==(r=p.FreshRank)&&void 0!==r&&r.RankPercent&&I.push({label:"Fresh",value:p.FreshRank.RankPercent}),p&&null!==(o=p.LevelRank)&&void 0!==o&&o.RankPercent&&I.push({label:"Level",value:p.LevelRank.RankPercent}),g&&g!==c.m.Green&&I.push({label:"Space",value:g}),v&&v!==c.m.Green&&I.push({label:"FrontQueues",value:v}),S||I.push({label:"Replicated",value:"NO"}),k&&I.push({label:"UnsyncVDisks",value:k}),Number(b)&&I.push({label:"Allocated",value:(0,f.wb)(b)}),Number(y)&&I.push({label:"Read",value:(0,f.O4)(y)}),Number(x)&&I.push({label:"Write",value:(0,f.O4)(x)}),t&&(0,m.f8)(a)&&(0,m.f8)(i)&&(0,m.f8)(l)){const e=(0,h.Wg)({nodeId:a,pDiskId:i,vDiskSlotId:l});I.push({label:"Links",value:(0,D.jsx)(N.K,{title:"Developer UI",url:e})})}return I})(e,s):((e,t)=>{const{NodeId:s,PDiskId:n,VSlotId:r,StoragePoolName:o}=e,a=[{label:"State",value:"not available"}];if(o&&a.push({label:"StoragePool",value:o}),a.push({label:"NodeId",value:null!==s&&void 0!==s?s:p.Pd},{label:"PDiskId",value:null!==n&&void 0!==n?n:p.Pd},{label:"VSlotId",value:null!==r&&void 0!==r?r:p.Pd}),t&&(0,m.f8)(s)&&(0,m.f8)(n)&&(0,m.f8)(r)){const e=(0,h.Wg)({nodeId:s,pDiskId:n,vDiskSlotId:r});a.push({label:"Links",value:(0,D.jsx)(N.K,{title:"Developer UI",url:e})})}return a})(e,s)),[e,t,s]),r=(0,v.N4)(u.E),o=(0,m.f8)(e.NodeId)?null===r||void 0===r?void 0:r.get(e.NodeId):void 0,b=i.useMemo((()=>t&&e.PDisk&&(0,k.f)(e.PDisk,o,s)),[e,o,t,s]),y=[];if("Donors"in e&&e.Donors){const t=e.Donors;for(const e of t)y.push({label:"VDisk",value:(0,D.jsx)(a.E,{to:w(e),children:e.StringifiedId})})}return(0,D.jsxs)("div",{className:I(),children:[e.DonorMode&&(0,D.jsx)(l.J,{className:I("donor-label"),children:"Donor"}),(0,D.jsx)(S.z_,{title:"VDisk",info:n,size:"s"}),b&&(0,D.jsx)(S.z_,{title:"PDisk",info:b,size:"s"}),y.length>0&&(0,D.jsx)(S.z_,{title:"Donors",info:y,size:"s"})]})},j=(0,n.cn)("ydb-vdisk-component"),P=({data:e={},compact:t,inactive:s,showPopup:n,onShowPopup:i,onHidePopup:l,progressBarClassName:d})=>{const u=w(e);return(0,D.jsx)(o.P,{showPopup:n,onShowPopup:i,onHidePopup:l,popupContent:(0,D.jsx)(C,{data:e}),children:(0,D.jsx)("div",{className:j(),children:(0,D.jsx)(a.E,{to:u,className:j("content"),children:(0,D.jsx)(r.V,{diskAllocatedPercent:e.AllocatedPercent,severity:e.Severity,compact:t,inactive:s,className:d})})})})}},78762:(e,t,s)=>{s.d(t,{pt:()=>ne,SH:()=>X,fr:()=>B,uk:()=>z,Bg:()=>K,Nh:()=>L,ID:()=>$,fR:()=>Y,iX:()=>H,Vz:()=>q,H:()=>Z,_E:()=>R,eT:()=>M,wN:()=>se,kv:()=>_,pH:()=>F,OX:()=>V,ui:()=>te,DH:()=>ee,oz:()=>J,qp:()=>Q,jl:()=>O,Rn:()=>W});var n=s(4557),r=s(40336),o=s(11906),a=s(7435),i=s(77506),l=s(76086),d=s(86200),u=s(3810),c=s(41650),m=s(71661),p=s(73473),h=s(63291),g=s(29819),v=s(31684),f=s(78034),S=s(10508),N=s(80176),k=s(60712);const b=({node:e,getNodeRef:t,database:s,statusForIcon:n})=>{if(!e.Host)return(0,k.jsx)("span",{children:"\u2014"});const r="ConnectStatus"===n?e.ConnectStatus:e.SystemState,o=!(0,f.X7)(e);let a;if(t){const s=t(e);a=s?(0,v.Un)(s):void 0}else if(e.NodeId){const t=(0,v.Kx)(e.NodeId);a=(0,v.Un)(t)}const i=o?(0,g.vI)(e.NodeId,{database:null!==s&&void 0!==s?s:e.TenantName}):void 0;return(0,k.jsx)(m.s,{disabled:!o,content:(0,k.jsx)(N.p,{data:e,nodeHref:a}),placement:["top","bottom"],behavior:h.m.Immediate,delayClosing:200,children:(0,k.jsx)(S.c,{name:e.Host,status:r,path:i,hasClipboardButton:!0})})};var y=s(48295),x=s(15132),w=s(52905),D=s(58267);const I=(0,i.cn)("tablets-statistic"),C=({tablets:e=[],database:t,nodeId:s})=>{const n=(e=>e.map((e=>({label:(0,l.bk)(e.Type),type:e.Type,count:e.Count,state:(0,D.PQ)(e.State)}))).sort(((e,t)=>String(e.label).localeCompare(String(t.label)))))(e);return(0,k.jsx)("div",{className:I(),children:n.map(((e,n)=>{var r;const o=(0,g.vI)(s,{database:t},g.q7),a=`${e.label}: ${e.count}`,i=I("tablet",{state:null===(r=e.state)||void 0===r?void 0:r.toLowerCase()});return(0,k.jsx)(w.N_,{to:o,className:i,children:a},n)}))})};var j=s(13342),P=s(86782),A=s(31911),E=s(73891);function T(e){return(0,E.Xo)((0,E.Jc)(e,1))}function U(e){const t=(0,E.Jc)(e,1);return(Number(t)<=0?"":"+")+(0,E.Xo)(t)}const G=(0,i.cn)("ydb-nodes-columns");function R(){return{name:P.vg.NodeId,header:"#",width:80,resizeMinWidth:80,render:({row:e})=>e.NodeId,align:n.Ay.RIGHT}}function L({getNodeRef:e,database:t},{statusForIcon:s="SystemState"}={}){return{name:P.vg.Host,header:P.uG.Host,render:({row:n})=>(0,k.jsx)(b,{node:n,getNodeRef:e,database:t,statusForIcon:s}),width:350,align:n.Ay.LEFT}}function M(){return{name:P.vg.NodeName,header:P.uG.NodeName,align:n.Ay.LEFT,render:({row:e})=>e.NodeName||l.Pd,width:200}}function z(){return{name:P.vg.DC,header:P.uG.DC,align:n.Ay.LEFT,render:({row:e})=>e.DC||l.Pd,width:60}}function V(){return{name:P.vg.Rack,header:P.uG.Rack,align:n.Ay.LEFT,render:({row:e})=>e.Rack||l.Pd,width:100}}function W(){return{name:P.vg.Version,header:P.uG.Version,width:200,align:n.Ay.LEFT,render:({row:e})=>(0,k.jsx)(m.s,{content:e.Version,children:e.Version})}}function O(){return{name:P.vg.Uptime,header:P.uG.Uptime,sortAccessor:({StartTime:e})=>e?-e:0,render:({row:e})=>e.Uptime,align:n.Ay.RIGHT,width:120}}function F(){return{name:P.vg.RAM,header:P.uG.RAM,sortAccessor:({MemoryUsed:e=0})=>Number(e),defaultOrder:n.Ay.DESCENDING,render:({row:e})=>{const[t,s]=(0,c.kf)(e.MemoryUsed)&&(0,c.kf)(e.MemoryLimit)?(0,d.j9)(Number(e.MemoryUsed),Number(e.MemoryLimit),"gb",void 0,!0):[0,0];return(0,k.jsx)(m.s,{placement:["top","auto"],fullWidth:!0,content:(0,k.jsxs)(r.u,{responsive:!0,children:[(0,k.jsx)(r.u.Item,{name:(0,A.A)("field_memory-used"),children:t}),(0,k.jsx)(r.u.Item,{name:(0,A.A)("field_memory-limit"),children:s})]}),children:(0,k.jsx)(x.O,{value:e.MemoryUsed,capacity:e.MemoryLimit,formatValues:(e,t)=>(0,d.j9)(e,t,"gb",void 0,!0),className:G("column-ram"),colorizeProgress:!0,hideCapacity:!0})})},align:n.Ay.LEFT,width:80,resizeMinWidth:40}}function H(){return{name:P.vg.Memory,header:P.uG.Memory,defaultOrder:n.Ay.DESCENDING,render:({row:e})=>e.MemoryStats?(0,k.jsx)(p.S,{formatValues:d.vX,stats:e.MemoryStats}):(0,k.jsx)(x.O,{value:e.MemoryUsed,capacity:e.MemoryLimit,formatValues:d.vX,colorizeProgress:!0}),align:n.Ay.LEFT,width:300,resizeMinWidth:170}}function _(){return{name:P.vg.Pools,header:P.uG.Pools,sortAccessor:({PoolStats:e=[]})=>Math.max(...e.map((({Usage:e})=>Number(e)))),defaultOrder:n.Ay.DESCENDING,render:({row:e})=>e.PoolStats?(0,k.jsx)(y._,{pools:e.PoolStats}):l.Pd,align:n.Ay.LEFT,width:80,resizeMinWidth:60}}function B(){return{name:P.vg.CPU,header:P.uG.CPU,sortAccessor:({PoolStats:e=[]})=>Math.max(...e.map((({Usage:e})=>Number(e)))),defaultOrder:n.Ay.DESCENDING,render:({row:e})=>{if(!e.PoolStats)return l.Pd;let t=(0,c.kf)(e.CoresUsed)&&(0,c.kf)(e.CoresTotal)?e.CoresUsed/e.CoresTotal:void 0;if(void 0===t){let s=0;t=e.PoolStats.reduce(((e,t)=>(s+=Number(t.Threads),e+Number(t.Usage)*Number(t.Threads))),0),t/=s}return(0,k.jsx)(m.s,{placement:["top","auto"],fullWidth:!0,content:(0,k.jsx)(r.u,{responsive:!0,children:e.PoolStats.map((e=>(0,c.kf)(e.Usage)?(0,k.jsx)(r.u.Item,{name:e.Name,children:(0,N.Qz)("Usage",e.Usage).value},e.Name):null))}),children:(0,k.jsx)(x.O,{className:G("column-cpu"),value:t,capacity:1,colorizeProgress:!0,percents:!0})})},align:n.Ay.LEFT,width:80,resizeMinWidth:40}}function $(){return{name:P.vg.LoadAverage,header:P.uG.LoadAverage,sortAccessor:({LoadAveragePercents:e=[]})=>e[0],defaultOrder:n.Ay.DESCENDING,render:({row:e})=>(0,k.jsx)(x.O,{value:e.LoadAveragePercents&&e.LoadAveragePercents.length>0?e.LoadAveragePercents[0]:void 0,percents:!0,colorizeProgress:!0,capacity:100}),align:n.Ay.LEFT,width:170,resizeMinWidth:170}}function Y(){return{name:P.vg.Load,header:P.uG.Load,sortAccessor:({LoadAveragePercents:e=[]})=>e[0],defaultOrder:n.Ay.DESCENDING,render:({row:e})=>e.LoadAveragePercents&&e.LoadAveragePercents.length>0?(0,k.jsx)(j.U,{value:e.LoadAveragePercents[0].toFixed(),theme:(0,o.$)(e.LoadAveragePercents[0])}):l.Pd,align:n.Ay.LEFT,width:80,resizeMinWidth:70}}function K(){return{name:P.vg.DiskSpaceUsage,header:P.uG.DiskSpaceUsage,render:({row:e})=>(0,a.f8)(e.DiskSpaceUsage)?(0,k.jsx)(j.U,{value:Math.floor(e.DiskSpaceUsage),theme:(0,u.x)(e.DiskSpaceUsage)}):l.Pd,align:n.Ay.LEFT,width:115,resizeMinWidth:75}}function J(){return{name:P.vg.TotalSessions,header:P.uG.TotalSessions,render:({row:e})=>{var t;return null!==(t=e.TotalSessions)&&void 0!==t?t:l.Pd},align:n.Ay.RIGHT,width:100}}function Q({database:e}){return{name:P.vg.Tablets,header:P.uG.Tablets,width:500,resizeMinWidth:500,render:({row:t})=>t.Tablets?(0,k.jsx)(C,{database:null!==e&&void 0!==e?e:t.TenantName,nodeId:t.NodeId,tablets:t.Tablets}):l.Pd,align:n.Ay.LEFT,sortable:!1}}function q(){return{name:P.vg.Missing,header:P.uG.Missing,render:({row:e})=>e.Missing,align:n.Ay.CENTER,defaultOrder:n.Ay.DESCENDING}}function X(){return{name:P.vg.Connections,header:P.uG.Connections,render:({row:e})=>(0,c.kf)(e.Connections)?e.Connections:l.Pd,align:n.Ay.RIGHT,width:130}}function Z(){return{name:P.vg.NetworkUtilization,header:P.uG.NetworkUtilization,render:({row:e})=>{const{NetworkUtilization:t,NetworkUtilizationMin:s=0,NetworkUtilizationMax:n=0}=e;return(0,c.kf)(t)?(0,k.jsx)(m.s,{placement:["top","auto"],fullWidth:!0,content:(0,k.jsxs)(r.u,{responsive:!0,children:[(0,k.jsx)(r.u.Item,{name:(0,A.A)("sum"),children:(0,d.l9)(t)},"NetworkUtilization"),(0,k.jsx)(r.u.Item,{name:(0,A.A)("min"),children:(0,d.l9)(s)},"NetworkUtilizationMin"),(0,k.jsx)(r.u.Item,{name:(0,A.A)("max"),children:(0,d.l9)(n)},"NetworkUtilizationMax")]}),children:(0,d.l9)(t)}):l.Pd},align:n.Ay.RIGHT,width:110}}function ee(){return{name:P.vg.SendThroughput,header:P.uG.SendThroughput,render:({row:e})=>(0,c.kf)(e.SendThroughput)?(0,c.O4)(e.SendThroughput):l.Pd,align:n.Ay.RIGHT,width:110}}function te(){return{name:P.vg.ReceiveThroughput,header:P.uG.ReceiveThroughput,render:({row:e})=>(0,c.kf)(e.ReceiveThroughput)?(0,c.O4)(e.ReceiveThroughput):l.Pd,align:n.Ay.RIGHT,width:110}}function se(){return{name:P.vg.PingTime,header:P.uG.PingTime,render:({row:e})=>{const{PingTimeUs:t,PingTimeMinUs:s=0,PingTimeMaxUs:n=0}=e;return(0,c.kf)(t)?(0,k.jsx)(m.s,{placement:["top","auto"],fullWidth:!0,content:(0,k.jsxs)(r.u,{responsive:!0,children:[(0,k.jsx)(r.u.Item,{name:(0,A.A)("avg"),children:T(t)},"PingTimeUs"),(0,k.jsx)(r.u.Item,{name:(0,A.A)("min"),children:T(s)},"PingTimeMinUs"),(0,k.jsx)(r.u.Item,{name:(0,A.A)("max"),children:T(n)},"PingTimeMaxUs")]}),children:T(t)}):l.Pd},align:n.Ay.RIGHT,width:110}}function ne(){return{name:P.vg.ClockSkew,header:P.uG.ClockSkew,render:({row:e})=>{const{ClockSkewUs:t,ClockSkewMinUs:s=0,ClockSkewMaxUs:n=0}=e;return(0,c.kf)(t)?(0,k.jsx)(m.s,{placement:["top","auto"],fullWidth:!0,content:(0,k.jsxs)(r.u,{responsive:!0,children:[(0,k.jsx)(r.u.Item,{name:(0,A.A)("avg"),children:U(t)},"ClockSkewUs"),(0,k.jsx)(r.u.Item,{name:(0,A.A)("min"),children:U(s)},"ClockSkewMinUs"),(0,k.jsx)(r.u.Item,{name:(0,A.A)("max"),children:U(n)},"ClockSkewMaxUs")]}),children:U(t)}):l.Pd},align:n.Ay.RIGHT,width:110}}},86782:(e,t,s)=>{s.d(t,{fN:()=>d,kU:()=>c,kn:()=>l,sp:()=>m,uG:()=>a,vg:()=>o,zO:()=>r});var n=s(31911);const r="nodesTableColumnsWidth",o={NodeId:"NodeId",Host:"Host",Database:"Database",NodeName:"NodeName",DC:"DC",Rack:"Rack",Version:"Version",Uptime:"Uptime",Memory:"Memory",RAM:"RAM",CPU:"CPU",Pools:"Pools",LoadAverage:"LoadAverage",Load:"Load",DiskSpaceUsage:"DiskSpaceUsage",TotalSessions:"TotalSessions",Connections:"Connections",NetworkUtilization:"NetworkUtilization",SendThroughput:"SendThroughput",ReceiveThroughput:"ReceiveThroughput",PingTime:"PingTime",ClockSkew:"ClockSkew",Missing:"Missing",Tablets:"Tablets",PDisks:"PDisks"},a={get NodeId(){return(0,n.A)("node-id")},get Host(){return(0,n.A)("host")},get Database(){return(0,n.A)("database")},get NodeName(){return(0,n.A)("node-name")},get DC(){return(0,n.A)("dc")},get Rack(){return(0,n.A)("rack")},get Version(){return(0,n.A)("version")},get Uptime(){return(0,n.A)("uptime")},get Memory(){return(0,n.A)("memory")},get RAM(){return(0,n.A)("ram")},get Pools(){return(0,n.A)("pools")},get CPU(){return(0,n.A)("cpu")},get LoadAverage(){return(0,n.A)("load-average")},get Load(){return(0,n.A)("load")},get DiskSpaceUsage(){return(0,n.A)("disk-usage")},get TotalSessions(){return(0,n.A)("sessions")},get Connections(){return(0,n.A)("connections")},get NetworkUtilization(){return(0,n.A)("utilization")},get SendThroughput(){return(0,n.A)("send")},get ReceiveThroughput(){return(0,n.A)("receive")},get PingTime(){return(0,n.A)("ping")},get ClockSkew(){return(0,n.A)("skew")},get Missing(){return(0,n.A)("missing")},get Tablets(){return(0,n.A)("tablets")},get PDisks(){return(0,n.A)("pdisks")}},i={get NodeId(){return(0,n.A)("node-id")},get Host(){return(0,n.A)("host")},get NodeName(){return(0,n.A)("node-name")},get Database(){return(0,n.A)("database")},get DiskSpaceUsage(){return(0,n.A)("disk-usage")},get DC(){return(0,n.A)("dc")},get Rack(){return(0,n.A)("rack")},get Missing(){return(0,n.A)("missing")},get Uptime(){return(0,n.A)("uptime")},get Version(){return(0,n.A)("version")},get SystemState(){return(0,n.A)("system-state")},get ConnectStatus(){return(0,n.A)("connect-status")},get NetworkUtilization(){return(0,n.A)("network-utilization")},get ClockSkew(){return(0,n.A)("clock-skew")},get PingTime(){return(0,n.A)("ping-time")}};function l(e){return i[e]}const d={NodeId:["NodeId"],Host:["Host","Rack","Database","SystemState"],Database:["Database"],NodeName:["NodeName"],DC:["DC"],Rack:["Rack"],Version:["Version"],Uptime:["Uptime","DisconnectTime"],Memory:["Memory","MemoryDetailed"],RAM:["Memory"],Pools:["CPU"],CPU:["CPU"],LoadAverage:["LoadAverage"],Load:["LoadAverage"],DiskSpaceUsage:["DiskSpaceUsage"],TotalSessions:["SystemState"],Connections:["Connections"],NetworkUtilization:["NetworkUtilization"],SendThroughput:["SendThroughput"],ReceiveThroughput:["ReceiveThroughput"],PingTime:["PingTime"],ClockSkew:["ClockSkew"],Missing:["Missing"],Tablets:["Tablets","Database"],PDisks:["PDisks"]},u={NodeId:"NodeId",Host:"Host",Database:"Database",NodeName:"NodeName",DC:"DC",Rack:"Rack",Version:"Version",Uptime:"Uptime",Memory:"Memory",RAM:"Memory",CPU:"CPU",Pools:"CPU",LoadAverage:"LoadAverage",Load:"LoadAverage",DiskSpaceUsage:"DiskSpaceUsage",TotalSessions:void 0,Connections:"Connections",NetworkUtilization:"NetworkUtilization",SendThroughput:"SendThroughput",ReceiveThroughput:"ReceiveThroughput",PingTime:"PingTime",ClockSkew:"ClockSkew",Missing:"Missing",Tablets:void 0,PDisks:void 0};function c(e){return u[e]}function m(e){return Boolean(c(e))}},31911:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(48372);const r=JSON.parse('{"node-id":"Node ID","host":"Host","database":"Database","node-name":"Node Name","dc":"DC","rack":"Rack","version":"Version","uptime":"Uptime","memory":"Detailed Memory","ram":"RAM","cpu":"CPU","pools":"Pools","disk-usage":"Disk Usage","tablets":"Tablets","load-average":"Load Average","load":"Load","sessions":"Sessions","missing":"Missing","pdisks":"PDisks","field_memory-used":"Memory used","field_memory-limit":"Memory limit","system-state":"System State","connect-status":"Connect Status","utilization":"Utilization","network-utilization":"Network Utilization","connections":"Connections","clock-skew":"Clock Skew","skew":"Skew","ping-time":"Ping Time","ping":"Ping","send":"Send","receive":"Receive","max":"Max","min":"Min","avg":"Avg","sum":"Sum"}'),o=(0,n.g4)("ydb-nodes-columns",{en:r})},10576:(e,t,s)=>{s.d(t,{E:()=>g});var n=s(59284),r=s(88226),o=s(13096),a=s(44294),i=s(96927),l=s(8809),d=s(92459),u=s(7435),c=s(77506),m=s(3218),p=s(60712);const h=(0,c.cn)("pdisk-storage"),g=({data:e={},vDisks:t,showPopup:s,onShowPopup:c,onHidePopup:g,className:v,progressBarClassName:f,viewContext:S})=>{const{NodeId:N,PDiskId:k}=e,b=(0,u.f8)(N)&&(0,u.f8)(k),y=n.useRef(null);let x;return b&&(x=(0,d.Ck)(k,N)),(0,p.jsxs)("div",{className:h(null,v),ref:y,children:[null!==t&&void 0!==t&&t.length?(0,p.jsx)("div",{className:h("vdisks"),children:t.map((e=>(0,p.jsx)("div",{className:h("vdisks-item"),style:{flexGrow:Number(e.AllocatedSize)||1},children:(0,p.jsx)(l.y,{data:e,inactive:!(0,m.OH)(e,S),compact:!0})},e.StringifiedId)))}):null,(0,p.jsx)(o.P,{showPopup:s,anchorRef:y,onShowPopup:c,onHidePopup:g,popupContent:(0,p.jsx)(i.O,{data:e}),children:(0,p.jsxs)(a.E,{to:x,className:h("content"),children:[(0,p.jsx)(r.V,{diskAllocatedPercent:e.AllocatedPercent,severity:e.Severity,className:f}),(0,p.jsx)("div",{className:h("media-type"),children:e.Type})]})})]})}},19093:(e,t,s)=>{s.d(t,{J:()=>ne,k:()=>se});var n=s(59284),r=s(79879),o=s(4557),a=s(63291),i=s(47665),l=s(84375),d=s(99991),u=s(71661),c=s(44294),m=s(33775),p=s(13342),h=s(86200),g=s(7187),v=s(77506),f=s(60712);const S="--ydb-stack-level",N=(0,v.cn)("stack"),k=({children:e,className:t})=>(0,f.jsx)("div",{className:N(null,t),children:n.Children.map(e,((e,t)=>n.isValidElement(e)?(0,f.jsx)("div",{className:N("layer"),style:{[S]:t},children:e}):null))});var b=s(8809);function y({data:e,className:t,stackClassName:s,...n}){const{Donors:r,...o}=e||{},a=r&&r.length>0?(0,f.jsxs)(k,{className:s,children:[(0,f.jsx)(b.y,{data:o,...n}),r.map((e=>{const t=(0,g.NJ)(e);return(0,f.jsx)(b.y,{data:e,...n},(0,h.U9)(t?e.VDiskId:e))}))]}):(0,f.jsx)(b.y,{data:e,...n});return(0,f.jsx)("div",{className:t,children:a})}var x=s(92459),w=s(7435),D=s(76086),I=s(3810),C=s(73891),j=s(41650),P=s(69033),A=s(87184),E=s(10576),T=s(3218);const U=(0,v.cn)("ydb-storage-disks");function G({vDisks:e=[],viewContext:t}){const[s,r]=n.useState(),{theme:{spaceBaseSize:o}}=(0,P.L)();if(!e.length)return null;const a=(300-o*(e.length-1))/e.length;return(0,f.jsxs)("div",{className:U(null),children:[(0,f.jsx)(A.s,{direction:"row",gap:1,grow:!0,style:{width:300},children:null===e||void 0===e?void 0:e.map((e=>(0,f.jsx)(R,{vDisk:e,inactive:!(0,T.OH)(e,t),highlightedVDisk:s,setHighlightedVDisk:r,unavailableVDiskWidth:a},e.StringifiedId)))}),(0,f.jsx)("div",{className:U("pdisks-wrapper"),children:null===e||void 0===e?void 0:e.map((e=>{var t;return(0,f.jsx)(L,{vDisk:e,highlightedVDisk:s,setHighlightedVDisk:r},null===e||void 0===e||null===(t=e.PDisk)||void 0===t?void 0:t.StringifiedId)}))})]})}function R({vDisk:e,highlightedVDisk:t,inactive:s,setHighlightedVDisk:n,unavailableVDiskWidth:r}){const o={...e,PDisk:void 0},a=e.StringifiedId,i=(0,w.f8)(o.AllocatedSize)?void 0:r,l=Number(o.AllocatedSize)||1;return(0,f.jsx)("div",{style:{flexGrow:l,minWidth:i},className:U("vdisk-item"),children:(0,f.jsx)(b.y,{data:o,compact:!0,inactive:s,showPopup:t===a,onShowPopup:()=>n(a),onHidePopup:()=>n(void 0),progressBarClassName:U("vdisk-progress-bar")})})}function L({vDisk:e,highlightedVDisk:t,setHighlightedVDisk:s}){const n=e.StringifiedId;return e.PDisk?(0,f.jsx)(E.E,{className:U("pdisk-item"),progressBarClassName:U("pdisk-progress-bar"),data:e.PDisk,showPopup:t===n,onShowPopup:()=>s(n),onHidePopup:()=>s(void 0)}):null}var M=s(61456),z=s(10360);const V=(0,v.cn)("ydb-storage-groups-columns"),W={name:z.UW.PoolName,header:z.H6.PoolName,width:250,render:({row:e})=>e.PoolName?(0,f.jsx)(u.s,{content:e.PoolName,placement:["right"],behavior:a.m.Immediate,className:V("pool-name-wrapper"),children:(0,f.jsx)("span",{className:V("pool-name"),children:e.PoolName})}):D.Pd,align:o.Ay.LEFT},O={name:z.UW.MediaType,header:z.H6.MediaType,width:100,resizeMinWidth:100,align:o.Ay.LEFT,render:({row:e})=>(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)(i.J,{children:e.MediaType||"\u2014"}),"\xa0",e.Encryption&&(0,f.jsx)(l.A,{content:(0,M.A)("encrypted"),placement:"right",behavior:a.m.Immediate,children:(0,f.jsx)(i.J,{children:(0,f.jsx)(d.I,{data:r.A,size:18})})})]}),sortable:!1},F={name:z.UW.Erasure,header:z.H6.Erasure,width:100,sortAccessor:e=>e.ErasureSpecies,render:({row:e})=>e.ErasureSpecies?e.ErasureSpecies:"-",align:o.Ay.LEFT},H={name:z.UW.Degraded,header:z.H6.Degraded,width:110,resizeMinWidth:110,render:({row:e})=>e.Degraded?(0,f.jsxs)(i.J,{theme:(0,T.k_)(e),children:["Degraded: ",e.Degraded]}):"-",align:o.Ay.LEFT,defaultOrder:o.Ay.DESCENDING},_={name:z.UW.Usage,header:z.H6.Usage,width:85,resizeMinWidth:75,render:({row:e})=>(0,w.f8)(e.Usage)?(0,f.jsx)(p.U,{value:Math.floor(e.Usage),theme:(0,I.x)(e.Usage)}):D.Pd,align:o.Ay.LEFT},B={name:z.UW.DiskSpaceUsage,header:z.H6.DiskSpaceUsage,width:115,resizeMinWidth:75,render:({row:e})=>(0,w.f8)(e.DiskSpaceUsage)?(0,f.jsx)(p.U,{value:Math.floor(e.DiskSpaceUsage),theme:(0,I.x)(e.DiskSpaceUsage)}):D.Pd,align:o.Ay.LEFT},$={name:z.UW.GroupId,header:z.H6.GroupId,width:130,render:({row:e})=>e.GroupId?(0,f.jsx)(c.E,{className:V("group-id"),to:(0,x._g)(e.GroupId),children:e.GroupId}):"-",sortAccessor:e=>Number(e.GroupId),align:o.Ay.RIGHT},Y={name:z.UW.Used,header:z.H6.Used,width:100,render:({row:e})=>(0,j.wb)(e.Used,!0),align:o.Ay.RIGHT},K={name:z.UW.Limit,header:z.H6.Limit,width:100,render:({row:e})=>(0,j.wb)(e.Limit),align:o.Ay.RIGHT},J={name:z.UW.DiskSpace,header:z.H6.DiskSpace,width:70,render:({row:e})=>(0,f.jsx)(m.k,{status:e.DiskSpace}),align:o.Ay.CENTER},Q={name:z.UW.Read,header:z.H6.Read,width:100,render:({row:e})=>e.Read?(0,j.O4)(e.Read):"-",align:o.Ay.RIGHT},q={name:z.UW.Write,header:z.H6.Write,width:100,render:({row:e})=>e.Write?(0,j.O4)(e.Write):"-",align:o.Ay.RIGHT},X={name:z.UW.Latency,header:z.H6.Latency,width:100,render:({row:e})=>(0,w.f8)(e.LatencyPutTabletLogMs)?(0,C.Xo)(e.LatencyPutTabletLogMs):D.Pd,align:o.Ay.RIGHT},Z={name:z.UW.AllocationUnits,header:z.H6.AllocationUnits,width:150,render:({row:e})=>(0,w.f8)(e.AllocationUnits)?(0,h.ZV)(e.AllocationUnits):D.Pd,align:o.Ay.RIGHT},ee=e=>({name:z.UW.VDisks,header:z.H6.VDisks,className:V("vdisks-column"),render:({row:t})=>{var s;return(0,f.jsx)("div",{className:V("vdisks-wrapper"),children:null===(s=t.VDisks)||void 0===s?void 0:s.map((t=>(0,f.jsx)(y,{data:t,inactive:!(0,T.OH)(t,null===e||void 0===e?void 0:e.viewContext),className:V("vdisks-item")},t.StringifiedId)))})},align:o.Ay.CENTER,width:900,resizeable:!1,sortable:!1}),te=e=>({name:z.UW.VDisksPDisks,header:z.H6.VDisksPDisks,className:V("disks-column"),render:({row:t})=>(0,f.jsx)(G,{vDisks:t.VDisks,viewContext:null===e||void 0===e?void 0:e.viewContext}),align:o.Ay.CENTER,width:900,resizeable:!1,sortable:!1}),se=()=>[$,O,F,_,Y,K].map((e=>({...e,sortable:!1}))),ne=e=>[$,W,O,F,H,_,B,Y,K,J,Q,q,X,Z,ee(e),te(e)].map((e=>({...e,sortable:(0,z.i4)(e.name)})))},10360:(e,t,s)=>{s.d(t,{hu:()=>u,YX:()=>f,LO:()=>c,UW:()=>d,H6:()=>m,qK:()=>i,SE:()=>g,zY:()=>l,GP:()=>N,i4:()=>k,kY:()=>v});var n=s(370),r=s(48372);const o=JSON.parse('{"pool-name":"Pool Name","type":"Type","encryption":"Encryption","erasure":"Erasure","degraded":"Degraded","missing-disks":"Missing Disks","state":"State","usage":"Usage","disk-usage":"Disk usage","group-id":"Group ID","used":"Used","limit":"Limit","space":"Space","read":"Read","write":"Write","latency":"Latency","allocation-units":"Allocation Units","vdisks":"VDisks","vdisks-pdisks":"VDisks with PDisks"}'),a=(0,r.g4)("ydb-storage-groups-columns",{en:o}),i="storageGroupsColumnsWidth",l="storageGroupsSelectedColumns",d={GroupId:"GroupId",PoolName:"PoolName",MediaType:"MediaType",Erasure:"Erasure",Used:"Used",Limit:"Limit",Usage:"Usage",DiskSpaceUsage:"DiskSpaceUsage",DiskSpace:"DiskSpace",Read:"Read",Write:"Write",Latency:"Latency",AllocationUnits:"AllocationUnits",VDisks:"VDisks",VDisksPDisks:"VDisksPDisks",Degraded:"Degraded"},u=["GroupId","PoolName","Erasure","Used","VDisks"],c=["GroupId"],m={get PoolName(){return a("pool-name")},get MediaType(){return a("type")},get Erasure(){return a("erasure")},get GroupId(){return a("group-id")},get Used(){return a("used")},get Limit(){return a("limit")},get Usage(){return a("usage")},get DiskSpaceUsage(){return a("disk-usage")},get DiskSpace(){return a("space")},get Read(){return a("read")},get Write(){return a("write")},get Latency(){return a("latency")},get AllocationUnits(){return a("allocation-units")},get VDisks(){return a("vdisks")},get VDisksPDisks(){return a("vdisks-pdisks")},get Degraded(){return a("missing-disks")}},p={get GroupId(){return a("group-id")},get Erasure(){return a("erasure")},get Usage(){return a("usage")},get DiskSpaceUsage(){return a("disk-usage")},get PoolName(){return a("pool-name")},get Kind(){return a("type")},get Encryption(){return a("encryption")},get MediaType(){return a("type")},get MissingDisks(){return a("missing-disks")},get State(){return a("state")},get Latency(){return a("latency")}},h=["PoolName","MediaType","Encryption","Erasure","Usage","DiskSpaceUsage","State","MissingDisks","Latency"],g=h.map((e=>({value:e,content:p[e]}))),v=n.z.custom((e=>h.includes(e))).catch(void 0),f={GroupId:["GroupId"],PoolName:["PoolName"],MediaType:["MediaType","Encryption"],Erasure:["Erasure"],Used:["Used"],Limit:["Limit"],Usage:["Usage"],DiskSpaceUsage:["DiskSpaceUsage"],DiskSpace:["State"],Read:["Read"],Write:["Write"],Latency:["Latency"],AllocationUnits:["AllocationUnits"],VDisks:["VDisk","PDisk","Read","Write"],VDisksPDisks:["VDisk","PDisk","Read","Write"],Degraded:["MissingDisks"]},S={GroupId:"GroupId",PoolName:"PoolName",MediaType:"MediaType",Erasure:"Erasure",Used:"Used",Limit:"Limit",Usage:"Usage",DiskSpaceUsage:"DiskSpaceUsage",DiskSpace:void 0,Read:"Read",Write:"Write",Latency:"Latency",AllocationUnits:"AllocationUnits",VDisks:void 0,VDisksPDisks:void 0,Degraded:"Degraded"};function N(e){return S[e]}function k(e){return Boolean(N(e))}},61456:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(48372);const r=JSON.parse('{"empty.default":"No such groups","empty.out_of_space":"No groups with out of space errors","empty.degraded":"No degraded groups","show_all":"Show all groups","encrypted":"Encrypted group"}'),o=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f","empty.out_of_space":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0433\u0440\u0443\u043f\u043f","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","encrypted":"\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430"}'),a=(0,n.g4)("ydb-storage-groups",{ru:o,en:r})},41122:(e,t,s)=>{s.d(t,{p:()=>qe});var n=s(76086),r=s(90182),o=s(59284),a=s(79553),i=s(98167),l=s(89073),d=s(67028),u=s(10174),c=s(29289),m=s(98089),p=s(24555),h=s(53755),g=s(41775),v=s(64934),f=s(10360),S=s(370),N=s(86782);const k="storageNodesColumnsWidth",b=["NodeId","Host","Uptime","CPU","RAM","PDisks"],y=["NodeId"],x=["Host","DC","Rack","Version","Uptime","Missing","DiskSpaceUsage"],w=x.map((e=>({value:e,content:(0,N.kn)(e)}))),D=S.z.custom((e=>x.includes(e))).catch(void 0);var I=s(44433),C=s(87082),j=s(60712);const P={[C.G.groups]:"Groups",[C.G.nodes]:"Nodes"},A=({value:e,onChange:t})=>(0,j.jsxs)(I.a,{value:e,onUpdate:t,qa:"storage-type-filter",children:[(0,j.jsx)(I.a.Option,{value:C.G.groups,children:P[C.G.groups]}),(0,j.jsx)(I.a.Option,{value:C.G.nodes,children:P[C.G.nodes]})]}),E={[C.r.all]:"All",[C.r.missing]:"Degraded",[C.r.space]:"Out of Space"},T=({value:e,onChange:t})=>(0,j.jsxs)(I.a,{value:e,onUpdate:t,qa:"storage-visible-entities-filter",children:[(0,j.jsx)(I.a.Option,{value:C.r.missing,children:E[C.r.missing]}),(0,j.jsx)(I.a.Option,{value:C.r.space,children:E[C.r.space]}),(0,j.jsx)(I.a.Option,{value:C.r.all,children:E[C.r.all]})]});var U=s(48372);const G=JSON.parse('{"groups":"Groups","nodes":"Nodes","controls_groups-search-placeholder":"Group ID, Pool name","controls_nodes-search-placeholder":"Node ID, FQDN","controls_group-by-placeholder":"Group by:","no-nodes":"No such nodes","no-groups":"No such groups"}'),R=(0,U.g4)("ydb-storage",{en:G});var L=s(59109),M=s(44508),z=s(77506);const V=(0,z.cn)("global-storage"),W=e=>403===e.status?(0,j.jsx)(L.O,{position:"left"}):(0,j.jsx)(M.o,{error:e});var O=s(67087);const F=S.z.nativeEnum(C.r).catch(C.r.all),H=S.z.nativeEnum(C.G).catch(C.G.groups);var _=s(78034);function B(){var e;const[t,s]=(0,O.useQueryParams)({type:O.StringParam,visible:O.StringParam,search:O.StringParam,uptimeFilter:O.StringParam,storageNodesGroupBy:O.StringParam,storageGroupsGroupBy:O.StringParam}),n=H.parse(t.type),r=F.parse(t.visible),o=null!==(e=t.search)&&void 0!==e?e:"",a=_.Bm.parse(t.uptimeFilter),i=f.kY.parse(t.storageGroupsGroupBy),l=D.parse(t.storageNodesGroupBy),d=e=>{s({visible:e},"replaceIn")},u=e=>{s({uptimeFilter:e},"replaceIn")};return{storageType:n,visibleEntities:r,searchValue:o,nodesUptimeFilter:a,storageGroupsGroupByParam:i,storageNodesGroupByParam:l,handleTextFilterChange:e=>{s({search:e||void 0},"replaceIn")},handleVisibleEntitiesChange:d,handleStorageTypeChange:e=>{s({type:e},"replaceIn")},handleUptimeFilterChange:u,handleStorageGroupsGroupByParamChange:e=>{s({storageGroupsGroupBy:e},"replaceIn")},handleStorageNodesGroupByParamChange:e=>{s({storageNodesGroupBy:e},"replaceIn")},handleShowAllGroups:()=>{d("all")},handleShowAllNodes:()=>{d("all"),u(_.cW.All)}}}function $({withTypeSelector:e,withGroupBySelect:t,entitiesCountCurrent:s,entitiesCountTotal:n,entitiesLoading:r,columnsToSelect:a,handleSelectedColumnsUpdate:i}){const{searchValue:l,storageType:d,visibleEntities:u,storageGroupsGroupByParam:v,handleTextFilterChange:S,handleStorageTypeChange:N,handleVisibleEntitiesChange:k,handleStorageGroupsGroupByParamChange:b}=B();return(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)(g.v,{value:l,onChange:S,placeholder:R("controls_groups-search-placeholder"),className:V("search")}),e&&(0,j.jsx)(A,{value:d,onChange:N}),t?null:(0,j.jsx)(T,{value:u,onChange:k}),(0,j.jsx)(c.O,{popupWidth:200,items:a,showStatus:!0,onUpdate:i,sortable:!1}),t?(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)(m.E,{variant:"body-2",children:R("controls_group-by-placeholder")}),(0,j.jsx)(p.l,{hasClear:!0,placeholder:"-",width:150,defaultValue:v?[v]:void 0,onUpdate:e=>{b(e[0])},options:f.SE})]}):null,(0,j.jsx)(h.T,{label:R("groups"),loading:r,total:n,current:s})]})}function Y({withTypeSelector:e,withGroupBySelect:t,entitiesCountCurrent:s,entitiesCountTotal:n,entitiesLoading:r,columnsToSelect:a,handleSelectedColumnsUpdate:i}){const{searchValue:l,storageType:d,visibleEntities:u,nodesUptimeFilter:f,storageNodesGroupByParam:S,handleTextFilterChange:N,handleStorageTypeChange:k,handleVisibleEntitiesChange:b,handleUptimeFilterChange:y,handleStorageNodesGroupByParamChange:x}=B();return(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)(g.v,{value:l,onChange:N,placeholder:R("controls_nodes-search-placeholder"),className:V("search")}),e&&(0,j.jsx)(A,{value:d,onChange:k}),t?null:(0,j.jsx)(T,{value:u,onChange:b}),t?null:(0,j.jsx)(v.j,{value:f,onChange:y}),(0,j.jsx)(c.O,{popupWidth:200,items:a,showStatus:!0,onUpdate:i,sortable:!1}),t?(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)(m.E,{variant:"body-2",children:R("controls_group-by-placeholder")}),(0,j.jsx)(p.l,{hasClear:!0,placeholder:"-",width:150,defaultValue:S?[S]:void 0,onUpdate:e=>{x(e[0])},options:w})]}):null,(0,j.jsx)(h.T,{label:R("nodes"),loading:r,total:n,current:s})]})}var K=s(40427),J=s(84476),Q=s(7889),q=s(78524);const X=JSON.parse('{"default_message":"Everything is fine!","default_button_label":"Show All"}'),Z=JSON.parse('{"default_message":"\u0412\u0441\u0451 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435!","default_button_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}'),ee=(0,U.g4)("ydb-storage-empty-filter",{ru:Z,en:X}),te=({title:e,message:t=ee("default_message"),showAll:s=ee("default_button_label"),onShowAll:n})=>(0,j.jsx)(Q.p,{image:(0,j.jsx)(q.v,{name:"thumbsUp"}),position:"left",title:e,description:t,actions:n&&[(0,j.jsx)(J.$,{onClick:n,children:s},"show-all")]});var se=s(61456);const ne=({visibleEntities:e,onShowAll:t})=>{let s;return e===C.r.space&&(s=(0,se.A)("empty.out_of_space")),e===C.r.missing&&(s=(0,se.A)("empty.degraded")),s?(0,j.jsx)(te,{title:s,showAll:(0,se.A)("show_all"),onShowAll:t}):null};var re=s(16029),oe=s(69464),ae=s(40781);const ie=({columns:e,database:t,nodeId:s,groupId:n,pDiskId:r,filterGroup:a,filterGroupBy:l,searchValue:u,visibleEntities:c,onShowAll:m,parentRef:p,renderControls:h,renderErrorMessage:g,initialEntitiesCount:v})=>{const S=(0,d.Pm)(),N=(0,d.YA)(),k=(b=N,o.useCallback((async e=>{const{limit:t,offset:s,sortParams:n,filters:r,columnsIds:o}=e,{sortOrder:a,columnId:i}=null!==n&&void 0!==n?n:{},{searchValue:l,visibleEntities:d,database:u,nodeId:c,groupId:m,pDiskId:p,filterGroup:h,filterGroupBy:g}=null!==r&&void 0!==r?r:{},v=(0,f.GP)(i),S=v?(0,oe.T)(v,a):void 0,N=(0,ae.R)(o,f.YX),{groups:k,found:y,total:x}=await(0,re.t)({limit:t,offset:s,sort:S,filter:l,with:d,database:u,nodeId:c,groupId:m,pDiskId:p,filter_group:h,filter_group_by:g,fieldsRequired:N,shouldUseGroupsHandler:b});return{data:k||[],found:y||0,total:x||0}}),[b]));var b;const y=o.useMemo((()=>({searchValue:u,visibleEntities:c,database:t,nodeId:s,groupId:n,pDiskId:r,filterGroup:a,filterGroupBy:l})),[u,c,t,s,n,r,a,l]);return(0,j.jsx)(i.r,{loading:!S,children:(0,j.jsx)(K.k5,{columnsWidthLSKey:f.qK,parentRef:p,columns:e,fetchData:k,limit:50,initialEntitiesCount:v,renderControls:h,renderErrorMessage:g,renderEmptyDataMessage:()=>c!==C.r.all?(0,j.jsx)(ne,{onShowAll:m,visibleEntities:c}):(0,se.A)("empty.default"),filters:y,tableName:"storage-groups"})})};var le=s(43951),de=s(19093);function ue(e){return o.useMemo((()=>(0,de.J)({viewContext:e})),[e])}function ce({visibleEntities:e,viewContext:t}){const s=ue(t),n=o.useMemo((()=>e===C.r.missing?[...f.LO,f.UW.Degraded]:e===C.r.space?[...f.LO,f.UW.DiskSpace]:f.LO),[e]);return(0,le.K)(s,f.zY,f.H6,f.hu,n)}var me=s(71708),pe=s(62710);function he(e){const{storageGroupsGroupByParam:t,visibleEntities:s,handleShowAllGroups:n}=B(),r=(0,d.Pm)(),a=(0,d.SA)();o.useEffect((()=>{a&&"all"!==s&&n()}),[n,a,s]);return(0,j.jsx)(i.r,{loading:!r,children:a&&t?(0,j.jsx)(ve,{...e}):(0,j.jsx)(ge,{...e})})}function ge({database:e,nodeId:t,groupId:s,pDiskId:n,viewContext:r,parentRef:o,initialEntitiesCount:a}){const{searchValue:i,visibleEntities:l,handleShowAllGroups:u}=B(),c=(0,d.SA)(),{columnsToShow:m,columnsToSelect:p,setColumns:h}=ce({visibleEntities:l,viewContext:r});return(0,j.jsx)(ie,{database:e,nodeId:t,groupId:s,pDiskId:n,searchValue:i,visibleEntities:l,onShowAll:u,parentRef:o,renderControls:({totalEntities:e,foundEntities:t,inited:s})=>(0,j.jsx)($,{withTypeSelector:!0,withGroupBySelect:c,entitiesCountCurrent:t,entitiesCountTotal:e,entitiesLoading:!s,columnsToSelect:p,handleSelectedColumnsUpdate:h}),renderErrorMessage:W,columns:m,initialEntitiesCount:a})}function ve({database:e,nodeId:t,groupId:s,pDiskId:n,parentRef:o,viewContext:i}){const[d]=(0,r.Nt)(),{searchValue:c,storageGroupsGroupByParam:m,visibleEntities:p,handleShowAllGroups:h}=B(),{columnsToShow:g,columnsToSelect:v,setColumns:f}=ce({visibleEntities:p,viewContext:i}),{currentData:S,isFetching:N,error:k}=u.S.useGetStorageGroupsInfoQuery({database:e,with:"all",nodeId:t,groupId:s,pDiskId:n,filter:c,shouldUseGroupsHandler:!0,group:m},{pollingInterval:d}),b=void 0===S&&N,{tableGroups:y,found:x=0,total:w=0}=S||{},{expandedGroups:D,setIsGroupExpanded:I}=(0,pe.$)(y);return(0,j.jsxs)(l.L,{children:[(0,j.jsx)(l.L.Controls,{children:(0,j.jsx)($,{withTypeSelector:!0,withGroupBySelect:!0,entitiesCountCurrent:x,entitiesCountTotal:w,entitiesLoading:b,columnsToSelect:v,handleSelectedColumnsUpdate:f})}),k?(0,j.jsx)(a.o,{error:k}):null,(0,j.jsx)(l.L.Table,{loading:b,className:V("groups-wrapper"),children:null!==y&&void 0!==y&&y.length?y.map((({name:r,count:a})=>{const i=D[r];return(0,j.jsx)(me.Q,{title:r,count:a,entityName:R("groups"),expanded:i,onIsExpandedChange:I,children:(0,j.jsx)(ie,{database:e,parentRef:o,nodeId:t,groupId:s,pDiskId:n,filterGroup:r,filterGroupBy:m,searchValue:c,visibleEntities:"all",onShowAll:h,renderErrorMessage:W,columns:g,initialEntitiesCount:a})},r)})):R("no-groups")})]})}var fe=s(67298),Se=s(71294);const Ne=JSON.parse('{"empty.default":"No such nodes","empty.out_of_space":"No nodes with out of space errors","empty.degraded":"No degraded nodes","empty.small_uptime":"No nodes with uptime < 1h","empty.several_filters":"No nodes match current filters combination","show_all":"Show all nodes"}'),ke=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432","empty.out_of_space":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0443\u0437\u043b\u043e\u0432","empty.small_uptime":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432 \u0441 uptime < 1h","empty.several_filters":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0443\u0437\u043b\u044b"}'),be=(0,U.g4)("ydb-storage-nodes",{ru:ke,en:Ne}),ye=({visibleEntities:e,nodesUptimeFilter:t,onShowAll:s})=>{let n;return e===C.r.space&&(n=be("empty.out_of_space")),e===C.r.missing&&(n=be("empty.degraded")),t===_.cW.SmallUptime&&(n=be("empty.small_uptime")),e!==C.r.all&&t!==_.cW.All&&(n=be("empty.several_filters")),n?(0,j.jsx)(te,{title:n,showAll:be("show_all"),onShowAll:s}):null};var xe=s(48532);const we=async e=>{const{type:t="static",storage:s=!0,limit:n,offset:r,sortParams:o,filters:a,columnsIds:i}=e,{searchValue:l,nodesUptimeFilter:d,visibleEntities:u,database:c,nodeId:m,groupId:p,filterGroup:h,filterGroupBy:g}=null!==a&&void 0!==a?a:{},{sortOrder:v,columnId:f}=null!==o&&void 0!==o?o:{},S=(0,N.kU)(f),k=S?(0,oe.T)(S,v):void 0,b=(0,ae.R)(i,N.fN),y=await window.api.viewer.getNodes({type:t,storage:s,limit:n,offset:r,sort:k,filter:l,uptime:(0,_.Fo)(d),with:u,database:c,node_id:m,group_id:p,filter_group:h,filter_group_by:g,fieldsRequired:b}),x=(0,xe.rz)(y);return{data:x.nodes||[],found:x.found||0,total:x.total||0}},De=(0,z.cn)("ydb-storage-nodes"),Ie=e=>De("node",{unavailable:(0,_.X7)(e)}),Ce=({columns:e,database:t,nodeId:s,groupId:n,filterGroup:r,filterGroupBy:a,searchValue:i,visibleEntities:l,nodesUptimeFilter:d,onShowAll:u,parentRef:c,renderControls:m,renderErrorMessage:p,initialEntitiesCount:h})=>{const g=o.useMemo((()=>({searchValue:i,visibleEntities:l,nodesUptimeFilter:d,database:t,nodeId:s,groupId:n,filterGroup:r,filterGroupBy:a})),[i,l,d,t,s,n,r,a]);return(0,j.jsx)(K.k5,{columnsWidthLSKey:k,parentRef:c,columns:e,fetchData:we,rowHeight:51,limit:50,initialEntitiesCount:h,renderControls:m,renderErrorMessage:p,renderEmptyDataMessage:()=>l!==C.r.all||d!==_.cW.All?(0,j.jsx)(ye,{onShowAll:u,nodesUptimeFilter:d,visibleEntities:l}):be("empty.default"),getRowClassName:Ie,filters:g,tableName:"storage-nodes"})};var je=s(4557),Pe=s(78762),Ae=s(10576);const Ee=(0,z.cn)("ydb-storage-nodes-columns"),Te=({viewContext:e})=>({name:N.vg.PDisks,header:N.uG.PDisks,className:Ee("pdisks-column"),render:({row:t})=>{var s;return(0,j.jsx)("div",{className:Ee("pdisks-wrapper"),children:null===(s=t.PDisks)||void 0===s?void 0:s.map((s=>{var n;const r=null===(n=t.VDisks)||void 0===n?void 0:n.filter((e=>e.PDiskId===s.PDiskId));return(0,j.jsx)("div",{className:Ee("pdisks-item"),children:(0,j.jsx)(Ae.E,{data:s,vDisks:r,viewContext:e})},s.PDiskId)}))})},align:je.Ay.CENTER,sortable:!1,width:900,resizeable:!1});function Ue({visibleEntities:e,database:t,additionalNodesProps:s,viewContext:n}){const r=o.useMemo((()=>(({database:e,additionalNodesProps:t,viewContext:s})=>{const n=null===t||void 0===t?void 0:t.getNodeRef;return[(0,Pe._E)(),(0,Pe.Nh)({getNodeRef:n,database:e}),(0,Pe.eT)(),(0,Pe.uk)(),(0,Pe.OX)(),(0,Pe.jl)(),(0,Pe.fr)(),(0,Pe.kv)(),(0,Pe.pH)(),(0,Pe.iX)(),(0,Pe.Bg)(),(0,Pe.Rn)(),(0,Pe.Vz)(),Te({viewContext:s})].map((e=>({...e,sortable:(0,N.sp)(e.name)})))})({database:t,additionalNodesProps:s,viewContext:n})),[t,s,n]),a=o.useMemo((()=>e===C.r.missing?[...y,N.vg.Missing]:y),[e]);return(0,le.K)(r,"storageNodesSelectedColumns",N.uG,b,a)}const Ge=e=>{const{storageNodesGroupByParam:t,visibleEntities:s,nodesUptimeFilter:n,handleShowAllNodes:r}=B(),a=(0,d.Pm)(),l=(0,d.Ye)();o.useEffect((()=>{!l||"all"===s&&n===_.cW.All||r()}),[r,n,l,s]);return(0,j.jsx)(i.r,{loading:!a,children:l&&t?(0,j.jsx)(Le,{...e}):(0,j.jsx)(Re,{...e})})};function Re({database:e,nodeId:t,groupId:s,viewContext:n,parentRef:r,initialEntitiesCount:o}){const{searchValue:a,visibleEntities:i,nodesUptimeFilter:l,handleShowAllNodes:u}=B(),c=(0,d.Ye)(),{columnsToShow:m,columnsToSelect:p,setColumns:h}=Me({database:e,viewContext:n});return(0,j.jsx)(Ce,{database:e,nodeId:t,groupId:s,searchValue:a,visibleEntities:i,nodesUptimeFilter:l,onShowAll:u,parentRef:r,renderControls:({totalEntities:e,foundEntities:t,inited:s})=>(0,j.jsx)(Y,{withTypeSelector:!0,withGroupBySelect:c,entitiesCountCurrent:t,entitiesCountTotal:e,entitiesLoading:!s,columnsToSelect:p,handleSelectedColumnsUpdate:h}),renderErrorMessage:W,columns:m,initialEntitiesCount:o})}function Le({database:e,groupId:t,nodeId:s,viewContext:n,parentRef:o}){const[a]=(0,r.Nt)(),{searchValue:i,storageNodesGroupByParam:d,handleShowAllNodes:c}=B(),{columnsToShow:m,columnsToSelect:p,setColumns:h}=Me({database:e,viewContext:n}),{currentData:g,isFetching:v,error:f}=u.S.useGetStorageNodesInfoQuery({database:e,with:"all",filter:i,node_id:s,group_id:t,group:d},{pollingInterval:a}),S=void 0===g&&v,{tableGroups:N,found:k=0,total:b=0}=g||{},{expandedGroups:y,setIsGroupExpanded:x}=(0,pe.$)(N);return(0,j.jsxs)(l.L,{children:[(0,j.jsx)(l.L.Controls,{children:(0,j.jsx)(Y,{withTypeSelector:!0,withGroupBySelect:!0,entitiesCountCurrent:k,entitiesCountTotal:b,entitiesLoading:S,columnsToSelect:p,handleSelectedColumnsUpdate:h})}),f?(0,j.jsx)(M.o,{error:f}):null,(0,j.jsx)(l.L.Table,{loading:S,className:V("groups-wrapper"),children:null!==N&&void 0!==N&&N.length?N.map((({name:n,count:r})=>{const a=y[n];return(0,j.jsx)(me.Q,{title:n,count:r,entityName:R("nodes"),expanded:a,onIsExpandedChange:x,children:(0,j.jsx)(Ce,{database:e,parentRef:o,nodeId:s,groupId:t,searchValue:i,visibleEntities:"all",nodesUptimeFilter:_.cW.All,onShowAll:c,filterGroup:n,filterGroupBy:d,renderErrorMessage:W,columns:m,initialEntitiesCount:r})},n)})):R("no-nodes")})]})}function Me({database:e,viewContext:t}){const{balancer:s}=(0,fe.Zd)(),{additionalNodesProps:n}=(0,Se.B)({balancer:s}),{visibleEntities:r}=B();return Ue({additionalNodesProps:n,visibleEntities:r,database:e,viewContext:t})}var ze=s(3218);const Ve=e=>{const{storageType:t}=B();return"nodes"===t?(0,j.jsx)(Ge,{initialEntitiesCount:(0,ze.b0)(e.viewContext),...e}):(0,j.jsx)(he,{initialEntitiesCount:(0,ze.QQ)(e.viewContext),...e})};var We=s(64689),Oe=s(86200);const Fe=e=>e.trim().toLowerCase();function He(e,t,s){let r=e||[];return r=((e,t)=>{const s=Fe(t);return s?e.filter((e=>{var t,n;return(null===(t=e.NodeId)||void 0===t?void 0:t.toString().includes(s))||(null===(n=e.Host)||void 0===n?void 0:n.toLowerCase().includes(s))})):e})(r,t),r=((e=[],t)=>t===_.cW.All?e:e.filter((({StartTime:e})=>!e||(0,Oe.kc)(e)<n.Jg)))(r,s),r}function _e(e,t){let s=e||[];return s=((e,t)=>{const s=Fe(t);return s?e.filter((e=>{var t,n;return(null===(t=e.PoolName)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(n=e.GroupId)||void 0===n?void 0:n.toString().includes(s))})):e})(s,t),s}var Be=s(17594);function $e({data:e,columns:t,visibleEntities:s,onShowAll:r,sort:o,handleSort:a}){return e.length||s===C.r.all?(0,j.jsx)(Be.l,{columnsWidthLSKey:f.qK,data:e,columns:t,settings:n.N3,emptyDataMessage:(0,se.A)("empty.default"),sortOrder:o,onSort:a},s):(0,j.jsx)(ne,{onShowAll:r,visibleEntities:s})}const Ye={...n.N3,dynamicRenderMinSize:51};function Ke({data:e,columns:t,visibleEntities:s,nodesUptimeFilter:n,sort:r,onShowAll:o,handleSort:a}){return e.length||s===C.r.all&&n===_.cW.All?(0,j.jsx)(Be.l,{columnsWidthLSKey:k,data:e,columns:t,settings:Ye,emptyDataMessage:be("empty.default"),rowClassName:Ie,sortOrder:r,onSort:a},s):(0,j.jsx)(ye,{visibleEntities:s,nodesUptimeFilter:n,onShowAll:o})}function Je({sortValue:e,sortOrder:t},s){return(0,r.GY)({initialSortColumn:e,initialSortOrder:t,multiple:!1,onSort:e=>{const t=null!==e&&void 0!==e&&e[0]?{sortValue:e[0].columnId,sortOrder:e[0].order}:void 0;s(t)}})}const Qe=({database:e,viewContext:t,nodeId:s,groupId:n,pDiskId:a})=>{var i,c;const{balancer:m}=(0,fe.Zd)(),{additionalNodesProps:p}=(0,Se.B)({balancer:m}),{storageType:h,searchValue:g,visibleEntities:v,nodesUptimeFilter:f,handleShowAllGroups:S,handleShowAllNodes:N}=B(),k=(0,d.Pm)(),b=(0,d.YA)(),[y]=(0,r.Nt)(),x="groups"===h,w="nodes"===h,[D,I]=o.useState(void 0),C=D||ze.ex,[P,A]=o.useState(void 0),E=P||(0,ze.Zh)(v),{columnsToShow:T,columnsToSelect:U,setColumns:G}=Ue({additionalNodesProps:p,visibleEntities:v,database:e,viewContext:t}),{columnsToShow:R,columnsToSelect:z,setColumns:W}=ce({visibleEntities:v,viewContext:t}),O=u.S.useGetStorageNodesInfoQuery({database:e,with:v,node_id:s,group_id:n},{skip:!w,pollingInterval:y}),F=u.S.useGetStorageGroupsInfoQuery({database:e,with:v,nodeId:s,groupId:n,pDiskId:a,shouldUseGroupsHandler:b,fieldsRequired:"all"},{skip:!x||!k,pollingInterval:y}),{currentData:H,isFetching:_,error:K}=w?O:F,{currentData:{nodes:J=[]}={}}=O,{currentData:{groups:Q=[]}={}}=F,q=(null===(i=O.currentData)||void 0===i?void 0:i.total)||0,X=(null===(c=F.currentData)||void 0===c?void 0:c.total)||0,Z=void 0===H&&_,ee=o.useMemo((()=>He(J,g,f)),[J,f,g]),te=o.useMemo((()=>_e(Q,g)),[g,Q]),[se,ne]=Je(C,I),[re,oe]=Je(E,A);return(0,We.P)(K)?(0,j.jsx)(L.O,{position:"left"}):(0,j.jsxs)(l.L,{children:[(0,j.jsx)(l.L.Controls,{children:(0,j.jsxs)(o.Fragment,{children:[x?(0,j.jsx)($,{withTypeSelector:!0,entitiesCountCurrent:te.length,entitiesCountTotal:X,entitiesLoading:Z,columnsToSelect:z,handleSelectedColumnsUpdate:W}):null,w?(0,j.jsx)(Y,{withTypeSelector:!0,entitiesCountCurrent:ee.length,entitiesCountTotal:q,entitiesLoading:Z,columnsToSelect:U,handleSelectedColumnsUpdate:G}):null]})}),K?(0,j.jsx)(M.o,{error:K}):null,(0,j.jsx)(l.L.Table,{loading:Z||!k,className:V("table"),children:H?(0,j.jsxs)(o.Fragment,{children:[x?(0,j.jsx)($e,{visibleEntities:v,data:te,onShowAll:S,sort:re,handleSort:oe,columns:R},"groups"):null,w?(0,j.jsx)(Ke,{visibleEntities:v,nodesUptimeFilter:f,data:ee,onShowAll:N,sort:se,handleSort:ne,columns:T},"nodes"):null]}):null})]})},qe=({parentRef:e,...t})=>{var s,o,a,i;const[l]=(0,r.iK)(n.Ku),d={nodeId:null===(s=t.nodeId)||void 0===s?void 0:s.toString(),pDiskId:null===(o=t.pDiskId)||void 0===o?void 0:o.toString(),groupId:null===(a=t.groupId)||void 0===a?void 0:a.toString(),vDiskSlotId:null===(i=t.vDiskSlotId)||void 0===i?void 0:i.toString()};return l?(0,j.jsx)(Ve,{parentRef:e,viewContext:d,...t}):(0,j.jsx)(Qe,{viewContext:d,...t})}},71708:(e,t,s)=>{s.d(t,{Q:()=>d});s(59284);var n=s(33705),r=s(98089),o=s(47665),a=s(77506),i=s(60712);const l=(0,a.cn)("ydb-table-group");function d({children:e,title:t,entityName:s,count:a,expanded:d=!1,onIsExpandedChange:u}){const c=()=>{u(t,!d)};return(0,i.jsxs)("div",{className:l(null),children:[(0,i.jsx)("button",{onClick:c,className:l("button"),title:t,children:(0,i.jsxs)("div",{className:l("title-wrapper"),children:[(0,i.jsx)(n.I,{direction:d?"top":"bottom"}),(0,i.jsxs)("div",{className:l("title"),children:[(0,i.jsx)(r.E,{variant:"subheader-2",children:t}),(0,i.jsxs)(r.E,{variant:"body-2",color:"secondary",className:l("count"),children:[s,": ",(0,i.jsx)(o.J,{theme:"normal",children:a})]})]})]})}),d?(0,i.jsx)("div",{className:l("content"),children:e}):null]})}},62710:(e,t,s)=>{s.d(t,{$:()=>r});var n=s(59284);function r(e){const[t,s]=n.useState({});n.useEffect((()=>{null!==e&&void 0!==e&&e.length&&s((t=>e.reduce(((e,{name:s})=>{const n=t[s];return{...e,[s]:null!==n&&void 0!==n&&n}}),{})))}),[e]);return{expandedGroups:t,setIsGroupExpanded:n.useCallback(((e,t)=>{s((s=>({...s,[e]:t})))}),[])}}},3218:(e,t,s)=>{s.d(t,{OH:()=>f,QQ:()=>k,Zh:()=>v,b0:()=>N,ex:()=>m,k_:()=>c});var n=s(6388),r=s(86782),o=s(87082),a=s(7435),i=s(16439),l=s(10360);const d=(0,i.H)(1,2,["success","warning","danger"]),u={"block-4-2":(0,i.H)(1,2,["success","warning","danger"]),"mirror-3-dc":(0,i.H)(1,3,["success","warning","danger"])},c=e=>{var t;return(void 0!==(t=e.ErasureSpecies)&&t in u?u[e.ErasureSpecies]:d)(e.Degraded)},m={sortValue:r.vg.NodeId,sortOrder:n.VU},p={sortValue:l.UW.PoolName,sortOrder:n.VU},h={sortValue:l.UW.Degraded,sortOrder:n.xN},g={sortValue:l.UW.Usage,sortOrder:n.xN};function v(e){return e===o.r.missing?h:e===o.r.space?g:p}function f(e,t){var s;let n=!0;return(0,a.f8)(null===(s=e.VDiskId)||void 0===s?void 0:s.GroupID)&&null!==t&&void 0!==t&&t.groupId&&(n&&=String(e.VDiskId.GroupID)===t.groupId),(0,a.f8)(e.NodeId)&&null!==t&&void 0!==t&&t.nodeId&&(n&&=String(e.NodeId)===t.nodeId),(0,a.f8)(e.PDiskId)&&null!==t&&void 0!==t&&t.pDiskId&&(n&&=String(e.PDiskId)===t.pDiskId),(0,a.f8)(e.VDiskSlotId)&&null!==t&&void 0!==t&&t.vDiskSlotId&&(n&&=String(e.VDiskSlotId)===t.vDiskSlotId),n}const S=10;function N({nodeId:e,pDiskId:t,vDiskSlotId:s}){return(0,a.f8)(e)||(0,a.f8)(t)||(0,a.f8)(s)?1:S}function k({vDiskSlotId:e,groupId:t}){return(0,a.f8)(t)||(0,a.f8)(e)?1:S}},11906:(e,t,s)=>{s.d(t,{$:()=>a,N:()=>o});var n=s(16439),r=s(78034);const o=e=>{var t;const s=(e.Nodes||[]).map((e=>{const{SystemState:t,...s}=e;return{...s,...(0,r.q1)(t)}}));return{Nodes:s,NodeGroups:null===(t=e.NodeGroups)||void 0===t?void 0:t.map((({GroupName:e,NodeCount:t})=>{if(e&&t)return{name:e,count:Number(t)}})).filter((e=>Boolean(e))),TotalNodes:Number(e.TotalNodes)||s.length,FoundNodes:Number(e.FoundNodes)}},a=(0,n.H)(60,80,["success","warning","danger"])},87082:(e,t,s)=>{s.d(t,{G:()=>r,r:()=>n});const n={all:"all",missing:"missing",space:"space"},r={groups:"groups",nodes:"nodes"}},16029:(e,t,s)=>{s.d(t,{t:()=>r});var n=s(48532);async function r({version:e="v2",shouldUseGroupsHandler:t,...s},r){if(t&&"v1"!==e){const e=await window.api.storage.getStorageGroups({...s},r);return(0,n.Rv)(e)}{const t=await window.api.viewer.getStorageInfo({version:e,...s},r);return(0,n.Qi)(t)}}},10174:(e,t,s)=>{s.d(t,{S:()=>a});var n=s(21334),r=s(16029),o=s(48532);const a=n.F.injectEndpoints({endpoints:e=>({getStorageNodesInfo:e.query({queryFn:async(e,{signal:t})=>{try{const s=await window.api.viewer.getNodes({storage:!0,type:"static",...e},{signal:t});return{data:(0,o.rz)(s)}}catch(s){return{error:s}}},providesTags:["All","StorageData"]}),getStorageGroupsInfo:e.query({queryFn:async(e,{signal:t})=>{try{return{data:await(0,r.t)(e,{signal:t})}}catch(s){return{error:s}}},providesTags:["All","StorageData"]})}),overrideExisting:"throw"})},48532:(e,t,s)=>{s.d(t,{Rv:()=>y,rz:()=>k,Qi:()=>b});var n=s(94025),r=s(67375),o=s(7187),a=s(27295),i=s(78034),l=s(3810),d=s(73891),u=s(86200),c=s(51930),m=s(64036),p=s(78461);function h(e={}){var t,s,n,r;const{Whiteboard:i={},PDisk:l,...d}=e,g={...i,...d,VDiskId:i.VDiskId},v=l?function(e={}){var t,s,n;const{Whiteboard:r,...i}=e,l={...r,...i,PDiskId:null===r||void 0===r?void 0:r.PDiskId},d=i.PDiskId||(0,o.r$)(l.NodeId,l.PDiskId),{AllocatedPercent:u,AllocatedSize:m,AvailableSize:h,TotalSize:g}=(0,a.hK)({AvailableSize:l.AvailableSize,TotalSize:l.TotalSize}),v=null!==(t=null===(s=i.Type)||void 0===s?void 0:s.toUpperCase())&&void 0!==t?t:(0,p.Y)(null===r||void 0===r?void 0:r.Category),f=(0,c.d)({State:null===r||void 0===r?void 0:r.State,AllocatedPercent:u}),S=null!==(n=i.SlotSize)&&void 0!==n?n:null===r||void 0===r?void 0:r.EnforcedDynamicSlotSize;return{...l,StringifiedId:d,AllocatedPercent:u,AllocatedSize:m,AvailableSize:h,TotalSize:g,Type:v,Severity:f,SlotSize:S}}({...l,NodeId:g.NodeId}):void 0,f=null!==(t=null===v||void 0===v?void 0:v.PDiskId)&&void 0!==t?t:null===i||void 0===i?void 0:i.PDiskId,S=null!==(s=d.VDiskId)&&void 0!==s?s:(0,u.U9)(i.VDiskId),N=(0,m.b)(g),k=(0,a.LW)({AvailableSize:null!==(n=g.AvailableSize)&&void 0!==n?n:null===l||void 0===l?void 0:l.AvailableSize,AllocatedSize:g.AllocatedSize}),b=null===(r=d.Donors)||void 0===r?void 0:r.map((e=>h({...e,Whiteboard:{...e.Whiteboard,DonorMode:!0}})));return{...g,...k,PDisk:v,Donors:b,PDiskId:f,StringifiedId:S,Severity:N}}function g(e){const{DiskSpace:t,VDisks:s=[]}=e;return t||(0,o.XY)(Math.max(...s.map((e=>(0,o.H7)(e.DiskSpace)))))}const v=(e,t)=>{var s;const n=(0,a.WT)(e);return{...n,StoragePoolName:t,Donors:null===n||void 0===n||null===(s=n.Donors)||void 0===s?void 0:s.map((e=>({...e,StoragePoolName:t})))}},f=e=>{const{VDisks:t=[],PoolName:s,Usage:n=0,Read:r=0,Write:o=0,Used:a=0,Limit:i=0,Degraded:l=0,Kind:d,MediaType:u,GroupID:c,Overall:m,GroupGeneration:p}=e,h=t.map((e=>v(e,s))),f=100*Number(n),S=g(e);return{...e,PoolName:s,GroupId:c,MediaType:u||d,VDisks:h,Usage:f,Overall:m,GroupGeneration:p?String(p):void 0,Read:Number(r),Write:Number(o),Used:Number(a),Limit:Number(i),Degraded:Number(l),DiskSpace:S}},S=(e,t)=>{let s=[];return e?s=e.map(f):null===t||void 0===t||t.forEach((e=>{var t;null===(t=e.Groups)||void 0===t||t.forEach((t=>{s.push(((e,t)=>{var s;let o,i=0,d=0,u=0,c=0,m=0;const{Name:p,MediaType:h}=t;if(e.VDisks)for(const l of e.VDisks){const{Replicated:e,VDiskState:t,AvailableSize:s,AllocatedSize:p,PDisk:h,ReadThroughput:g,WriteThroughput:v}=l,{Type:f,State:S,AvailableSize:N}=(0,a.or)(h);e&&S===n.t.Normal&&t===r.W.OK||(i+=1);const k=Number(null!==s&&void 0!==s?s:N)||0,b=Number(p)||0;d+=b,u+=k+b,c+=Number(g)||0,m+=Number(v)||0,o=!f||f!==o&&o?"Mixed":f}const f=null===(s=e.VDisks)||void 0===s?void 0:s.map((e=>v(e,p))),S=u?(0,l.y)({Used:d,Limit:u},5):void 0,N=g(e);return{...e,GroupGeneration:e.GroupGeneration?String(e.GroupGeneration):void 0,GroupId:e.GroupID,Overall:e.Overall,VDisks:f,Usage:S,Read:c,Write:m,PoolName:p,Used:d,Limit:u,Degraded:i,MediaType:h||o||void 0,DiskSpace:N}})(t,e))}))})),s},N=e=>{var t,s,r;const o=(null===(t=e.PDisks)||void 0===t?void 0:t.filter((e=>e.State!==n.t.Normal)).length)||0,l=null===(s=e.PDisks)||void 0===s?void 0:s.map((t=>({...(0,a.or)(t),NodeId:e.NodeId}))),d=null===(r=e.VDisks)||void 0===r?void 0:r.map((t=>({...(0,a.WT)(t),NodeId:e.NodeId})));return{...(0,i.q1)(e.SystemState),NodeId:e.NodeId,DiskSpaceUsage:e.DiskSpaceUsage,PDisks:l,VDisks:d,Missing:o}},k=e=>{const{Nodes:t,TotalNodes:s,FoundNodes:n,NodeGroups:r}=e,o=null===r||void 0===r?void 0:r.map((({GroupName:e,NodeCount:t})=>{if(e&&t)return{name:e,count:Number(t)}})).filter((e=>Boolean(e))),a=null===t||void 0===t?void 0:t.map(N);return{nodes:a,total:Number(s)||(null===a||void 0===a?void 0:a.length),found:Number(n),tableGroups:o}},b=e=>{const{StoragePools:t,StorageGroups:s,TotalGroups:n,FoundGroups:r}=e,o=S(s,t);return{groups:o,total:Number(n)||o.length,found:Number(r)}};function y(e){const{FoundGroups:t,TotalGroups:s,StorageGroups:n=[],StorageGroupGroups:r}=e,o=n.map((e=>{const{Usage:t,DiskSpaceUsage:s,Read:n,Write:r,Used:o,Limit:a,MissingDisks:i,VDisks:l=[],Overall:u,LatencyPutTabletLog:c,LatencyPutUserData:m,LatencyGetFast:p}=e,v=l.map(h),f=g(e);return{...e,Usage:t,DiskSpaceUsage:s,Read:Number(n),Write:Number(r),Used:Number(o),Limit:Number(a),LatencyPutTabletLogMs:(0,d.Jc)(c),LatencyPutUserDataMs:(0,d.Jc)(m),LatencyGetFastMs:(0,d.Jc)(p),Degraded:Number(i),Overall:u,VDisks:v,DiskSpace:f}})),a=null===r||void 0===r?void 0:r.map((({GroupName:e,GroupCount:t})=>{if(e&&t)return{name:e,count:Number(t)}})).filter((e=>Boolean(e)));return{groups:o,total:Number(s)||o.length,found:Number(t),tableGroups:a}}},94025:(e,t,s)=>{let n;s.d(t,{t:()=>n}),function(e){e.Initial="Initial",e.InitialFormatRead="InitialFormatRead",e.InitialFormatReadError="InitialFormatReadError",e.InitialSysLogRead="InitialSysLogRead",e.InitialSysLogReadError="InitialSysLogReadError",e.InitialSysLogParseError="InitialSysLogParseError",e.InitialCommonLogRead="InitialCommonLogRead",e.InitialCommonLogReadError="InitialCommonLogReadError",e.InitialCommonLogParseError="InitialCommonLogParseError",e.CommonLoggerInitError="CommonLoggerInitError",e.Normal="Normal",e.OpenFileError="OpenFileError",e.ChunkQuotaError="ChunkQuotaError",e.DeviceIoError="DeviceIoError",e.Missing="Missing",e.Timeout="Timeout",e.NodeDisconnected="NodeDisconnected",e.Unknown="Unknown"}(n||(n={}))},67375:(e,t,s)=>{let n;s.d(t,{W:()=>n}),function(e){e.Initial="Initial",e.LocalRecoveryError="LocalRecoveryError",e.SyncGuidRecovery="SyncGuidRecovery",e.SyncGuidRecoveryError="SyncGuidRecoveryError",e.OK="OK",e.PDiskError="PDiskError"}(n||(n={}))},51930:(e,t,s)=>{s.d(t,{d:()=>i});var n=s(54090),r=s(16439),o=s(5707);const a=(0,r.H)(85,95,[n.m.Green,n.m.Yellow,n.m.Red]);function i(e){const t=function(e){return t=e,void 0!==t&&t in o.iZ?o.iZ[e]:o.Km;var t}(e.State),s=a(e.AllocatedPercent||0);return t!==o.Km&&s?Math.max(t,o.aW[s]):t}},64036:(e,t,s)=>{s.d(t,{b:()=>r});var n=s(5707);function r(e){const{DiskSpace:t,VDiskState:s,FrontQueues:r,Replicated:a}=e;if(!s)return n.Km;const i=o(t),l=function(e){var t;if(!e)return n.Km;return null!==(t=n.qs[e])&&void 0!==t?t:n.Km}(s),d=Math.min(n.aW.Orange,o(r));let u=Math.max(i,l,d);return a||u!==n.aW.Green||(u=n.aW.Blue),u}function o(e){var t;return e&&null!==(t=n.aW[e])&&void 0!==t?t:n.Km}},5707:(e,t,s)=>{s.d(t,{A$:()=>a,Km:()=>i,Yh:()=>l,aW:()=>o,iZ:()=>u,qs:()=>d});var n=s(94025),r=s(67375);const o={Grey:0,Green:1,Blue:2,Yellow:3,Orange:4,Red:5},a=Object.entries(o).reduce(((e,[t,s])=>({...e,[s]:t})),{}),i=o.Grey,l=a[i],d={[r.W.OK]:o.Green,[r.W.Initial]:o.Yellow,[r.W.SyncGuidRecovery]:o.Yellow,[r.W.LocalRecoveryError]:o.Red,[r.W.SyncGuidRecoveryError]:o.Red,[r.W.PDiskError]:o.Red},u={[n.t.Initial]:o.Grey,[n.t.Normal]:o.Green,[n.t.InitialFormatRead]:o.Yellow,[n.t.InitialSysLogRead]:o.Yellow,[n.t.InitialCommonLogRead]:o.Yellow,[n.t.InitialFormatReadError]:o.Red,[n.t.InitialSysLogReadError]:o.Red,[n.t.InitialSysLogParseError]:o.Red,[n.t.InitialCommonLogReadError]:o.Red,[n.t.InitialCommonLogParseError]:o.Red,[n.t.CommonLoggerInitError]:o.Red,[n.t.OpenFileError]:o.Red,[n.t.ChunkQuotaError]:o.Red,[n.t.DeviceIoError]:o.Red}},78461:(e,t,s)=>{s.d(t,{Y:()=>r});const n={HDD:"HDD",SSD:"SSD",MVME:"NVME"};function r(e){if(!e)return;const t=function(e,t){const s={};return Object.entries(t).reduce(((t,[n,r])=>{const o=e.length-t,a=o-r;return s[n]=e.substring(a,o)||"0",t+r}),0),s}(BigInt(e).toString(2),{isSolidState:1,kind:55,typeExt:8});if("1"===t.isSolidState)switch(parseInt(t.typeExt,2)){case 0:return n.SSD;case 2:return n.MVME}else if("0"===t.typeExt)return n.HDD}},7187:(e,t,s)=>{s.d(t,{H7:()=>i,NJ:()=>o,XY:()=>a,gh:()=>d,r$:()=>l});var n=s(7435),r=s(5707);function o(e){return"VDiskId"in e}function a(e){return void 0===e?r.Yh:r.A$[e]||r.Yh}function i(e){return e?r.aW[e]:0}function l(e,t){if((0,n.f8)(e)&&(0,n.f8)(t))return`${e}-${t}`}function d(e,t,s){return[e,t,s].join("-")}},27295:(e,t,s)=>{s.d(t,{LW:()=>u,WT:()=>l,hK:()=>c,or:()=>d});var n=s(86200),r=s(51930),o=s(64036),a=s(78461),i=s(7187);function l(e={}){var t;if(!(0,i.NJ)(e)){const{NodeId:t,PDiskId:s,VSlotId:r}=e;return{StringifiedId:(0,n.U9)({NodeId:t,PDiskId:s,VSlotId:r}),NodeId:t,PDiskId:s,VDiskSlotId:r}}const{PDisk:s,PDiskId:r,VDiskId:a,NodeId:c,Donors:m,AvailableSize:p,AllocatedSize:h,...g}=e,v=s?d({...s,NodeId:null!==(t=null===s||void 0===s?void 0:s.NodeId)&&void 0!==t?t:c}):void 0,f=null!==r&&void 0!==r?r:null===v||void 0===v?void 0:v.PDiskId,S=u({AvailableSize:null!==p&&void 0!==p?p:null===s||void 0===s?void 0:s.AvailableSize,AllocatedSize:h}),N=(0,o.b)(e),k=(0,n.U9)(a);return{...g,...S,VDiskId:a,NodeId:c,PDiskId:f,PDisk:v,Donors:null===m||void 0===m?void 0:m.map((e=>l({...e,DonorMode:!0}))),Severity:N,StringifiedId:k}}function d(e={}){const{AvailableSize:t,TotalSize:s,Category:n,State:o,PDiskId:l,NodeId:d,EnforcedDynamicSlotSize:u,...m}=e,p=(0,i.r$)(l,d),h=(0,a.Y)(n),g=c({AvailableSize:t,TotalSize:s}),v=(0,r.d)({State:o,AllocatedPercent:g.AllocatedPercent});return{...m,...g,PDiskId:l,NodeId:d,StringifiedId:p,Type:h,Category:n,State:o,Severity:v,SlotSize:u}}function u({AvailableSize:e,AllocatedSize:t}){const s=Number(e),n=Number(t),r=n+s;return{AvailableSize:s,AllocatedSize:n,TotalSize:r,AllocatedPercent:Math.round(100*n/r)}}function c({AvailableSize:e,TotalSize:t}){const s=Number(e),n=Number(t),r=n-s;return{AvailableSize:s,TotalSize:n,AllocatedSize:r,AllocatedPercent:Math.round(100*r/n)}}},69464:(e,t,s)=>{s.d(t,{T:()=>r});var n=s(6388);s(23536);const r=(e,t=n.xN)=>t===n.xN?`-${e}`:e},16439:(e,t,s)=>{s.d(t,{H:()=>n});const n=(e,t,s)=>n=>0<=n&&n<e?s[0]:e<=n&&n<t?s[1]:t<=n?s[2]:void 0},43951:(e,t,s)=>{s.d(t,{K:()=>o});var n=s(59284),r=s(59001);const o=(e,t,s,o,a)=>{const[i,l]=n.useState((()=>r.f.readUserSettingsValue(t,o)));return{columnsToShow:n.useMemo((()=>e.filter((e=>{const t=e.name,s=i.includes(t),n=null===a||void 0===a?void 0:a.includes(t);return s||n}))),[e,a,i]),columnsToSelect:n.useMemo((()=>e.map((e=>e.name)).map((e=>{const t=null===a||void 0===a?void 0:a.includes(e),n=i.includes(e);return{id:e,title:s[e],selected:t||n,required:t,sticky:t?"start":void 0}}))),[e,s,a,i]),setColumns:n.useCallback((e=>{const s=e.filter((e=>e.selected)).map((e=>e.id));r.f.setUserSettingsValue(t,s),l(s)}),[t])}}},16819:(e,t,s)=>{s.d(t,{a:()=>a});var n=s(59284),r=s(69024),o=s(59001);const a=e=>{const t=n.useCallback((()=>e?o.f.readUserSettingsValue(e,{}):{}),[e]),s=n.useCallback((t=>{e&&o.f.setUserSettingsValue(e,t)}),[e]);return(0,r.a)({saveSizes:s,getSizes:t})}},35736:(e,t,s)=>{function n({inverseColorize:e,warningThreshold:t=60,dangerThreshold:s=80,colorizeProgress:n,fillWidth:r}){let o=e?"danger":"good";return n&&(r>t&&r<=s?o="warning":r>s&&(o=e?"good":"danger")),o}s.d(t,{w:()=>n})},3810:(e,t,s)=>{s.d(t,{x:()=>o,y:()=>r});var n=s(16439);const r=(e,t=1)=>{const s=e.Limit?100*e.Used/e.Limit:0;return Math.floor(s/t)*t},o=(0,n.H)(80,85,["success","warning","danger"])},40781:(e,t,s)=>{function n(e,t){const s=e.reduce(((e,s)=>(t[s].forEach((t=>{e.add(t)})),e)),new Set);return Array.from(s).sort()}s.d(t,{R:()=>n})},58267:(e,t,s)=>{s.d(t,{PQ:()=>a,_8:()=>i});var n=s(54090),r=s(6354);const o={[r.r.Dead]:n.m.Red,[r.r.Created]:n.m.Yellow,[r.r.ResolveStateStorage]:n.m.Yellow,[r.r.Candidate]:n.m.Yellow,[r.r.BlockBlobStorage]:n.m.Yellow,[r.r.WriteZeroEntry]:n.m.Yellow,[r.r.Restored]:n.m.Yellow,[r.r.Discover]:n.m.Yellow,[r.r.Lock]:n.m.Yellow,[r.r.Stopped]:n.m.Yellow,[r.r.ResolveLeader]:n.m.Yellow,[r.r.RebuildGraph]:n.m.Yellow,[r.r.Deleted]:n.m.Green,[r.r.Active]:n.m.Green},a=(Object.keys(r.r),Object.entries(o).reduce(((e,[t,s])=>(e[s]?e[s].push(t):e[s]=[t],e)),{}),e=>{if(!e)return n.m.Grey;return t=e,Object.values(n.m).includes(t)?e:o[e];var t});function i(e){if(!e)return"unknown";switch(e){case r.r.Dead:return"danger";case r.r.Active:case r.r.Deleted:return"success";default:return"warning"}}}}]);