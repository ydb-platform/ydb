(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[3366],{38471:(e,t,n)=>{"use strict";n.d(t,{N:()=>Se});var i=n(34706),s=n(68045),d=n(72616),l=n(14561),a=n(6982);const r=e=>i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.5 6V5a2.5 2.5 0 0 0-5 0v1h5ZM4 5v1a3 3 0 0 0-3 3v3a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3V5a4 4 0 0 0-8 0Zm6.5 2.5H12A1.5 1.5 0 0 1 13.5 9v3a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 12V9A1.5 1.5 0 0 1 4 7.5h6.5Zm-1.75 2a.75.75 0 0 0-1.5 0v2a.75.75 0 0 0 1.5 0v-2Z",clipRule:"evenodd"}));var o=n(52519),c=n(11746),u=n(75813),m=n(23795),p=n(15178),I=n(14082),v=n(70610),b=n(31571),f=n(94078),g=n(23337),y=n(41577),h=n(87578);const S=(0,h.Ge)("list-container-view"),x=i.forwardRef((function(e,t){let{as:n="div",role:s="listbox",children:d,id:l,className:a,fixedHeight:r,extraProps:o,qa:c,style:u}=e;return i.createElement(y.k,Object.assign({qa:c,as:n,direction:"column",ref:t,grow:!0,tabIndex:-1,id:l,role:s,style:u,className:S({"fixed-height":r},a)},o),d)})),B=e=>null!==e&&"object"===typeof e&&"data"in e,E=(0,h.Ge)("list-recursive-renderer");function O(e){var t,{id:n,itemSchema:s,list:d}=e,l=(0,g._T)(e,["id","itemSchema","list"]);const a=l.children(n,d.structure.idToFlattenIndex[n]);if(B(s)&&s.children){const e=!d.state.expandedById||!(n in d.state.expandedById)||d.state.expandedById[n];return i.createElement("ul",{style:l.style,className:E(null,l.className),role:"group"},a,e&&Boolean(null===(t=d.structure.groupsState[n])||void 0===t?void 0:t.childrenIds)&&s.children.map(((e,t)=>i.createElement(O,Object.assign({list:d,id:d.structure.groupsState[n].childrenIds[t],itemSchema:e,key:t},l)))))}return a}function C(e){var{containerRef:t,renderItem:n,list:s}=e,d=(0,g._T)(e,["containerRef","renderItem","list"]);return i.createElement(x,Object.assign({ref:t},d),s.structure.items.map(((e,t)=>i.createElement(O,{key:t,itemSchema:e,id:s.structure.rootIds[t],list:s},n))))}const w=e=>{let{list:t,multiple:n}=e;return e=>{let{id:i}=e;t.state.disabledById[i]||(t.state.setActiveItemId(i),t.state.expandedById&&i in t.state.expandedById&&t.state.setExpanded?t.state.setExpanded((e=>Object.assign(Object.assign({},e),{[i]:!e[i]}))):t.state.setSelected((e=>Object.assign(Object.assign({},n?e:{}),{[i]:!n||!e[i]}))))}};var k=n(59143);const j=e=>{let{list:t,index:n,step:i,disabledItems:s={}}=e;const d=t.length;let l=(n+d)%d;for(let a=0;a<d;a+=1){if(t[l]&&!s[l])return l;l=(l+d+i)%d}},R="data-list-item",N={s:[22,44],m:[26,44],l:[34,52],xl:[44,62]},F=(e,t)=>{var n;if(document){const i=(t||document).querySelector(`[${R}="${e}"]`);i&&(null===(n=i.scrollIntoView)||void 0===n||n.call(i,{block:"nearest"}))}};var D=n(43334),_=n(85996);const P=e=>i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.03 10.53a.75.75 0 0 1-1.06 0L8 6.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06Z",clipRule:"evenodd"}));var T=n(24840),z=n(1713);const L=(0,h.Ge)("list-item-view"),q=e=>{var{children:t,indentation:n=1,className:s}=e,d=(0,g._T)(e,["children","indentation","className"]);return i.createElement(y.k,Object.assign({width:16*n,className:L("slot",s)},d),t)},V=i.forwardRef((function(e,t){var{id:n,as:s,size:d="m",active:a,selected:r,disabled:o,activeOnHover:c,className:u,hasSelectionIcon:p=!0,indentation:I,startSlot:v,subtitle:b,endSlot:f,title:h,height:S,expanded:x,dragging:B,style:E,role:O="option",onClick:C}=e,w=(0,g._T)(e,["id","as","size","active","selected","disabled","activeOnHover","className","hasSelectionIcon","indentation","startSlot","subtitle","endSlot","title","height","expanded","dragging","style","role","onClick"]);const k=s||"div",j="boolean"===typeof x,F=o?void 0:C,V="boolean"===typeof c?c:Boolean(F);return i.createElement(y.k,Object.assign({[R]:n,role:O,"aria-selected":r,onClick:F,className:L({active:B||a,selected:r&&!p,activeOnHover:V,radius:d,dragging:B,clickable:Boolean(F)},(0,z.W)({px:2},u)),style:Object.assign({minHeight:null!==S&&void 0!==S?S:N[d][Number(Boolean(b))]},E),as:k,ref:t,alignItems:"center",gap:"4",justifyContent:"space-between"},w),i.createElement(y.k,{gap:"2",alignItems:"center",grow:!0},p&&i.createElement(q,null,r?i.createElement(l.J,{data:D.Z,size:16,className:(0,T.V)({color:"info"})}):null),(e=>e&&e>=1?i.createElement(q,{indentation:Math.floor(e)}):null)(I),j?i.createElement(l.J,{className:L("icon",(0,T.V)({color:o?"hint":void 0})),data:x?_.Z:P,size:16}):null,v,i.createElement("div",{className:L("main-content")},"string"===typeof h?i.createElement(m.x,{ellipsis:!0,color:o?"hint":void 0,variant:j?"subheader-1":void 0},h):h,"string"===typeof b?i.createElement(m.x,{ellipsis:!0,color:o?"hint":"secondary"},b):b)),f)})),A=(0,h.Ge)("tree-list"),M=e=>{let{qa:t,id:n,size:s="m",className:d,list:l,multiple:a,containerRef:r,renderItem:o,renderContainer:u=C,onItemClick:m,mapItemDataToProps:p}=e;const I=(0,c.u)(),v=null!==n&&void 0!==n?n:I,b=i.useRef(null),f=null!==r&&void 0!==r?r:b,g=i.useMemo((()=>{if(null===m)return;return(e,t)=>{const n={id:e.id,list:l};if(m)null===m||void 0===m||m(n,t);else{w({list:l,multiple:a})(n,t)}}}),[m,l,a]);(e=>{let{containerRef:t,onItemClick:n,enabled:s,list:d}=e;const l=i.useCallback((function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var i,s;"number"===typeof e&&d.structure.visibleFlattenIds[e]&&(n&&F(d.structure.visibleFlattenIds[e],null===t||void 0===t?void 0:t.current),null===(s=(i=d.state).setActiveItemId)||void 0===s||s.call(i,d.structure.visibleFlattenIds[e]))}),[d.structure.visibleFlattenIds,d.state,t]),a=i.useCallback((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.preventDefault();const i=d.structure.visibleFlattenIds.findIndex((e=>e===d.state.activeItemId)),s=j({list:d.structure.visibleFlattenIds,index:(i>-1?i:n)+t,step:Math.sign(t),disabledItems:d.state.disabledById});l(s)}),[l,d.state.activeItemId,d.state.disabledById,d.structure.visibleFlattenIds]);i.useLayoutEffect((()=>{const e=null===t||void 0===t?void 0:t.current;if(s||!e)return;const i=e=>{switch(e.key){case k.V.ARROW_DOWN:a(e,1,-1);break;case k.V.ARROW_UP:a(e,-1);break;case k.V.SPACEBAR:case k.V.ENTER:d.state.activeItemId&&!d.state.disabledById[d.state.activeItemId]&&(e.preventDefault(),null===n||void 0===n||n({id:d.state.activeItemId}))}};return e.addEventListener("keydown",i),()=>{e.removeEventListener("keydown",i)}}),[t,s,a,d.state.activeItemId,d.state.disabledById,n])})({containerRef:f,onItemClick:g,list:l});return u({qa:t,id:`list-${v}`,size:s,containerRef:f,className:A(null,d),list:l,renderItem:(e,n,d)=>{const r=(e=>{let{qa:t,list:n,onItemClick:i,mapItemDataToProps:s,size:d="m",multiple:l=!1,id:a}=e;var r;const o=Object.assign(Object.assign(Object.assign({},n.structure.itemsState[a]),n.structure.groupsState[a]),{isLastItem:a===n.structure.visibleFlattenIds[n.structure.visibleFlattenIds.length-1]});let c;n.state.expandedById&&a in n.state.expandedById&&(c=n.state.expandedById[a]);const u=Object.assign({id:a,size:d,expanded:c,active:a===n.state.activeItemId,indentation:o.indentation,disabled:Boolean(null===(r=n.state.disabledById)||void 0===r?void 0:r[a]),selected:Boolean(n.state.selectedById[a]),hasSelectionIcon:Boolean(l)&&!o.childrenIds,onClick:i?e=>i({id:a},e):void 0},s(n.structure.itemsById[a]));return t&&(u.qa=((e,t)=>`${e}-${t}`)(t,a)),{data:n.structure.itemsById[a],props:u,context:o}})({qa:t,id:e,size:s,multiple:a,mapItemDataToProps:p,onItemClick:g,list:l});return o?o({data:r.data,props:r.props,context:r.context,index:n,renderContainerProps:d,list:l}):i.createElement(V,Object.assign({},r.props,d))}})};var $=n(56952);const U=e=>{let{item:t,groupedId:n,getItemId:i}=e,s=n;return"function"===typeof i?s=i(B(t)?t.data:t):t&&"object"===typeof t&&"id"in t&&t.id&&(s=t.id),s},W=(e,t)=>t?`${t}-${e}`:`${e}`,Z=e=>e.split("-");function J(e){let{items:t,expandedById:n,getItemId:s}=e;const d=i.useMemo((()=>function(e){let{items:t,getItemId:n,expandedById:i={}}=e;const s=[],d=(e,t,l,a)=>{const r=W(l,a),o=U({groupedId:r,item:t,getItemId:n});return a||s.push(o),e.push(o),B(t)&&t.children&&(o in i&&!i[o]||e.push(...t.children.reduce(((e,t,n)=>d(e,t,n,o)),[]))),e},l=t.reduce(((e,t,n)=>d(e,t,n)),[]),a={};for(const[r,o]of l.entries())a[o]=r;return{rootIds:s,visibleFlattenIds:l,idToFlattenIndex:a}}({items:t,expandedById:n,getItemId:s})),[t,n,s]);return d}function G(e){let{items:t,defaultExpandedState:n="expanded",getItemId:i}=e;const s={itemsById:{},groupsState:{},itemsState:{},initialState:{disabledById:{},selectedById:{},expandedById:{}}},d=e=>{let{item:t,index:l,parentGroupedId:a,parentId:r}=e;const o=W(l,a),c=U({groupedId:o,item:t,getItemId:i});r&&s.groupsState[r].childrenIds.push(c),s.itemsById[c]=t.data,s.itemsState[c]||(s.itemsState[c]={indentation:0}),"undefined"!==typeof r&&(s.itemsState[c].parentId=r),"undefined"!==typeof t.selected&&(s.initialState.selectedById[c]=t.selected),"undefined"!==typeof t.disabled&&(s.initialState.disabledById[c]=t.disabled),o&&(s.itemsState[c].indentation=Z(o).length-1),t.children&&(s.groupsState[c]={childrenIds:[]},s.initialState.expandedById&&("undefined"===typeof t.expanded?s.initialState.expandedById[c]="expanded"===n:s.initialState.expandedById[c]=t.expanded),t.children.forEach(((e,t)=>{d({item:e,index:t,parentGroupedId:o,parentId:c})})))};return t.forEach(((e,t)=>B(e)?d({item:e,index:t}):(e=>{let{item:t,index:n}=e;const d=U({groupedId:String(n),item:t,getItemId:i});s.itemsById[d]=t,s.itemsState[d]||(s.itemsState[d]={indentation:0}),t&&"object"===typeof t&&("selected"in t&&"boolean"===typeof t.selected&&(s.initialState.selectedById[d]=t.selected),"disabled"in t&&"boolean"===typeof t.disabled&&(s.initialState.disabledById[d]=t.disabled))})({item:e,index:t}))),s}const H=e=>{let{items:t,getItemId:n,defaultExpandedState:s="expanded",withExpandedState:d=!0,initialState:l,controlledState:a}=e;const{itemsById:r,groupsState:o,itemsState:c,initialState:u}=function(e){let{items:t,getItemId:n,defaultExpandedState:s}=e;const d=i.useRef(n).current;return i.useMemo((()=>G({items:t,getItemId:d,defaultExpandedState:s})),[d,s,t])}({items:t,getItemId:n,defaultExpandedState:s}),m=(e=>{let{initialState:t,withExpandedState:n}=e;const s=i.useRef(t),d=s.current!==t;s.current=t;const[l,a]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.disabledById)&&void 0!==e?e:{}})),[r,o]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.selectedById)&&void 0!==e?e:{}})),[c,u]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.expandedById)&&void 0!==e?e:{}})),[m,p]=i.useState((()=>null===t||void 0===t?void 0:t.activeItemId));d&&((null===t||void 0===t?void 0:t.disabledById)&&a((e=>Object.assign(Object.assign({},t.disabledById),e))),(null===t||void 0===t?void 0:t.selectedById)&&o((e=>Object.assign(Object.assign({},t.selectedById),e))),(null===t||void 0===t?void 0:t.expandedById)&&u((e=>Object.assign(Object.assign({},t.expandedById),e))),p((e=>null!==e&&void 0!==e?e:null===t||void 0===t?void 0:t.activeItemId)));const I={disabledById:l,selectedById:r,activeItemId:m,setDisabled:a,setSelected:o,setActiveItemId:p};return n&&(I.expandedById=c,I.setExpanded=u),I})({initialState:i.useMemo((()=>({expandedById:Object.assign(Object.assign({},null===l||void 0===l?void 0:l.expandedById),u.expandedById),selectedById:Object.assign(Object.assign({},null===l||void 0===l?void 0:l.selectedById),u.selectedById),disabledById:Object.assign(Object.assign({},null===l||void 0===l?void 0:l.disabledById),u.disabledById)})),[u.disabledById,u.expandedById,u.selectedById,null===l||void 0===l?void 0:l.disabledById,null===l||void 0===l?void 0:l.expandedById,null===l||void 0===l?void 0:l.selectedById]),withExpandedState:d}),{visibleFlattenIds:p,idToFlattenIndex:I,rootIds:v}=J({items:t,expandedById:m.expandedById,getItemId:n});return{state:i.useMemo((()=>a?Object.assign(Object.assign({},m),a):m),[a,m]),structure:{rootIds:v,items:t,visibleFlattenIds:p,idToFlattenIndex:I,itemsById:r,groupsState:o,itemsState:c}}},K=e=>{let{defaultValue:t=[],value:n,onUpdate:s}=e;const[d,l]=i.useState(t),a=null!==n&&void 0!==n?n:d,r=!n;return i.useMemo((()=>{const e=a.reduce(((e,t)=>(e[t]=!0,e)),{});return{value:a,selectedById:e,setSelected:t=>{const n=(e=>Object.entries(e).reduce(((e,t)=>{let[n,i]=t;return i&&e.push(n),e}),[]))("function"===typeof t?t(e):t);r?l(n):null===s||void 0===s||s(n)},setInnerValue:r?l:void 0}}),[s,r,a])},X=(0,h.Ge)("tree-select"),Y=e=>i.createElement(V,Object.assign({},e.props,e.renderContainerProps)),Q=i.forwardRef((function(e,t){let{id:n,qa:s,title:d,placement:l,slotBeforeListBody:a,slotAfterListBody:r,size:o="m",defaultOpen:u,width:m,containerRef:g,className:y,containerClassName:h,popupClassName:S,open:x,multiple:B,popupWidth:E,popupDisablePortal:O,items:C,value:k,defaultValue:j,withExpandedState:R=!0,defaultExpandedState:N="expanded",onClose:F,onOpenChange:D,onUpdate:_,renderControl:P,renderItem:T=Y,renderContainer:z,mapItemDataToProps:L,onFocus:q,onBlur:V,getItemId:A,onItemClick:U}=e;const W=(0,$.X)(),Z=(0,c.u)(),J=null!==n&&void 0!==n?n:Z,G=`tree-select-popup-${J}`,Q=i.useRef(null),ee=i.useRef(null),te=i.useRef(null),ne=null!==g&&void 0!==g?g:te,ie=(0,p.c)(t,ee),{toggleOpen:se,open:de}=(0,v.Z)({defaultOpen:u,onClose:F,onOpenChange:D,open:x}),{value:le,selectedById:ae,setSelected:re}=K({value:k,defaultValue:j,onUpdate:_}),oe=H({controlledState:{selectedById:ae,setSelected:re},items:C,getItemId:A,defaultExpandedState:N,withExpandedState:R}),ce=i.useMemo((()=>{if(null===U)return;return(e,t)=>{const n={id:e.id,list:oe};if(U)null===U||void 0===U||U(n,t);else{w({list:oe,multiple:B})(n,t);const i=oe.state.expandedById&&e.id in oe.state.expandedById;B||i||se(!1)}}}),[U,oe,B,se]);i.useLayoutEffect((()=>{var e;return de&&(null===(e=ne.current)||void 0===e||e.focus()),()=>oe.state.setActiveItemId(void 0)}),[de]);const ue=i.useCallback((()=>se(!1)),[se]),{focusWithinProps:me}=(0,I.L)({onFocusWithin:q,onBlurWithin:i.useCallback((e=>{null===V||void 0===V||V(e),ue()}),[ue,V])}),pe={list:oe,open:de,toggleOpen:se,clearValue:()=>oe.state.setSelected({}),ref:ie,size:o,value:le,id:J,activeItemId:oe.state.activeItemId,title:d},Ie=P?P(pe):i.createElement(b.Y,Object.assign({},pe,{selectedOptionsContent:i.Children.toArray(le.map((e=>L(oe.structure.itemsById[e]).title))).join(", "),view:"normal",pin:"round-round",popupId:G,selectId:J})),ve=Object.assign({},"max"===m&&{width:m}),be={};return"number"===typeof m&&(be.width=m),i.createElement("div",Object.assign({ref:Q},me,{className:X(ve,y),style:be}),Ie,i.createElement(f.h,{ref:Q,className:X("popup",{size:o},S),controlRef:ee,width:E,placement:l,open:de,handleClose:ue,disablePortal:O,mobile:W,id:G},a,i.createElement(M,{list:oe,size:o,className:X("list",h),qa:s,multiple:B,id:`list-${J}`,containerRef:ne,onItemClick:ce,renderContainer:z,mapItemDataToProps:L,renderItem:null!==T&&void 0!==T?T:Y}),r))}));var ee=n(86357),te=n(58399),ne=n.n(te);function ie(e,t){return!t||"object"!==typeof t||!("title"in t)||"string"!==typeof t.title||t.title.toLowerCase().includes((e||"").toLowerCase())}function se(e){let{items:t,initialFilterValue:n="",filterItem:s,onFilterChange:d,filterItems:l,debounceTimeout:a=300}=e;const r=i.useRef(null),[o,c]=i.useState(n),[u,m]=i.useState(t),[p,I]=i.useState(t),v=i.useCallback(((e,t)=>{if(l)return()=>l(e,t);if(e){const n=s||ie;return()=>function(e,t){const n=(e,i)=>{if(B(i)&&i.children){const s=i.children.reduce(n,[]);s.length?e.push(Object.assign(Object.assign({},i),{data:i.data,children:s})):t(i.data)&&e.push(Object.assign(Object.assign({},i),{data:i.data,children:[]}))}else if(B(i)&&t(i.data)){const{children:t}=i,n=(0,g._T)(i,["children"]);e.push(n)}else!B(i)&&t(i)&&e.push(i);return e};return e.reduce(n,[])}(t,(t=>n(e,t)))}return()=>t}),[s,l]);t!==u&&(I(v(o,t)),m(t));const b=i.useCallback(ne()((e=>I(v(e,t))),a),[I,v,a]),{onFilterUpdate:f,reset:y}=i.useMemo((()=>({reset:()=>{c(n),null===d||void 0===d||d(n),b(n)},onFilterUpdate:e=>{c(e),null===d||void 0===d||d(e),b(e)}})),[b,n,d]);return{filterRef:r,filter:o,reset:y,items:p,onFilterUpdate:f}}var de=n(52414);const le=JSON.parse('{"button_apply":"Apply","button_reset":"Reset","button_switcher":"Columns"}'),ae=JSON.parse('{"button_apply":"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c","button_reset":"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c","button_switcher":"\u041a\u043e\u043b\u043e\u043d\u043a\u0438"}'),re=(0,de.e)({en:le,ru:ae},"TableColumnSetupInner"),oe=(0,h.Ge)("inner-table-column-setup"),ce=oe("controls"),ue=oe("filter-input"),me=oe("empty-placeholder"),pe={isDragDisabled:!0},Ie=e=>({title:e.title}),ve=(e,t)=>"string"!==typeof t.title||t.title.toLowerCase().includes(e.trim().toLowerCase()),be=e=>{const{renderSwitcher:t,popupWidth:n,popupPlacement:p,items:I,onUpdate:v,sortable:b,renderControls:f,className:g,defaultItems:h=I,showResetButton:S,filterable:B,filterPlaceholder:E,filterEmptyMessage:O,filterSettings:C=ve}=e,[w,k]=i.useState(!1),[j,R]=i.useState(b),[N,F]=i.useState(b);b!==N&&(F(b),R(b));const[D,_]=i.useState(I),[P,T]=i.useState(I);I!==P&&(T(I),_(I));const z=se({items:D,filterItem:C,debounceTimeout:0}),L=()=>{const e=D.map((e=>{let{id:t,isSelected:n}=e;return{id:t,isSelected:n}}));v(e),U(!1)},q=()=>i.createElement(d.z,{view:"action",width:"max",onClick:L},re("button_apply")),A="function"===typeof S?S(D):S,M=(e=>{let{onDragEnd:t,renderControls:n}=e;const s=(0,c.u)();return e=>{let{renderItem:d,list:l,containerRef:a,id:r,className:c}=e;const{stickyStartItemIdList:u,sortableItemIdList:m,stickyEndItemIdList:p}=((e,t)=>{let n=0;for(;n!==t.length;n++){const i=e[t[n]];if("left"!==(null===i||void 0===i?void 0:i.sticky)&&"start"!==(null===i||void 0===i?void 0:i.sticky))break}let i=t.length;for(;0!==i;i--){const n=e[t[i-1]];if("right"!==(null===n||void 0===n?void 0:n.sticky)&&"end"!==(null===n||void 0===n?void 0:n.sticky))break}return{stickyStartItemIdList:t.slice(0,n),sortableItemIdList:t.slice(n,i),stickyEndItemIdList:t.slice(i)}})(l.structure.itemsById,l.structure.visibleFlattenIds),I=u.map(((e,t)=>d(e,t,pe))),v=m.map(((e,t)=>d(e,t+u.length))),b=p.map(((e,t)=>d(e,I.length+v.length+t,pe)));return i.createElement(i.Fragment,null,i.createElement(x,{ref:a,id:r,className:c},I,i.createElement(o.Z5,{onDragEnd:t},i.createElement(o.bK,{droppableId:s,renderClone:(e,t,n)=>{const i={provided:e,snapshot:t};return d(l.structure.visibleFlattenIds[n.source.index],n.source.index,i)}},(e=>i.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),v,e.placeholder)))),b),i.createElement("div",{className:ce},n()))}})({onDragEnd:e=>{let{destination:t,source:n}=e;void 0!==(null===t||void 0===t?void 0:t.index)&&(null===t||void 0===t?void 0:t.index)!==n.index&&_((e=>((e,t,n)=>{const i=[...e],[s]=i.splice(t,1);return i.splice(n,0,s),i})(e,n.index,t.index)))},renderControls:()=>f?f({DefaultApplyButton:q,onApply:L}):i.createElement(y.k,{gapRow:1,direction:"column",className:ce},A&&i.createElement(d.z,{onClick:()=>{_(h)},width:"max"},re("button_reset")),i.createElement(q,null))}),$=(e=>t=>{let{data:n,props:s,index:d,renderContainerProps:c}=t;const u=!1===e||!0===(null===c||void 0===c?void 0:c.isDragDisabled),m=u?void 0:i.createElement(l.J,{data:a.Z,size:16}),p=!n.isRequired,I=n.isRequired?i.createElement(l.J,{data:r}):void 0,v=!n.isRequired&&s.selected,b=Object.assign(Object.assign({},s),{selected:v,startSlot:I,hasSelectionIcon:p,endSlot:m});if(u)return i.createElement(V,Object.assign({},b,{key:b.id}));const f=(e,t)=>i.createElement(V,Object.assign({},b,e.draggableProps,e.dragHandleProps,{ref:e.innerRef,dragging:t.isDragging}));return(null===c||void 0===c?void 0:c.provided)&&c.snapshot?f(c.provided,c.snapshot):i.createElement(o._l,{draggableId:s.id,index:d,key:`item-key-${s.id}`,isDragDisabled:u},f)})(j),U=e=>{k(e),!1===e&&(_(I),R(b),z.reset())},W=i.useMemo((()=>(e=>{const t=[];return e.forEach((e=>{let{id:n,isSelected:i}=e;i&&t.push(n)})),t})(D)),[D]),Z=(J=O,()=>i.createElement(m.x,{className:me},J));var J;const G=B?i.createElement(ee.o,{size:"m",view:"clear",placeholder:E,value:z.filter,className:ue,onUpdate:e=>{z.onFilterUpdate(e),R(!e.length)},hasClear:!0}):null,H=z.filter&&!z.items.length?Z:M;return i.createElement(Q,{className:oe(null,g),mapItemDataToProps:Ie,multiple:!0,size:"l",open:w,value:W,items:z.filter?z.items:D,onUpdate:e=>{_((t=>t.map((t=>Object.assign(Object.assign({},t),{isSelected:t.isRequired||e.includes(t.id)})))))},popupWidth:n,onOpenChange:U,placement:p,slotBeforeListBody:G,renderContainer:H,renderControl:e=>{let{toggleOpen:n}=e;const a=(0,u.S)(n);return(null===t||void 0===t?void 0:t({onClick:n,onKeyDown:a}))||i.createElement(d.z,{onClick:n,extraProps:{onKeyDown:a}},i.createElement(l.J,{data:s.Z}),re("button_switcher"))},renderItem:$})},fe=JSON.parse('{"button_switcher":"Columns"}'),ge=JSON.parse('{"button_switcher":"\u041a\u043e\u043b\u043e\u043d\u043a\u0438"}'),ye=(0,de.e)({en:fe,ru:ge},"TableColumnSetup"),he=(0,h.Ge)("table-column-setup"),Se=e=>{const{switcher:t,renderSwitcher:n,disabled:a,popupWidth:r,popupPlacement:o,className:c,items:u,sortable:m=!0,showStatus:p,onUpdate:I}=e,v=u.map((e=>{let{id:t,title:n,required:i,selected:s,sticky:d}=e;return{id:t,title:n,isRequired:i,isSelected:s,sticky:d}}));return i.createElement(be,{items:v,onUpdate:e=>{I(e.map((e=>{let{id:t,isSelected:n}=e;const i=u.find((e=>e.id===t));return{id:t,selected:n,title:null===i||void 0===i?void 0:i.title,required:null===i||void 0===i?void 0:i.required}})))},popupPlacement:o,popupWidth:r,renderSwitcher:e=>(null===n||void 0===n?void 0:n(e))||t||i.createElement(d.z,{disabled:a,onClick:e.onClick},i.createElement(l.J,{data:s.Z}),ye("button_switcher"),(()=>{if(!p)return null;const e=`${u.reduce(((e,t)=>t.selected?e+1:e),0)}/${u.length}`;return i.createElement("span",{className:he("status")},e)})()),sortable:m,className:he(null,c)})}},53216:(e,t,n)=>{"use strict";n.d(t,{F:()=>s});var i=n(8349);function s(){return(0,i.T)().theme}},78171:(e,t,n)=>{var i=n(28406),s=/[\\^$.*+?()[\]{}|]/g,d=RegExp(s.source);e.exports=function(e){return(e=i(e))&&d.test(e)?e.replace(s,"\\$&"):e}}}]);