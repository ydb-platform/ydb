"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[371],{56735:(e,s,a)=>{a.d(s,{Q:()=>N});var t=a(87184),l=a(92459),i=a(78668),n=a(7435),d=a(46549),o=a(77506),r=a(56839),c=a(31684),u=a(90182),v=a(18863),p=a(25196),h=a(15132),m=a(33775),g=a(48372);const k=JSON.parse('{"type":"Type","path":"Path","guid":"GUID","serial-number":"Serial Number","shared-with-os":"SharedWithOs","drive-status":"Drive Status","state":"State","device":"Device","realtime":"Realtime","space":"Space","slots":"Slots","log-size":"Log Size","system-size":"System Size","links":"Links","developer-ui":"Developer UI","pdisk-page":"PDisk page","yes":"Yes"}'),f=(0,g.g4)("ydb-pDisk-info",{en:k});var b=a(60712);const x=(0,o.cn)("ydb-pdisk-info");function N({pDisk:e,nodeId:s,withPDiskPageLink:a,className:o}){const g=(0,u.N4)(i._5),[k,N,j,I]=function({pDisk:e,nodeId:s,withPDiskPageLink:a,isUserAllowedToMakeChanges:t}){const{PDiskId:i,Path:o,Guid:u,Category:v,Type:g,Device:k,Realtime:N,State:j,SerialNumber:I,TotalSize:S,AllocatedSize:D,StatusV2:w,NumActiveSlots:y,ExpectedSlotCount:z,LogUsedSize:T,LogTotalSize:P,SystemSize:E,SharedWithOs:V}=e||{},R=[];(0,n.f8)(v)&&R.push({label:f("type"),value:g}),(0,n.f8)(o)&&R.push({label:f("path"),value:o}),(0,n.f8)(u)&&R.push({label:f("guid"),value:u}),I&&R.push({label:f("serial-number"),value:I}),(0,n.f8)(V)&&R.push({label:f("shared-with-os"),value:f("yes")});const A=[];(0,n.f8)(w)&&A.push({label:f("drive-status"),value:w}),(0,n.f8)(j)&&A.push({label:f("state"),value:j}),(0,n.f8)(k)&&A.push({label:f("device"),value:(0,b.jsx)(m.k,{status:k})}),(0,n.f8)(N)&&A.push({label:f("realtime"),value:(0,b.jsx)(m.k,{status:N})});const O=[];O.push({label:f("space"),value:(0,b.jsx)(h.O,{value:D,capacity:S,formatValues:r.vX,colorizeProgress:!0})}),(0,n.f8)(y)&&(0,n.f8)(z)&&O.push({label:f("slots"),value:(0,b.jsx)(h.O,{value:y,capacity:z})}),(0,n.f8)(T)&&(0,n.f8)(P)&&O.push({label:f("log-size"),value:(0,b.jsx)(h.O,{value:T,capacity:P,formatValues:r.vX})}),(0,n.f8)(E)&&O.push({label:f("system-size"),value:(0,d.z3)({value:E})});const C=[];if((a||t)&&(0,n.f8)(i)&&(0,n.f8)(s)){const e=(0,l.Ck)(i,s),n=(0,c.ar)({nodeId:s,pDiskId:i});C.push({label:f("links"),value:(0,b.jsxs)("span",{className:x("links"),children:[a&&(0,b.jsx)(p.K,{title:f("pdisk-page"),url:e,external:!1}),t&&(0,b.jsx)(p.K,{title:f("developer-ui"),url:n})]})})}return[R,A,O,C]}({pDisk:e,nodeId:s,withPDiskPageLink:a,isUserAllowedToMakeChanges:g});return(0,b.jsxs)(t.s,{className:o,gap:2,direction:"row",wrap:!0,children:[(0,b.jsxs)(t.s,{direction:"column",gap:2,width:500,children:[(0,b.jsx)(v.z,{info:k,renderEmptyState:()=>null}),(0,b.jsx)(v.z,{info:j,renderEmptyState:()=>null})]}),(0,b.jsxs)(t.s,{direction:"column",gap:2,width:500,children:[(0,b.jsx)(v.z,{info:N,renderEmptyState:()=>null}),(0,b.jsx)(v.z,{info:I,renderEmptyState:()=>null})]})]})}},59984:(e,s,a)=>{a.d(s,{Y:()=>o});a(59284);var t=a(87184),l=a(77506),i=a(60712);const n=(0,l.cn)("tag"),d=({text:e,type:s})=>(0,i.jsx)("div",{className:n({type:s}),children:e}),o=({tags:e,tagsType:s,className:a="",gap:l=1})=>(0,i.jsx)(t.s,{className:a,gap:l,wrap:"wrap",alignItems:"center",children:e&&e.map(((e,a)=>(0,i.jsx)(d,{text:e,type:s},a)))})},67440:(e,s,a)=>{a.d(s,{E:()=>N});a(59284);var t=a(92459),l=a(78668),i=a(7435),n=a(77506),d=a(56839),o=a(31684),r=a(7187),c=a(90182),u=a(41650),v=a(60073),p=a(25196),h=a(15132),m=a(33775),g=a(48372);const k=JSON.parse('{"slot-id":"VDisk Slot Id","pool-name":"Storage Pool Name","kind":"Kind","guid":"GUID","incarnation-guid":"Incarnation GUID","instance-guid":"Instance GUID","replication-status":"Replicated","state-status":"VDisk State","space-status":"Disk Space","fresh-rank-satisfaction":"Fresh Rank Satisfaction","level-rank-satisfaction":"Level Rank Satisfaction","front-queues":"Front Queues","has-unreadable-blobs":"Has Unreadable Blobs","size":"Size","read-throughput":"Read Throughput","write-throughput":"Write Throughput","links":"Links","vdisk-page":"VDisk Page","developer-ui":"Developer UI","yes":"Yes","no":"No","vdiks-title":"VDisk"}'),f=(0,g.g4)("ydb-vDisk-info",{en:k});var b=a(60712);const x=(0,n.cn)("ydb-vdisk-info");function N({data:e,withVDiskPageLink:s,withTitle:a,...n}){var r,g;const k=(0,c.N4)(l._5),{AllocatedSize:N,DiskSpace:I,FrontQueues:S,Guid:D,Replicated:w,VDiskState:y,VDiskSlotId:z,Kind:T,SatisfactionRank:P,AvailableSize:E,HasUnreadableBlobs:V,IncarnationGuid:R,InstanceGuid:A,StoragePoolName:O,ReadThroughput:C,WriteThroughput:L,PDiskId:U,NodeId:F}=e||{},M=[];var q,G;((0,i.f8)(z)&&M.push({label:f("slot-id"),value:z}),(0,i.f8)(O)&&M.push({label:f("pool-name"),value:O}),(0,i.f8)(y)&&M.push({label:f("state-status"),value:y}),Number(N)>=0&&Number(E)>=0&&M.push({label:f("size"),value:(0,b.jsx)(h.O,{value:N,capacity:Number(N)+Number(E),formatValues:d.vX,colorizeProgress:!0})}),(0,i.f8)(T)&&M.push({label:f("kind"),value:T}),(0,i.f8)(D)&&M.push({label:f("guid"),value:D}),(0,i.f8)(R)&&M.push({label:f("incarnation-guid"),value:R}),(0,i.f8)(A)&&M.push({label:f("instance-guid"),value:A}),(0,i.f8)(w)&&M.push({label:f("replication-status"),value:f(w?"yes":"no")}),(0,i.f8)(I)&&M.push({label:f("space-status"),value:(0,b.jsx)(m.k,{status:I})}),(0,i.f8)(null===P||void 0===P||null===(r=P.FreshRank)||void 0===r?void 0:r.Flag))&&M.push({label:f("fresh-rank-satisfaction"),value:(0,b.jsx)(m.k,{status:null===P||void 0===P||null===(q=P.FreshRank)||void 0===q?void 0:q.Flag})});(0,i.f8)(null===P||void 0===P||null===(g=P.LevelRank)||void 0===g?void 0:g.Flag)&&M.push({label:f("level-rank-satisfaction"),value:(0,b.jsx)(m.k,{status:null===P||void 0===P||null===(G=P.LevelRank)||void 0===G?void 0:G.Flag})});(0,i.f8)(S)&&M.push({label:f("front-queues"),value:(0,b.jsx)(m.k,{status:S})}),(0,i.f8)(V)&&M.push({label:f("has-unreadable-blobs"),value:f(V?"yes":"no")}),(0,i.f8)(C)&&M.push({label:f("read-throughput"),value:(0,u.O4)(C)}),(0,i.f8)(L)&&M.push({label:f("write-throughput"),value:(0,u.O4)(L)});if((0,i.f8)(U)&&(0,i.f8)(F)&&(0,i.f8)(z)){const e=[];if(s){const s=(0,t.yX)(z,U,F);e.push((0,b.jsx)(p.K,{title:f("vdisk-page"),url:s,external:!1},s))}if(k){const s=(0,o.Wg)({nodeId:F,pDiskId:U,vDiskSlotId:z});e.push((0,b.jsx)(p.K,{title:f("developer-ui"),url:s},s))}e.length&&M.push({label:f("links"),value:(0,b.jsx)("div",{className:x("links"),children:e})})}const _=e&&a?(0,b.jsx)(j,{data:e}):null;return(0,b.jsx)(v.z_,{info:M,title:_,...n})}function j({data:e}){return(0,b.jsxs)("div",{className:x("title"),children:[f("vdiks-title"),(0,b.jsx)(m.k,{status:(0,r.XY)(e.Severity)}),e.StringifiedId]})}},49020:(e,s,a)=>{a.r(s),a.d(s,{Node:()=>Ie});var t=a(59284),l=a(23871),i=a(61750),n=a(10755),d=a(52905),o=a(67087),r=a(90053),c=a(112),u=a(99991),v=a(78668),p=a(77506),h=a(31684),m=a(90182),g=a(10508),k=a(59984),f=a(60712);const b=(0,p.cn)("basic-node-viewer"),x=({node:e,additionalNodesProps:s,className:a})=>{const l=(0,m.N4)(v._5);let i;if(null!==s&&void 0!==s&&s.getNodeRef){const a=s.getNodeRef(e);i=a?(0,h.Un)(a):void 0}else if(e.NodeId){const s=(0,h.Kx)(e.NodeId);i=(0,h.Un)(s)}return(0,f.jsx)("div",{className:b(null,a),children:e?(0,f.jsxs)(t.Fragment,{children:[(0,f.jsx)("div",{className:b("title"),children:"Node"}),(0,f.jsx)(g.c,{status:e.SystemState,name:e.Host}),i&&l?(0,f.jsx)("a",{rel:"noopener noreferrer",className:b("link",{external:!0}),href:i,target:"_blank",children:(0,f.jsx)(u.I,{data:c.A})}):null,(0,f.jsxs)("div",{className:b("id"),children:[(0,f.jsx)("label",{className:b("label"),children:"NodeID"}),(0,f.jsx)("label",{children:e.NodeId})]}),e.DC&&(0,f.jsx)(k.Y,{tags:[e.DC]}),e.Roles&&(0,f.jsx)(k.Y,{tags:e.Roles,tagsType:"blue"})]}):(0,f.jsx)("div",{className:"error",children:"no data"})})};var N=a(44508),j=a(76086),I=a(18863);const S=(0,p.cn)("ydb-pool-usage"),D=e=>{let s="green";return e>60&&e<=80?s="yellow":e>80&&(s="red"),s},w=({data:e={}})=>{const{Threads:s,Name:a="Unknown",Usage:t=0}=e,l=t&&s,i=Math.floor(100*t),n=i>100?100:i;return(0,f.jsxs)("div",{className:S(),children:[(0,f.jsxs)("div",{className:S("info"),children:[(0,f.jsx)("div",{className:S("pool-name"),children:a}),l&&(0,f.jsxs)("div",{className:S("value"),children:[(0,f.jsxs)("div",{className:S("percents"),children:[i<1?"<1":i,"%"]}),(0,f.jsxs)("div",{className:S("threads"),children:["(\xd7",s,")"]})]})]}),(0,f.jsx)("div",{className:S("visual"),children:(0,f.jsx)("div",{className:S("usage-line",{type:D(n)}),style:{width:`${n}%`}})})]})};var y=a(15132),z=a(41826);const T=(0,p.cn)("full-node-viewer"),P=({node:e,className:s})=>{var a,t,l,i;const n=null===e||void 0===e||null===(a=e.Endpoints)||void 0===a?void 0:a.map((({Name:e,Address:s})=>({label:e,value:s}))),d=[];null!==e&&void 0!==e&&null!==(t=e.Tenants)&&void 0!==t&&t.length&&d.push({label:"Database",value:e.Tenants[0]}),d.push({label:"Version",value:null===e||void 0===e?void 0:e.Version},{label:"Uptime",value:(0,f.jsx)(z.p,{StartTime:null===e||void 0===e?void 0:e.StartTime,DisconnectTime:null===e||void 0===e?void 0:e.DisconnectTime})},{label:"DC",value:(null===e||void 0===e?void 0:e.DataCenterDescription)||(null===e||void 0===e?void 0:e.DC)},{label:"Rack",value:null===e||void 0===e?void 0:e.Rack});const o=null===e||void 0===e||null===(l=e.LoadAveragePercents)||void 0===l?void 0:l.map(((e,s)=>({label:j.GT[s],value:(0,f.jsx)(y.O,{value:e,percents:!0,colorizeProgress:!0,capacity:100})})));return(0,f.jsx)("div",{className:`${T()} ${s}`,children:e?(0,f.jsxs)("div",{className:T("common-info"),children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{className:T("section-title"),children:"Pools"}),(0,f.jsx)("div",{className:T("section",{pools:!0}),children:null===e||void 0===e||null===(i=e.PoolStats)||void 0===i?void 0:i.map(((e,s)=>(0,f.jsx)(w,{data:e},s)))})]}),n&&n.length&&(0,f.jsx)(I.z,{title:"Endpoints",className:T("section"),info:n}),(0,f.jsx)(I.z,{title:"Common info",className:T("section"),info:d}),(0,f.jsx)(I.z,{title:"Load average",className:T("section",{average:!0}),info:o})]}):(0,f.jsx)("div",{className:"error",children:"no data"})})};var E=a(52248),V=a(92459),R=a(67028),A=a(40174),O=a(21334),C=a(78034);const L=e=>{var s;if(null===(s=e.SystemStateInfo)||void 0===s||!s.length)return{};const a=e.SystemStateInfo[0];return(0,C.q1)(a)},U=O.F.injectEndpoints({endpoints:e=>({getNodeInfo:e.query({queryFn:async({nodeId:e},{signal:s})=>{try{const a=await window.api.viewer.getNodeInfo(e,{signal:s});return{data:L(a)}}catch(a){return{error:a}}},providesTags:["All"]}),getNodeStructure:e.query({queryFn:async({nodeId:e},{signal:s})=>{try{return{data:await window.api.viewer.getStorageInfo({nodeId:e},{signal:s})}}catch(a){return{error:a}}},providesTags:["All"]})}),overrideExisting:"throw"});var F=a(99936),M=a(76768),q=a(29819),G=a(905),_=a.n(G),Q=a(53850),K=a(56839),W=a(27295);const $=(0,Q.Mz)((e=>e),(e=>U.endpoints.getNodeStructure.select({nodeId:e}))),B=(0,Q.Mz)((e=>e),((e,s)=>$(s)),((e,s)=>s(e).data)),X=(0,Q.Mz)(((e,s)=>Number(s)),((e,s)=>B(e,s)),((e,s)=>{const a=null===s||void 0===s?void 0:s.StoragePools,t={};null===a||void 0===a||a.forEach((s=>{const a=s.Groups;null===a||void 0===a||a.forEach((a=>{var l;const i=null===(l=a.VDisks)||void 0===l?void 0:l.filter((s=>s.NodeId===e)).map(W.WT);null===i||void 0===i||i.forEach((a=>{var l;const i=(0,K.U9)(a.VDiskId),n=null===(l=a.PDisk)||void 0===l?void 0:l.PDiskId;t[String(n)]||(t[String(n)]={vDisks:{},...a.PDisk}),t[String(n)].vDisks[i]={...a,PDiskId:n,NodeId:e,StoragePoolName:s.Name}}))}))}));return Object.keys(t).reduce(((e,s)=>{const a=t[s].vDisks,l=Object.keys(a).reduce(((e,s,t)=>(e.push({...a[s],id:s,order:t}),e)),[]);return e[s]={...t[s],vDisks:l},e}),{})}));var Y=a(45720),H=a(4557),J=a(84476),Z=a(84375),ee=a(33705),se=a(56735),ae=a(33775),te=a(67440),le=a(54090),ie=a(67375),ne=a(7435),de=a(48372);const oe=JSON.parse('{"pdisk.developer-ui-button-title":"PDisk Developer UI page","vdisk.developer-ui-button-title":"VDisk Developer UI page"}'),re=JSON.parse('{"pdisk.developer-ui-button-title":"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 PDisk \u0432 Developer UI","vdisk.developer-ui-button-title":"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 VDisk \u0432 Developer UI"}'),ce=(0,de.g4)("ydb-node-page",{en:oe,ru:re}),ue=(0,p.cn)("kv-node-structure");function ve({label:e,value:s,className:a}){return(0,f.jsxs)("span",{className:ue("pdisk-title-item",a),children:[e&&(0,f.jsxs)("span",{className:ue("pdisk-title-item-label"),children:[e,":"]}),(0,f.jsx)("span",{className:ue("pdisk-title-item-value"),children:s})]})}const pe=(0,p.cn)("kv-node-structure");var he=function(e){return e.slotId="VDiskSlotId",e.VDiskState="VDiskState",e.Size="Size",e.Info="Info",e}(he||{});const me={VDiskSlotId:"Slot id",VDiskState:"Status",Size:"Size",Info:""};function ge({pDiskId:e,selectedVdiskId:s,nodeId:a,withDeveloperUILink:t}){return[{name:he.slotId,header:me[he.slotId],width:100,render:({row:l})=>{const i=l.VDiskSlotId;let n=null;return(0,ne.f8)(a)&&(0,ne.f8)(e)&&(0,ne.f8)(i)&&(n=(0,h.Wg)({nodeId:a,pDiskId:e,vDiskSlotId:i})),(0,f.jsxs)("div",{className:pe("vdisk-id",{selected:l.id===s}),children:[(0,f.jsx)("span",{children:i}),n&&t?(0,f.jsx)(J.$,{size:"s",className:pe("external-button",{hidden:!0}),href:n,target:"_blank",title:ce("vdisk.developer-ui-button-title"),children:(0,f.jsx)(u.I,{data:c.A})}):null]})},align:H.Ay.LEFT},{name:he.VDiskState,header:me[he.VDiskState],width:70,render:({row:e})=>(0,f.jsx)(ae.k,{status:e.VDiskState===ie.W.OK?le.m.Green:le.m.Red}),sortAccessor:e=>e.VDiskState===ie.W.OK?1:0,align:H.Ay.CENTER},{name:he.Size,header:me[he.Size],width:170,render:({row:e})=>(0,f.jsx)(y.O,{value:e.AllocatedSize,capacity:Number(e.AllocatedSize)+Number(e.AvailableSize),formatValues:K.vX,colorizeProgress:!0}),sortAccessor:e=>Number(e.AllocatedSize),align:H.Ay.CENTER},{name:he.Info,header:me[he.Info],width:70,render:({row:e})=>(0,f.jsx)(Z.A,{placement:["right"],content:(0,f.jsx)(te.E,{data:e,withTitle:!0,withVDiskPageLink:!0}),tooltipContentClassName:pe("vdisk-details"),children:(0,f.jsx)(J.$,{view:"flat-secondary",className:pe("vdisk-details-button",{selected:e.id===s}),children:(0,f.jsx)(u.I,{data:Y.A,size:18})})}),sortable:!1}]}function ke({id:e,data:s,selectedVdiskId:a,nodeId:l,unfolded:i}){const n=(0,m.N4)(v._5),[d,o]=t.useState(null!==i&&void 0!==i&&i),{TotalSize:r=0,AvailableSize:c=0,Device:u,PDiskId:p,Type:h,vDisks:g}=s,k=Number(r),b=Number(c);return(0,f.jsxs)("div",{className:pe("pdisk"),id:e,children:[(0,f.jsxs)("div",{className:pe("pdisk-header"),children:[(0,f.jsxs)("div",{className:pe("pdisk-title-wrapper"),children:[(0,f.jsx)(ae.k,{status:u}),(0,f.jsx)(ve,{label:"PDiskID",value:p,className:pe("pdisk-title-id")}),(0,f.jsx)(ve,{value:h,className:pe("pdisk-title-type")}),(0,f.jsx)(y.O,{value:k-b,capacity:k,formatValues:K.vX,colorizeProgress:!0,className:pe("pdisk-title-size")}),(0,f.jsx)(ve,{label:"VDisks",value:g.length})]}),(0,f.jsx)(J.$,{onClick:d?()=>{o(!1)}:()=>{o(!0)},view:"flat-secondary",children:(0,f.jsx)(ee.I,{direction:d?"top":"bottom"})})]}),d&&(_()(s)?(0,f.jsx)("div",{children:"No information about PDisk"}):(0,f.jsxs)("div",{children:[(0,f.jsx)(se.Q,{pDisk:s,nodeId:l,className:pe("pdisk-details"),withPDiskPageLink:!0}),(0,f.jsxs)("div",{className:pe("vdisks-container"),children:[(0,f.jsx)("div",{className:pe("vdisks-header"),children:"VDisks"}),(0,f.jsx)(H.Ay,{theme:"yandex-cloud",data:g,columns:ge({nodeId:l,pDiskId:p,selectedVdiskId:a,withDeveloperUILink:n}),settings:{...j.N3,dynamicRender:!1},rowClassName:e=>e.id===a?pe("selected-vdisk"):""})]})]}))]})}const fe=(0,p.cn)("kv-node-structure");function be({type:e,id:s}){return`${e}-${s}`}const xe=function({nodeId:e,className:s}){const a=(0,m.N4)((s=>X(s,e))),[l]=(0,m.Nt)(),{currentData:i,isFetching:n,error:d}=U.useGetNodeStructureQuery({nodeId:e},{pollingInterval:l}),r=n&&void 0===i,[{pdiskId:c,vdiskId:u}]=(0,o.useQueryParams)({pdiskId:o.StringParam,vdiskId:o.StringParam}),v=t.useRef(null),p=t.useRef(!1);return t.useEffect((()=>{if(!_()(a)&&!p.current&&v.current&&c){const s=document.getElementById(be({type:"pdisk",id:c}));let t=0;if(u){var e;const s=null===(e=a[c])||void 0===e?void 0:e.vDisks,l=null===s||void 0===s?void 0:s.find((e=>e.id===u)),i=l?document.querySelector(".data-table"):void 0,n=(null===l||void 0===l?void 0:l.order)||0;i&&(t+=i.offsetTop+40*n)}s&&(v.current.scrollTo({behavior:"smooth",top:t||s.offsetTop}),p.current=!0)}}),[a,c,u]),(0,f.jsxs)("div",{className:fe(),ref:v,children:[d?(0,f.jsx)(N.o,{error:d,className:fe("error")}):null,(0,f.jsx)("div",{className:s,children:r?(0,f.jsx)(E.a,{size:"m"}):d&&!i?null:(()=>{const s=Object.keys(a);return s.length>0?s.map((s=>(0,f.jsx)(ke,{data:a[s],id:be({type:"pdisk",id:s}),unfolded:c===s,selectedVdiskId:u,nodeId:e},s))):"There is no information about node structure."})()})]})},Ne=(0,p.cn)("node"),je="Storage";function Ie(e){var s,a;const c=t.useRef(null),u=(0,m.YQ)(),v=null!==(s=(0,n.W5)(V.Ay.node))&&void 0!==s?s:Object.create(null),{id:p,activeTab:h}=v.params,[{database:g}]=(0,o.useQueryParams)(q.Gi),[k]=(0,m.Nt)(),{currentData:b,isFetching:j,error:I}=U.useGetNodeInfoQuery({nodeId:p},{pollingInterval:k}),S=j&&void 0===b,D=b,w=(0,R.Pm)(),y=(0,R.c2)(),{activeTabVerified:z,nodeTabs:T}=t.useMemo((()=>{var e;let s=(null===D||void 0===D||null===(e=D.Roles)||void 0===e?void 0:e.find((e=>e===je)))?q.qn:q.qn.filter((e=>e.id!==q.O3));y&&(s=s.filter((e=>e.id!==q.mX)));const a=s.map((e=>({...e,title:e.name})));let t=a.find((({id:e})=>e===h));return t||(t=a[0]),{activeTabVerified:t,nodeTabs:a}}),[h,D,y]),O=(null===D||void 0===D||null===(a=D.Tenants)||void 0===a?void 0:a[0])||(null===g||void 0===g?void 0:g.toString());let C;if(D){var L;const e=!(null!==D&&void 0!==D&&null!==(L=D.Tenants)&&void 0!==L&&L[0]);C=e?"Storage":"Compute"}t.useEffect((()=>{u((0,A.g)("node",{tenantName:O,nodeRole:C,nodeId:p}))}),[u,O,p,C]);const G=()=>{switch(z.id){case q.O3:return(0,f.jsx)("div",{className:Ne("storage"),ref:c,children:(0,f.jsx)(F.z,{nodeId:p,parentRef:c,viewContext:{nodeId:null===p||void 0===p?void 0:p.toString()}})});case q.q7:return(0,f.jsx)(M.C,{nodeId:p,database:O,className:Ne("node-page-wrapper")});case q.mX:return(0,f.jsx)(xe,{className:Ne("node-page-wrapper"),nodeId:p});case q.wS:return(0,f.jsx)(P,{node:D,className:Ne("overview-wrapper")});default:return!1}};return S||!w?(0,f.jsx)(E.a,{size:"l"}):D?(0,f.jsxs)("div",{className:Ne(null,e.className),children:[(0,f.jsx)(i.mg,{titleTemplate:`%s \u2014 ${D.Host} \u2014 YDB Monitoring`,defaultTitle:`${D.Host} \u2014 YDB Monitoring`,children:(0,f.jsx)("title",{children:z.title})}),(0,f.jsx)(x,{node:D,additionalNodesProps:e.additionalNodesProps,className:Ne("header")}),I?(0,f.jsx)(N.o,{error:I,className:Ne("error")}):null,(0,f.jsxs)("div",{className:Ne("tabs"),children:[(0,f.jsx)(l.t,{size:"l",items:T,activeTab:z.id,wrapTo:({id:e},s)=>(0,f.jsx)(d.N_,{to:(0,q.vI)(p,{database:O},e),className:Ne("tab"),children:s},e),allowNotSelected:!0}),(0,f.jsx)(r.E,{})]}),(0,f.jsx)("div",{className:Ne("content"),children:G()})]}):I?(0,f.jsx)(N.o,{error:I}):(0,f.jsx)("div",{className:"error",children:"no node data"})}},76768:(e,s,a)=>{a.d(s,{C:()=>b});var t=a(44992),l=a(44508),i=a(53850),n=a(62060),d=a.n(n),o=a(21334),r=a(24600);const c=o.F.injectEndpoints({endpoints:e=>({getTabletsInfo:e.query({queryFn:async(e,{signal:s})=>{try{return{data:await window.api.viewer.getTabletsInfo(e,{signal:s})}}catch(a){return{error:a}}},providesTags:["All",{type:"Tablet",id:"LIST"}]})}),overrideExisting:"throw"}),u=(0,i.Mz)((e=>e),(e=>c.endpoints.getTabletsInfo.select(e)),{argsMemoize:i.i5,argsMemoizeOptions:{equalityCheck:d()}}),v=(0,i.Mz)((e=>e),((e,s)=>u(s)),((e,s)=>s(e).data)),p=(0,i.Mz)(((e,s)=>v(e,s)),(e=>(0,r.K)(e)),((e,s)=>null!==e&&void 0!==e&&e.TabletStateInfo?s?e.TabletStateInfo.map((e=>{var a;const t=void 0===e.NodeId||null===(a=s.get(e.NodeId))||void 0===a?void 0:a.Host;return{...e,fqdn:t}})):e.TabletStateInfo:[]));var h=a(77506),m=a(90182),g=a(88616),k=a(60712);const f=(0,h.cn)("tablets");function b({nodeId:e,path:s,database:a,className:i}){const[n]=(0,m.Nt)();let d={};const o=void 0===e?void 0:String(e);void 0!==o?d={nodeId:o,database:a}:s&&(d={path:s,database:a});const{currentData:r,isFetching:u,error:v}=c.useGetTabletsInfoQuery(0===Object.keys(d).length?t.hT:d,{pollingInterval:n}),h=u&&void 0===r,b=(0,m.N4)((e=>p(e,d)));return(0,k.jsxs)("div",{className:f(null,i),children:[v?(0,k.jsx)(l.o,{error:v}):null,r||h?(0,k.jsx)(g.Q,{tablets:b,database:a,loading:h}):null]})}},76938:(e,s,a)=>{a.d(s,{A:()=>l});var t=a(59284);const l=e=>t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.5a6.5 6.5 0 1 1-6.445 7.348.75.75 0 1 1 1.487-.194A5.001 5.001 0 1 0 4.43 4.5h1.32a.75.75 0 0 1 0 1.5h-3A.75.75 0 0 1 2 5.25v-3a.75.75 0 0 1 1.5 0v1.06A6.48 6.48 0 0 1 8 1.5",clipRule:"evenodd"}))},18677:(e,s,a)=>{a.d(s,{A:()=>l});var t=a(59284);const l=e=>t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14M6.53 5.47a.75.75 0 0 0-1.06 1.06L6.94 8 5.47 9.47a.75.75 0 1 0 1.06 1.06L8 9.06l1.47 1.47a.75.75 0 1 0 1.06-1.06L9.06 8l1.47-1.47a.75.75 0 1 0-1.06-1.06L8 6.94z",clipRule:"evenodd"}))},74321:(e,s,a)=>{a.d(s,{S:()=>r});var t=a(59284),l=a(64222),i=a(46898);function n(e){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 17",width:"16",height:"16",fill:"currentColor"},e),t.createElement("path",{d:"M4 7h9v3H4z"}))}function d(e){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10",width:"16",height:"16",fill:"currentColor"},e),t.createElement("path",{d:"M.49 5.385l1.644-1.644 4.385 4.385L4.874 9.77.49 5.385zm4.384 1.096L10.356 1 12 2.644 6.519 8.126 4.874 6.48v.001z"}))}const o=(0,a(69220).om)("checkbox"),r=t.forwardRef((function(e,s){const{size:a="m",indeterminate:r,disabled:c=!1,content:u,children:v,title:p,style:h,className:m,qa:g}=e,{checked:k,inputProps:f}=(0,l.v)(e),b=u||v,x=t.createElement("span",{className:o("indicator")},t.createElement("span",{className:o("icon"),"aria-hidden":!0},r?t.createElement(n,{className:o("icon-svg",{type:"dash"})}):t.createElement(d,{className:o("icon-svg",{type:"tick"})})),t.createElement("input",Object.assign({},f,{className:o("control")})),t.createElement("span",{className:o("outline")}));return t.createElement(i.m,{ref:s,title:p,style:h,size:a,disabled:c,className:o({size:a,disabled:c,indeterminate:r,checked:k},m),qa:g,control:x},b)}))}}]);