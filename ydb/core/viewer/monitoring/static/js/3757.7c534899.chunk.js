"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[3757],{93757:(e,t,r)=>{r.r(t),r.d(t,{MonacoDiffEditor:()=>c,default:()=>g,monaco:()=>n});var n=r(41551),o=r(68963);function u(e){return/^\d+$/.test(e)?"".concat(e,"px"):e}function i(){}var l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},l.apply(this,arguments)};function a(e){var t=e.width,r=e.height,i=e.value,a=e.defaultValue,c=e.language,d=e.theme,s=e.options,f=e.overrideServices,g=e.editorWillMount,p=e.editorDidMount,h=e.editorWillUnmount,v=e.onChange,m=e.className,M=e.original,E=e.originalUri,y=e.modifiedUri,O=(0,o.useRef)(null),b=(0,o.useRef)(null),C=(0,o.useRef)(null),w=(0,o.useRef)(null),N=u(t),V=u(r),j=(0,o.useMemo)((function(){return{width:N,height:V}}),[N,V]);return(0,o.useEffect)((function(){O.current&&(g(n),b.current=n.editor.createDiffEditor(O.current,l(l(l({},m?{extraEditorClassName:m}:{}),s),d?{theme:d}:{}),f),function(){var e=null!=i?i:a,t=null===E||void 0===E?void 0:E(n),r=null===y||void 0===y?void 0:y(n),o=t&&n.editor.getModel(t),u=r&&n.editor.getModel(r);o?(o.setValue(M),n.editor.setModelLanguage(o,c)):o=n.editor.createModel(e,c,t),u?(o.setValue(e),n.editor.setModelLanguage(u,c)):u=n.editor.createModel(e,c,r),b.current.setModel({original:o,modified:u})}(),function(){p(b.current,n);var e=b.current.getModel().modified;C.current=e.onDidChangeContent((function(t){w.current||v(e.getValue(),t)}))}())}),[]),(0,o.useEffect)((function(){b.current&&b.current.updateOptions(l(l({},m?{extraEditorClassName:m}:{}),s))}),[m,s]),(0,o.useEffect)((function(){b.current&&b.current.layout()}),[t,r]),(0,o.useEffect)((function(){if(b.current){var e=b.current.getModel(),t=e.original,r=e.modified;n.editor.setModelLanguage(t,c),n.editor.setModelLanguage(r,c)}}),[c]),(0,o.useEffect)((function(){if(b.current){var e=b.current.getModel().modified;w.current=!0,b.current.getModifiedEditor().pushUndoStop(),e.pushEditOperations([],[{range:e.getFullModelRange(),text:i}]),b.current.getModifiedEditor().pushUndoStop(),w.current=!1}}),[i]),(0,o.useEffect)((function(){n.editor.setTheme(d)}),[d]),(0,o.useEffect)((function(){if(b.current){var e=b.current.getModel().original;M!==e.getValue()&&e.setValue(M)}}),[M]),(0,o.useEffect)((function(){return function(){if(b.current){h(b.current,n),b.current.dispose();var e=b.current.getModel(),t=e.original,r=e.modified;t&&t.dispose(),r&&r.dispose()}C.current&&C.current.dispose()}}),[]),o.createElement("div",{ref:O,style:j,className:"react-monaco-editor-container"})}a.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:i,editorDidMount:i,editorWillUnmount:i,onChange:i,className:null},a.displayName="MonacoDiffEditor";const c=a;var d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)},s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};function f(e){var t=e.width,r=e.height,i=e.value,l=e.defaultValue,a=e.language,c=e.theme,f=e.options,g=e.overrideServices,p=e.editorWillMount,h=e.editorDidMount,v=e.editorWillUnmount,m=e.onChange,M=e.className,E=e.uri,y=(0,o.useRef)(null),O=(0,o.useRef)(null),b=(0,o.useRef)(null),C=(0,o.useRef)(null),w=u(t),N=u(r),V=(0,o.useMemo)((function(){return{width:w,height:N}}),[w,N]);return(0,o.useEffect)((function(){var e=null!==i?i:l;if(y.current){var t=d(d({},f),p(n)||{}),r=null===E||void 0===E?void 0:E(n),o=r&&n.editor.getModel(r);o?(o.setValue(e),n.editor.setModelLanguage(o,a)):o=n.editor.createModel(e,a,r),O.current=n.editor.create(y.current,d(d(d({model:o},M?{extraEditorClassName:M}:{}),t),c?{theme:c}:{}),g),h(O.current,n),b.current=O.current.onDidChangeModelContent((function(e){C.current||m(O.current.getValue(),e)}))}}),[]),(0,o.useEffect)((function(){if(O.current){if(i===O.current.getValue())return;var e=O.current.getModel();C.current=!0,O.current.pushUndoStop(),e.pushEditOperations([],[{range:e.getFullModelRange(),text:i}],void 0),O.current.pushUndoStop(),C.current=!1}}),[i]),(0,o.useEffect)((function(){if(O.current){var e=O.current.getModel();n.editor.setModelLanguage(e,a)}}),[a]),(0,o.useEffect)((function(){if(O.current){f.model;var e=s(f,["model"]);O.current.updateOptions(d(d({},M?{extraEditorClassName:M}:{}),e))}}),[M,f]),(0,o.useEffect)((function(){O.current&&O.current.layout()}),[t,r]),(0,o.useEffect)((function(){n.editor.setTheme(c)}),[c]),(0,o.useEffect)((function(){return function(){O.current&&(v(O.current,n),O.current.dispose()),b.current&&b.current.dispose()}}),[]),o.createElement("div",{ref:y,style:V,className:"react-monaco-editor-container"})}f.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:i,editorDidMount:i,editorWillUnmount:i,onChange:i,className:null},f.displayName="MonacoEditor";const g=f}}]);