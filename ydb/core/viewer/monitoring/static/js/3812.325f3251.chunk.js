"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[3812],{3685:(e,a,s)=>{s.d(a,{$:()=>o});var l=s(77506),t=s(33775),r=s(60712);const n=(0,l.cn)("ydb-entity-page-title");function o({entityName:e,status:a,id:s,className:l}){return(0,r.jsxs)("div",{className:n(null,l),children:[(0,r.jsx)("span",{className:n("prefix"),children:e}),(0,r.jsx)(t.k,{className:n("icon"),status:a,size:"s"}),s]})}},42655:(e,a,s)=>{s.d(a,{y:()=>c});var l=s(59284),t=s(89169),r=s(77506),n=s(66781),o=s(60712);const u=(0,r.cn)("ydb-info-viewer-skeleton"),i=()=>(0,o.jsxs)("div",{className:u("label"),children:[(0,o.jsx)(t.E,{className:u("label__text")}),(0,o.jsx)("div",{className:u("label__dots")})]}),c=({rows:e=8,className:a,delay:s=600})=>{const[r]=(0,n.y)(s);let c=(0,o.jsxs)(l.Fragment,{children:[(0,o.jsx)(i,{}),(0,o.jsx)(t.E,{className:u("value")})]});return r||(c=null),(0,o.jsx)("div",{className:u(null,a),children:[...new Array(e)].map(((e,a)=>(0,o.jsx)("div",{className:u("row"),children:c},`skeleton-row-${a}`)))})}},58389:(e,a,s)=>{s.d(a,{B:()=>c});var l=s(87184),t=s(77506),r=s(90053),n=s(70043),o=s(60712);const u=(0,t.cn)("ydb-page-meta");function i({items:e,loading:a}){return(0,o.jsx)("div",{className:u("info"),children:a?(0,o.jsx)(n.E,{className:u("skeleton")}):e.filter((e=>Boolean(e))).join("\xa0\xa0\xb7\xa0\xa0")})}function c({className:e,...a}){return(0,o.jsxs)(l.s,{gap:1,alignItems:"center",justifyContent:"space-between",className:u(null,e),children:[(0,o.jsx)(i,{...a}),(0,o.jsx)(r.E,{})]})}},70043:(e,a,s)=>{s.d(a,{E:()=>n});var l=s(89169),t=s(66781),r=s(60712);const n=({delay:e=600,className:a})=>{const[s]=(0,t.y)(e);return s?(0,r.jsx)(l.E,{className:a}):null}},75510:(e,a,s)=>{s.r(a),s.d(a,{StorageGroupPage:()=>M});var l=s(59284),t=s(44992),r=s(61750),n=s(67087),o=s(3685),u=s(44508),i=s(42655),c=s(58389),p=s(87184),d=s(7435),g=s(56839),v=s(73891),m=s(41650),h=s(60073),b=s(15132),y=s(33775),f=s(48372);const x=JSON.parse('{"encryption":"Encryption","overall":"Overall","disk-space":"Disk Space","media-type":"Media Type","erasure-species":"Erasure Species","used-space":"Used Space","usage":"Usage","read-throughput":"Read Throughput","write-throughput":"Write Throughput","yes":"Yes","no":"No","group-generation":"Group Generation","latency":"Latency","allocation-units":"Units","state":"State","missing-disks":"Missing Disks","available":"Available Space","latency-put-tablet-log":"Latency (Put Tablet Log)","latency-put-user-data":"Latency (Put User Data)","latency-get-fast":"Latency (Get Fast)"}'),N=(0,f.g4)("storage-group-info",{en:x});var j=s(60712);function k({data:e,className:a,...s}){const{Encryption:l,Overall:t,DiskSpace:r,MediaType:n,ErasureSpecies:o,Used:u,Limit:i,Usage:c,Read:f,Write:x,GroupGeneration:k,Latency:S,AllocationUnits:w,State:G,MissingDisks:E,Available:L,LatencyPutTabletLogMs:P,LatencyPutUserDataMs:T,LatencyGetFastMs:$}=e||{},_=[];(0,d.f8)(k)&&_.push({label:N("group-generation"),value:k}),(0,d.f8)(o)&&_.push({label:N("erasure-species"),value:o}),(0,d.f8)(n)&&_.push({label:N("media-type"),value:n}),(0,d.f8)(l)&&_.push({label:N("encryption"),value:N(l?"yes":"no")}),(0,d.f8)(t)&&_.push({label:N("overall"),value:(0,j.jsx)(y.k,{status:t})}),(0,d.f8)(G)&&_.push({label:N("state"),value:G}),(0,d.f8)(E)&&_.push({label:N("missing-disks"),value:E});const I=[];return(0,d.f8)(u)&&(0,d.f8)(i)&&I.push({label:N("used-space"),value:(0,j.jsx)(b.O,{value:Number(u),capacity:Number(i),formatValues:g.vX,colorizeProgress:!0})}),(0,d.f8)(L)&&I.push({label:N("available"),value:(0,g.vX)(Number(L))}),(0,d.f8)(c)&&I.push({label:N("usage"),value:`${c.toFixed(2)}%`}),(0,d.f8)(r)&&I.push({label:N("disk-space"),value:(0,j.jsx)(y.k,{status:r})}),(0,d.f8)(S)&&I.push({label:N("latency"),value:(0,j.jsx)(y.k,{status:S})}),(0,d.f8)(P)&&I.push({label:N("latency-put-tablet-log"),value:(0,v.Xo)(P)}),(0,d.f8)(T)&&I.push({label:N("latency-put-user-data"),value:(0,v.Xo)(T)}),(0,d.f8)($)&&I.push({label:N("latency-get-fast"),value:(0,v.Xo)($)}),(0,d.f8)(w)&&I.push({label:N("allocation-units"),value:w}),(0,d.f8)(f)&&I.push({label:N("read-throughput"),value:(0,m.O4)(Number(f))}),(0,d.f8)(x)&&I.push({label:N("write-throughput"),value:(0,m.O4)(Number(x))}),(0,j.jsxs)(p.s,{className:a,gap:2,direction:"row",wrap:!0,children:[(0,j.jsx)(h.z_,{info:_,...s}),(0,j.jsx)(h.z_,{info:I,...s})]})}var S=s(67028),w=s(40174),G=s(10174),E=s(54090),L=s(77506),P=s(90182),T=s(99936);const $=JSON.parse('{"storage-group":"Storage Group","storage":"Storage","pool-name":"Pool Name"}'),_=(0,f.g4)("ydb-storage-group-page",{en:$}),I=(0,L.cn)("ydb-storage-group-page");function M(){var e,a;const s=(0,P.YQ)(),p=l.useRef(null),[{groupId:g}]=(0,n.useQueryParams)({groupId:n.StringParam});l.useEffect((()=>{s((0,w.g)("storageGroup",{groupId:g}))}),[s,g]);const[v]=(0,P.Nt)(),m=(0,S.YA)(),h=(0,S.Pm)(),b=G.S.useGetStorageGroupsInfoQuery((0,d.f8)(g)?{groupId:g,shouldUseGroupsHandler:m,with:"all",fieldsRequired:"all"}:t.hT,{pollingInterval:v,skip:!h}),y=null===(e=b.data)||void 0===e||null===(a=e.groups)||void 0===a?void 0:a[0],f=b.isFetching&&void 0===y;return(0,j.jsxs)("div",{className:I(null),ref:p,children:[(()=>{const e=g?`${_("storage-group")} ${g}`:_("storage-group");return(0,j.jsx)(r.mg,{titleTemplate:`%s - ${e} \u2014 YDB Monitoring`,defaultTitle:`${e} \u2014 YDB Monitoring`})})(),(()=>{if(!g)return null;const e=[`${_("pool-name")}: ${null===y||void 0===y?void 0:y.PoolName}`];return(0,j.jsx)(c.B,{className:I("meta"),loading:f,items:e})})(),(0,j.jsx)(o.$,{className:I("title"),entityName:_("storage-group"),status:(null===y||void 0===y?void 0:y.Overall)||E.m.Grey,id:g}),b.error?(0,j.jsx)(u.o,{error:b.error}):null,f?(0,j.jsx)(i.y,{className:I("info"),rows:10}):(0,j.jsx)(k,{data:y,className:I("info")}),g?(0,j.jsxs)(l.Fragment,{children:[(0,j.jsx)("div",{className:I("storage-title"),children:_("storage")}),(0,j.jsx)(T.z,{groupId:g,parentRef:p,viewContext:{groupId:null===g||void 0===g?void 0:g.toString()}})]}):null]})}}}]);