"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[4444],{4444:(e,t,s)=>{s.r(t),s.d(t,{Clusters:()=>he});var r=s(59284);const n=e=>r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.5 7a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0m-.82 4.74a6 6 0 1 1 1.06-1.06l2.79 2.79a.75.75 0 1 1-1.06 1.06z",clipRule:"evenodd"}));var o=s(4557),l=s(32752),a=s(88908),i=s(47653),c=s(12207),d=s(61750),u=s(90053),m=s(57166),v=s(44508),h=s(52248),p=s(35400),x=s(95963),N=s(10671),g=s(67028),f=s(39567),w=s(23536),S=s.n(w);const j=e=>e.clusters.clusterName,b=e=>e.clusters.status,E=e=>e.clusters.service,y=e=>e.clusters.version,A=(e,t)=>0===t.length||e.status&&t.includes(e.status),C=(e,t)=>0===t.length||e.service&&t.includes(e.service),T=(e,t)=>0===t.length||t.some((t=>{var s,r;return null===(s=e.cluster)||void 0===s||null===(r=s.Versions)||void 0===r?void 0:r.some((e=>e.startsWith(t)))})),_=(e,t="")=>{var s;if(!t)return!0;const r=t.toLowerCase(),n=r.split(" "),o=(null===(s=e.title)||void 0===s?void 0:s.toLowerCase().match(/[^\d\s]+|\d+|[^-\s]+|[^_\s]+/g))||[],l=n.every((t=>{const s=S()(t),r=new RegExp(`^${s}|[\\s\\-_]${s}`,"i");return e.title&&r.test(e.title)||o.some((e=>e.startsWith(t)))})),a=e.preparedVersions.some((e=>e.version.includes(r))),i=Boolean(e.hosts&&e.hosts[r]);return l||a||i};var O=s(40174),D=s(51114),I=s(76086),R=s(47779),z=s(43951),k=s(81288),L=s(38596),M=s(65872),V=s(64470),G=s(15151),B=s(49461),U=s(78540),$=s(52443),P=s(96344),J=s(37477),H=s(60448),W=s(92459),F=s(54090),q=s(56839),Y=s(31684),Z=s(69446),K=s(87842);const Q="selectedColumns",X={TITLE:"title",VERSIONS:"versions",DC:"dc",SERVICE:"service",STATUS:"status",NODES:"nodes",LOAD:"load",STORAGE:"storage",HOSTS:"hosts",TENANTS:"tenants",DESCRIPTION:"description"},ee=[X.TITLE,X.VERSIONS,X.SERVICE,X.STATUS,X.NODES,X.LOAD,X.STORAGE,X.HOSTS,X.TENANTS],te={[X.TITLE]:"Cluster",[X.VERSIONS]:"Versions",[X.DC]:"DC",[X.SERVICE]:"Service",[X.STATUS]:"Status",[X.NODES]:"Nodes",[X.LOAD]:"Load",[X.STORAGE]:"Storage",[X.HOSTS]:"Hosts",[X.TENANTS]:"Databases",[X.DESCRIPTION]:"Description"};var se=s(48372);const re=JSON.parse('{"controls_status-select-label":"Status:","controls_service-select-label":"Service:","controls_version-select-label":"Version:","controls_search-placeholder":"Cluster name, version, host...","controls_select-placeholder":"All","statistics_clusters":"Clusters","statistics_hosts":"Hosts","statistics_tenants":"Tenants","statistics_nodes":"Nodes","statistics_load":"Load","statistics_storage":"Storage","tooltip_no-cluster-data":"No cluster data","clusters-count":{"one":"{{count}} cluster","other":"{{count}} clusters"},"entities-count":"{{value}} of {{capacity}}","page_title":"Clusters","edit-cluster":"Edit Cluster","remove-cluster":"Remove Cluster"}'),ne=(0,se.g4)("ydb-clusters-page",{en:re});const oe=(0,s(77506).cn)("clusters");var le=s(60712);const ae="clustersTableColumnsWidth",ie=(0,le.jsx)("span",{className:oe("empty-cell"),children:I.Pd});function ce({isEditClusterAvailable:e,isDeleteClusterAvailable:t}){return{name:X.TITLE,header:te[X.TITLE],width:320,defaultOrder:o.Ay.ASCENDING,sortAccessor:e=>e.title||e.name,render:({row:s})=>{var r;const n=null===(r=s.cluster)||void 0===r?void 0:r.Overall,o=s.balancer?(0,Z.Zd)(s.balancer):null;return(0,le.jsxs)(l.s,{direction:"column",gap:.5,children:[(0,le.jsxs)(l.s,{alignItems:"flex-start",justifyContent:"space-between",gap:1,children:[(0,le.jsx)(de,{row:s}),(0,le.jsxs)(l.s,{gap:1,children:[(()=>{var e;return n?(0,le.jsx)(J.c.Label,{status:n,size:"xs"}):(0,le.jsx)(J.c.Label,{status:F.m.Grey,note:(null===(e=s.cluster)||void 0===e?void 0:e.error)||ne("tooltip_no-cluster-data"),size:"xs"})})(),(()=>{const r=[],{onEditCluster:n,onDeleteCluster:o}=D.J;return e&&n&&r.push({text:ne("edit-cluster"),iconStart:(0,le.jsx)(M.A,{}),action:()=>{n({clusterData:s})}}),t&&o&&r.push({text:ne("remove-cluster"),iconStart:(0,le.jsx)(V.A,{}),action:()=>{o({clusterData:s})},theme:"danger"}),r.length?(0,le.jsx)(G.r,{items:r,defaultSwitcherProps:{view:"flat-secondary",size:"xs"},size:"s",menuProps:{size:"l"}}):null})()]})]}),o?(0,le.jsxs)(l.s,{gap:.5,alignItems:"center",children:[(0,le.jsx)(a.E,{variant:"caption-2",color:"secondary",children:o}),(0,le.jsx)(B.b,{size:"xs",text:o,className:oe("balancer-copy-icon")})]}):null]})}}}function de({row:e}){const{name:t,use_embedded_ui:s,preparedBackend:r,settings:n}=e,o=s&&r?(0,Y.t1)(r):(0,W.a)({environment:null===n||void 0===n?void 0:n.auth_service},{backend:r,clusterName:t},{withBasename:!0});return(0,le.jsx)("div",{className:oe("cluster-name"),children:(0,le.jsx)(U.N,{href:o,children:e.title||e.name})})}const ue=[{name:X.VERSIONS,header:te[X.VERSIONS],width:400,defaultOrder:o.Ay.DESCENDING,sortAccessor:({preparedVersions:e})=>e.map((e=>e.version.replace(/^[0-9]\+\./g,""))).sort(((e,t)=>e.localeCompare(t)))[0]||void 0,render:({row:e})=>{const{versions:t=[]}=e;return!t.length||t.some((e=>!e.version))?ie:(0,le.jsx)(me,{row:e})}},{name:X.STATUS,header:te[X.STATUS],width:180,sortable:!0,render:({row:e})=>(0,le.jsx)($.J,{children:e.status})},{name:X.SERVICE,header:te[X.SERVICE],width:100,sortable:!0},{name:X.DC,header:te[X.DC],width:120,sortable:!1,render:({row:e})=>{const t=e.cluster&&e.cluster.DataCenters||[];return(0,le.jsx)("div",{className:oe("cluster-dc"),children:t.filter(Boolean).join(", ")||ie})}},{name:X.NODES,header:te[X.NODES],width:170,resizeMinWidth:170,defaultOrder:o.Ay.DESCENDING,sortAccessor:({cluster:e={}})=>{const{NodesTotal:t=0}=e;return t},render:({row:e})=>{const{NodesAlive:t=0,NodesTotal:s=0,Overall:r}=e.cluster||{};return r?(0,le.jsx)(ve,{value:t,capacity:s,description:ne("entities-count",{value:(0,q.ZV)(t),capacity:(0,q.ZV)(s)})}):ie}},{name:X.LOAD,header:te[X.LOAD],width:170,resizeMinWidth:170,defaultOrder:o.Ay.DESCENDING,sortAccessor:({cluster:e})=>(null===e||void 0===e?void 0:e.NumberOfCpus)||0,render:({row:e})=>{const{LoadAverage:t=0,NumberOfCpus:s=0,RealNumberOfCpus:r,Overall:n}=e.cluster||{};return n?(0,le.jsx)(ve,{value:t,capacity:null!==r&&void 0!==r?r:s,description:ne("entities-count",{value:(0,q.ZV)(Math.round(t)),capacity:(0,q.ZV)(null!==r&&void 0!==r?r:s)})}):ie}},{name:X.STORAGE,header:te[X.STORAGE],width:170,resizeMinWidth:170,defaultOrder:o.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(null===e||void 0===e?void 0:e.StorageTotal)||0,render:({row:e})=>{const{StorageUsed:t=0,StorageTotal:s=0,Overall:r}=e.cluster||{};if(!r)return ie;const[n,o]=(0,q.ki)(Number(t),Number(s));return(0,le.jsx)(ve,{value:Number(t),capacity:Number(s),description:ne("entities-count",{value:n,capacity:o})})}},{name:X.HOSTS,header:te[X.HOSTS],width:80,defaultOrder:o.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(null===e||void 0===e?void 0:e.Hosts)||0,render:({row:e})=>{var t;return Number(null===(t=e.cluster)||void 0===t?void 0:t.Hosts)||ie}},{name:X.TENANTS,header:te[X.TENANTS],width:80,defaultOrder:o.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(null===e||void 0===e?void 0:e.Tenants)||0,render:({row:e})=>{var t;return Number(null===(t=e.cluster)||void 0===t?void 0:t.Tenants)||ie}},{name:X.DESCRIPTION,header:te[X.DESCRIPTION],sortable:!1,width:200,render:({row:e})=>e.description?(0,le.jsx)("div",{className:oe("description"),children:e.description}):ie}];function me({row:e}){const{preparedVersions:t,name:s,preparedBackend:r,settings:n,use_embedded_ui:o}=e;if(!t.length)return null;const l=o&&r?(0,Y.t1)(r):(0,W.a)({activeTab:K.Bi.versions,environment:null===n||void 0===n?void 0:n.auth_service},{backend:r,clusterName:s},{withBasename:!0});return(0,le.jsx)(U.N,{className:oe("cluster-versions"),href:l,children:(0,le.jsx)(H.p,{preparedVersions:t})})}function ve({value:e,capacity:t,description:s}){const r=t?e/t*100:0;return(0,le.jsxs)(l.s,{direction:"column",gap:2,children:[(0,le.jsx)("div",{children:(0,le.jsx)(P.k,{theme:"success",size:"s",value:r,className:oe("progress")})}),s]})}function he(){var e;const[t]=(0,R.Nt)(),s=f.ub.useGetClustersListQuery(void 0,{pollingInterval:t}),w=(0,R.YQ)();r.useEffect((()=>{w((0,O.g)("clusters",{}))}),[w]);const S=(0,g.zA)()&&void 0!==D.J.onEditCluster,M=(0,g.oW)()&&void 0!==D.J.onDeleteCluster,V=(0,R.N4)(j),G=(0,R.N4)(b),B=(0,R.N4)(E),U=(0,R.N4)(y),$=r.useMemo((()=>[ce({isEditClusterAvailable:S,isDeleteClusterAvailable:M}),...ue]),[M,S]),{columnsToShow:P,columnsToSelect:J,setColumns:H}=(0,z.K)($,Q,te,ee,[X.TITLE]),W=s.data,{servicesToSelect:F,versions:q}=r.useMemo((()=>{const e=new Set,t=new Set;return(null!==W&&void 0!==W?W:[]).forEach((s=>{var r,n;s.service&&e.add(s.service),null===(r=s.cluster)||void 0===r||null===(n=r.Versions)||void 0===n||n.forEach((e=>{t.add((0,L.U)(e))}))})),{servicesToSelect:Array.from(e).map((e=>({value:e,content:e}))),versions:Array.from(t).map((e=>({value:e,content:e})))}}),[W]),Y=r.useMemo((()=>function(e,t){return e.filter((e=>A(e,t.status)&&C(e,t.service)&&T(e,t.version)&&_(e,t.clusterName)))}(null!==W&&void 0!==W?W:[],{clusterName:V,status:G,service:B,version:U})),[V,W,B,G,U]),Z=r.useMemo((()=>Array.from(new Set((null!==W&&void 0!==W?W:[]).map((e=>e.status)).filter(Boolean))).sort().map((e=>({value:e,content:e})))),[W]),K=(0,k.Pq)(s.error),se=K?D.J.clusterOrDatabaseAccessError:void 0;return(0,le.jsx)(m.A,{error:K?s.error:void 0,...se,errorPageTitle:null!==(e=D.J.clustersPageTitle)&&void 0!==e?e:ne("page_title"),children:(0,le.jsxs)("div",{className:oe(),children:[(0,le.jsx)(d.mg,{children:(0,le.jsx)("title",{children:ne("page_title")})}),(()=>{var e;return(0,le.jsxs)(l.s,{justifyContent:"space-between",className:oe("title-wrapper"),children:[(0,le.jsx)(a.E,{variant:"header-1",children:null!==(e=D.J.clustersPageTitle)&&void 0!==e?e:ne("page_title")}),(0,le.jsx)(u.E,{className:oe("autorefresh")})]})})(),(0,le.jsxs)(l.s,{className:oe("controls-wrapper"),children:[(0,le.jsx)("div",{className:oe("control",{wide:!0}),children:(0,le.jsx)(x.v,{placeholder:ne("controls_search-placeholder"),endContent:(0,le.jsx)(i.I,{data:n,className:oe("search-icon")}),onChange:e=>{w((0,f.Fe)({clusterName:e}))},value:V})}),(0,le.jsx)("div",{className:oe("control"),children:(0,le.jsx)(c.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:ne("controls_select-placeholder"),label:ne("controls_status-select-label"),value:G,options:Z,onUpdate:e=>{w((0,f.Fe)({status:e}))},width:"max"})}),(0,le.jsx)("div",{className:oe("control"),children:(0,le.jsx)(c.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:ne("controls_select-placeholder"),label:ne("controls_service-select-label"),value:B,options:F,onUpdate:e=>{w((0,f.Fe)({service:e}))},width:"max"})}),(0,le.jsx)("div",{className:oe("control"),children:(0,le.jsx)(c.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:ne("controls_select-placeholder"),label:ne("controls_version-select-label"),value:U,options:q,onUpdate:e=>{w((0,f.Fe)({version:e}))},width:"max"})}),(0,le.jsx)(N.O,{className:oe("column-setup"),popupWidth:242,items:J,showStatus:!0,onUpdate:H},"TableColumnSetup")]}),null!==W&&void 0!==W&&W.length?(0,le.jsx)(a.E,{color:"secondary",children:ne("clusters-count",{count:null===Y||void 0===Y?void 0:Y.length})}):null,s.isError?(0,le.jsx)(v.o,{error:s.error}):null,s.isLoading?(0,le.jsx)(h.a,{size:"l"}):null,s.fulfilledTimeStamp?(0,le.jsx)("div",{className:oe("table-wrapper"),children:(0,le.jsx)("div",{className:oe("table-content"),children:(0,le.jsx)(p.l,{columnsWidthLSKey:ae,wrapperClassName:oe("table"),data:Y,columns:P,settings:{...I.N3,dynamicRender:!1},initialSortOrder:{columnId:X.TITLE,order:o.Ay.ASCENDING}})})}):null]})})}},10671:(e,t,s)=>{s.d(t,{O:()=>c});var r=s(27738),n=s(88908),o=s(80136),l=s(47653),a=s(53807),i=s(60712);function c(e){const{items:t,showStatus:s,disabled:c}=e,d=()=>{if(!s)return null;const e=t.reduce(((e,t)=>t.selected?e+1:e),0),r=t.length;return(0,i.jsxs)(n.E,{color:"secondary",children:[e,"/",r]})};return(0,i.jsx)(a.O,{...e,renderSwitcher:e=>(0,i.jsxs)(o.$,{disabled:c,onClick:e.onClick,children:[(0,i.jsx)(l.I,{data:r.A}),d()]}),hideApplyButton:!0})}},36388:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(59284);const n=e=>r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 13.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14m1-4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0M8.75 5a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0z",clipRule:"evenodd"}))},37477:(e,t,s)=>{s.d(t,{c:()=>b});s(59284);var r=s(8979),n=s(52443),o=s(32752),l=s(20263),a=s(54090),i=s(77506),c=s(43937),d=s(36388),u=s(94420),m=s(70825),v=s(49917),h=s(47653),p=s(60712);const x={[a.m.Blue]:c.A,[a.m.Yellow]:d.A,[a.m.Orange]:u.A,[a.m.Red]:d.A,[a.m.Green]:m.A,[a.m.Grey]:v.A};function N({status:e,...t}){return e?(0,p.jsx)(h.I,{...t,data:x[e]}):null}var g=s(89732),f=s(97677);const w=(0,i.cn)("ydb-entity-status-new"),S={[a.m.Red]:"danger",[a.m.Blue]:"info",[a.m.Green]:"success",[a.m.Grey]:"unknown",[a.m.Orange]:"orange",[a.m.Yellow]:"warning"},j={get[a.m.Red](){return(0,g.A)("title_red")},get[a.m.Yellow](){return(0,g.A)("title_yellow")},get[a.m.Orange](){return(0,g.A)("title_orange")},get[a.m.Green](){return(0,g.A)("title_green")},get[a.m.Grey](){return(0,g.A)("title_grey")},get[a.m.Blue](){return(0,g.A)("title_blue")}};function b({className:e,children:t}){return(0,p.jsx)(o.s,{gap:"2",wrap:"nowrap",alignItems:"center",className:w(null,e),children:t})}b.Label=function({children:e,status:t,withStatusName:s=!0,note:a,size:i="m",iconSize:c=14}){const d=S[t];return(0,p.jsx)(r.m,{title:f.D[t],disabled:Boolean(a),children:(0,p.jsx)(n.J,{theme:"orange"===d?void 0:d,icon:(0,p.jsx)(N,{size:c,status:t}),size:i,className:w({orange:"orange"===d}),children:(0,p.jsxs)(o.s,{gap:"2",wrap:"nowrap",children:[e,s?j[t]:null,a&&(0,p.jsx)(l.H,{className:w("note"),children:a})]})})})},b.displayName="EntityStatus"},43951:(e,t,s)=>{s.d(t,{K:()=>l});var r=s(59284),n=s(59001);function o(e){if("string"===typeof e)return{id:e,selected:!0};if(e&&"object"===typeof e&&"id"in e&&"string"===typeof e.id){const t="selected"in e&&Boolean(e.selected);return{id:e.id,selected:t}}}const l=(e,t,s,l,a)=>{const[i,c]=r.useState((()=>{const s=n.f.readUserSettingsValue(t,l).map(o);return e.reduce(((e,t)=>{const r=s.find((e=>e&&e.id===t.name));return r?e.push(r):e.push({id:t.name,selected:!1}),e}),[])})),d=r.useMemo((()=>i.reduce(((t,{id:r,selected:n})=>{const o=null===a||void 0===a?void 0:a.includes(r),l=e.find((e=>e.name===r));return l&&t.push({id:r,title:s[r],selected:n||o,required:o,sticky:o?"start":void 0,column:l}),t}),[]).toSorted(((e,t)=>Number(Boolean(t.required))-Number(Boolean(e.required))))),[e,s,a,i]),u=r.useMemo((()=>d.filter((e=>e.selected)).map((e=>e.column))),[d]),m=r.useCallback((e=>{const s=e.map((({id:e,selected:t})=>({id:e,selected:t})));n.f.setUserSettingsValue(t,s),c(s)}),[t]);return{columnsToShow:u,columnsToSelect:d,setColumns:m}}},52248:(e,t,s)=>{s.d(t,{a:()=>r.a});var r=s(47334)},59134:(e,t,s)=>{s.d(t,{v:()=>c});s(59284);var r=s(77506),n=s(79602),o=s(62441),l=s(60712);const a=({onUpdate:e,value:t="",debounce:s=200,...r})=>{const[a,i]=(0,o.o)({value:t,onUpdate:e,debounce:s});return(0,l.jsx)(n.k,{value:a,onUpdate:i,...r})},i=(0,r.cn)("ydb-search"),c=({onChange:e,value:t="",width:s,className:r,debounce:n,inputRef:o,...c})=>(0,l.jsx)(a,{debounce:n,hasClear:!0,autoFocus:!0,controlRef:o,style:{width:s},className:i(null,r),value:t,onUpdate:e,...c})},60448:(e,t,s)=>{s.d(t,{p:()=>g});var r=s(59284),n=s(80136),o=s(32752),l=s(24342),a=s(13847),i=s(77506),c=s(48372);const d=JSON.parse('{"action_show_more":"Show {{count}} more","action_hide":"Hide {{count}}","tooltip_nodes":{"one":"{{count}} Node","other":"{{count}} Nodes"}}'),u=(0,c.g4)("ydb-versions-bar",{en:d});var m=s(60712);const v=(0,i.cn)("ydb-versions-bar"),h=4,p=h-1,x=200,N=200;function g({preparedVersions:e,withTitles:t=!0,size:s="s"}){const i=e.length>h&&"s"===s,[c,d]=r.useState(),[g,w]=r.useState(!1),S=r.useMemo((()=>{const t=e.reduce(((e,t)=>e+(t.count||0)),0);return e.map((e=>({value:(e.count||0)/t*100,color:e.color,version:e.version,count:e.count})))}),[e]),j=r.useMemo((()=>g?e:i?e.slice(0,p):e),[g,e,i]),b=e=>{e.preventDefault(),e.stopPropagation(),w(!0)},E=e=>{e.preventDefault(),e.stopPropagation(),w(!1)},y=r.useMemo((()=>(0,a.debounce)((e=>{d(e)}),x)),[]),A=r.useMemo((()=>(y.cancel(),(0,a.debounce)((()=>{d(void 0)}),x))),[y]),C=e=>Boolean(c&&c!==e);return(0,m.jsxs)(o.s,{direction:"column",className:v("bar-wrapper",{size:s}),wrap:!0,children:[(0,m.jsx)(o.s,{className:v("bar",{size:s}),grow:1,children:S.map((e=>(0,m.jsx)(l.m,{content:(0,m.jsxs)(r.Fragment,{children:[u("tooltip_nodes",{count:e.count}),(0,m.jsx)("br",{}),e.version]}),placement:"m"===s?"auto":"top-start",openDelay:N,children:(0,m.jsx)("span",{onMouseEnter:()=>{y(e.version)},onMouseLeave:A,className:v("version",{dimmed:C(e.version),size:s}),style:{backgroundColor:e.color,width:`${e.value}%`}})},e.version)))}),t&&(0,m.jsxs)(o.s,{className:v("titles-wrapper",{size:s}),children:[j.map((e=>(0,m.jsx)(f,{version:e.version,color:e.color||"",count:e.count,isDimmed:C(e.version),onMouseEnter:()=>{y(e.version)},onMouseLeave:A,size:s},e.version))),(()=>{if(!i)return null;const t=e.length-p;return g?(0,m.jsx)(n.$,{view:"flat-secondary",size:"s",onClick:E,className:v("button"),children:u("action_hide",{count:t})}):(0,m.jsx)(n.$,{view:"flat-secondary",size:"s",onClick:b,className:v("button"),children:u("action_show_more",{count:t})})})()]})]})}function f({version:e,color:t,count:s,isDimmed:r,onMouseEnter:n,onMouseLeave:a,size:i}){return(0,m.jsx)(l.m,{content:u("tooltip_nodes",{count:s}),placement:"bottom-end",openDelay:N,children:(0,m.jsxs)(o.s,{alignItems:"center",className:v("title",{size:i}),children:[(0,m.jsx)(w,{size:i,dimmed:r,color:t}),(0,m.jsx)("div",{className:v("title-text",{dimmed:r,size:i}),onMouseEnter:n,onMouseLeave:a,children:e})]})})}function w({size:e,dimmed:t,color:s}){const r="m"===e?8:6,n=r/2;return(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:`0 0 ${r} ${r}`,fill:"none",className:v("version-icon",{dimmed:t}),children:(0,m.jsx)("circle",{cx:n,cy:n,r:n,fill:s})})}},62441:(e,t,s)=>{s.d(t,{o:()=>n});var r=s(59284);function n({value:e,onUpdate:t,debounce:s=200}){const[n,o]=r.useState(e),l=r.useRef();r.useEffect((()=>{o((t=>t!==e?e:t))}),[e]);return[n,e=>{o(e),window.clearTimeout(l.current),l.current=window.setTimeout((()=>{null===t||void 0===t||t(e)}),s)}]}},89732:(e,t,s)=>{s.d(t,{A:()=>o});var r=s(48372);const n=JSON.parse('{"title_red":"Critical","title_blue":"Normal","title_green":"Good","title_grey":"Unknown","title_orange":"Caution","title_yellow":"Warning","context_red":"Some systems are failed and not available","context_yellow":"There are minor issues","context_orange":"Critical state, requires immediate attention","context_green":"Everything is working as expected","context_grey":"The condition cannot be determined","context_blue":"All good, some parts of the system are restoring"}'),o=(0,r.g4)("ydb-entity-status",{en:n})},90053:(e,t,s)=>{s.d(t,{E:()=>h});var r=s(8873),n=s(80136),o=s(12207),l=s(21334),a=s(77506),i=s(47779),c=s(48372);const d=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),u=(0,c.g4)("ydb-diagnostics-autorefresh-control",{en:d});var m=s(60712);const v=(0,a.cn)("auto-refresh-control");function h({className:e,onManualRefresh:t}){const s=(0,i.YQ)(),[a,c]=(0,i.Nt)();return(0,m.jsxs)("div",{className:v(null,e),children:[(0,m.jsx)(n.$,{view:"flat-secondary",onClick:()=>{s(l.F.util.invalidateTags(["All"])),null===t||void 0===t||t()},"aria-label":u("Refresh"),children:(0,m.jsx)(n.$.Icon,{children:(0,m.jsx)(r.A,{})})}),(0,m.jsxs)(o.l,{value:[String(a)],onUpdate:e=>{c(Number(e))},width:85,qa:"ydb-autorefresh-select",children:[(0,m.jsx)(o.l.Option,{value:"0",children:u("None")}),(0,m.jsx)(o.l.Option,{value:"15000",children:u("15 sec")}),(0,m.jsx)(o.l.Option,{value:"60000",children:u("1 min")}),(0,m.jsx)(o.l.Option,{value:"120000",children:u("2 min")}),(0,m.jsx)(o.l.Option,{value:"300000",children:u("5 min")})]})]})}},95963:(e,t,s)=>{s.d(t,{v:()=>r.v});var r=s(59134)},96344:(e,t,s)=>{s.d(t,{k:()=>v});var r=s(60712),n=s(59284);const o=(0,s(10417).om)("progress");function l(e){const{text:t,offset:s=0}=e;return t?(0,r.jsx)("div",{className:o("text-inner"),style:{transform:`translateX(calc(var(--g-flow-direction) * ${-s}%))`},children:t}):null}function a({item:e}){const{value:t,color:s,className:n,theme:l,title:a,content:i,loading:c}=e,d={loading:c};return"undefined"===typeof s&&(d.theme=l||"default"),Number.isFinite(t)?(0,r.jsx)("div",{className:o("item",d,n),style:{width:`${t}%`,backgroundColor:s},title:a,children:i}):null}function i(e){return e<100?e-100:0}function c(e){const{theme:t,colorStops:s,colorStopsValue:r,value:n}=e;if(s){const e=s.find(((e,t)=>{const o="number"===typeof r?r:n,l=t>1?s[t-1].stop:0,a=t<s.length-1?e.stop:100;return o>=l&&o<=a}));return e?e.theme:t}return t}function d(e){const{stack:t,stackClassName:s,value:n,text:c}=e,d=i(n||function(e){return e.reduce(((e,{value:t})=>e+t),0)}(t));return(0,r.jsxs)("div",{className:o("stack",s),style:{transform:`translateX(calc(var(--g-flow-direction) * ${d}%))`},children:[(0,r.jsx)("div",{className:o("item"),style:{width:-d+"%"}}),t.map(((e,t)=>(0,r.jsx)(a,{item:e},t))),(0,r.jsx)(l,{offset:d,text:c})]})}function u(e){const{value:t,loading:s,text:n}=e,a=i(t);return Number.isFinite(t)?(0,r.jsx)("div",{className:o("item",{theme:c(e),loading:s}),style:{transform:`translateX(calc(var(--g-flow-direction) * ${a}%))`},children:(0,r.jsx)(l,{offset:a,text:n})}):null}function m(e){return void 0!==e.stack}const v=n.forwardRef((function(e,t){const{text:s="",theme:n="default",size:l="m",loading:a=!1,className:i,qa:c}=e,v={...e,text:s,theme:n,size:l,loading:a};return(0,r.jsxs)("div",{ref:t,className:o({size:l},i),"data-qa":c,children:[(0,r.jsx)("div",{className:o("text"),children:s}),m(v)?(0,r.jsx)(d,{...v}):(0,r.jsx)(u,{...v})]})}))},97677:(e,t,s)=>{s.d(t,{D:()=>o});var r=s(54090),n=s(89732);const o={get[r.m.Red](){return(0,n.A)("context_red")},get[r.m.Yellow](){return(0,n.A)("context_yellow")},get[r.m.Orange](){return(0,n.A)("context_orange")},get[r.m.Green](){return(0,n.A)("context_green")},get[r.m.Grey](){return(0,n.A)("context_grey")},get[r.m.Blue](){return(0,n.A)("context_blue")}}}}]);