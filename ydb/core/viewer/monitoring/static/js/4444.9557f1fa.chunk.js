"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[4444],{4444:(e,t,s)=>{s.r(t),s.d(t,{Clusters:()=>ce});var r=s(59284);const n=e=>r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.5 7a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0m-.82 4.74a6 6 0 1 1 1.06-1.06l2.79 2.79a.75.75 0 1 1-1.06 1.06z",clipRule:"evenodd"}));var l=s(4557),o=s(32752),a=s(88908),i=s(47653),c=s(12207),u=s(53807),d=s(61750),m=s(90053),v=s(44508),h=s(52248),p=s(17594),x=s(95963),N=s(67028),g=s(39567),f=s(23536),w=s.n(f);const S=e=>e.clusters.clusterName,j=e=>e.clusters.status,b=e=>e.clusters.service,E=e=>e.clusters.version,y=(e,t)=>0===t.length||e.status&&t.includes(e.status),A=(e,t)=>0===t.length||e.service&&t.includes(e.service),C=(e,t)=>0===t.length||t.some((t=>{var s,r;return null===(s=e.cluster)||void 0===s||null===(r=s.Versions)||void 0===r?void 0:r.some((e=>e.startsWith(t)))})),T=(e,t="")=>{var s;if(!t)return!0;const r=t.toLowerCase(),n=r.split(" "),l=(null===(s=e.title)||void 0===s?void 0:s.toLowerCase().match(/[^\d\s]+|\d+|[^-\s]+|[^_\s]+/g))||[],o=n.every((t=>{const s=w()(t),r=new RegExp(`^${s}|[\\s\\-_]${s}`,"i");return e.title&&r.test(e.title)||l.some((e=>e.startsWith(t)))})),a=e.preparedVersions.some((e=>e.version.includes(r))),i=Boolean(e.hosts&&e.hosts[r]);return o||a||i};var _=s(40174),O=s(51114),D=s(76086),I=s(53627),R=s(43951),z=s(38596),L=s(65872),M=s(64470),k=s(15151),V=s(78540),G=s(49461),U=s(52443),B=s(96344),$=s(37477),H=s(60448),J=s(54090),P=s(56839),W=s(31684),F=s(69446),Y=s(87842);const q="selectedColumns",Z={TITLE:"title",VERSIONS:"versions",DC:"dc",SERVICE:"service",STATUS:"status",NODES:"nodes",LOAD:"load",STORAGE:"storage",HOSTS:"hosts",TENANTS:"tenants",DESCRIPTION:"description"},K=[Z.TITLE,Z.VERSIONS,Z.SERVICE,Z.STATUS,Z.NODES,Z.LOAD,Z.STORAGE,Z.HOSTS,Z.TENANTS],Q={[Z.TITLE]:"Cluster",[Z.VERSIONS]:"Versions",[Z.DC]:"DC",[Z.SERVICE]:"Service",[Z.STATUS]:"Status",[Z.NODES]:"Nodes",[Z.LOAD]:"Load",[Z.STORAGE]:"Storage",[Z.HOSTS]:"Hosts",[Z.TENANTS]:"Databases",[Z.DESCRIPTION]:"Description"};var X=s(48372);const ee=JSON.parse('{"controls_status-select-label":"Status:","controls_service-select-label":"Service:","controls_version-select-label":"Version:","controls_search-placeholder":"Cluster name, version, host...","controls_select-placeholder":"All","statistics_clusters":"Clusters","statistics_hosts":"Hosts","statistics_tenants":"Tenants","statistics_nodes":"Nodes","statistics_load":"Load","statistics_storage":"Storage","tooltip_no-cluster-data":"No cluster data","clusters-count":{"one":"{{count}} cluster","other":"{{count}} clusters"},"entities-count":"{{value}} of {{capacity}}","page_title":"Clusters","edit-cluster":"Edit Cluster","remove-cluster":"Remove Cluster"}'),te=(0,X.g4)("ydb-clusters-page",{en:ee});const se=(0,s(77506).cn)("clusters");var re=s(60712);const ne="clustersTableColumnsWidth",le=(0,re.jsx)("span",{className:se("empty-cell"),children:D.Pd});function oe({isEditClusterAvailable:e,isDeleteClusterAvailable:t}){return{name:Z.TITLE,header:Q[Z.TITLE],width:320,defaultOrder:l.Ay.ASCENDING,sortAccessor:e=>e.title||e.name,render:({row:s})=>{var r;const{name:n,use_embedded_ui:l,preparedBackend:i}=s,c=l&&i?(0,W.t1)(i):(0,Y.a)(void 0,{backend:i,clusterName:n},{withBasename:!0}),u=null===(r=s.cluster)||void 0===r?void 0:r.Overall,d=s.balancer?(0,F.Zd)(s.balancer):null;return(0,re.jsxs)(o.s,{direction:"column",gap:.5,children:[(0,re.jsxs)(o.s,{alignItems:"flex-start",justifyContent:"space-between",gap:1,children:[(0,re.jsx)("div",{className:se("cluster-name"),children:(0,re.jsx)(V.N,{href:c,children:s.title||s.name})}),(0,re.jsxs)(o.s,{gap:1,children:[(()=>{var e;return u?(0,re.jsx)($.c.Label,{status:u,size:"xs"}):(0,re.jsx)($.c.Label,{status:J.m.Grey,note:(null===(e=s.cluster)||void 0===e?void 0:e.error)||te("tooltip_no-cluster-data"),size:"xs"})})(),(()=>{const r=[],{onEditCluster:n,onDeleteCluster:l}=O.J;return e&&n&&r.push({text:te("edit-cluster"),iconStart:(0,re.jsx)(L.A,{}),action:()=>{n({clusterData:s})}}),t&&l&&r.push({text:te("remove-cluster"),iconStart:(0,re.jsx)(M.A,{}),action:()=>{l({clusterData:s})},theme:"danger"}),r.length?(0,re.jsx)(k.r,{items:r,defaultSwitcherProps:{view:"flat-secondary",size:"xs"},size:"s",menuProps:{size:"l"}}):null})()]})]}),d?(0,re.jsxs)(o.s,{gap:.5,alignItems:"center",children:[(0,re.jsx)(a.E,{variant:"caption-2",color:"secondary",children:d}),(0,re.jsx)(G.b,{size:"xs",text:d,className:se("balancer-copy-icon")})]}):null]})}}}const ae=[{name:Z.VERSIONS,header:Q[Z.VERSIONS],width:400,defaultOrder:l.Ay.DESCENDING,sortAccessor:({preparedVersions:e})=>e.map((e=>e.version.replace(/^[0-9]\+\./g,""))).sort(((e,t)=>e.localeCompare(t)))[0]||void 0,render:({row:e})=>{const{preparedVersions:t,versions:s=[],name:r,preparedBackend:n}=e;return!s.length||s.some((e=>!e.version))?le:t.length>0&&(0,re.jsx)(V.N,{className:se("cluster-versions"),href:(0,Y.a)(Y.Bi.versions,{backend:n,clusterName:r},{withBasename:!0}),children:(0,re.jsx)(H.p,{preparedVersions:t})})}},{name:Z.STATUS,header:Q[Z.STATUS],width:180,sortable:!0,render:({row:e})=>(0,re.jsx)(U.J,{children:e.status})},{name:Z.SERVICE,header:Q[Z.SERVICE],width:100,sortable:!0},{name:Z.DC,header:Q[Z.DC],width:120,sortable:!1,render:({row:e})=>{const t=e.cluster&&e.cluster.DataCenters||[];return(0,re.jsx)("div",{className:se("cluster-dc"),children:t.filter(Boolean).join(", ")||le})}},{name:Z.NODES,header:Q[Z.NODES],width:170,resizeMinWidth:170,defaultOrder:l.Ay.DESCENDING,sortAccessor:({cluster:e={}})=>{const{NodesTotal:t=0}=e;return t},render:({row:e})=>{const{NodesAlive:t=0,NodesTotal:s=0,Overall:r}=e.cluster||{};return r?(0,re.jsx)(ie,{value:t,capacity:s,description:te("entities-count",{value:(0,P.ZV)(t),capacity:(0,P.ZV)(s)})}):le}},{name:Z.LOAD,header:Q[Z.LOAD],width:170,resizeMinWidth:170,defaultOrder:l.Ay.DESCENDING,sortAccessor:({cluster:e})=>(null===e||void 0===e?void 0:e.NumberOfCpus)||0,render:({row:e})=>{const{LoadAverage:t=0,NumberOfCpus:s=0,RealNumberOfCpus:r,Overall:n}=e.cluster||{};return n?(0,re.jsx)(ie,{value:t,capacity:null!==r&&void 0!==r?r:s,description:te("entities-count",{value:(0,P.ZV)(Math.round(t)),capacity:(0,P.ZV)(null!==r&&void 0!==r?r:s)})}):le}},{name:Z.STORAGE,header:Q[Z.STORAGE],width:170,resizeMinWidth:170,defaultOrder:l.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(null===e||void 0===e?void 0:e.StorageTotal)||0,render:({row:e})=>{const{StorageUsed:t=0,StorageTotal:s=0,Overall:r}=e.cluster||{};if(!r)return le;const[n,l]=(0,P.ki)(Number(t),Number(s));return(0,re.jsx)(ie,{value:Number(t),capacity:Number(s),description:te("entities-count",{value:n,capacity:l})})}},{name:Z.HOSTS,header:Q[Z.HOSTS],width:80,defaultOrder:l.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(null===e||void 0===e?void 0:e.Hosts)||0,render:({row:e})=>{var t;return Number(null===(t=e.cluster)||void 0===t?void 0:t.Hosts)||le}},{name:Z.TENANTS,header:Q[Z.TENANTS],width:80,defaultOrder:l.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(null===e||void 0===e?void 0:e.Tenants)||0,render:({row:e})=>{var t;return Number(null===(t=e.cluster)||void 0===t?void 0:t.Tenants)||le}},{name:Z.DESCRIPTION,header:Q[Z.DESCRIPTION],sortable:!1,width:200,render:({row:e})=>e.description?(0,re.jsx)("div",{className:se("description"),children:e.description}):le}];function ie({value:e,capacity:t,description:s}){const r=t?e/t*100:0;return(0,re.jsxs)(o.s,{direction:"column",gap:2,children:[(0,re.jsx)("div",{children:(0,re.jsx)(B.k,{theme:"success",size:"s",value:r,className:se("progress")})}),s]})}function ce(){const[e]=(0,I.Nt)(),t=g.ub.useGetClustersListQuery(void 0,{pollingInterval:e}),s=(0,I.YQ)();r.useEffect((()=>{s((0,_.g)("clusters",{}))}),[s]);const f=(0,N.zA)()&&void 0!==O.J.onEditCluster,w=(0,N.oW)()&&void 0!==O.J.onDeleteCluster,L=(0,I.N4)(S),M=(0,I.N4)(j),k=(0,I.N4)(b),V=(0,I.N4)(E),G=r.useMemo((()=>[oe({isEditClusterAvailable:f,isDeleteClusterAvailable:w}),...ae]),[w,f]),{columnsToShow:U,columnsToSelect:B,setColumns:$}=(0,R.K)(G,q,Q,K,[Z.TITLE]),H=t.data,{servicesToSelect:J,versions:P}=r.useMemo((()=>{const e=new Set,t=new Set;return(null!==H&&void 0!==H?H:[]).forEach((s=>{var r,n;s.service&&e.add(s.service),null===(r=s.cluster)||void 0===r||null===(n=r.Versions)||void 0===n||n.forEach((e=>{t.add((0,z.U)(e))}))})),{servicesToSelect:Array.from(e).map((e=>({value:e,content:e}))),versions:Array.from(t).map((e=>({value:e,content:e})))}}),[H]),W=r.useMemo((()=>function(e,t){return e.filter((e=>y(e,t.status)&&A(e,t.service)&&C(e,t.version)&&T(e,t.clusterName)))}(null!==H&&void 0!==H?H:[],{clusterName:L,status:M,service:k,version:V})),[L,H,k,M,V]),F=r.useMemo((()=>Array.from(new Set((null!==H&&void 0!==H?H:[]).map((e=>e.status)).filter(Boolean))).sort().map((e=>({value:e,content:e})))),[H]);return(0,re.jsxs)("div",{className:se(),children:[(0,re.jsx)(d.mg,{children:(0,re.jsx)("title",{children:te("page_title")})}),(()=>{var e;return(0,re.jsxs)(o.s,{justifyContent:"space-between",className:se("title-wrapper"),children:[(0,re.jsx)(a.E,{variant:"header-1",children:null!==(e=O.J.clustersPageTitle)&&void 0!==e?e:te("page_title")}),(0,re.jsx)(m.E,{className:se("autorefresh")})]})})(),(0,re.jsxs)(o.s,{className:se("controls-wrapper"),children:[(0,re.jsx)("div",{className:se("control",{wide:!0}),children:(0,re.jsx)(x.v,{placeholder:te("controls_search-placeholder"),endContent:(0,re.jsx)(i.I,{data:n,className:se("search-icon")}),onChange:e=>{s((0,g.Fe)({clusterName:e}))},value:L})}),(0,re.jsx)("div",{className:se("control"),children:(0,re.jsx)(c.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:te("controls_select-placeholder"),label:te("controls_status-select-label"),value:M,options:F,onUpdate:e=>{s((0,g.Fe)({status:e}))},width:"max"})}),(0,re.jsx)("div",{className:se("control"),children:(0,re.jsx)(c.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:te("controls_select-placeholder"),label:te("controls_service-select-label"),value:k,options:J,onUpdate:e=>{s((0,g.Fe)({service:e}))},width:"max"})}),(0,re.jsx)("div",{className:se("control"),children:(0,re.jsx)(c.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:te("controls_select-placeholder"),label:te("controls_version-select-label"),value:V,options:P,onUpdate:e=>{s((0,g.Fe)({version:e}))},width:"max"})}),(0,re.jsx)("div",{className:se("control"),children:(0,re.jsx)(u.O,{popupWidth:242,items:B,showStatus:!0,onUpdate:$,sortable:!1},"TableColumnSetup")})]}),null!==H&&void 0!==H&&H.length?(0,re.jsx)(a.E,{color:"secondary",children:te("clusters-count",{count:null===W||void 0===W?void 0:W.length})}):null,t.isError?(0,re.jsx)(v.o,{error:t.error}):null,t.isLoading?(0,re.jsx)(h.a,{size:"l"}):null,t.fulfilledTimeStamp?(0,re.jsx)("div",{className:se("table-wrapper"),children:(0,re.jsx)("div",{className:se("table-content"),children:(0,re.jsx)(p.l,{columnsWidthLSKey:ne,wrapperClassName:se("table"),data:W,columns:U,settings:{...D.N3,dynamicRender:!1},initialSortOrder:{columnId:Z.TITLE,order:l.Ay.ASCENDING}})})}):null]})}},10662:(e,t,s)=>{s.d(t,{i:()=>o});var r=s(79602),n=s(59284);var l=s(60712);const o=({onUpdate:e,value:t="",debounce:s=200,...o})=>{const[a,i]=function({value:e,onUpdate:t,debounce:s=200}){const[r,l]=n.useState(e),o=n.useRef();return n.useEffect((()=>{l((t=>t!==e?e:t))}),[e]),[r,e=>{l(e),window.clearTimeout(o.current),o.current=window.setTimeout((()=>{null===t||void 0===t||t(e)}),s)}]}({value:t,onUpdate:e,debounce:s});return(0,l.jsx)(r.k,{value:a,onUpdate:i,...o})}},36388:(e,t,s)=>{s.d(t,{A:()=>n});var r=s(59284);const n=e=>r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 13.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14m1-4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0M8.75 5a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0z",clipRule:"evenodd"}))},37477:(e,t,s)=>{s.d(t,{c:()=>b});s(59284);var r=s(8979),n=s(52443),l=s(32752),o=s(20263),a=s(54090),i=s(77506),c=s(43937),u=s(36388),d=s(94420),m=s(70825),v=s(49917),h=s(47653),p=s(60712);const x={[a.m.Blue]:c.A,[a.m.Yellow]:u.A,[a.m.Orange]:d.A,[a.m.Red]:u.A,[a.m.Green]:m.A,[a.m.Grey]:v.A};function N({status:e,...t}){return e?(0,p.jsx)(h.I,{...t,data:x[e]}):null}var g=s(89732),f=s(97677);const w=(0,i.cn)("ydb-entity-status-new"),S={[a.m.Red]:"danger",[a.m.Blue]:"info",[a.m.Green]:"success",[a.m.Grey]:"unknown",[a.m.Orange]:"orange",[a.m.Yellow]:"warning"},j={get[a.m.Red](){return(0,g.A)("title_red")},get[a.m.Yellow](){return(0,g.A)("title_yellow")},get[a.m.Orange](){return(0,g.A)("title_orange")},get[a.m.Green](){return(0,g.A)("title_green")},get[a.m.Grey](){return(0,g.A)("title_grey")},get[a.m.Blue](){return(0,g.A)("title_blue")}};function b({className:e,children:t}){return(0,p.jsx)(l.s,{gap:"2",wrap:"nowrap",alignItems:"center",className:w(null,e),children:t})}b.Label=function({children:e,status:t,withStatusName:s=!0,note:a,size:i="m",iconSize:c=14}){const u=S[t];return(0,p.jsx)(r.m,{title:f.D[t],disabled:Boolean(a),children:(0,p.jsx)(n.J,{theme:"orange"===u?void 0:u,icon:(0,p.jsx)(N,{size:c,status:t}),size:i,className:w({orange:"orange"===u}),children:(0,p.jsxs)(l.s,{gap:"2",wrap:"nowrap",children:[e,s?j[t]:null,a&&(0,p.jsx)(o.H,{className:w("note"),children:a})]})})})},b.displayName="EntityStatus"},41775:(e,t,s)=>{s.d(t,{v:()=>a});s(59284);var r=s(77506),n=s(10662),l=s(60712);const o=(0,r.cn)("ydb-search"),a=({onChange:e,value:t="",width:s,className:r,debounce:a,inputRef:i,...c})=>(0,l.jsx)(n.i,{debounce:a,hasClear:!0,autoFocus:!0,controlRef:i,style:{width:s},className:o(null,r),value:t,onUpdate:e,...c})},43951:(e,t,s)=>{s.d(t,{K:()=>l});var r=s(59284),n=s(59001);const l=(e,t,s,l,o)=>{const[a,i]=r.useState((()=>n.f.readUserSettingsValue(t,l)));return{columnsToShow:r.useMemo((()=>e.filter((e=>{const t=e.name,s=a.includes(t),r=null===o||void 0===o?void 0:o.includes(t);return s||r}))),[e,o,a]),columnsToSelect:r.useMemo((()=>e.map((e=>e.name)).map((e=>{const t=null===o||void 0===o?void 0:o.includes(e),r=a.includes(e);return{id:e,title:s[e],selected:t||r,required:t,sticky:t?"start":void 0}}))),[e,s,o,a]),setColumns:r.useCallback((e=>{const s=e.filter((e=>e.selected)).map((e=>e.id));n.f.setUserSettingsValue(t,s),i(s)}),[t])}}},52248:(e,t,s)=>{s.d(t,{a:()=>r.a});var r=s(47334)},60448:(e,t,s)=>{s.d(t,{p:()=>g});var r=s(59284),n=s(80136),l=s(32752),o=s(24342),a=s(13847),i=s(77506),c=s(48372);const u=JSON.parse('{"action_show_more":"Show {{count}} more","action_hide":"Hide {{count}}","tooltip_nodes":{"one":"{{count}} Node","other":"{{count}} Nodes"}}'),d=(0,c.g4)("ydb-versions-bar",{en:u});var m=s(60712);const v=(0,i.cn)("ydb-versions-bar"),h=4,p=h-1,x=200,N=200;function g({preparedVersions:e,withTitles:t=!0,size:s="s"}){const i=e.length>h&&"s"===s,[c,u]=r.useState(),[g,w]=r.useState(!1),S=r.useMemo((()=>{const t=e.reduce(((e,t)=>e+(t.count||0)),0);return e.map((e=>({value:(e.count||0)/t*100,color:e.color,version:e.version,count:e.count})))}),[e]),j=r.useMemo((()=>g?e:i?e.slice(0,p):e),[g,e,i]),b=e=>{e.preventDefault(),e.stopPropagation(),w(!0)},E=e=>{e.preventDefault(),e.stopPropagation(),w(!1)},y=r.useMemo((()=>(0,a.debounce)((e=>{u(e)}),x)),[]),A=r.useMemo((()=>(y.cancel(),(0,a.debounce)((()=>{u(void 0)}),x))),[y]),C=e=>Boolean(c&&c!==e);return(0,m.jsxs)(l.s,{direction:"column",className:v("bar-wrapper",{size:s}),wrap:!0,children:[(0,m.jsx)(l.s,{className:v("bar",{size:s}),grow:1,children:S.map((e=>(0,m.jsx)(o.m,{content:(0,m.jsxs)(r.Fragment,{children:[d("tooltip_nodes",{count:e.count}),(0,m.jsx)("br",{}),e.version]}),placement:"m"===s?"auto":"top-start",openDelay:N,children:(0,m.jsx)("span",{onMouseEnter:()=>{y(e.version)},onMouseLeave:A,className:v("version",{dimmed:C(e.version),size:s}),style:{backgroundColor:e.color,width:`${e.value}%`}})},e.version)))}),t&&(0,m.jsxs)(l.s,{className:v("titles-wrapper",{size:s}),children:[j.map((e=>(0,m.jsx)(f,{version:e.version,color:e.color||"",count:e.count,isDimmed:C(e.version),onMouseEnter:()=>{y(e.version)},onMouseLeave:A,size:s},e.version))),(()=>{if(!i)return null;const t=e.length-p;return g?(0,m.jsx)(n.$,{view:"flat-secondary",size:"s",onClick:E,className:v("button"),children:d("action_hide",{count:t})}):(0,m.jsx)(n.$,{view:"flat-secondary",size:"s",onClick:b,className:v("button"),children:d("action_show_more",{count:t})})})()]})]})}function f({version:e,color:t,count:s,isDimmed:r,onMouseEnter:n,onMouseLeave:a,size:i}){return(0,m.jsx)(o.m,{content:d("tooltip_nodes",{count:s}),placement:"bottom-end",openDelay:N,children:(0,m.jsxs)(l.s,{alignItems:"center",className:v("title",{size:i}),children:[(0,m.jsx)(w,{size:i,dimmed:r,color:t}),(0,m.jsx)("div",{className:v("title-text",{dimmed:r,size:i}),onMouseEnter:n,onMouseLeave:a,children:e})]})})}function w({size:e,dimmed:t,color:s}){const r="m"===e?8:6,n=r/2;return(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:`0 0 ${r} ${r}`,fill:"none",className:v("version-icon",{dimmed:t}),children:(0,m.jsx)("circle",{cx:n,cy:n,r:n,fill:s})})}},89732:(e,t,s)=>{s.d(t,{A:()=>l});var r=s(48372);const n=JSON.parse('{"title_red":"Critical","title_blue":"Normal","title_green":"Good","title_grey":"Unknown","title_orange":"Caution","title_yellow":"Warning","context_red":"Some systems are failed and not available","context_yellow":"There are minor issues","context_orange":"Critical state, requires immediate attention","context_green":"Everything is working as expected","context_grey":"The condition cannot be determined","context_blue":"All good, some parts of the system are restoring"}'),l=(0,r.g4)("ydb-entity-status",{en:n})},90053:(e,t,s)=>{s.d(t,{E:()=>h});var r=s(8873),n=s(80136),l=s(12207),o=s(21334),a=s(77506),i=s(53627),c=s(48372);const u=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),d=(0,c.g4)("ydb-diagnostics-autorefresh-control",{en:u});var m=s(60712);const v=(0,a.cn)("auto-refresh-control");function h({className:e,onManualRefresh:t}){const s=(0,i.YQ)(),[a,c]=(0,i.Nt)();return(0,m.jsxs)("div",{className:v(null,e),children:[(0,m.jsx)(n.$,{view:"flat-secondary",onClick:()=>{s(o.F.util.invalidateTags(["All"])),null===t||void 0===t||t()},"aria-label":d("Refresh"),children:(0,m.jsx)(n.$.Icon,{children:(0,m.jsx)(r.A,{})})}),(0,m.jsxs)(l.l,{value:[String(a)],onUpdate:e=>{c(Number(e))},width:85,qa:"ydb-autorefresh-select",children:[(0,m.jsx)(l.l.Option,{value:"0",children:d("None")}),(0,m.jsx)(l.l.Option,{value:"15000",children:d("15 sec")}),(0,m.jsx)(l.l.Option,{value:"60000",children:d("1 min")}),(0,m.jsx)(l.l.Option,{value:"120000",children:d("2 min")}),(0,m.jsx)(l.l.Option,{value:"300000",children:d("5 min")})]})]})}},95963:(e,t,s)=>{s.d(t,{v:()=>r.v});var r=s(41775)},96344:(e,t,s)=>{s.d(t,{k:()=>v});var r=s(60712),n=s(59284);const l=(0,s(10417).om)("progress");function o(e){const{text:t,offset:s=0}=e;return t?(0,r.jsx)("div",{className:l("text-inner"),style:{transform:`translateX(calc(var(--g-flow-direction) * ${-s}%))`},children:t}):null}function a({item:e}){const{value:t,color:s,className:n,theme:o,title:a,content:i,loading:c}=e,u={loading:c};return"undefined"===typeof s&&(u.theme=o||"default"),Number.isFinite(t)?(0,r.jsx)("div",{className:l("item",u,n),style:{width:`${t}%`,backgroundColor:s},title:a,children:i}):null}function i(e){return e<100?e-100:0}function c(e){const{theme:t,colorStops:s,colorStopsValue:r,value:n}=e;if(s){const e=s.find(((e,t)=>{const l="number"===typeof r?r:n,o=t>1?s[t-1].stop:0,a=t<s.length-1?e.stop:100;return l>=o&&l<=a}));return e?e.theme:t}return t}function u(e){const{stack:t,stackClassName:s,value:n,text:c}=e,u=i(n||function(e){return e.reduce(((e,{value:t})=>e+t),0)}(t));return(0,r.jsxs)("div",{className:l("stack",s),style:{transform:`translateX(calc(var(--g-flow-direction) * ${u}%))`},children:[(0,r.jsx)("div",{className:l("item"),style:{width:-u+"%"}}),t.map(((e,t)=>(0,r.jsx)(a,{item:e},t))),(0,r.jsx)(o,{offset:u,text:c})]})}function d(e){const{value:t,loading:s,text:n}=e,a=i(t);return Number.isFinite(t)?(0,r.jsx)("div",{className:l("item",{theme:c(e),loading:s}),style:{transform:`translateX(calc(var(--g-flow-direction) * ${a}%))`},children:(0,r.jsx)(o,{offset:a,text:n})}):null}function m(e){return void 0!==e.stack}const v=n.forwardRef((function(e,t){const{text:s="",theme:n="default",size:o="m",loading:a=!1,className:i,qa:c}=e,v={...e,text:s,theme:n,size:o,loading:a};return(0,r.jsxs)("div",{ref:t,className:l({size:o},i),"data-qa":c,children:[(0,r.jsx)("div",{className:l("text"),children:s}),m(v)?(0,r.jsx)(u,{...v}):(0,r.jsx)(d,{...v})]})}))},97677:(e,t,s)=>{s.d(t,{D:()=>l});var r=s(54090),n=s(89732);const l={get[r.m.Red](){return(0,n.A)("context_red")},get[r.m.Yellow](){return(0,n.A)("context_yellow")},get[r.m.Orange](){return(0,n.A)("context_orange")},get[r.m.Green](){return(0,n.A)("context_green")},get[r.m.Grey](){return(0,n.A)("context_grey")},get[r.m.Blue](){return(0,n.A)("context_blue")}}}}]);