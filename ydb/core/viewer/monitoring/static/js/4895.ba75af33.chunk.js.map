{"version":3,"file":"static/js/4895.ba75af33.chunk.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/objectSpread2.js","../node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/toConsumableArray.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@gravity-ui/chartkit/build/plugins/yagr/renderer/tooltip/helpers/escapeHTML.js","../node_modules/@gravity-ui/chartkit/build/plugins/yagr/renderer/tooltip/tooltip.js","../node_modules/@gravity-ui/chartkit/build/plugins/yagr/renderer/tooltip/renderTooltip.js","../node_modules/@gravity-ui/chartkit/build/plugins/yagr/renderer/utils.js","../node_modules/@gravity-ui/chartkit/build/plugins/yagr/renderer/useWidgetData.js","../node_modules/@gravity-ui/chartkit/build/plugins/yagr/renderer/YagrWidget.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/constants/dateTime.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/constants/format.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/constants/index.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/constants/timeZone.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/constants/utils.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/dateTime/dateTime.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/dateTime/index.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/datemath/datemath.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/datemath/index.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/dayjs.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/index.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/parser/index.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/parser/parser.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/settings/index.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/settings/settings.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/timeZone/index.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/timeZone/timeZone.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/utils/index.js","../node_modules/@gravity-ui/chartkit/node_modules/@gravity-ui/date-utils/build/utils/utils.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_DataView.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_Promise.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_Set.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_WeakMap.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_arrayEach.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_arrayFilter.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_arrayPush.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseAssign.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseAssignIn.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseClone.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseFindIndex.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseGetAllKeys.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseIndexOf.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseIsDate.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseIsMap.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseIsNaN.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseIsSet.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseKeys.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseTrim.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_baseValues.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_cloneDataView.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_cloneRegExp.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_cloneSymbol.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_copySymbols.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_copySymbolsIn.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_getAllKeys.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_getAllKeysIn.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_getSymbols.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_getSymbolsIn.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_getTag.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_initCloneArray.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_initCloneByTag.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_nativeKeys.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_strictIndexOf.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/_trimmedEndIndex.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/cloneDeep.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/includes.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/isDate.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/isEmpty.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/isMap.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/isSet.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/isString.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/keys.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/stubArray.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/toFinite.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/toInteger.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/toNumber.js","../node_modules/@gravity-ui/chartkit/node_modules/lodash/values.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/defaults.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/index.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/locale.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/mixins/batch-updates.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/mixins/create-options.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/mixins/dynamic-updates.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/mixins/transform-series.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/plugins/cursor/cursor.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/plugins/legend/legend.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/plugins/markers/index.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/plugins/plotLines/plotLines.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/plugins/tooltip/placement.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/plugins/tooltip/render.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/plugins/tooltip/tooltip.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/plugins/tooltip/types.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/plugins/tooltip/utils.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/types.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/utils/axes.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/utils/chart.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/utils/colors.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/utils/common.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/utils/events.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/utils/mixins.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/utils/paths.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/utils/scales.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/utils/series.js","../node_modules/@gravity-ui/yagr/dist/YagrCore/utils/types.js","../node_modules/@gravity-ui/yagr/dist/index.js","../node_modules/@gravity-ui/yagr/dist/react.js","../node_modules/dayjs/plugin/advancedFormat.js","../node_modules/uplot/dist/uPlot.esm.js"],"sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nmodule.exports = _createForOfIteratorHelper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var defineProperty = require(\"./defineProperty.js\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread2, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableRest = require(\"./nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\n\nvar iterableToArray = require(\"./iterableToArray.js\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","export function escapeHTML(html) {\n    const elem = document.createElement('span');\n    elem.innerText = html;\n    return elem.innerHTML;\n}\n","/* eslint complexity: 0 */\nimport { i18n } from '../../../../i18n';\nimport { escapeHTML } from './helpers/escapeHTML';\nimport './tooltip.css';\nconst SERIES_NAME_DATA_ATTRIBUTE = 'data-series-name';\nconst SERIES_IDX_DATA_ATTRIBUTE = 'data-series-idx';\nconst TOOLTIP_CONTAINER_CLASS_NAME = '_tooltip';\nconst TOOLTIP_ROW_NAME_CLASS_NANE = '_tooltip-rows__name-td';\nconst TOOLTIP_ROW_CLASS_NAME = '_tooltip-row';\nconst TOOLTIP_HEADER_CLASS_NAME = '_tooltip-header';\nconst TOOLTIP_LIST_CLASS_NAME = '_tooltip-list';\nconst TOOLTIP_FOOTER_CLASS_NAME = '_tooltip-footer';\nconst renderEmptyCell = () => '<td />';\nconst renderColorCell = (line) => `<td class=\"_tooltip-rows__bubble-td\">\n        <div class=\"_tooltip-rows__bubble-div\" style=\"background-color:${line.seriesColor};\"></div>\n    </td>`;\nconst renderNameCell = (line) => `<td class=\"${TOOLTIP_ROW_NAME_CLASS_NANE}\">\n        ${line.hideSeriesName ? '' : escapeHTML(line.seriesName)}\n    </td>`;\nconst renderPercentCell = (line) => `<td class=\"_tooltip-rows__percent-td\">\n        ${line.percentValue ? line.percentValue + '%' : ''}\n    </td>`;\nconst renderValueCell = (line) => `<td class=\"_tooltip-rows__value-td\">\n        ${line.value}\n    </td>`;\nconst renderDiffCell = (line) => `<td class=\"_tooltip-rows__diff-td\">\n        ${line.diff ? ` (${line.diff})` : ''}\n    </td>`;\nconst renderAdditionalSection = (data, splitTooltip = false, colspanNumber = 1) => {\n    return `<td class=\"_tooltip-right__td ${splitTooltip ? '_tooltip-right__td_with-split-tooltip' : ''}\" colspan=\"${colspanNumber || 1}\">\n             ${data.holiday\n        ? `<div class=\"_tooltip-right__holiday-div\">\n                    <div class=\"_tooltip-right__holiday-emoji\"></div>\n                    <div>\n                        ${data.holidayText}\n                        ${data.region\n            ? `<span class=\"_tooltip-right__holiday-region\">[${data.region}]</span>`\n            : ''}\n                    </div>\n                </div>`\n        : ''}\n\n            ${data.commentDateText\n        ? `<div class=\"${data.xComments ? '_tooltip-right__margin-bot' : ''}\">${data.commentDateText}</div>`\n        : ''}\n\n            ${data.xComments\n        ? data.xComments\n            .map((comment) => `<div class=\"_tooltip-right__traf-div ${splitTooltip\n            ? '_tooltip-right__traf-div_for-split-tooltip'\n            : ''}\" style=\"border-color: ${comment.color};\">${comment.text}</div>`)\n            .join('')\n        : ''}\n        </td>`;\n};\nconst renderRow = (line, { isSelectedLine, cellsRenderers, isSingleLine, allowComment, withDarkBackground, rowIndex, }) => {\n    const hasComment = line.commentText || line.xyCommentText;\n    const needRenderComment = allowComment && hasComment;\n    const fullCellsRenderers = cellsRenderers.slice();\n    const rowKey = `${String(rowIndex) || ''}-${String(escapeHTML(line.seriesName))\n        .slice(0, 20)\n        .replace(/(\\r\\n|\\n|\\r)/gm, '')}`;\n    if (line.insertCellAt) {\n        (Object.keys(line.insertCellAt) || []).forEach((index) => {\n            fullCellsRenderers.splice(Number(index), 0, renderEmptyCell);\n        });\n    }\n    if (line.customRender) {\n        return `<tr class=\"${TOOLTIP_ROW_CLASS_NAME}${isSelectedLine ? ' _tooltip-selected-row' : ''}${isSingleLine ? ' _tooltip-uniq-row' : ''}${withDarkBackground ? ' _tooltip-row-dark-bg' : ''}\" ${SERIES_NAME_DATA_ATTRIBUTE}=\"${rowKey}\" ${line.seriesIdx ? `${SERIES_IDX_DATA_ATTRIBUTE}=\"${line.seriesIdx}\"` : ''}>\n            ${line.customRender.trim().indexOf('<td') === 0\n            ? line.customRender\n            : `<td colspan=\"${cellsRenderers.length}\">${line.customRender}</td>`}\n        </tr>\n        ${needRenderComment\n            ? `<tr class=\"_tooltip-comment-row${isSelectedLine ? ' _tooltip-selected-row' : ''}${withDarkBackground ? ' _tooltip-row-dark-bg' : ''}\">\n                    <td>\n                        ${line.commentText\n                ? `<div class=\"_tooltip-rows__comment-div\">${line.commentText}</div>`\n                : ''}\n                        ${line.xyCommentText\n                ? `<div class=\"_tooltip-rows__comment-div\">${line.xyCommentText}</div>`\n                : ''}\n                    </td>\n                </tr>`\n            : ''}`;\n    }\n    return `<tr class=\"${TOOLTIP_ROW_CLASS_NAME}${isSelectedLine ? ' _tooltip-selected-row' : ''}${isSingleLine ? ' _tooltip-uniq-row' : ''}${withDarkBackground ? ' _tooltip-row-dark-bg' : ''}\" ${SERIES_NAME_DATA_ATTRIBUTE}=\"${rowKey}\" ${line.seriesIdx ? `${SERIES_IDX_DATA_ATTRIBUTE}=\"${line.seriesIdx}\"` : ''}>\n            ${fullCellsRenderers\n        .map((render, index) => {\n        if (line.replaceCellAt && line.replaceCellAt[index]) {\n            return typeof line.replaceCellAt[index] === 'string'\n                ? line.replaceCellAt[index]\n                : line.replaceCellAt[index](line);\n        }\n        else if (line.insertCellAt && line.insertCellAt[index]) {\n            return typeof line.insertCellAt[index] === 'string'\n                ? line.insertCellAt[index]\n                : line.insertCellAt[index](line);\n        }\n        else {\n            return render(line);\n        }\n    })\n        .join('')}\n        </tr>\n\n        ${needRenderComment\n        ? `<tr class=\"_tooltip-comment-row${isSelectedLine ? ' _tooltip-selected-row' : ''}${withDarkBackground ? ' _tooltip-row-dark-bg' : ''}\">\n                    <td colspan=\"4\">\n                        ${line.commentText\n            ? `<div class=\"_tooltip-rows__comment-div\">${line.commentText}</div>`\n            : ''}\n                        ${line.xyCommentText\n            ? `<div class=\"_tooltip-rows__comment-div\">${line.xyCommentText}</div>`\n            : ''}\n                    </td>\n                </tr>`\n        : ''}`;\n};\nexport const formatTooltip = (data, tooltip) => {\n    const { splitTooltip, activeRowAlwaysFirstInTooltip } = data;\n    const selectedLineIndex = data.lines.findIndex(({ selectedSeries }) => selectedSeries);\n    const selectedLine = data.lines[selectedLineIndex];\n    const lines = data.lines.slice(0, (tooltip.lastVisibleRowIndex || data.lines.length) + 1);\n    const cellsRenderers = [];\n    cellsRenderers.push(renderColorCell);\n    if (data.shared) {\n        cellsRenderers.push(renderNameCell);\n    }\n    if (data.withPercent) {\n        cellsRenderers.push(renderPercentCell);\n    }\n    cellsRenderers.push(renderValueCell);\n    if (data.useCompareFrom) {\n        cellsRenderers.push(renderDiffCell);\n    }\n    const rowRenderingConfig = {\n        isSingleLine: lines.length === 1,\n        cellsRenderers,\n    };\n    const rowRenderingConfigForSelectedLine = {\n        cellsRenderers,\n        useCompareFrom: data.useCompareFrom,\n        isSelectedLine: true,\n        allowComment: selectedLineIndex > tooltip.lastVisibleRowIndex,\n    };\n    const windowHeight = \n    // @ts-ignore\n    document.body.clientHeight / ((window.visualViewport && window.visualViewport.scale) || 1);\n    function getRowRenderConfig(index) {\n        return Object.assign(Object.assign({}, rowRenderingConfig), { rowIndex: index, isSelectedLine: lines.length > 1 && index === selectedLineIndex, withDarkBackground: lines.length > 2 && Boolean(index % 2), allowComment: index !== selectedLineIndex || !rowRenderingConfigForSelectedLine.allowComment });\n    }\n    let tooltipContainerClassNames = TOOLTIP_CONTAINER_CLASS_NAME;\n    if (splitTooltip) {\n        tooltipContainerClassNames += ` ${TOOLTIP_CONTAINER_CLASS_NAME}_split-tooltip`;\n    }\n    return `\n<div class=\"${tooltipContainerClassNames}\" style=\"max-height: ${splitTooltip ? 'auto' : `${windowHeight}px`}\">\n    ${data.tooltipHeader\n        ? `<div title=\"${(document.createRange().createContextualFragment(data.tooltipHeader).textContent ||\n            '').trim()}\" class=\"_tooltip-date\">\n                ${data.tooltipHeader.trim()}\n            </div>`\n        : ''}\n    ${splitTooltip &&\n        (data.holiday || data.commentDateText || (data.xComments && data.xComments.length))\n        ? `<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                <tbody>\n                    <tr>\n                        ${renderAdditionalSection(data, true, cellsRenderers.length)}\n                    </tr>\n                </tbody>\n            </table>`\n        : ''}\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n        <tr>\n            <td class=\"_tooltip-left__td\">\n                <table class=\"_tooltip-rows__table\">\n                    ${splitTooltip\n        ? ''\n        : `<thead class=${TOOLTIP_HEADER_CLASS_NAME}>\n                                ${selectedLine &&\n            (activeRowAlwaysFirstInTooltip ||\n                (tooltip.lastVisibleRowIndex &&\n                    selectedLineIndex > tooltip.lastVisibleRowIndex))\n            ? renderRow(selectedLine, rowRenderingConfigForSelectedLine)\n            : ''}\n                                <tr class=\"_tooltip-fake-row\">${Array(cellsRenderers.length)\n            .fill('<td></td>')\n            .join('')}</tr>\n                            </thead>`}\n                    <tbody class=\"${TOOLTIP_LIST_CLASS_NAME}\">\n                        ${lines\n        .map((line, index) => renderRow(line, getRowRenderConfig(index)))\n        .join('')}\n                    </tbody>\n                    ${splitTooltip\n        ? ''\n        : `<tbody class=\"${TOOLTIP_FOOTER_CLASS_NAME}\">\n                                ${tooltip.lastVisibleRowIndex && data.hiddenRowsNumber > 0\n            ? `<tr class=\"${TOOLTIP_ROW_CLASS_NAME} _hidden-rows-sum${lines.length % 2 ? ' _hidden-rows-sum-dark-bg' : ''}\">\n                                            <td colspan=\"${cellsRenderers.length - 1}\" class=\"_hidden-rows-number\">\n                                                ${i18n('common', 'tooltip-rest')} ${data.hiddenRowsNumber}\n                                            </td>\n                                            <td class=\"_hidden-rows-value\">${data.hiddenRowsSum}</td>\n                                        </tr>`\n            : ''}\n                                <tr class=\"_tooltip-fake-row\">${Array(cellsRenderers.length)\n            .fill('<td></td>')\n            .join('')}</tr>\n                                ${data.sum\n            ? `<tr class=\"_tooltip-rows__summ-tr\">\n                                            <td class=\"_tooltip-rows__summ-td\" colspan=\"${cellsRenderers.length - 1}\">${i18n('common', 'tooltip-sum')}</td>\n                                            <td class=\"_tooltip-rows__summ-td _tooltip-rows__summ-td-value\">\n                                                ${data.sum}\n                                            </td>\n                                        </tr>`\n            : ''}\n                            </tbody>`}\n                </table>\n            </td>\n\n            ${!splitTooltip &&\n        (data.holiday || data.commentDateText || (data.xComments && data.xComments.length))\n        ? renderAdditionalSection(data)\n        : ''}\n        </tr>\n    </table>\n</div>`;\n};\n","import { dateTime } from '@gravity-ui/date-utils';\nimport { formatTooltip } from './tooltip';\nconst calcOption = (d) => {\n    return typeof d === 'object' && d !== null\n        ? Object.values(d).reduce((_, t) => {\n            return t;\n        })\n        : d;\n};\n/*\n * Default tooltip renderer.\n * Adapter between native Yagr tooltip config and ChartKit\n * tooltip renderer.\n */\nexport const renderTooltip = (data) => {\n    const cfg = data.yagr.config;\n    const timeMultiplier = cfg.chart.timeMultiplier || 1;\n    const opts = data.options;\n    const { x, state } = data;\n    let sumTotal = 0;\n    const rows = Object.values(data.scales).reduce((acc, scale) => {\n        sumTotal += scale.sum || 0;\n        return acc.concat(scale.rows);\n    }, []);\n    const lines = rows.length;\n    const sum = calcOption(opts.sum);\n    const maxLines = calcOption(opts.maxLines);\n    const valueFormatter = calcOption(opts.value);\n    // eslint-disable-next-line no-nested-ternary\n    const hiddenRowsNumber = state.pinned\n        ? undefined\n        : lines > maxLines\n            ? Math.abs(maxLines - lines)\n            : undefined;\n    const hiddenRowsSum = hiddenRowsNumber\n        ? valueFormatter(rows\n            .slice(-hiddenRowsNumber)\n            .reduce((acc, { originalValue }) => acc + (originalValue || 0), 0))\n        : undefined;\n    const tooltipFormatOptions = {\n        activeRowAlwaysFirstInTooltip: rows.length > 1,\n        tooltipHeader: dateTime({ input: x / timeMultiplier }).format('DD MMMM YYYY HH:mm:ss'),\n        shared: true,\n        lines: rows.map((row, i) => (Object.assign(Object.assign({}, row), { seriesName: row.name || 'Serie ' + (i + 1), seriesColor: row.color, selectedSeries: row.active, seriesIdx: row.seriesIdx, percentValue: typeof row.transformed === 'number' ? row.transformed.toFixed(1) : '' }))),\n        withPercent: calcOption(opts.percent),\n        hiddenRowsNumber: hiddenRowsNumber,\n        hiddenRowsSum,\n    };\n    if (sum) {\n        tooltipFormatOptions.sum = valueFormatter(sumTotal);\n    }\n    return formatTooltip(tooltipFormatOptions, {\n        lastVisibleRowIndex: state.pinned ? rows.length - 1 : maxLines - 1,\n    });\n};\n","import merge from 'lodash/merge';\nimport { dateTime } from '@gravity-ui/date-utils';\nimport { defaults } from '@gravity-ui/yagr';\nimport { settings } from '../../../libs';\nimport { renderTooltip } from './tooltip';\nconst TOOLTIP_HEADER_CLASS_NAME = '_tooltip-header';\nconst TOOLTIP_LIST_CLASS_NAME = '_tooltip-list';\nexport const synchronizeTooltipTablesCellsWidth = (tooltipContainer) => {\n    const tHeadNode = tooltipContainer.querySelector(`.${TOOLTIP_HEADER_CLASS_NAME}`);\n    const tBodyNode = tooltipContainer.querySelector(`.${TOOLTIP_LIST_CLASS_NAME}`);\n    if (!tHeadNode || !tBodyNode || !tHeadNode.children.length) {\n        return;\n    }\n    const tHeadNodeFirstRow = tHeadNode.children[0];\n    for (let j = 0; j < tHeadNodeFirstRow.children.length; j++) {\n        const cell = tHeadNodeFirstRow.children[j];\n        cell.removeAttribute('style');\n        if ((tBodyNode === null || tBodyNode === void 0 ? void 0 : tBodyNode.children.length) === 1) {\n            cell.innerHTML = '&nbsp;';\n        }\n    }\n    const tBodyNodeFirstRow = tBodyNode.children[0];\n    for (let j = 0; j < tBodyNodeFirstRow.children.length; j++) {\n        const cell = tBodyNodeFirstRow.children[j];\n        cell.removeAttribute('style');\n    }\n    const tHeadRowsWidth = tHeadNode.children[0].getBoundingClientRect().width;\n    const tBodyRowsWidth = tBodyNode.children[0].getBoundingClientRect().width;\n    const nodeWithWidesRows = tHeadRowsWidth > tBodyRowsWidth ? tHeadNode : tBodyNode;\n    const nodeWithWidesRowsCellsWidth = Array.prototype.reduce.call(nodeWithWidesRows.children[0].children, (accum, cellNode) => {\n        accum.push(cellNode.getBoundingClientRect().width);\n        return accum;\n    }, []);\n    const nodeToSetCellsWidth = nodeWithWidesRows === tHeadNode ? tBodyNode : tHeadNode;\n    const nodeToSetCellsWidthFirstRow = nodeToSetCellsWidth.children[0];\n    for (let j = 0; j < nodeToSetCellsWidthFirstRow.children.length; j++) {\n        const cell = nodeToSetCellsWidthFirstRow.children[j];\n        cell.setAttribute('style', `width: ${nodeWithWidesRowsCellsWidth[j]}px`);\n    }\n    if (tBodyNode.children.length === 1) {\n        for (const cell of tHeadNodeFirstRow.children) {\n            cell.innerHTML = '';\n        }\n    }\n};\nexport const checkFocus = (args) => (event) => {\n    var _a;\n    const { tooltip, yagr } = args;\n    if (!yagr) {\n        return;\n    }\n    const target = event.target;\n    const seriesIdx = target && tooltip.contains(target) && target.tagName === 'TD'\n        ? (_a = target.parentElement) === null || _a === void 0 ? void 0 : _a.dataset['seriesIdx']\n        : undefined;\n    const serie = seriesIdx ? yagr.uplot.series[Number(seriesIdx)] : null;\n    yagr.setFocus(serie ? serie.id : null, true);\n};\nexport const detectClickOutside = (args) => (event) => {\n    var _a;\n    const { tooltip, actions, yagr } = args;\n    if (!yagr) {\n        return;\n    }\n    const target = event.target;\n    if (target instanceof Element) {\n        const isClickInsideTooltip = target && tooltip.contains(target);\n        const isClickOnUplotOver = target && ((_a = yagr.root.querySelector('.u-over')) === null || _a === void 0 ? void 0 : _a.contains(target));\n        if (!isClickInsideTooltip && !isClickOnUplotOver) {\n            actions.pin(false);\n            actions.hide();\n        }\n    }\n};\nconst getXAxisFormatter = (msm = 1) => (_, ticks) => {\n    const range = (ticks[ticks.length - 1] - ticks[0]) / msm;\n    return ticks.map((rawValue) => {\n        const d = dateTime({ input: rawValue / msm });\n        if (d.hour() === 0 && d.minute() === 0 && d.second() === 0) {\n            return d.format('DD.MM.YY');\n        }\n        return d.format(range < 300 ? 'HH:mm:ss' : 'HH:mm');\n    });\n};\nexport const shapeYagrConfig = (args) => {\n    var _a, _b;\n    const { data, libraryConfig, theme } = args;\n    const config = Object.assign(Object.assign({}, libraryConfig), { timeline: data.timeline, series: data.graphs });\n    const chart = {\n        appearance: {\n            locale: settings.get('lang'),\n            theme,\n        },\n    };\n    merge(chart, config.chart);\n    config.chart = chart;\n    if ((_a = config.tooltip) === null || _a === void 0 ? void 0 : _a.show) {\n        config.tooltip = config.tooltip || {};\n        config.tooltip.render = ((_b = config.tooltip) === null || _b === void 0 ? void 0 : _b.render) || renderTooltip;\n        if (!config.tooltip.className) {\n            // \"className\" property prevent default yagr styles adding\n            config.tooltip.className = 'chartkit-yagr-tooltip';\n        }\n        if (args.customTooltip) {\n            config.tooltip.virtual = true;\n        }\n        /**\n         * @todo remove this on next chartkit major release\n         * This added to prevent breaking changes in chartkit, while updating yagr@4 which\n         * has fixed tooltip sorting (@see https://github.com/gravity-ui/yagr/issues/149)\n         */\n        config.tooltip.sort = config.tooltip.sort || ((a, b) => b.rowIdx - a.rowIdx);\n    }\n    config.axes = config.axes || {};\n    const xAxis = config.axes[defaults.DEFAULT_X_SCALE];\n    if (xAxis && !xAxis.values) {\n        xAxis.values = getXAxisFormatter(config.chart.timeMultiplier);\n    }\n    if (!xAxis) {\n        config.axes[defaults.DEFAULT_X_SCALE] = {\n            values: getXAxisFormatter(config.chart.timeMultiplier),\n        };\n    }\n    return config;\n};\n","import React from 'react';\nimport { useThemeValue } from '@gravity-ui/uikit';\nimport { shapeYagrConfig } from './utils';\nexport const useWidgetData = (props, id) => {\n    const { data, sources, libraryConfig } = props.data;\n    const theme = useThemeValue();\n    const config = React.useMemo(() => shapeYagrConfig({\n        data,\n        libraryConfig,\n        theme,\n        customTooltip: Boolean(props.tooltip),\n    }), [data, libraryConfig, theme, props.tooltip]);\n    const debug = React.useMemo(() => {\n        const filename = sources\n            ? Object.values(sources)\n                .map((source) => {\n                var _a;\n                return (_a = source === null || source === void 0 ? void 0 : source.data) === null || _a === void 0 ? void 0 : _a.program;\n            })\n                .filter(Boolean)\n                .join(', ') || id\n            : id;\n        return { filename };\n    }, [id, sources]);\n    return { config, debug };\n};\n","import React from 'react';\nimport isEmpty from 'lodash/isEmpty';\nimport YagrComponent from '@gravity-ui/yagr/react';\nimport { i18n } from '../../../i18n';\nimport { CHARTKIT_ERROR_CODE, ChartKitError } from '../../../libs';\nimport { useWidgetData } from './useWidgetData';\nimport { checkFocus, detectClickOutside, synchronizeTooltipTablesCellsWidth } from './utils';\nimport './polyfills';\nimport '@gravity-ui/yagr/dist/index.css';\nimport './YagrWidget.css';\nconst YagrWidget = React.forwardRef((props, forwardedRef) => {\n    const { id, data: { data }, onLoad, onRender, onChartLoad, tooltip, } = props;\n    const yagrRef = React.useRef(null);\n    const [yagr, setYagr] = React.useState();\n    if (!data || isEmpty(data)) {\n        throw new ChartKitError({\n            code: CHARTKIT_ERROR_CODE.NO_DATA,\n            message: i18n('error', 'label_no-data'),\n        });\n    }\n    const { config, debug } = useWidgetData(props, id);\n    const handleChartLoading = React.useCallback((chart, { renderTime }) => {\n        onLoad === null || onLoad === void 0 ? void 0 : onLoad(Object.assign(Object.assign({}, data), { widget: chart, widgetRendering: renderTime }));\n        onRender === null || onRender === void 0 ? void 0 : onRender({ renderTime });\n        setYagr(chart);\n    }, [onLoad, onRender, data, setYagr]);\n    const onWindowResize = React.useCallback(() => {\n        if (yagr) {\n            yagr.reflow();\n        }\n    }, []);\n    React.useImperativeHandle(forwardedRef, () => ({\n        reflow() {\n            onWindowResize();\n        },\n    }), [onWindowResize]);\n    React.useEffect(() => {\n        var _a, _b, _c, _d, _e;\n        if (!yagr || ((_b = (_a = yagr.config) === null || _a === void 0 ? void 0 : _a.tooltip) === null || _b === void 0 ? void 0 : _b.virtual)) {\n            return;\n        }\n        const handlers = {\n            mouseMove: null,\n            mouseDown: null,\n        };\n        (_c = yagr.plugins.tooltip) === null || _c === void 0 ? void 0 : _c.on('render', (tooltip) => {\n            synchronizeTooltipTablesCellsWidth(tooltip);\n        });\n        (_d = yagr.plugins.tooltip) === null || _d === void 0 ? void 0 : _d.on('pin', (tooltip, { actions }) => {\n            handlers.mouseMove = checkFocus({ tooltip, yagr });\n            handlers.mouseDown = detectClickOutside({ tooltip, actions, yagr });\n            document.addEventListener('mousemove', handlers.mouseMove);\n            document.addEventListener('mousedown', handlers.mouseDown);\n        });\n        (_e = yagr.plugins.tooltip) === null || _e === void 0 ? void 0 : _e.on('unpin', () => {\n            if (handlers.mouseMove) {\n                document.removeEventListener('mousemove', handlers.mouseMove);\n                handlers.mouseMove = null;\n            }\n            if (handlers.mouseDown) {\n                document.removeEventListener('mousedown', handlers.mouseDown);\n                handlers.mouseDown = null;\n            }\n        });\n    }, [yagr]);\n    React.useLayoutEffect(() => {\n        onChartLoad === null || onChartLoad === void 0 ? void 0 : onChartLoad({ widget: yagr });\n    }, [yagr, onChartLoad]);\n    return (React.createElement(React.Fragment, null,\n        tooltip &&\n            yagr &&\n            tooltip({\n                yagr,\n            }),\n        React.createElement(YagrComponent, { ref: yagrRef, id: id, config: config, debug: debug, onChartLoad: handleChartLoading })));\n});\nexport default YagrWidget;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.STRICT = void 0;\nexports.STRICT = true;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_SYSTEM_DATE_FORMAT = void 0;\nexports.DEFAULT_SYSTEM_DATE_FORMAT = 'YYYY-MM-DD';\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./dateTime\"), exports);\n__exportStar(require(\"./format\"), exports);\n__exportStar(require(\"./timeZone\"), exports);\n__exportStar(require(\"./utils\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.UtcTimeZone = void 0;\nexports.UtcTimeZone = 'UTC';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CollatorSensitivity = void 0;\n// https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Intl/Collator\nexports.CollatorSensitivity = {\n    ACCENT: 'accent',\n    BASE: 'base',\n    CASE: 'case',\n    VARIANT: 'variant',\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDateTime = exports.dateTime = exports.createUTCDateTime = exports.createDateTime = void 0;\nvar dayjs_1 = __importDefault(require(\"../dayjs\"));\nvar constants_1 = require(\"../constants\");\nvar utils_1 = require(\"../utils\");\nvar createDateTime = function (input, format, timeZone) {\n    var date = format ? (0, dayjs_1.default)(input, format, constants_1.STRICT) : (0, dayjs_1.default)(input);\n    return (timeZone ? date.tz(timeZone) : date);\n};\nexports.createDateTime = createDateTime;\nvar createUTCDateTime = function (input, format) {\n    return (format ? dayjs_1.default.utc(input, format, constants_1.STRICT) : dayjs_1.default.utc(input));\n};\nexports.createUTCDateTime = createUTCDateTime;\n/**\n * Creates a DateTime instance.\n * @param opt\n * @param {DateTimeInput=} opt.input - input to parse.\n * @param {string=} opt.format - strict {@link https://dayjs.gitee.io/docs/en/display/format format} for parsing user's input.\n * @param {string=} opt.timeZone - specified {@link https://dayjs.gitee.io/docs/en/timezone/timezone time zone}.\n * @param {string=} opt.lang - specified locale.\n */\nvar dateTime = function (opt) {\n    var _a = opt || {}, input = _a.input, format = _a.format, timeZone = _a.timeZone, lang = _a.lang;\n    var prevLang = dayjs_1.default.locale();\n    var shouldSetLocale = lang && prevLang !== lang;\n    if (shouldSetLocale) {\n        dayjs_1.default.locale(lang);\n    }\n    var date = (0, utils_1.compareStrings)(timeZone, constants_1.UtcTimeZone, { ignoreCase: true })\n        ? (0, exports.createUTCDateTime)(input, format)\n        : (0, exports.createDateTime)(input, format, timeZone);\n    if (shouldSetLocale) {\n        dayjs_1.default.locale(prevLang);\n    }\n    return date;\n};\nexports.dateTime = dateTime;\n/**\n * Checks if value is DateTime.\n * @param {unknown} value - value to check.\n */\nvar isDateTime = function (value) {\n    return dayjs_1.default.isDayjs(value);\n};\nexports.isDateTime = isDateTime;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./dateTime\"), exports);\n","\"use strict\";\n// Copyright 2015 Grafana Labs\n// Copyright 2021 YANDEX LLC\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseDateMath = exports.parse = exports.isValid = void 0;\nvar isDate_1 = __importDefault(require(\"lodash/isDate\"));\nvar includes_1 = __importDefault(require(\"lodash/includes\"));\nvar dateTime_1 = require(\"../dateTime\");\nvar units = ['y', 'Q', 'M', 'w', 'd', 'h', 'm', 's'];\n/**\n * Checks if value is a valid date which in this context means that it is either\n * a Dayjs instance or it can be parsed by parse function.\n * @param value value to parse.\n */\nfunction isValid(value) {\n    var date = parse(value);\n    if (!date) {\n        return false;\n    }\n    if ((0, dateTime_1.isDateTime)(date)) {\n        return date.isValid();\n    }\n    return false;\n}\nexports.isValid = isValid;\nfunction parse(text, roundUp, timeZone) {\n    if (!text) {\n        return undefined;\n    }\n    if (typeof text === 'string') {\n        var time = void 0;\n        var mathString = '';\n        var index = void 0;\n        var parseString = void 0;\n        if (text.substring(0, 3) === 'now') {\n            time = (0, dateTime_1.dateTime)({ timeZone: timeZone });\n            mathString = text.substring('now'.length);\n        }\n        else {\n            index = text.indexOf('||');\n            if (index === -1) {\n                parseString = text;\n                mathString = '';\n            }\n            else {\n                parseString = text.substring(0, index);\n                mathString = text.substring(index + 2);\n            }\n            time = (0, dateTime_1.dateTime)({ input: parseString });\n        }\n        if (!mathString.length) {\n            return time;\n        }\n        return parseDateMath(mathString, time, roundUp);\n    }\n    else {\n        if ((0, dateTime_1.isDateTime)(text)) {\n            return text;\n        }\n        if ((0, isDate_1.default)(text)) {\n            return (0, dateTime_1.dateTime)({ input: text });\n        }\n        return undefined;\n    }\n}\nexports.parse = parse;\nfunction parseDateMath(mathString, time, roundUp) {\n    var strippedMathString = mathString.replace(/\\s/g, '');\n    var resultTime = time;\n    var i = 0;\n    var len = strippedMathString.length;\n    while (i < len) {\n        var c = strippedMathString.charAt(i++);\n        var type = void 0;\n        var num = void 0;\n        if (c === '/') {\n            type = 0;\n        }\n        else if (c === '+') {\n            type = 1;\n        }\n        else if (c === '-') {\n            type = 2;\n        }\n        else {\n            return undefined;\n        }\n        if (isNaN(parseInt(strippedMathString.charAt(i), 10))) {\n            num = 1;\n        }\n        else if (strippedMathString.length === 2) {\n            num = strippedMathString.charAt(i);\n        }\n        else {\n            var numFrom = i;\n            while (!isNaN(parseInt(strippedMathString.charAt(i), 10))) {\n                i++;\n                if (i > 10) {\n                    return undefined;\n                }\n            }\n            num = parseInt(strippedMathString.substring(numFrom, i), 10);\n        }\n        if (type === 0) {\n            // rounding is only allowed on whole, single, units (eg M or 1M, not 0.5M or 2M)\n            if (num !== 1) {\n                return undefined;\n            }\n        }\n        var unit = strippedMathString.charAt(i++);\n        if ((0, includes_1.default)(units, unit)) {\n            if (type === 0) {\n                if (roundUp) {\n                    resultTime = resultTime.endOf(unit);\n                }\n                else {\n                    resultTime = resultTime.startOf(unit);\n                }\n            }\n            else if (type === 1) {\n                resultTime = resultTime.add(num, unit);\n            }\n            else if (type === 2) {\n                resultTime = resultTime.subtract(num, unit);\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    return resultTime;\n}\nexports.parseDateMath = parseDateMath;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./datemath\"), exports);\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar dayjs_1 = __importDefault(require(\"dayjs\"));\nvar arraySupport_1 = __importDefault(require(\"dayjs/plugin/arraySupport\"));\nvar customParseFormat_1 = __importDefault(require(\"dayjs/plugin/customParseFormat\"));\nvar isoWeek_1 = __importDefault(require(\"dayjs/plugin/isoWeek\"));\nvar objectSupport_1 = __importDefault(require(\"dayjs/plugin/objectSupport\"));\nvar quarterOfYear_1 = __importDefault(require(\"dayjs/plugin/quarterOfYear\"));\nvar relativeTime_1 = __importDefault(require(\"dayjs/plugin/relativeTime\"));\nvar timezone_1 = __importDefault(require(\"dayjs/plugin/timezone\"));\nvar utc_1 = __importDefault(require(\"dayjs/plugin/utc\"));\nvar localizedFormat_1 = __importDefault(require(\"dayjs/plugin/localizedFormat\"));\nvar updateLocale_1 = __importDefault(require(\"dayjs/plugin/updateLocale\"));\nvar advancedFormat_1 = __importDefault(require(\"dayjs/plugin/advancedFormat\"));\ndayjs_1.default.extend(arraySupport_1.default);\ndayjs_1.default.extend(customParseFormat_1.default);\ndayjs_1.default.extend(isoWeek_1.default);\ndayjs_1.default.extend(quarterOfYear_1.default);\ndayjs_1.default.extend(relativeTime_1.default);\ndayjs_1.default.extend(timezone_1.default);\n// advancedFormat requires timezone plugin\ndayjs_1.default.extend(advancedFormat_1.default);\ndayjs_1.default.extend(utc_1.default);\ndayjs_1.default.extend(localizedFormat_1.default);\ndayjs_1.default.extend(updateLocale_1.default);\n// the modifications made in objectSupport would preserve other plugins behavior\n// but not vice versa, therefore it should come last\ndayjs_1.default.extend(objectSupport_1.default);\nexports.default = dayjs_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.settings = exports.guessUserTimeZone = exports.getTimeZonesList = exports.dateTimeParse = exports.isValid = exports.isDateTime = exports.dateTime = void 0;\nvar dateTime_1 = require(\"./dateTime\");\nObject.defineProperty(exports, \"dateTime\", { enumerable: true, get: function () { return dateTime_1.dateTime; } });\nObject.defineProperty(exports, \"isDateTime\", { enumerable: true, get: function () { return dateTime_1.isDateTime; } });\nvar datemath_1 = require(\"./datemath\");\nObject.defineProperty(exports, \"isValid\", { enumerable: true, get: function () { return datemath_1.isValid; } });\nvar parser_1 = require(\"./parser\");\nObject.defineProperty(exports, \"dateTimeParse\", { enumerable: true, get: function () { return parser_1.dateTimeParse; } });\nvar timeZone_1 = require(\"./timeZone\");\nObject.defineProperty(exports, \"getTimeZonesList\", { enumerable: true, get: function () { return timeZone_1.getTimeZonesList; } });\nObject.defineProperty(exports, \"guessUserTimeZone\", { enumerable: true, get: function () { return timeZone_1.guessUserTimeZone; } });\nvar settings_1 = require(\"./settings\");\nObject.defineProperty(exports, \"settings\", { enumerable: true, get: function () { return settings_1.settings; } });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./parser\"), exports);\n","\"use strict\";\n// Copyright 2015 Grafana Labs\n// Copyright 2021 YANDEX LLC\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.dateTimeParse = void 0;\nvar dayjs_1 = __importDefault(require(\"../dayjs\"));\nvar dateTime_1 = require(\"../dateTime\");\nvar datemath_1 = require(\"../datemath\");\nvar parseInput = function (input, options) {\n    var _a;\n    if (typeof input === 'string' && input.indexOf('now') !== -1) {\n        var allowRelative = (_a = options === null || options === void 0 ? void 0 : options.allowRelative) !== null && _a !== void 0 ? _a : true;\n        if (!(0, datemath_1.isValid)(input) || !allowRelative) {\n            return undefined;\n        }\n        return (0, datemath_1.parse)(input, options === null || options === void 0 ? void 0 : options.roundUp, options === null || options === void 0 ? void 0 : options.timeZone);\n    }\n    var _b = options || {}, format = _b.format, lang = _b.lang;\n    var date = (0, dateTime_1.dateTime)({ input: input, format: format, lang: lang, timeZone: options === null || options === void 0 ? void 0 : options.timeZone });\n    return date.isValid() ? date : undefined;\n};\n/**\n * Parses a number, text or Date to a DateTime value. If a timeZone is supplied the incoming value\n * is parsed with that timeZone as a base.\n *\n * It can also parse the relative date and time format, e.g. now-6h will be parsed as Date.now() - 6 hours and\n * returned as a valid DateTime value.\n *\n * If no options are supplied, then default values are used. For more details please see DateTimeOptionsWhenParsing.\n *\n * @param input - should be a parsable date and time input.\n * @param options\n */\nvar dateTimeParse = function (input, options) {\n    if (!input) {\n        return undefined;\n    }\n    dayjs_1.default.tz.setDefault(options === null || options === void 0 ? void 0 : options.timeZone);\n    var date = parseInput(input, options);\n    dayjs_1.default.tz.setDefault();\n    return date;\n};\nexports.dateTimeParse = dateTimeParse;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./settings\"), exports);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.settings = void 0;\nvar cloneDeep_1 = __importDefault(require(\"lodash/cloneDeep\"));\nvar dayjs_1 = __importDefault(require(\"../dayjs\"));\nvar Settings = /** @class */ (function () {\n    function Settings() {\n        // 'en' - preloaded locale in dayjs\n        this.loadedLocales = new Set(['en']);\n        this.updateLocale({ weekStart: 1 });\n    }\n    Settings.prototype.loadLocale = function (locale) {\n        return __awaiter(this, void 0, void 0, function () {\n            var localeInLowerCase, error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!!this.isLocaleLoaded(locale)) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        localeInLowerCase = locale.toLocaleLowerCase();\n                        // https://github.com/iamkun/dayjs/issues/792#issuecomment-639961997\n                        return [4 /*yield*/, require(\"dayjs/locale/\".concat(localeInLowerCase, \".js\"))];\n                    case 2:\n                        // https://github.com/iamkun/dayjs/issues/792#issuecomment-639961997\n                        _a.sent();\n                        this.loadedLocales.add(localeInLowerCase);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_1 = _a.sent();\n                        throw new Error(\"Can't load locale \\\"\".concat(locale, \"\\\". Either it does not exist, or there was a connection problem. Check the dayjs locations list: https://github.com/iamkun/dayjs/tree/dev/src/locale\"));\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Settings.prototype.getLocale = function () {\n        return dayjs_1.default.locale();\n    };\n    Settings.prototype.getLocaleData = function () {\n        var locales = dayjs_1.default.Ls;\n        var localeObject = locales[this.getLocale()];\n        if (!localeObject) {\n            localeObject = locales.en;\n        }\n        if (!localeObject) {\n            throw new Error('There is something really wrong happening. Locale data is absent.');\n        }\n        return (0, cloneDeep_1.default)(localeObject);\n    };\n    Settings.prototype.setLocale = function (locale) {\n        if (!this.isLocaleLoaded(locale)) {\n            throw new Error(\"Seems you are trying to set an unloaded locale \\\"\".concat(locale, \"\\\". Load it first by calling settings.loadLocale('\").concat(locale, \"'). Check the dayjs locations list: https://github.com/iamkun/dayjs/tree/dev/src/locale\"));\n        }\n        dayjs_1.default.locale(locale);\n    };\n    Settings.prototype.updateLocale = function (config) {\n        var locale = this.getLocale();\n        dayjs_1.default.updateLocale(locale, config);\n    };\n    Settings.prototype.isLocaleLoaded = function (locale) {\n        var localeInLowerCase = locale.toLocaleLowerCase();\n        return this.loadedLocales.has(localeInLowerCase);\n    };\n    return Settings;\n}());\n/**\n * Settings to manage Dayjs customization\n */\nexports.settings = new Settings();\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./timeZone\"), exports);\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getTimeZonesList = exports.guessUserTimeZone = exports.getTimeZone = void 0;\nvar dayjs_1 = __importDefault(require(\"../dayjs\"));\nvar constants_1 = require(\"../constants\");\nvar getTimeZone = function (options) {\n    var _a;\n    return (_a = options === null || options === void 0 ? void 0 : options.timeZone) !== null && _a !== void 0 ? _a : constants_1.UtcTimeZone;\n};\nexports.getTimeZone = getTimeZone;\n/**\n * Returns the user's time zone.\n */\nvar guessUserTimeZone = function () { return dayjs_1.default.tz.guess(); };\nexports.guessUserTimeZone = guessUserTimeZone;\n/**\n * Returns all time zones.\n */\n// remove when Intl definition is extended\n// @ts-expect-error https://github.com/microsoft/TypeScript/issues/49231\nvar getTimeZonesList = function () { var _a; return ((_a = Intl.supportedValuesOf) === null || _a === void 0 ? void 0 : _a.call(Intl, 'timeZone')) || []; };\nexports.getTimeZonesList = getTimeZonesList;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./utils\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compareStrings = void 0;\nvar constants_1 = require(\"../constants\");\nvar compareStrings = function (str1, str2, options) {\n    if (options === void 0) { options = {}; }\n    if (typeof str1 !== 'string' || typeof str2 !== 'string') {\n        return false;\n    }\n    var ignoreCase = options.ignoreCase;\n    var collatorOptions;\n    if (typeof ignoreCase === 'boolean') {\n        var sensitivity = ignoreCase ? constants_1.CollatorSensitivity.BASE : constants_1.CollatorSensitivity.CASE;\n        collatorOptions = { sensitivity: sensitivity };\n    }\n    return str1.localeCompare(str2, undefined, collatorOptions) === 0;\n};\nexports.compareStrings = compareStrings;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar dateTag = '[object Date]';\n\n/**\n * The base implementation of `_.isDate` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n */\nfunction baseIsDate(value) {\n  return isObjectLike(value) && baseGetTag(value) == dateTag;\n}\n\nmodule.exports = baseIsDate;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","var baseIndexOf = require('./_baseIndexOf'),\n    isArrayLike = require('./isArrayLike'),\n    isString = require('./isString'),\n    toInteger = require('./toInteger'),\n    values = require('./values');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Checks if `value` is in `collection`. If `collection` is a string, it's\n * checked for a substring of `value`, otherwise\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\n * the offset from the end of `collection`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\n * @example\n *\n * _.includes([1, 2, 3], 1);\n * // => true\n *\n * _.includes([1, 2, 3], 1, 2);\n * // => false\n *\n * _.includes({ 'a': 1, 'b': 2 }, 1);\n * // => true\n *\n * _.includes('abcd', 'bc');\n * // => true\n */\nfunction includes(collection, value, fromIndex, guard) {\n  collection = isArrayLike(collection) ? collection : values(collection);\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n  var length = collection.length;\n  if (fromIndex < 0) {\n    fromIndex = nativeMax(length + fromIndex, 0);\n  }\n  return isString(collection)\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n}\n\nmodule.exports = includes;\n","var baseIsDate = require('./_baseIsDate'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsDate = nodeUtil && nodeUtil.isDate;\n\n/**\n * Checks if `value` is classified as a `Date` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n * @example\n *\n * _.isDate(new Date);\n * // => true\n *\n * _.isDate('Mon April 23 2012');\n * // => false\n */\nvar isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\nmodule.exports = isDate;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TOOLTIP_DEFAULT_MAX_LINES = exports.TOOLTIP_X_OFFSET = exports.TOOLTIP_Y_OFFSET = exports.MIN_SELECTION_WIDTH = exports.CURSOR_STYLE = exports.MARKER_DIAMETER = exports.SERIE_AREA_BORDER_WIDTH = exports.SERIE_AREA_BORDER_COLOR = exports.SERIE_LINE_WIDTH = exports.SERIE_COLOR = exports.PADDING_BOTH = exports.PADDING_RIGHT = exports.PADDING_LEFT = exports.BARS_DRAW_MAX = exports.BARS_DRAW_FACTOR = exports.TYPES_ORDER = exports.X_AXIS_INCRS = exports.X_AXIS_SPACE = exports.X_AXIS_SIZE = exports.X_AXIS_TICK_GAP = exports.DECADE = exports.YEAR = exports.DAY = exports.HOUR = exports.MINUTE = exports.SECOND = exports.Y_AXIS_LABEL_SIZE = exports.Y_AXIS_SIZE = exports.DEFAULT_Y_AXIS_LABEL_PADDING = exports.DEFAULT_Y_AXIS_PADDING = exports.DEFAULT_Y_AXIS_SIZE = exports.Y_AXIS_TICK_GAP = exports.AXIS_VALUES_FONT = exports.AXIS_LABEL_FONT = exports.DEFAULT_AXIS_FONT_SIZE = exports.DARK_DEFAULT_LINE_COLOR = exports.LIGHT_DEFAULT_LINE_COLOR = exports.DEFAULT_TITLE_FONT_SIZE = exports.DEFAULT_SYNC_KEY = exports.DEFAULT_POINT_SIZE = exports.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE = exports.DEFAULT_SCALE_MIN_RANGE = exports.DEFAULT_Y_AXIS_OFFSET = exports.DEFAULT_MAX_TICKS = exports.DEFAULT_CANVAS_PIXEL_RATIO = exports.DEFAULT_FOCUS_ALPHA = exports.DEFAULT_Y_SCALE = exports.DEFAULT_X_SCALE = exports.DEFAULT_X_SERIE_NAME = void 0;\nexports.DEFAULT_X_SERIE_NAME = 'date';\nexports.DEFAULT_X_SCALE = 'x';\nexports.DEFAULT_Y_SCALE = 'y';\nexports.DEFAULT_FOCUS_ALPHA = 0.3;\nexports.DEFAULT_CANVAS_PIXEL_RATIO = typeof window === 'undefined' ? 1 : window.devicePixelRatio;\nexports.DEFAULT_MAX_TICKS = 5;\nexports.DEFAULT_Y_AXIS_OFFSET = 0.05;\nexports.DEFAULT_SCALE_MIN_RANGE = 0.01;\nexports.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE = 0.001;\nexports.DEFAULT_POINT_SIZE = 4;\nexports.DEFAULT_SYNC_KEY = 'sync';\nexports.DEFAULT_TITLE_FONT_SIZE = 14;\nexports.LIGHT_DEFAULT_LINE_COLOR = '#222222';\nexports.DARK_DEFAULT_LINE_COLOR = '#eeeeee';\nexports.DEFAULT_AXIS_FONT_SIZE = 11;\nexports.AXIS_LABEL_FONT = 'normal 11px Lucida Grande, Arial, Helvetica, sans-serif';\nexports.AXIS_VALUES_FONT = '11px Lucida Grande, Arial, Helvetica, sans-serif';\nexports.Y_AXIS_TICK_GAP = 6;\nexports.DEFAULT_Y_AXIS_SIZE = 12;\nexports.DEFAULT_Y_AXIS_PADDING = 12;\nexports.DEFAULT_Y_AXIS_LABEL_PADDING = 2;\nconst Y_AXIS_SIZE = (self, values, axisIdx) => {\n    if (!values) {\n        return exports.DEFAULT_Y_AXIS_SIZE;\n    }\n    const longesValue = values.reduce((l, c) => (l.length > c.length ? l : c));\n    const { ctx } = self;\n    ctx.save();\n    const axis = self.axes[axisIdx];\n    ctx.font = axis.font ? axis.font[0] : exports.AXIS_VALUES_FONT;\n    const { width: textSize } = ctx.measureText(longesValue);\n    ctx.restore();\n    let labelSize = 0;\n    if (axis.label) {\n        labelSize = axis.labelSize || exports.DEFAULT_AXIS_FONT_SIZE;\n        ctx.font = axis.labelFont ? axis.labelFont[0] : exports.AXIS_LABEL_FONT;\n        const { fontBoundingBoxAscent: size } = ctx.measureText(axis.label);\n        labelSize = size;\n        ctx.restore();\n    }\n    return labelSize\n        ? textSize / exports.DEFAULT_CANVAS_PIXEL_RATIO + labelSize / exports.DEFAULT_CANVAS_PIXEL_RATIO + exports.DEFAULT_Y_AXIS_LABEL_PADDING\n        : textSize / exports.DEFAULT_CANVAS_PIXEL_RATIO + exports.DEFAULT_Y_AXIS_PADDING;\n};\nexports.Y_AXIS_SIZE = Y_AXIS_SIZE;\nexports.Y_AXIS_LABEL_SIZE = 11;\nexports.SECOND = 1000;\nexports.MINUTE = exports.SECOND * 60;\nexports.HOUR = exports.MINUTE * 60;\nexports.DAY = exports.HOUR * 24;\nexports.YEAR = exports.DAY * 365;\nexports.DECADE = exports.YEAR * 10;\nexports.X_AXIS_TICK_GAP = 6;\nexports.X_AXIS_SIZE = 32;\nexports.X_AXIS_SPACE = 80;\nexports.X_AXIS_INCRS = [\n    // seconds divisors (# os ms)\n    1,\n    10,\n    50,\n    100,\n    200,\n    500,\n    // minute divisors\n    exports.SECOND,\n    exports.SECOND * 2,\n    exports.SECOND * 5,\n    exports.SECOND * 10,\n    exports.SECOND * 15,\n    exports.SECOND * 30,\n    // hour divisors\n    exports.MINUTE,\n    exports.MINUTE * 5,\n    exports.MINUTE * 10,\n    exports.MINUTE * 30,\n    // day divisors\n    exports.HOUR,\n    exports.HOUR * 2,\n    exports.HOUR * 3,\n    exports.HOUR * 4,\n    exports.HOUR * 6,\n    exports.HOUR * 12,\n    // month divisors\n    exports.DAY,\n    exports.DAY * 2,\n    exports.DAY * 3,\n    exports.DAY * 5,\n    exports.DAY * 10,\n    exports.DAY * 15,\n    exports.DAY * 30,\n    exports.DAY * 60,\n    exports.DAY * 120,\n    exports.DAY * 180,\n    // year divisors\n    exports.YEAR,\n    exports.YEAR * 2,\n    exports.YEAR * 5,\n    exports.YEAR * 10,\n];\nexports.TYPES_ORDER = ['dots', 'line', 'area', 'column'];\nexports.BARS_DRAW_FACTOR = 0.5;\nexports.BARS_DRAW_MAX = 100;\nexports.PADDING_LEFT = [14, 14, 0, 4];\nexports.PADDING_RIGHT = [14, 4, 0, 14];\nexports.PADDING_BOTH = [14, 4, 0, 4];\nexports.SERIE_COLOR = 'rgba(0, 0, 0, 1)';\nexports.SERIE_LINE_WIDTH = 2;\nexports.SERIE_AREA_BORDER_COLOR = 'rgba(0, 0, 0, 0.2)';\nexports.SERIE_AREA_BORDER_WIDTH = 1;\nexports.MARKER_DIAMETER = 8;\nexports.CURSOR_STYLE = '1px solid #ffa0a0';\nexports.MIN_SELECTION_WIDTH = 15;\nconst LIGHTEN_COLOR_SHIFT = 0.68;\nconst DARKEN_COLOR_SHIFT = -0.6;\nclass ThemedDefaults {\n    constructor(colors, theme = 'light') {\n        this.setTheme(theme);\n        this.colors = colors;\n    }\n    setTheme(theme) {\n        this.theme = theme;\n    }\n    get GRID() {\n        return {\n            show: true,\n            stroke: () => this.colors.parse('--yagr-grid'),\n            width: 1,\n        };\n    }\n    get X_AXIS_TICKS() {\n        return { size: 8, ...this.GRID };\n    }\n    get Y_AXIS_TICKS() {\n        return { size: 6, ...this.GRID };\n    }\n    get AXIS_STROKE() {\n        return this.colors.parse('--yagr-axis-stroke');\n    }\n    get BACKGROUND() {\n        return this.colors.parse('--yagr-background');\n    }\n    get SHIFT() {\n        var _a;\n        return ((_a = this.theme) === null || _a === void 0 ? void 0 : _a.startsWith('light')) ? LIGHTEN_COLOR_SHIFT : DARKEN_COLOR_SHIFT;\n    }\n    get DEFAULT_LINE_COLOR() {\n        var _a;\n        return ((_a = this.theme) === null || _a === void 0 ? void 0 : _a.startsWith('light')) ? exports.LIGHT_DEFAULT_LINE_COLOR : exports.DARK_DEFAULT_LINE_COLOR;\n    }\n}\nexports.default = ThemedDefaults;\nexports.TOOLTIP_Y_OFFSET = 24;\nexports.TOOLTIP_X_OFFSET = 24;\nexports.TOOLTIP_DEFAULT_MAX_LINES = 10;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uplot_1 = __importDefault(require(\"uplot\"));\nconst legend_1 = __importDefault(require(\"./plugins/legend/legend\"));\nconst common_1 = require(\"./utils/common\");\nconst colors_1 = __importDefault(require(\"./utils/colors\"));\nconst defaults_1 = __importStar(require(\"./defaults\"));\nconst locale_1 = __importDefault(require(\"./locale\"));\nconst create_options_1 = require(\"./mixins/create-options\");\nconst transform_series_1 = require(\"./mixins/transform-series\");\nconst dynamic_updates_1 = require(\"./mixins/dynamic-updates\");\nconst mixins_1 = require(\"./utils/mixins\");\nconst batch_updates_1 = require(\"./mixins/batch-updates\");\n/*\n * Main core-module of Yagr.\n * Implements data processing and autoconfigurable wrapper\n * for uPlot chart.\n * Entrypoint of every Yagr chart.\n */\nclass Yagr {\n    get isEmpty() {\n        return this.state.isEmptyDataSet;\n    }\n    constructor(root, pConfig) {\n        this.plugins = {};\n        this._meta = {};\n        this._uHooks = {};\n        this.init = () => {\n            var _a;\n            if (((_a = this.config.chart.size) === null || _a === void 0 ? void 0 : _a.adaptive) && !this.resizeOb) {\n                this.resizeOb = new ResizeObserver((0, common_1.debounce)(this.onResize, this.config.chart.size.resizeDebounceMs || 100));\n                this.resizeOb.observe(this.root);\n            }\n            if (!this.config.hooks.dispose) {\n                this.config.hooks.dispose = [];\n            }\n            /** Unsubscribe in init required to avoid chars been synced without action from developer */\n            this.unsubscribe();\n            this.config.hooks.dispose.push(this.trackMouse());\n        };\n        this.execHooks = (hookName, ...args) => {\n            const hooks = this.config.hooks[hookName];\n            if (Array.isArray(hooks)) {\n                for (const hook of hooks) {\n                    if (!hook) {\n                        continue;\n                    }\n                    typeof hook === 'function' && hook(...args);\n                }\n            }\n        };\n        this.initRender = (u, done) => {\n            var _a, _b, _c;\n            /**\n             * Reimplementing appending u.root to root\n             * and ensure that uPlot instance will be placed\n             * correctly relative to legend\n             */\n            const position = (_a = this.config.legend) === null || _a === void 0 ? void 0 : _a.position;\n            if (this.root.firstChild) {\n                !position || position === 'bottom'\n                    ? this.root.insertBefore(u.root, this.root.firstChild)\n                    : this.root.appendChild(u.root);\n            }\n            else {\n                !position || position === 'bottom'\n                    ? this.root.appendChild(u.root)\n                    : this.root.insertBefore(u.root, this.root.firstChild);\n            }\n            if ((_b = this.config.legend) === null || _b === void 0 ? void 0 : _b.show) {\n                (_c = this.plugins.legend) === null || _c === void 0 ? void 0 : _c.init(u);\n                this.reflow(false);\n            }\n            this.initTitle();\n            done();\n        };\n        /*\n         * Resize handler. Should cache height and width to avoid unneccesary resize handling,\n         * when actial width and height of contentRect doesn't changed\n         */\n        this.onResize = (args) => {\n            var _a;\n            const [resize] = args;\n            if (this._cache.height === resize.contentRect.height && this._cache.width === resize.contentRect.width) {\n                return;\n            }\n            (_a = this.plugins.tooltip) === null || _a === void 0 ? void 0 : _a.reset();\n            this.reflow();\n            this.execHooks('resize', { entries: args, chart: this });\n        };\n        this.initMixins();\n        this._startTime = performance.now();\n        this.state = {\n            isEmptyDataSet: false,\n            isMouseOver: false,\n            stage: 'config',\n            y2uIdx: {},\n            subscribed: false,\n        };\n        const config = Object.assign({\n            title: {},\n            data: [],\n            axes: {},\n            series: [],\n            scales: {},\n            hooks: {},\n            settings: {},\n            chart: {},\n            cursor: {},\n            plugins: {},\n            legend: {\n                show: false,\n            },\n            tooltip: {\n                show: true,\n            },\n            grid: null,\n            markers: {},\n        }, pConfig);\n        this.config = config;\n        this.inStage('config', () => {\n            var _a;\n            this.id = root.id || (0, common_1.genId)();\n            this.root = root;\n            this.root.classList.add('yagr');\n            if (!this.root.id) {\n                this.root.id = this.id;\n            }\n            const colorParser = new colors_1.default();\n            const sync = this.config.cursor.sync;\n            const chart = this.config.chart;\n            chart.series || (chart.series = { type: 'line' });\n            chart.size || (chart.size = { adaptive: true });\n            chart.appearance || (chart.appearance = { locale: 'en' });\n            chart.select || (chart.select = {});\n            this.utils = {\n                colors: colorParser,\n                i18n: (0, locale_1.default)(((_a = config.chart.appearance) === null || _a === void 0 ? void 0 : _a.locale) || 'en'),\n                theme: new defaults_1.default(colorParser),\n            };\n            colorParser.setContext(root);\n            if (sync) {\n                this.utils.sync = uplot_1.default.sync(typeof sync === 'string' ? sync : defaults_1.DEFAULT_SYNC_KEY);\n            }\n            if (!chart.size.adaptive && chart.size.width && chart.size.height) {\n                root.style.width = (0, common_1.px)(chart.size.width);\n                root.style.height = (0, common_1.px)(chart.size.height);\n            }\n            this.plugins.legend = new legend_1.default();\n            this.setTheme(chart.appearance.theme || 'light');\n            this.createUplotOptions();\n            this._cache = {\n                height: this.options.height,\n                width: this.options.width,\n            };\n            if (config.editUplotOptions) {\n                this.options = config.editUplotOptions(this.options);\n            }\n        })\n            .inStage('processing', () => {\n            this.transformSeries();\n        })\n            .inStage('uplot', () => {\n            this.uplot = new uplot_1.default(this.options, this.series, this.initRender);\n            this.canvas = root.querySelector('canvas');\n            this.init();\n            const processTime = performance.now() - this._startTime;\n            this._meta.processTime = processTime;\n        })\n            .inStage('render');\n    }\n    /**\n     * Redraws Yagr instance by given options.\n     */\n    redraw(series = true, axes = true) {\n        this.uplot.redraw(series, axes);\n    }\n    /**\n     *  Get uPlot's Series from series id\n     */\n    getSeriesById(id) {\n        return this.uplot.series[this.state.y2uIdx[id]];\n    }\n    dispose() {\n        var _a, _b, _c, _d;\n        this.resizeOb && this.resizeOb.unobserve(this.root);\n        this.unsubscribe();\n        (_b = (_a = this.plugins) === null || _a === void 0 ? void 0 : _a.tooltip) === null || _b === void 0 ? void 0 : _b.dispose();\n        (_d = (_c = this.plugins) === null || _c === void 0 ? void 0 : _c.legend) === null || _d === void 0 ? void 0 : _d.destroy();\n        this.uplot.destroy();\n        this._uHooks = {};\n        this.execHooks('dispose', { chart: this });\n    }\n    toDataUrl() {\n        return this.canvas.toDataURL('img/png');\n    }\n    subscribe() {\n        var _a;\n        if (this.state.subscribed) {\n            return;\n        }\n        (_a = this.utils.sync) === null || _a === void 0 ? void 0 : _a.sub(this.uplot);\n        this.state.subscribed = true;\n    }\n    unsubscribe() {\n        var _a;\n        (_a = this.utils.sync) === null || _a === void 0 ? void 0 : _a.unsub(this.uplot);\n        this.state.subscribed = false;\n    }\n    inStage(stage, fn) {\n        this.state.stage === stage;\n        this.execHooks('stage', { chart: this, stage });\n        try {\n            fn && fn();\n        }\n        catch (error) {\n            console.error(error);\n            this.onError(error);\n        }\n        return this;\n    }\n    initTitle() {\n        /** Setup font size for title if required */\n        if (this.config.title && this.config.title.fontSize) {\n            const size = this.config.title.fontSize;\n            const t = this.root.querySelector('.u-title');\n            t.setAttribute('style', `font-size:${size}px;line-height:${size}px;`);\n            t.innerHTML = this.config.title.text;\n        }\n    }\n    onError(error) {\n        this.execHooks('error', {\n            stage: this.state.stage,\n            error,\n            chart: this,\n        });\n        return error;\n    }\n    trackMouse() {\n        const mouseOver = () => {\n            this.state.isMouseOver = true;\n        };\n        const mouseLeave = () => {\n            this.state.isMouseOver = false;\n        };\n        this.root.addEventListener('mouseover', mouseOver);\n        this.root.addEventListener('mouseleave', mouseLeave);\n        return () => {\n            this.root.removeEventListener('mouseover', mouseOver);\n            this.root.removeEventListener('mouseleave', mouseLeave);\n        };\n    }\n    get clientHeight() {\n        var _a;\n        const MARGIN = 8;\n        const offset = this.config.title.text ? (this.config.title.fontSize || defaults_1.DEFAULT_TITLE_FONT_SIZE) + MARGIN : 0;\n        return this.root.clientHeight - offset - (((_a = this.plugins.legend) === null || _a === void 0 ? void 0 : _a.state.totalSpace) || 0);\n    }\n    reflow(redraw = true) {\n        const width = this.root.clientWidth;\n        const height = this.clientHeight;\n        this._cache.width = width;\n        this.options.width = width;\n        this._cache.height = height;\n        this.options.height = height;\n        redraw &&\n            this.uplot.setSize({\n                width: this.options.width,\n                height: this.options.height,\n            });\n        redraw && this.uplot.redraw();\n    }\n}\n(0, mixins_1.applyMixins)(Yagr, [create_options_1.CreateUplotOptionsMixin, transform_series_1.TransformSeriesMixin, dynamic_updates_1.DynamicUpdatesMixin, batch_updates_1.BatchMixin]);\nexports.default = Yagr;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst LOCALIZATIONS = {\n    ru: {\n        'hide-all': ' ',\n        'show-all': ' ',\n        sum: '',\n        scale: '',\n        series: '',\n        weekend: '',\n        nodata: ' ',\n    },\n    en: {\n        'hide-all': 'Hide all',\n        'show-all': 'Show all',\n        sum: 'Total',\n        scale: 'Scale',\n        series: 'Series',\n        weekend: 'Weekend',\n        nodata: 'No data',\n    },\n};\nexports.default = (locale = 'en') => {\n    if (typeof locale !== 'string') {\n        LOCALIZATIONS.custom = locale;\n        locale = 'custom';\n    }\n    return (key) => {\n        return LOCALIZATIONS[locale][key] || key;\n    };\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BatchMixin = void 0;\nconst uplot_1 = __importDefault(require(\"uplot\"));\nclass BatchMixin {\n    initMixin() {\n        this._batch = {\n            active: false,\n            fns: [],\n        };\n    }\n    /**\n     * @public\n     * @param fn batch funcion.\n     * @experimental\n     * @descriptoin Batch wrapper. Batch function accepts batch state, it can be modified to change batch execution behaviour.\n     * @example\n     * ```typescript\n     * yagr.batch((s) => {\n     *    s.reopt = true; // reinit uPlot options\n     *    s.recalc = true; // recalculate series\n     *    s.redraw = [true, true]; // redraw chart\n     *    s.reinit = true; // reinit uPlot chart\n     * });\n     * ```\n     */\n    batch(fn) {\n        var _a;\n        if (this._batch.active) {\n            return fn(this._batch);\n        }\n        this._batch.active = true;\n        fn(this._batch);\n        if (this._batch.reinit) {\n            return this.fullUpdate();\n        }\n        if (this._batch.redrawLegend) {\n            (_a = this.plugins.legend) === null || _a === void 0 ? void 0 : _a.redraw();\n        }\n        if (this._batch.reopt) {\n            this.createUplotOptions(true);\n        }\n        if (this._batch.recalc) {\n            this.inStage('processing', () => {\n                this.transformSeries();\n            }).inStage('listen');\n        }\n        this._batch.fns.length && this.uplot.batch(() => this._batch.fns.forEach((fn) => fn(this._batch)));\n        if (this._batch.redraw && this.uplot) {\n            this.redraw(...this._batch.redraw);\n        }\n        this._batch = { active: false, fns: [] };\n    }\n    /**\n     *\n     * @internal\n     * @description Full update of chart. Used when config is changed totally.\n     */\n    fullUpdate() {\n        this.inStage('config', () => {\n            this._batch = { active: false, fns: [] };\n            this.createUplotOptions(true);\n            this.options = this.config.editUplotOptions ? this.config.editUplotOptions(this.options) : this.options;\n        })\n            .inStage('processing', () => {\n            this.transformSeries();\n        })\n            .inStage('uplot', () => {\n            var _a;\n            let left;\n            let top;\n            if (this.uplot) {\n                const cursor = this.uplot.cursor;\n                left = cursor.left;\n                top = cursor.top;\n                // uplot may be undefined if chart is not rendered yet, but got update\n                this.uplot.destroy();\n            }\n            this.uplot = new uplot_1.default(this.options, this.series, this.initRender);\n            (_a = this.plugins.legend) === null || _a === void 0 ? void 0 : _a.redraw();\n            if (left && top && left > 0 && top > 0) {\n                this.uplot.setCursor({ left, top });\n            }\n            // by default uPlot subsribes self to cursor, if we don't need it, we should unsubscribe manually\n            if (!this.state.subscribed) {\n                this.unsubscribe();\n            }\n        })\n            .inStage('listen');\n    }\n}\nexports.BatchMixin = BatchMixin;\n","\"use strict\";\n/* eslint-disable complexity */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CreateUplotOptionsMixin = void 0;\nconst tooltip_1 = __importDefault(require(\"../plugins/tooltip/tooltip\"));\nconst cursor_1 = __importDefault(require(\"../plugins/cursor/cursor\"));\nconst defaults_1 = require(\"../defaults\");\nconst series_1 = require(\"../utils/series\");\nconst markers_1 = __importDefault(require(\"../plugins/markers\"));\nconst scales_1 = require(\"../utils/scales\");\nconst axes_1 = require(\"../utils/axes\");\nconst chart_1 = require(\"../utils/chart\");\nconst types_1 = require(\"../utils/types\");\nconst plotLines_1 = __importDefault(require(\"../plugins/plotLines/plotLines\"));\nfunction setIfNotSet(hooks, fn) {\n    for (const hook of hooks || []) {\n        if (hook === fn) {\n            return;\n        }\n    }\n    hooks === null || hooks === void 0 ? void 0 : hooks.push(fn);\n}\nclass CreateUplotOptionsMixin {\n    initMixin() {\n        this._uHooks.onDraw = () => {\n            if (this.state.stage === 'listen') {\n                return;\n            }\n            this.state.stage = 'listen';\n            this.execHooks('stage', { chart: this, stage: this.state.stage });\n            const renderTime = performance.now() - this._startTime;\n            this._meta.renderTime = renderTime;\n            this.execHooks('load', {\n                chart: this,\n                meta: this._meta,\n            });\n        };\n        this._uHooks.ready = () => {\n            const initTime = performance.now() - this._startTime;\n            this._meta.initTime = initTime;\n            this.execHooks('inited', {\n                chart: this,\n                meta: {\n                    initTime,\n                },\n            });\n        };\n        this._uHooks.drawClear = (u) => {\n            const { ctx } = u;\n            ctx.save();\n            ctx.fillStyle = this.utils.theme.BACKGROUND;\n            ctx.fillRect(defaults_1.DEFAULT_CANVAS_PIXEL_RATIO, defaults_1.DEFAULT_CANVAS_PIXEL_RATIO, u.width * defaults_1.DEFAULT_CANVAS_PIXEL_RATIO - 2 * defaults_1.DEFAULT_CANVAS_PIXEL_RATIO, u.height * defaults_1.DEFAULT_CANVAS_PIXEL_RATIO - 2 * defaults_1.DEFAULT_CANVAS_PIXEL_RATIO);\n            ctx.restore();\n        };\n        this._uHooks.setSelect = (u) => {\n            const { left, width } = u.select;\n            const [_from, _to] = [u.posToVal(left, defaults_1.DEFAULT_X_SCALE), u.posToVal(left + width, defaults_1.DEFAULT_X_SCALE)];\n            const { timeMultiplier = 1 } = this.config.chart || {};\n            this.execHooks('onSelect', {\n                from: Math.ceil(_from / timeMultiplier),\n                to: Math.ceil(_to / timeMultiplier),\n                chart: this,\n            });\n            u.setSelect({ width: 0, height: 0, top: 0, left: 0 }, false);\n        };\n    }\n    /**\n     * @internal\n     * @param reOpt If in reOpt cycle (e.g. batch update), then won't reinit hooks.\n     * @description Creates uPlot options from Yagr config, sets up plugins. Non idempotent.\n     * @returns uPlot options\n     */\n    createUplotOptions(reOpt = false) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\n        const { config } = this;\n        const plugins = [];\n        let tooltipInstance = (_a = this.plugins) === null || _a === void 0 ? void 0 : _a.tooltip;\n        /** Setting up TooltipPugin */\n        if (config.tooltip && config.tooltip.show !== false) {\n            if (tooltipInstance) {\n                tooltipInstance.updateOptions(config.tooltip);\n            }\n            else {\n                tooltipInstance = (0, tooltip_1.default)(this, config.tooltip);\n            }\n            plugins.push(tooltipInstance.uplot);\n            this.plugins.tooltip = tooltipInstance;\n        }\n        if (reOpt) {\n            this.plugins.plotLines && plugins.push(this.plugins.plotLines.uplot);\n        }\n        else {\n            const plotLinesPluginInstance = (0, plotLines_1.default)(this.config.plotLines || {})(this);\n            this.plugins.plotLines = plotLinesPluginInstance;\n            plugins.push(plotLinesPluginInstance.uplot);\n        }\n        Object.entries(config.plugins).forEach(([name, plugin]) => {\n            const pluginInstance = plugin(this);\n            plugins.push(pluginInstance.uplot);\n            Object.assign(this.plugins, { [name]: pluginInstance });\n        });\n        const chart = config.chart;\n        const options = {\n            width: this.root.clientWidth,\n            height: this.clientHeight,\n            title: (_b = config.title) === null || _b === void 0 ? void 0 : _b.text,\n            plugins: plugins,\n            focus: { alpha: defaults_1.DEFAULT_FOCUS_ALPHA },\n            series: [\n                {\n                    id: defaults_1.DEFAULT_X_SERIE_NAME,\n                    $c: config.timeline,\n                    scale: defaults_1.DEFAULT_X_SCALE,\n                    count: config.timeline.length,\n                },\n            ],\n            ms: chart.timeMultiplier || 1,\n            hooks: config.hooks || {},\n        };\n        this.state.isEmptyDataSet =\n            config.timeline.length === 0 ||\n                config.series.length === 0 ||\n                config.series.every(({ data }) => data.length === 0);\n        /**\n         * Setting up cursor - points on cursor, drag behavior, crosshairs\n         */\n        options.cursor = options.cursor || {};\n        options.cursor.points = options.cursor.points || {};\n        options.cursor.drag = options.cursor.drag || {\n            dist: ((_c = chart.select) === null || _c === void 0 ? void 0 : _c.minWidth) || defaults_1.MIN_SELECTION_WIDTH,\n            x: (_d = options.cursor.y) !== null && _d !== void 0 ? _d : true,\n            y: (_e = options.cursor.y) !== null && _e !== void 0 ? _e : false,\n            setScale: (_g = (_f = chart.select) === null || _f === void 0 ? void 0 : _f.zoom) !== null && _g !== void 0 ? _g : true,\n        };\n        if (this.utils.sync) {\n            options.cursor.sync = options.cursor.sync || {\n                key: this.utils.sync.key,\n            };\n        }\n        if (config.cursor) {\n            const cPlugin = (0, cursor_1.default)(this, config.cursor);\n            this.plugins.cursor = cPlugin;\n            plugins.push(cPlugin.uplot);\n        }\n        const seriesOptions = config.series || [];\n        const resultingSeriesOptions = options.series;\n        /**\n         * Prepare series options\n         */\n        for (let i = seriesOptions.length - 1; i >= 0; i--) {\n            const serie = (0, series_1.configureSeries)(this, seriesOptions[i] || {}, i);\n            const uIdx = resultingSeriesOptions.push(serie);\n            this.state.y2uIdx[serie.id || i] = uIdx - 1;\n        }\n        /** Setting up markers plugin after default points renderers to be settled */\n        const markersPluginInstance = (0, markers_1.default)(this, config);\n        plugins.push(markersPluginInstance);\n        options.series = resultingSeriesOptions;\n        if (!config.scales || Object.keys(config.scales).length === 0) {\n            config.scales = {\n                x: {},\n                y: {},\n            };\n        }\n        /** Setting up scales */\n        options.scales = options.scales || {};\n        options.scales = (0, scales_1.configureScales)(this, options.scales, config);\n        /** Setting up minimal axes */\n        options.axes = options.axes || [];\n        const axes = options.axes;\n        axes.push(...(0, axes_1.configureAxes)(this, config));\n        /** Setting up hooks */\n        options.hooks = config.hooks || {};\n        options.hooks.draw = options.hooks.draw || [];\n        options.hooks.ready = options.hooks.ready || [];\n        options.hooks.drawClear = options.hooks.drawClear || [];\n        options.hooks.setSelect = options.hooks.setSelect || [];\n        setIfNotSet(options.hooks.draw, this._uHooks.onDraw);\n        setIfNotSet(options.hooks.ready, this._uHooks.ready);\n        setIfNotSet(options.hooks.drawClear, this._uHooks.drawClear);\n        setIfNotSet(options.hooks.setSelect, this._uHooks.setSelect);\n        options.drawOrder = ((_h = chart.appearance) === null || _h === void 0 ? void 0 : _h.drawOrder)\n            ? (_j = chart.appearance) === null || _j === void 0 ? void 0 : _j.drawOrder.filter((key) => key === types_1.DrawOrderKey.Series || key === types_1.DrawOrderKey.Axes)\n            : [types_1.DrawOrderKey.Series, types_1.DrawOrderKey.Axes];\n        /** Disabling uPlot legend. */\n        options.legend = { show: false };\n        options.padding = ((_k = config.chart.size) === null || _k === void 0 ? void 0 : _k.padding) || (0, chart_1.getPaddingByAxes)(options);\n        /**\n         * Pre-initialization  of legend allows to calculate\n         * legend's height before actual uPlot instance\n         * will be rendered, to avoid blinking height changes\n         */\n        (_l = this.plugins.legend) === null || _l === void 0 ? void 0 : _l.preInit(this, this.config.legend, options);\n        options.height = this.clientHeight;\n        this.options = options;\n        return options;\n    }\n}\nexports.CreateUplotOptionsMixin = CreateUplotOptionsMixin;\n","\"use strict\";\n/* eslint-disable complexity */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DynamicUpdatesMixin = void 0;\nconst locale_1 = __importDefault(require(\"../locale\"));\nconst defaults_1 = require(\"../defaults\");\nconst series_1 = require(\"../utils/series\");\nconst axes_1 = require(\"../utils/axes\");\nconst common_1 = require(\"../utils/common\");\nfunction setLocaleImpl(yagr, batch, locale) {\n    yagr.utils.i18n = (0, locale_1.default)(locale);\n    batch.redrawLegend = true;\n}\nfunction setThemeImpl(yagr, themeValue, batch) {\n    yagr.utils.theme.setTheme(themeValue);\n    const availableThemes = ['light', 'light-hc', 'dark', 'dark-hc'];\n    const classesToRemove = availableThemes.map((theme) => `yagr_theme_${theme}`);\n    yagr.root.classList.remove(...classesToRemove);\n    yagr.root.classList.add('yagr_theme_' + themeValue);\n    batch.redraw = [false, true];\n}\nfunction setAxesImpl(yagr, batch, axes) {\n    const { x, ...rest } = axes;\n    if (x) {\n        const xAxis = yagr.uplot.axes.find(({ scale }) => scale === defaults_1.DEFAULT_X_SCALE);\n        if (xAxis) {\n            (0, axes_1.updateAxis)(yagr, xAxis, { scale: defaults_1.DEFAULT_X_SCALE, ...x });\n        }\n    }\n    Object.entries(rest).forEach(([scaleName, scaleConfig]) => {\n        const axis = yagr.uplot.axes.find(({ scale }) => scale === scaleName);\n        if (axis) {\n            (0, axes_1.updateAxis)(yagr, axis, { scale: scaleName, ...scaleConfig });\n        }\n    });\n    batch.redraw = (0, axes_1.getRedrawOptionsForAxesUpdate)(axes);\n}\nfunction setFocusImpl(yagr, lineId, focus) {\n    var _a;\n    const seriesIdx = lineId === null ? null : yagr.state.y2uIdx[lineId];\n    (_a = yagr.plugins.cursor) === null || _a === void 0 ? void 0 : _a.focus(seriesIdx, focus);\n    yagr.uplot.setSeries(seriesIdx, { focus });\n}\nfunction setVisibleImpl(yagr, lineId, show, updateLegend, batch) {\n    const seriesIdx = lineId === null ? null : yagr.state.y2uIdx[lineId];\n    const seriesCfg = lineId === null ? yagr.config.series : [yagr.config.series.find(({ id }) => id === lineId)];\n    seriesCfg.forEach((serie) => {\n        if (serie) {\n            serie.show = show;\n        }\n    });\n    batch.fns.push(() => {\n        yagr.uplot.setSeries(seriesIdx, {\n            show,\n        });\n    });\n    yagr.options.series = yagr.uplot.series;\n    let shouldRebuildStacks = false;\n    if (seriesIdx) {\n        const series = yagr.uplot.series[seriesIdx];\n        series.show = show;\n        const scaleName = series.scale || defaults_1.DEFAULT_Y_SCALE;\n        const scale = yagr.config.scales[scaleName];\n        shouldRebuildStacks = Boolean(scale && scale.stacking);\n    }\n    else {\n        shouldRebuildStacks = yagr.options.series.reduce((acc, serie) => {\n            var _a;\n            const { scale } = serie;\n            serie.show = show;\n            return Boolean((scale && ((_a = yagr.config.scales[scale]) === null || _a === void 0 ? void 0 : _a.stacking)) || acc);\n        }, false);\n    }\n    if (shouldRebuildStacks) {\n        // batch.reopt = true;\n        batch.recalc = true;\n        batch.fns.push(() => {\n            var _a;\n            yagr.uplot.setData(yagr.series, true);\n            updateLegend && ((_a = yagr.plugins.legend) === null || _a === void 0 ? void 0 : _a.update());\n        });\n    }\n}\nfunction setScalesImpl(yagr, scales, batch) {\n    let stackingIsChanged = false;\n    let normalizationIsChanged = false;\n    Object.entries(scales).forEach(([scaleName, scaleConfig]) => {\n        const scale = yagr.config.scales[scaleName];\n        if (scale) {\n            const { stacking } = scale;\n            const { stacking: newStacking } = scaleConfig;\n            if (stacking !== newStacking) {\n                stackingIsChanged = true;\n            }\n            if (scaleConfig.normalize !== scale.normalize || scaleConfig.normalizeBase !== scale.normalizeBase) {\n                normalizationIsChanged = true;\n            }\n        }\n    });\n    const isChangingOnlyMinMax = Object.entries(scales).every(([key, scaleConfig]) => {\n        const cfg = yagr.config.scales[key];\n        const { min: pMin, max: pMax, ...pRest } = cfg;\n        const { min: nMin, max: nMax, ...nRest } = scaleConfig;\n        const isChangedSomething = (0, common_1.deepIsEqual)(nRest, pRest) === false;\n        return !isChangedSomething && (pMin !== nMin || pMax !== nMax);\n    });\n    const isChangingXAxis = Object.keys(scales).includes(defaults_1.DEFAULT_X_SCALE);\n    /**\n     * In case if we change only min/max on data-scales, then we can just use uplot.setScale,\n     * otherwise we need to rebuild all series and stacks in order to apply new scales;\n     */\n    if (isChangingOnlyMinMax && !isChangingXAxis) {\n        return Object.entries(scales).forEach(([scaleName, scaleConfig]) => {\n            batch.fns.push(() => {\n                yagr.uplot.setScale(scaleName, {\n                    min: scaleConfig.min,\n                    max: scaleConfig.max,\n                });\n            });\n        });\n    }\n    if (stackingIsChanged || normalizationIsChanged) {\n        batch.reinit = true;\n    }\n    yagr.config.scales = scales;\n    batch.reinit = true;\n}\nfunction isChanged(oldConfig, newConfig) {\n    return function isChangedPath(path, predicate) {\n        const oldValue = (0, common_1.get)(oldConfig, path);\n        const newValue = (0, common_1.get)(newConfig, path);\n        return predicate ? !predicate(oldValue, newValue) : oldValue !== newValue;\n    };\n}\nfunction areSeriesChanged(a, b) {\n    if (a.length !== (b === null || b === void 0 ? void 0 : b.length)) {\n        return true;\n    }\n    const mapA = new Map();\n    const mapB = new Map();\n    a.forEach((serie) => {\n        mapA.set(serie.id, serie);\n    });\n    b.forEach((serie) => {\n        mapB.set(serie.id, serie);\n    });\n    if (b.some(({ id }) => !mapA.has(id)) || a.some(({ id }) => !mapB.has(id))) {\n        return true;\n    }\n    return false;\n}\nfunction setConfigImpl(yagr, batch, newConfig, fullUpdate = false) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n    if (fullUpdate) {\n        yagr.config = { ...yagr.config, ...newConfig };\n        batch.reinit = true;\n        return;\n    }\n    const isChangedKey = isChanged(yagr.config, newConfig);\n    if (newConfig.title && isChangedKey('title')) {\n        yagr.setTitle(newConfig.title);\n    }\n    if (((_b = (_a = newConfig.chart) === null || _a === void 0 ? void 0 : _a.appearance) === null || _b === void 0 ? void 0 : _b.theme) && isChangedKey('chart.appearance.theme')) {\n        yagr.setTheme((_d = (_c = newConfig.chart) === null || _c === void 0 ? void 0 : _c.appearance) === null || _d === void 0 ? void 0 : _d.theme);\n    }\n    if (((_f = (_e = newConfig.chart) === null || _e === void 0 ? void 0 : _e.appearance) === null || _f === void 0 ? void 0 : _f.locale) && isChangedKey('chart.appearance.locale')) {\n        yagr.setLocale((_h = (_g = newConfig.chart) === null || _g === void 0 ? void 0 : _g.appearance) === null || _h === void 0 ? void 0 : _h.locale);\n    }\n    if (newConfig.axes && isChangedKey('axes', common_1.deepIsEqual)) {\n        yagr.setAxes(newConfig.axes);\n    }\n    if (newConfig.scales && isChangedKey('scales', common_1.deepIsEqual)) {\n        yagr.setScales(newConfig.scales);\n    }\n    const isChangedSeries = Boolean(newConfig.series) && areSeriesChanged(yagr.config.series, newConfig.series);\n    if (isChangedSeries) {\n        batch.redrawLegend = true;\n    }\n    if (newConfig.series || newConfig.timeline) {\n        yagr.setSeries((_j = newConfig.timeline) !== null && _j !== void 0 ? _j : yagr.config.timeline, (_k = newConfig.series) !== null && _k !== void 0 ? _k : yagr.config.series, {\n            incremental: false,\n        });\n    }\n    if (newConfig.tooltip && isChangedKey('tooltip')) {\n        (_l = yagr.plugins.tooltip) === null || _l === void 0 ? void 0 : _l.updateOptions(newConfig.tooltip);\n    }\n    (_m = yagr.plugins.tooltip) === null || _m === void 0 ? void 0 : _m.reset();\n    batch.reopt = true;\n    yagr.config = { ...yagr.config, ...newConfig };\n}\nfunction setSeriesImpl(batch, timelineOrSeriesOrId, maybeSeries, options = {\n    incremental: true,\n    splice: false,\n}) {\n    var _a;\n    let timeline = [], series = [], updateId = null, useIncremental = false, shouldRecalcData = false, useFullyRedraw;\n    if (['number', 'string'].includes(typeof timelineOrSeriesOrId)) {\n        useIncremental = false;\n        useFullyRedraw = false;\n        series = [maybeSeries];\n        updateId = timelineOrSeriesOrId;\n    }\n    else if (typeof timelineOrSeriesOrId[0] === 'number') {\n        timeline = timelineOrSeriesOrId;\n        series = maybeSeries;\n        useIncremental = Boolean(options.incremental);\n        useFullyRedraw = !options.incremental;\n    }\n    else {\n        series = timelineOrSeriesOrId;\n        useFullyRedraw = true;\n    }\n    if (this.isEmpty && series.some(({ data }) => data === null || data === void 0 ? void 0 : data.length)) {\n        batch.reinit = true;\n        return;\n    }\n    if (useFullyRedraw === false) {\n        let shouldUpdateCursror = false;\n        useIncremental && this.config.timeline.push(...timeline);\n        series.forEach((serie) => {\n            var _a, _b;\n            let matched = typeof updateId === 'number'\n                ? this.config.series[0]\n                : this.config.series.find(({ id }) => id === serie.id || id === updateId);\n            let id = matched === null || matched === void 0 ? void 0 : matched.id;\n            if (typeof updateId === 'number' && this.state.y2uIdx[updateId]) {\n                matched = this.config.series[updateId];\n                id = updateId;\n            }\n            if (matched && id) {\n                const { data, ...rest } = serie;\n                const seriesIdx = this.state.y2uIdx[id];\n                /** @TODO fixme (see Annotations.1) */\n                if (matched.type === 'dots' || serie.type === 'dots' || ((_a = this.config.chart.series) === null || _a === void 0 ? void 0 : _a.type) === 'dots') {\n                    batch.reinit = true;\n                }\n                if (useIncremental) {\n                    matched.data = data ? matched.data.concat(data) : matched.data;\n                }\n                else if (data === null || data === void 0 ? void 0 : data.length) {\n                    matched.data = data;\n                    /**\n                     * We're reprocessing data on every series' data change,\n                     * cause we don't know is it required to process current line or not\n                     * Possible non clear pattern:\n                     *  - series may contain string values to process out with `interpolate` option\n                     *  - series may be in stack group\n                     * @TODO fixme when you got a good idea\n                     */\n                    shouldRecalcData = true;\n                }\n                const newSeries = (0, series_1.configureSeries)(this, Object.assign(matched, rest), seriesIdx);\n                const opts = this.options.series[seriesIdx];\n                const uOpts = this.uplot.series[seriesIdx];\n                if (uOpts.show !== newSeries.show) {\n                    batch.fns.push(() => {\n                        this.uplot.setSeries(seriesIdx, { show: newSeries.show });\n                    });\n                }\n                if (uOpts._focus === null ? true : uOpts._focus !== newSeries.focus) {\n                    batch.fns.push(() => {\n                        this.uplot.setSeries(seriesIdx, { focus: newSeries.focus });\n                    });\n                }\n                if (uOpts.color !== newSeries.color) {\n                    shouldUpdateCursror = true;\n                }\n                if (newSeries.scale && ((_b = this.config.scales[newSeries.scale]) === null || _b === void 0 ? void 0 : _b.stacking)) {\n                    shouldRecalcData = true;\n                }\n                (0, series_1.overrideSeriesInUpdate)(opts, newSeries);\n                (0, series_1.overrideSeriesInUpdate)(uOpts, newSeries);\n            }\n            else {\n                batch.fns.push(() => {\n                    const newSeries = (0, series_1.configureSeries)(this, serie, this.config.series.length);\n                    this.state.y2uIdx[newSeries.id] = this.uplot.series.length;\n                    this.uplot.addSeries(newSeries, this.config.series.length);\n                });\n                this.config.series.push(serie);\n            }\n        });\n        if (shouldUpdateCursror) {\n            batch.fns.push(() => {\n                var _a;\n                (_a = this.plugins.cursor) === null || _a === void 0 ? void 0 : _a.updatePoints();\n            });\n        }\n        if (options.splice) {\n            const sliceLength = series[0].data.length;\n            this.config.series.forEach((s) => {\n                s.data.splice(0, sliceLength);\n            });\n            this.config.timeline.splice(0, timeline.length);\n        }\n    }\n    else {\n        /** If we're adding new series or removing */\n        if (series.length !== this.config.series.length ||\n            series.some(({ id, type }) => {\n                /** @TODO fixme (see Annotations.1) */\n                return type === 'dots' || this.config.series.find((s) => s.id !== id);\n            }) ||\n            ((_a = this.config.chart.series) === null || _a === void 0 ? void 0 : _a.type) === 'dots') {\n            batch.reinit = true;\n        }\n        this.config.series = series;\n        this.config.timeline = timeline;\n        batch.fns.push(() => {\n            var _a;\n            series.forEach((s, idx) => {\n                const uSeries = this.getSeriesById(s.id);\n                if (!uSeries) {\n                    return;\n                }\n                (0, series_1.overrideSeriesInUpdate)(uSeries, (0, series_1.configureSeries)(this, s, idx));\n            });\n            (_a = this.plugins.cursor) === null || _a === void 0 ? void 0 : _a.updatePoints();\n        });\n        batch.reopt = true;\n        shouldRecalcData = true;\n    }\n    this._batch.fns.push(() => { var _a, _b; return (_b = (_a = this.plugins) === null || _a === void 0 ? void 0 : _a.tooltip) === null || _b === void 0 ? void 0 : _b.reset(); });\n    if (shouldRecalcData || timeline.length) {\n        batch.recalc = true;\n        batch.fns.push(() => {\n            this.uplot.setData(this.series);\n        });\n    }\n}\nclass DynamicUpdatesMixin {\n    /**\n     * @public\n     * @param locale string | Record<string, string>\n     * @description Set's locale of chart and redraws all locale-dependent elements.\n     */\n    setLocale(locale) {\n        this.batch((batch) => setLocaleImpl(this, batch, locale));\n    }\n    /**\n     * @public\n     * @param title YagrTitleConfig\n     * @description Set's title of chart and redraws all title-dependent elements.\n     */\n    setTitle(title) {\n        this.batch((batch) => {\n            this.config.title = title;\n            this.initTitle();\n            batch.redraw = [true, true];\n        });\n    }\n    /**\n     * @public\n     * @param themeValue YagrTheme\n     * @description Set's theme of chart and redraws all theme-dependent elements.\n     */\n    setTheme(themeValue) {\n        this.batch((batch) => setThemeImpl(this, themeValue, batch));\n    }\n    /**\n     * @public\n     * @param axes axes config\n     * @description Sets new axes config and redraws all axes.\n     */\n    setAxes(axes) {\n        this.batch((batch) => setAxesImpl(this, batch, axes));\n    }\n    setSeries(timelineOrSeriesOrId, maybeSeries, options = {\n        incremental: true,\n        splice: false,\n    }) {\n        this.batch((batch) => setSeriesImpl.call(this, batch, timelineOrSeriesOrId, maybeSeries, options));\n    }\n    /**\n     * @public\n     * @param lineId string | null\n     * @param focus boolean\n     * @description Sets focus on line with given id. If id is null, removes focus from all lines.\n     * @returns void\n     */\n    setFocus(lineId, focus) {\n        this.batch(() => setFocusImpl(this, lineId, focus));\n    }\n    /**\n     * @public\n     * @param lineId string | null\n     * @param show boolean\n     * @description Sets visibility of line with given id. If id is null, sets visibility of all lines.\n     */\n    setVisible(lineId, show, updateLegend = true) {\n        this.batch((batch) => setVisibleImpl(this, lineId, show, updateLegend, batch));\n    }\n    /**\n     * @public\n     * @param scales Record<string, Partial<ScaleConfi>>\n     * @description Sets new scales config and redraws.\n     */\n    setScales(scales) {\n        this.batch((batch) => setScalesImpl(this, scales, batch));\n    }\n    /**\n     * @public\n     * @experimental\n     * @param newConfig Partial<YagrConfig>\n     * @descriptino Sets new config and redraws.\n     */\n    setConfig(newConfig, fullUpdate = false) {\n        this.batch((batch) => setConfigImpl(this, batch, newConfig, fullUpdate));\n    }\n}\nexports.DynamicUpdatesMixin = DynamicUpdatesMixin;\n/**\n * Annotations:\n * 1. If we're operating with dots type then uPlot will be reinitialized\n *    cause it's not possible to re-render dot's markers without reinit\n *\n */\n","\"use strict\";\n/* eslint-disable complexity */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TransformSeriesMixin = void 0;\nconst defaults_1 = require(\"../defaults\");\nconst common_1 = require(\"../utils/common\");\nclass TransformSeriesMixin {\n    /**\n     * @internal\n     * @param this Yagr instance\n     * @description Transforms series data according to config\n     * @returns uPlot series data\n     */\n    transformSeries() {\n        const processingStartTime = performance.now();\n        const result = [];\n        const config = this.config;\n        const timeline = config.timeline;\n        let processing = config.processing || false;\n        let series = this.config.series.map(({ data }) => data);\n        if (processing && processing.interpolation) {\n            series = (0, common_1.preprocess)(series, timeline, processing);\n            processing = false;\n        }\n        const shouldMapNullValues = Boolean(processing && processing.nullValues);\n        const nullValues = (processing && processing.nullValues) || {};\n        /**\n         * Stacks are represented as:\n         * {\n         *    [scale]: {\n         *        [],  // stacking group idx 0 (default for all on scale),\n         *        [],  // stacking group idx 1\n         *    ]\n         * }\n         *\n         * All stacked points are accumulating inside of series' scale group\n         */\n        const stacks = {};\n        for (let sIdx = 0; sIdx < series.length; sIdx++) {\n            let dataLine = [];\n            const realSerieIdx = sIdx + 1;\n            const serie = series[sIdx];\n            const serieConfigIndex = this.options.series.length - realSerieIdx;\n            const serieOptions = this.options.series[serieConfigIndex];\n            const scale = serieOptions.scale || defaults_1.DEFAULT_Y_SCALE;\n            const scaleConfig = this.config.scales[scale] || {};\n            const isStacking = scaleConfig.stacking;\n            const sGroup = serieOptions.stackGroup || 0;\n            let empty = true;\n            if (isStacking && !stacks[scale]) {\n                this.options.focus = this.options.focus || { alpha: 1.1 };\n                this.options.focus.alpha = 1.1;\n                stacks[scale] = [];\n            }\n            if (isStacking && !stacks[scale][sGroup]) {\n                stacks[scale][sGroup] = new Array(timeline.length).fill(0);\n            }\n            serieOptions.count = 0;\n            for (let idx = 0; idx < serie.length; idx++) {\n                let value = serie[idx];\n                if (shouldMapNullValues && nullValues[String(value)]) {\n                    value = null;\n                }\n                if (serieOptions.transform) {\n                    serieOptions._transformed = true;\n                    value = serieOptions.transform(value, series, idx);\n                }\n                if (scaleConfig.transform) {\n                    serieOptions._transformed = true;\n                    value = scaleConfig.transform(value, series, idx);\n                }\n                if (value === null) {\n                    if (serieOptions.type === 'line' || serieOptions.type === 'dots') {\n                        dataLine.push(null);\n                        continue;\n                    }\n                    else {\n                        value = 0;\n                    }\n                }\n                empty = false;\n                if (scaleConfig.normalize) {\n                    const sum = (0, common_1.getSumByIdx)(this.options.series, idx, scale);\n                    value = sum && (value / sum) * (scaleConfig.normalizeBase || 100);\n                    serieOptions.normalizedData = serieOptions.normalizedData || [];\n                    serieOptions.normalizedData[idx] = value;\n                }\n                if (scaleConfig.stacking) {\n                    if (serieOptions.show === false) {\n                        value = 0;\n                    }\n                    value = stacks[scale][sGroup][idx] += value;\n                }\n                if (scaleConfig.type === 'logarithmic' && value === 0) {\n                    value = 1;\n                }\n                serieOptions.sum = (serieOptions.sum || 0) + (value || 0);\n                const originalValue = serieOptions.$c[idx];\n                if (typeof originalValue === 'number') {\n                    serieOptions.count += 1;\n                }\n                dataLine.push(value);\n            }\n            serieOptions.avg = (serieOptions.sum || 0) / serieOptions.count;\n            serieOptions.empty = empty;\n            if (serieOptions.postProcess) {\n                dataLine = serieOptions.postProcess(dataLine, sIdx, this);\n            }\n            result.unshift(dataLine);\n        }\n        result.unshift(this.config.timeline);\n        this.series = result;\n        this.execHooks('processed', {\n            chart: this,\n            meta: {\n                processTime: performance.now() - processingStartTime,\n            },\n        });\n        return this.series;\n    }\n}\nexports.TransformSeriesMixin = TransformSeriesMixin;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cursorPoint = void 0;\nconst defaults_1 = require(\"../../defaults\");\nconst colors_1 = __importDefault(require(\"../../utils/colors\"));\nconst common_1 = require(\"../../utils/common\");\nconst MAX_CURSORS = 50;\nfunction paintCursorPoint(series, pt, span) {\n    span || (span = pt.querySelector('span'));\n    if (!span) {\n        return;\n    }\n    pt.style.background = `${series.color}`;\n    span.style.background = series.color || defaults_1.SERIE_COLOR;\n    const colorRgba = colors_1.default.parseRgba(series.color) || [256, 256, 256, 0];\n    pt.style.boxShadow = `0px 0px 0px 1px rgba(${colorRgba[0]}, ${colorRgba[1]}, ${colorRgba[2]}, 0.5)`;\n}\n/*\n * Draws HTML points for cursor to transform\n */\nfunction cursorPoint(u, seriesIndex) {\n    const serie = u.series[seriesIndex];\n    const span = (0, common_1.html)('span');\n    const pt = (0, common_1.html)('div', {\n        class: 'yagr-point',\n        'data-idx': String(seriesIndex),\n    }, serie.empty ? undefined : span);\n    // @TODO possibly not to render at all. Requires PR into uPlot\n    if (serie.empty) {\n        pt.style.display = 'none';\n        return pt;\n    }\n    paintCursorPoint(serie, pt, span);\n    return pt;\n}\nexports.cursorPoint = cursorPoint;\nfunction getPointsByIdx(over, idx) {\n    return idx === undefined\n        ? Array.from(over.querySelectorAll('.yagr-point'))\n        : [over.querySelector(`.yagr-point[data-idx=\"${idx}\"]`)];\n}\n/*\n * Cursor plugin responsible for drawing cursor points and crosshairs,\n * and for syncing cursors.\n */\nfunction CursorPlugin(yagr, opts) {\n    var _a, _b, _c;\n    const config = yagr.config;\n    const processing = config.processing || {};\n    const pInterpolation = Boolean(processing.interpolation);\n    const iValue = (_a = processing.interpolation) === null || _a === void 0 ? void 0 : _a.value;\n    const snapToNulls = opts.snapToValues === false ? false : opts.snapToValues || 'closest';\n    const snapToInterpolated = pInterpolation ? (_c = (_b = processing.interpolation) === null || _b === void 0 ? void 0 : _b.snapToValues) !== null && _c !== void 0 ? _c : 'closest' : false;\n    let mem = {};\n    /*\n     * This function finds non null value index and returns\n     * it's value for drawIdx hook for cursor\n     */\n    const snapOnValues = (self, seriesIdx, hoveredIdx) => {\n        const series = self.series[seriesIdx];\n        if (series.scale === defaults_1.DEFAULT_X_SCALE) {\n            return hoveredIdx;\n        }\n        const seriesData = series.$c || self.data[seriesIdx];\n        const value = seriesData[hoveredIdx];\n        if (pInterpolation && value === iValue) {\n            return (0, common_1.findDataIdx)(seriesData, series, hoveredIdx, snapToInterpolated, iValue);\n        }\n        else if (value === null) {\n            return (0, common_1.findDataIdx)(seriesData, series, hoveredIdx, snapToNulls, null);\n        }\n        return hoveredIdx;\n    };\n    return {\n        showPoints: (idx) => {\n            const over = yagr.uplot.over;\n            if (!over) {\n                return;\n            }\n            const points = getPointsByIdx(over, idx);\n            points.forEach((pt) => {\n                pt.style.visibility = 'visible';\n            });\n        },\n        hidePoints: (idx) => {\n            const over = yagr.uplot.over;\n            if (!over) {\n                return;\n            }\n            const points = getPointsByIdx(over, idx);\n            points.forEach((pt) => {\n                pt.style.visibility = 'hidden';\n            });\n        },\n        pin: (pinState) => {\n            var _a;\n            const over = yagr.root.querySelector('.u-over');\n            if (!over) {\n                return;\n            }\n            if (pinState) {\n                const pointsHolder = document.createElement('div');\n                pointsHolder.classList.add('yagr-points-holder');\n                over.querySelectorAll('.yagr-point').forEach((elem) => {\n                    const newElem = elem.cloneNode(true);\n                    pointsHolder.appendChild(newElem);\n                    const idx = newElem.dataset['idx'];\n                    if (idx) {\n                        mem[idx] = newElem;\n                    }\n                });\n                over.appendChild(pointsHolder);\n            }\n            else {\n                mem = {};\n                (_a = over.querySelector('.yagr-points-holder')) === null || _a === void 0 ? void 0 : _a.remove();\n            }\n        },\n        updatePoints: () => {\n            yagr.root.querySelectorAll('.yagr-point').forEach((pt) => {\n                const idx = Number(pt.dataset['idx']);\n                if (isNaN(idx)) {\n                    return;\n                }\n                const series = yagr.uplot.series[idx];\n                paintCursorPoint(series, pt);\n            });\n        },\n        focus: (serieIdx, focus) => {\n            Object.entries(mem).forEach(([idx, item]) => {\n                if (serieIdx === null) {\n                    item.style.display = focus ? 'block' : 'none';\n                    return;\n                }\n                item.style.display = idx === String(serieIdx) && focus ? 'block' : 'none';\n            });\n        },\n        uplot: {\n            opts: (_, uplotOptions) => {\n                uplotOptions.cursor = uplotOptions.cursor || {};\n                const emptyLines = uplotOptions.series.filter((s) => s.empty).length;\n                const totalLines = uplotOptions.series.length - 1;\n                uplotOptions.cursor.points = {\n                    show: totalLines - emptyLines <= MAX_CURSORS ? cursorPoint : false,\n                    size: (u, seriesIdx) => {\n                        const serie = u.series[seriesIdx];\n                        return ((serie.cursorOptions ? serie.cursorOptions.markersSize : opts === null || opts === void 0 ? void 0 : opts.markersSize) ||\n                            defaults_1.MARKER_DIAMETER);\n                    },\n                };\n                uplotOptions.cursor.dataIdx = snapOnValues;\n            },\n            hooks: {\n                ...(opts.hideMarkers && {\n                    setCursor: (u) => {\n                        var _a, _b;\n                        const idx = u.cursor.idx;\n                        if ((0, common_1.isNil)(idx)) {\n                            return;\n                        }\n                        for (let i = 1; i < u.series.length; i++) {\n                            const seriesValue = u.series[i].$c[idx];\n                            if (opts.hideMarkers(seriesValue, i)) {\n                                (_a = yagr.plugins.cursor) === null || _a === void 0 ? void 0 : _a.hidePoints(i);\n                            }\n                            else {\n                                (_b = yagr.plugins.cursor) === null || _b === void 0 ? void 0 : _b.showPoints(i);\n                            }\n                        }\n                    },\n                }),\n                init: (u) => {\n                    const cX = u.root.querySelector('.u-cursor-x');\n                    if (cX) {\n                        if (opts.x && opts.x.visible === false) {\n                            cX.style.display = 'none';\n                        }\n                        cX.style.borderRight = (opts.x && opts.x.style) || defaults_1.CURSOR_STYLE;\n                    }\n                    const cY = u.root.querySelector('.u-cursor-y');\n                    if (cY) {\n                        if (opts.y && opts.y.visible !== false) {\n                            cY.style.borderBottom = opts.y.style || defaults_1.CURSOR_STYLE;\n                        }\n                        else {\n                            cY.style.display = 'none';\n                        }\n                    }\n                },\n            },\n        },\n    };\n}\nexports.default = CursorPlugin;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasOneVisibleLine = void 0;\nconst defaults_1 = require(\"../../defaults\");\nconst common_1 = require(\"../../utils/common\");\nconst events_1 = require(\"../../utils/events\");\nconst ALL_SERIES_IDX = 'null';\nconst PAGINATION_BUTTON_HEIGHT = 18;\nconst TOTAL_LEGEND_VERTICAL_PADDING_BOTTOM = 20;\nconst TOTAL_LEGEND_VERTICAL_PADDING_TOP = 48;\nconst DEFAULT_FONT_SIZE = 12;\nconst DEFAULT_LEGEND_PLACE_RATIO = 0.3;\nconst hasOneVisibleLine = (series) => {\n    return series.some(({ show, id }) => id !== defaults_1.DEFAULT_X_SERIE_NAME && show);\n};\nexports.hasOneVisibleLine = hasOneVisibleLine;\nconst getPrependingTitle = (i18n, series) => {\n    return series.length > 3 && i18n((0, exports.hasOneVisibleLine)(series) ? 'hide-all' : 'show-all');\n};\nconst getPrependingTitleId = (series) => {\n    return (series.length > 3 && ALL_SERIES_IDX) || undefined;\n};\nclass LegendPlugin {\n    constructor() {\n        this.pagesCount = 0;\n        this.state = {\n            page: 0,\n            pages: 1,\n            pageSize: 0,\n            rowsPerPage: 1,\n            paginated: false,\n            requiredSpace: 0,\n            totalSpace: 0,\n        };\n        this.itemsHtml = '';\n        this.preInit = (yagr, options, uplotOptions) => {\n            this.yagr = yagr;\n            this.options = Object.assign({\n                show: false,\n                position: 'bottom',\n                fontSize: DEFAULT_FONT_SIZE,\n                maxLegendSpace: DEFAULT_LEGEND_PLACE_RATIO,\n                className: undefined,\n                behaviour: 'basic',\n            }, options || {});\n            this.calc(uplotOptions);\n        };\n        this.init = (u) => {\n            var _a;\n            if (!this.options.show) {\n                return;\n            }\n            this.uplot = u;\n            /** Removing native uPlot legend */\n            (_a = u.root.querySelector('.u-legend')) === null || _a === void 0 ? void 0 : _a.remove();\n            this.render();\n        };\n        this.update = () => {\n            const series = this.yagr.root.querySelectorAll('[data-serie-id]');\n            series.forEach((serieNode) => {\n                var _a, _b;\n                const serieId = serieNode.getAttribute('data-serie-id');\n                if (!serieId || serieId === ALL_SERIES_IDX) {\n                    return;\n                }\n                const serieVisible = (_b = (_a = this.uplot) === null || _a === void 0 ? void 0 : _a.series[this.yagr.state.y2uIdx[serieId]]) === null || _b === void 0 ? void 0 : _b.show;\n                serieNode.classList[serieVisible ? 'remove' : 'add']('yagr-legend__item_hidden');\n            });\n        };\n        this.measureLegend = (body) => {\n            const rootEl = this.yagr.root;\n            const pseudo = (0, common_1.html)('div', {\n                class: 'yagr-legend',\n                style: { visibility: 'hidden' },\n            }, body);\n            rootEl.appendChild(pseudo);\n            const items = pseudo.childNodes[0];\n            const result = items.getBoundingClientRect();\n            pseudo.remove();\n            return result;\n        };\n        this.nextPage = () => {\n            const { state } = this;\n            this.state.page += 1;\n            if (this.items) {\n                this.items.style.transform = `translate(0, ${-1 * state.page * state.pageSize}px)`;\n                this.renderPagination();\n            }\n        };\n        this.prevPage = () => {\n            const { state } = this;\n            this.state.page -= 1;\n            if (this.items) {\n                this.items.style.transform = `translate(0, ${-1 * state.page * state.pageSize}px)`;\n                this.renderPagination();\n            }\n        };\n    }\n    redraw() {\n        if (!this.options.show) {\n            return;\n        }\n        this.render();\n    }\n    destroy() {\n        var _a;\n        if (this._onDestroy) {\n            this._onDestroy();\n        }\n        (_a = this.legendEl) === null || _a === void 0 ? void 0 : _a.remove();\n    }\n    applyHandlers() {\n        const { yagr, uplot: u } = this;\n        if (!u) {\n            return () => { };\n        }\n        const series = yagr.root.querySelectorAll('[data-serie-id]');\n        const unsubsribe = [];\n        const onSerieClickBasic = (serieNode) => () => {\n            const serieId = serieNode.getAttribute('data-serie-id');\n            const seriesToToggle = [];\n            if (serieId === ALL_SERIES_IDX) {\n                const nextToggleState = !(0, exports.hasOneVisibleLine)(u.series);\n                for (let idx = 1; idx < u.series.length; idx++) {\n                    seriesToToggle.push([u.series[idx], nextToggleState]);\n                }\n            }\n            else {\n                const serie = u.series.find(({ id }) => id === serieId);\n                if (!serie) {\n                    return;\n                }\n                seriesToToggle.push([serie, !serie.show]);\n            }\n            seriesToToggle.forEach(([serie, nextState]) => {\n                if (serie.show === nextState) {\n                    return;\n                }\n                const node = yagr.root.querySelector(`[data-serie-id=\"${serie.id}\"]`);\n                yagr.setVisible(serie.id, nextState, false);\n                node === null || node === void 0 ? void 0 : node.classList[nextState ? 'remove' : 'add']('yagr-legend__item_hidden');\n            });\n            const allSeriesItem = yagr.root.querySelector('.yagr-legend__all-series');\n            if (allSeriesItem) {\n                const title = getPrependingTitle(this.yagr.utils.i18n, u.series);\n                allSeriesItem.innerHTML = title || '';\n            }\n        };\n        const onSerieClickExtended = (serieNode) => {\n            const changeVisibility = (id, visibility) => {\n                const node = yagr.root.querySelector(`[data-serie-id=\"${id}\"]`);\n                yagr.setVisible(id, visibility, false);\n                node === null || node === void 0 ? void 0 : node.classList[visibility ? 'remove' : 'add']('yagr-legend__item_hidden');\n            };\n            const toggleSerie = (serie) => {\n                changeVisibility(serie.id, !serie.show);\n            };\n            const selectSerie = (serie) => {\n                this.state.startSerieRange = serie;\n                const otherSeries = u.series.filter((s) => s.id !== serie.id);\n                const otherVisibility = !(0, exports.hasOneVisibleLine)(otherSeries) && serie.show !== false;\n                u.series.forEach((s) => {\n                    const visibility = serie.id === s.id ? true : otherVisibility;\n                    changeVisibility(s.id, visibility);\n                });\n            };\n            const selectRange = (serie) => {\n                // If startSerieRange is undefined then startSerieRange = first valid legend element\n                if (!this.state.startSerieRange) {\n                    this.state.startSerieRange = u.series[1];\n                }\n                const range = [];\n                u.series.forEach((s, i) => {\n                    var _a;\n                    if (s.id === serie.id) {\n                        range.push(i);\n                    }\n                    // There is no 'else' because exist case when startSerieRange and target serie are same elements\n                    if (s.id === ((_a = this.state.startSerieRange) === null || _a === void 0 ? void 0 : _a.id)) {\n                        range.push(i);\n                    }\n                });\n                u.series.forEach((s, i) => {\n                    const visibility = i >= range[0] && i <= range[1];\n                    changeVisibility(s.id, visibility);\n                });\n            };\n            return (e) => {\n                const serieId = serieNode.getAttribute('data-serie-id');\n                const serie = u.series.find(({ id }) => id === serieId);\n                if (!serie) {\n                    return;\n                }\n                e.preventDefault();\n                if (e.ctrlKey || e.metaKey) {\n                    toggleSerie(serie);\n                }\n                else if (e.shiftKey) {\n                    selectRange(serie);\n                }\n                else {\n                    selectSerie(serie);\n                }\n            };\n        };\n        const onSerieClick = {\n            basic: onSerieClickBasic,\n            extended: onSerieClickExtended,\n        };\n        const onSerieMouseEnter = (serieNode) => () => {\n            const serieId = serieNode.getAttribute('data-serie-id');\n            if (serieNode.classList.contains('yagr-legend__item_hidden') || serieId === ALL_SERIES_IDX) {\n                return;\n            }\n            const targetSerie = this.yagr.uplot.series.find(({ id }) => id === serieId);\n            if (targetSerie) {\n                yagr.setFocus(targetSerie.id, true);\n            }\n        };\n        const onSerieMouseLeave = () => {\n            yagr.setFocus(null, true);\n        };\n        series.forEach((serieNode) => {\n            const onClick = onSerieClick[this.options.behaviour || 'basic'](serieNode);\n            const onFocus = onSerieMouseEnter(serieNode);\n            serieNode.addEventListener('click', onClick);\n            serieNode.addEventListener('mouseenter', onFocus);\n            serieNode.addEventListener('mouseleave', onSerieMouseLeave);\n            serieNode.addEventListener('mousedown', events_1.preventMouseEvents);\n            unsubsribe.push(() => {\n                serieNode.removeEventListener('click', onClick);\n                serieNode.removeEventListener('mouseenter', onFocus);\n                serieNode.removeEventListener('mouseleave', onSerieMouseLeave);\n                serieNode.removeEventListener('mousedown', events_1.preventMouseEvents);\n            });\n        });\n        const destroy = () => unsubsribe.forEach((fn) => fn());\n        this._onDestroy = destroy;\n        return destroy;\n    }\n    render() {\n        var _a, _b;\n        let reRender = false;\n        const { uplot: u, options } = this;\n        if (!u) {\n            return;\n        }\n        let legendEl = this.yagr.root.querySelector('.yagr-legend');\n        if (legendEl) {\n            reRender = true;\n        }\n        else {\n            legendEl = (0, common_1.html)('div', {\n                class: `yagr-legend yagr-legend__${this.options.position} ${(options === null || options === void 0 ? void 0 : options.className) || ''}`,\n            });\n        }\n        if (!legendEl) {\n            return;\n        }\n        if (!reRender) {\n            if (options.position === 'top') {\n                u.root.before(legendEl);\n            }\n            else {\n                (_a = u.root) === null || _a === void 0 ? void 0 : _a.after(legendEl);\n            }\n        }\n        this.legendEl = legendEl;\n        if (!this.itemsHtml || reRender) {\n            this.calc(this.yagr.options);\n        }\n        legendEl.innerHTML = `<div class=\"yagr-legend__container\" style=\"height: ${this.state.requiredSpace}px\">${this.itemsHtml}</div>`;\n        this.items = legendEl.querySelector('.yagr-legend__items');\n        this.container = legendEl.querySelector('.yagr-legend__container');\n        if (this.state.paginated) {\n            const pagination = this.renderPagination();\n            (_b = this.container) === null || _b === void 0 ? void 0 : _b.after(pagination);\n        }\n        else {\n            this.items.style.justifyContent = 'center';\n        }\n        this.applyHandlers();\n    }\n    renderPagination() {\n        const { state } = this;\n        let pagination = this.yagr.root.querySelector('.yagr-legend__pagination');\n        if (pagination) {\n            const nextPage = pagination.querySelector('.yagr-legend__icon-down');\n            const prevPage = pagination.querySelector('.yagr-legend__icon-up');\n            nextPage.removeEventListener('click', this.nextPage);\n            prevPage.removeEventListener('click', this.prevPage);\n        }\n        else {\n            pagination = (0, common_1.html)('div', {\n                class: 'yagr-legend__pagination',\n            });\n        }\n        const upClassName = state.page === 0 ? 'yagr-legend__icon-up_disabled' : '';\n        const downClassName = state.page === state.pages - 1 ? 'yagr-legend__icon-down_disabled' : '';\n        pagination.innerHTML = `<span class=\"yagr-legend__icon-up ${upClassName}\"></span>\n<span class=\"yagr-legend__pagination-text\">${state.page + 1}/${state.pages}</span>\n<span class=\"yagr-legend__icon-down ${downClassName}\"></span>`;\n        const nextPage = pagination.querySelector('.yagr-legend__icon-down');\n        const prevPage = pagination.querySelector('.yagr-legend__icon-up');\n        if (!downClassName) {\n            nextPage.addEventListener('click', this.nextPage);\n        }\n        if (!upClassName) {\n            prevPage.addEventListener('click', this.prevPage);\n        }\n        return pagination;\n    }\n    createIconLineElement(serie) {\n        const iconLineElement = (0, common_1.html)('span', {\n            class: `yagr-legend__icon yagr-legend__icon_${serie.type}`,\n            style: { 'background-color': serie.color },\n        });\n        return iconLineElement;\n    }\n    createSerieNameElement(serie) {\n        const serieNameElement = (0, common_1.html)('span');\n        serieNameElement.innerText = serie.name || 'unnamed';\n        return serieNameElement;\n    }\n    renderItems(uplotOptions) {\n        const title = getPrependingTitle(this.yagr.utils.i18n, uplotOptions.series);\n        const titleId = this.options.behaviour !== 'extended' && getPrependingTitleId(uplotOptions.series);\n        const series = titleId ? [titleId] : [];\n        for (let i = 1; i < uplotOptions.series.length; i++) {\n            series.push(uplotOptions.series[i]);\n        }\n        const content = series\n            .map((serie) => {\n            let serieContent;\n            let sId;\n            let additionalCn = ' ';\n            if (serie === ALL_SERIES_IDX) {\n                serieContent = title;\n                sId = titleId;\n                additionalCn = ' yagr-legend__all-series ';\n            }\n            else {\n                sId = serie.id;\n                const icon = this.createIconLineElement(serie);\n                const name = this.createSerieNameElement(serie);\n                serieContent = `${icon.outerHTML}${name.outerHTML}`;\n            }\n            const visible = typeof serie === 'string' ? true : serie.show !== false;\n            return `<div class=\"yagr-legend__item${additionalCn}${visible ? '' : 'yagr-legend__item_hidden'}\" data-serie-id=\"${sId}\">${serieContent}</div>`;\n        })\n            .join('');\n        return `<div class=\"yagr-legend__items\">${content}</div>`;\n    }\n    calc(uplotOptions) {\n        if (!this.options.show) {\n            return;\n        }\n        const chartHeight = uplotOptions.height - this.VERTICAL_PADDING;\n        const html = this.renderItems(uplotOptions);\n        const { height: requiredHeight } = this.measureLegend(html);\n        const rowHeight = this.options.fontSize + 2;\n        const maxPossiblePlace = chartHeight * this.options.maxLegendSpace;\n        const rowsPerPage = Math.floor(maxPossiblePlace / rowHeight);\n        const itemsRowsPerPage = rowsPerPage - 1;\n        const itemsPageSize = Math.min(itemsRowsPerPage * rowHeight, maxPossiblePlace);\n        const paginatedPageSize = Math.min(rowsPerPage * rowHeight, maxPossiblePlace);\n        const paginated = requiredHeight > itemsPageSize && itemsPageSize > 0;\n        const requiredSpace = Math.min(paginated ? paginatedPageSize : itemsPageSize, requiredHeight);\n        const pages = Math.ceil(requiredHeight / itemsPageSize);\n        const additionalSpace = paginated ? this.VERTICAL_PADDING + PAGINATION_BUTTON_HEIGHT : this.VERTICAL_PADDING;\n        this.state.requiredSpace = requiredSpace;\n        this.state.totalSpace = requiredSpace + additionalSpace;\n        this.state.paginated = paginated;\n        this.state.page = this.state.page || 0;\n        this.state.pages = pages;\n        this.state.pageSize = itemsPageSize;\n        this.state.rowsPerPage = rowsPerPage;\n        this.itemsHtml = html;\n    }\n    get VERTICAL_PADDING() {\n        return this.options.position === 'bottom'\n            ? TOTAL_LEGEND_VERTICAL_PADDING_BOTTOM\n            : TOTAL_LEGEND_VERTICAL_PADDING_TOP;\n    }\n}\nexports.default = LegendPlugin;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.drawMarkersIfRequired = exports.renderCircle = void 0;\nconst defaults_1 = require(\"../../defaults\");\nconst common_1 = require(\"../..//utils/common\");\nconst renderCircle = (u, x, y, r, s, color, strokeColor, yScale) => {\n    const { ctx } = u;\n    const cx = Math.round(u.valToPos(x, defaults_1.DEFAULT_X_SCALE, true));\n    const cy = Math.round(u.valToPos(y, yScale || defaults_1.DEFAULT_Y_SCALE, true));\n    ctx.beginPath();\n    ctx.arc(cx, cy, r * 2, 0, 2 * Math.PI);\n    ctx.fillStyle = color;\n    if (s) {\n        const lineWidth = ctx.lineWidth;\n        const strokeStyle = ctx.strokeStyle;\n        ctx.lineWidth = s;\n        ctx.strokeStyle = strokeColor;\n        ctx.stroke();\n        ctx.lineWidth = lineWidth;\n        ctx.strokeStyle = strokeStyle;\n    }\n    ctx.fill();\n    ctx.closePath();\n};\nexports.renderCircle = renderCircle;\nfunction drawMarkersIfRequired(u, i, i0, i1) {\n    const { color, scale, spanGaps, count, pointsSize } = u.series[i];\n    if (spanGaps && count > 1) {\n        return false;\n    }\n    let j = i0;\n    let prev;\n    while (j <= i1) {\n        const val = u.data[i][j];\n        if (val === null) {\n            prev = val;\n            j++;\n            continue;\n        }\n        const nextIdx = j + 1;\n        const next = u.data[i][nextIdx];\n        if ((0, common_1.isNil)(prev) && (0, common_1.isNil)(next)) {\n            (0, exports.renderCircle)(u, u.data[0][j], val, pointsSize !== null && pointsSize !== void 0 ? pointsSize : 2, 0, color, color, scale || defaults_1.DEFAULT_Y_SCALE);\n        }\n        prev = val;\n        j++;\n    }\n    return undefined;\n}\nexports.drawMarkersIfRequired = drawMarkersIfRequired;\n/*\n * This plugin configures points markers\n */\nfunction YagrMarkersPlugin(yagr, config) {\n    var _a;\n    const { size = defaults_1.DEFAULT_POINT_SIZE, strokeWidth = 2, strokeColor = '#ffffff', show } = config.markers;\n    const chartSeriesOptions = (_a = config.chart) === null || _a === void 0 ? void 0 : _a.series;\n    const defaultDotsSize = (chartSeriesOptions === null || chartSeriesOptions === void 0 ? void 0 : chartSeriesOptions.pointsSize) || defaults_1.DEFAULT_POINT_SIZE;\n    function drawCircles(u, i, i0, i1) {\n        const { scale, _focus, color, getFocusedColor, type } = u.series[i];\n        let j = i0;\n        // eslint-disable-next-line no-nested-ternary\n        const pointSize = type === 'dots' ? (show ? size : defaultDotsSize) : size;\n        while (j <= i1) {\n            const val = u.data[i][j];\n            if (val !== null) {\n                (0, exports.renderCircle)(u, u.data[0][j], val, pointSize, strokeWidth, (_focus || _focus === null ? color : getFocusedColor(yagr, i)) || color, strokeColor, scale || defaults_1.DEFAULT_Y_SCALE);\n            }\n            j++;\n        }\n        return undefined;\n    }\n    const markSeries = (idx, s) => {\n        if (idx === 0 || idx === null) {\n            return;\n        }\n        if (s.type === 'dots' || config.markers.show) {\n            s.points = s.points || {};\n            s.points.show = drawCircles;\n        }\n    };\n    return {\n        opts: (_, opts) => {\n            if (!(config.markers.show || opts.series.some((s) => s.type === 'dots'))) {\n                return;\n            }\n            opts.series.forEach((s, i) => markSeries(i, s));\n        },\n        hooks: {\n            addSeries: (uplot, seriesIdx) => {\n                const series = uplot.series[seriesIdx];\n                markSeries(seriesIdx, series);\n            },\n            setSeries: (_, idx, series) => {\n                markSeries(idx, series);\n            },\n        },\n    };\n}\nexports.default = YagrMarkersPlugin;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst defaults_1 = require(\"../../defaults\");\nconst types_1 = require(\"../../utils/types\");\nconst common_1 = require(\"../../utils/common\");\nconst MAX_X_SCALE_LINE_OFFSET = 0;\nconst DRAW_MAP = {\n    [types_1.DrawOrderKey.Series]: 0,\n    [types_1.DrawOrderKey.Axes]: 1,\n    plotLines: 2,\n};\nfunction hasPlotLine(list, p) {\n    return list.some((pl) => {\n        return (0, common_1.deepIsEqual)(pl, p);\n    });\n}\nconst HOOKS_MAP = {\n    '012': 'draw',\n    '102': 'draw',\n    '201': 'drawClear',\n    '210': 'drawClear',\n    '120': 'drawAxes',\n    '021': 'drawSeries',\n};\n/*\n * Plugin renders custom lines and bands on chart based on axis config.\n * Axis should be bound to scale.\n */\nfunction plotLinesPlugin(options) {\n    let plotLines = [];\n    return function (yagr) {\n        var _a;\n        const drawOrder = (_a = yagr.config.chart.appearance) === null || _a === void 0 ? void 0 : _a.drawOrder;\n        const drawIndicies = (drawOrder ? drawOrder.map((key) => DRAW_MAP[key]) : [0, 1, 2]).join('');\n        const hook = HOOKS_MAP[drawIndicies] || 'drawClear';\n        function renderPlotLines(u) {\n            const { ctx } = u;\n            const { height, top, width, left } = u.bbox;\n            const timeline = u.data[0];\n            for (const plotLineConfig of plotLines) {\n                if (!plotLineConfig.scale) {\n                    continue;\n                }\n                if (options.render) {\n                    options.render(u, plotLineConfig);\n                    continue;\n                }\n                ctx.save();\n                ctx.fillStyle = yagr.utils.colors.parse(plotLineConfig.color);\n                const { scale, value } = plotLineConfig;\n                if (Array.isArray(value)) {\n                    /** This weird code should handles unexpected Inifinities in values */\n                    const [fromValue, toValue] = value.map((val) => {\n                        if (Math.abs(val) !== Infinity) {\n                            if (scale === defaults_1.DEFAULT_X_SCALE) {\n                                if (val < timeline[0]) {\n                                    return timeline[0];\n                                }\n                                if (val > timeline[timeline.length - 1]) {\n                                    return timeline[timeline.length - 1];\n                                }\n                            }\n                            else {\n                                const scaleCfg = u.scales[scale];\n                                if (scaleCfg.min !== undefined && val < scaleCfg.min) {\n                                    return scaleCfg.min;\n                                }\n                                if (scaleCfg.max !== undefined && val > scaleCfg.max) {\n                                    return scaleCfg.max;\n                                }\n                            }\n                            return val;\n                        }\n                        const pos = val > 0\n                            ? scale === defaults_1.DEFAULT_X_SCALE\n                                ? u.width\n                                : 0\n                            : scale === defaults_1.DEFAULT_X_SCALE\n                                ? 0\n                                : u.height;\n                        return u.posToVal(pos, scale);\n                    });\n                    const from = u.valToPos(fromValue, scale, true);\n                    const to = u.valToPos(toValue, scale, true);\n                    const accent = plotLineConfig.accent;\n                    if (scale === defaults_1.DEFAULT_X_SCALE) {\n                        ctx.fillRect(from, top, to - from, height);\n                        if (accent) {\n                            ctx.fillStyle = accent.color;\n                            ctx.fillRect(from, top - accent.space, to - from, accent.space);\n                        }\n                    }\n                    else {\n                        ctx.fillRect(left, from, width, to - from);\n                        if (accent) {\n                            ctx.fillStyle = accent.color;\n                            ctx.fillRect(width + left, from, accent.space, to - from);\n                        }\n                    }\n                }\n                else {\n                    const from = u.valToPos(value, scale, true);\n                    const pConf = plotLineConfig;\n                    ctx.beginPath();\n                    if (scale === defaults_1.DEFAULT_X_SCALE) {\n                        /** Workaround to ensure that plot line will not be drawn over axes */\n                        const last = u.data[0][u.data[0].length - 1];\n                        const lastValue = u.valToPos(last, scale, true);\n                        if (from - lastValue > MAX_X_SCALE_LINE_OFFSET) {\n                            continue;\n                        }\n                        ctx.moveTo(from, top);\n                        ctx.lineTo(from, height + top);\n                    }\n                    else {\n                        ctx.moveTo(left, from);\n                        ctx.lineTo(width + left, from);\n                    }\n                    ctx.lineWidth = pConf.width || defaults_1.DEFAULT_CANVAS_PIXEL_RATIO;\n                    ctx.strokeStyle = pConf.color || '#000';\n                    pConf.dash && ctx.setLineDash(pConf.dash);\n                    ctx.closePath();\n                    ctx.stroke();\n                }\n                ctx.restore();\n            }\n        }\n        const handler = hook === 'drawSeries'\n            ? (u, sIdx) => {\n                if (sIdx === u.series.length - 1) {\n                    renderPlotLines(u);\n                }\n            }\n            : renderPlotLines;\n        const plugin = {\n            get: () => plotLines,\n            clear: (scale) => {\n                plotLines = scale\n                    ? plotLines.filter((p) => {\n                        return p.scale !== scale;\n                    })\n                    : [];\n            },\n            remove: (plotLinesToRemove) => {\n                plotLines = plotLines.filter((p) => {\n                    return !hasPlotLine(plotLinesToRemove, p);\n                });\n            },\n            add: (additionalPlotLines, scale) => {\n                for (const p of additionalPlotLines) {\n                    plotLines.push(scale ? { scale, ...p } : p);\n                }\n            },\n            update: (newPlotLines, scale) => {\n                if (!newPlotLines || newPlotLines.length === 0) {\n                    plugin.clear(scale);\n                    return;\n                }\n                const additions = newPlotLines.filter((p) => {\n                    return !hasPlotLine(plotLines, p);\n                });\n                const removes = plotLines.filter((p) => {\n                    return !hasPlotLine(newPlotLines, p);\n                });\n                additions.length && plugin.add(additions, scale);\n                removes.length && plugin.remove(removes);\n            },\n            uplot: {\n                opts: () => {\n                    const config = yagr.config;\n                    plotLines = [];\n                    /** Collecting plot lines from config axes for plotLines plugin */\n                    Object.entries(config.axes).forEach(([scale, axisConfig]) => {\n                        if (axisConfig.plotLines) {\n                            axisConfig.plotLines.forEach((plotLine) => {\n                                plotLines.push({ ...plotLine, scale });\n                            });\n                        }\n                    });\n                },\n                hooks: {\n                    // @TODO Add feature to draw plot lines over series\n                    [hook]: handler,\n                },\n            },\n        };\n        return plugin;\n    };\n}\nexports.default = plotLinesPlugin;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst common_1 = require(\"../../utils/common\");\nconst NAMES = {\n    size: ['height', 'width'],\n    clientSize: ['clientHeight', 'clientWidth'],\n    offsetSize: ['offsetHeight', 'offsetWidth'],\n    maxSize: ['maxHeight', 'maxWidth'],\n    before: ['top', 'left'],\n    marginBefore: ['marginTop', 'marginLeft'],\n    after: ['bottom', 'right'],\n    marginAfter: ['marginBottom', 'marginRight'],\n    scrollOffset: ['pageYOffset', 'pageXOffset'],\n    offset: ['offsetY', 'offsetY'],\n    offsetOpt: ['yOffset', 'xOffset'],\n};\nfunction normalizeRect(rect) {\n    return {\n        top: rect.top,\n        bottom: rect.bottom,\n        left: rect.left,\n        right: rect.right,\n    };\n}\n// eslint-disable-next-line complexity\nfunction default_1(elem, initialAnchor, side = 'bottom', options = {}) {\n    let anchor;\n    if (initialAnchor instanceof Element || initialAnchor instanceof Range) {\n        anchor = normalizeRect(elem.getBoundingClientRect());\n    }\n    else {\n        anchor = initialAnchor;\n    }\n    const anchorRect = Object.assign({\n        top: anchor.bottom || 0,\n        bottom: anchor.top || 0,\n        left: anchor.right || 0,\n        right: anchor.left || 0,\n    }, anchor);\n    const boundRect = {\n        top: 0,\n        left: 0,\n        bottom: window.innerHeight,\n        right: window.innerWidth,\n    };\n    if (options.bound) {\n        if (options.bound instanceof Element || options.bound instanceof Range) {\n            options.bound = normalizeRect(options.bound.getBoundingClientRect());\n        }\n        Object.assign(boundRect, options.bound);\n    }\n    const elemStyle = getComputedStyle(elem);\n    const { primary, secondary } = Object.entries(NAMES).reduce((acc, [key, value]) => ({\n        primary: { ...acc.primary, [key]: value[side === 'top' || side === 'bottom' ? 0 : 1] },\n        secondary: { ...acc.secondary, [key]: value[side === 'top' || side === 'bottom' ? 1 : 0] },\n    }), { primary: {}, secondary: {} });\n    elem.style.position = 'absolute';\n    elem.style.maxWidth = '';\n    elem.style.maxHeight = '';\n    const offset = options[primary.offsetOpt] || 0;\n    // Constrain the maximum size of the popup along the secondary axis.\n    const secondaryMarginBefore = parseInt(elemStyle[secondary.marginBefore], 10);\n    const secondaryMarginAfter = parseInt(elemStyle[secondary.marginAfter], 10);\n    const secondaryMargin = secondaryMarginBefore + secondaryMarginAfter;\n    const secondaryMaxSize = boundRect[secondary.after] - boundRect[secondary.before] - secondaryMargin;\n    const styledSecondaryMaxSize = parseInt(elemStyle[secondary.maxSize], 10);\n    if (!styledSecondaryMaxSize || secondaryMaxSize < styledSecondaryMaxSize) {\n        elem.style[secondary.maxSize] = (0, common_1.px)(secondaryMaxSize);\n    }\n    // Calculate the available room on either side of the anchor element. If\n    // the size of the popup is more than is available on the given side, then we\n    // will switch to the side with more room.\n    const margin = parseInt(elemStyle[primary.marginBefore], 10) + parseInt(elemStyle[primary.marginAfter], 10);\n    const roomBefore = anchorRect[primary.before] - boundRect[primary.before] - margin;\n    const roomAfter = boundRect[primary.after] - anchorRect[primary.after] - margin - offset;\n    if ((side === primary.before && elem[primary.offsetSize] > roomBefore) ||\n        (side === primary.after && elem[primary.offsetSize] > roomAfter)) {\n        side = roomBefore > roomAfter ? primary.before : primary.after;\n    }\n    // If the size of the popup exceeds the room available on this side, then\n    // we will give the popup an explicit size so that it doesn't go off-screen.\n    const primaryMaxSize = side === primary.before ? roomBefore : roomAfter;\n    const styledPrimaryMaxSize = parseInt(elemStyle[primary.maxSize], 10);\n    if (!styledPrimaryMaxSize || primaryMaxSize < styledPrimaryMaxSize) {\n        elem.style[primary.maxSize] = (0, common_1.px)(primaryMaxSize);\n    }\n    // Set the position of the popup element along the primary axis using the\n    // anchor's bounding rect. If we are working in the context of position:\n    // absolute, then we will need to add the window's scroll position as well.\n    const scrollOffset = window[primary.scrollOffset];\n    const boundPrimaryPos = (pos) => {\n        return Math.max(boundRect[primary.before], Math.min(pos, boundRect[primary.after] - elem[primary.offsetSize] - margin));\n    };\n    const boundSecondaryPos = (pos) => {\n        return Math.max(boundRect[secondary.before], Math.min(pos, boundRect[secondary.after] - elem[secondary.offsetSize] - secondaryMargin));\n    };\n    if (side === primary.before) {\n        // top or left\n        elem.style[primary.before] =\n            scrollOffset +\n                boundPrimaryPos(anchorRect[primary.before] - elem[primary.offsetSize] - margin) -\n                offset +\n                'px';\n        elem.style[primary.after] = 'auto';\n    }\n    else {\n        // bottom or right\n        elem.style[primary.before] = (0, common_1.px)(scrollOffset + boundPrimaryPos(anchorRect[primary.after]) + offset);\n        elem.style[primary.after] = 'auto';\n    }\n    // Set the position of the popup element along the secondary axis.\n    const secondaryScrollOffset = window[secondary.scrollOffset];\n    elem.style[secondary.before] = (0, common_1.px)(secondaryScrollOffset + boundSecondaryPos(anchorRect[secondary.before] - secondaryMarginBefore));\n    elem.style[secondary.after] = 'auto';\n    elem.dataset.side = side;\n    return {\n        side,\n        anchorRect,\n        boundRect,\n    };\n}\nexports.default = default_1;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.renderTooltip = void 0;\nconst utils_1 = require(\"./utils\");\nfunction renderItems(rows, opts, scale) {\n    const rowsMax = rows.slice(0, (0, utils_1.getOptionValue)(opts.maxLines, scale));\n    return (rowsMax\n        .map(({ value, name = 'unnamed', color, active, transformed, seriesIdx }, i) => {\n        const val = `\n<span class=\"yagr-tooltip__val\">${value}</span>\n    ${typeof transformed === 'number' ? `<span class=\"yagr-tooltip__tf\">${transformed.toFixed(2)}</span>` : ''}\n`;\n        return `\n<div class=\"yagr-tooltip__item ${active ? '_active' : ''}\" data-series=\"${seriesIdx}\">\n    ${opts.showIndicies ? `<span class=\"yagr-tooltip__idx\">${rows.length - i}</span>` : ''}\n    <span class=\"yagr-tooltip__mark\" style=\"background-color: ${color}\"></span>${(0, utils_1.escapeHTML)(name)}&nbsp;&nbsp;${val}\n</div>`;\n    })\n        .join('') +\n        (rows.length > rowsMax.length\n            ? `<div class=\"yagr-tooltip__item _more\">+${rows.length - rowsMax.length}</div>`\n            : ''));\n}\nfunction renderTooltip(data) {\n    if (data.scales.length === 0) {\n        return data.yagr.utils.i18n('nodata');\n    }\n    const [allTitle, sectionTitle] = data.options.title\n        ? typeof data.options.title === 'string'\n            ? [data.options.title, false]\n            : ['', true]\n        : ['', false];\n    const sections = data.scales.map((x) => {\n        const sectionTitleBody = (0, utils_1.getOptionValue)(data.options.title, x.scale);\n        const scaleBody = data.scales.length > 1\n            ? data.options.scales\n                ? `${(0, utils_1.getOptionValue)(data.options.scales, x.scale) || ''}`\n                : `${data.yagr.utils.i18n('scale')}: ${x.scale}`\n            : '';\n        return `\n<div class=\"__section\" data-scale=${x.scale}>\n    ${sectionTitle && sectionTitleBody ? `<div class=\"_section_title\">${sectionTitleBody}</div>` : ''}\n    ${scaleBody ? `<div class=\"__section_scale\">${scaleBody}</div>` : ''}\n    <div class=\"__section_body\">${renderItems(x.rows, data.options, x.scale)}</div>\n    ${(0, utils_1.getOptionValue)(data.options.sum, x.scale)\n            ? `\n        <div class=\"__section_sum\">\n            ${data.yagr.utils.i18n('sum')}: ${x.sum}\n        </div>\n    `\n            : ''}\n</div>`;\n    });\n    return `${allTitle ? `<div class=\"__title\">${allTitle}</div>` : ''}${sections.join('')}`;\n}\nexports.renderTooltip = renderTooltip;\n","\"use strict\";\n/* eslint-disable complexity, no-nested-ternary */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst placement_1 = __importDefault(require(\"./placement\"));\nconst defaults_1 = require(\"../../defaults\");\nconst common_1 = require(\"../../utils/common\");\nconst render_1 = require(\"./render\");\nconst utils_1 = require(\"./utils\");\n// eslint-disable-next-line complexity\nconst findValue = (cursor, data, serie, idx, interpolation) => {\n    var _a, _b, _c;\n    const source = Array.isArray(serie.$c) ? serie.$c : data;\n    let value = source[idx];\n    if (interpolation && value === interpolation.value) {\n        const snapTo = (_a = interpolation.snapToValues) !== null && _a !== void 0 ? _a : 'closest';\n        const nonNullIdx = (0, common_1.findDataIdx)(source, serie, idx, snapTo, interpolation.value);\n        value = source[nonNullIdx];\n    }\n    else if (value === null) {\n        const cursorSnapToValues = (_b = cursor.snapToValues) !== null && _b !== void 0 ? _b : 'closest';\n        const snapTo = (_c = serie.snapToValues) !== null && _c !== void 0 ? _c : cursorSnapToValues;\n        const nonNullIdx = (0, common_1.findDataIdx)(source, serie, idx, snapTo, null);\n        value = source[nonNullIdx];\n    }\n    return value;\n};\nconst DEFAULT_TOOLTIP_OPTIONS = {\n    maxLines: defaults_1.TOOLTIP_DEFAULT_MAX_LINES,\n    highlight: true,\n    sum: false,\n    render: render_1.renderTooltip,\n    pinable: true,\n    strategy: 'pin',\n    sort: undefined,\n    showIndicies: false,\n    hideNoData: false,\n    className: 'yagr-tooltip_default',\n    xOffset: defaults_1.TOOLTIP_X_OFFSET,\n    yOffset: defaults_1.TOOLTIP_Y_OFFSET,\n    virtual: false,\n    showEmpty: false,\n    onUpdate: 'reset',\n};\nclass YagrTooltip {\n    constructor(yagr, options = {}) {\n        var _a, _b;\n        this.handlers = {\n            init: [],\n            mount: [],\n            show: [],\n            pin: [],\n            unpin: [],\n            hide: [],\n            render: [],\n            destroy: [],\n            reset: [],\n        };\n        this.placement = placement_1.default;\n        this.renderTooltipCloses = () => { };\n        /**\n         * Flag to skip next mouseup event, used for unpinning\n         * tooltip on any mousedown, but continiously pinning on drag\n         */\n        this.skipNextMouseUp = false;\n        this.emit = (action, data) => {\n            this.handlers[action].forEach((handler) => {\n                handler(this.tOverlay, {\n                    state: this.state,\n                    actions: {\n                        pin: this.pin,\n                        show: this.show,\n                        hide: this.hide,\n                        dispose: this.dispose,\n                        reset: this.reset,\n                    },\n                    data,\n                    yagr: this.yagr,\n                    event: action,\n                });\n            });\n        };\n        this.reset = () => {\n            var _a;\n            if (this.opts.onUpdate === 'none') {\n                (_a = this.yagr.plugins.cursor) === null || _a === void 0 ? void 0 : _a.pin(false);\n                return;\n            }\n            if (this.state.visible) {\n                this.hide();\n            }\n            if (this.state.pinned) {\n                this.pin(false);\n            }\n            this.emit('reset');\n        };\n        this.show = () => {\n            const shouldEmit = !this.state.visible;\n            this.state.visible = true;\n            this.tOverlay.style.display = 'block';\n            shouldEmit && this.emit('show');\n        };\n        this.hide = () => {\n            const shouldEmit = this.state.visible;\n            this.state.visible = false;\n            this.tOverlay.style.display = 'none';\n            this.emit('hide');\n            shouldEmit && this.emit('show');\n        };\n        this.pin = (pinState, position) => {\n            var _a;\n            this.state.pinned = pinState;\n            const range = this.state.range || [];\n            (_a = this.yagr.plugins.cursor) === null || _a === void 0 ? void 0 : _a.pin(pinState && (range[1] === null || range.length < 2));\n            if (this.opts.virtual) {\n                return this.emit(pinState ? 'pin' : 'unpin');\n            }\n            if (position) {\n                this.placement(this.tOverlay, {\n                    left: position.x + this.bLeft,\n                    top: this.bTop + position.y - (this.opts.yOffset || 0),\n                }, 'right', {\n                    bound: this.bound,\n                    xOffset: this.opts.xOffset,\n                    yOffset: this.opts.yOffset,\n                });\n            }\n            const list = this.tOverlay.querySelector('._tooltip-list');\n            if (pinState) {\n                if (!this.state.visible) {\n                    this.show();\n                }\n                this.tOverlay.classList.add('yagr-tooltip_pinned');\n                if (list && (list === null || list === void 0 ? void 0 : list.clientHeight)) {\n                    list.style.height = (0, common_1.px)(list.clientHeight);\n                }\n                if (this.opts.render === render_1.renderTooltip) {\n                    document.addEventListener('mousemove', this.checkFocus);\n                    document.addEventListener('mousedown', this.detectClickOutside);\n                }\n            }\n            else {\n                this.tOverlay.classList.remove('yagr-tooltip_pinned');\n                if (this.opts.render === render_1.renderTooltip) {\n                    document.removeEventListener('mousemove', this.checkFocus);\n                    document.removeEventListener('mousedown', this.detectClickOutside);\n                }\n            }\n            this.emit(pinState ? 'pin' : 'unpin');\n        };\n        this.checkFocus = (event) => {\n            const target = event.target;\n            let serieIdx;\n            if (target && this.tOverlay.contains(target) && target.classList.contains('yagr-tooltip__item')) {\n                serieIdx = target.dataset['series'];\n            }\n            const serie = serieIdx ? this.yagr.uplot.series[Number(serieIdx)] : null;\n            if (serieIdx && serie) {\n                this.state.focusedSeries = serieIdx;\n                this.yagr.setFocus(serie.id, true);\n            }\n            else if (this.state.focusedSeries) {\n                this.state.focusedSeries = null;\n                this.yagr.setFocus(null, true);\n            }\n        };\n        this.render = (props) => {\n            const u = this.yagr.uplot;\n            let { left, top } = props;\n            const { idx } = props;\n            const { opts, state } = this;\n            if (opts.show && typeof opts.show === 'function' && opts.show(this.yagr) === false) {\n                this.hide();\n                return;\n            }\n            if ((left < 0 || top < 0) && !state.pinned && this.isNotInDrag) {\n                this.hide();\n            }\n            top = (0, common_1.inBetween)(top, 0, u.bbox.top + u.bbox.height);\n            left = (0, common_1.inBetween)(left, 0, u.bbox.left + u.bbox.width);\n            const { data } = u;\n            if (data === null || (0, common_1.isNil)(idx) || top === undefined) {\n                return;\n            }\n            const x = data[0][idx];\n            const sum = {};\n            const sections = {};\n            const rowsBySections = {};\n            let i = u.series.length - 1;\n            while (i >= 1) {\n                const serie = u.series[i];\n                if (!serie.show) {\n                    i -= 1;\n                    continue;\n                }\n                const scale = serie.scale || defaults_1.DEFAULT_Y_SCALE;\n                rowsBySections[scale] = rowsBySections[scale] || [];\n                rowsBySections[scale].push(i);\n                i -= 1;\n            }\n            const rowEntries = Object.entries(rowsBySections);\n            rowEntries.forEach(([scale, serieIndicies]) => {\n                var _a;\n                sections[scale] = sections[scale] || {\n                    rows: [],\n                };\n                const section = sections[scale];\n                const cursorValue = Number(u.posToVal(top, scale).toFixed(2));\n                const valueRender = (0, utils_1.getOptionValue)(opts.value, scale);\n                for (const seriesIdx of serieIndicies) {\n                    const seriesData = u.data[seriesIdx];\n                    const serie = u.series[seriesIdx];\n                    let value = findValue(this.yagr.config.cursor, seriesData, serie, idx, this.interpolation);\n                    let dValue = value;\n                    if (typeof value === 'string') {\n                        dValue = value;\n                        value = null;\n                    }\n                    if ((0, utils_1.getOptionValue)(opts.sum, scale)) {\n                        sum[scale] = sum[scale] || 0;\n                        sum[scale] += value || 0;\n                    }\n                    const realY = seriesData[idx];\n                    const yValue = serie.$c && serie.$c[idx] === this.stripValue ? value : realY;\n                    if ((value === null && opts.hideNoData) || serie.showInTooltip === false) {\n                        continue;\n                    }\n                    const seriesPrecision = (_a = serie.precision) !== null && _a !== void 0 ? _a : (0, utils_1.getOptionValue)(opts.precision, scale);\n                    const displayValue = serie.formatter\n                        ? serie.formatter(dValue, serie)\n                        : valueRender(dValue, seriesPrecision);\n                    const rowData = {\n                        id: serie.id,\n                        name: serie.name,\n                        dataValue: serie.$c[idx],\n                        originalValue: value,\n                        value: displayValue,\n                        y: yValue,\n                        displayY: realY,\n                        color: serie.color,\n                        seriesIdx,\n                        rowIdx: section.rows.length ? section.rows[section.rows.length - 1].rowIdx + 1 : 0,\n                    };\n                    if (serie.normalizedData) {\n                        rowData.transformed = serie.normalizedData[idx];\n                    }\n                    if (serie._transformed) {\n                        rowData.transformed = seriesData[idx];\n                    }\n                    if (opts.omitBy && opts.omitBy(rowData)) {\n                        continue;\n                    }\n                    section.rows.push(rowData);\n                }\n                if ((0, utils_1.getOptionValue)(opts.highlight, scale) && section.rows.length) {\n                    const tracking = (0, utils_1.getOptionValue)(opts.tracking, scale);\n                    let activeIndex = 0;\n                    if (tracking === 'area') {\n                        activeIndex = (0, common_1.findInRange)(section, cursorValue, (0, utils_1.getOptionValue)(opts.stickToRanges, scale));\n                    }\n                    else if (tracking === 'sticky') {\n                        activeIndex = (0, common_1.findSticky)(section, cursorValue);\n                    }\n                    else if (typeof tracking === 'function') {\n                        activeIndex = tracking(section, cursorValue, {\n                            x: u.posToVal(left, 'x'),\n                            y: u.posToVal(top, scale),\n                            idx,\n                            scale,\n                            series: this.yagr.series,\n                            serieIndicies,\n                            interpolation: this.interpolation,\n                        });\n                    }\n                    if (activeIndex !== null) {\n                        section.rows[activeIndex].active = true;\n                    }\n                }\n                const sort = (0, utils_1.getOptionValue)(opts.sort, scale);\n                if (sort) {\n                    section.rows.sort(sort);\n                }\n            });\n            const hasOneRow = Object.values(sections).some(({ rows }) => rows.length > 0);\n            if (hasOneRow || opts.showEmpty) {\n                this.onMouseEnter();\n            }\n            else {\n                this.hide();\n                return;\n            }\n            const bbox = this.over.getBoundingClientRect();\n            this.bLeft = bbox.left;\n            this.bTop = bbox.top;\n            this.bWidth = bbox.width;\n            const anchor = {\n                left: left + this.bLeft,\n                top: this.bTop + top - (opts.yOffset || 0),\n            };\n            this.renderTooltipCloses = () => {\n                const renderData = {\n                    scales: Object.entries(sections).map(([scale, sec]) => {\n                        return {\n                            scale,\n                            rows: sec.rows,\n                            sum: sum[scale],\n                        };\n                    }),\n                    options: opts,\n                    x,\n                };\n                const hasDataNow = Object.values(sections).some(({ rows }) => rows.filter(({ id }) => { var _a; return (_a = this.yagr.getSeriesById(id)) === null || _a === void 0 ? void 0 : _a.show; }).length > 0);\n                if (!hasDataNow && !opts.showEmpty) {\n                    this.hide();\n                    return;\n                }\n                if (!opts.virtual) {\n                    this.tOverlay.innerHTML = opts.render({\n                        ...renderData,\n                        state,\n                        yagr: this.yagr,\n                        defaultRender: DEFAULT_TOOLTIP_OPTIONS.render,\n                    });\n                    this.placement(this.tOverlay, anchor, 'right', {\n                        bound: this.bound,\n                        xOffset: opts.xOffset,\n                        yOffset: opts.yOffset,\n                    });\n                }\n                this.emit('render', { ...renderData, anchor });\n            };\n            if (state.pinned) {\n                return;\n            }\n            this.renderTooltipCloses();\n        };\n        this.initWithUplot = (u) => {\n            this.over = u.root.querySelector('.u-over');\n            this.over.addEventListener('mousedown', this.onMouseDown);\n            this.over.addEventListener('mousemove', this.onMouseMove);\n            this.over.addEventListener('mouseenter', this.onMouseEnter);\n            this.over.addEventListener('mouseleave', this.onMouseLeave);\n            document.addEventListener('mouseup', this.onMouseUp);\n        };\n        this.setSize = () => {\n            const bbox = this.over.getBoundingClientRect();\n            this.bLeft = bbox.left;\n            this.bTop = bbox.top;\n        };\n        this.dispose = () => {\n            /** Free overlay listeners */\n            this.over.removeEventListener('mousedown', this.onMouseDown);\n            this.over.removeEventListener('mousemove', this.onMouseMove);\n            this.over.removeEventListener('mouseenter', this.onMouseEnter);\n            this.over.removeEventListener('mouseleave', this.onMouseLeave);\n            document.removeEventListener('mouseup', this.onMouseUp);\n            document.removeEventListener('mousemove', this.checkFocus);\n            document.removeEventListener('mousedown', this.detectClickOutside);\n            /** Removing tooltip on destroy */\n            this.tOverlay.remove();\n            this.state.mounted = false;\n            this.emit('destroy');\n        };\n        this.updateOptions = (newOptions) => {\n            Object.assign(this.opts, newOptions);\n            this.tOverlay.className = `yagr-tooltip ${this.opts.className || ''}`;\n        };\n        this.on = (event, handler) => {\n            this.handlers[event].push(handler);\n        };\n        this.off = (event, handler) => {\n            this.handlers[event] = this.handlers[event].filter((h) => h !== handler);\n        };\n        this.detectClickOutside = (event) => {\n            const target = event.target;\n            if (target instanceof Element) {\n                const isClickInsideTooltip = target && this.tOverlay.contains(target);\n                const isClickOnUplotOver = target && this.over.contains(target);\n                if (!isClickInsideTooltip && !isClickOnUplotOver) {\n                    this.pin(false);\n                    this.hide();\n                }\n            }\n        };\n        this.onMouseDown = (evt) => {\n            this.state.range = [this.getCursorPosition(), null];\n            if (this.state.pinned) {\n                this.pin(false);\n                this.hide();\n                this.render({\n                    left: evt.clientX - this.bLeft,\n                    top: evt.clientY - this.bTop,\n                    idx: this.yagr.uplot.posToIdx(evt.clientX - this.bLeft),\n                });\n                this.skipNextMouseUp = true;\n            }\n        };\n        this.onMouseMove = () => {\n            var _a;\n            if ((_a = this.state.range) === null || _a === void 0 ? void 0 : _a.length) {\n                this.state.range[1] = this.getCursorPosition();\n            }\n        };\n        /**\n         * Calculates where exactly cursor leaved the chart\n         * and sets range[1] to this position\n         */\n        this.setCursorLeaved = (e) => {\n            const rect = this.over.getBoundingClientRect();\n            const x = e.clientX;\n            const range = this.state.range;\n            const startPoint = range[0];\n            const xInOver = x - rect.left;\n            const end = xInOver > startPoint.clientX;\n            const timeline = this.yagr.config.timeline;\n            let result;\n            if (end) {\n                range[1] = {\n                    clientX: this.bWidth,\n                    value: this.yagr.uplot.posToVal(this.bWidth, 'x'),\n                    idx: timeline.length - 1,\n                };\n                result = range[1];\n            }\n            else {\n                /** Swap range[1] and range[0] in case if tooltip leaved chart in begining of element */\n                range[1] = range[0];\n                range[0] = {\n                    clientX: 0,\n                    value: this.yagr.uplot.posToVal(0, 'x'),\n                    idx: 0,\n                };\n                result = range[0];\n            }\n            this.yagr.uplot.setCursor({\n                left: result.clientX,\n                top: e.clientY - rect.top,\n            });\n        };\n        this.onMouseUp = (e) => {\n            if (this.state.range === null) {\n                return;\n            }\n            const [from] = this.state.range || [];\n            let cursor;\n            if (e.target === this.over) {\n                cursor = this.getCursorPosition();\n            }\n            else {\n                cursor = this.state.range[1];\n            }\n            if (this.opts.strategy === 'none') {\n                return;\n            }\n            const click = from && from.clientX === (cursor === null || cursor === void 0 ? void 0 : cursor.clientX);\n            const drag = from && from.clientX !== (cursor === null || cursor === void 0 ? void 0 : cursor.clientX);\n            const strategy = this.opts.strategy;\n            if ((click && !this.skipNextMouseUp && strategy !== 'drag') ||\n                (drag && (strategy === 'all' || strategy === 'drag'))) {\n                this.pin(!this.state.pinned);\n                this.show();\n                this.renderTooltipCloses();\n            }\n            this.state.range = null;\n            this.skipNextMouseUp = false;\n        };\n        this.onMouseEnter = () => {\n            this.show();\n        };\n        this.onMouseLeave = (e) => {\n            var _a;\n            const isPinned = this.state.pinned;\n            if ((_a = this.state.range) === null || _a === void 0 ? void 0 : _a[0]) {\n                this.setCursorLeaved(e);\n            }\n            if (!isPinned && this.isNotInDrag) {\n                this.hide();\n            }\n        };\n        this.defaultTooltipValueFormatter = (n, precision) => {\n            const pSettings = this.yagr.config.processing || {};\n            if (typeof n === 'string') {\n                if (pSettings.nullValues && pSettings.nullValues.hasOwnProperty(n)) {\n                    return pSettings.nullValues[n];\n                }\n                return '-';\n            }\n            if (typeof n === 'number') {\n                return n.toFixed(\n                // eslint-disable-next-line no-nested-ternary\n                typeof precision === 'number'\n                    ? precision\n                    : typeof this.opts.precision === 'number'\n                        ? this.opts.precision\n                        : 2);\n            }\n            return '-';\n        };\n        this.getCursorPosition = () => {\n            const x = this.yagr.uplot.cursor.left;\n            if (x === undefined) {\n                return null;\n            }\n            return {\n                clientX: x,\n                value: this.yagr.uplot.posToVal(x, 'x'),\n                idx: this.yagr.uplot.posToIdx(x),\n            };\n        };\n        this.yagr = yagr;\n        this.over = (_a = yagr === null || yagr === void 0 ? void 0 : yagr.uplot) === null || _a === void 0 ? void 0 : _a.over;\n        this.opts = {\n            ...DEFAULT_TOOLTIP_OPTIONS,\n            strategy: options.pinable ? 'pin' : DEFAULT_TOOLTIP_OPTIONS.strategy,\n            tracking: ((_b = yagr.config.chart.series) === null || _b === void 0 ? void 0 : _b.type) === 'area' ? 'area' : 'sticky',\n            value: this.defaultTooltipValueFormatter,\n            ...options,\n        };\n        this.bound = this.opts.boundClassName\n            ? document.querySelector(this.opts.boundClassName) || document.body\n            : document.body;\n        this.renderNode = this.opts.renderClassName\n            ? document.querySelector(this.opts.renderClassName) || document.body\n            : document.body;\n        this.tOverlay = document.createElement('div');\n        this.tOverlay.id = `${yagr.id}_tooltip`;\n        this.tOverlay.className = `yagr-tooltip ${this.opts.className || ''}`;\n        this.tOverlay.style.display = 'none';\n        this.state = {\n            mounted: false,\n            pinned: false,\n            visible: false,\n            range: null,\n            focusedSeries: null,\n        };\n        this.bLeft = 0;\n        this.bTop = 0;\n        this.bWidth = 0;\n        if (this.opts.virtual) {\n            this.placement = () => { };\n        }\n        else {\n            this.renderNode.appendChild(this.tOverlay);\n            this.state.mounted = true;\n            this.emit('mount');\n        }\n    }\n    get interpolation() {\n        var _a;\n        return (_a = this.yagr.config.processing) === null || _a === void 0 ? void 0 : _a.interpolation;\n    }\n    get stripValue() {\n        return this.interpolation ? this.interpolation.value : undefined;\n    }\n    get isNotInDrag() {\n        var _a;\n        if (this.opts.strategy === 'none' || this.opts.strategy === 'pin') {\n            return true;\n        }\n        return !((_a = this.state.range) === null || _a === void 0 ? void 0 : _a[1]);\n    }\n}\n/*\n * Tooltip plugin constructor.\n * Every charts has it's own tooltip plugin instance\n */\nfunction YagrTooltipPlugin(yagr, options = {}) {\n    const tooltip = new YagrTooltip(yagr, options);\n    const getUplotPlugin = () => ({\n        hooks: {\n            init: (u) => {\n                tooltip.initWithUplot(u);\n            },\n            setSize: () => {\n                tooltip.setSize();\n            },\n            setCursor: (u) => {\n                tooltip.render(u.cursor);\n            },\n        },\n    });\n    const uPlotPlugin = getUplotPlugin();\n    function reInit(u) {\n        const uPlugin = getUplotPlugin();\n        tooltip.reset();\n        u.hooks.init.push(uPlugin.hooks.init);\n        u.hooks.setSize.push(uPlugin.hooks.setSize);\n        u.hooks.setCursor.push(uPlugin.hooks.setCursor);\n    }\n    return {\n        state: tooltip.state,\n        pin: tooltip.pin,\n        show: tooltip.show,\n        hide: tooltip.hide,\n        uplot: uPlotPlugin,\n        display: tooltip.render,\n        updateOptions: tooltip.updateOptions,\n        on: tooltip.on,\n        off: tooltip.off,\n        tooltip,\n        dispose: tooltip.dispose,\n        reInit,\n        reset: tooltip.reset,\n    };\n}\nexports.default = YagrTooltipPlugin;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.escapeHTML = exports.getOptionValue = void 0;\nfunction getOptionValue(option, scale) {\n    return (typeof option === 'object' ? option[scale] : option);\n}\nexports.getOptionValue = getOptionValue;\nfunction escapeHTML(html) {\n    const elem = document.createElement('span');\n    elem.innerText = html;\n    return elem.innerHTML;\n}\nexports.escapeHTML = escapeHTML;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.configureAxes = exports.updateAxis = exports.getRedrawOptionsForAxesUpdate = exports.getTimeFormatter = exports.getDefaultNumberFormatter = exports.getAxisPositioning = void 0;\nconst uplot_1 = __importDefault(require(\"uplot\"));\nconst defaults = __importStar(require(\"../defaults\"));\nconst common_1 = require(\"./common\");\nconst types_1 = require(\"./types\");\nconst YAGR_AXIS_TO_UPLOT_AXIS = {\n    right: types_1.Axis.Side.Right,\n    top: types_1.Axis.Side.Top,\n    bottom: types_1.Axis.Side.Bottom,\n    left: types_1.Axis.Side.Left,\n};\nconst AXIS_SIDE_TO_ALIGN = {\n    left: types_1.Axis.Align.Right,\n    right: types_1.Axis.Align.Left,\n    top: undefined,\n    bottom: undefined,\n};\nconst getAxisPositioning = (side, align) => {\n    return {\n        side: side ? YAGR_AXIS_TO_UPLOT_AXIS[side] : types_1.Axis.Side.Left,\n        align: align || (side ? AXIS_SIDE_TO_ALIGN[side] : undefined),\n    };\n};\nexports.getAxisPositioning = getAxisPositioning;\nconst getDefaultNumberFormatter = (precision, nullValue = '') => {\n    return (n) => {\n        if ((0, common_1.isNil)(n)) {\n            return nullValue;\n        }\n        if (n === 0) {\n            return '0';\n        }\n        const abs = Math.abs(n);\n        const precisionNum = precision === 'auto' ? 2 : precision;\n        const [pow, suffix] = (0, common_1.getUnitSuffix)(abs);\n        const transformedValue = n / pow;\n        return ((precision === 'auto'\n            ? String(transformedValue).replace(/\\.(\\d{5,})/, (match) => {\n                return match.slice(0, 6);\n            })\n            : (0, common_1.toFixed)(transformedValue, precisionNum)) + suffix);\n    };\n};\nexports.getDefaultNumberFormatter = getDefaultNumberFormatter;\n/*\n * Generates ticks labels values\n */\nconst getNumericValueFormatter = (axisConfig) => {\n    const p = axisConfig.precision;\n    const numFormatter = (0, exports.getDefaultNumberFormatter)(typeof p === 'number' ? p : p || 'auto', '');\n    return function defaultNumericValueFormatter(_, ticks) {\n        return ticks.map(numFormatter);\n    };\n};\nconst dayTimeFormatter = uplot_1.default.fmtDate('{DD}.{MM}.{YYYY}');\nconst dateTimeFormatter = uplot_1.default.fmtDate('{HH}:{mm}:{ss}');\nconst minuteFormatter = uplot_1.default.fmtDate('{mm}:{ss}');\nconst secondFormatter = uplot_1.default.fmtDate('{mm}:{ss}.{fff}');\nconst yearFormatter = uplot_1.default.fmtDate('{YYYY}');\nfunction getTimeFormatterByRange(range, ticksCount) {\n    let formatter = dayTimeFormatter;\n    const minRange = Math.ceil(range / ticksCount);\n    if (minRange <= defaults.SECOND) {\n        formatter = secondFormatter;\n    }\n    else if (minRange <= defaults.MINUTE) {\n        formatter = minuteFormatter;\n    }\n    else if (minRange <= defaults.DAY) {\n        formatter = dateTimeFormatter;\n    }\n    else if (minRange >= defaults.YEAR) {\n        formatter = yearFormatter;\n    }\n    return (x) => formatter(new Date(x));\n}\nconst getTimeFormatter = (config) => {\n    const msm = config.chart.timeMultiplier || 1;\n    return (_, ticks) => {\n        const range = ticks[ticks.length - 1] - ticks[0];\n        const rangeMs = range / msm;\n        const formatter = getTimeFormatterByRange(rangeMs, ticks.length);\n        return ticks.map((rawValue) => {\n            return formatter(rawValue / msm);\n        });\n    };\n};\nexports.getTimeFormatter = getTimeFormatter;\nfunction getSplits(splitsCount) {\n    return (_, __, scaleMin, scaleMax) => {\n        if (splitsCount <= 2) {\n            return [scaleMin, scaleMax];\n        }\n        const dist = Math.abs(scaleMax - scaleMin);\n        const step = dist / (splitsCount - 1);\n        let i = step;\n        const splits = [];\n        while (scaleMin + i < scaleMax) {\n            splits.push(scaleMin + i);\n            i += step;\n        }\n        return [scaleMin, ...splits, scaleMax];\n    };\n}\n// eslint-disable-next-line complexity\nfunction getAxis(axisConfig, yagr) {\n    var _a, _b;\n    const theme = yagr.utils.theme;\n    const config = yagr.config;\n    const axis = {\n        splits: axisConfig.splitsCount ? getSplits(axisConfig.splitsCount) : axisConfig.splits,\n        show: typeof axisConfig.show === 'undefined' ? true : axisConfig.show,\n        label: axisConfig.label || undefined,\n        labelSize: axisConfig.labelSize || defaults.Y_AXIS_LABEL_SIZE,\n        labelFont: axisConfig.labelFont || defaults.AXIS_LABEL_FONT,\n        font: axisConfig.font || defaults.AXIS_VALUES_FONT,\n        stroke: axisConfig.stroke || (() => theme.AXIS_STROKE),\n        ticks: axisConfig.ticks ? { ...theme.Y_AXIS_TICKS, ...axisConfig.ticks } : theme.Y_AXIS_TICKS,\n        grid: config.grid || axisConfig.grid || theme.GRID,\n    };\n    if (axisConfig.scale === defaults.DEFAULT_X_SCALE) {\n        return Object.assign(axis, {\n            getFormatter: getTimeFormatterByRange,\n            gap: (_a = axisConfig.gap) !== null && _a !== void 0 ? _a : defaults.X_AXIS_TICK_GAP,\n            size: (0, common_1.asFn)(axisConfig.size) || (() => defaults.X_AXIS_SIZE),\n            values: axisConfig.values || (0, exports.getTimeFormatter)(config),\n            ticks: axisConfig.ticks ? { ...theme.X_AXIS_TICKS, ...axisConfig.ticks } : theme.X_AXIS_TICKS,\n            scale: defaults.DEFAULT_X_SCALE,\n            space: axisConfig.space || (() => defaults.X_AXIS_SPACE),\n            incrs: axisConfig.incrs || (() => defaults.X_AXIS_INCRS.map((i) => i * (config.chart.timeMultiplier || 1))),\n            side: 2,\n            stroke: axisConfig.stroke || (() => theme.AXIS_STROKE),\n        });\n    }\n    Object.assign(axis, {\n        gap: (_b = axisConfig.gap) !== null && _b !== void 0 ? _b : defaults.Y_AXIS_TICK_GAP,\n        size: (0, common_1.asFn)(axisConfig.size) || defaults.Y_AXIS_SIZE,\n        values: axisConfig.values || getNumericValueFormatter(axisConfig),\n        scale: axisConfig.scale || defaults.DEFAULT_Y_SCALE,\n        getFormatter: () => (0, exports.getDefaultNumberFormatter)(typeof axisConfig.precision === 'number' ? axisConfig.precision : axisConfig.precision || 'auto', ''),\n        ...(0, exports.getAxisPositioning)(axisConfig.side || 'left', axisConfig.align),\n    });\n    if (axisConfig.space) {\n        axis.space = axisConfig.space;\n    }\n    return axis;\n}\nfunction getRedrawOptionsForAxesUpdate(axes) {\n    const options = [false, true];\n    Object.values(axes).forEach((s) => {\n        const uOpts = ['align', 'side', 'size', 'label', 'labelFont', 'labelGap', 'labelSize'];\n        if (uOpts.some((t) => s[t] !== undefined)) {\n            options[1] = true;\n        }\n    });\n    return options;\n}\nexports.getRedrawOptionsForAxesUpdate = getRedrawOptionsForAxesUpdate;\nfunction updateAxis(yagr, uAxis, axisConfig) {\n    var _a;\n    const upd = getAxis({\n        ...axisConfig,\n        font: uAxis.font,\n    }, yagr);\n    upd.font = axisConfig.font || upd.font;\n    upd.ticks = { ...uAxis.ticks, ...upd.ticks };\n    upd.grid = { ...uAxis.grid, ...upd.grid };\n    upd.border = { ...uAxis.border, ...upd.border };\n    upd.splits = upd.splits || uAxis.splits;\n    Object.assign(uAxis, upd);\n    (_a = yagr.plugins.plotLines) === null || _a === void 0 ? void 0 : _a.update(axisConfig.plotLines, axisConfig.scale);\n}\nexports.updateAxis = updateAxis;\nfunction configureAxes(yagr, config) {\n    const axes = [];\n    Object.entries(config.axes).forEach(([scale, axisConfig]) => {\n        axes.push(getAxis({ ...axisConfig, scale }, yagr));\n    });\n    const x = defaults.DEFAULT_X_SCALE;\n    const y = defaults.DEFAULT_Y_SCALE;\n    if (!config.axes[x]) {\n        axes.push(getAxis({ scale: x }, yagr));\n    }\n    if (!axes.find(({ scale }) => scale !== x)) {\n        axes.push(getAxis({ scale: y }, yagr));\n    }\n    return axes;\n}\nexports.configureAxes = configureAxes;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getPaddingByAxes = void 0;\nconst defaults = __importStar(require(\"../defaults\"));\nfunction getPaddingByAxes(options) {\n    let hasLeftAxis = false;\n    let hasRightAxis = false;\n    if (options.axes) {\n        options.axes.forEach((axis) => {\n            if (axis.scale === defaults.DEFAULT_X_SCALE) {\n                return;\n            }\n            if (axis.side === undefined || axis.side === 3) {\n                hasLeftAxis = true;\n            }\n            if (axis.side === 1) {\n                hasRightAxis = true;\n            }\n        });\n    }\n    else {\n        hasLeftAxis = true;\n    }\n    if (hasLeftAxis && !hasRightAxis) {\n        return defaults.PADDING_LEFT;\n    }\n    else if (hasRightAxis && !hasLeftAxis) {\n        return defaults.PADDING_RIGHT;\n    }\n    else {\n        return defaults.PADDING_BOTH;\n    }\n}\nexports.getPaddingByAxes = getPaddingByAxes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSerieFocusColors = exports.getFocusedColor = void 0;\nconst DEFAULT_SHADE_COLOR = [0, 0, 0, 0.6];\n/**\n * This class implements:\n *  - color parsing from RGBA, HEX or CSS color name\n *  - linear shade/lighten @see https://github.com/PimpTrizkit/PJs/wiki/12.-Shade,-Blend-and-Convert-a-Web-Color-(pSBC.js)#stackoverflow-archive-begin\n */\nclass ColorParser {\n    static parseRgba(rgbaColor) {\n        const m = rgbaColor.match(/rgba?\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,?\\s*(\\d+\\.?\\d*)?\\s*\\)/);\n        return m ? [m[1], m[2], m[3], m[4] || 1].map(Number) : null;\n    }\n    parse(color = '000') {\n        const isVar = color.startsWith('var(--');\n        let res = color, pure = true, prop;\n        const ctx = this.context;\n        const pColor = ctx.style.color;\n        if (isVar || color.startsWith('--')) {\n            pure = false;\n            prop = isVar ? color.slice(4, -1) : color;\n        }\n        else if (!color.startsWith('#') && !color.startsWith('rgb')) {\n            ctx.style.color = color;\n            prop = 'color';\n            pure = false;\n        }\n        res = pure ? res : getComputedStyle(ctx).getPropertyValue(prop);\n        ctx.style.color = pColor;\n        return res;\n    }\n    setContext(context) {\n        this.context = context;\n    }\n    rgba(color) {\n        return `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${color[3]})`;\n    }\n    toRgba(color, fallbackRgba) {\n        return ColorParser.parseRgba(this.parse(color)) || fallbackRgba;\n    }\n    shade([r, g, b, a], value) {\n        const direction = value < 0;\n        const tOffset = direction ? 0 : 255 * value;\n        const transition = direction ? 1 + value : 1 - value;\n        const _r = Math.round(r * transition + tOffset);\n        const _g = Math.round(g * transition + tOffset);\n        const _b = Math.round(b * transition + tOffset);\n        return 'rgba(' + _r + ',' + _g + ',' + _b + ',' + a + ')';\n    }\n}\nexports.default = ColorParser;\nconst getFocusedColor = (y, seriesIdx) => {\n    const shift = y.utils.theme.SHIFT;\n    const s = y.uplot.series[seriesIdx];\n    const mainColor = ColorParser.parseRgba(s.color) || DEFAULT_SHADE_COLOR;\n    return y.utils.colors.shade(mainColor, shift);\n};\nexports.getFocusedColor = getFocusedColor;\nconst getSerieFocusColors = (y, field) => {\n    return (u, idx) => {\n        const s = u.series[idx];\n        return s._focus === false ? s.getFocusedColor(y, idx) : s[field];\n    };\n};\nexports.getSerieFocusColors = getSerieFocusColors;\n","\"use strict\";\n/* eslint-disable no-nested-ternary */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.inBetween = exports.isNil = exports.asPlain = exports.asFn = exports.deepIsEqual = exports.get = exports.html = exports.px = exports.debounce = exports.exec = exports.preprocess = exports.genId = exports.findDataIdx = exports.toFixed = exports.getUnitSuffix = exports.findSticky = exports.getSumByIdx = exports.findInRange = void 0;\n/**\n * Finds index of point in ranges of Y-Axis values.\n * Returns index of starting range when idx < Y <= idx next\n *\n * @param {TooltipSection} section - tooltip section\n * @param {number} value - Y value of cursor\n * @param {boolean} stickToRanges - if true, then always return index of range\n * @returns {number | null}\n */\nconst findInRange = (section, value, stickToRanges = true) => {\n    const positive = value >= 0;\n    let max = -Infinity, maxIdx = null;\n    let min = Infinity, minIdx = null;\n    const diffs = [];\n    let result = null;\n    for (let r = section.rows.length - 1; r >= 0; r--) {\n        const row = section.rows[r];\n        const { displayY: y, rowIdx } = row;\n        let diff;\n        if (y !== null) {\n            if (y > max) {\n                max = y;\n                maxIdx = row.rowIdx;\n            }\n            if (y < min) {\n                min = y;\n                minIdx = row.rowIdx;\n            }\n        }\n        if (y === null || (positive ? y < 0 : y >= 0)) {\n            diff = null;\n        }\n        else if (positive) {\n            diff = value > y ? null : y - value;\n        }\n        else {\n            diff = value < y ? null : Math.abs(y - value);\n        }\n        const currentMin = result === null ? Infinity : diffs[result];\n        const nextMin = diff === null ? currentMin : Math.min(currentMin, diff);\n        if ((diff !== null && currentMin === diff) || nextMin !== currentMin) {\n            result = rowIdx;\n        }\n    }\n    if (result === null && stickToRanges) {\n        return value >= max ? maxIdx : value <= min ? minIdx : null;\n    }\n    return result;\n};\nexports.findInRange = findInRange;\n/* Gets sum of all values of given data index by all series */\nconst getSumByIdx = (seriesOptions, idx, scale) => {\n    let sum = 0;\n    let i = 0;\n    while (i < seriesOptions.length) {\n        const seriesIdx = seriesOptions.length - i - 1;\n        const opts = seriesOptions[seriesIdx];\n        const seriesValues = opts.$c;\n        i += 1;\n        if (opts.scale !== scale || opts.show === false) {\n            continue;\n        }\n        const value = seriesValues[idx];\n        sum += typeof value === 'number' ? value : 0;\n    }\n    return sum;\n};\nexports.getSumByIdx = getSumByIdx;\n/**\n * Finds index of nearest non-null point in range of Y-Axis values\n *\n * @param {TooltipSection} section\n * @param {number} value\n * @returns {number | null}\n */\nconst findSticky = (section, value) => {\n    let nearestIndex;\n    let nearestValue;\n    let i = 0;\n    while (!nearestValue && i < section.rows.length) {\n        const r = section.rows[i].displayY;\n        if (r !== null) {\n            nearestIndex = i;\n            nearestValue = Math.abs(r - (value || 0));\n        }\n        i += 1;\n    }\n    if (!nearestValue || nearestIndex === undefined) {\n        return null;\n    }\n    for (i = nearestIndex + 1; i < section.rows.length; i++) {\n        const v = section.rows[i].displayY;\n        if (v === null) {\n            continue;\n        }\n        const diff = Math.abs(v - value);\n        if (nearestValue > diff) {\n            nearestValue = diff;\n            nearestIndex = i;\n        }\n    }\n    return nearestIndex;\n};\nexports.findSticky = findSticky;\nconst getUnitSuffix = (value) => {\n    if (value >= 1e18) {\n        return [1e18, 'E'];\n    }\n    else if (value >= 1e15) {\n        return [1e15, 'P'];\n    }\n    else if (value >= 1e12) {\n        return [1e12, 'T'];\n    }\n    else if (value >= 1e9) {\n        return [1e9, 'G'];\n    }\n    else if (value >= 1e6) {\n        return [1e6, 'M'];\n    }\n    else if (value >= 1e3) {\n        return [1e3, 'K'];\n    }\n    return [1, ''];\n};\nexports.getUnitSuffix = getUnitSuffix;\n/* Number.toFixed() wihout rounding */\nfunction toFixed(num, fixed) {\n    if (fixed === 0) {\n        return parseInt(num);\n    }\n    if (Number.isInteger(num)) {\n        return num + '.' + '0'.repeat(fixed);\n    }\n    const [int, frac] = num.toString().split('.');\n    return frac.length >= fixed ? `${int}.${frac.slice(0, fixed)}` : `${int}.${frac}${'0'.repeat(fixed - frac.length)}`;\n}\nexports.toFixed = toFixed;\n/**\n * Finds nearest non-null value's index in data series by given direction\n *\n * @param {DataSeriesExtended} data - Series data\n * @param {Series} series - Series options\n * @param {number} idx - cursor index\n * @param {SnapToValue | false} defaultSnapTo - default value for direction\n * @param {unknown} skipValue - value to skip\n * @returns {number}\n */\nfunction findDataIdx(data, series, idx, defaultSnapTo = 'closest', skipValue = null) {\n    var _a;\n    let corL = idx, corR = idx;\n    const direction = (_a = series.snapToValues) !== null && _a !== void 0 ? _a : defaultSnapTo;\n    if (direction === false) {\n        return idx;\n    }\n    if (direction === 'left' || direction === 'closest') {\n        for (let i = idx - 1; i >= 0; i--) {\n            if (data[i] !== skipValue) {\n                corL = i;\n                break;\n            }\n        }\n    }\n    if (direction === 'right' || direction === 'closest') {\n        for (let i = idx + 1; i < data.length; i++) {\n            if (data[i] !== skipValue) {\n                corR = i;\n                break;\n            }\n        }\n    }\n    if (direction === 'left') {\n        return corL;\n    }\n    if (direction === 'right') {\n        return corR;\n    }\n    return corR - idx > idx - corL ? corL : corR;\n}\nexports.findDataIdx = findDataIdx;\n/*\n * Interpolation function\n */\nconst interpolateImpl = (timeline, y1, y2, x1, x2, xIdx, iGroup, type = 'linear') => {\n    let result = null;\n    const x = timeline[xIdx];\n    switch (type) {\n        case 'linear': {\n            if (y1 === null || y2 === null) {\n                return null;\n            }\n            result = y1 + ((x - x1) * (y2 - y1)) / (x2 - x1);\n            if (isNaN(result) || Math.abs(result) === Infinity) {\n                result = null;\n            }\n            break;\n        }\n        case 'previous': {\n            result = y1;\n            break;\n        }\n        case 'next': {\n            result = y2;\n            break;\n        }\n        case 'left': {\n            result = iGroup[iGroup.length - 1] === timeline.length - 1 || y2 === null ? null : y1;\n            break;\n        }\n        case 'right': {\n            result = iGroup[0] === 0 ? null : y2;\n            break;\n        }\n        case 'closest': {\n            const lD = Math.abs(x1 - timeline[xIdx]);\n            const rD = Math.abs(x2 - timeline[xIdx]);\n            result = lD < rD ? y1 : y2;\n            break;\n        }\n        default: {\n            result = type;\n        }\n    }\n    return result;\n};\nconst genId = () => Math.random().toString(36).substr(2, 9).replace(/^\\d+/, '');\nexports.genId = genId;\n/**\n * Processing data series to:\n *  1. Find missing data and interpolate these points\n *  2. Find string special values to convert them to nulls\n *\n * @param {DataSeriesExtended[]} series\n * @param {number[]} timeline\n * @param {ProcessingSettings} settings\n * @returns {DataSeries[]}\n */\nconst preprocess = (series, timeline, settings) => {\n    const result = [];\n    const nullValues = settings.nullValues || {};\n    const interpolation = settings.interpolation;\n    for (let sIdx = 0; sIdx < series.length; sIdx++) {\n        const line = series[sIdx];\n        const resultLine = [];\n        let iGroup = [];\n        let y1 = null, y2 = null, x1, x2;\n        for (let idx = 0; idx < line.length; idx++) {\n            let val = line[idx];\n            if (interpolation && val === interpolation.value) {\n                iGroup.push(idx);\n                continue;\n            }\n            if (nullValues[val]) {\n                val = null;\n            }\n            if (iGroup.length) {\n                y2 = val;\n                x2 = timeline[idx];\n                for (const iIdx of iGroup) {\n                    resultLine[iIdx] = interpolateImpl(timeline, y1, y2, x1 || timeline[0], x2 || timeline[timeline.length - 1], iIdx, iGroup, interpolation && interpolation.type);\n                }\n                iGroup = [];\n            }\n            y1 = val;\n            x1 = timeline[idx];\n            resultLine.push(val);\n        }\n        y2 = null;\n        if (iGroup.length) {\n            for (const iIdx of iGroup) {\n                resultLine.push(interpolateImpl(timeline, y1, y2, x1 || timeline[0], x2 || timeline[timeline.length - 1], iIdx, iGroup, interpolation && interpolation.type));\n            }\n        }\n        result.push(resultLine);\n    }\n    return result;\n};\nexports.preprocess = preprocess;\nconst exec = (s, ...args) => {\n    return typeof s === 'function' ? s(...args) : s;\n};\nexports.exec = exec;\nfunction debounce(func, timeout = 300) {\n    let timer;\n    return (...args) => {\n        clearTimeout(timer);\n        timer = setTimeout(() => func(...args), timeout);\n    };\n}\nexports.debounce = debounce;\nconst px = (x) => x + 'px';\nexports.px = px;\nconst html = (tag, attrs = {}, content) => {\n    const el = document.createElement(tag);\n    Object.keys(attrs).forEach((key) => {\n        const attr = attrs[key];\n        el.setAttribute(key, typeof attr === 'object'\n            ? Object.entries(attr)\n                .map(([a, b]) => `${a}:${b}`)\n                .join(';')\n            : attr);\n    });\n    if (content) {\n        if (typeof content === 'string') {\n            el.innerHTML = content;\n        }\n        else {\n            el.appendChild(content);\n        }\n    }\n    return el;\n};\nexports.html = html;\nfunction get(obj, key) {\n    return key.split('.').reduce((acc, key) => { var _a, _b; return (_b = (_a = Object.getOwnPropertyDescriptor(acc, key)) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : {}; }, obj);\n}\nexports.get = get;\nfunction deepIsEqual(a, b) {\n    if (typeof a !== typeof b) {\n        return false;\n    }\n    if (typeof a === 'function' || typeof b === 'function') {\n        a = a.toString();\n        b = b.toString();\n    }\n    if (typeof a !== 'object' || isNil(a) || isNil(b)) {\n        return a === b;\n    }\n    const aObject = a;\n    const bObject = b;\n    const aKeys = Object.keys(aObject);\n    const bKeys = Object.keys(bObject);\n    if (aKeys.length !== bKeys.length) {\n        return false;\n    }\n    for (const key of aKeys) {\n        if (!bObject.hasOwnProperty(key)) {\n            return false;\n        }\n        if (!deepIsEqual(aObject[key], bObject[key])) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.deepIsEqual = deepIsEqual;\nfunction asFn(t) {\n    return typeof t === 'function' ? t : typeof t === 'undefined' ? t : () => t;\n}\nexports.asFn = asFn;\nfunction asPlain(t) {\n    return typeof t === 'function' ? t() : t;\n}\nexports.asPlain = asPlain;\nfunction isNil(v) {\n    return v === null || v === undefined;\n}\nexports.isNil = isNil;\nfunction inBetween(value, start, end) {\n    return value >= start && value <= end ? value : value < start ? start : end;\n}\nexports.inBetween = inBetween;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.preventMouseEvents = void 0;\nconst preventMouseEvents = (e) => e.preventDefault();\nexports.preventMouseEvents = preventMouseEvents;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.applyMixins = void 0;\nfunction applyMixins(derivedCtor, constructors) {\n    const inits = [];\n    constructors.forEach((baseCtor) => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n            Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name) || Object.create(null));\n        });\n        if (baseCtor.prototype.initMixin) {\n            inits.push(baseCtor.prototype.initMixin);\n        }\n    });\n    derivedCtor.prototype.initMixins = function () {\n        inits.forEach((init) => init.call(this));\n    };\n}\nexports.applyMixins = applyMixins;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.pathsRenderer = void 0;\nconst uplot_1 = __importDefault(require(\"uplot\"));\nconst defaults = __importStar(require(\"../defaults\"));\n/*\n * Configures and return apropriate path renderer\n * by given serieIndex and two points\n */\nfunction pathsRenderer(u, seriesIdx, idx0, idx1) {\n    const serie = u.series[seriesIdx];\n    const { type, interpolation } = serie;\n    let drawer;\n    switch (type) {\n        case 'column': {\n            drawer =\n                uplot_1.default.paths.bars &&\n                    uplot_1.default.paths.bars({\n                        size: [defaults.BARS_DRAW_FACTOR, defaults.BARS_DRAW_MAX],\n                        ...(u.series[seriesIdx].renderOptions || {}),\n                    });\n            break;\n        }\n        case 'dots': {\n            drawer = () => null;\n            break;\n        }\n        case 'line':\n        case 'area':\n        default: {\n            switch (interpolation) {\n                case 'smooth':\n                    drawer = uplot_1.default.paths.spline && uplot_1.default.paths.spline();\n                    break;\n                case 'left':\n                    drawer = uplot_1.default.paths.stepped && uplot_1.default.paths.stepped({ align: 1 });\n                    break;\n                case 'right': {\n                    drawer = uplot_1.default.paths.stepped && uplot_1.default.paths.stepped({ align: -1 });\n                    break;\n                }\n                case 'linear':\n                default:\n                    drawer = uplot_1.default.paths.linear && uplot_1.default.paths.linear();\n                    break;\n            }\n        }\n    }\n    return drawer ? drawer(u, seriesIdx, idx0, idx1) : null;\n}\nexports.pathsRenderer = pathsRenderer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.configureScales = exports.niceScale = exports.offsetScale = exports.getScaleRange = void 0;\nconst defaults_1 = require(\"../defaults\");\nconst types_1 = require(\"./types\");\nconst getScaleRange = (scale, config) => {\n    const range = scale.range;\n    if (typeof range === 'function') {\n        return (u, dataMin, dataMax) => {\n            return range(u, dataMin, dataMax, config);\n        };\n    }\n    if (scale.normalize) {\n        return [0, scale.normalizeBase || 100];\n    }\n    if (scale.range === 'auto') {\n        return undefined;\n    }\n    let rangeFn;\n    switch (scale.range) {\n        case undefined:\n        case 'nice': {\n            rangeFn = niceScale;\n            break;\n        }\n        case 'offset': {\n            rangeFn = offsetScale;\n            break;\n        }\n        default:\n            throw new Error(`Unknown scale range type ${scale.range}`);\n    }\n    return (_, dMin, dMax) => {\n        let { min, max } = rangeFn(dMin, dMax, scale, config);\n        const minRange = scale.minRange || defaults_1.DEFAULT_SCALE_MIN_RANGE;\n        if (Math.abs(max - min) < minRange) {\n            if (min >= 0) {\n                max += minRange;\n            }\n            else {\n                max += minRange / 2;\n                min -= minRange / 2;\n            }\n        }\n        min = typeof scale.min === 'number' ? scale.min : min;\n        max = typeof scale.max === 'number' ? scale.max : max;\n        /** Protect logarithmic scale from impossible min values */\n        if (scale.type === 'logarithmic') {\n            const isScaleMinDefined = typeof scale.min === 'number';\n            if (min <= 0) {\n                min = defaults_1.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE;\n            }\n            else if (!isScaleMinDefined) {\n                min = Math.min(min, defaults_1.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE);\n            }\n        }\n        if (min >= max || max <= min) {\n            if (typeof scale.max === 'number') {\n                min = max - (niceNum(max - max * 0.1, false) || 1);\n            }\n            else {\n                max = min + (niceNum(min + min * 0.1, false) || 1);\n            }\n        }\n        return [min, max];\n    };\n};\nexports.getScaleRange = getScaleRange;\nfunction offsetScale(dataMin, dataMax, scaleConfig) {\n    const startFromZero = dataMin >= 0 && scaleConfig.stacking;\n    const endWithZero = dataMax <= 0 && scaleConfig.stacking;\n    return {\n        min: startFromZero\n            ? 0\n            : Math.round(dataMin - Math.abs(dataMin) * (scaleConfig.offset || defaults_1.DEFAULT_Y_AXIS_OFFSET)),\n        max: endWithZero ? 0 : Math.round(dataMax + Math.abs(dataMax) * (scaleConfig.offset || defaults_1.DEFAULT_Y_AXIS_OFFSET)),\n    };\n}\nexports.offsetScale = offsetScale;\n/*\n * Implementation nice scale (see https://www.baeldung.com/cs/choosing-linear-scale-y-axis#procedure-for-identifying-scale-and-ticks)\n * with extra options inherited from Solomon stacked area visualization\n * with extra options implementing consistent incr proximity if dataMin ~= dataMax. (16.01.2020)\n * with extra options for small ranges between max and min (27.01.2020)\n */\nfunction niceScale(dataMin, dataMax, scaleConfig) {\n    const startFromZero = dataMin >= 0 && scaleConfig.stacking;\n    const endWithZero = dataMax <= 0 && scaleConfig.stacking;\n    /**\n     * This code handles case when scale has user max/min and niceScale's\n     * range after usage of given max-min from scale config creates not centered lines\n     */\n    const dMax = endWithZero ? 0 : typeof scaleConfig.max === 'number' ? scaleConfig.max : dataMax;\n    const dMin = startFromZero ? 0 : typeof scaleConfig.min === 'number' ? scaleConfig.min : dataMin;\n    if (dMin === dMax) {\n        return dMin >= 0 ? { min: dMin, max: dMin + 2 } : { min: dMin - 1, max: dMin + 1 };\n    }\n    const difference = dMax - dMin;\n    const range = niceNum(difference, false);\n    const incr = niceNum(range / (defaults_1.DEFAULT_MAX_TICKS - 1), true);\n    let max = Math.ceil(dMax / incr) * incr;\n    max = isNaN(max) ? 100 : max;\n    let min = (startFromZero ? Math.min(0, dMin) : Math.floor(dMin / incr) * incr) || 0;\n    /** Workaround for weird ranges */\n    if (min === max) {\n        min -= 1;\n        max += 1;\n    }\n    return {\n        min,\n        max,\n    };\n}\nexports.niceScale = niceScale;\nfunction niceNum(delta, round) {\n    const exp = Math.floor(Math.log10(delta));\n    const frac = delta / 10 ** exp;\n    const niceFrac = round\n        ? frac < 1.5\n            ? 1\n            : frac < 3\n                ? 2\n                : frac < 7\n                    ? 5\n                    : 10\n        : frac <= 1\n            ? 1\n            : frac <= 2\n                ? 2\n                : frac <= 5\n                    ? 5\n                    : 10;\n    return niceFrac * 10 ** exp;\n}\nfunction configureScales(yagr, scales, config) {\n    const scalesToMap = config.scales ? { ...config.scales } : {};\n    if (!Object.keys(config.scales).length) {\n        scalesToMap.y = {};\n    }\n    Object.entries(scalesToMap).forEach(([scaleName, scaleConfig]) => {\n        scales[scaleName] = scales[scaleName] || {};\n        const scale = scales[scaleName];\n        if (scaleName === defaults_1.DEFAULT_X_SCALE) {\n            return;\n        }\n        const forceMin = typeof scaleConfig.min === 'number' ? scaleConfig.min : null;\n        const forceMax = typeof scaleConfig.max === 'number' ? scaleConfig.max : null;\n        /** At first handle case when scale has setted min and max */\n        if (forceMax !== null && forceMin !== null) {\n            if (forceMax <= forceMin) {\n                throw new Error('Invalid scale config. .max should be > .min');\n            }\n            scale.range = [forceMin, forceMax];\n        }\n        const isLogScale = scaleConfig.type === 'logarithmic';\n        if (isLogScale) {\n            scale.distr = types_1.Scale.Distr.Logarithmic;\n            scale.range = (0, exports.getScaleRange)(scaleConfig, config);\n            return;\n        }\n        if (yagr.isEmpty) {\n            scale.range = [forceMin === null ? (isLogScale ? 1 : 0) : forceMin, forceMax === null ? 100 : forceMax];\n            return;\n        }\n        scale.range = (0, exports.getScaleRange)(scaleConfig, config);\n    });\n    if (!scales.x) {\n        scales.x = {\n            time: true,\n        };\n    }\n    return scales;\n}\nexports.configureScales = configureScales;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.overrideSeriesInUpdate = exports.configureSeries = void 0;\nconst defaults = __importStar(require(\"../defaults\"));\nconst common_1 = require(\"./common\");\nconst colors_1 = require(\"./colors\");\nconst markers_1 = require(\"../plugins/markers\");\nconst paths_1 = require(\"./paths\");\nfunction getCommonProperty(series, yagr, key, defaultValue) {\n    if (series[key] !== undefined) {\n        return series[key];\n    }\n    const seriesOptions = yagr.config.chart.series;\n    if (seriesOptions && key in seriesOptions) {\n        return seriesOptions[key];\n    }\n    return defaultValue;\n}\n// eslint-disable-next-line complexity\nfunction configureSeries(yagr, rawSeries, idx) {\n    var _a, _b;\n    const type = getCommonProperty(rawSeries, yagr, 'type', 'line');\n    const serie = {\n        ...rawSeries,\n        type,\n        show: (_a = rawSeries.show) !== null && _a !== void 0 ? _a : true,\n        name: rawSeries.name || `${yagr.utils.i18n('series')} ${idx + 1}`,\n        color: rawSeries.color ? yagr.utils.colors.parse(rawSeries.color) : yagr.utils.theme.DEFAULT_LINE_COLOR,\n        id: (rawSeries.id === undefined ? rawSeries.name : String(rawSeries.id)) || (0, common_1.genId)(),\n        $c: rawSeries.data,\n        scale: rawSeries.scale || defaults.DEFAULT_Y_SCALE,\n        count: 0,\n        sum: 0,\n        avg: 0,\n        getFocusedColor: colors_1.getFocusedColor,\n    };\n    serie.points = serie.points || {};\n    const colorFn = (0, colors_1.getSerieFocusColors)(yagr, 'color');\n    if (serie.type === 'area') {\n        serie.lineColor = yagr.utils.colors.parse(getCommonProperty(rawSeries, yagr, 'lineColor', defaults.SERIE_AREA_BORDER_COLOR));\n        serie.lineWidth = getCommonProperty(rawSeries, yagr, 'lineWidth', defaults.SERIE_AREA_BORDER_WIDTH);\n        serie.fill = colorFn;\n        serie.stroke = (0, colors_1.getSerieFocusColors)(yagr, 'lineColor');\n        serie.width = serie.lineWidth;\n        serie.points.show = markers_1.drawMarkersIfRequired;\n        serie.interpolation = getCommonProperty(rawSeries, yagr, 'interpolation', 'linear');\n        serie.spanGaps = getCommonProperty(rawSeries, yagr, 'spanGaps', false);\n    }\n    if (serie.type === 'line') {\n        serie.width = getCommonProperty(rawSeries, yagr, 'width', defaults.SERIE_LINE_WIDTH);\n        serie.width = serie.width || defaults.SERIE_LINE_WIDTH;\n        serie.stroke = colorFn;\n        serie.points.show = markers_1.drawMarkersIfRequired;\n        serie.interpolation = getCommonProperty(rawSeries, yagr, 'interpolation', 'linear');\n        serie.spanGaps = getCommonProperty(rawSeries, yagr, 'spanGaps', false);\n    }\n    if (serie.type === 'column') {\n        serie.stroke = colorFn;\n        serie.fill = colorFn;\n        serie.points.show = false;\n        serie.width = (_b = serie.width) !== null && _b !== void 0 ? _b : 0;\n        serie.renderOptions = getCommonProperty(serie, yagr, 'renderOptions');\n    }\n    if (serie.type === 'dots') {\n        serie.stroke = () => serie.color;\n        serie.fill = colorFn;\n        serie.width = 2;\n        serie.pointsSize = getCommonProperty(serie, yagr, 'pointsSize', defaults.DEFAULT_POINT_SIZE);\n    }\n    serie.paths = paths_1.pathsRenderer;\n    return serie;\n}\nexports.configureSeries = configureSeries;\nconst overrideSeriesInUpdate = (dest, source) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m;\n    dest.$c = (_a = source.$c) !== null && _a !== void 0 ? _a : dest.$c;\n    dest.show = (_b = source.show) !== null && _b !== void 0 ? _b : dest.show;\n    dest.data = (_c = source.data) !== null && _c !== void 0 ? _c : dest.data;\n    dest.width = (_d = source.width) !== null && _d !== void 0 ? _d : dest.width;\n    dest.pointsSize = (_e = source.pointsSize) !== null && _e !== void 0 ? _e : dest.pointsSize;\n    dest.color = (_f = source.color) !== null && _f !== void 0 ? _f : dest.color;\n    dest.lineColor = (_g = source.lineColor) !== null && _g !== void 0 ? _g : dest.lineColor;\n    dest.lineWidth = (_h = source.lineWidth) !== null && _h !== void 0 ? _h : dest.lineWidth;\n    dest.stroke = (_j = source.stroke) !== null && _j !== void 0 ? _j : dest.stroke;\n    dest.getFocusedColor = (_k = source.getFocusedColor) !== null && _k !== void 0 ? _k : dest.getFocusedColor;\n    dest.formatter = (_l = source.formatter) !== null && _l !== void 0 ? _l : dest.formatter;\n    dest.paths = (_m = source.paths) !== null && _m !== void 0 ? _m : dest.paths;\n};\nexports.overrideSeriesInUpdate = overrideSeriesInUpdate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Axis = exports.Scale = exports.DrawOrderKey = void 0;\nexports.DrawOrderKey = {\n    Series: 'series',\n    Axes: 'axes',\n};\nexports.Scale = {\n    Distr: {\n        Linear: 1,\n        Ordinal: 2,\n        Logarithmic: 3,\n        ArcSinh: 4,\n    },\n};\nexports.Axis = {\n    Side: {\n        Top: 0,\n        Right: 1,\n        Bottom: 2,\n        Left: 3,\n    },\n    Align: {\n        Right: 0,\n        Left: 1,\n    },\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaults = void 0;\n__exportStar(require(\"./YagrCore/types\"), exports);\n__exportStar(require(\"./YagrCore/plugins/tooltip/types\"), exports);\nconst DEF = __importStar(require(\"./YagrCore/defaults\"));\nexports.defaults = DEF;\nconst index_1 = __importDefault(require(\"./YagrCore/index\"));\nif (typeof window !== 'undefined') {\n    Object.assign(window, {\n        Yagr: index_1.default,\n    });\n}\nexports.default = index_1.default;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useTooltipState = void 0;\nconst React = __importStar(require(\"react\"));\nconst YagrCore_1 = __importDefault(require(\"./YagrCore\"));\n// eslint-disable-next-line prefer-arrow-callback\nexports.default = React.forwardRef(function YagrReact({ id, config, className = '', debug, onChartLoad, onSelect, update = 'dynamic' }, ref) {\n    const chartRef = React.useRef(null);\n    const chart = React.useRef();\n    React.useImperativeHandle(ref, () => ({\n        yagr: () => chart.current,\n        domElement: () => chartRef.current,\n    }));\n    const initChart = React.useCallback(() => {\n        if (chartRef.current) {\n            config.hooks = config.hooks || {};\n            const hooks = config.hooks;\n            if (onChartLoad) {\n                const load = hooks.load || [];\n                load.push(({ chart, meta }) => {\n                    onChartLoad(chart, meta);\n                });\n                hooks.load = load;\n            }\n            if (onSelect) {\n                const selection = hooks.onSelect || [];\n                selection.push(({ from, to }) => onSelect(from, to));\n                hooks.onSelect = selection;\n            }\n            chart.current = new YagrCore_1.default(chartRef.current, config);\n        }\n    }, []);\n    React.useEffect(() => {\n        var _a;\n        config && ((_a = chart.current) === null || _a === void 0 ? void 0 : _a.setConfig(config, update === 'hard'));\n    }, [config]);\n    React.useEffect(() => {\n        initChart();\n        return () => {\n            var _a;\n            (_a = chart.current) === null || _a === void 0 ? void 0 : _a.dispose();\n            chart.current = undefined;\n        };\n    }, []);\n    const onClick = React.useCallback((event) => {\n        if (chart.current && (event.ctrlKey || event.metaKey) && event.shiftKey) {\n            const dataUrl = chart.current.toDataUrl().replace('image/png', 'image/octet-stream');\n            const a = document.createElement('a');\n            a.href = dataUrl;\n            a.download = ((debug === null || debug === void 0 ? void 0 : debug.filename) || chart.current.id) + '.png';\n            a.click();\n        }\n    }, [id, chart]);\n    return React.createElement(\"div\", { id: id, onClick: onClick, className: `yagr ${className}`, ref: chartRef });\n});\nconst useTooltipState = (yagrRef, tooltipRef) => {\n    React.useEffect(() => {\n        var _a;\n        if (!yagrRef.current || !tooltipRef.current) {\n            return;\n        }\n        const tooltip = tooltipRef.current;\n        const yagr = yagrRef.current.yagr();\n        if (!yagr || !((_a = yagr === null || yagr === void 0 ? void 0 : yagr.plugins) === null || _a === void 0 ? void 0 : _a.tooltip)) {\n            return;\n        }\n        yagr.plugins.tooltip.on('render', (_, data) => {\n            tooltip.onChange(data);\n        });\n        yagr.plugins.tooltip.on('show', (_, data) => {\n            tooltip.onChange(data);\n        });\n        yagr.plugins.tooltip.on('show', (_, data) => {\n            tooltip.onChange(data);\n        });\n    }, [yagrRef.current]);\n};\nexports.useTooltipState = useTooltipState;\n","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_advancedFormat=t()}(this,(function(){\"use strict\";return function(e,t){var r=t.prototype,n=r.format;r.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return n.bind(this)(e);var s=this.$utils(),a=(e||\"YYYY-MM-DDTHH:mm:ssZ\").replace(/\\[([^\\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case\"Q\":return Math.ceil((t.$M+1)/3);case\"Do\":return r.ordinal(t.$D);case\"gggg\":return t.weekYear();case\"GGGG\":return t.isoWeekYear();case\"wo\":return r.ordinal(t.week(),\"W\");case\"w\":case\"ww\":return s.s(t.week(),\"w\"===e?1:2,\"0\");case\"W\":case\"WW\":return s.s(t.isoWeek(),\"W\"===e?1:2,\"0\");case\"k\":case\"kk\":return s.s(String(0===t.$H?24:t.$H),\"k\"===e?1:2,\"0\");case\"X\":return Math.floor(t.$d.getTime()/1e3);case\"x\":return t.$d.getTime();case\"z\":return\"[\"+t.offsetName()+\"]\";case\"zzz\":return\"[\"+t.offsetName(\"long\")+\"]\";default:return e}}));return n.bind(this)(a)}}}));","/**\n* Copyright (c) 2023, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* uPlot.js (Plot)\n* A small, fast chart for time series, lines, areas, ohlc & bars\n* https://github.com/leeoniya/uPlot (v1.6.27)\n*/\n\nconst FEAT_TIME          = true;\n\nconst pre = \"u-\";\n\nconst UPLOT          =       \"uplot\";\nconst ORI_HZ         = pre + \"hz\";\nconst ORI_VT         = pre + \"vt\";\nconst TITLE          = pre + \"title\";\nconst WRAP           = pre + \"wrap\";\nconst UNDER          = pre + \"under\";\nconst OVER           = pre + \"over\";\nconst AXIS           = pre + \"axis\";\nconst OFF            = pre + \"off\";\nconst SELECT         = pre + \"select\";\nconst CURSOR_X       = pre + \"cursor-x\";\nconst CURSOR_Y       = pre + \"cursor-y\";\nconst CURSOR_PT      = pre + \"cursor-pt\";\nconst LEGEND         = pre + \"legend\";\nconst LEGEND_LIVE    = pre + \"live\";\nconst LEGEND_INLINE  = pre + \"inline\";\nconst LEGEND_SERIES  = pre + \"series\";\nconst LEGEND_MARKER  = pre + \"marker\";\nconst LEGEND_LABEL   = pre + \"label\";\nconst LEGEND_VALUE   = pre + \"value\";\n\nconst WIDTH       = \"width\";\nconst HEIGHT      = \"height\";\nconst TOP         = \"top\";\nconst BOTTOM      = \"bottom\";\nconst LEFT        = \"left\";\nconst RIGHT       = \"right\";\nconst hexBlack    = \"#000\";\nconst transparent = hexBlack + \"0\";\n\nconst mousemove   = \"mousemove\";\nconst mousedown   = \"mousedown\";\nconst mouseup     = \"mouseup\";\nconst mouseenter  = \"mouseenter\";\nconst mouseleave  = \"mouseleave\";\nconst dblclick    = \"dblclick\";\nconst resize      = \"resize\";\nconst scroll      = \"scroll\";\n\nconst change      = \"change\";\nconst dppxchange  = \"dppxchange\";\n\nconst LEGEND_DISP = \"--\";\n\nconst domEnv = typeof window != 'undefined';\n\nconst doc = domEnv ? document  : null;\nconst win = domEnv ? window    : null;\nconst nav = domEnv ? navigator : null;\n\nlet pxRatio;\n\n//export const canHover = domEnv && !win.matchMedia('(hover: none)').matches;\n\nlet query;\n\nfunction setPxRatio() {\n\tlet _pxRatio = devicePixelRatio;\n\n\t// during print preview, Chrome fires off these dppx queries even without changes\n\tif (pxRatio != _pxRatio) {\n\t\tpxRatio = _pxRatio;\n\n\t\tquery && off(change, query, setPxRatio);\n\t\tquery = matchMedia(`(min-resolution: ${pxRatio - 0.001}dppx) and (max-resolution: ${pxRatio + 0.001}dppx)`);\n\t\ton(change, query, setPxRatio);\n\n\t\twin.dispatchEvent(new CustomEvent(dppxchange));\n\t}\n}\n\nfunction addClass(el, c) {\n\tif (c != null) {\n\t\tlet cl = el.classList;\n\t\t!cl.contains(c) && cl.add(c);\n\t}\n}\n\nfunction remClass(el, c) {\n\tlet cl = el.classList;\n\tcl.contains(c) && cl.remove(c);\n}\n\nfunction setStylePx(el, name, value) {\n\tel.style[name] = value + \"px\";\n}\n\nfunction placeTag(tag, cls, targ, refEl) {\n\tlet el = doc.createElement(tag);\n\n\tif (cls != null)\n\t\taddClass(el, cls);\n\n\tif (targ != null)\n\t\ttarg.insertBefore(el, refEl);\n\n\treturn el;\n}\n\nfunction placeDiv(cls, targ) {\n\treturn placeTag(\"div\", cls, targ);\n}\n\nconst xformCache = new WeakMap();\n\nfunction elTrans(el, xPos, yPos, xMax, yMax) {\n\tlet xform = \"translate(\" + xPos + \"px,\" + yPos + \"px)\";\n\tlet xformOld = xformCache.get(el);\n\n\tif (xform != xformOld) {\n\t\tel.style.transform = xform;\n\t\txformCache.set(el, xform);\n\n\t\tif (xPos < 0 || yPos < 0 || xPos > xMax || yPos > yMax)\n\t\t\taddClass(el, OFF);\n\t\telse\n\t\t\tremClass(el, OFF);\n\t}\n}\n\nconst colorCache = new WeakMap();\n\nfunction elColor(el, background, borderColor) {\n\tlet newColor = background + borderColor;\n\tlet oldColor = colorCache.get(el);\n\n\tif (newColor != oldColor) {\n\t\tcolorCache.set(el, newColor);\n\t\tel.style.background = background;\n\t\tel.style.borderColor = borderColor;\n\t}\n}\n\nconst sizeCache = new WeakMap();\n\nfunction elSize(el, newWid, newHgt, centered) {\n\tlet newSize = newWid + \"\" + newHgt;\n\tlet oldSize = sizeCache.get(el);\n\n\tif (newSize != oldSize) {\n\t\tsizeCache.set(el, newSize);\n\t\tel.style.height = newHgt + \"px\";\n\t\tel.style.width = newWid + \"px\";\n\t\tel.style.marginLeft = centered ? -newWid/2 + \"px\" : 0;\n\t\tel.style.marginTop = centered ? -newHgt/2 + \"px\" : 0;\n\t}\n}\n\nconst evOpts = {passive: true};\nconst evOpts2 = {...evOpts, capture: true};\n\nfunction on(ev, el, cb, capt) {\n\tel.addEventListener(ev, cb, capt ? evOpts2 : evOpts);\n}\n\nfunction off(ev, el, cb, capt) {\n\tel.removeEventListener(ev, cb, capt ? evOpts2 : evOpts);\n}\n\ndomEnv && setPxRatio();\n\n// binary search for index of closest value\nfunction closestIdx(num, arr, lo, hi) {\n\tlet mid;\n\tlo = lo || 0;\n\thi = hi || arr.length - 1;\n\tlet bitwise = hi <= 2147483647;\n\n\twhile (hi - lo > 1) {\n\t\tmid = bitwise ? (lo + hi) >> 1 : floor((lo + hi) / 2);\n\n\t\tif (arr[mid] < num)\n\t\t\tlo = mid;\n\t\telse\n\t\t\thi = mid;\n\t}\n\n\tif (num - arr[lo] <= arr[hi] - num)\n\t\treturn lo;\n\n\treturn hi;\n}\n\nfunction nonNullIdx(data, _i0, _i1, dir) {\n\tfor (let i = dir == 1 ? _i0 : _i1; i >= _i0 && i <= _i1; i += dir) {\n\t\tif (data[i] != null)\n\t\t\treturn i;\n\t}\n\n\treturn -1;\n}\n\nfunction getMinMax(data, _i0, _i1, sorted) {\n//\tconsole.log(\"getMinMax()\");\n\n\tlet _min = inf;\n\tlet _max = -inf;\n\n\tif (sorted == 1) {\n\t\t_min = data[_i0];\n\t\t_max = data[_i1];\n\t}\n\telse if (sorted == -1) {\n\t\t_min = data[_i1];\n\t\t_max = data[_i0];\n\t}\n\telse {\n\t\tfor (let i = _i0; i <= _i1; i++) {\n\t\t\tlet v = data[i];\n\n\t\t\tif (v != null) {\n\t\t\t\tif (v < _min)\n\t\t\t\t\t_min = v;\n\t\t\t\tif (v > _max)\n\t\t\t\t\t_max = v;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn [_min, _max];\n}\n\nfunction getMinMaxLog(data, _i0, _i1) {\n//\tconsole.log(\"getMinMax()\");\n\n\tlet _min = inf;\n\tlet _max = -inf;\n\n\tfor (let i = _i0; i <= _i1; i++) {\n\t\tlet v = data[i];\n\n\t\tif (v != null && v > 0) {\n\t\t\tif (v < _min)\n\t\t\t\t_min = v;\n\t\t\tif (v > _max)\n\t\t\t\t_max = v;\n\t\t}\n\t}\n\n\treturn [\n\t\t_min ==  inf ?  1 : _min,\n\t\t_max == -inf ? 10 : _max,\n\t];\n}\n\nfunction rangeLog(min, max, base, fullMags) {\n\tlet minSign = sign(min);\n\tlet maxSign = sign(max);\n\n\tlet logFn = base == 10 ? log10 : log2;\n\n\tif (min == max) {\n\t\tif (minSign == -1) {\n\t\t\tmin *= base;\n\t\t\tmax /= base;\n\t\t}\n\t\telse {\n\t\t\tmin /= base;\n\t\t\tmax *= base;\n\t\t}\n\t}\n\n\tlet growMinAbs = minSign == 1 ? floor : ceil;\n\tlet growMaxAbs = maxSign == 1 ? ceil : floor;\n\n\tlet minExp = growMinAbs(logFn(abs(min)));\n\tlet maxExp = growMaxAbs(logFn(abs(max)));\n\n\tlet minIncr = pow(base, minExp);\n\tlet maxIncr = pow(base, maxExp);\n\n\t// fix values like Math.pow(10, -5) === 0.000009999999999999999\n\tif (base == 10) {\n\t\tif (minExp < 0)\n\t\t\tminIncr = roundDec(minIncr, -minExp);\n\t\tif (maxExp < 0)\n\t\t\tmaxIncr = roundDec(maxIncr, -maxExp);\n\t}\n\n\tif (fullMags || base == 2) {\n\t\tmin = minIncr * minSign;\n\t\tmax = maxIncr * maxSign;\n\t}\n\telse {\n\t\tmin = incrRoundDn(min, minIncr);\n\t\tmax = incrRoundUp(max, maxIncr);\n\t}\n\n\treturn [min, max];\n}\n\nfunction rangeAsinh(min, max, base, fullMags) {\n\tlet minMax = rangeLog(min, max, base, fullMags);\n\n\tif (min == 0)\n\t\tminMax[0] = 0;\n\n\tif (max == 0)\n\t\tminMax[1] = 0;\n\n\treturn minMax;\n}\n\nconst rangePad = 0.1;\n\nconst autoRangePart = {\n\tmode: 3,\n\tpad: rangePad,\n};\n\nconst _eqRangePart = {\n\tpad:  0,\n\tsoft: null,\n\tmode: 0,\n};\n\nconst _eqRange = {\n\tmin: _eqRangePart,\n\tmax: _eqRangePart,\n};\n\n// this ensures that non-temporal/numeric y-axes get multiple-snapped padding added above/below\n// TODO: also account for incrs when snapping to ensure top of axis gets a tick & value\nfunction rangeNum(_min, _max, mult, extra) {\n\tif (isObj(mult))\n\t\treturn _rangeNum(_min, _max, mult);\n\n\t_eqRangePart.pad  = mult;\n\t_eqRangePart.soft = extra ? 0 : null;\n\t_eqRangePart.mode = extra ? 3 : 0;\n\n\treturn _rangeNum(_min, _max, _eqRange);\n}\n\n// nullish coalesce\nfunction ifNull(lh, rh) {\n\treturn lh == null ? rh : lh;\n}\n\n// checks if given index range in an array contains a non-null value\n// aka a range-bounded Array.some()\nfunction hasData(data, idx0, idx1) {\n\tidx0 = ifNull(idx0, 0);\n\tidx1 = ifNull(idx1, data.length - 1);\n\n\twhile (idx0 <= idx1) {\n\t\tif (data[idx0] != null)\n\t\t\treturn true;\n\t\tidx0++;\n\t}\n\n\treturn false;\n}\n\nfunction _rangeNum(_min, _max, cfg) {\n\tlet cmin = cfg.min;\n\tlet cmax = cfg.max;\n\n\tlet padMin = ifNull(cmin.pad, 0);\n\tlet padMax = ifNull(cmax.pad, 0);\n\n\tlet hardMin = ifNull(cmin.hard, -inf);\n\tlet hardMax = ifNull(cmax.hard,  inf);\n\n\tlet softMin = ifNull(cmin.soft,  inf);\n\tlet softMax = ifNull(cmax.soft, -inf);\n\n\tlet softMinMode = ifNull(cmin.mode, 0);\n\tlet softMaxMode = ifNull(cmax.mode, 0);\n\n\tlet delta = _max - _min;\n\tlet deltaMag = log10(delta);\n\n\tlet scalarMax = max(abs(_min), abs(_max));\n\tlet scalarMag = log10(scalarMax);\n\n\tlet scalarMagDelta = abs(scalarMag - deltaMag);\n\n\t// this handles situations like 89.7, 89.69999999999999\n\t// by assuming 0.001x deltas are precision errors\n//\tif (delta > 0 && delta < abs(_max) / 1e3)\n//\t\tdelta = 0;\n\n\t// treat data as flat if delta is less than 1 billionth\n\t// or range is 11+ orders of magnitude below raw values, e.g. 99999999.99999996 - 100000000.00000004\n\tif (delta < 1e-9 || scalarMagDelta > 10) {\n\t\tdelta = 0;\n\n\t\t// if soft mode is 2 and all vals are flat at 0, avoid the 0.1 * 1e3 fallback\n\t\t// this prevents 0,0,0 from ranging to -100,100 when softMin/softMax are -1,1\n\t\tif (_min == 0 || _max == 0) {\n\t\t\tdelta = 1e-9;\n\n\t\t\tif (softMinMode == 2 && softMin != inf)\n\t\t\t\tpadMin = 0;\n\n\t\t\tif (softMaxMode == 2 && softMax != -inf)\n\t\t\t\tpadMax = 0;\n\t\t}\n\t}\n\n\tlet nonZeroDelta = delta || scalarMax || 1e3;\n\tlet mag          = log10(nonZeroDelta);\n\tlet base         = pow(10, floor(mag));\n\n\tlet _padMin  = nonZeroDelta * (delta == 0 ? (_min == 0 ? .1 : 1) : padMin);\n\tlet _newMin  = roundDec(incrRoundDn(_min - _padMin, base/10), 9);\n\tlet _softMin = _min >= softMin && (softMinMode == 1 || softMinMode == 3 && _newMin <= softMin || softMinMode == 2 && _newMin >= softMin) ? softMin : inf;\n\tlet minLim   = max(hardMin, _newMin < _softMin && _min >= _softMin ? _softMin : min(_softMin, _newMin));\n\n\tlet _padMax  = nonZeroDelta * (delta == 0 ? (_max == 0 ? .1 : 1) : padMax);\n\tlet _newMax  = roundDec(incrRoundUp(_max + _padMax, base/10), 9);\n\tlet _softMax = _max <= softMax && (softMaxMode == 1 || softMaxMode == 3 && _newMax >= softMax || softMaxMode == 2 && _newMax <= softMax) ? softMax : -inf;\n\tlet maxLim   = min(hardMax, _newMax > _softMax && _max <= _softMax ? _softMax : max(_softMax, _newMax));\n\n\tif (minLim == maxLim && minLim == 0)\n\t\tmaxLim = 100;\n\n\treturn [minLim, maxLim];\n}\n\n// alternative: https://stackoverflow.com/a/2254896\nconst numFormatter = new Intl.NumberFormat(domEnv ? nav.language : 'en-US');\nconst fmtNum = val => numFormatter.format(val);\n\nconst M = Math;\n\nconst PI = M.PI;\nconst abs = M.abs;\nconst floor = M.floor;\nconst round = M.round;\nconst ceil = M.ceil;\nconst min = M.min;\nconst max = M.max;\nconst pow = M.pow;\nconst sign = M.sign;\nconst log10 = M.log10;\nconst log2 = M.log2;\n// TODO: seems like this needs to match asinh impl if the passed v is tweaked?\nconst sinh =  (v, linthresh = 1) => M.sinh(v) * linthresh;\nconst asinh = (v, linthresh = 1) => M.asinh(v / linthresh);\n\nconst inf = Infinity;\n\nfunction numIntDigits(x) {\n\treturn (log10((x ^ (x >> 31)) - (x >> 31)) | 0) + 1;\n}\n\nfunction clamp(num, _min, _max) {\n\treturn min(max(num, _min), _max);\n}\n\nfunction fnOrSelf(v) {\n\treturn typeof v == \"function\" ? v : () => v;\n}\n\nconst noop = () => {};\n\nconst retArg0 = _0 => _0;\n\nconst retArg1 = (_0, _1) => _1;\n\nconst retNull = _ => null;\n\nconst retTrue = _ => true;\n\nconst retEq = (a, b) => a == b;\n\n// this will probably prevent tick incrs > 14 decimal places\n// (we generate up to 17 dec, see fixedDec const)\nconst fixFloat = v => roundDec(v, 14);\n\nfunction incrRound(num, incr) {\n\treturn fixFloat(roundDec(fixFloat(num/incr))*incr);\n}\n\nfunction incrRoundUp(num, incr) {\n\treturn fixFloat(ceil(fixFloat(num/incr))*incr);\n}\n\nfunction incrRoundDn(num, incr) {\n\treturn fixFloat(floor(fixFloat(num/incr))*incr);\n}\n\n// https://stackoverflow.com/a/48764436\n// rounds half away from zero\nfunction roundDec(val, dec = 0) {\n\tif (isInt(val))\n\t\treturn val;\n//\telse if (dec == 0)\n//\t\treturn round(val);\n\n\tlet p = 10 ** dec;\n\tlet n = (val * p) * (1 + Number.EPSILON);\n\treturn round(n) / p;\n}\n\nconst fixedDec = new Map();\n\nfunction guessDec(num) {\n\treturn ((\"\"+num).split(\".\")[1] || \"\").length;\n}\n\nfunction genIncrs(base, minExp, maxExp, mults) {\n\tlet incrs = [];\n\n\tlet multDec = mults.map(guessDec);\n\n\tfor (let exp = minExp; exp < maxExp; exp++) {\n\t\tlet expa = abs(exp);\n\t\tlet mag = roundDec(pow(base, exp), expa);\n\n\t\tfor (let i = 0; i < mults.length; i++) {\n\t\t\tlet _incr = mults[i] * mag;\n\t\t\tlet dec = (_incr >= 0 && exp >= 0 ? 0 : expa) + (exp >= multDec[i] ? 0 : multDec[i]);\n\t\t\tlet incr = roundDec(_incr, dec);\n\t\t\tincrs.push(incr);\n\t\t\tfixedDec.set(incr, dec);\n\t\t}\n\t}\n\n\treturn incrs;\n}\n\n//export const assign = Object.assign;\n\nconst EMPTY_OBJ = {};\nconst EMPTY_ARR = [];\n\nconst nullNullTuple = [null, null];\n\nconst isArr = Array.isArray;\nconst isInt = Number.isInteger;\nconst isUndef = v => v === void 0;\n\nfunction isStr(v) {\n\treturn typeof v == 'string';\n}\n\nfunction isObj(v) {\n\tlet is = false;\n\n\tif (v != null) {\n\t\tlet c = v.constructor;\n\t\tis = c == null || c == Object;\n\t}\n\n\treturn is;\n}\n\nfunction fastIsObj(v) {\n\treturn v != null && typeof v == 'object';\n}\n\nconst TypedArray = Object.getPrototypeOf(Uint8Array);\n\nfunction copy(o, _isObj = isObj) {\n\tlet out;\n\n\tif (isArr(o)) {\n\t\tlet val = o.find(v => v != null);\n\n\t\tif (isArr(val) || _isObj(val)) {\n\t\t\tout = Array(o.length);\n\t\t\tfor (let i = 0; i < o.length; i++)\n\t\t\t\tout[i] = copy(o[i], _isObj);\n\t\t}\n\t\telse\n\t\t\tout = o.slice();\n\t}\n\telse if (o instanceof TypedArray) // also (ArrayBuffer.isView(o) && !(o instanceof DataView))\n\t\tout = o.slice();\n\telse if (_isObj(o)) {\n\t\tout = {};\n\t\tfor (let k in o)\n\t\t\tout[k] = copy(o[k], _isObj);\n\t}\n\telse\n\t\tout = o;\n\n\treturn out;\n}\n\nfunction assign(targ) {\n\tlet args = arguments;\n\n\tfor (let i = 1; i < args.length; i++) {\n\t\tlet src = args[i];\n\n\t\tfor (let key in src) {\n\t\t\tif (isObj(targ[key]))\n\t\t\t\tassign(targ[key], copy(src[key]));\n\t\t\telse\n\t\t\t\ttarg[key] = copy(src[key]);\n\t\t}\n\t}\n\n\treturn targ;\n}\n\n// nullModes\nconst NULL_REMOVE = 0;  // nulls are converted to undefined (e.g. for spanGaps: true)\nconst NULL_RETAIN = 1;  // nulls are retained, with alignment artifacts set to undefined (default)\nconst NULL_EXPAND = 2;  // nulls are expanded to include any adjacent alignment artifacts\n\n// sets undefined values to nulls when adjacent to existing nulls (minesweeper)\nfunction nullExpand(yVals, nullIdxs, alignedLen) {\n\tfor (let i = 0, xi, lastNullIdx = -1; i < nullIdxs.length; i++) {\n\t\tlet nullIdx = nullIdxs[i];\n\n\t\tif (nullIdx > lastNullIdx) {\n\t\t\txi = nullIdx - 1;\n\t\t\twhile (xi >= 0 && yVals[xi] == null)\n\t\t\t\tyVals[xi--] = null;\n\n\t\t\txi = nullIdx + 1;\n\t\t\twhile (xi < alignedLen && yVals[xi] == null)\n\t\t\t\tyVals[lastNullIdx = xi++] = null;\n\t\t}\n\t}\n}\n\n// nullModes is a tables-matched array indicating how to treat nulls in each series\n// output is sorted ASC on the joined field (table[0]) and duplicate join values are collapsed\nfunction join(tables, nullModes) {\n\tif (allHeadersSame(tables)) {\n\t//\tconsole.log('cheap join!');\n\n\t\tlet table = tables[0].slice();\n\n\t\tfor (let i = 1; i < tables.length; i++)\n\t\t\ttable.push(...tables[i].slice(1));\n\n\t\tif (!isAsc(table[0]))\n\t\t\ttable = sortCols(table);\n\n\t\treturn table;\n\t}\n\n\tlet xVals = new Set();\n\n\tfor (let ti = 0; ti < tables.length; ti++) {\n\t\tlet t = tables[ti];\n\t\tlet xs = t[0];\n\t\tlet len = xs.length;\n\n\t\tfor (let i = 0; i < len; i++)\n\t\t\txVals.add(xs[i]);\n\t}\n\n\tlet data = [Array.from(xVals).sort((a, b) => a - b)];\n\n\tlet alignedLen = data[0].length;\n\n\tlet xIdxs = new Map();\n\n\tfor (let i = 0; i < alignedLen; i++)\n\t\txIdxs.set(data[0][i], i);\n\n\tfor (let ti = 0; ti < tables.length; ti++) {\n\t\tlet t = tables[ti];\n\t\tlet xs = t[0];\n\n\t\tfor (let si = 1; si < t.length; si++) {\n\t\t\tlet ys = t[si];\n\n\t\t\tlet yVals = Array(alignedLen).fill(undefined);\n\n\t\t\tlet nullMode = nullModes ? nullModes[ti][si] : NULL_RETAIN;\n\n\t\t\tlet nullIdxs = [];\n\n\t\t\tfor (let i = 0; i < ys.length; i++) {\n\t\t\t\tlet yVal = ys[i];\n\t\t\t\tlet alignedIdx = xIdxs.get(xs[i]);\n\n\t\t\t\tif (yVal === null) {\n\t\t\t\t\tif (nullMode != NULL_REMOVE) {\n\t\t\t\t\t\tyVals[alignedIdx] = yVal;\n\n\t\t\t\t\t\tif (nullMode == NULL_EXPAND)\n\t\t\t\t\t\t\tnullIdxs.push(alignedIdx);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tyVals[alignedIdx] = yVal;\n\t\t\t}\n\n\t\t\tnullExpand(yVals, nullIdxs, alignedLen);\n\n\t\t\tdata.push(yVals);\n\t\t}\n\t}\n\n\treturn data;\n}\n\nconst microTask = typeof queueMicrotask == \"undefined\" ? fn => Promise.resolve().then(fn) : queueMicrotask;\n\n// TODO: https://github.com/dy/sort-ids (~2x faster for 1e5+ arrays)\nfunction sortCols(table) {\n\tlet head = table[0];\n\tlet rlen = head.length;\n\n\tlet idxs = Array(rlen);\n\tfor (let i = 0; i < idxs.length; i++)\n\t\tidxs[i] = i;\n\n\tidxs.sort((i0, i1) => head[i0] - head[i1]);\n\n\tlet table2 = [];\n\tfor (let i = 0; i < table.length; i++) {\n\t\tlet row = table[i];\n\t\tlet row2 = Array(rlen);\n\n\t\tfor (let j = 0; j < rlen; j++)\n\t\t\trow2[j] = row[idxs[j]];\n\n\t\ttable2.push(row2);\n\t}\n\n\treturn table2;\n}\n\n// test if we can do cheap join (all join fields same)\nfunction allHeadersSame(tables) {\n\tlet vals0 = tables[0][0];\n\tlet len0 = vals0.length;\n\n\tfor (let i = 1; i < tables.length; i++) {\n\t\tlet vals1 = tables[i][0];\n\n\t\tif (vals1.length != len0)\n\t\t\treturn false;\n\n\t\tif (vals1 != vals0) {\n\t\t\tfor (let j = 0; j < len0; j++) {\n\t\t\t\tif (vals1[j] != vals0[j])\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true;\n}\n\nfunction isAsc(vals, samples = 100) {\n\tconst len = vals.length;\n\n\t// empty or single value\n\tif (len <= 1)\n\t\treturn true;\n\n\t// skip leading & trailing nullish\n\tlet firstIdx = 0;\n\tlet lastIdx = len - 1;\n\n\twhile (firstIdx <= lastIdx && vals[firstIdx] == null)\n\t\tfirstIdx++;\n\n\twhile (lastIdx >= firstIdx && vals[lastIdx] == null)\n\t\tlastIdx--;\n\n\t// all nullish or one value surrounded by nullish\n\tif (lastIdx <= firstIdx)\n\t\treturn true;\n\n\tconst stride = max(1, floor((lastIdx - firstIdx + 1) / samples));\n\n\tfor (let prevVal = vals[firstIdx], i = firstIdx + stride; i <= lastIdx; i += stride) {\n\t\tconst v = vals[i];\n\n\t\tif (v != null) {\n\t\t\tif (v <= prevVal)\n\t\t\t\treturn false;\n\n\t\t\tprevVal = v;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nconst months = [\n\t\"January\",\n\t\"February\",\n\t\"March\",\n\t\"April\",\n\t\"May\",\n\t\"June\",\n\t\"July\",\n\t\"August\",\n\t\"September\",\n\t\"October\",\n\t\"November\",\n\t\"December\",\n];\n\nconst days = [\n\t\"Sunday\",\n\t\"Monday\",\n\t\"Tuesday\",\n\t\"Wednesday\",\n\t\"Thursday\",\n\t\"Friday\",\n\t\"Saturday\",\n];\n\nfunction slice3(str) {\n\treturn str.slice(0, 3);\n}\n\nconst days3 = days.map(slice3);\n\nconst months3 = months.map(slice3);\n\nconst engNames = {\n\tMMMM: months,\n\tMMM:  months3,\n\tWWWW: days,\n\tWWW:  days3,\n};\n\nfunction zeroPad2(int) {\n\treturn (int < 10 ? '0' : '') + int;\n}\n\nfunction zeroPad3(int) {\n\treturn (int < 10 ? '00' : int < 100 ? '0' : '') + int;\n}\n\n/*\nfunction suffix(int) {\n\tlet mod10 = int % 10;\n\n\treturn int + (\n\t\tmod10 == 1 && int != 11 ? \"st\" :\n\t\tmod10 == 2 && int != 12 ? \"nd\" :\n\t\tmod10 == 3 && int != 13 ? \"rd\" : \"th\"\n\t);\n}\n*/\n\nconst subs = {\n\t// 2019\n\tYYYY:\td => d.getFullYear(),\n\t// 19\n\tYY:\t\td => (d.getFullYear()+'').slice(2),\n\t// July\n\tMMMM:\t(d, names) => names.MMMM[d.getMonth()],\n\t// Jul\n\tMMM:\t(d, names) => names.MMM[d.getMonth()],\n\t// 07\n\tMM:\t\td => zeroPad2(d.getMonth()+1),\n\t// 7\n\tM:\t\td => d.getMonth()+1,\n\t// 09\n\tDD:\t\td => zeroPad2(d.getDate()),\n\t// 9\n\tD:\t\td => d.getDate(),\n\t// Monday\n\tWWWW:\t(d, names) => names.WWWW[d.getDay()],\n\t// Mon\n\tWWW:\t(d, names) => names.WWW[d.getDay()],\n\t// 03\n\tHH:\t\td => zeroPad2(d.getHours()),\n\t// 3\n\tH:\t\td => d.getHours(),\n\t// 9 (12hr, unpadded)\n\th:\t\td => {let h = d.getHours(); return h == 0 ? 12 : h > 12 ? h - 12 : h;},\n\t// AM\n\tAA:\t\td => d.getHours() >= 12 ? 'PM' : 'AM',\n\t// am\n\taa:\t\td => d.getHours() >= 12 ? 'pm' : 'am',\n\t// a\n\ta:\t\td => d.getHours() >= 12 ? 'p' : 'a',\n\t// 09\n\tmm:\t\td => zeroPad2(d.getMinutes()),\n\t// 9\n\tm:\t\td => d.getMinutes(),\n\t// 09\n\tss:\t\td => zeroPad2(d.getSeconds()),\n\t// 9\n\ts:\t\td => d.getSeconds(),\n\t// 374\n\tfff:\td => zeroPad3(d.getMilliseconds()),\n};\n\nfunction fmtDate(tpl, names) {\n\tnames = names || engNames;\n\tlet parts = [];\n\n\tlet R = /\\{([a-z]+)\\}|[^{]+/gi, m;\n\n\twhile (m = R.exec(tpl))\n\t\tparts.push(m[0][0] == '{' ? subs[m[1]] : m[0]);\n\n\treturn d => {\n\t\tlet out = '';\n\n\t\tfor (let i = 0; i < parts.length; i++)\n\t\t\tout += typeof parts[i] == \"string\" ? parts[i] : parts[i](d, names);\n\n\t\treturn out;\n\t}\n}\n\nconst localTz = new Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n// https://stackoverflow.com/questions/15141762/how-to-initialize-a-javascript-date-to-a-particular-time-zone/53652131#53652131\nfunction tzDate(date, tz) {\n\tlet date2;\n\n\t// perf optimization\n\tif (tz == 'UTC' || tz == 'Etc/UTC')\n\t\tdate2 = new Date(+date + date.getTimezoneOffset() * 6e4);\n\telse if (tz == localTz)\n\t\tdate2 = date;\n\telse {\n\t\tdate2 = new Date(date.toLocaleString('en-US', {timeZone: tz}));\n\t\tdate2.setMilliseconds(date.getMilliseconds());\n\t}\n\n\treturn date2;\n}\n\n//export const series = [];\n\n// default formatters:\n\nconst onlyWhole = v => v % 1 == 0;\n\nconst allMults = [1,2,2.5,5];\n\n// ...0.01, 0.02, 0.025, 0.05, 0.1, 0.2, 0.25, 0.5\nconst decIncrs = genIncrs(10, -16, 0, allMults);\n\n// 1, 2, 2.5, 5, 10, 20, 25, 50...\nconst oneIncrs = genIncrs(10, 0, 16, allMults);\n\n// 1, 2,      5, 10, 20, 25, 50...\nconst wholeIncrs = oneIncrs.filter(onlyWhole);\n\nconst numIncrs = decIncrs.concat(oneIncrs);\n\nconst NL = \"\\n\";\n\nconst yyyy    = \"{YYYY}\";\nconst NLyyyy  = NL + yyyy;\nconst md      = \"{M}/{D}\";\nconst NLmd    = NL + md;\nconst NLmdyy  = NLmd + \"/{YY}\";\n\nconst aa      = \"{aa}\";\nconst hmm     = \"{h}:{mm}\";\nconst hmmaa   = hmm + aa;\nconst NLhmmaa = NL + hmmaa;\nconst ss      = \":{ss}\";\n\nconst _ = null;\n\nfunction genTimeStuffs(ms) {\n\tlet\ts  = ms * 1e3,\n\t\tm  = s  * 60,\n\t\th  = m  * 60,\n\t\td  = h  * 24,\n\t\tmo = d  * 30,\n\t\ty  = d  * 365;\n\n\t// min of 1e-3 prevents setting a temporal x ticks too small since Date objects cannot advance ticks smaller than 1ms\n\tlet subSecIncrs = ms == 1 ? genIncrs(10, 0, 3, allMults).filter(onlyWhole) : genIncrs(10, -3, 0, allMults);\n\n\tlet timeIncrs = subSecIncrs.concat([\n\t\t// minute divisors (# of secs)\n\t\ts,\n\t\ts * 5,\n\t\ts * 10,\n\t\ts * 15,\n\t\ts * 30,\n\t\t// hour divisors (# of mins)\n\t\tm,\n\t\tm * 5,\n\t\tm * 10,\n\t\tm * 15,\n\t\tm * 30,\n\t\t// day divisors (# of hrs)\n\t\th,\n\t\th * 2,\n\t\th * 3,\n\t\th * 4,\n\t\th * 6,\n\t\th * 8,\n\t\th * 12,\n\t\t// month divisors TODO: need more?\n\t\td,\n\t\td * 2,\n\t\td * 3,\n\t\td * 4,\n\t\td * 5,\n\t\td * 6,\n\t\td * 7,\n\t\td * 8,\n\t\td * 9,\n\t\td * 10,\n\t\td * 15,\n\t\t// year divisors (# months, approx)\n\t\tmo,\n\t\tmo * 2,\n\t\tmo * 3,\n\t\tmo * 4,\n\t\tmo * 6,\n\t\t// century divisors\n\t\ty,\n\t\ty * 2,\n\t\ty * 5,\n\t\ty * 10,\n\t\ty * 25,\n\t\ty * 50,\n\t\ty * 100,\n\t]);\n\n\t// [0]:   minimum num secs in the tick incr\n\t// [1]:   default tick format\n\t// [2-7]: rollover tick formats\n\t// [8]:   mode: 0: replace [1] -> [2-7], 1: concat [1] + [2-7]\n\tconst _timeAxisStamps = [\n\t//   tick incr    default          year                    month   day                   hour    min       sec   mode\n\t\t[y,           yyyy,            _,                      _,      _,                    _,      _,        _,       1],\n\t\t[d * 28,      \"{MMM}\",         NLyyyy,                 _,      _,                    _,      _,        _,       1],\n\t\t[d,           md,              NLyyyy,                 _,      _,                    _,      _,        _,       1],\n\t\t[h,           \"{h}\" + aa,      NLmdyy,                 _,      NLmd,                 _,      _,        _,       1],\n\t\t[m,           hmmaa,           NLmdyy,                 _,      NLmd,                 _,      _,        _,       1],\n\t\t[s,           ss,              NLmdyy + \" \" + hmmaa,   _,      NLmd + \" \" + hmmaa,   _,      NLhmmaa,  _,       1],\n\t\t[ms,          ss + \".{fff}\",   NLmdyy + \" \" + hmmaa,   _,      NLmd + \" \" + hmmaa,   _,      NLhmmaa,  _,       1],\n\t];\n\n\t// the ensures that axis ticks, values & grid are aligned to logical temporal breakpoints and not an arbitrary timestamp\n\t// https://www.timeanddate.com/time/dst/\n\t// https://www.timeanddate.com/time/dst/2019.html\n\t// https://www.epochconverter.com/timezones\n\tfunction timeAxisSplits(tzDate) {\n\t\treturn (self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace) => {\n\t\t\tlet splits = [];\n\t\t\tlet isYr = foundIncr >= y;\n\t\t\tlet isMo = foundIncr >= mo && foundIncr < y;\n\n\t\t\t// get the timezone-adjusted date\n\t\t\tlet minDate = tzDate(scaleMin);\n\t\t\tlet minDateTs = roundDec(minDate * ms, 3);\n\n\t\t\t// get ts of 12am (this lands us at or before the original scaleMin)\n\t\t\tlet minMin = mkDate(minDate.getFullYear(), isYr ? 0 : minDate.getMonth(), isMo || isYr ? 1 : minDate.getDate());\n\t\t\tlet minMinTs = roundDec(minMin * ms, 3);\n\n\t\t\tif (isMo || isYr) {\n\t\t\t\tlet moIncr = isMo ? foundIncr / mo : 0;\n\t\t\t\tlet yrIncr = isYr ? foundIncr / y  : 0;\n\t\t\t//\tlet tzOffset = scaleMin - minDateTs;\t\t// needed?\n\t\t\t\tlet split = minDateTs == minMinTs ? minDateTs : roundDec(mkDate(minMin.getFullYear() + yrIncr, minMin.getMonth() + moIncr, 1) * ms, 3);\n\t\t\t\tlet splitDate = new Date(round(split / ms));\n\t\t\t\tlet baseYear = splitDate.getFullYear();\n\t\t\t\tlet baseMonth = splitDate.getMonth();\n\n\t\t\t\tfor (let i = 0; split <= scaleMax; i++) {\n\t\t\t\t\tlet next = mkDate(baseYear + yrIncr * i, baseMonth + moIncr * i, 1);\n\t\t\t\t\tlet offs = next - tzDate(roundDec(next * ms, 3));\n\n\t\t\t\t\tsplit = roundDec((+next + offs) * ms, 3);\n\n\t\t\t\t\tif (split <= scaleMax)\n\t\t\t\t\t\tsplits.push(split);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet incr0 = foundIncr >= d ? d : foundIncr;\n\t\t\t\tlet tzOffset = floor(scaleMin) - floor(minDateTs);\n\t\t\t\tlet split = minMinTs + tzOffset + incrRoundUp(minDateTs - minMinTs, incr0);\n\t\t\t\tsplits.push(split);\n\n\t\t\t\tlet date0 = tzDate(split);\n\n\t\t\t\tlet prevHour = date0.getHours() + (date0.getMinutes() / m) + (date0.getSeconds() / h);\n\t\t\t\tlet incrHours = foundIncr / h;\n\n\t\t\t\tlet minSpace = self.axes[axisIdx]._space;\n\t\t\t\tlet pctSpace = foundSpace / minSpace;\n\n\t\t\t\twhile (1) {\n\t\t\t\t\tsplit = roundDec(split + foundIncr, ms == 1 ? 0 : 3);\n\n\t\t\t\t\tif (split > scaleMax)\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tif (incrHours > 1) {\n\t\t\t\t\t\tlet expectedHour = floor(roundDec(prevHour + incrHours, 6)) % 24;\n\t\t\t\t\t\tlet splitDate = tzDate(split);\n\t\t\t\t\t\tlet actualHour = splitDate.getHours();\n\n\t\t\t\t\t\tlet dstShift = actualHour - expectedHour;\n\n\t\t\t\t\t\tif (dstShift > 1)\n\t\t\t\t\t\t\tdstShift = -1;\n\n\t\t\t\t\t\tsplit -= dstShift * h;\n\n\t\t\t\t\t\tprevHour = (prevHour + incrHours) % 24;\n\n\t\t\t\t\t\t// add a tick only if it's further than 70% of the min allowed label spacing\n\t\t\t\t\t\tlet prevSplit = splits[splits.length - 1];\n\t\t\t\t\t\tlet pctIncr = roundDec((split - prevSplit) / foundIncr, 3);\n\n\t\t\t\t\t\tif (pctIncr * pctSpace >= .7)\n\t\t\t\t\t\t\tsplits.push(split);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tsplits.push(split);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn splits;\n\t\t}\n\t}\n\n\treturn [\n\t\ttimeIncrs,\n\t\t_timeAxisStamps,\n\t\ttimeAxisSplits,\n\t];\n}\n\nconst [ timeIncrsMs, _timeAxisStampsMs, timeAxisSplitsMs ] = genTimeStuffs(1);\nconst [ timeIncrsS,  _timeAxisStampsS,  timeAxisSplitsS  ] = genTimeStuffs(1e-3);\n\n// base 2\ngenIncrs(2, -53, 53, [1]);\n\n/*\nconsole.log({\n\tdecIncrs,\n\toneIncrs,\n\twholeIncrs,\n\tnumIncrs,\n\ttimeIncrs,\n\tfixedDec,\n});\n*/\n\nfunction timeAxisStamps(stampCfg, fmtDate) {\n\treturn stampCfg.map(s => s.map((v, i) =>\n\t\ti == 0 || i == 8 || v == null ? v : fmtDate(i == 1 || s[8] == 0 ? v : s[1] + v)\n\t));\n}\n\n// TODO: will need to accept spaces[] and pull incr into the loop when grid will be non-uniform, eg for log scales.\n// currently we ignore this for months since they're *nearly* uniform and the added complexity is not worth it\nfunction timeAxisVals(tzDate, stamps) {\n\treturn (self, splits, axisIdx, foundSpace, foundIncr) => {\n\t\tlet s = stamps.find(s => foundIncr >= s[0]) || stamps[stamps.length - 1];\n\n\t\t// these track boundaries when a full label is needed again\n\t\tlet prevYear;\n\t\tlet prevMnth;\n\t\tlet prevDate;\n\t\tlet prevHour;\n\t\tlet prevMins;\n\t\tlet prevSecs;\n\n\t\treturn splits.map(split => {\n\t\t\tlet date = tzDate(split);\n\n\t\t\tlet newYear = date.getFullYear();\n\t\t\tlet newMnth = date.getMonth();\n\t\t\tlet newDate = date.getDate();\n\t\t\tlet newHour = date.getHours();\n\t\t\tlet newMins = date.getMinutes();\n\t\t\tlet newSecs = date.getSeconds();\n\n\t\t\tlet stamp = (\n\t\t\t\tnewYear != prevYear && s[2] ||\n\t\t\t\tnewMnth != prevMnth && s[3] ||\n\t\t\t\tnewDate != prevDate && s[4] ||\n\t\t\t\tnewHour != prevHour && s[5] ||\n\t\t\t\tnewMins != prevMins && s[6] ||\n\t\t\t\tnewSecs != prevSecs && s[7] ||\n\t\t\t\t                       s[1]\n\t\t\t);\n\n\t\t\tprevYear = newYear;\n\t\t\tprevMnth = newMnth;\n\t\t\tprevDate = newDate;\n\t\t\tprevHour = newHour;\n\t\t\tprevMins = newMins;\n\t\t\tprevSecs = newSecs;\n\n\t\t\treturn stamp(date);\n\t\t});\n\t}\n}\n\n// for when axis.values is defined as a static fmtDate template string\nfunction timeAxisVal(tzDate, dateTpl) {\n\tlet stamp = fmtDate(dateTpl);\n\treturn (self, splits, axisIdx, foundSpace, foundIncr) => splits.map(split => stamp(tzDate(split)));\n}\n\nfunction mkDate(y, m, d) {\n\treturn new Date(y, m, d);\n}\n\nfunction timeSeriesStamp(stampCfg, fmtDate) {\n\treturn fmtDate(stampCfg);\n}\nconst _timeSeriesStamp = '{YYYY}-{MM}-{DD} {h}:{mm}{aa}';\n\nfunction timeSeriesVal(tzDate, stamp) {\n\treturn (self, val, seriesIdx, dataIdx) => dataIdx == null ? LEGEND_DISP : stamp(tzDate(val));\n}\n\nfunction legendStroke(self, seriesIdx) {\n\tlet s = self.series[seriesIdx];\n\treturn s.width ? s.stroke(self, seriesIdx) : s.points.width ? s.points.stroke(self, seriesIdx) : null;\n}\n\nfunction legendFill(self, seriesIdx) {\n\treturn self.series[seriesIdx].fill(self, seriesIdx);\n}\n\nconst legendOpts = {\n\tshow: true,\n\tlive: true,\n\tisolate: false,\n\tmount: noop,\n\tmarkers: {\n\t\tshow: true,\n\t\twidth: 2,\n\t\tstroke: legendStroke,\n\t\tfill: legendFill,\n\t\tdash: \"solid\",\n\t},\n\tidx: null,\n\tidxs: null,\n\tvalues: [],\n};\n\nfunction cursorPointShow(self, si) {\n\tlet o = self.cursor.points;\n\n\tlet pt = placeDiv();\n\n\tlet size = o.size(self, si);\n\tsetStylePx(pt, WIDTH, size);\n\tsetStylePx(pt, HEIGHT, size);\n\n\tlet mar = size / -2;\n\tsetStylePx(pt, \"marginLeft\", mar);\n\tsetStylePx(pt, \"marginTop\", mar);\n\n\tlet width = o.width(self, si, size);\n\twidth && setStylePx(pt, \"borderWidth\", width);\n\n\treturn pt;\n}\n\nfunction cursorPointFill(self, si) {\n\tlet sp = self.series[si].points;\n\treturn sp._fill || sp._stroke;\n}\n\nfunction cursorPointStroke(self, si) {\n\tlet sp = self.series[si].points;\n\treturn sp._stroke || sp._fill;\n}\n\nfunction cursorPointSize(self, si) {\n\tlet sp = self.series[si].points;\n\treturn sp.size;\n}\n\nfunction dataIdx(self, seriesIdx, cursorIdx) {\n\treturn cursorIdx;\n}\n\nconst moveTuple = [0,0];\n\nfunction cursorMove(self, mouseLeft1, mouseTop1) {\n\tmoveTuple[0] = mouseLeft1;\n\tmoveTuple[1] = mouseTop1;\n\treturn moveTuple;\n}\n\nfunction filtBtn0(self, targ, handle, onlyTarg = true) {\n\treturn e => {\n\t\te.button == 0 && (!onlyTarg || e.target == targ) && handle(e);\n\t};\n}\n\nfunction filtTarg(self, targ, handle, onlyTarg = true) {\n\treturn e => {\n\t\t(!onlyTarg || e.target == targ) && handle(e);\n\t};\n}\n\nconst cursorOpts = {\n\tshow: true,\n\tx: true,\n\ty: true,\n\tlock: false,\n\tmove: cursorMove,\n\tpoints: {\n\t\tshow:   cursorPointShow,\n\t\tsize:   cursorPointSize,\n\t\twidth:  0,\n\t\tstroke: cursorPointStroke,\n\t\tfill:   cursorPointFill,\n\t},\n\n\tbind: {\n\t\tmousedown:   filtBtn0,\n\t\tmouseup:     filtBtn0,\n\t\tclick:       filtBtn0, // legend clicks, not .u-over clicks\n\t\tdblclick:    filtBtn0,\n\n\t\tmousemove:   filtTarg,\n\t\tmouseleave:  filtTarg,\n\t\tmouseenter:  filtTarg,\n\t},\n\n\tdrag: {\n\t\tsetScale: true,\n\t\tx: true,\n\t\ty: false,\n\t\tdist: 0,\n\t\tuni: null,\n\t\tclick: (self, e) => {\n\t\t//\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t},\n\t\t_x: false,\n\t\t_y: false,\n\t},\n\n\tfocus: {\n\t\tprox: -1,\n\t\tbias: 0,\n\t},\n\n\tleft: -10,\n\ttop: -10,\n\tidx: null,\n\tdataIdx,\n\tidxs: null,\n\n\tevent: null,\n};\n\nconst axisLines = {\n\tshow: true,\n\tstroke: \"rgba(0,0,0,0.07)\",\n\twidth: 2,\n//\tdash: [],\n};\n\nconst grid = assign({}, axisLines, {\n\tfilter: retArg1,\n});\n\nconst ticks = assign({}, grid, {\n\tsize: 10,\n});\n\nconst border = assign({}, axisLines, {\n\tshow: false,\n});\n\nconst font      = '12px system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"';\nconst labelFont = \"bold \" + font;\nconst lineGap = 1.5;\t// font-size multiplier\n\nconst xAxisOpts = {\n\tshow: true,\n\tscale: \"x\",\n\tstroke: hexBlack,\n\tspace: 50,\n\tgap: 5,\n\tsize: 50,\n\tlabelGap: 0,\n\tlabelSize: 30,\n\tlabelFont,\n\tside: 2,\n//\tclass: \"x-vals\",\n//\tincrs: timeIncrs,\n//\tvalues: timeVals,\n//\tfilter: retArg1,\n\tgrid,\n\tticks,\n\tborder,\n\tfont,\n\tlineGap,\n\trotate: 0,\n};\n\nconst numSeriesLabel = \"Value\";\nconst timeSeriesLabel = \"Time\";\n\nconst xSeriesOpts = {\n\tshow: true,\n\tscale: \"x\",\n\tauto: false,\n\tsorted: 1,\n//\tlabel: \"Time\",\n//\tvalue: v => stamp(new Date(v * 1e3)),\n\n\t// internal caches\n\tmin: inf,\n\tmax: -inf,\n\tidxs: [],\n};\n\nfunction numAxisVals(self, splits, axisIdx, foundSpace, foundIncr) {\n\treturn splits.map(v => v == null ? \"\" : fmtNum(v));\n}\n\nfunction numAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n\tlet splits = [];\n\n\tlet numDec = fixedDec.get(foundIncr) || 0;\n\n\tscaleMin = forceMin ? scaleMin : roundDec(incrRoundUp(scaleMin, foundIncr), numDec);\n\n\tfor (let val = scaleMin; val <= scaleMax; val = roundDec(val + foundIncr, numDec))\n\t\tsplits.push(Object.is(val, -0) ? 0 : val);\t\t// coalesces -0\n\n\treturn splits;\n}\n\n// this doesnt work for sin, which needs to come off from 0 independently in pos and neg dirs\nfunction logAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n\tconst splits = [];\n\n\tconst logBase = self.scales[self.axes[axisIdx].scale].log;\n\n\tconst logFn = logBase == 10 ? log10 : log2;\n\n\tconst exp = floor(logFn(scaleMin));\n\n\tfoundIncr = pow(logBase, exp);\n\n\tif (logBase == 10 && exp < 0)\n\t\tfoundIncr = roundDec(foundIncr, -exp);\n\n\tlet split = scaleMin;\n\n\tdo {\n\t\tsplits.push(split);\n\t\tsplit = split + foundIncr;\n\n\t\tif (logBase == 10)\n\t\t\tsplit = roundDec(split, fixedDec.get(foundIncr));\n\n\t\tif (split >= foundIncr * logBase)\n\t\t\tfoundIncr = split;\n\n\t} while (split <= scaleMax);\n\n\treturn splits;\n}\n\nfunction asinhAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n\tlet sc = self.scales[self.axes[axisIdx].scale];\n\n\tlet linthresh = sc.asinh;\n\n\tlet posSplits = scaleMax > linthresh ? logAxisSplits(self, axisIdx, max(linthresh, scaleMin), scaleMax, foundIncr) : [linthresh];\n\tlet zero = scaleMax >= 0 && scaleMin <= 0 ? [0] : [];\n\tlet negSplits = scaleMin < -linthresh ? logAxisSplits(self, axisIdx, max(linthresh, -scaleMax), -scaleMin, foundIncr): [linthresh];\n\n\treturn negSplits.reverse().map(v => -v).concat(zero, posSplits);\n}\n\nconst RE_ALL   = /./;\nconst RE_12357 = /[12357]/;\nconst RE_125   = /[125]/;\nconst RE_1     = /1/;\n\nconst _filt = (splits, distr, re, keepMod) => splits.map((v, i) => ((distr == 4 && v == 0) || i % keepMod == 0 && re.test(v.toExponential()[v < 0 ? 1 : 0])) ? v : null);\n\nfunction log10AxisValsFilt(self, splits, axisIdx, foundSpace, foundIncr) {\n\tlet axis = self.axes[axisIdx];\n\tlet scaleKey = axis.scale;\n\tlet sc = self.scales[scaleKey];\n\n//\tif (sc.distr == 3 && sc.log == 2)\n//\t\treturn splits;\n\n\tlet valToPos = self.valToPos;\n\n\tlet minSpace = axis._space;\n\n\tlet _10 = valToPos(10, scaleKey);\n\n\tlet re = (\n\t\tvalToPos(9, scaleKey) - _10 >= minSpace ? RE_ALL :\n\t\tvalToPos(7, scaleKey) - _10 >= minSpace ? RE_12357 :\n\t\tvalToPos(5, scaleKey) - _10 >= minSpace ? RE_125 :\n\t\tRE_1\n\t);\n\n\tif (re == RE_1) {\n\t\tlet magSpace = abs(valToPos(1, scaleKey) - _10);\n\n\t\tif (magSpace < minSpace)\n\t\t\treturn _filt(splits.slice().reverse(), sc.distr, re, ceil(minSpace / magSpace)).reverse(); // max->min skip\n\t}\n\n\treturn _filt(splits, sc.distr, re, 1);\n}\n\nfunction log2AxisValsFilt(self, splits, axisIdx, foundSpace, foundIncr) {\n\tlet axis = self.axes[axisIdx];\n\tlet scaleKey = axis.scale;\n\tlet minSpace = axis._space;\n\tlet valToPos = self.valToPos;\n\n\tlet magSpace = abs(valToPos(1, scaleKey) - valToPos(2, scaleKey));\n\n\tif (magSpace < minSpace)\n\t\treturn _filt(splits.slice().reverse(), 3, RE_ALL, ceil(minSpace / magSpace)).reverse(); // max->min skip\n\n\treturn splits;\n}\n\nfunction numSeriesVal(self, val, seriesIdx, dataIdx) {\n\treturn dataIdx == null ? LEGEND_DISP : val == null ? \"\" : fmtNum(val);\n}\n\nconst yAxisOpts = {\n\tshow: true,\n\tscale: \"y\",\n\tstroke: hexBlack,\n\tspace: 30,\n\tgap: 5,\n\tsize: 50,\n\tlabelGap: 0,\n\tlabelSize: 30,\n\tlabelFont,\n\tside: 3,\n//\tclass: \"y-vals\",\n//\tincrs: numIncrs,\n//\tvalues: (vals, space) => vals,\n//\tfilter: retArg1,\n\tgrid,\n\tticks,\n\tborder,\n\tfont,\n\tlineGap,\n\trotate: 0,\n};\n\n// takes stroke width\nfunction ptDia(width, mult) {\n\tlet dia = 3 + (width || 1) * 2;\n\treturn roundDec(dia * mult, 3);\n}\n\nfunction seriesPointsShow(self, si) {\n\tlet { scale, idxs } = self.series[0];\n\tlet xData = self._data[0];\n\tlet p0 = self.valToPos(xData[idxs[0]], scale, true);\n\tlet p1 = self.valToPos(xData[idxs[1]], scale, true);\n\tlet dim = abs(p1 - p0);\n\n\tlet s = self.series[si];\n//\tconst dia = ptDia(s.width, pxRatio);\n\tlet maxPts = dim / (s.points.space * pxRatio);\n\treturn idxs[1] - idxs[0] <= maxPts;\n}\n\nconst facet = {\n\tscale: null,\n\tauto: true,\n\tsorted: 0,\n\n\t// internal caches\n\tmin: inf,\n\tmax: -inf,\n};\n\nconst gaps = (self, seriesIdx, idx0, idx1, nullGaps) => nullGaps;\n\nconst xySeriesOpts = {\n\tshow: true,\n\tauto: true,\n\tsorted: 0,\n\tgaps,\n\talpha: 1,\n\tfacets: [\n\t\tassign({}, facet, {scale: 'x'}),\n\t\tassign({}, facet, {scale: 'y'}),\n\t],\n};\n\nconst ySeriesOpts = {\n\tscale: \"y\",\n\tauto: true,\n\tsorted: 0,\n\tshow: true,\n\tspanGaps: false,\n\tgaps,\n\talpha: 1,\n\tpoints: {\n\t\tshow: seriesPointsShow,\n\t\tfilter: null,\n\t//  paths:\n\t//\tstroke: \"#000\",\n\t//\tfill: \"#fff\",\n\t//\twidth: 1,\n\t//\tsize: 10,\n\t},\n//\tlabel: \"Value\",\n//\tvalue: v => v,\n\tvalues: null,\n\n\t// internal caches\n\tmin: inf,\n\tmax: -inf,\n\tidxs: [],\n\n\tpath: null,\n\tclip: null,\n};\n\nfunction clampScale(self, val, scaleMin, scaleMax, scaleKey) {\n/*\n\tif (val < 0) {\n\t\tlet cssHgt = self.bbox.height / pxRatio;\n\t\tlet absPos = self.valToPos(abs(val), scaleKey);\n\t\tlet fromBtm = cssHgt - absPos;\n\t\treturn self.posToVal(cssHgt + fromBtm, scaleKey);\n\t}\n*/\n\treturn scaleMin / 10;\n}\n\nconst xScaleOpts = {\n\ttime: FEAT_TIME,\n\tauto: true,\n\tdistr: 1,\n\tlog: 10,\n\tasinh: 1,\n\tmin: null,\n\tmax: null,\n\tdir: 1,\n\tori: 0,\n};\n\nconst yScaleOpts = assign({}, xScaleOpts, {\n\ttime: false,\n\tori: 1,\n});\n\nconst syncs = {};\n\nfunction _sync(key, opts) {\n\tlet s = syncs[key];\n\n\tif (!s) {\n\t\ts = {\n\t\t\tkey,\n\t\t\tplots: [],\n\t\t\tsub(plot) {\n\t\t\t\ts.plots.push(plot);\n\t\t\t},\n\t\t\tunsub(plot) {\n\t\t\t\ts.plots = s.plots.filter(c => c != plot);\n\t\t\t},\n\t\t\tpub(type, self, x, y, w, h, i) {\n\t\t\t\tfor (let j = 0; j < s.plots.length; j++)\n\t\t\t\t\ts.plots[j] != self && s.plots[j].pub(type, self, x, y, w, h, i);\n\t\t\t},\n\t\t};\n\n\t\tif (key != null)\n\t\t\tsyncs[key] = s;\n\t}\n\n\treturn s;\n}\n\nconst BAND_CLIP_FILL   = 1 << 0;\nconst BAND_CLIP_STROKE = 1 << 1;\n\nfunction orient(u, seriesIdx, cb) {\n\tconst mode = u.mode;\n\tconst series = u.series[seriesIdx];\n\tconst data = mode == 2 ? u._data[seriesIdx] : u._data;\n\tconst scales = u.scales;\n\tconst bbox   = u.bbox;\n\n\tlet dx = data[0],\n\t\tdy = mode == 2 ? data[1] : data[seriesIdx],\n\t\tsx = mode == 2 ? scales[series.facets[0].scale] : scales[u.series[0].scale],\n\t\tsy = mode == 2 ? scales[series.facets[1].scale] : scales[series.scale],\n\t\tl = bbox.left,\n\t\tt = bbox.top,\n\t\tw = bbox.width,\n\t\th = bbox.height,\n\t\tH = u.valToPosH,\n\t\tV = u.valToPosV;\n\n\treturn (sx.ori == 0\n\t\t? cb(\n\t\t\tseries,\n\t\t\tdx,\n\t\t\tdy,\n\t\t\tsx,\n\t\t\tsy,\n\t\t\tH,\n\t\t\tV,\n\t\t\tl,\n\t\t\tt,\n\t\t\tw,\n\t\t\th,\n\t\t\tmoveToH,\n\t\t\tlineToH,\n\t\t\trectH,\n\t\t\tarcH,\n\t\t\tbezierCurveToH,\n\t\t)\n\t\t: cb(\n\t\t\tseries,\n\t\t\tdx,\n\t\t\tdy,\n\t\t\tsx,\n\t\t\tsy,\n\t\t\tV,\n\t\t\tH,\n\t\t\tt,\n\t\t\tl,\n\t\t\th,\n\t\t\tw,\n\t\t\tmoveToV,\n\t\t\tlineToV,\n\t\t\trectV,\n\t\t\tarcV,\n\t\t\tbezierCurveToV,\n\t\t)\n\t);\n}\n\nfunction bandFillClipDirs(self, seriesIdx) {\n\tlet fillDir = 0;\n\n\t// 2 bits, -1 | 1\n\tlet clipDirs = 0;\n\n\tlet bands = ifNull(self.bands, EMPTY_ARR);\n\n\tfor (let i = 0; i < bands.length; i++) {\n\t\tlet b = bands[i];\n\n\t\t// is a \"from\" band edge\n\t\tif (b.series[0] == seriesIdx)\n\t\t\tfillDir = b.dir;\n\t\t// is a \"to\" band edge\n\t\telse if (b.series[1] == seriesIdx) {\n\t\t\tif (b.dir == 1)\n\t\t\t\tclipDirs |= 1;\n\t\t\telse\n\t\t\t\tclipDirs |= 2;\n\t\t}\n\t}\n\n\treturn [\n\t\tfillDir,\n\t\t(\n\t\t\tclipDirs == 1 ? -1 : // neg only\n\t\t\tclipDirs == 2 ?  1 : // pos only\n\t\t\tclipDirs == 3 ?  2 : // both\n\t\t\t                 0   // neither\n\t\t)\n\t];\n}\n\nfunction seriesFillTo(self, seriesIdx, dataMin, dataMax, bandFillDir) {\n\tlet mode = self.mode;\n\tlet series = self.series[seriesIdx];\n\tlet scaleKey = mode == 2 ? series.facets[1].scale : series.scale;\n\tlet scale = self.scales[scaleKey];\n\n\treturn (\n\t\tbandFillDir == -1 ? scale.min :\n\t\tbandFillDir ==  1 ? scale.max :\n\t\tscale.distr ==  3 ? (\n\t\t\tscale.dir == 1 ? scale.min :\n\t\t\tscale.max\n\t\t) : 0\n\t);\n}\n\n// creates inverted band clip path (from stroke path -> yMax || yMin)\n// clipDir is always inverse of fillDir\n// default clip dir is upwards (1), since default band fill is downwards/fillBelowTo (-1) (highIdx -> lowIdx)\nfunction clipBandLine(self, seriesIdx, idx0, idx1, strokePath, clipDir) {\n\treturn orient(self, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\tlet pxRound = series.pxRound;\n\n\t\tconst dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n\t\tconst lineTo = scaleX.ori == 0 ? lineToH : lineToV;\n\n\t\tlet frIdx, toIdx;\n\n\t\tif (dir == 1) {\n\t\t\tfrIdx = idx0;\n\t\t\ttoIdx = idx1;\n\t\t}\n\t\telse {\n\t\t\tfrIdx = idx1;\n\t\t\ttoIdx = idx0;\n\t\t}\n\n\t\t// path start\n\t\tlet x0 = pxRound(valToPosX(dataX[frIdx], scaleX, xDim, xOff));\n\t\tlet y0 = pxRound(valToPosY(dataY[frIdx], scaleY, yDim, yOff));\n\t\t// path end x\n\t\tlet x1 = pxRound(valToPosX(dataX[toIdx], scaleX, xDim, xOff));\n\t\t// upper or lower y limit\n\t\tlet yLimit = pxRound(valToPosY(clipDir == 1 ? scaleY.max : scaleY.min, scaleY, yDim, yOff));\n\n\t\tlet clip = new Path2D(strokePath);\n\n\t\tlineTo(clip, x1, yLimit);\n\t\tlineTo(clip, x0, yLimit);\n\t\tlineTo(clip, x0, y0);\n\n\t\treturn clip;\n\t});\n}\n\nfunction clipGaps(gaps, ori, plotLft, plotTop, plotWid, plotHgt) {\n\tlet clip = null;\n\n\t// create clip path (invert gaps and non-gaps)\n\tif (gaps.length > 0) {\n\t\tclip = new Path2D();\n\n\t\tconst rect = ori == 0 ? rectH : rectV;\n\n\t\tlet prevGapEnd = plotLft;\n\n\t\tfor (let i = 0; i < gaps.length; i++) {\n\t\t\tlet g = gaps[i];\n\n\t\t\tif (g[1] > g[0]) {\n\t\t\t\tlet w = g[0] - prevGapEnd;\n\n\t\t\t\tw > 0 && rect(clip, prevGapEnd, plotTop, w, plotTop + plotHgt);\n\n\t\t\t\tprevGapEnd = g[1];\n\t\t\t}\n\t\t}\n\n\t\tlet w = plotLft + plotWid - prevGapEnd;\n\n\t\t// hack to ensure we expand the clip enough to avoid cutting off strokes at edges\n\t\tlet maxStrokeWidth = 10;\n\n\t\tw > 0 && rect(clip, prevGapEnd, plotTop - maxStrokeWidth / 2, w, plotTop + plotHgt + maxStrokeWidth);\n\t}\n\n\treturn clip;\n}\n\nfunction addGap(gaps, fromX, toX) {\n\tlet prevGap = gaps[gaps.length - 1];\n\n\tif (prevGap && prevGap[0] == fromX)\t\t\t// TODO: gaps must be encoded at stroke widths?\n\t\tprevGap[1] = toX;\n\telse\n\t\tgaps.push([fromX, toX]);\n}\n\nfunction findGaps(xs, ys, idx0, idx1, dir, pixelForX, align) {\n\tlet gaps = [];\n\tlet len = xs.length;\n\n\tfor (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n\t\tlet yVal = ys[i];\n\n\t\tif (yVal === null) {\n\t\t\tlet fr = i, to = i;\n\n\t\t\tif (dir == 1) {\n\t\t\t\twhile (++i <= idx1 && ys[i] === null)\n\t\t\t\t\tto = i;\n\t\t\t}\n\t\t\telse {\n\t\t\t\twhile (--i >= idx0 && ys[i] === null)\n\t\t\t\t\tto = i;\n\t\t\t}\n\n\t\t\tlet frPx = pixelForX(xs[fr]);\n\t\t\tlet toPx = to == fr ? frPx : pixelForX(xs[to]);\n\n\t\t\t// if value adjacent to edge null is same pixel, then it's partially\n\t\t\t// filled and gap should start at next pixel\n\t\t\tlet fri2 = fr - dir;\n\t\t\tlet frPx2 = align <= 0 && fri2 >= 0 && fri2 < len ? pixelForX(xs[fri2]) : frPx;\n\t\t//\tif (frPx2 == frPx)\n\t\t//\t\tfrPx++;\n\t\t//\telse\n\t\t\t\tfrPx = frPx2;\n\n\t\t\tlet toi2 = to + dir;\n\t\t\tlet toPx2 = align >= 0 && toi2 >= 0 && toi2 < len ? pixelForX(xs[toi2]) : toPx;\n\t\t//\tif (toPx2 == toPx)\n\t\t//\t\ttoPx--;\n\t\t//\telse\n\t\t\t\ttoPx = toPx2;\n\n\t\t\tif (toPx >= frPx)\n\t\t\t\tgaps.push([frPx, toPx]); // addGap\n\t\t}\n\t}\n\n\treturn gaps;\n}\n\nfunction pxRoundGen(pxAlign) {\n\treturn pxAlign == 0 ? retArg0 : pxAlign == 1 ? round : v => incrRound(v, pxAlign);\n}\n\nfunction rect(ori) {\n\tlet moveTo = ori == 0 ?\n\t\tmoveToH :\n\t\tmoveToV;\n\n\tlet arcTo = ori == 0 ?\n\t\t(p, x1, y1, x2, y2, r) => { p.arcTo(x1, y1, x2, y2, r); } :\n\t\t(p, y1, x1, y2, x2, r) => { p.arcTo(x1, y1, x2, y2, r); };\n\n\tlet rect = ori == 0 ?\n\t\t(p, x, y, w, h) => { p.rect(x, y, w, h); } :\n\t\t(p, y, x, h, w) => { p.rect(x, y, w, h); };\n\n\t// TODO (pending better browser support): https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/roundRect\n\treturn (p, x, y, w, h, endRad = 0, baseRad = 0) => {\n\t\tif (endRad == 0 && baseRad == 0)\n\t\t\trect(p, x, y, w, h);\n\t\telse {\n\t\t\tendRad  = min(endRad,  w / 2, h / 2);\n\t\t\tbaseRad = min(baseRad, w / 2, h / 2);\n\n\t\t\t// adapted from https://stackoverflow.com/questions/1255512/how-to-draw-a-rounded-rectangle-using-html-canvas/7838871#7838871\n\t\t\tmoveTo(p, x + endRad, y);\n\t\t\tarcTo(p, x + w, y, x + w, y + h, endRad);\n\t\t\tarcTo(p, x + w, y + h, x, y + h, baseRad);\n\t\t\tarcTo(p, x, y + h, x, y, baseRad);\n\t\t\tarcTo(p, x, y, x + w, y, endRad);\n\t\t\tp.closePath();\n\t\t}\n\t};\n}\n\n// orientation-inverting canvas functions\nconst moveToH = (p, x, y) => { p.moveTo(x, y); };\nconst moveToV = (p, y, x) => { p.moveTo(x, y); };\nconst lineToH = (p, x, y) => { p.lineTo(x, y); };\nconst lineToV = (p, y, x) => { p.lineTo(x, y); };\nconst rectH = rect(0);\nconst rectV = rect(1);\nconst arcH = (p, x, y, r, startAngle, endAngle) => { p.arc(x, y, r, startAngle, endAngle); };\nconst arcV = (p, y, x, r, startAngle, endAngle) => { p.arc(x, y, r, startAngle, endAngle); };\nconst bezierCurveToH = (p, bp1x, bp1y, bp2x, bp2y, p2x, p2y) => { p.bezierCurveTo(bp1x, bp1y, bp2x, bp2y, p2x, p2y); };\nconst bezierCurveToV = (p, bp1y, bp1x, bp2y, bp2x, p2y, p2x) => { p.bezierCurveTo(bp1x, bp1y, bp2x, bp2y, p2x, p2y); };\n\n// TODO: drawWrap(seriesIdx, drawPoints) (save, restore, translate, clip)\nfunction points(opts) {\n\treturn (u, seriesIdx, idx0, idx1, filtIdxs) => {\n\t//\tlog(\"drawPoints()\", arguments);\n\n\t\treturn orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\t\tlet { pxRound, points } = series;\n\n\t\t\tlet moveTo, arc;\n\n\t\t\tif (scaleX.ori == 0) {\n\t\t\t\tmoveTo = moveToH;\n\t\t\t\tarc = arcH;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmoveTo = moveToV;\n\t\t\t\tarc = arcV;\n\t\t\t}\n\n\t\t\tconst width = roundDec(points.width * pxRatio, 3);\n\n\t\t\tlet rad = (points.size - points.width) / 2 * pxRatio;\n\t\t\tlet dia = roundDec(rad * 2, 3);\n\n\t\t\tlet fill = new Path2D();\n\t\t\tlet clip = new Path2D();\n\n\t\t\tlet { left: lft, top: top, width: wid, height: hgt } = u.bbox;\n\n\t\t\trectH(clip,\n\t\t\t\tlft - dia,\n\t\t\t\ttop - dia,\n\t\t\t\twid + dia * 2,\n\t\t\t\thgt + dia * 2,\n\t\t\t);\n\n\t\t\tconst drawPoint = pi => {\n\t\t\t\tif (dataY[pi] != null) {\n\t\t\t\t\tlet x = pxRound(valToPosX(dataX[pi], scaleX, xDim, xOff));\n\t\t\t\t\tlet y = pxRound(valToPosY(dataY[pi], scaleY, yDim, yOff));\n\n\t\t\t\t\tmoveTo(fill, x + rad, y);\n\t\t\t\t\tarc(fill, x, y, rad, 0, PI * 2);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (filtIdxs)\n\t\t\t\tfiltIdxs.forEach(drawPoint);\n\t\t\telse {\n\t\t\t\tfor (let pi = idx0; pi <= idx1; pi++)\n\t\t\t\t\tdrawPoint(pi);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tstroke: width > 0 ? fill : null,\n\t\t\t\tfill,\n\t\t\t\tclip,\n\t\t\t\tflags: BAND_CLIP_FILL | BAND_CLIP_STROKE,\n\t\t\t};\n\t\t});\n\t};\n}\n\nfunction _drawAcc(lineTo) {\n\treturn (stroke, accX, minY, maxY, inY, outY) => {\n\t\tif (minY != maxY) {\n\t\t\tif (inY != minY && outY != minY)\n\t\t\t\tlineTo(stroke, accX, minY);\n\t\t\tif (inY != maxY && outY != maxY)\n\t\t\t\tlineTo(stroke, accX, maxY);\n\n\t\t\tlineTo(stroke, accX, outY);\n\t\t}\n\t};\n}\n\nconst drawAccH = _drawAcc(lineToH);\nconst drawAccV = _drawAcc(lineToV);\n\nfunction linear(opts) {\n\tconst alignGaps = ifNull(opts?.alignGaps, 0);\n\n\treturn (u, seriesIdx, idx0, idx1) => {\n\t\treturn orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\t\tlet pxRound = series.pxRound;\n\n\t\t\tlet pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n\t\t\tlet pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n\n\t\t\tlet lineTo, drawAcc;\n\n\t\t\tif (scaleX.ori == 0) {\n\t\t\t\tlineTo = lineToH;\n\t\t\t\tdrawAcc = drawAccH;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlineTo = lineToV;\n\t\t\t\tdrawAcc = drawAccV;\n\t\t\t}\n\n\t\t\tconst dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n\n\t\t\tconst _paths = {stroke: new Path2D(), fill: null, clip: null, band: null, gaps: null, flags: BAND_CLIP_FILL};\n\t\t\tconst stroke = _paths.stroke;\n\n\t\t\tlet minY = inf,\n\t\t\t\tmaxY = -inf,\n\t\t\t\tinY, outY, drawnAtX;\n\n\t\t\tlet accX = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n\n\t\t\t// data edges\n\t\t\tlet lftIdx = nonNullIdx(dataY, idx0, idx1,  1 * dir);\n\t\t\tlet rgtIdx = nonNullIdx(dataY, idx0, idx1, -1 * dir);\n\t\t\tlet lftX   =  pixelForX(dataX[lftIdx]);\n\t\t\tlet rgtX   =  pixelForX(dataX[rgtIdx]);\n\n\t\t\tlet hasGap = false;\n\n\t\t\tfor (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n\t\t\t\tlet x = pixelForX(dataX[i]);\n\t\t\t\tlet yVal = dataY[i];\n\n\t\t\t\tif (x == accX) {\n\t\t\t\t\tif (yVal != null) {\n\t\t\t\t\t\toutY = pixelForY(yVal);\n\n\t\t\t\t\t\tif (minY == inf) {\n\t\t\t\t\t\t\tlineTo(stroke, x, outY);\n\t\t\t\t\t\t\tinY = outY;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tminY = min(outY, minY);\n\t\t\t\t\t\tmaxY = max(outY, maxY);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (yVal === null)\n\t\t\t\t\t\t\thasGap = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (minY != inf) {\n\t\t\t\t\t\tdrawAcc(stroke, accX, minY, maxY, inY, outY);\n\t\t\t\t\t\tdrawnAtX = accX;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (yVal != null) {\n\t\t\t\t\t\toutY = pixelForY(yVal);\n\t\t\t\t\t\tlineTo(stroke, x, outY);\n\t\t\t\t\t\tminY = maxY = inY = outY;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tminY = inf;\n\t\t\t\t\t\tmaxY = -inf;\n\n\t\t\t\t\t\tif (yVal === null)\n\t\t\t\t\t\t\thasGap = true;\n\t\t\t\t\t}\n\n\t\t\t\t\taccX = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (minY != inf && minY != maxY && drawnAtX != accX)\n\t\t\t\tdrawAcc(stroke, accX, minY, maxY, inY, outY);\n\n\t\t\tlet [ bandFillDir, bandClipDir ] = bandFillClipDirs(u, seriesIdx);\n\n\t\t\tif (series.fill != null || bandFillDir != 0) {\n\t\t\t\tlet fill = _paths.fill = new Path2D(stroke);\n\n\t\t\t\tlet fillToVal = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n\t\t\t\tlet fillToY = pixelForY(fillToVal);\n\n\t\t\t\tlineTo(fill, rgtX, fillToY);\n\t\t\t\tlineTo(fill, lftX, fillToY);\n\t\t\t}\n\n\t\t\tif (!series.spanGaps) {\n\t\t\t//\tconsole.time('gaps');\n\t\t\t\tlet gaps = [];\n\n\t\t\t\thasGap && gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n\t\t\t//\tconsole.timeEnd('gaps');\n\n\t\t\t//\tconsole.log('gaps', JSON.stringify(gaps));\n\n\t\t\t\t_paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n\n\t\t\t\t_paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n\t\t\t}\n\n\t\t\tif (bandClipDir != 0) {\n\t\t\t\t_paths.band = bandClipDir == 2 ? [\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke, -1),\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke,  1),\n\t\t\t\t] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n\t\t\t}\n\n\t\t\treturn _paths;\n\t\t});\n\t};\n}\n\n// BUG: align: -1 behaves like align: 1 when scale.dir: -1\nfunction stepped(opts) {\n\tconst align = ifNull(opts.align, 1);\n\t// whether to draw ascenders/descenders at null/gap bondaries\n\tconst ascDesc = ifNull(opts.ascDesc, false);\n\tconst alignGaps = ifNull(opts.alignGaps, 0);\n\tconst extend = ifNull(opts.extend, false);\n\n\treturn (u, seriesIdx, idx0, idx1) => {\n\t\treturn orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\t\tlet pxRound = series.pxRound;\n\n\t\t\tlet { left, width } = u.bbox;\n\n\t\t\tlet pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n\t\t\tlet pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n\n\t\t\tlet lineTo = scaleX.ori == 0 ? lineToH : lineToV;\n\n\t\t\tconst _paths = {stroke: new Path2D(), fill: null, clip: null, band: null, gaps: null, flags: BAND_CLIP_FILL};\n\t\t\tconst stroke = _paths.stroke;\n\n\t\t\tconst dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n\n\t\t\tidx0 = nonNullIdx(dataY, idx0, idx1,  1);\n\t\t\tidx1 = nonNullIdx(dataY, idx0, idx1, -1);\n\n\t\t\tlet prevYPos  = pixelForY(dataY[dir == 1 ? idx0 : idx1]);\n\t\t\tlet firstXPos = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n\t\t\tlet prevXPos = firstXPos;\n\n\t\t\tlet firstXPosExt = firstXPos;\n\n\t\t\tif (extend && align == -1) {\n\t\t\t\tfirstXPosExt = left;\n\t\t\t\tlineTo(stroke, firstXPosExt, prevYPos);\n\t\t\t}\n\n\t\t\tlineTo(stroke, firstXPos, prevYPos);\n\n\t\t\tfor (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n\t\t\t\tlet yVal1 = dataY[i];\n\n\t\t\t\tif (yVal1 == null)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tlet x1 = pixelForX(dataX[i]);\n\t\t\t\tlet y1 = pixelForY(yVal1);\n\n\t\t\t\tif (align == 1)\n\t\t\t\t\tlineTo(stroke, x1, prevYPos);\n\t\t\t\telse\n\t\t\t\t\tlineTo(stroke, prevXPos, y1);\n\n\t\t\t\tlineTo(stroke, x1, y1);\n\n\t\t\t\tprevYPos = y1;\n\t\t\t\tprevXPos = x1;\n\t\t\t}\n\n\t\t\tlet prevXPosExt = prevXPos;\n\n\t\t\tif (extend && align == 1) {\n\t\t\t\tprevXPosExt = left + width;\n\t\t\t\tlineTo(stroke, prevXPosExt, prevYPos);\n\t\t\t}\n\n\t\t\tlet [ bandFillDir, bandClipDir ] = bandFillClipDirs(u, seriesIdx);\n\n\t\t\tif (series.fill != null || bandFillDir != 0) {\n\t\t\t\tlet fill = _paths.fill = new Path2D(stroke);\n\n\t\t\t\tlet fillTo = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n\t\t\t\tlet fillToY = pixelForY(fillTo);\n\n\t\t\t\tlineTo(fill, prevXPosExt, fillToY);\n\t\t\t\tlineTo(fill, firstXPosExt, fillToY);\n\t\t\t}\n\n\t\t\tif (!series.spanGaps) {\n\t\t\t//\tconsole.time('gaps');\n\t\t\t\tlet gaps = [];\n\n\t\t\t\tgaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n\t\t\t//\tconsole.timeEnd('gaps');\n\n\t\t\t//\tconsole.log('gaps', JSON.stringify(gaps));\n\n\t\t\t\t// expand/contract clips for ascenders/descenders\n\t\t\t\tlet halfStroke = (series.width * pxRatio) / 2;\n\t\t\t\tlet startsOffset = (ascDesc || align ==  1) ?  halfStroke : -halfStroke;\n\t\t\t\tlet endsOffset   = (ascDesc || align == -1) ? -halfStroke :  halfStroke;\n\n\t\t\t\tgaps.forEach(g => {\n\t\t\t\t\tg[0] += startsOffset;\n\t\t\t\t\tg[1] += endsOffset;\n\t\t\t\t});\n\n\t\t\t\t_paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n\n\t\t\t\t_paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n\t\t\t}\n\n\t\t\tif (bandClipDir != 0) {\n\t\t\t\t_paths.band = bandClipDir == 2 ? [\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke, -1),\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke,  1),\n\t\t\t\t] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n\t\t\t}\n\n\t\t\treturn _paths;\n\t\t});\n\t};\n}\n\nfunction bars(opts) {\n\topts = opts || EMPTY_OBJ;\n\tconst size = ifNull(opts.size, [0.6, inf, 1]);\n\tconst align = opts.align || 0;\n\tconst extraGap = (opts.gap || 0) * pxRatio;\n\n\tlet ro = opts.radius;\n\n\tro =\n\t\t// [valueRadius, baselineRadius]\n\t\tro == null ? [0, 0] :\n\t\ttypeof ro == 'number' ? [ro, 0] : ro;\n\n\tconst radiusFn = fnOrSelf(ro);\n\n\tconst gapFactor = 1 - size[0];\n\tconst maxWidth  = ifNull(size[1], inf) * pxRatio;\n\tconst minWidth  = ifNull(size[2], 1) * pxRatio;\n\n\tconst disp = ifNull(opts.disp, EMPTY_OBJ);\n\tconst _each = ifNull(opts.each, _ => {});\n\n\tconst { fill: dispFills, stroke: dispStrokes } = disp;\n\n\treturn (u, seriesIdx, idx0, idx1) => {\n\t\treturn orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\t\tlet pxRound = series.pxRound;\n\n\t\t\tlet valRadius, baseRadius;\n\n\t\t\tif (scaleX.ori == 0)\n\t\t\t\t[valRadius, baseRadius] = radiusFn(u, seriesIdx);\n\t\t\telse\n\t\t\t\t[baseRadius, valRadius] = radiusFn(u, seriesIdx);\n\n\t\t\tconst _dirX = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n\t\t\tconst _dirY = scaleY.dir * (scaleY.ori == 1 ? 1 : -1);\n\n\t\t\tlet rect = scaleX.ori == 0 ? rectH : rectV;\n\n\t\t\tlet each = scaleX.ori == 0 ? _each : (u, seriesIdx, i, top, lft, hgt, wid) => {\n\t\t\t\t_each(u, seriesIdx, i, lft, top, wid, hgt);\n\t\t\t};\n\n\t\t\tlet [ bandFillDir, bandClipDir ] = bandFillClipDirs(u, seriesIdx);\n\n\t\t//\tlet fillToY = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n\t\t\tlet fillToY = scaleY.distr == 3 ? (bandFillDir == 1 ? scaleY.max : scaleY.min) : 0;\n\n\t\t\tlet y0Pos = valToPosY(fillToY, scaleY, yDim, yOff);\n\n\t\t\t// barWid is to center of stroke\n\t\t\tlet xShift, barWid;\n\n\t\t\tlet strokeWidth = pxRound(series.width * pxRatio);\n\n\t\t\tlet multiPath = false;\n\n\t\t\tlet fillColors = null;\n\t\t\tlet fillPaths = null;\n\t\t\tlet strokeColors = null;\n\t\t\tlet strokePaths = null;\n\n\t\t\tif (dispFills != null && (strokeWidth == 0 || dispStrokes != null)) {\n\t\t\t\tmultiPath = true;\n\n\t\t\t\tfillColors = dispFills.values(u, seriesIdx, idx0, idx1);\n\t\t\t\tfillPaths = new Map();\n\t\t\t\t(new Set(fillColors)).forEach(color => {\n\t\t\t\t\tif (color != null)\n\t\t\t\t\t\tfillPaths.set(color, new Path2D());\n\t\t\t\t});\n\n\t\t\t\tif (strokeWidth > 0) {\n\t\t\t\t\tstrokeColors = dispStrokes.values(u, seriesIdx, idx0, idx1);\n\t\t\t\t\tstrokePaths = new Map();\n\t\t\t\t\t(new Set(strokeColors)).forEach(color => {\n\t\t\t\t\t\tif (color != null)\n\t\t\t\t\t\t\tstrokePaths.set(color, new Path2D());\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet { x0, size } = disp;\n\n\t\t\tlet bandClipNulls = true;\n\n\t\t\tif (x0 != null && size != null) {\n\t\t\t\tdataX = x0.values(u, seriesIdx, idx0, idx1);\n\n\t\t\t\tif (x0.unit == 2)\n\t\t\t\t\tdataX = dataX.map(pct => u.posToVal(xOff + pct * xDim, scaleX.key, true));\n\n\t\t\t\t// assumes uniform sizes, for now\n\t\t\t\tlet sizes = size.values(u, seriesIdx, idx0, idx1);\n\n\t\t\t\tif (size.unit == 2)\n\t\t\t\t\tbarWid = sizes[0] * xDim;\n\t\t\t\telse\n\t\t\t\t\tbarWid = valToPosX(sizes[0], scaleX, xDim, xOff) - valToPosX(0, scaleX, xDim, xOff); // assumes linear scale (delta from 0)\n\n\t\t\t\tif (strokeWidth >= barWid / 2)\n\t\t\t\t\tstrokeWidth = 0;\n\n\t\t\t\t// for small gaps, disable pixel snapping since gap inconsistencies become noticible and annoying\n\t\t\t//\tif (gapWid + extraGap < 5)\n\t\t\t//\t\tpxRound = retArg0;\n\n\t\t\t\tbarWid = pxRound(clamp(barWid - strokeWidth, minWidth, maxWidth)); // TODO: extraGap?\n\n\t\t\t\txShift = (_dirX == 1 ? -strokeWidth / 2 : barWid + strokeWidth / 2);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet colWid = xDim;\n\n\t\t\t\tif (dataX.length > 1) {\n\t\t\t\t\t// prior index with non-undefined y data\n\t\t\t\t\tlet prevIdx = null;\n\n\t\t\t\t\t// scan full dataset for smallest adjacent delta\n\t\t\t\t\t// will not work properly for non-linear x scales, since does not do expensive valToPosX calcs till end\n\t\t\t\t\tfor (let i = 0, minDelta = Infinity; i < dataX.length; i++) {\n\t\t\t\t\t\tif (dataY[i] !== undefined) {\n\t\t\t\t\t\t\tif (prevIdx != null) {\n\t\t\t\t\t\t\t\tlet delta = abs(dataX[i] - dataX[prevIdx]);\n\n\t\t\t\t\t\t\t\tif (delta < minDelta) {\n\t\t\t\t\t\t\t\t\tminDelta = delta;\n\t\t\t\t\t\t\t\t\tcolWid = abs(valToPosX(dataX[i], scaleX, xDim, xOff) - valToPosX(dataX[prevIdx], scaleX, xDim, xOff));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tprevIdx = i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet gapWid = colWid * gapFactor;\n\n\t\t\t\tbarWid = colWid - gapWid - extraGap;\n\n\t\t\t\tif (strokeWidth >= barWid / 2)\n\t\t\t\t\tstrokeWidth = 0;\n\n\t\t\t\t// for small gaps, disable pixel snapping since gap inconsistencies become noticible and annoying\n\t\t\t\tif (gapWid + extraGap < 5)\n\t\t\t\t\tpxRound = retArg0;\n\n\t\t\t\tbarWid = pxRound(clamp(colWid - gapWid, minWidth, maxWidth) - strokeWidth - extraGap);\n\n\t\t\t\txShift = (align == 0 ? barWid / 2 : align == _dirX ? 0 : barWid) - align * _dirX * extraGap / 2;\n\n\t\t\t\t// when colWidth is smaller than [min-clamped] bar width (e.g. aligned data values are non-uniform)\n\t\t\t\t// disable clipping of null-valued band bars to avoid clip overlap / bleed into adjacent bars\n\t\t\t\t// (this could still bleed clips of adjacent band/stacked bars into each other, so is far from perfect)\n\t\t\t\tif (barWid + strokeWidth > colWid)\n\t\t\t\t\tbandClipNulls = false;\n\t\t\t}\n\n\t\t\tconst _paths = {stroke: null, fill: null, clip: null, band: null, gaps: null, flags: BAND_CLIP_FILL | BAND_CLIP_STROKE};  // disp, geom\n\n\t\t\tlet yLimit;\n\n\t\t\tif (bandClipDir != 0) {\n\t\t\t\t_paths.band = new Path2D();\n\t\t\t\tyLimit = pxRound(valToPosY(bandClipDir == 1 ? scaleY.max : scaleY.min, scaleY, yDim, yOff));\n\t\t\t}\n\n\t\t\tconst stroke = multiPath ? null : new Path2D();\n\t\t\tconst band = _paths.band;\n\n\t\t\tlet { y0, y1 } = disp;\n\n\t\t\tlet dataY0 = null;\n\n\t\t\tif (y0 != null && y1 != null) {\n\t\t\t\tdataY = y1.values(u, seriesIdx, idx0, idx1);\n\t\t\t\tdataY0 = y0.values(u, seriesIdx, idx0, idx1);\n\t\t\t}\n\n\t\t\tlet radVal = valRadius * barWid;\n\t\t\tlet radBase = baseRadius * barWid;\n\n\t\t\tfor (let i = _dirX == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += _dirX) {\n\t\t\t\tlet yVal = dataY[i];\n\n\t\t\t\t// we can skip both, drawing and band clipping for alignment artifacts\n\t\t\t\tif (yVal === undefined)\n\t\t\t\t\tcontinue;\n\n\t\t\t/*\n\t\t\t\t// interpolate upwards band clips\n\t\t\t\tif (yVal == null) {\n\t\t\t\t//\tif (hasBands)\n\t\t\t\t//\t\tyVal = costlyLerp(i, idx0, idx1, _dirX, dataY);\n\t\t\t\t//\telse\n\t\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t*/\n\n\t\t\t\tlet xVal = scaleX.distr != 2 || disp != null ? dataX[i] : i;\n\n\t\t\t\t// TODO: all xPos can be pre-computed once for all series in aligned set\n\t\t\t\tlet xPos = valToPosX(xVal, scaleX, xDim, xOff);\n\t\t\t\tlet yPos = valToPosY(ifNull(yVal, fillToY), scaleY, yDim, yOff);\n\n\t\t\t\tif (dataY0 != null && yVal != null)\n\t\t\t\t\ty0Pos = valToPosY(dataY0[i], scaleY, yDim, yOff);\n\n\t\t\t\tlet lft = pxRound(xPos - xShift);\n\t\t\t\tlet btm = pxRound(max(yPos, y0Pos));\n\t\t\t\tlet top = pxRound(min(yPos, y0Pos));\n\t\t\t\t// this includes the stroke\n\t\t\t\tlet barHgt = btm - top;\n\n\t\t\t\tif (yVal != null) {  // && yVal != fillToY (0 height bar)\n\t\t\t\t\tlet rv = yVal < 0 ? radBase : radVal;\n\t\t\t\t\tlet rb = yVal < 0 ? radVal : radBase;\n\n\t\t\t\t\tif (multiPath) {\n\t\t\t\t\t\tif (strokeWidth > 0 && strokeColors[i] != null)\n\t\t\t\t\t\t\trect(strokePaths.get(strokeColors[i]), lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n\n\t\t\t\t\t\tif (fillColors[i] != null)\n\t\t\t\t\t\t\trect(fillPaths.get(fillColors[i]), lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\trect(stroke, lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n\n\t\t\t\t\teach(u, seriesIdx, i,\n\t\t\t\t\t\tlft    - strokeWidth / 2,\n\t\t\t\t\t\ttop,\n\t\t\t\t\t\tbarWid + strokeWidth,\n\t\t\t\t\t\tbarHgt,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (bandClipDir != 0 && (yVal != null || bandClipNulls)) {\n\t\t\t\t\tif (_dirY * bandClipDir == 1) {\n\t\t\t\t\t\tbtm = top;\n\t\t\t\t\t\ttop = yLimit;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttop = btm;\n\t\t\t\t\t\tbtm = yLimit;\n\t\t\t\t\t}\n\n\t\t\t\t\tbarHgt = btm - top;\n\n\t\t\t\t\trect(band, lft - strokeWidth / 2, top, barWid + strokeWidth, max(0, barHgt), 0, 0);  // radius here?\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (strokeWidth > 0)\n\t\t\t\t_paths.stroke = multiPath ? strokePaths : stroke;\n\t\t\telse if (!multiPath) {\n\t\t\t\t_paths._fill = series.width == 0 ? series._fill : series._stroke ?? series._fill;\n\t\t\t\t_paths.width = 0;\n\t\t\t}\n\n\t\t\t_paths.fill = multiPath ? fillPaths : stroke;\n\n\t\t\treturn _paths;\n\t\t});\n\t};\n}\n\nfunction splineInterp(interp, opts) {\n\tconst alignGaps = ifNull(opts?.alignGaps, 0);\n\n\treturn (u, seriesIdx, idx0, idx1) => {\n\t\treturn orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n\t\t\tlet pxRound = series.pxRound;\n\n\t\t\tlet pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n\t\t\tlet pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n\n\t\t\tlet moveTo, bezierCurveTo, lineTo;\n\n\t\t\tif (scaleX.ori == 0) {\n\t\t\t\tmoveTo = moveToH;\n\t\t\t\tlineTo = lineToH;\n\t\t\t\tbezierCurveTo = bezierCurveToH;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmoveTo = moveToV;\n\t\t\t\tlineTo = lineToV;\n\t\t\t\tbezierCurveTo = bezierCurveToV;\n\t\t\t}\n\n\t\t\tconst dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n\n\t\t\tidx0 = nonNullIdx(dataY, idx0, idx1,  1);\n\t\t\tidx1 = nonNullIdx(dataY, idx0, idx1, -1);\n\n\t\t\tlet firstXPos = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n\t\t\tlet prevXPos = firstXPos;\n\n\t\t\tlet xCoords = [];\n\t\t\tlet yCoords = [];\n\n\t\t\tfor (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n\t\t\t\tlet yVal = dataY[i];\n\n\t\t\t\tif (yVal != null) {\n\t\t\t\t\tlet xVal = dataX[i];\n\t\t\t\t\tlet xPos = pixelForX(xVal);\n\n\t\t\t\t\txCoords.push(prevXPos = xPos);\n\t\t\t\t\tyCoords.push(pixelForY(dataY[i]));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst _paths = {stroke: interp(xCoords, yCoords, moveTo, lineTo, bezierCurveTo, pxRound), fill: null, clip: null, band: null, gaps: null, flags: BAND_CLIP_FILL};\n\t\t\tconst stroke = _paths.stroke;\n\n\t\t\tlet [ bandFillDir, bandClipDir ] = bandFillClipDirs(u, seriesIdx);\n\n\t\t\tif (series.fill != null || bandFillDir != 0) {\n\t\t\t\tlet fill = _paths.fill = new Path2D(stroke);\n\n\t\t\t\tlet fillTo = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n\t\t\t\tlet fillToY = pixelForY(fillTo);\n\n\t\t\t\tlineTo(fill, prevXPos, fillToY);\n\t\t\t\tlineTo(fill, firstXPos, fillToY);\n\t\t\t}\n\n\t\t\tif (!series.spanGaps) {\n\t\t\t//\tconsole.time('gaps');\n\t\t\t\tlet gaps = [];\n\n\t\t\t\tgaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n\t\t\t//\tconsole.timeEnd('gaps');\n\n\t\t\t//\tconsole.log('gaps', JSON.stringify(gaps));\n\n\t\t\t\t_paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n\n\t\t\t\t_paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n\t\t\t}\n\n\t\t\tif (bandClipDir != 0) {\n\t\t\t\t_paths.band = bandClipDir == 2 ? [\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke, -1),\n\t\t\t\t\tclipBandLine(u, seriesIdx, idx0, idx1, stroke,  1),\n\t\t\t\t] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n\t\t\t}\n\n\t\t\treturn _paths;\n\n\t\t\t//  if FEAT_PATHS: false in rollup.config.js\n\t\t\t//\tu.ctx.save();\n\t\t\t//\tu.ctx.beginPath();\n\t\t\t//\tu.ctx.rect(u.bbox.left, u.bbox.top, u.bbox.width, u.bbox.height);\n\t\t\t//\tu.ctx.clip();\n\t\t\t//\tu.ctx.strokeStyle = u.series[sidx].stroke;\n\t\t\t//\tu.ctx.stroke(stroke);\n\t\t\t//\tu.ctx.fillStyle = u.series[sidx].fill;\n\t\t\t//\tu.ctx.fill(fill);\n\t\t\t//\tu.ctx.restore();\n\t\t\t//\treturn null;\n\t\t});\n\t};\n}\n\nfunction monotoneCubic(opts) {\n\treturn splineInterp(_monotoneCubic, opts);\n}\n\n// Monotone Cubic Spline interpolation, adapted from the Chartist.js implementation:\n// https://github.com/gionkunz/chartist-js/blob/e7e78201bffe9609915e5e53cfafa29a5d6c49f9/src/scripts/interpolation.js#L240-L369\nfunction _monotoneCubic(xs, ys, moveTo, lineTo, bezierCurveTo, pxRound) {\n\tconst n = xs.length;\n\n\tif (n < 2)\n\t\treturn null;\n\n\tconst path = new Path2D();\n\n\tmoveTo(path, xs[0], ys[0]);\n\n\tif (n == 2)\n\t\tlineTo(path, xs[1], ys[1]);\n\telse {\n\t\tlet ms  = Array(n),\n\t\t\tds  = Array(n - 1),\n\t\t\tdys = Array(n - 1),\n\t\t\tdxs = Array(n - 1);\n\n\t\t// calc deltas and derivative\n\t\tfor (let i = 0; i < n - 1; i++) {\n\t\t\tdys[i] = ys[i + 1] - ys[i];\n\t\t\tdxs[i] = xs[i + 1] - xs[i];\n\t\t\tds[i]  = dys[i] / dxs[i];\n\t\t}\n\n\t\t// determine desired slope (m) at each point using Fritsch-Carlson method\n\t\t// http://math.stackexchange.com/questions/45218/implementation-of-monotone-cubic-interpolation\n\t\tms[0] = ds[0];\n\n\t\tfor (let i = 1; i < n - 1; i++) {\n\t\t\tif (ds[i] === 0 || ds[i - 1] === 0 || (ds[i - 1] > 0) !== (ds[i] > 0))\n\t\t\t\tms[i] = 0;\n\t\t\telse {\n\t\t\t\tms[i] = 3 * (dxs[i - 1] + dxs[i]) / (\n\t\t\t\t\t(2 * dxs[i] + dxs[i - 1]) / ds[i - 1] +\n\t\t\t\t\t(dxs[i] + 2 * dxs[i - 1]) / ds[i]\n\t\t\t\t);\n\n\t\t\t\tif (!isFinite(ms[i]))\n\t\t\t\t\tms[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\tms[n - 1] = ds[n - 2];\n\n\t\tfor (let i = 0; i < n - 1; i++) {\n\t\t\tbezierCurveTo(\n\t\t\t\tpath,\n\t\t\t\txs[i] + dxs[i] / 3,\n\t\t\t\tys[i] + ms[i] * dxs[i] / 3,\n\t\t\t\txs[i + 1] - dxs[i] / 3,\n\t\t\t\tys[i + 1] - ms[i + 1] * dxs[i] / 3,\n\t\t\t\txs[i + 1],\n\t\t\t\tys[i + 1],\n\t\t\t);\n\t\t}\n\t}\n\n\treturn path;\n}\n\nconst cursorPlots = new Set();\n\nfunction invalidateRects() {\n\tfor (let u of cursorPlots)\n\t\tu.syncRect(true);\n}\n\nif (domEnv) {\n\ton(resize, win, invalidateRects);\n\ton(scroll, win, invalidateRects, true);\n\ton(dppxchange, win, () => { uPlot.pxRatio = pxRatio; });\n}\n\nconst linearPath = linear() ;\nconst pointsPath = points() ;\n\nfunction setDefaults(d, xo, yo, initY) {\n\tlet d2 = initY ? [d[0], d[1]].concat(d.slice(2)) : [d[0]].concat(d.slice(1));\n\treturn d2.map((o, i) => setDefault(o, i, xo, yo));\n}\n\nfunction setDefaults2(d, xyo) {\n\treturn d.map((o, i) => i == 0 ? null : assign({}, xyo, o));  // todo: assign() will not merge facet arrays\n}\n\nfunction setDefault(o, i, xo, yo) {\n\treturn assign({}, (i == 0 ? xo : yo), o);\n}\n\nfunction snapNumX(self, dataMin, dataMax) {\n\treturn dataMin == null ? nullNullTuple : [dataMin, dataMax];\n}\n\nconst snapTimeX = snapNumX;\n\n// this ensures that non-temporal/numeric y-axes get multiple-snapped padding added above/below\n// TODO: also account for incrs when snapping to ensure top of axis gets a tick & value\nfunction snapNumY(self, dataMin, dataMax) {\n\treturn dataMin == null ? nullNullTuple : rangeNum(dataMin, dataMax, rangePad, true);\n}\n\nfunction snapLogY(self, dataMin, dataMax, scale) {\n\treturn dataMin == null ? nullNullTuple : rangeLog(dataMin, dataMax, self.scales[scale].log, false);\n}\n\nconst snapLogX = snapLogY;\n\nfunction snapAsinhY(self, dataMin, dataMax, scale) {\n\treturn dataMin == null ? nullNullTuple : rangeAsinh(dataMin, dataMax, self.scales[scale].log, false);\n}\n\nconst snapAsinhX = snapAsinhY;\n\n// dim is logical (getClientBoundingRect) pixels, not canvas pixels\nfunction findIncr(minVal, maxVal, incrs, dim, minSpace) {\n\tlet intDigits = max(numIntDigits(minVal), numIntDigits(maxVal));\n\n\tlet delta = maxVal - minVal;\n\n\tlet incrIdx = closestIdx((minSpace / dim) * delta, incrs);\n\n\tdo {\n\t\tlet foundIncr = incrs[incrIdx];\n\t\tlet foundSpace = dim * foundIncr / delta;\n\n\t\tif (foundSpace >= minSpace && intDigits + (foundIncr < 5 ? fixedDec.get(foundIncr) : 0) <= 17)\n\t\t\treturn [foundIncr, foundSpace];\n\t} while (++incrIdx < incrs.length);\n\n\treturn [0, 0];\n}\n\nfunction pxRatioFont(font) {\n\tlet fontSize, fontSizeCss;\n\tfont = font.replace(/(\\d+)px/, (m, p1) => (fontSize = round((fontSizeCss = +p1) * pxRatio)) + 'px');\n\treturn [font, fontSize, fontSizeCss];\n}\n\nfunction syncFontSize(axis) {\n\tif (axis.show) {\n\t\t[axis.font, axis.labelFont].forEach(f => {\n\t\t\tlet size = roundDec(f[2] * pxRatio, 1);\n\t\t\tf[0] = f[0].replace(/[0-9.]+px/, size + 'px');\n\t\t\tf[1] = size;\n\t\t});\n\t}\n}\n\nfunction uPlot(opts, data, then) {\n\tconst self = {\n\t\tmode: ifNull(opts.mode, 1),\n\t};\n\n\tconst mode = self.mode;\n\n\t// TODO: cache denoms & mins scale.cache = {r, min, }\n\tfunction getValPct(val, scale) {\n\t\tlet _val = (\n\t\t\tscale.distr == 3 ? log10(val > 0 ? val : scale.clamp(self, val, scale.min, scale.max, scale.key)) :\n\t\t\tscale.distr == 4 ? asinh(val, scale.asinh) :\n\t\t\tval\n\t\t);\n\n\t\treturn (_val - scale._min) / (scale._max - scale._min);\n\t}\n\n\tfunction getHPos(val, scale, dim, off) {\n\t\tlet pct = getValPct(val, scale);\n\t\treturn off + dim * (scale.dir == -1 ? (1 - pct) : pct);\n\t}\n\n\tfunction getVPos(val, scale, dim, off) {\n\t\tlet pct = getValPct(val, scale);\n\t\treturn off + dim * (scale.dir == -1 ? pct : (1 - pct));\n\t}\n\n\tfunction getPos(val, scale, dim, off) {\n\t\treturn scale.ori == 0 ? getHPos(val, scale, dim, off) : getVPos(val, scale, dim, off);\n\t}\n\n\tself.valToPosH = getHPos;\n\tself.valToPosV = getVPos;\n\n\tlet ready = false;\n\tself.status = 0;\n\n\tconst root = self.root = placeDiv(UPLOT);\n\n\tif (opts.id != null)\n\t\troot.id = opts.id;\n\n\taddClass(root, opts.class);\n\n\tif (opts.title) {\n\t\tlet title = placeDiv(TITLE, root);\n\t\ttitle.textContent = opts.title;\n\t}\n\n\tconst can = placeTag(\"canvas\");\n\tconst ctx = self.ctx = can.getContext(\"2d\");\n\n\tconst wrap = placeDiv(WRAP, root);\n\n\ton(\"click\", wrap, e => {\n\t\tif (e.target === over) {\n\t\t\tlet didDrag = mouseLeft1 != mouseLeft0 || mouseTop1 != mouseTop0;\n\t\t\tdidDrag && drag.click(self, e);\n\t\t}\n\t}, true);\n\n\tconst under = self.under = placeDiv(UNDER, wrap);\n\twrap.appendChild(can);\n\tconst over = self.over = placeDiv(OVER, wrap);\n\n\topts = copy(opts);\n\n\tconst pxAlign = +ifNull(opts.pxAlign, 1);\n\n\tconst pxRound = pxRoundGen(pxAlign);\n\n\t(opts.plugins || []).forEach(p => {\n\t\tif (p.opts)\n\t\t\topts = p.opts(self, opts) || opts;\n\t});\n\n\tconst ms = opts.ms || 1e-3;\n\n\tconst series  = self.series = mode == 1 ?\n\t\tsetDefaults(opts.series || [], xSeriesOpts, ySeriesOpts, false) :\n\t\tsetDefaults2(opts.series || [null], xySeriesOpts);\n\tconst axes    = self.axes   = setDefaults(opts.axes   || [], xAxisOpts,   yAxisOpts,    true);\n\tconst scales  = self.scales = {};\n\tconst bands   = self.bands  = opts.bands || [];\n\n\tbands.forEach(b => {\n\t\tb.fill = fnOrSelf(b.fill || null);\n\t\tb.dir = ifNull(b.dir, -1);\n\t});\n\n\tconst xScaleKey = mode == 2 ? series[1].facets[0].scale : series[0].scale;\n\n\tconst drawOrderMap = {\n\t\taxes: drawAxesGrid,\n\t\tseries: drawSeries,\n\t};\n\n\tconst drawOrder = (opts.drawOrder || [\"axes\", \"series\"]).map(key => drawOrderMap[key]);\n\n\tfunction initScale(scaleKey) {\n\t\tlet sc = scales[scaleKey];\n\n\t\tif (sc == null) {\n\t\t\tlet scaleOpts = (opts.scales || EMPTY_OBJ)[scaleKey] || EMPTY_OBJ;\n\n\t\t\tif (scaleOpts.from != null) {\n\t\t\t\t// ensure parent is initialized\n\t\t\t\tinitScale(scaleOpts.from);\n\t\t\t\t// dependent scales inherit\n\t\t\t\tscales[scaleKey] = assign({}, scales[scaleOpts.from], scaleOpts, {key: scaleKey});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsc = scales[scaleKey] = assign({}, (scaleKey == xScaleKey ? xScaleOpts : yScaleOpts), scaleOpts);\n\n\t\t\t\tsc.key = scaleKey;\n\n\t\t\t\tlet isTime = sc.time;\n\n\t\t\t\tlet rn = sc.range;\n\n\t\t\t\tlet rangeIsArr = isArr(rn);\n\n\t\t\t\tif (scaleKey != xScaleKey || (mode == 2 && !isTime)) {\n\t\t\t\t\t// if range array has null limits, it should be auto\n\t\t\t\t\tif (rangeIsArr && (rn[0] == null || rn[1] == null)) {\n\t\t\t\t\t\trn = {\n\t\t\t\t\t\t\tmin: rn[0] == null ? autoRangePart : {\n\t\t\t\t\t\t\t\tmode: 1,\n\t\t\t\t\t\t\t\thard: rn[0],\n\t\t\t\t\t\t\t\tsoft: rn[0],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmax: rn[1] == null ? autoRangePart : {\n\t\t\t\t\t\t\t\tmode: 1,\n\t\t\t\t\t\t\t\thard: rn[1],\n\t\t\t\t\t\t\t\tsoft: rn[1],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t\trangeIsArr = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!rangeIsArr && isObj(rn)) {\n\t\t\t\t\t\tlet cfg = rn;\n\t\t\t\t\t\t// this is similar to snapNumY\n\t\t\t\t\t\trn = (self, dataMin, dataMax) => dataMin == null ? nullNullTuple : rangeNum(dataMin, dataMax, cfg);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsc.range = fnOrSelf(rn || (isTime ? snapTimeX : scaleKey == xScaleKey ?\n\t\t\t\t\t(sc.distr == 3 ? snapLogX : sc.distr == 4 ? snapAsinhX : snapNumX) :\n\t\t\t\t\t(sc.distr == 3 ? snapLogY : sc.distr == 4 ? snapAsinhY : snapNumY)\n\t\t\t\t));\n\n\t\t\t\tsc.auto = fnOrSelf(rangeIsArr ? false : sc.auto);\n\n\t\t\t\tsc.clamp = fnOrSelf(sc.clamp || clampScale);\n\n\t\t\t\t// caches for expensive ops like asinh() & log()\n\t\t\t\tsc._min = sc._max = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tinitScale(\"x\");\n\tinitScale(\"y\");\n\n\t// TODO: init scales from facets in mode: 2\n\tif (mode == 1) {\n\t\tseries.forEach(s => {\n\t\t\tinitScale(s.scale);\n\t\t});\n\t}\n\n\taxes.forEach(a => {\n\t\tinitScale(a.scale);\n\t});\n\n\tfor (let k in opts.scales)\n\t\tinitScale(k);\n\n\tconst scaleX = scales[xScaleKey];\n\n\tconst xScaleDistr = scaleX.distr;\n\n\tlet valToPosX, valToPosY;\n\n\tif (scaleX.ori == 0) {\n\t\taddClass(root, ORI_HZ);\n\t\tvalToPosX = getHPos;\n\t\tvalToPosY = getVPos;\n\t\t/*\n\t\tupdOriDims = () => {\n\t\t\txDimCan = plotWid;\n\t\t\txOffCan = plotLft;\n\t\t\tyDimCan = plotHgt;\n\t\t\tyOffCan = plotTop;\n\n\t\t\txDimCss = plotWidCss;\n\t\t\txOffCss = plotLftCss;\n\t\t\tyDimCss = plotHgtCss;\n\t\t\tyOffCss = plotTopCss;\n\t\t};\n\t\t*/\n\t}\n\telse {\n\t\taddClass(root, ORI_VT);\n\t\tvalToPosX = getVPos;\n\t\tvalToPosY = getHPos;\n\t\t/*\n\t\tupdOriDims = () => {\n\t\t\txDimCan = plotHgt;\n\t\t\txOffCan = plotTop;\n\t\t\tyDimCan = plotWid;\n\t\t\tyOffCan = plotLft;\n\n\t\t\txDimCss = plotHgtCss;\n\t\t\txOffCss = plotTopCss;\n\t\t\tyDimCss = plotWidCss;\n\t\t\tyOffCss = plotLftCss;\n\t\t};\n\t\t*/\n\t}\n\n\tconst pendScales = {};\n\n\t// explicitly-set initial scales\n\tfor (let k in scales) {\n\t\tlet sc = scales[k];\n\n\t\tif (sc.min != null || sc.max != null) {\n\t\t\tpendScales[k] = {min: sc.min, max: sc.max};\n\t\t\tsc.min = sc.max = null;\n\t\t}\n\t}\n\n//\tself.tz = opts.tz || Intl.DateTimeFormat().resolvedOptions().timeZone;\n\tconst _tzDate  = (opts.tzDate || (ts => new Date(round(ts / ms))));\n\tconst _fmtDate = (opts.fmtDate || fmtDate);\n\n\tconst _timeAxisSplits = (ms == 1 ? timeAxisSplitsMs(_tzDate) : timeAxisSplitsS(_tzDate));\n\tconst _timeAxisVals   = timeAxisVals(_tzDate, timeAxisStamps((ms == 1 ? _timeAxisStampsMs : _timeAxisStampsS), _fmtDate));\n\tconst _timeSeriesVal  = timeSeriesVal(_tzDate, timeSeriesStamp(_timeSeriesStamp, _fmtDate));\n\n\tconst activeIdxs = [];\n\n\tconst legend     = (self.legend = assign({}, legendOpts, opts.legend));\n\tconst showLegend = legend.show;\n\tconst markers    = legend.markers;\n\n\t{\n\t\tlegend.idxs = activeIdxs;\n\n\t\tmarkers.width  = fnOrSelf(markers.width);\n\t\tmarkers.dash   = fnOrSelf(markers.dash);\n\t\tmarkers.stroke = fnOrSelf(markers.stroke);\n\t\tmarkers.fill   = fnOrSelf(markers.fill);\n\t}\n\n\tlet legendTable;\n\tlet legendHead;\n\tlet legendBody;\n\tlet legendRows = [];\n\tlet legendCells = [];\n\tlet legendCols;\n\tlet multiValLegend = false;\n\tlet NULL_LEGEND_VALUES = {};\n\n\tif (legend.live) {\n\t\tconst getMultiVals = series[1] ? series[1].values : null;\n\t\tmultiValLegend = getMultiVals != null;\n\t\tlegendCols = multiValLegend ? getMultiVals(self, 1, 0) : {_: 0};\n\n\t\tfor (let k in legendCols)\n\t\t\tNULL_LEGEND_VALUES[k] = LEGEND_DISP;\n\t}\n\n\tif (showLegend) {\n\t\tlegendTable = placeTag(\"table\", LEGEND, root);\n\t\tlegendBody = placeTag(\"tbody\", null, legendTable);\n\n\t\t// allows legend to be moved out of root\n\t\tlegend.mount(self, legendTable);\n\n\t\tif (multiValLegend) {\n\t\t\tlegendHead = placeTag(\"thead\", null, legendTable, legendBody);\n\n\t\t\tlet head = placeTag(\"tr\", null, legendHead);\n\t\t\tplaceTag(\"th\", null, head);\n\n\t\t\tfor (var key in legendCols)\n\t\t\t\tplaceTag(\"th\", LEGEND_LABEL, head).textContent = key;\n\t\t}\n\t\telse {\n\t\t\taddClass(legendTable, LEGEND_INLINE);\n\t\t\tlegend.live && addClass(legendTable, LEGEND_LIVE);\n\t\t}\n\t}\n\n\tconst son  = {show: true};\n\tconst soff = {show: false};\n\n\tfunction initLegendRow(s, i) {\n\t\tif (i == 0 && (multiValLegend || !legend.live || mode == 2))\n\t\t\treturn nullNullTuple;\n\n\t\tlet cells = [];\n\n\t\tlet row = placeTag(\"tr\", LEGEND_SERIES, legendBody, legendBody.childNodes[i]);\n\n\t\taddClass(row, s.class);\n\n\t\tif (!s.show)\n\t\t\taddClass(row, OFF);\n\n\t\tlet label = placeTag(\"th\", null, row);\n\n\t\tif (markers.show) {\n\t\t\tlet indic = placeDiv(LEGEND_MARKER, label);\n\n\t\t\tif (i > 0) {\n\t\t\t\tlet width  = markers.width(self, i);\n\n\t\t\t\tif (width)\n\t\t\t\t\tindic.style.border = width + \"px \" + markers.dash(self, i) + \" \" + markers.stroke(self, i);\n\n\t\t\t\tindic.style.background = markers.fill(self, i);\n\t\t\t}\n\t\t}\n\n\t\tlet text = placeDiv(LEGEND_LABEL, label);\n\t\ttext.textContent = s.label;\n\n\t\tif (i > 0) {\n\t\t\tif (!markers.show)\n\t\t\t\ttext.style.color = s.width > 0 ? markers.stroke(self, i) : markers.fill(self, i);\n\n\t\t\tonMouse(\"click\", label, e => {\n\t\t\t\tif (cursor._lock)\n\t\t\t\t\treturn;\n\n\t\t\t\tsetCursorEvent(e);\n\n\t\t\t\tlet seriesIdx = series.indexOf(s);\n\n\t\t\t\tif ((e.ctrlKey || e.metaKey) != legend.isolate) {\n\t\t\t\t\t// if any other series is shown, isolate this one. else show all\n\t\t\t\t\tlet isolate = series.some((s, i) => i > 0 && i != seriesIdx && s.show);\n\n\t\t\t\t\tseries.forEach((s, i) => {\n\t\t\t\t\t\ti > 0 && setSeries(i, isolate ? (i == seriesIdx ? son : soff) : son, true, syncOpts.setSeries);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetSeries(seriesIdx, {show: !s.show}, true, syncOpts.setSeries);\n\t\t\t}, false);\n\n\t\t\tif (cursorFocus) {\n\t\t\t\tonMouse(mouseenter, label, e => {\n\t\t\t\t\tif (cursor._lock)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tsetCursorEvent(e);\n\n\t\t\t\t\tsetSeries(series.indexOf(s), FOCUS_TRUE, true, syncOpts.setSeries);\n\t\t\t\t}, false);\n\t\t\t}\n\t\t}\n\n\t\tfor (var key in legendCols) {\n\t\t\tlet v = placeTag(\"td\", LEGEND_VALUE, row);\n\t\t\tv.textContent = \"--\";\n\t\t\tcells.push(v);\n\t\t}\n\n\t\treturn [row, cells];\n\t}\n\n\tconst mouseListeners = new Map();\n\n\tfunction onMouse(ev, targ, fn, onlyTarg = true) {\n\t\tconst targListeners = mouseListeners.get(targ) || {};\n\t\tconst listener = cursor.bind[ev](self, targ, fn, onlyTarg);\n\n\t\tif (listener) {\n\t\t\ton(ev, targ, targListeners[ev] = listener);\n\t\t\tmouseListeners.set(targ, targListeners);\n\t\t}\n\t}\n\n\tfunction offMouse(ev, targ, fn) {\n\t\tconst targListeners = mouseListeners.get(targ) || {};\n\n\t\tfor (let k in targListeners) {\n\t\t\tif (ev == null || k == ev) {\n\t\t\t\toff(k, targ, targListeners[k]);\n\t\t\t\tdelete targListeners[k];\n\t\t\t}\n\t\t}\n\n\t\tif (ev == null)\n\t\t\tmouseListeners.delete(targ);\n\t}\n\n\tlet fullWidCss = 0;\n\tlet fullHgtCss = 0;\n\n\tlet plotWidCss = 0;\n\tlet plotHgtCss = 0;\n\n\t// plot margins to account for axes\n\tlet plotLftCss = 0;\n\tlet plotTopCss = 0;\n\n\tlet plotLft = 0;\n\tlet plotTop = 0;\n\tlet plotWid = 0;\n\tlet plotHgt = 0;\n\n\tself.bbox = {};\n\n\tlet shouldSetScales = false;\n\tlet shouldSetSize = false;\n\tlet shouldConvergeSize = false;\n\tlet shouldSetCursor = false;\n\tlet shouldSetSelect = false;\n\tlet shouldSetLegend = false;\n\n\tfunction _setSize(width, height, force) {\n\t\tif (force || (width != self.width || height != self.height))\n\t\t\tcalcSize(width, height);\n\n\t\tresetYSeries(false);\n\n\t\tshouldConvergeSize = true;\n\t\tshouldSetSize = true;\n\n\t\tif (cursor.left >= 0)\n\t\t\tshouldSetCursor = shouldSetLegend = true;\n\n\t\tcommit();\n\t}\n\n\tfunction calcSize(width, height) {\n\t//\tlog(\"calcSize()\", arguments);\n\n\t\tself.width  = fullWidCss = plotWidCss = width;\n\t\tself.height = fullHgtCss = plotHgtCss = height;\n\t\tplotLftCss  = plotTopCss = 0;\n\n\t\tcalcPlotRect();\n\t\tcalcAxesRects();\n\n\t\tlet bb = self.bbox;\n\n\t\tplotLft = bb.left   = incrRound(plotLftCss * pxRatio, 0.5);\n\t\tplotTop = bb.top    = incrRound(plotTopCss * pxRatio, 0.5);\n\t\tplotWid = bb.width  = incrRound(plotWidCss * pxRatio, 0.5);\n\t\tplotHgt = bb.height = incrRound(plotHgtCss * pxRatio, 0.5);\n\n\t//\tupdOriDims();\n\t}\n\n\t// ensures size calc convergence\n\tconst CYCLE_LIMIT = 3;\n\n\tfunction convergeSize() {\n\t\tlet converged = false;\n\n\t\tlet cycleNum = 0;\n\n\t\twhile (!converged) {\n\t\t\tcycleNum++;\n\n\t\t\tlet axesConverged = axesCalc(cycleNum);\n\t\t\tlet paddingConverged = paddingCalc(cycleNum);\n\n\t\t\tconverged = cycleNum == CYCLE_LIMIT || (axesConverged && paddingConverged);\n\n\t\t\tif (!converged) {\n\t\t\t\tcalcSize(self.width, self.height);\n\t\t\t\tshouldSetSize = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setSize({width, height}) {\n\t\t_setSize(width, height);\n\t}\n\n\tself.setSize = setSize;\n\n\t// accumulate axis offsets, reduce canvas width\n\tfunction calcPlotRect() {\n\t\t// easements for edge labels\n\t\tlet hasTopAxis = false;\n\t\tlet hasBtmAxis = false;\n\t\tlet hasRgtAxis = false;\n\t\tlet hasLftAxis = false;\n\n\t\taxes.forEach((axis, i) => {\n\t\t\tif (axis.show && axis._show) {\n\t\t\t\tlet {side, _size} = axis;\n\t\t\t\tlet isVt = side % 2;\n\t\t\t\tlet labelSize = axis.label != null ? axis.labelSize : 0;\n\n\t\t\t\tlet fullSize = _size + labelSize;\n\n\t\t\t\tif (fullSize > 0) {\n\t\t\t\t\tif (isVt) {\n\t\t\t\t\t\tplotWidCss -= fullSize;\n\n\t\t\t\t\t\tif (side == 3) {\n\t\t\t\t\t\t\tplotLftCss += fullSize;\n\t\t\t\t\t\t\thasLftAxis = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\thasRgtAxis = true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tplotHgtCss -= fullSize;\n\n\t\t\t\t\t\tif (side == 0) {\n\t\t\t\t\t\t\tplotTopCss += fullSize;\n\t\t\t\t\t\t\thasTopAxis = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\thasBtmAxis = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tsidesWithAxes[0] = hasTopAxis;\n\t\tsidesWithAxes[1] = hasRgtAxis;\n\t\tsidesWithAxes[2] = hasBtmAxis;\n\t\tsidesWithAxes[3] = hasLftAxis;\n\n\t\t// hz padding\n\t\tplotWidCss -= _padding[1] + _padding[3];\n\t\tplotLftCss += _padding[3];\n\n\t\t// vt padding\n\t\tplotHgtCss -= _padding[2] + _padding[0];\n\t\tplotTopCss += _padding[0];\n\t}\n\n\tfunction calcAxesRects() {\n\t\t// will accum +\n\t\tlet off1 = plotLftCss + plotWidCss;\n\t\tlet off2 = plotTopCss + plotHgtCss;\n\t\t// will accum -\n\t\tlet off3 = plotLftCss;\n\t\tlet off0 = plotTopCss;\n\n\t\tfunction incrOffset(side, size) {\n\t\t\tswitch (side) {\n\t\t\t\tcase 1: off1 += size; return off1 - size;\n\t\t\t\tcase 2: off2 += size; return off2 - size;\n\t\t\t\tcase 3: off3 -= size; return off3 + size;\n\t\t\t\tcase 0: off0 -= size; return off0 + size;\n\t\t\t}\n\t\t}\n\n\t\taxes.forEach((axis, i) => {\n\t\t\tif (axis.show && axis._show) {\n\t\t\t\tlet side = axis.side;\n\n\t\t\t\taxis._pos = incrOffset(side, axis._size);\n\n\t\t\t\tif (axis.label != null)\n\t\t\t\t\taxis._lpos = incrOffset(side, axis.labelSize);\n\t\t\t}\n\t\t});\n\t}\n\n\tconst cursor = self.cursor = assign({}, cursorOpts, {drag: {y: mode == 2}}, opts.cursor);\n\tconst setCursorEvent = e => { cursor.event = e; };\n\n\tcursor.idxs = activeIdxs;\n\n\tcursor._lock = false;\n\n\tlet points = cursor.points;\n\n\tpoints.show   = fnOrSelf(points.show);\n\tpoints.size   = fnOrSelf(points.size);\n\tpoints.stroke = fnOrSelf(points.stroke);\n\tpoints.width  = fnOrSelf(points.width);\n\tpoints.fill   = fnOrSelf(points.fill);\n\n\tconst focus = self.focus = assign({}, opts.focus || {alpha: 0.3}, cursor.focus);\n\n\tconst cursorFocus = focus.prox >= 0;\n\n\t// series-intersection markers\n\tlet cursorPts = [null];\n\n\tfunction initCursorPt(s, si) {\n\t\tif (si > 0) {\n\t\t\tlet pt = cursor.points.show(self, si);\n\n\t\t\tif (pt) {\n\t\t\t\taddClass(pt, CURSOR_PT);\n\t\t\t\taddClass(pt, s.class);\n\t\t\t\telTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n\t\t\t\tover.insertBefore(pt, cursorPts[si]);\n\n\t\t\t\treturn pt;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction initSeries(s, i) {\n\t\tif (mode == 1 || i > 0) {\n\t\t\tlet isTime = mode == 1 && scales[s.scale].time;\n\n\t\t\tlet sv = s.value;\n\t\t\ts.value = isTime ? (isStr(sv) ? timeSeriesVal(_tzDate, timeSeriesStamp(sv, _fmtDate)) : sv || _timeSeriesVal) : sv || numSeriesVal;\n\t\t\ts.label = s.label || (isTime ? timeSeriesLabel : numSeriesLabel);\n\t\t}\n\n\t\tif (i > 0) {\n\t\t\ts.width  = s.width == null ? 1 : s.width;\n\t\t\ts.paths  = s.paths || linearPath || retNull;\n\t\t\ts.fillTo = fnOrSelf(s.fillTo || seriesFillTo);\n\t\t\ts.pxAlign = +ifNull(s.pxAlign, pxAlign);\n\t\t\ts.pxRound = pxRoundGen(s.pxAlign);\n\n\t\t\ts.stroke = fnOrSelf(s.stroke || null);\n\t\t\ts.fill   = fnOrSelf(s.fill || null);\n\t\t\ts._stroke = s._fill = s._paths = s._focus = null;\n\n\t\t\tlet _ptDia = ptDia(max(1, s.width), 1);\n\t\t\tlet points = s.points = assign({}, {\n\t\t\t\tsize: _ptDia,\n\t\t\t\twidth: max(1, _ptDia * .2),\n\t\t\t\tstroke: s.stroke,\n\t\t\t\tspace: _ptDia * 2,\n\t\t\t\tpaths: pointsPath,\n\t\t\t\t_stroke: null,\n\t\t\t\t_fill: null,\n\t\t\t}, s.points);\n\t\t\tpoints.show   = fnOrSelf(points.show);\n\t\t\tpoints.filter = fnOrSelf(points.filter);\n\t\t\tpoints.fill   = fnOrSelf(points.fill);\n\t\t\tpoints.stroke = fnOrSelf(points.stroke);\n\t\t\tpoints.paths  = fnOrSelf(points.paths);\n\t\t\tpoints.pxAlign = s.pxAlign;\n\t\t}\n\n\t\tif (showLegend) {\n\t\t\tlet rowCells = initLegendRow(s, i);\n\t\t\tlegendRows.splice(i, 0, rowCells[0]);\n\t\t\tlegendCells.splice(i, 0, rowCells[1]);\n\t\t\tlegend.values.push(null);\t// NULL_LEGEND_VALS not yet avil here :(\n\t\t}\n\n\t\tif (cursor.show) {\n\t\t\tactiveIdxs.splice(i, 0, null);\n\n\t\t\tlet pt = initCursorPt(s, i);\n\t\t\tpt && cursorPts.splice(i, 0, pt);\n\t\t}\n\n\t\tfire(\"addSeries\", i);\n\t}\n\n\tfunction addSeries(opts, si) {\n\t\tsi = si == null ? series.length : si;\n\n\t\topts = mode == 1 ? setDefault(opts, si, xSeriesOpts, ySeriesOpts) : setDefault(opts, si, null, xySeriesOpts);\n\n\t\tseries.splice(si, 0, opts);\n\t\tinitSeries(series[si], si);\n\t}\n\n\tself.addSeries = addSeries;\n\n\tfunction delSeries(i) {\n\t\tseries.splice(i, 1);\n\n\t\tif (showLegend) {\n\t\t\tlegend.values.splice(i, 1);\n\n\t\t\tlegendCells.splice(i, 1);\n\t\t\tlet tr = legendRows.splice(i, 1)[0];\n\t\t\toffMouse(null, tr.firstChild);\n\t\t\ttr.remove();\n\t\t}\n\n\t\tif (cursor.show) {\n\t\t\tactiveIdxs.splice(i, 1);\n\n\t\t\tcursorPts.length > 1 && cursorPts.splice(i, 1)[0].remove();\n\t\t}\n\n\t\t// TODO: de-init no-longer-needed scales?\n\n\t\tfire(\"delSeries\", i);\n\t}\n\n\tself.delSeries = delSeries;\n\n\tconst sidesWithAxes = [false, false, false, false];\n\n\tfunction initAxis(axis, i) {\n\t\taxis._show = axis.show;\n\n\t\tif (axis.show) {\n\t\t\tlet isVt = axis.side % 2;\n\n\t\t\tlet sc = scales[axis.scale];\n\n\t\t\t// this can occur if all series specify non-default scales\n\t\t\tif (sc == null) {\n\t\t\t\taxis.scale = isVt ? series[1].scale : xScaleKey;\n\t\t\t\tsc = scales[axis.scale];\n\t\t\t}\n\n\t\t\t// also set defaults for incrs & values based on axis distr\n\t\t\tlet isTime = sc.time;\n\n\t\t\taxis.size   = fnOrSelf(axis.size);\n\t\t\taxis.space  = fnOrSelf(axis.space);\n\t\t\taxis.rotate = fnOrSelf(axis.rotate);\n\n\t\t\tif (isArr(axis.incrs)) {\n\t\t\t\taxis.incrs.forEach(incr => {\n\t\t\t\t\t!fixedDec.has(incr) && fixedDec.set(incr, guessDec(incr));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\taxis.incrs  = fnOrSelf(axis.incrs  || (          sc.distr == 2 ? wholeIncrs : (isTime ? (ms == 1 ? timeIncrsMs : timeIncrsS) : numIncrs)));\n\t\t\taxis.splits = fnOrSelf(axis.splits || (isTime && sc.distr == 1 ? _timeAxisSplits : sc.distr == 3 ? logAxisSplits : sc.distr == 4 ? asinhAxisSplits : numAxisSplits));\n\n\t\t\taxis.stroke        = fnOrSelf(axis.stroke);\n\t\t\taxis.grid.stroke   = fnOrSelf(axis.grid.stroke);\n\t\t\taxis.ticks.stroke  = fnOrSelf(axis.ticks.stroke);\n\t\t\taxis.border.stroke = fnOrSelf(axis.border.stroke);\n\n\t\t\tlet av = axis.values;\n\n\t\t\taxis.values = (\n\t\t\t\t// static array of tick values\n\t\t\t\tisArr(av) && !isArr(av[0]) ? fnOrSelf(av) :\n\t\t\t\t// temporal\n\t\t\t\tisTime ? (\n\t\t\t\t\t// config array of fmtDate string tpls\n\t\t\t\t\tisArr(av) ?\n\t\t\t\t\t\ttimeAxisVals(_tzDate, timeAxisStamps(av, _fmtDate)) :\n\t\t\t\t\t// fmtDate string tpl\n\t\t\t\t\tisStr(av) ?\n\t\t\t\t\t\ttimeAxisVal(_tzDate, av) :\n\t\t\t\t\tav || _timeAxisVals\n\t\t\t\t) : av || numAxisVals\n\t\t\t);\n\n\t\t\taxis.filter = fnOrSelf(axis.filter || (          sc.distr >= 3 && sc.log == 10 ? log10AxisValsFilt : sc.distr == 3 && sc.log == 2 ? log2AxisValsFilt : retArg1));\n\n\t\t\taxis.font      = pxRatioFont(axis.font);\n\t\t\taxis.labelFont = pxRatioFont(axis.labelFont);\n\n\t\t\taxis._size   = axis.size(self, null, i, 0);\n\n\t\t\taxis._space  =\n\t\t\taxis._rotate =\n\t\t\taxis._incrs  =\n\t\t\taxis._found  =\t// foundIncrSpace\n\t\t\taxis._splits =\n\t\t\taxis._values = null;\n\n\t\t\tif (axis._size > 0) {\n\t\t\t\tsidesWithAxes[i] = true;\n\t\t\t\taxis._el = placeDiv(AXIS, wrap);\n\t\t\t}\n\n\t\t\t// debug\n\t\t//\taxis._el.style.background = \"#\"  + Math.floor(Math.random()*16777215).toString(16) + '80';\n\t\t}\n\t}\n\n\tfunction autoPadSide(self, side, sidesWithAxes, cycleNum) {\n\t\tlet [hasTopAxis, hasRgtAxis, hasBtmAxis, hasLftAxis] = sidesWithAxes;\n\n\t\tlet ori = side % 2;\n\t\tlet size = 0;\n\n\t\tif (ori == 0 && (hasLftAxis || hasRgtAxis))\n\t\t\tsize = (side == 0 && !hasTopAxis || side == 2 && !hasBtmAxis ? round(xAxisOpts.size / 3) : 0);\n\t\tif (ori == 1 && (hasTopAxis || hasBtmAxis))\n\t\t\tsize = (side == 1 && !hasRgtAxis || side == 3 && !hasLftAxis ? round(yAxisOpts.size / 2) : 0);\n\n\t\treturn size;\n\t}\n\n\tconst padding = self.padding = (opts.padding || [autoPadSide,autoPadSide,autoPadSide,autoPadSide]).map(p => fnOrSelf(ifNull(p, autoPadSide)));\n\tconst _padding = self._padding = padding.map((p, i) => p(self, i, sidesWithAxes, 0));\n\n\tlet dataLen;\n\n\t// rendered data window\n\tlet i0 = null;\n\tlet i1 = null;\n\tconst idxs = mode == 1 ? series[0].idxs : null;\n\n\tlet data0 = null;\n\n\tlet viaAutoScaleX = false;\n\n\tfunction setData(_data, _resetScales) {\n\t\tdata = _data == null ? [] : copy(_data, fastIsObj);\n\n\t\tif (mode == 2) {\n\t\t\tdataLen = 0;\n\t\t\tfor (let i = 1; i < series.length; i++)\n\t\t\t\tdataLen += data[i][0].length;\n\t\t\tself.data = data = _data;\n\t\t}\n\t\telse {\n\t\t\tif (data[0] == null)\n\t\t\t\tdata[0] = [];\n\n\t\t\tself.data = data.slice();\n\n\t\t\tdata0 = data[0];\n\t\t\tdataLen = data0.length;\n\n\t\t\tif (xScaleDistr == 2) {\n\t\t\t\tdata[0] = Array(dataLen);\n\t\t\t\tfor (let i = 0; i < dataLen; i++)\n\t\t\t\t\tdata[0][i] = i;\n\t\t\t}\n\t\t}\n\n\t\tself._data = data;\n\n\t\tresetYSeries(true);\n\n\t\tfire(\"setData\");\n\n\t\t// forces x axis tick values to re-generate when neither x scale nor y scale changes\n\t\t// in ordinal mode, scale range is by index, so will not change if new data has same length, but tick values are from data\n\t\tif (xScaleDistr == 2) {\n\t\t\tshouldConvergeSize = true;\n\n\t\t\t/* or somewhat cheaper, and uglier:\n\t\t\tif (ready) {\n\t\t\t\t// logic extracted from axesCalc()\n\t\t\t\tlet i = 0;\n\t\t\t\tlet axis = axes[i];\n\t\t\t\tlet _splits = axis._splits.map(i => data0[i]);\n\t\t\t\tlet [_incr, _space] = axis._found;\n\t\t\t\tlet incr = data0[_splits[1]] - data0[_splits[0]];\n\t\t\t\taxis._values = axis.values(self, axis.filter(self, _splits, i, _space, incr), i, _space, incr);\n\t\t\t}\n\t\t\t*/\n\t\t}\n\n\t\tif (_resetScales !== false) {\n\t\t\tlet xsc = scaleX;\n\n\t\t\tif (xsc.auto(self, viaAutoScaleX))\n\t\t\t\tautoScaleX();\n\t\t\telse\n\t\t\t\t_setScale(xScaleKey, xsc.min, xsc.max);\n\n\t\t\tshouldSetCursor = shouldSetCursor || cursor.left >= 0;\n\t\t\tshouldSetLegend = true;\n\t\t\tcommit();\n\t\t}\n\t}\n\n\tself.setData = setData;\n\n\tfunction autoScaleX() {\n\t\tviaAutoScaleX = true;\n\n\t\tlet _min, _max;\n\n\t\tif (mode == 1) {\n\t\t\tif (dataLen > 0) {\n\t\t\t\ti0 = idxs[0] = 0;\n\t\t\t\ti1 = idxs[1] = dataLen - 1;\n\n\t\t\t\t_min = data[0][i0];\n\t\t\t\t_max = data[0][i1];\n\n\t\t\t\tif (xScaleDistr == 2) {\n\t\t\t\t\t_min = i0;\n\t\t\t\t\t_max = i1;\n\t\t\t\t}\n\t\t\t\telse if (_min == _max) {\n\t\t\t\t\tif (xScaleDistr == 3)\n\t\t\t\t\t\t[_min, _max] = rangeLog(_min, _min, scaleX.log, false);\n\t\t\t\t\telse if (xScaleDistr == 4)\n\t\t\t\t\t\t[_min, _max] = rangeAsinh(_min, _min, scaleX.log, false);\n\t\t\t\t\telse if (scaleX.time)\n\t\t\t\t\t\t_max = _min + round(86400 / ms);\n\t\t\t\t\telse\n\t\t\t\t\t\t[_min, _max] = rangeNum(_min, _max, rangePad, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ti0 = idxs[0] = _min = null;\n\t\t\t\ti1 = idxs[1] = _max = null;\n\t\t\t}\n\t\t}\n\n\t\t_setScale(xScaleKey, _min, _max);\n\t}\n\n\tlet ctxStroke, ctxFill, ctxWidth, ctxDash, ctxJoin, ctxCap, ctxFont, ctxAlign, ctxBaseline;\n\tlet ctxAlpha;\n\n\tfunction setCtxStyle(stroke, width, dash, cap, fill, join) {\n\t\tstroke ??= transparent;\n\t\tdash   ??= EMPTY_ARR;\n\t\tcap    ??= \"butt\"; // (|)\n\t\tfill   ??= transparent;\n\t\tjoin   ??= \"round\";\n\n\t\tif (stroke != ctxStroke)\n\t\t\tctx.strokeStyle = ctxStroke = stroke;\n\t\tif (fill != ctxFill)\n\t\t\tctx.fillStyle = ctxFill = fill;\n\t\tif (width != ctxWidth)\n\t\t\tctx.lineWidth = ctxWidth = width;\n\t\tif (join != ctxJoin)\n\t\t\tctx.lineJoin = ctxJoin = join;\n\t\tif (cap != ctxCap)\n\t\t\tctx.lineCap = ctxCap = cap;\n\t\tif (dash != ctxDash)\n\t\t\tctx.setLineDash(ctxDash = dash);\n\t}\n\n\tfunction setFontStyle(font, fill, align, baseline) {\n\t\tif (fill != ctxFill)\n\t\t\tctx.fillStyle = ctxFill = fill;\n\t\tif (font != ctxFont)\n\t\t\tctx.font = ctxFont = font;\n\t\tif (align != ctxAlign)\n\t\t\tctx.textAlign = ctxAlign = align;\n\t\tif (baseline != ctxBaseline)\n\t\t\tctx.textBaseline = ctxBaseline = baseline;\n\t}\n\n\tfunction accScale(wsc, psc, facet, data, sorted = 0) {\n\t\tif (data.length > 0 && wsc.auto(self, viaAutoScaleX) && (psc == null || psc.min == null)) {\n\t\t\tlet _i0 = ifNull(i0, 0);\n\t\t\tlet _i1 = ifNull(i1, data.length - 1);\n\n\t\t\t// only run getMinMax() for invalidated series data, else reuse\n\t\t\tlet minMax = facet.min == null ? (wsc.distr == 3 ? getMinMaxLog(data, _i0, _i1) : getMinMax(data, _i0, _i1, sorted)) : [facet.min, facet.max];\n\n\t\t\t// initial min/max\n\t\t\twsc.min = min(wsc.min, facet.min = minMax[0]);\n\t\t\twsc.max = max(wsc.max, facet.max = minMax[1]);\n\t\t}\n\t}\n\n\tfunction setScales() {\n\t//\tlog(\"setScales()\", arguments);\n\n\t\t// wip scales\n\t\tlet wipScales = copy(scales, fastIsObj);\n\n\t\tfor (let k in wipScales) {\n\t\t\tlet wsc = wipScales[k];\n\t\t\tlet psc = pendScales[k];\n\n\t\t\tif (psc != null && psc.min != null) {\n\t\t\t\tassign(wsc, psc);\n\n\t\t\t\t// explicitly setting the x-scale invalidates everything (acts as redraw)\n\t\t\t\tif (k == xScaleKey)\n\t\t\t\t\tresetYSeries(true);\n\t\t\t}\n\t\t\telse if (k != xScaleKey || mode == 2) {\n\t\t\t\tif (dataLen == 0 && wsc.from == null) {\n\t\t\t\t\tlet minMax = wsc.range(self, null, null, k);\n\t\t\t\t\twsc.min = minMax[0];\n\t\t\t\t\twsc.max = minMax[1];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\twsc.min = inf;\n\t\t\t\t\twsc.max = -inf;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (dataLen > 0) {\n\t\t\t// pre-range y-scales from y series' data values\n\t\t\tseries.forEach((s, i) => {\n\t\t\t\tif (mode == 1) {\n\t\t\t\t\tlet k = s.scale;\n\t\t\t\t\tlet wsc = wipScales[k];\n\t\t\t\t\tlet psc = pendScales[k];\n\n\t\t\t\t\tif (i == 0) {\n\t\t\t\t\t\tlet minMax = wsc.range(self, wsc.min, wsc.max, k);\n\n\t\t\t\t\t\twsc.min = minMax[0];\n\t\t\t\t\t\twsc.max = minMax[1];\n\n\t\t\t\t\t\ti0 = closestIdx(wsc.min, data[0]);\n\t\t\t\t\t\ti1 = closestIdx(wsc.max, data[0]);\n\n\t\t\t\t\t\t// don't try to contract same or adjacent idxs\n\t\t\t\t\t\tif (i1 - i0 > 1) {\n\t\t\t\t\t\t\t// closest indices can be outside of view\n\t\t\t\t\t\t\tif (data[0][i0] < wsc.min)\n\t\t\t\t\t\t\t\ti0++;\n\t\t\t\t\t\t\tif (data[0][i1] > wsc.max)\n\t\t\t\t\t\t\t\ti1--;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ts.min = data0[i0];\n\t\t\t\t\t\ts.max = data0[i1];\n\t\t\t\t\t}\n\t\t\t\t\telse if (s.show && s.auto)\n\t\t\t\t\t\taccScale(wsc, psc, s, data[i], s.sorted);\n\n\t\t\t\t\ts.idxs[0] = i0;\n\t\t\t\t\ts.idxs[1] = i1;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (i > 0) {\n\t\t\t\t\t\tif (s.show && s.auto) {\n\t\t\t\t\t\t\t// TODO: only handles, assumes and requires facets[0] / 'x' scale, and facets[1] / 'y' scale\n\t\t\t\t\t\t\tlet [ xFacet, yFacet ] = s.facets;\n\t\t\t\t\t\t\tlet xScaleKey = xFacet.scale;\n\t\t\t\t\t\t\tlet yScaleKey = yFacet.scale;\n\t\t\t\t\t\t\tlet [ xData, yData ] = data[i];\n\n\t\t\t\t\t\t\taccScale(wipScales[xScaleKey], pendScales[xScaleKey], xFacet, xData, xFacet.sorted);\n\t\t\t\t\t\t\taccScale(wipScales[yScaleKey], pendScales[yScaleKey], yFacet, yData, yFacet.sorted);\n\n\t\t\t\t\t\t\t// temp\n\t\t\t\t\t\t\ts.min = yFacet.min;\n\t\t\t\t\t\t\ts.max = yFacet.max;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// range independent scales\n\t\t\tfor (let k in wipScales) {\n\t\t\t\tlet wsc = wipScales[k];\n\t\t\t\tlet psc = pendScales[k];\n\n\t\t\t\tif (wsc.from == null && (psc == null || psc.min == null)) {\n\t\t\t\t\tlet minMax = wsc.range(\n\t\t\t\t\t\tself,\n\t\t\t\t\t\twsc.min ==  inf ? null : wsc.min,\n\t\t\t\t\t\twsc.max == -inf ? null : wsc.max,\n\t\t\t\t\t\tk\n\t\t\t\t\t);\n\t\t\t\t\twsc.min = minMax[0];\n\t\t\t\t\twsc.max = minMax[1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// range dependent scales\n\t\tfor (let k in wipScales) {\n\t\t\tlet wsc = wipScales[k];\n\n\t\t\tif (wsc.from != null) {\n\t\t\t\tlet base = wipScales[wsc.from];\n\n\t\t\t\tif (base.min == null)\n\t\t\t\t\twsc.min = wsc.max = null;\n\t\t\t\telse {\n\t\t\t\t\tlet minMax = wsc.range(self, base.min, base.max, k);\n\t\t\t\t\twsc.min = minMax[0];\n\t\t\t\t\twsc.max = minMax[1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet changed = {};\n\t\tlet anyChanged = false;\n\n\t\tfor (let k in wipScales) {\n\t\t\tlet wsc = wipScales[k];\n\t\t\tlet sc = scales[k];\n\n\t\t\tif (sc.min != wsc.min || sc.max != wsc.max) {\n\t\t\t\tsc.min = wsc.min;\n\t\t\t\tsc.max = wsc.max;\n\n\t\t\t\tlet distr = sc.distr;\n\n\t\t\t\tsc._min = distr == 3 ? log10(sc.min) : distr == 4 ? asinh(sc.min, sc.asinh) : sc.min;\n\t\t\t\tsc._max = distr == 3 ? log10(sc.max) : distr == 4 ? asinh(sc.max, sc.asinh) : sc.max;\n\n\t\t\t\tchanged[k] = anyChanged = true;\n\t\t\t}\n\t\t}\n\n\t\tif (anyChanged) {\n\t\t\t// invalidate paths of all series on changed scales\n\t\t\tseries.forEach((s, i) => {\n\t\t\t\tif (mode == 2) {\n\t\t\t\t\tif (i > 0 && changed.y)\n\t\t\t\t\t\ts._paths = null;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (changed[s.scale])\n\t\t\t\t\t\ts._paths = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfor (let k in changed) {\n\t\t\t\tshouldConvergeSize = true;\n\t\t\t\tfire(\"setScale\", k);\n\t\t\t}\n\n\t\t\tif (cursor.show && cursor.left >= 0)\n\t\t\t\tshouldSetCursor = shouldSetLegend = true;\n\t\t}\n\n\t\tfor (let k in pendScales)\n\t\t\tpendScales[k] = null;\n\t}\n\n\t// grabs the nearest indices with y data outside of x-scale limits\n\tfunction getOuterIdxs(ydata) {\n\t\tlet _i0 = clamp(i0 - 1, 0, dataLen - 1);\n\t\tlet _i1 = clamp(i1 + 1, 0, dataLen - 1);\n\n\t\twhile (ydata[_i0] == null && _i0 > 0)\n\t\t\t_i0--;\n\n\t\twhile (ydata[_i1] == null && _i1 < dataLen - 1)\n\t\t\t_i1++;\n\n\t\treturn [_i0, _i1];\n\t}\n\n\tfunction drawSeries() {\n\t\tif (dataLen > 0) {\n\t\t\tseries.forEach((s, i) => {\n\t\t\t\tif (i > 0 && s.show) {\n\t\t\t\t\tcacheStrokeFill(i, false);\n\t\t\t\t\tcacheStrokeFill(i, true);\n\n\t\t\t\t\tif (s._paths == null) {\n\t\t\t\t\t\tlet _idxs = mode == 2 ? [0, data[i][0].length - 1] : getOuterIdxs(data[i]);\n\t\t\t\t\t\ts._paths = s.paths(self, i, _idxs[0], _idxs[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tseries.forEach((s, i) => {\n\t\t\t\tif (i > 0 && s.show) {\n\t\t\t\t\tif (ctxAlpha != s.alpha)\n\t\t\t\t\t\tctx.globalAlpha = ctxAlpha = s.alpha;\n\n\t\t\t\t\ts._paths != null && drawPath(i, false);\n\n\t\t\t\t\t{\n\t\t\t\t\t\tlet _gaps = s._paths != null ? s._paths.gaps : null;\n\n\t\t\t\t\t\tlet show = s.points.show(self, i, i0, i1, _gaps);\n\t\t\t\t\t\tlet idxs = s.points.filter(self, i, show, _gaps);\n\n\t\t\t\t\t\tif (show || idxs) {\n\t\t\t\t\t\t\ts.points._paths = s.points.paths(self, i, i0, i1, idxs);\n\t\t\t\t\t\t\tdrawPath(i, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ctxAlpha != 1)\n\t\t\t\t\t\tctx.globalAlpha = ctxAlpha = 1;\n\n\t\t\t\t\tfire(\"drawSeries\", i);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction cacheStrokeFill(si, _points) {\n\t\tlet s = _points ? series[si].points : series[si];\n\n\t\ts._stroke = s.stroke(self, si);\n\t\ts._fill   = s.fill(self, si);\n\t}\n\n\tfunction drawPath(si, _points) {\n\t\tlet s = _points ? series[si].points : series[si];\n\n\t\tlet {\n\t\t\tstroke,\n\t\t\tfill,\n\t\t\tclip: gapsClip,\n\t\t\tflags,\n\n\t\t\t_stroke: strokeStyle = s._stroke,\n\t\t\t_fill:   fillStyle   = s._fill,\n\t\t\t_width:  width       = s.width,\n\t\t} = s._paths;\n\n\t\twidth = roundDec(width * pxRatio, 3);\n\n\t\tlet boundsClip = null;\n\t\tlet offset = (width % 2) / 2;\n\n\t\tif (_points && fillStyle == null)\n\t\t\tfillStyle = width > 0 ? \"#fff\" : strokeStyle;\n\n\t\tlet _pxAlign = s.pxAlign == 1 && offset > 0;\n\n\t\t_pxAlign && ctx.translate(offset, offset);\n\n\t\tif (!_points) {\n\t\t\tlet lft = plotLft - width / 2,\n\t\t\t\ttop = plotTop - width / 2,\n\t\t\t\twid = plotWid + width,\n\t\t\t\thgt = plotHgt + width;\n\n\t\t\tboundsClip = new Path2D();\n\t\t\tboundsClip.rect(lft, top, wid, hgt);\n\t\t}\n\n\t\t// the points pathbuilder's gapsClip is its boundsClip, since points dont need gaps clipping, and bounds depend on point size\n\t\tif (_points)\n\t\t\tstrokeFill(strokeStyle, width, s.dash, s.cap, fillStyle, stroke, fill, flags, gapsClip);\n\t\telse\n\t\t\tfillStroke(si, strokeStyle, width, s.dash, s.cap, fillStyle, stroke, fill, flags, boundsClip, gapsClip);\n\n\t\t_pxAlign && ctx.translate(-offset, -offset);\n\t}\n\n\tfunction fillStroke(si, strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip) {\n\t\tlet didStrokeFill = false;\n\n\t\t// for all bands where this series is the top edge, create upwards clips using the bottom edges\n\t\t// and apply clips + fill with band fill or dfltFill\n\t\tbands.forEach((b, bi) => {\n\t\t\t// isUpperEdge?\n\t\t\tif (b.series[0] == si) {\n\t\t\t\tlet lowerEdge = series[b.series[1]];\n\t\t\t\tlet lowerData = data[b.series[1]];\n\n\t\t\t\tlet bandClip = (lowerEdge._paths || EMPTY_OBJ).band;\n\n\t\t\t\tif (isArr(bandClip))\n\t\t\t\t\tbandClip = b.dir == 1 ? bandClip[0] : bandClip[1];\n\n\t\t\t\tlet gapsClip2;\n\n\t\t\t\tlet _fillStyle = null;\n\n\t\t\t\t// hasLowerEdge?\n\t\t\t\tif (lowerEdge.show && bandClip && hasData(lowerData, i0, i1)) {\n\t\t\t\t\t_fillStyle = b.fill(self, bi) || fillStyle;\n\t\t\t\t\tgapsClip2 = lowerEdge._paths.clip;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tbandClip = null;\n\n\t\t\t\tstrokeFill(strokeStyle, lineWidth, lineDash, lineCap, _fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip, gapsClip2, bandClip);\n\n\t\t\t\tdidStrokeFill = true;\n\t\t\t}\n\t\t});\n\n\t\tif (!didStrokeFill)\n\t\t\tstrokeFill(strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip);\n\t}\n\n\tconst CLIP_FILL_STROKE = BAND_CLIP_FILL | BAND_CLIP_STROKE;\n\n\tfunction strokeFill(strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip, gapsClip2, bandClip) {\n\t\tsetCtxStyle(strokeStyle, lineWidth, lineDash, lineCap, fillStyle);\n\n\t\tif (boundsClip || gapsClip || bandClip) {\n\t\t\tctx.save();\n\t\t\tboundsClip && ctx.clip(boundsClip);\n\t\t\tgapsClip && ctx.clip(gapsClip);\n\t\t}\n\n\t\tif (bandClip) {\n\t\t\tif ((flags & CLIP_FILL_STROKE) == CLIP_FILL_STROKE) {\n\t\t\t\tctx.clip(bandClip);\n\t\t\t\tgapsClip2 && ctx.clip(gapsClip2);\n\t\t\t\tdoFill(fillStyle, fillPath);\n\t\t\t\tdoStroke(strokeStyle, strokePath, lineWidth);\n\t\t\t}\n\t\t\telse if (flags & BAND_CLIP_STROKE) {\n\t\t\t\tdoFill(fillStyle, fillPath);\n\t\t\t\tctx.clip(bandClip);\n\t\t\t\tdoStroke(strokeStyle, strokePath, lineWidth);\n\t\t\t}\n\t\t\telse if (flags & BAND_CLIP_FILL) {\n\t\t\t\tctx.save();\n\t\t\t\tctx.clip(bandClip);\n\t\t\t\tgapsClip2 && ctx.clip(gapsClip2);\n\t\t\t\tdoFill(fillStyle, fillPath);\n\t\t\t\tctx.restore();\n\t\t\t\tdoStroke(strokeStyle, strokePath, lineWidth);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tdoFill(fillStyle, fillPath);\n\t\t\tdoStroke(strokeStyle, strokePath, lineWidth);\n\t\t}\n\n\t\tif (boundsClip || gapsClip || bandClip)\n\t\t\tctx.restore();\n\t}\n\n\tfunction doStroke(strokeStyle, strokePath, lineWidth) {\n\t\tif (lineWidth > 0) {\n\t\t\tif (strokePath instanceof Map) {\n\t\t\t\tstrokePath.forEach((strokePath, strokeStyle) => {\n\t\t\t\t\tctx.strokeStyle = ctxStroke = strokeStyle;\n\t\t\t\t\tctx.stroke(strokePath);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t\tstrokePath != null && strokeStyle && ctx.stroke(strokePath);\n\t\t}\n\t}\n\n\tfunction doFill(fillStyle, fillPath) {\n\t\tif (fillPath instanceof Map) {\n\t\t\tfillPath.forEach((fillPath, fillStyle) => {\n\t\t\t\tctx.fillStyle = ctxFill = fillStyle;\n\t\t\t\tctx.fill(fillPath);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t\tfillPath != null && fillStyle && ctx.fill(fillPath);\n\t}\n\n\tfunction getIncrSpace(axisIdx, min, max, fullDim) {\n\t\tlet axis = axes[axisIdx];\n\n\t\tlet incrSpace;\n\n\t\tif (fullDim <= 0)\n\t\t\tincrSpace = [0, 0];\n\t\telse {\n\t\t\tlet minSpace = axis._space = axis.space(self, axisIdx, min, max, fullDim);\n\t\t\tlet incrs    = axis._incrs = axis.incrs(self, axisIdx, min, max, fullDim, minSpace);\n\t\t\tincrSpace    = findIncr(min, max, incrs, fullDim, minSpace);\n\t\t}\n\n\t\treturn (axis._found = incrSpace);\n\t}\n\n\tfunction drawOrthoLines(offs, filts, ori, side, pos0, len, width, stroke, dash, cap) {\n\t\tlet offset = (width % 2) / 2;\n\n\t\tpxAlign == 1 && ctx.translate(offset, offset);\n\n\t\tsetCtxStyle(stroke, width, dash, cap, stroke);\n\n\t\tctx.beginPath();\n\n\t\tlet x0, y0, x1, y1, pos1 = pos0 + (side == 0 || side == 3 ? -len : len);\n\n\t\tif (ori == 0) {\n\t\t\ty0 = pos0;\n\t\t\ty1 = pos1;\n\t\t}\n\t\telse {\n\t\t\tx0 = pos0;\n\t\t\tx1 = pos1;\n\t\t}\n\n\t\tfor (let i = 0; i < offs.length; i++) {\n\t\t\tif (filts[i] != null) {\n\t\t\t\tif (ori == 0)\n\t\t\t\t\tx0 = x1 = offs[i];\n\t\t\t\telse\n\t\t\t\t\ty0 = y1 = offs[i];\n\n\t\t\t\tctx.moveTo(x0, y0);\n\t\t\t\tctx.lineTo(x1, y1);\n\t\t\t}\n\t\t}\n\n\t\tctx.stroke();\n\n\t\tpxAlign == 1 && ctx.translate(-offset, -offset);\n\t}\n\n\tfunction axesCalc(cycleNum) {\n\t//\tlog(\"axesCalc()\", arguments);\n\n\t\tlet converged = true;\n\n\t\taxes.forEach((axis, i) => {\n\t\t\tif (!axis.show)\n\t\t\t\treturn;\n\n\t\t\tlet scale = scales[axis.scale];\n\n\t\t\tif (scale.min == null) {\n\t\t\t\tif (axis._show) {\n\t\t\t\t\tconverged = false;\n\t\t\t\t\taxis._show = false;\n\t\t\t\t\tresetYSeries(false);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!axis._show) {\n\t\t\t\t\tconverged = false;\n\t\t\t\t\taxis._show = true;\n\t\t\t\t\tresetYSeries(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet side = axis.side;\n\t\t\tlet ori = side % 2;\n\n\t\t\tlet {min, max} = scale;\t\t// \t\t// should this toggle them ._show = false\n\n\t\t\tlet [_incr, _space] = getIncrSpace(i, min, max, ori == 0 ? plotWidCss : plotHgtCss);\n\n\t\t\tif (_space == 0)\n\t\t\t\treturn;\n\n\t\t\t// if we're using index positions, force first tick to match passed index\n\t\t\tlet forceMin = scale.distr == 2;\n\n\t\t\tlet _splits = axis._splits = axis.splits(self, i, min, max, _incr, _space, forceMin);\n\n\t\t\t// tick labels\n\t\t\t// BOO this assumes a specific data/series\n\t\t\tlet splits = scale.distr == 2 ? _splits.map(i => data0[i]) : _splits;\n\t\t\tlet incr   = scale.distr == 2 ? data0[_splits[1]] - data0[_splits[0]] : _incr;\n\n\t\t\tlet values = axis._values = axis.values(self, axis.filter(self, splits, i, _space, incr), i, _space, incr);\n\n\t\t\t// rotating of labels only supported on bottom x axis\n\t\t\taxis._rotate = side == 2 ? axis.rotate(self, values, i, _space) : 0;\n\n\t\t\tlet oldSize = axis._size;\n\n\t\t\taxis._size = ceil(axis.size(self, values, i, cycleNum));\n\n\t\t\tif (oldSize != null && axis._size != oldSize)\t\t\t// ready && ?\n\t\t\t\tconverged = false;\n\t\t});\n\n\t\treturn converged;\n\t}\n\n\tfunction paddingCalc(cycleNum) {\n\t\tlet converged = true;\n\n\t\tpadding.forEach((p, i) => {\n\t\t\tlet _p = p(self, i, sidesWithAxes, cycleNum);\n\n\t\t\tif (_p != _padding[i])\n\t\t\t\tconverged = false;\n\n\t\t\t_padding[i] = _p;\n\t\t});\n\n\t\treturn converged;\n\t}\n\n\tfunction drawAxesGrid() {\n\t\tfor (let i = 0; i < axes.length; i++) {\n\t\t\tlet axis = axes[i];\n\n\t\t\tif (!axis.show || !axis._show)\n\t\t\t\tcontinue;\n\n\t\t\tlet side = axis.side;\n\t\t\tlet ori = side % 2;\n\n\t\t\tlet x, y;\n\n\t\t\tlet fillStyle = axis.stroke(self, i);\n\n\t\t\tlet shiftDir = side == 0 || side == 3 ? -1 : 1;\n\n\t\t\t// axis label\n\t\t\tif (axis.label) {\n\t\t\t\tlet shiftAmt = axis.labelGap * shiftDir;\n\t\t\t\tlet baseLpos = round((axis._lpos + shiftAmt) * pxRatio);\n\n\t\t\t\tsetFontStyle(axis.labelFont[0], fillStyle, \"center\", side == 2 ? TOP : BOTTOM);\n\n\t\t\t\tctx.save();\n\n\t\t\t\tif (ori == 1) {\n\t\t\t\t\tx = y = 0;\n\n\t\t\t\t\tctx.translate(\n\t\t\t\t\t\tbaseLpos,\n\t\t\t\t\t\tround(plotTop + plotHgt / 2),\n\t\t\t\t\t);\n\t\t\t\t\tctx.rotate((side == 3 ? -PI : PI) / 2);\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tx = round(plotLft + plotWid / 2);\n\t\t\t\t\ty = baseLpos;\n\t\t\t\t}\n\n\t\t\t\tctx.fillText(axis.label, x, y);\n\n\t\t\t\tctx.restore();\n\t\t\t}\n\n\t\t\tlet [_incr, _space] = axis._found;\n\n\t\t\tif (_space == 0)\n\t\t\t\tcontinue;\n\n\t\t\tlet scale = scales[axis.scale];\n\n\t\t\tlet plotDim = ori == 0 ? plotWid : plotHgt;\n\t\t\tlet plotOff = ori == 0 ? plotLft : plotTop;\n\n\t\t\tlet axisGap = round(axis.gap * pxRatio);\n\n\t\t\tlet _splits = axis._splits;\n\n\t\t\t// tick labels\n\t\t\t// BOO this assumes a specific data/series\n\t\t\tlet splits = scale.distr == 2 ? _splits.map(i => data0[i]) : _splits;\n\t\t\tlet incr   = scale.distr == 2 ? data0[_splits[1]] - data0[_splits[0]] : _incr;\n\n\t\t\tlet ticks = axis.ticks;\n\t\t\tlet border = axis.border;\n\t\t\tlet tickSize = ticks.show ? round(ticks.size * pxRatio) : 0;\n\n\t\t\t// rotating of labels only supported on bottom x axis\n\t\t\tlet angle = axis._rotate * -PI/180;\n\n\t\t\tlet basePos  = pxRound(axis._pos * pxRatio);\n\t\t\tlet shiftAmt = (tickSize + axisGap) * shiftDir;\n\t\t\tlet finalPos = basePos + shiftAmt;\n\t\t\t    y        = ori == 0 ? finalPos : 0;\n\t\t\t    x        = ori == 1 ? finalPos : 0;\n\n\t\t\tlet font         = axis.font[0];\n\t\t\tlet textAlign    = axis.align == 1 ? LEFT :\n\t\t\t                   axis.align == 2 ? RIGHT :\n\t\t\t                   angle > 0 ? LEFT :\n\t\t\t                   angle < 0 ? RIGHT :\n\t\t\t                   ori == 0 ? \"center\" : side == 3 ? RIGHT : LEFT;\n\t\t\tlet textBaseline = angle ||\n\t\t\t                   ori == 1 ? \"middle\" : side == 2 ? TOP   : BOTTOM;\n\n\t\t\tsetFontStyle(font, fillStyle, textAlign, textBaseline);\n\n\t\t\tlet lineHeight = axis.font[1] * axis.lineGap;\n\n\t\t\tlet canOffs = _splits.map(val => pxRound(getPos(val, scale, plotDim, plotOff)));\n\n\t\t\tlet _values = axis._values;\n\n\t\t\tfor (let i = 0; i < _values.length; i++) {\n\t\t\t\tlet val = _values[i];\n\n\t\t\t\tif (val != null) {\n\t\t\t\t\tif (ori == 0)\n\t\t\t\t\t\tx = canOffs[i];\n\t\t\t\t\telse\n\t\t\t\t\t\ty = canOffs[i];\n\n\t\t\t\t\tval = \"\" + val;\n\n\t\t\t\t\tlet _parts = val.indexOf(\"\\n\") == -1 ? [val] : val.split(/\\n/gm);\n\n\t\t\t\t\tfor (let j = 0; j < _parts.length; j++) {\n\t\t\t\t\t\tlet text = _parts[j];\n\n\t\t\t\t\t\tif (angle) {\n\t\t\t\t\t\t\tctx.save();\n\t\t\t\t\t\t\tctx.translate(x, y + j * lineHeight); // can this be replaced with position math?\n\t\t\t\t\t\t\tctx.rotate(angle); // can this be done once?\n\t\t\t\t\t\t\tctx.fillText(text, 0, 0);\n\t\t\t\t\t\t\tctx.restore();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tctx.fillText(text, x, y + j * lineHeight);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// ticks\n\t\t\tif (ticks.show) {\n\t\t\t\tdrawOrthoLines(\n\t\t\t\t\tcanOffs,\n\t\t\t\t\tticks.filter(self, splits, i, _space, incr),\n\t\t\t\t\tori,\n\t\t\t\t\tside,\n\t\t\t\t\tbasePos,\n\t\t\t\t\ttickSize,\n\t\t\t\t\troundDec(ticks.width * pxRatio, 3),\n\t\t\t\t\tticks.stroke(self, i),\n\t\t\t\t\tticks.dash,\n\t\t\t\t\tticks.cap,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// grid\n\t\t\tlet grid = axis.grid;\n\n\t\t\tif (grid.show) {\n\t\t\t\tdrawOrthoLines(\n\t\t\t\t\tcanOffs,\n\t\t\t\t\tgrid.filter(self, splits, i, _space, incr),\n\t\t\t\t\tori,\n\t\t\t\t\tori == 0 ? 2 : 1,\n\t\t\t\t\tori == 0 ? plotTop : plotLft,\n\t\t\t\t\tori == 0 ? plotHgt : plotWid,\n\t\t\t\t\troundDec(grid.width * pxRatio, 3),\n\t\t\t\t\tgrid.stroke(self, i),\n\t\t\t\t\tgrid.dash,\n\t\t\t\t\tgrid.cap,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (border.show) {\n\t\t\t\tdrawOrthoLines(\n\t\t\t\t\t[basePos],\n\t\t\t\t\t[1],\n\t\t\t\t\tori == 0 ? 1 : 0,\n\t\t\t\t\tori == 0 ? 1 : 2,\n\t\t\t\t\tori == 1 ? plotTop : plotLft,\n\t\t\t\t\tori == 1 ? plotHgt : plotWid,\n\t\t\t\t\troundDec(border.width * pxRatio, 3),\n\t\t\t\t\tborder.stroke(self, i),\n\t\t\t\t\tborder.dash,\n\t\t\t\t\tborder.cap,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tfire(\"drawAxes\");\n\t}\n\n\tfunction resetYSeries(minMax) {\n\t//\tlog(\"resetYSeries()\", arguments);\n\n\t\tseries.forEach((s, i) => {\n\t\t\tif (i > 0) {\n\t\t\t\ts._paths = null;\n\n\t\t\t\tif (minMax) {\n\t\t\t\t\tif (mode == 1) {\n\t\t\t\t\t\ts.min = null;\n\t\t\t\t\t\ts.max = null;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ts.facets.forEach(f => {\n\t\t\t\t\t\t\tf.min = null;\n\t\t\t\t\t\t\tf.max = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tlet queuedCommit = false;\n\n\tfunction commit() {\n\t\tif (!queuedCommit) {\n\t\t\tmicroTask(_commit);\n\t\t\tqueuedCommit = true;\n\t\t}\n\t}\n\n\tfunction _commit() {\n\t//\tlog(\"_commit()\", arguments);\n\n\t\tif (shouldSetScales) {\n\t\t\tsetScales();\n\t\t\tshouldSetScales = false;\n\t\t}\n\n\t\tif (shouldConvergeSize) {\n\t\t\tconvergeSize();\n\t\t\tshouldConvergeSize = false;\n\t\t}\n\n\t\tif (shouldSetSize) {\n\t\t\tsetStylePx(under, LEFT,   plotLftCss);\n\t\t\tsetStylePx(under, TOP,    plotTopCss);\n\t\t\tsetStylePx(under, WIDTH,  plotWidCss);\n\t\t\tsetStylePx(under, HEIGHT, plotHgtCss);\n\n\t\t\tsetStylePx(over, LEFT,    plotLftCss);\n\t\t\tsetStylePx(over, TOP,     plotTopCss);\n\t\t\tsetStylePx(over, WIDTH,   plotWidCss);\n\t\t\tsetStylePx(over, HEIGHT,  plotHgtCss);\n\n\t\t\tsetStylePx(wrap, WIDTH,   fullWidCss);\n\t\t\tsetStylePx(wrap, HEIGHT,  fullHgtCss);\n\n\t\t\t// NOTE: mutating this during print preview in Chrome forces transparent\n\t\t\t// canvas pixels to white, even when followed up with clearRect() below\n\t\t\tcan.width  = round(fullWidCss * pxRatio);\n\t\t\tcan.height = round(fullHgtCss * pxRatio);\n\n\t\t\taxes.forEach(({ _el, _show, _size, _pos, side }) => {\n\t\t\t\tif (_el != null) {\n\t\t\t\t\tif (_show) {\n\t\t\t\t\t\tlet posOffset = (side === 3 || side === 0 ? _size : 0);\n\t\t\t\t\t\tlet isVt = side % 2 == 1;\n\n\t\t\t\t\t\tsetStylePx(_el, isVt ? \"left\"   : \"top\",    _pos - posOffset);\n\t\t\t\t\t\tsetStylePx(_el, isVt ? \"width\"  : \"height\", _size);\n\t\t\t\t\t\tsetStylePx(_el, isVt ? \"top\"    : \"left\",   isVt ? plotTopCss : plotLftCss);\n\t\t\t\t\t\tsetStylePx(_el, isVt ? \"height\" : \"width\",  isVt ? plotHgtCss : plotWidCss);\n\n\t\t\t\t\t\tremClass(_el, OFF);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\taddClass(_el, OFF);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// invalidate ctx style cache\n\t\t\tctxStroke = ctxFill = ctxWidth = ctxJoin = ctxCap = ctxFont = ctxAlign = ctxBaseline = ctxDash = null;\n\t\t\tctxAlpha = 1;\n\n\t\t\tsyncRect(true);\n\n\t\t\tfire(\"setSize\");\n\n\t\t\tshouldSetSize = false;\n\t\t}\n\n\t\tif (fullWidCss > 0 && fullHgtCss > 0) {\n\t\t\tctx.clearRect(0, 0, can.width, can.height);\n\t\t\tfire(\"drawClear\");\n\t\t\tdrawOrder.forEach(fn => fn());\n\t\t\tfire(\"draw\");\n\t\t}\n\n\t\tif (select.show && shouldSetSelect) {\n\t\t\tsetSelect(select);\n\t\t\tshouldSetSelect = false;\n\t\t}\n\n\t\tif (cursor.show && shouldSetCursor) {\n\t\t\tupdateCursor(null, true, false);\n\t\t\tshouldSetCursor = false;\n\t\t}\n\n\t\tif (legend.show && legend.live && shouldSetLegend) {\n\t\t\tsetLegend();\n\t\t\tshouldSetLegend = false; // redundant currently\n\t\t}\n\n\t\tif (!ready) {\n\t\t\tready = true;\n\t\t\tself.status = 1;\n\n\t\t\tfire(\"ready\");\n\t\t}\n\n\t\tviaAutoScaleX = false;\n\n\t\tqueuedCommit = false;\n\t}\n\n\tself.redraw = (rebuildPaths, recalcAxes) => {\n\t\tshouldConvergeSize = recalcAxes || false;\n\n\t\tif (rebuildPaths !== false)\n\t\t\t_setScale(xScaleKey, scaleX.min, scaleX.max);\n\t\telse\n\t\t\tcommit();\n\t};\n\n\t// redraw() => setScale('x', scales.x.min, scales.x.max);\n\n\t// explicit, never re-ranged (is this actually true? for x and y)\n\tfunction setScale(key, opts) {\n\t\tlet sc = scales[key];\n\n\t\tif (sc.from == null) {\n\t\t\tif (dataLen == 0) {\n\t\t\t\tlet minMax = sc.range(self, opts.min, opts.max, key);\n\t\t\t\topts.min = minMax[0];\n\t\t\t\topts.max = minMax[1];\n\t\t\t}\n\n\t\t\tif (opts.min > opts.max) {\n\t\t\t\tlet _min = opts.min;\n\t\t\t\topts.min = opts.max;\n\t\t\t\topts.max = _min;\n\t\t\t}\n\n\t\t\tif (dataLen > 1 && opts.min != null && opts.max != null && opts.max - opts.min < 1e-16)\n\t\t\t\treturn;\n\n\t\t\tif (key == xScaleKey) {\n\t\t\t\tif (sc.distr == 2 && dataLen > 0) {\n\t\t\t\t\topts.min = closestIdx(opts.min, data[0]);\n\t\t\t\t\topts.max = closestIdx(opts.max, data[0]);\n\n\t\t\t\t\tif (opts.min == opts.max)\n\t\t\t\t\t\topts.max++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t//\tlog(\"setScale()\", arguments);\n\n\t\t\tpendScales[key] = opts;\n\n\t\t\tshouldSetScales = true;\n\t\t\tcommit();\n\t\t}\n\t}\n\n\tself.setScale = setScale;\n\n//\tINTERACTION\n\n\tlet xCursor;\n\tlet yCursor;\n\tlet vCursor;\n\tlet hCursor;\n\n\t// starting position before cursor.move\n\tlet rawMouseLeft0;\n\tlet rawMouseTop0;\n\n\t// starting position\n\tlet mouseLeft0;\n\tlet mouseTop0;\n\n\t// current position before cursor.move\n\tlet rawMouseLeft1;\n\tlet rawMouseTop1;\n\n\t// current position\n\tlet mouseLeft1;\n\tlet mouseTop1;\n\n\tlet dragging = false;\n\n\tconst drag = cursor.drag;\n\n\tlet dragX = drag.x;\n\tlet dragY = drag.y;\n\n\tif (cursor.show) {\n\t\tif (cursor.x)\n\t\t\txCursor = placeDiv(CURSOR_X, over);\n\t\tif (cursor.y)\n\t\t\tyCursor = placeDiv(CURSOR_Y, over);\n\n\t\tif (scaleX.ori == 0) {\n\t\t\tvCursor = xCursor;\n\t\t\thCursor = yCursor;\n\t\t}\n\t\telse {\n\t\t\tvCursor = yCursor;\n\t\t\thCursor = xCursor;\n\t\t}\n\n\t\tmouseLeft1 = cursor.left;\n\t\tmouseTop1 = cursor.top;\n\t}\n\n\tconst select = self.select = assign({\n\t\tshow:   true,\n\t\tover:   true,\n\t\tleft:   0,\n\t\twidth:  0,\n\t\ttop:    0,\n\t\theight: 0,\n\t}, opts.select);\n\n\tconst selectDiv = select.show ? placeDiv(SELECT, select.over ? over : under) : null;\n\n\tfunction setSelect(opts, _fire) {\n\t\tif (select.show) {\n\t\t\tfor (let prop in opts) {\n\t\t\t\tselect[prop] = opts[prop];\n\n\t\t\t\tif (prop in _hideProps)\n\t\t\t\t\tsetStylePx(selectDiv, prop, opts[prop]);\n\t\t\t}\n\n\t\t\t_fire !== false && fire(\"setSelect\");\n\t\t}\n\t}\n\n\tself.setSelect = setSelect;\n\n\tfunction toggleDOM(i, onOff) {\n\t\tlet s = series[i];\n\t\tlet label = showLegend ? legendRows[i] : null;\n\n\t\tif (s.show)\n\t\t\tlabel && remClass(label, OFF);\n\t\telse {\n\t\t\tlabel && addClass(label, OFF);\n\t\t\tcursorPts.length > 1 && elTrans(cursorPts[i], -10, -10, plotWidCss, plotHgtCss);\n\t\t}\n\t}\n\n\tfunction _setScale(key, min, max) {\n\t\tsetScale(key, {min, max});\n\t}\n\n\tfunction setSeries(i, opts, _fire, _pub) {\n\t//\tlog(\"setSeries()\", arguments);\n\n\t\tif (opts.focus != null)\n\t\t\tsetFocus(i);\n\n\t\tif (opts.show != null) {\n\t\t\tseries.forEach((s, si) => {\n\t\t\t\tif (si > 0 && (i == si || i == null)) {\n\t\t\t\t\ts.show = opts.show;\n\t\t\t\t\ttoggleDOM(si, opts.show);\n\n\t\t\t\t\t_setScale(mode == 2 ? s.facets[1].scale : s.scale, null, null);\n\t\t\t\t\tcommit();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t_fire !== false && fire(\"setSeries\", i, opts);\n\n\t\t_pub && pubSync(\"setSeries\", self, i, opts);\n\t}\n\n\tself.setSeries = setSeries;\n\n\tfunction setBand(bi, opts) {\n\t\tassign(bands[bi], opts);\n\t}\n\n\tfunction addBand(opts, bi) {\n\t\topts.fill = fnOrSelf(opts.fill || null);\n\t\topts.dir = ifNull(opts.dir, -1);\n\t\tbi = bi == null ? bands.length : bi;\n\t\tbands.splice(bi, 0, opts);\n\t}\n\n\tfunction delBand(bi) {\n\t\tif (bi == null)\n\t\t\tbands.length = 0;\n\t\telse\n\t\t\tbands.splice(bi, 1);\n\t}\n\n\tself.addBand = addBand;\n\tself.setBand = setBand;\n\tself.delBand = delBand;\n\n\tfunction setAlpha(i, value) {\n\t\tseries[i].alpha = value;\n\n\t\tif (cursor.show && cursorPts[i])\n\t\t\tcursorPts[i].style.opacity = value;\n\n\t\tif (showLegend && legendRows[i])\n\t\t\tlegendRows[i].style.opacity = value;\n\t}\n\n\t// y-distance\n\tlet closestDist;\n\tlet closestSeries;\n\tlet focusedSeries;\n\tconst FOCUS_TRUE  = {focus: true};\n\n\tfunction setFocus(i) {\n\t\tif (i != focusedSeries) {\n\t\t//\tlog(\"setFocus()\", arguments);\n\n\t\t\tlet allFocused = i == null;\n\n\t\t\tlet _setAlpha = focus.alpha != 1;\n\n\t\t\tseries.forEach((s, i2) => {\n\t\t\t\tlet isFocused = allFocused || i2 == 0 || i2 == i;\n\t\t\t\ts._focus = allFocused ? null : isFocused;\n\t\t\t\t_setAlpha && setAlpha(i2, isFocused ? 1 : focus.alpha);\n\t\t\t});\n\n\t\t\tfocusedSeries = i;\n\t\t\t_setAlpha && commit();\n\t\t}\n\t}\n\n\tif (showLegend && cursorFocus) {\n\t\tonMouse(mouseleave, legendTable, e => {\n\t\t\tif (cursor._lock)\n\t\t\t\treturn;\n\n\t\t\tsetCursorEvent(e);\n\n\t\t\tif (focusedSeries != null)\n\t\t\t\tsetSeries(null, FOCUS_TRUE, true, syncOpts.setSeries);\n\t\t});\n\t}\n\n\tfunction posToVal(pos, scale, can) {\n\t\tlet sc = scales[scale];\n\n\t\tif (can)\n\t\t\tpos = pos / pxRatio - (sc.ori == 1 ? plotTopCss : plotLftCss);\n\n\t\tlet dim = plotWidCss;\n\n\t\tif (sc.ori == 1) {\n\t\t\tdim = plotHgtCss;\n\t\t\tpos = dim - pos;\n\t\t}\n\n\t\tif (sc.dir == -1)\n\t\t\tpos = dim - pos;\n\n\t\tlet _min = sc._min,\n\t\t\t_max = sc._max,\n\t\t\tpct = pos / dim;\n\n\t\tlet sv = _min + (_max - _min) * pct;\n\n\t\tlet distr = sc.distr;\n\n\t\treturn (\n\t\t\tdistr == 3 ? pow(10, sv) :\n\t\t\tdistr == 4 ? sinh(sv, sc.asinh) :\n\t\t\tsv\n\t\t);\n\t}\n\n\tfunction closestIdxFromXpos(pos, can) {\n\t\tlet v = posToVal(pos, xScaleKey, can);\n\t\treturn closestIdx(v, data[0], i0, i1);\n\t}\n\n\tself.valToIdx = val => closestIdx(val, data[0]);\n\tself.posToIdx = closestIdxFromXpos;\n\tself.posToVal = posToVal;\n\tself.valToPos = (val, scale, can) => (\n\t\tscales[scale].ori == 0 ?\n\t\tgetHPos(val, scales[scale],\n\t\t\tcan ? plotWid : plotWidCss,\n\t\t\tcan ? plotLft : 0,\n\t\t) :\n\t\tgetVPos(val, scales[scale],\n\t\t\tcan ? plotHgt : plotHgtCss,\n\t\t\tcan ? plotTop : 0,\n\t\t)\n\t);\n\n\t// defers calling expensive functions\n\tfunction batch(fn) {\n\t\tfn(self);\n\t\tcommit();\n\t}\n\n\tself.batch = batch;\n\n\tself.setCursor = (opts, _fire, _pub) => {\n\t\tmouseLeft1 = opts.left;\n\t\tmouseTop1 = opts.top;\n\t//\tassign(cursor, opts);\n\t\tupdateCursor(null, _fire, _pub);\n\t};\n\n\tfunction setSelH(off, dim) {\n\t\tsetStylePx(selectDiv, LEFT,  select.left = off);\n\t\tsetStylePx(selectDiv, WIDTH, select.width = dim);\n\t}\n\n\tfunction setSelV(off, dim) {\n\t\tsetStylePx(selectDiv, TOP,    select.top = off);\n\t\tsetStylePx(selectDiv, HEIGHT, select.height = dim);\n\t}\n\n\tlet setSelX = scaleX.ori == 0 ? setSelH : setSelV;\n\tlet setSelY = scaleX.ori == 1 ? setSelH : setSelV;\n\n\tfunction syncLegend() {\n\t\tif (showLegend && legend.live) {\n\t\t\tfor (let i = mode == 2 ? 1 : 0; i < series.length; i++) {\n\t\t\t\tif (i == 0 && multiValLegend)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tlet vals = legend.values[i];\n\n\t\t\t\tlet j = 0;\n\n\t\t\t\tfor (let k in vals)\n\t\t\t\t\tlegendCells[i][j++].firstChild.nodeValue = vals[k];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setLegend(opts, _fire) {\n\t\tif (opts != null) {\n\t\t\tif (opts.idxs) {\n\t\t\t\topts.idxs.forEach((didx, sidx) => {\n\t\t\t\t\tactiveIdxs[sidx] = didx;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (!isUndef(opts.idx))\n\t\t\t\tactiveIdxs.fill(opts.idx);\n\n\t\t\tlegend.idx = activeIdxs[0];\n\t\t}\n\n\t\tfor (let sidx = 0; sidx < series.length; sidx++) {\n\t\t\tif (sidx > 0 || mode == 1 && !multiValLegend)\n\t\t\t\tsetLegendValues(sidx, activeIdxs[sidx]);\n\t\t}\n\n\t\tif (showLegend && legend.live)\n\t\t\tsyncLegend();\n\n\t\tshouldSetLegend = false;\n\n\t\t_fire !== false && fire(\"setLegend\");\n\t}\n\n\tself.setLegend = setLegend;\n\n\tfunction setLegendValues(sidx, idx) {\n\t\tlet s = series[sidx];\n\t\tlet src = sidx == 0 && xScaleDistr == 2 ? data0 : data[sidx];\n\t\tlet val;\n\n\t\tif (multiValLegend)\n\t\t\tval = s.values(self, sidx, idx) ?? NULL_LEGEND_VALUES;\n\t\telse {\n\t\t\tval = s.value(self, idx == null ? null : src[idx], sidx, idx);\n\t\t\tval = val == null ? NULL_LEGEND_VALUES : {_: val};\n\t\t}\n\n\t\tlegend.values[sidx] = val;\n\t}\n\n\tfunction updateCursor(src, _fire, _pub) {\n\t//\tts == null && log(\"updateCursor()\", arguments);\n\n\t\trawMouseLeft1 = mouseLeft1;\n\t\trawMouseTop1 = mouseTop1;\n\n\t\t[mouseLeft1, mouseTop1] = cursor.move(self, mouseLeft1, mouseTop1);\n\n\t\tif (cursor.show) {\n\t\t\tvCursor && elTrans(vCursor, round(mouseLeft1), 0, plotWidCss, plotHgtCss);\n\t\t\thCursor && elTrans(hCursor, 0, round(mouseTop1), plotWidCss, plotHgtCss);\n\t\t}\n\n\t\tlet idx;\n\n\t\t// when zooming to an x scale range between datapoints the binary search\n\t\t// for nearest min/max indices results in this condition. cheap hack :D\n\t\tlet noDataInRange = i0 > i1; // works for mode 1 only\n\n\t\tclosestDist = inf;\n\n\t\t// TODO: extract\n\t\tlet xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss;\n\t\tlet yDim = scaleX.ori == 1 ? plotWidCss : plotHgtCss;\n\n\t\t// if cursor hidden, hide points & clear legend vals\n\t\tif (mouseLeft1 < 0 || dataLen == 0 || noDataInRange) {\n\t\t\tidx = null;\n\n\t\t\tfor (let i = 0; i < series.length; i++) {\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tcursorPts.length > 1 && elTrans(cursorPts[i], -10, -10, plotWidCss, plotHgtCss);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cursorFocus)\n\t\t\t\tsetSeries(null, FOCUS_TRUE, true, src == null && syncOpts.setSeries);\n\n\t\t\tif (legend.live) {\n\t\t\t\tactiveIdxs.fill(idx);\n\t\t\t\tshouldSetLegend = true;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t//\tlet pctY = 1 - (y / rect.height);\n\n\t\t\tlet mouseXPos, valAtPosX, xPos;\n\n\t\t\tif (mode == 1) {\n\t\t\t\tmouseXPos = scaleX.ori == 0 ? mouseLeft1 : mouseTop1;\n\t\t\t\tvalAtPosX = posToVal(mouseXPos, xScaleKey);\n\t\t\t\tidx = closestIdx(valAtPosX, data[0], i0, i1);\n\t\t\t\txPos = valToPosX(data[0][idx], scaleX, xDim, 0);\n\t\t\t}\n\n\t\t\tfor (let i = mode == 2 ? 1 : 0; i < series.length; i++) {\n\t\t\t\tlet s = series[i];\n\n\t\t\t\tlet idx1  = activeIdxs[i];\n\t\t\t\tlet yVal1 = mode == 1 ? data[i][idx1] : data[i][1][idx1];\n\n\t\t\t\tlet idx2  = cursor.dataIdx(self, i, idx, valAtPosX);\n\t\t\t\tlet yVal2 = mode == 1 ? data[i][idx2] : data[i][1][idx2];\n\n\t\t\t\tshouldSetLegend = shouldSetLegend || yVal2 != yVal1 || idx2 != idx1;\n\n\t\t\t\tactiveIdxs[i] = idx2;\n\n\t\t\t\tlet xPos2 = incrRoundUp(idx2 == idx ? xPos : valToPosX(mode == 1 ? data[0][idx2] : data[i][0][idx2], scaleX, xDim, 0), 1);\n\n\t\t\t\tif (i > 0 && s.show) {\n\t\t\t\t\tlet yPos = yVal2 == null ? -10 : incrRoundUp(valToPosY(yVal2, mode == 1 ? scales[s.scale] : scales[s.facets[1].scale], yDim, 0), 1);\n\n\t\t\t\t\tif (cursorFocus && yPos >= 0 && mode == 1) {\n\t\t\t\t\t\tlet dist = abs(yPos - mouseTop1);\n\n\t\t\t\t\t\tif (dist < closestDist) {\n\t\t\t\t\t\t\tlet bias = focus.bias;\n\n\t\t\t\t\t\t\tif (bias != 0) {\n\t\t\t\t\t\t\t\tlet mouseYPos = scaleX.ori == 1 ? mouseLeft1 : mouseTop1;\n\t\t\t\t\t\t\t\tlet mouseYVal = posToVal(mouseYPos, s.scale);\n\n\t\t\t\t\t\t\t\tlet seriesYValSign = yVal2     >= 0 ? 1 : -1;\n\t\t\t\t\t\t\t\tlet mouseYValSign  = mouseYVal >= 0 ? 1 : -1;\n\n\t\t\t\t\t\t\t\t// with a focus bias, we will never cross zero when prox testing\n\t\t\t\t\t\t\t\t// it's either closest towards zero, or closest away from zero\n\t\t\t\t\t\t\t\tif (mouseYValSign == seriesYValSign && (\n\t\t\t\t\t\t\t\t\tmouseYValSign == 1 ?\n\t\t\t\t\t\t\t\t\t\t(bias == 1 ? yVal2 >= mouseYVal : yVal2 <= mouseYVal) :  // >= 0\n\t\t\t\t\t\t\t\t\t\t(bias == 1 ? yVal2 <= mouseYVal : yVal2 >= mouseYVal)    //  < 0\n\t\t\t\t\t\t\t\t)) {\n\t\t\t\t\t\t\t\t\tclosestDist = dist;\n\t\t\t\t\t\t\t\t\tclosestSeries = i;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tclosestDist = dist;\n\t\t\t\t\t\t\t\tclosestSeries = i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlet hPos, vPos;\n\n\t\t\t\t\tif (scaleX.ori == 0) {\n\t\t\t\t\t\thPos = xPos2;\n\t\t\t\t\t\tvPos = yPos;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\thPos = yPos;\n\t\t\t\t\t\tvPos = xPos2;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (shouldSetLegend && cursorPts.length > 1) {\n\t\t\t\t\t\telColor(cursorPts[i], cursor.points.fill(self, i), cursor.points.stroke(self, i));\n\n\t\t\t\t\t\tlet ptWid, ptHgt, ptLft, ptTop,\n\t\t\t\t\t\t\tcentered = true,\n\t\t\t\t\t\t\tgetBBox = cursor.points.bbox;\n\n\t\t\t\t\t\tif (getBBox != null) {\n\t\t\t\t\t\t\tcentered = false;\n\n\t\t\t\t\t\t\tlet bbox = getBBox(self, i);\n\n\t\t\t\t\t\t\tptLft = bbox.left;\n\t\t\t\t\t\t\tptTop = bbox.top;\n\t\t\t\t\t\t\tptWid = bbox.width;\n\t\t\t\t\t\t\tptHgt = bbox.height;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tptLft = hPos;\n\t\t\t\t\t\t\tptTop = vPos;\n\t\t\t\t\t\t\tptWid = ptHgt = cursor.points.size(self, i);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telSize(cursorPts[i], ptWid, ptHgt, centered);\n\t\t\t\t\t\telTrans(cursorPts[i], ptLft, ptTop, plotWidCss, plotHgtCss);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcursor.idx = idx;\n\t\tcursor.left = mouseLeft1;\n\t\tcursor.top = mouseTop1;\n\n\t\tif (shouldSetLegend) {\n\t\t\tlegend.idx = idx;\n\t\t\tsetLegend();\n\t\t}\n\n\t\t// nit: cursor.drag.setSelect is assumed always true\n\t\tif (select.show && dragging) {\n\t\t\tif (src != null) {\n\t\t\t\tlet [xKey, yKey] = syncOpts.scales;\n\t\t\t\tlet [matchXKeys, matchYKeys] = syncOpts.match;\n\t\t\t\tlet [xKeySrc, yKeySrc] = src.cursor.sync.scales;\n\n\t\t\t\t// match the dragX/dragY implicitness/explicitness of src\n\t\t\t\tlet sdrag = src.cursor.drag;\n\t\t\t\tdragX = sdrag._x;\n\t\t\t\tdragY = sdrag._y;\n\n\t\t\t\tif (dragX || dragY) {\n\t\t\t\t\tlet { left, top, width, height } = src.select;\n\n\t\t\t\t\tlet sori = src.scales[xKey].ori;\n\t\t\t\t\tlet sPosToVal = src.posToVal;\n\n\t\t\t\t\tlet sOff, sDim, sc, a, b;\n\n\t\t\t\t\tlet matchingX = xKey != null && matchXKeys(xKey, xKeySrc);\n\t\t\t\t\tlet matchingY = yKey != null && matchYKeys(yKey, yKeySrc);\n\n\t\t\t\t\tif (matchingX && dragX) {\n\t\t\t\t\t\tif (sori == 0) {\n\t\t\t\t\t\t\tsOff = left;\n\t\t\t\t\t\t\tsDim = width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tsOff = top;\n\t\t\t\t\t\t\tsDim = height;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsc = scales[xKey];\n\n\t\t\t\t\t\ta = valToPosX(sPosToVal(sOff, xKeySrc),        sc, xDim, 0);\n\t\t\t\t\t\tb = valToPosX(sPosToVal(sOff + sDim, xKeySrc), sc, xDim, 0);\n\n\t\t\t\t\t\tsetSelX(min(a,b), abs(b-a));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tsetSelX(0, xDim);\n\n\t\t\t\t\tif (matchingY && dragY) {\n\t\t\t\t\t\tif (sori == 1) {\n\t\t\t\t\t\t\tsOff = left;\n\t\t\t\t\t\t\tsDim = width;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tsOff = top;\n\t\t\t\t\t\t\tsDim = height;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsc = scales[yKey];\n\n\t\t\t\t\t\ta = valToPosY(sPosToVal(sOff, yKeySrc),        sc, yDim, 0);\n\t\t\t\t\t\tb = valToPosY(sPosToVal(sOff + sDim, yKeySrc), sc, yDim, 0);\n\n\t\t\t\t\t\tsetSelY(min(a,b), abs(b-a));\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tsetSelY(0, yDim);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\thideSelect();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet rawDX = abs(rawMouseLeft1 - rawMouseLeft0);\n\t\t\t\tlet rawDY = abs(rawMouseTop1 - rawMouseTop0);\n\n\t\t\t\tif (scaleX.ori == 1) {\n\t\t\t\t\tlet _rawDX = rawDX;\n\t\t\t\t\trawDX = rawDY;\n\t\t\t\t\trawDY = _rawDX;\n\t\t\t\t}\n\n\t\t\t\tdragX = drag.x && rawDX >= drag.dist;\n\t\t\t\tdragY = drag.y && rawDY >= drag.dist;\n\n\t\t\t\tlet uni = drag.uni;\n\n\t\t\t\tif (uni != null) {\n\t\t\t\t\t// only calc drag status if they pass the dist thresh\n\t\t\t\t\tif (dragX && dragY) {\n\t\t\t\t\t\tdragX = rawDX >= uni;\n\t\t\t\t\t\tdragY = rawDY >= uni;\n\n\t\t\t\t\t\t// force unidirectionality when both are under uni limit\n\t\t\t\t\t\tif (!dragX && !dragY) {\n\t\t\t\t\t\t\tif (rawDY > rawDX)\n\t\t\t\t\t\t\t\tdragY = true;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tdragX = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (drag.x && drag.y && (dragX || dragY))\n\t\t\t\t\t// if omni with no uni then both dragX / dragY should be true if either is true\n\t\t\t\t\tdragX = dragY = true;\n\n\t\t\t\tlet p0, p1;\n\n\t\t\t\tif (dragX) {\n\t\t\t\t\tif (scaleX.ori == 0) {\n\t\t\t\t\t\tp0 = mouseLeft0;\n\t\t\t\t\t\tp1 = mouseLeft1;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp0 = mouseTop0;\n\t\t\t\t\t\tp1 = mouseTop1;\n\t\t\t\t\t}\n\n\t\t\t\t\tsetSelX(min(p0, p1), abs(p1 - p0));\n\n\t\t\t\t\tif (!dragY)\n\t\t\t\t\t\tsetSelY(0, yDim);\n\t\t\t\t}\n\n\t\t\t\tif (dragY) {\n\t\t\t\t\tif (scaleX.ori == 1) {\n\t\t\t\t\t\tp0 = mouseLeft0;\n\t\t\t\t\t\tp1 = mouseLeft1;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp0 = mouseTop0;\n\t\t\t\t\t\tp1 = mouseTop1;\n\t\t\t\t\t}\n\n\t\t\t\t\tsetSelY(min(p0, p1), abs(p1 - p0));\n\n\t\t\t\t\tif (!dragX)\n\t\t\t\t\t\tsetSelX(0, xDim);\n\t\t\t\t}\n\n\t\t\t\t// the drag didn't pass the dist requirement\n\t\t\t\tif (!dragX && !dragY) {\n\t\t\t\t\tsetSelX(0, 0);\n\t\t\t\t\tsetSelY(0, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdrag._x = dragX;\n\t\tdrag._y = dragY;\n\n\t\tif (src == null) {\n\t\t\tif (_pub) {\n\t\t\t\tif (syncKey != null) {\n\t\t\t\t\tlet [xSyncKey, ySyncKey] = syncOpts.scales;\n\n\t\t\t\t\tsyncOpts.values[0] = xSyncKey != null ? posToVal(scaleX.ori == 0 ? mouseLeft1 : mouseTop1, xSyncKey) : null;\n\t\t\t\t\tsyncOpts.values[1] = ySyncKey != null ? posToVal(scaleX.ori == 1 ? mouseLeft1 : mouseTop1, ySyncKey) : null;\n\t\t\t\t}\n\n\t\t\t\tpubSync(mousemove, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, idx);\n\t\t\t}\n\n\t\t\tif (cursorFocus) {\n\t\t\t\tlet shouldPub = _pub && syncOpts.setSeries;\n\t\t\t\tlet p = focus.prox;\n\n\t\t\t\tif (focusedSeries == null) {\n\t\t\t\t\tif (closestDist <= p)\n\t\t\t\t\t\tsetSeries(closestSeries, FOCUS_TRUE, true, shouldPub);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (closestDist > p)\n\t\t\t\t\t\tsetSeries(null, FOCUS_TRUE, true, shouldPub);\n\t\t\t\t\telse if (closestSeries != focusedSeries)\n\t\t\t\t\t\tsetSeries(closestSeries, FOCUS_TRUE, true, shouldPub);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t_fire !== false && fire(\"setCursor\");\n\t}\n\n\tlet rect = null;\n\n\tObject.defineProperty(self, 'rect', {\n\t\tget() {\n\t\t\tif (rect == null)\n\t\t\t\tsyncRect(false);\n\n\t\t\treturn rect;\n\t\t},\n\t});\n\n\tfunction syncRect(defer = false) {\n\t\tif (defer)\n\t\t\trect = null;\n\t\telse {\n\t\t\trect = over.getBoundingClientRect();\n\t\t\tfire(\"syncRect\", rect);\n\t\t}\n\t}\n\n\tfunction mouseMove(e, src, _l, _t, _w, _h, _i) {\n\t\tif (cursor._lock)\n\t\t\treturn;\n\n\t\t// Chrome on Windows has a bug which triggers a stray mousemove event after an initial mousedown event\n\t\t// when clicking into a plot as part of re-focusing the browser window.\n\t\t// we gotta ignore it to avoid triggering a phantom drag / setSelect\n\t\t// However, on touch-only devices Chrome-based browsers trigger a 0-distance mousemove before mousedown\n\t\t// so we don't ignore it when mousedown has set the dragging flag\n\t\tif (dragging && e != null && e.movementX == 0 && e.movementY == 0)\n\t\t\treturn;\n\n\t\tcacheMouse(e, src, _l, _t, _w, _h, _i, false, e != null);\n\n\t\tif (e != null)\n\t\t\tupdateCursor(null, true, true);\n\t\telse\n\t\t\tupdateCursor(src, true, false);\n\t}\n\n\tfunction cacheMouse(e, src, _l, _t, _w, _h, _i, initial, snap) {\n\t\tif (rect == null)\n\t\t\tsyncRect(false);\n\n\t\tsetCursorEvent(e);\n\n\t\tif (e != null) {\n\t\t\t_l = e.clientX - rect.left;\n\t\t\t_t = e.clientY - rect.top;\n\t\t}\n\t\telse {\n\t\t\tif (_l < 0 || _t < 0) {\n\t\t\t\tmouseLeft1 = -10;\n\t\t\t\tmouseTop1 = -10;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet [xKey, yKey] = syncOpts.scales;\n\n\t\t\tlet syncOptsSrc = src.cursor.sync;\n\t\t\tlet [xValSrc, yValSrc] = syncOptsSrc.values;\n\t\t\tlet [xKeySrc, yKeySrc] = syncOptsSrc.scales;\n\t\t\tlet [matchXKeys, matchYKeys] = syncOpts.match;\n\n\t\t\tlet rotSrc = src.axes[0].side % 2 == 1;\n\n\t\t\tlet xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss,\n\t\t\t\tyDim = scaleX.ori == 1 ? plotWidCss : plotHgtCss,\n\t\t\t\t_xDim = rotSrc ? _h : _w,\n\t\t\t\t_yDim = rotSrc ? _w : _h,\n\t\t\t\t_xPos = rotSrc ? _t : _l,\n\t\t\t\t_yPos = rotSrc ? _l : _t;\n\n\t\t\tif (xKeySrc != null)\n\t\t\t\t_l = matchXKeys(xKey, xKeySrc) ? getPos(xValSrc, scales[xKey], xDim, 0) : -10;\n\t\t\telse\n\t\t\t\t_l = xDim * (_xPos/_xDim);\n\n\t\t\tif (yKeySrc != null)\n\t\t\t\t_t = matchYKeys(yKey, yKeySrc) ? getPos(yValSrc, scales[yKey], yDim, 0) : -10;\n\t\t\telse\n\t\t\t\t_t = yDim * (_yPos/_yDim);\n\n\t\t\tif (scaleX.ori == 1) {\n\t\t\t\tlet __l = _l;\n\t\t\t\t_l = _t;\n\t\t\t\t_t = __l;\n\t\t\t}\n\t\t}\n\n\t\tif (snap) {\n\t\t\tif (_l <= 1 || _l >= plotWidCss - 1)\n\t\t\t\t_l = incrRound(_l, plotWidCss);\n\n\t\t\tif (_t <= 1 || _t >= plotHgtCss - 1)\n\t\t\t\t_t = incrRound(_t, plotHgtCss);\n\t\t}\n\n\t\tif (initial) {\n\t\t\trawMouseLeft0 = _l;\n\t\t\trawMouseTop0 = _t;\n\n\t\t\t[mouseLeft0, mouseTop0] = cursor.move(self, _l, _t);\n\t\t}\n\t\telse {\n\t\t\tmouseLeft1 = _l;\n\t\t\tmouseTop1 = _t;\n\t\t}\n\t}\n\n\tconst _hideProps = {\n\t\twidth: 0,\n\t\theight: 0,\n\t\tleft: 0,\n\t\ttop: 0,\n\t};\n\n\tfunction hideSelect() {\n\t\tsetSelect(_hideProps, false);\n\t}\n\n\tlet downSelectLeft;\n\tlet downSelectTop;\n\tlet downSelectWidth;\n\tlet downSelectHeight;\n\n\tfunction mouseDown(e, src, _l, _t, _w, _h, _i) {\n\t\tdragging = true;\n\t\tdragX = dragY = drag._x = drag._y = false;\n\n\t\tcacheMouse(e, src, _l, _t, _w, _h, _i, true, false);\n\n\t\tif (e != null) {\n\t\t\tonMouse(mouseup, doc, mouseUp, false);\n\t\t\tpubSync(mousedown, self, mouseLeft0, mouseTop0, plotWidCss, plotHgtCss, null);\n\t\t}\n\n\t\tlet { left, top, width, height } = select;\n\n\t\tdownSelectLeft   = left;\n\t\tdownSelectTop    = top;\n\t\tdownSelectWidth  = width;\n\t\tdownSelectHeight = height;\n\n\t\thideSelect();\n\t}\n\n\tfunction mouseUp(e, src, _l, _t, _w, _h, _i) {\n\t\tdragging = drag._x = drag._y = false;\n\n\t\tcacheMouse(e, src, _l, _t, _w, _h, _i, false, true);\n\n\t\tlet { left, top, width, height } = select;\n\n\t\tlet hasSelect = width > 0 || height > 0;\n\t\tlet chgSelect = (\n\t\t\tdownSelectLeft   != left   ||\n\t\t\tdownSelectTop    != top    ||\n\t\t\tdownSelectWidth  != width  ||\n\t\t\tdownSelectHeight != height\n\t\t);\n\n\t\thasSelect && chgSelect && setSelect(select);\n\n\t\tif (drag.setScale && hasSelect && chgSelect) {\n\t\t//\tif (syncKey != null) {\n\t\t//\t\tdragX = drag.x;\n\t\t//\t\tdragY = drag.y;\n\t\t//\t}\n\n\t\t\tlet xOff = left,\n\t\t\t\txDim = width,\n\t\t\t\tyOff = top,\n\t\t\t\tyDim = height;\n\n\t\t\tif (scaleX.ori == 1) {\n\t\t\t\txOff = top,\n\t\t\t\txDim = height,\n\t\t\t\tyOff = left,\n\t\t\t\tyDim = width;\n\t\t\t}\n\n\t\t\tif (dragX) {\n\t\t\t\t_setScale(xScaleKey,\n\t\t\t\t\tposToVal(xOff, xScaleKey),\n\t\t\t\t\tposToVal(xOff + xDim, xScaleKey)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (dragY) {\n\t\t\t\tfor (let k in scales) {\n\t\t\t\t\tlet sc = scales[k];\n\n\t\t\t\t\tif (k != xScaleKey && sc.from == null && sc.min != inf) {\n\t\t\t\t\t\t_setScale(k,\n\t\t\t\t\t\t\tposToVal(yOff + yDim, k),\n\t\t\t\t\t\t\tposToVal(yOff, k)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thideSelect();\n\t\t}\n\t\telse if (cursor.lock) {\n\t\t\tcursor._lock = !cursor._lock;\n\n\t\t\tif (!cursor._lock)\n\t\t\t\tupdateCursor(null, true, false);\n\t\t}\n\n\t\tif (e != null) {\n\t\t\toffMouse(mouseup, doc);\n\t\t\tpubSync(mouseup, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, null);\n\t\t}\n\t}\n\n\tfunction mouseLeave(e, src, _l, _t, _w, _h, _i) {\n\t\tif (cursor._lock)\n\t\t\treturn;\n\n\t\tsetCursorEvent(e);\n\n\t\tlet _dragging = dragging;\n\n\t\tif (dragging) {\n\t\t\t// handle case when mousemove aren't fired all the way to edges by browser\n\t\t\tlet snapH = true;\n\t\t\tlet snapV = true;\n\t\t\tlet snapProx = 10;\n\n\t\t\tlet dragH, dragV;\n\n\t\t\tif (scaleX.ori == 0) {\n\t\t\t\tdragH = dragX;\n\t\t\t\tdragV = dragY;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdragH = dragY;\n\t\t\t\tdragV = dragX;\n\t\t\t}\n\n\t\t\tif (dragH && dragV) {\n\t\t\t\t// maybe omni corner snap\n\t\t\t\tsnapH = mouseLeft1 <= snapProx || mouseLeft1 >= plotWidCss - snapProx;\n\t\t\t\tsnapV = mouseTop1  <= snapProx || mouseTop1  >= plotHgtCss - snapProx;\n\t\t\t}\n\n\t\t\tif (dragH && snapH)\n\t\t\t\tmouseLeft1 = mouseLeft1 < mouseLeft0 ? 0 : plotWidCss;\n\n\t\t\tif (dragV && snapV)\n\t\t\t\tmouseTop1 = mouseTop1 < mouseTop0 ? 0 : plotHgtCss;\n\n\t\t\tupdateCursor(null, true, true);\n\n\t\t\tdragging = false;\n\t\t}\n\n\t\tmouseLeft1 = -10;\n\t\tmouseTop1 = -10;\n\n\t\t// passing a non-null timestamp to force sync/mousemove event\n\t\tupdateCursor(null, true, true);\n\n\t\tif (_dragging)\n\t\t\tdragging = _dragging;\n\t}\n\n\tfunction dblClick(e, src, _l, _t, _w, _h, _i) {\n\t\tif (cursor._lock)\n\t\t\treturn;\n\n\t\tsetCursorEvent(e);\n\n\t\tautoScaleX();\n\n\t\thideSelect();\n\n\t\tif (e != null)\n\t\t\tpubSync(dblclick, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, null);\n\t}\n\n\tfunction syncPxRatio() {\n\t\taxes.forEach(syncFontSize);\n\t\t_setSize(self.width, self.height, true);\n\t}\n\n\ton(dppxchange, win, syncPxRatio);\n\n\t// internal pub/sub\n\tconst events = {};\n\n\tevents.mousedown = mouseDown;\n\tevents.mousemove = mouseMove;\n\tevents.mouseup = mouseUp;\n\tevents.dblclick = dblClick;\n\tevents[\"setSeries\"] = (e, src, idx, opts) => {\n\t\tlet seriesIdxMatcher = syncOpts.match[2];\n\t\tidx = seriesIdxMatcher(self, src, idx);\n\t\tidx != -1 && setSeries(idx, opts, true, false);\n\t};\n\n\tif (cursor.show) {\n\t\tonMouse(mousedown,  over, mouseDown);\n\t\tonMouse(mousemove,  over, mouseMove);\n\t\tonMouse(mouseenter, over, e => {\n\t\t\tsetCursorEvent(e);\n\t\t\tsyncRect(false);\n\t\t});\n\t\tonMouse(mouseleave, over, mouseLeave);\n\n\t\tonMouse(dblclick, over, dblClick);\n\n\t\tcursorPlots.add(self);\n\n\t\tself.syncRect = syncRect;\n\t}\n\n\t// external on/off\n\tconst hooks = self.hooks = opts.hooks || {};\n\n\tfunction fire(evName, a1, a2) {\n\t\tif (evName in hooks) {\n\t\t\thooks[evName].forEach(fn => {\n\t\t\t\tfn.call(null, self, a1, a2);\n\t\t\t});\n\t\t}\n\t}\n\n\t(opts.plugins || []).forEach(p => {\n\t\tfor (let evName in p.hooks)\n\t\t\thooks[evName] = (hooks[evName] || []).concat(p.hooks[evName]);\n\t});\n\n\tconst seriesIdxMatcher = (self, src, srcSeriesIdx) => srcSeriesIdx;\n\n\tconst syncOpts = assign({\n\t\tkey: null,\n\t\tsetSeries: false,\n\t\tfilters: {\n\t\t\tpub: retTrue,\n\t\t\tsub: retTrue,\n\t\t},\n\t\tscales: [xScaleKey, series[1] ? series[1].scale : null],\n\t\tmatch: [retEq, retEq, seriesIdxMatcher],\n\t\tvalues: [null, null],\n\t}, cursor.sync);\n\n\tif (syncOpts.match.length == 2)\n\t\tsyncOpts.match.push(seriesIdxMatcher);\n\n\tcursor.sync = syncOpts;\n\n\tconst syncKey = syncOpts.key;\n\n\tconst sync = _sync(syncKey);\n\n\tfunction pubSync(type, src, x, y, w, h, i) {\n\t\tif (syncOpts.filters.pub(type, src, x, y, w, h, i))\n\t\t\tsync.pub(type, src, x, y, w, h, i);\n\t}\n\n\tsync.sub(self);\n\n\tfunction pub(type, src, x, y, w, h, i) {\n\t\tif (syncOpts.filters.sub(type, src, x, y, w, h, i))\n\t\t\tevents[type](null, src, x, y, w, h, i);\n\t}\n\n\tself.pub = pub;\n\n\tfunction destroy() {\n\t\tsync.unsub(self);\n\t\tcursorPlots.delete(self);\n\t\tmouseListeners.clear();\n\t\toff(dppxchange, win, syncPxRatio);\n\t\troot.remove();\n\t\tlegendTable?.remove(); // in case mounted outside of root\n\t\tfire(\"destroy\");\n\t}\n\n\tself.destroy = destroy;\n\n\tfunction _init() {\n\t\tfire(\"init\", opts, data);\n\n\t\tsetData(data || opts.data, false);\n\n\t\tif (pendScales[xScaleKey])\n\t\t\tsetScale(xScaleKey, pendScales[xScaleKey]);\n\t\telse\n\t\t\tautoScaleX();\n\n\t\tshouldSetSelect = select.show && (select.width > 0 || select.height > 0);\n\t\tshouldSetCursor = shouldSetLegend = true;\n\n\t\t_setSize(opts.width, opts.height);\n\t}\n\n\tseries.forEach(initSeries);\n\n\taxes.forEach(initAxis);\n\n\tif (then) {\n\t\tif (then instanceof HTMLElement) {\n\t\t\tthen.appendChild(root);\n\t\t\t_init();\n\t\t}\n\t\telse\n\t\t\tthen(self, _init);\n\t}\n\telse\n\t\t_init();\n\n\treturn self;\n}\n\nuPlot.assign = assign;\nuPlot.fmtNum = fmtNum;\nuPlot.rangeNum = rangeNum;\nuPlot.rangeLog = rangeLog;\nuPlot.rangeAsinh = rangeAsinh;\nuPlot.orient   = orient;\nuPlot.pxRatio = pxRatio;\n\n{\n\tuPlot.join = join;\n}\n\n{\n\tuPlot.fmtDate = fmtDate;\n\tuPlot.tzDate  = tzDate;\n}\n\nuPlot.sync = _sync;\n\n{\n\tuPlot.addGap = addGap;\n\tuPlot.clipGaps = clipGaps;\n\n\tlet paths = uPlot.paths = {\n\t\tpoints,\n\t};\n\n\t(paths.linear  = linear);\n\t(paths.stepped = stepped);\n\t(paths.bars    = bars);\n\t(paths.spline  = monotoneCubic);\n}\n\nexport { uPlot as default };\n"],"names":["module","exports","arr","len","length","i","arr2","Array","__esModule","isArray","arrayLikeToArray","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","unsupportedIterableToArray","o","allowArrayLike","it","Symbol","iterator","F","s","n","done","value","e","_e","f","err","normalCompletion","didErr","call","step","next","_e2","obj","iter","from","_i","_s","_arr","_n","_d","push","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","objectWithoutPropertiesLoose","excluded","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arrayWithoutHoles","iterableToArray","nonIterableSpread","minLen","toString","slice","constructor","name","test","escapeHTML","html","elem","document","createElement","innerText","innerHTML","SERIES_NAME_DATA_ATTRIBUTE","SERIES_IDX_DATA_ATTRIBUTE","TOOLTIP_CONTAINER_CLASS_NAME","TOOLTIP_ROW_CLASS_NAME","renderEmptyCell","renderColorCell","line","seriesColor","renderNameCell","hideSeriesName","seriesName","renderPercentCell","percentValue","renderValueCell","renderDiffCell","diff","renderAdditionalSection","data","splitTooltip","colspanNumber","holiday","holidayText","region","commentDateText","xComments","map","comment","color","text","join","renderRow","isSelectedLine","cellsRenderers","isSingleLine","allowComment","withDarkBackground","rowIndex","hasComment","commentText","xyCommentText","needRenderComment","fullCellsRenderers","rowKey","String","replace","insertCellAt","index","splice","Number","customRender","seriesIdx","trim","render","replaceCellAt","formatTooltip","tooltip","activeRowAlwaysFirstInTooltip","selectedLineIndex","lines","findIndex","selectedSeries","selectedLine","lastVisibleRowIndex","shared","withPercent","useCompareFrom","rowRenderingConfig","rowRenderingConfigForSelectedLine","windowHeight","body","clientHeight","window","visualViewport","scale","tooltipContainerClassNames","tooltipHeader","createRange","createContextualFragment","textContent","fill","assign","Boolean","getRowRenderConfig","hiddenRowsNumber","i18n","hiddenRowsSum","sum","calcOption","d","values","reduce","_","t","renderTooltip","timeMultiplier","yagr","config","chart","opts","options","x","state","sumTotal","rows","scales","acc","concat","maxLines","valueFormatter","pinned","undefined","Math","abs","originalValue","tooltipFormatOptions","dateTime","input","format","row","active","transformed","toFixed","percent","getXAxisFormatter","msm","ticks","range","rawValue","hour","minute","second","useWidgetData","id","sources","libraryConfig","theme","useThemeValue","React","args","_a","_b","timeline","series","graphs","appearance","locale","settings","merge","show","className","customTooltip","virtual","sort","a","b","rowIdx","axes","xAxis","defaults","shapeYagrConfig","debug","filename","program","YagrWidget","forwardedRef","onLoad","onRender","onChartLoad","yagrRef","setYagr","isEmpty","ChartKitError","code","CHARTKIT_ERROR_CODE","message","handleChartLoading","renderTime","widget","widgetRendering","onWindowResize","reflow","_c","handlers","mouseMove","mouseDown","plugins","on","tooltipContainer","tHeadNode","querySelector","tBodyNode","children","tHeadNodeFirstRow","j","cell","removeAttribute","tBodyNodeFirstRow","nodeWithWidesRows","getBoundingClientRect","width","nodeWithWidesRowsCellsWidth","accum","cellNode","nodeToSetCellsWidthFirstRow","setAttribute","synchronizeTooltipTablesCellsWidth","actions","event","contains","tagName","parentElement","dataset","serie","uplot","setFocus","Element","isClickInsideTooltip","isClickOnUplotOver","root","pin","hide","detectClickOutside","addEventListener","removeEventListener","YagrComponent","ref","STRICT","DEFAULT_SYSTEM_DATE_FORMAT","__createBinding","this","create","m","k","k2","desc","get","__exportStar","p","hasOwnProperty","require","UtcTimeZone","CollatorSensitivity","ACCENT","BASE","CASE","VARIANT","__importDefault","mod","isDateTime","createUTCDateTime","createDateTime","dayjs_1","constants_1","utils_1","timeZone","date","default","tz","utc","opt","lang","prevLang","shouldSetLocale","compareStrings","ignoreCase","isDayjs","parseDateMath","parse","isValid","isDate_1","includes_1","dateTime_1","units","roundUp","time","mathString","parseString","substring","strippedMathString","resultTime","c","charAt","type","num","isNaN","parseInt","numFrom","unit","endOf","startOf","add","subtract","arraySupport_1","customParseFormat_1","isoWeek_1","objectSupport_1","quarterOfYear_1","relativeTime_1","timezone_1","utc_1","localizedFormat_1","updateLocale_1","advancedFormat_1","extend","datemath_1","parser_1","timeZone_1","settings_1","dateTimeParse","setDefault","allowRelative","parseInput","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","rejected","result","then","__generator","y","g","label","sent","trys","ops","verb","v","op","pop","cloneDeep_1","Settings","loadedLocales","Set","updateLocale","weekStart","loadLocale","localeInLowerCase","isLocaleLoaded","toLocaleLowerCase","Error","getLocale","getLocaleData","locales","Ls","localeObject","en","setLocale","has","getTimeZonesList","guessUserTimeZone","getTimeZone","guess","Intl","supportedValuesOf","str1","str2","collatorOptions","sensitivity","localeCompare","DataView","getNative","WeakMap","array","iteratee","predicate","resIndex","offset","copyObject","keysIn","Stack","arrayEach","assignValue","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn","getTag","initCloneArray","initCloneByTag","initCloneObject","isBuffer","isMap","isObject","isSet","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","argsTag","funcTag","genTag","objectTag","cloneableTags","baseClone","bitmask","customizer","stack","isDeep","isFlat","isFull","isArr","tag","isFunc","stacked","set","subValue","fromIndex","fromRight","arrayPush","keysFunc","symbolsFunc","baseFindIndex","baseIsNaN","strictIndexOf","baseGetTag","isObjectLike","dateTag","mapTag","setTag","isPrototype","nativeKeys","trimmedEndIndex","reTrimStart","string","arrayMap","cloneArrayBuffer","dataView","buffer","byteOffset","byteLength","reFlags","regexp","exec","lastIndex","symbolProto","symbolValueOf","valueOf","symbol","getSymbols","getSymbolsIn","baseGetAllKeys","arrayFilter","stubArray","nativeGetSymbols","getPrototype","Map","toSource","promiseTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","Ctor","ctorString","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","boolTag","numberTag","regexpTag","stringTag","symbolTag","arrayBufferTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","overArg","reWhitespace","baseIndexOf","isArrayLike","isString","toInteger","nativeMax","max","collection","guard","baseIsDate","baseUnary","nodeUtil","nodeIsDate","isDate","baseKeys","isArguments","isTypedArray","size","baseIsMap","nodeIsMap","baseIsSet","nodeIsSet","arrayLikeKeys","toNumber","INFINITY","MAX_INTEGER","toFinite","remainder","baseTrim","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","other","isBinary","baseValues","TOOLTIP_DEFAULT_MAX_LINES","TOOLTIP_X_OFFSET","TOOLTIP_Y_OFFSET","MIN_SELECTION_WIDTH","CURSOR_STYLE","MARKER_DIAMETER","SERIE_AREA_BORDER_WIDTH","SERIE_AREA_BORDER_COLOR","SERIE_LINE_WIDTH","SERIE_COLOR","PADDING_BOTH","PADDING_RIGHT","PADDING_LEFT","BARS_DRAW_MAX","BARS_DRAW_FACTOR","TYPES_ORDER","X_AXIS_INCRS","X_AXIS_SPACE","X_AXIS_SIZE","X_AXIS_TICK_GAP","DECADE","YEAR","DAY","HOUR","MINUTE","SECOND","Y_AXIS_LABEL_SIZE","Y_AXIS_SIZE","DEFAULT_Y_AXIS_LABEL_PADDING","DEFAULT_Y_AXIS_PADDING","DEFAULT_Y_AXIS_SIZE","Y_AXIS_TICK_GAP","AXIS_VALUES_FONT","AXIS_LABEL_FONT","DEFAULT_AXIS_FONT_SIZE","DARK_DEFAULT_LINE_COLOR","LIGHT_DEFAULT_LINE_COLOR","DEFAULT_TITLE_FONT_SIZE","DEFAULT_SYNC_KEY","DEFAULT_POINT_SIZE","DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE","DEFAULT_SCALE_MIN_RANGE","DEFAULT_Y_AXIS_OFFSET","DEFAULT_MAX_TICKS","DEFAULT_CANVAS_PIXEL_RATIO","DEFAULT_FOCUS_ALPHA","DEFAULT_Y_SCALE","DEFAULT_X_SCALE","DEFAULT_X_SERIE_NAME","devicePixelRatio","self","axisIdx","longesValue","l","ctx","save","axis","font","textSize","measureText","restore","labelSize","labelFont","fontBoundingBoxAscent","ThemedDefaults","colors","setTheme","stroke","GRID","startsWith","__setModuleDefault","__importStar","uplot_1","legend_1","common_1","colors_1","defaults_1","locale_1","create_options_1","transform_series_1","dynamic_updates_1","mixins_1","batch_updates_1","Yagr","pConfig","_meta","_uHooks","init","adaptive","resizeOb","ResizeObserver","debounce","onResize","resizeDebounceMs","observe","hooks","dispose","unsubscribe","trackMouse","execHooks","hookName","hook","initRender","u","position","legend","firstChild","appendChild","insertBefore","initTitle","resize","_cache","height","contentRect","reset","entries","initMixins","_startTime","performance","now","isEmptyDataSet","isMouseOver","stage","y2uIdx","subscribed","title","cursor","grid","markers","inStage","genId","classList","colorParser","sync","select","utils","setContext","style","px","createUplotOptions","editUplotOptions","transformSeries","canvas","processTime","redraw","unobserve","destroy","toDataURL","sub","unsub","fn","error","console","onError","fontSize","mouseOver","mouseLeave","totalSpace","clientWidth","setSize","applyMixins","CreateUplotOptionsMixin","TransformSeriesMixin","DynamicUpdatesMixin","BatchMixin","LOCALIZATIONS","ru","weekend","nodata","custom","_batch","fns","reinit","fullUpdate","redrawLegend","reopt","recalc","batch","left","top","setCursor","tooltip_1","cursor_1","series_1","markers_1","scales_1","axes_1","chart_1","types_1","plotLines_1","setIfNotSet","onDraw","meta","ready","initTime","drawClear","fillStyle","BACKGROUND","fillRect","setSelect","posToVal","_from","_to","ceil","to","_f","_g","_h","_j","_k","_l","reOpt","tooltipInstance","updateOptions","plotLines","plotLinesPluginInstance","pluginInstance","plugin","focus","alpha","$c","count","ms","every","points","drag","dist","minWidth","setScale","zoom","cPlugin","seriesOptions","resultingSeriesOptions","configureSeries","uIdx","markersPluginInstance","configureScales","configureAxes","draw","drawOrder","DrawOrderKey","Series","Axes","padding","getPaddingByAxes","preInit","setConfigImpl","newConfig","_m","isChangedKey","oldConfig","path","oldValue","newValue","isChanged","setTitle","deepIsEqual","setAxes","setScales","mapA","mapB","some","areSeriesChanged","setSeries","incremental","setSeriesImpl","timelineOrSeriesOrId","maybeSeries","useFullyRedraw","updateId","useIncremental","shouldRecalcData","includes","shouldUpdateCursror","matched","find","rest","newSeries","uOpts","_focus","stacking","overrideSeriesInUpdate","addSeries","updatePoints","sliceLength","idx","uSeries","getSeriesById","setData","setLocaleImpl","themeValue","classesToRemove","remove","setThemeImpl","updateAxis","scaleName","scaleConfig","getRedrawOptionsForAxesUpdate","setAxesImpl","lineId","setFocusImpl","updateLegend","shouldRebuildStacks","update","setVisibleImpl","stackingIsChanged","normalizationIsChanged","normalize","normalizeBase","isChangingOnlyMinMax","cfg","pMin","min","pMax","pRest","nMin","nMax","nRest","isChangingXAxis","setScalesImpl","processingStartTime","processing","interpolation","preprocess","shouldMapNullValues","nullValues","stacks","sIdx","dataLine","realSerieIdx","serieConfigIndex","serieOptions","isStacking","sGroup","stackGroup","empty","transform","_transformed","getSumByIdx","normalizedData","avg","postProcess","unshift","cursorPoint","MAX_CURSORS","paintCursorPoint","pt","span","background","colorRgba","parseRgba","boxShadow","seriesIndex","class","display","getPointsByIdx","over","querySelectorAll","pInterpolation","iValue","snapToNulls","snapToValues","snapToInterpolated","mem","snapOnValues","hoveredIdx","seriesData","findDataIdx","showPoints","visibility","hidePoints","pinState","pointsHolder","newElem","cloneNode","serieIdx","item","uplotOptions","emptyLines","totalLines","cursorOptions","markersSize","dataIdx","hideMarkers","isNil","seriesValue","cX","visible","borderRight","cY","borderBottom","hasOneVisibleLine","events_1","ALL_SERIES_IDX","DEFAULT_FONT_SIZE","DEFAULT_LEGEND_PLACE_RATIO","getPrependingTitle","LegendPlugin","pagesCount","page","pages","pageSize","rowsPerPage","paginated","requiredSpace","itemsHtml","maxLegendSpace","behaviour","calc","serieNode","serieId","getAttribute","serieVisible","measureLegend","rootEl","pseudo","childNodes","nextPage","items","renderPagination","prevPage","_onDestroy","legendEl","unsubsribe","onSerieClick","basic","seriesToToggle","nextToggleState","nextState","node","setVisible","allSeriesItem","extended","changeVisibility","preventDefault","ctrlKey","metaKey","toggleSerie","shiftKey","startSerieRange","selectRange","otherSeries","otherVisibility","selectSerie","onSerieMouseLeave","onClick","onFocus","targetSerie","onSerieMouseEnter","preventMouseEvents","reRender","before","after","container","pagination","justifyContent","applyHandlers","upClassName","downClassName","serieNameElement","titleId","getPrependingTitleId","content","serieContent","sId","additionalCn","icon","createIconLineElement","createSerieNameElement","outerHTML","chartHeight","VERTICAL_PADDING","renderItems","requiredHeight","rowHeight","maxPossiblePlace","floor","itemsRowsPerPage","itemsPageSize","paginatedPageSize","additionalSpace","drawMarkersIfRequired","renderCircle","r","strokeColor","yScale","cx","round","valToPos","cy","beginPath","arc","PI","lineWidth","strokeStyle","closePath","i0","i1","spanGaps","pointsSize","prev","val","nextIdx","strokeWidth","chartSeriesOptions","defaultDotsSize","drawCircles","getFocusedColor","pointSize","markSeries","MAX_X_SCALE_LINE_OFFSET","DRAW_MAP","hasPlotLine","list","pl","HOOKS_MAP","drawIndicies","renderPlotLines","bbox","plotLineConfig","Infinity","scaleCfg","pos","fromValue","toValue","accent","space","pConf","last","moveTo","lineTo","dash","setLineDash","clear","plotLinesToRemove","additionalPlotLines","newPlotLines","additions","removes","axisConfig","plotLine","NAMES","clientSize","offsetSize","maxSize","marginBefore","marginAfter","scrollOffset","offsetOpt","normalizeRect","rect","bottom","right","initialAnchor","anchor","side","Range","anchorRect","boundRect","innerHeight","innerWidth","bound","elemStyle","getComputedStyle","primary","secondary","maxWidth","maxHeight","secondaryMarginBefore","secondaryMargin","secondaryMaxSize","styledSecondaryMaxSize","margin","roomBefore","roomAfter","primaryMaxSize","styledPrimaryMaxSize","boundPrimaryPos","secondaryScrollOffset","allTitle","sectionTitle","sections","sectionTitleBody","getOptionValue","scaleBody","rowsMax","showIndicies","placement_1","render_1","findValue","snapTo","cursorSnapToValues","DEFAULT_TOOLTIP_OPTIONS","highlight","pinable","strategy","hideNoData","xOffset","yOffset","showEmpty","onUpdate","YagrTooltip","mount","unpin","placement","renderTooltipCloses","skipNextMouseUp","emit","action","handler","tOverlay","shouldEmit","bLeft","bTop","checkFocus","focusedSeries","isNotInDrag","inBetween","rowsBySections","serieIndicies","section","cursorValue","valueRender","dValue","realY","yValue","stripValue","showInTooltip","seriesPrecision","precision","displayValue","formatter","rowData","dataValue","displayY","omitBy","tracking","activeIndex","findInRange","stickToRanges","findSticky","onMouseEnter","bWidth","renderData","hasDataNow","defaultRender","initWithUplot","onMouseDown","onMouseMove","onMouseLeave","onMouseUp","mounted","newOptions","off","h","evt","getCursorPosition","clientX","clientY","posToIdx","setCursorLeaved","startPoint","end","click","isPinned","defaultTooltipValueFormatter","pSettings","boundClassName","renderNode","renderClassName","getUplotPlugin","uPlotPlugin","reInit","uPlugin","option","getTimeFormatter","getDefaultNumberFormatter","getAxisPositioning","YAGR_AXIS_TO_UPLOT_AXIS","Axis","Side","Right","Top","Bottom","Left","AXIS_SIDE_TO_ALIGN","Align","align","nullValue","precisionNum","getUnitSuffix","pow","suffix","transformedValue","match","getNumericValueFormatter","numFormatter","dayTimeFormatter","fmtDate","dateTimeFormatter","minuteFormatter","secondFormatter","yearFormatter","getTimeFormatterByRange","ticksCount","minRange","Date","getAxis","splitsCount","splits","__","scaleMin","scaleMax","AXIS_STROKE","Y_AXIS_TICKS","getFormatter","gap","asFn","X_AXIS_TICKS","incrs","uAxis","upd","border","hasLeftAxis","hasRightAxis","getSerieFocusColors","DEFAULT_SHADE_COLOR","ColorParser","prop","isVar","res","pure","context","pColor","getPropertyValue","fallbackRgba","direction","tOffset","transition","rgbaColor","shift","SHIFT","mainColor","shade","field","asPlain","positive","maxIdx","minIdx","diffs","currentMin","nextMin","seriesValues","nearestIndex","nearestValue","fixed","isInteger","repeat","split","int","frac","defaultSnapTo","skipValue","corL","corR","interpolateImpl","y1","y2","x1","x2","xIdx","iGroup","random","substr","resultLine","iIdx","func","timer","timeout","clearTimeout","setTimeout","attrs","el","attr","aObject","bObject","aKeys","bKeys","start","derivedCtor","constructors","inits","baseCtor","getOwnPropertyNames","initMixin","pathsRenderer","idx0","idx1","drawer","paths","bars","renderOptions","spline","stepped","linear","niceScale","offsetScale","getScaleRange","dataMin","dataMax","startFromZero","endWithZero","dMax","dMin","niceNum","incr","delta","exp","log10","rangeFn","isScaleMinDefined","scalesToMap","forceMin","forceMax","isLogScale","distr","Scale","Distr","Logarithmic","paths_1","getCommonProperty","defaultValue","rawSeries","DEFAULT_LINE_COLOR","colorFn","lineColor","dest","Linear","Ordinal","ArcSinh","DEF","index_1","useTooltipState","YagrCore_1","forwardRef","onSelect","chartRef","useRef","useImperativeHandle","current","domElement","initChart","useCallback","load","selection","useEffect","setConfig","dataUrl","toDataUrl","href","download","tooltipRef","onChange","$locale","bind","$utils","$M","ordinal","$D","weekYear","isoWeekYear","week","isoWeek","$H","$d","getTime","offsetName","pxRatio","query","UPLOT","ORI_HZ","pre","ORI_VT","TITLE","WRAP","UNDER","OVER","AXIS","OFF","SELECT","CURSOR_X","CURSOR_Y","CURSOR_PT","LEGEND","LEGEND_LIVE","LEGEND_INLINE","LEGEND_SERIES","LEGEND_MARKER","LEGEND_LABEL","LEGEND_VALUE","WIDTH","HEIGHT","TOP","BOTTOM","LEFT","RIGHT","hexBlack","transparent","mousemove","mousedown","mouseup","mouseenter","mouseleave","dblclick","change","dppxchange","LEGEND_DISP","domEnv","doc","win","nav","navigator","addClass","cl","remClass","setStylePx","placeTag","cls","targ","refEl","placeDiv","xformCache","elTrans","xPos","yPos","xMax","yMax","xform","colorCache","elColor","borderColor","newColor","sizeCache","elSize","newWid","newHgt","centered","newSize","marginLeft","marginTop","evOpts","passive","evOpts2","capture","ev","cb","capt","closestIdx","lo","hi","mid","bitwise","nonNullIdx","_i0","_i1","dir","rangeLog","base","fullMags","minSign","sign","maxSign","logFn","log2","growMaxAbs","minExp","maxExp","minIncr","maxIncr","roundDec","incrRoundDn","incrRoundUp","rangeAsinh","minMax","setPxRatio","_pxRatio","matchMedia","dispatchEvent","CustomEvent","rangePad","autoRangePart","mode","pad","_eqRangePart","soft","_eqRange","rangeNum","_min","_max","mult","extra","isObj","_rangeNum","ifNull","lh","rh","cmin","cmax","padMin","padMax","hardMin","hard","inf","hardMax","softMin","softMax","softMinMode","softMaxMode","deltaMag","scalarMax","scalarMag","scalarMagDelta","nonZeroDelta","mag","_newMin","_softMin","minLim","_newMax","_softMax","maxLim","NumberFormat","language","fmtNum","M","sinh","linthresh","asinh","numIntDigits","clamp","fnOrSelf","retArg0","_0","retArg1","_1","retNull","retTrue","retEq","fixFloat","incrRound","dec","isInt","EPSILON","fixedDec","guessDec","genIncrs","mults","multDec","expa","_incr","EMPTY_OBJ","EMPTY_ARR","nullNullTuple","isUndef","isStr","is","fastIsObj","TypedArray","getPrototypeOf","Uint8Array","copy","out","_isObj","src","NULL_REMOVE","NULL_RETAIN","NULL_EXPAND","nullExpand","yVals","nullIdxs","alignedLen","xi","lastNullIdx","nullIdx","microTask","queueMicrotask","months","days","slice3","str","days3","months3","engNames","MMMM","MMM","WWWW","WWW","zeroPad2","subs","YYYY","getFullYear","YY","names","getMonth","MM","DD","getDate","D","getDay","HH","getHours","H","AA","aa","mm","getMinutes","ss","getSeconds","fff","getMilliseconds","tpl","parts","R","localTz","DateTimeFormat","resolvedOptions","onlyWhole","allMults","decIncrs","oneIncrs","wholeIncrs","numIncrs","yyyy","NLyyyy","md","NLmd","NLmdyy","hmmaa","NLhmmaa","genTimeStuffs","mo","tzDate","foundIncr","foundSpace","isYr","isMo","minDate","minDateTs","minMin","mkDate","minMinTs","moIncr","yrIncr","splitDate","baseYear","baseMonth","offs","incr0","date0","prevHour","incrHours","pctSpace","_space","expectedHour","dstShift","timeIncrsMs","_timeAxisStampsMs","timeAxisSplitsMs","timeIncrsS","_timeAxisStampsS","timeAxisSplitsS","timeAxisStamps","stampCfg","timeAxisVals","stamps","prevYear","prevMnth","prevDate","prevMins","prevSecs","newYear","newMnth","newDate","newHour","newMins","newSecs","stamp","timeSeriesStamp","_timeSeriesStamp","timeSeriesVal","legendOpts","live","isolate","idxs","moveTuple","filtBtn0","handle","onlyTarg","button","filtTarg","cursorOpts","lock","move","mouseLeft1","mouseTop1","si","mar","sp","_stroke","_fill","uni","stopPropagation","stopImmediatePropagation","_x","_y","prox","bias","cursorIdx","axisLines","xAxisOpts","labelGap","lineGap","rotate","numSeriesLabel","timeSeriesLabel","xSeriesOpts","auto","sorted","numAxisVals","numAxisSplits","numDec","logAxisSplits","logBase","log","asinhAxisSplits","posSplits","zero","reverse","RE_ALL","RE_12357","RE_125","RE_1","_filt","re","keepMod","toExponential","log10AxisValsFilt","scaleKey","sc","minSpace","_10","magSpace","log2AxisValsFilt","numSeriesVal","yAxisOpts","facet","gaps","nullGaps","xySeriesOpts","facets","ySeriesOpts","xData","_data","p0","p1","maxPts","clip","clampScale","xScaleOpts","ori","yScaleOpts","syncs","_sync","plots","plot","pub","w","BAND_CLIP_FILL","BAND_CLIP_STROKE","orient","dx","dy","sx","sy","valToPosH","V","valToPosV","moveToH","lineToH","rectH","arcH","bezierCurveToH","moveToV","lineToV","rectV","arcV","bezierCurveToV","bandFillClipDirs","fillDir","clipDirs","bands","seriesFillTo","bandFillDir","clipBandLine","strokePath","clipDir","dataX","dataY","scaleX","scaleY","valToPosX","valToPosY","xOff","yOff","xDim","yDim","frIdx","toIdx","pxRound","x0","y0","yLimit","Path2D","clipGaps","plotLft","plotTop","plotWid","plotHgt","prevGapEnd","maxStrokeWidth","findGaps","xs","ys","pixelForX","fr","frPx","toPx","fri2","toi2","pxRoundGen","pxAlign","arcTo","endRad","baseRad","startAngle","endAngle","bp1x","bp1y","bp2x","bp2y","p2x","p2y","bezierCurveTo","filtIdxs","rad","dia","lft","wid","hgt","drawPoint","pi","flags","_drawAcc","accX","minY","maxY","inY","outY","drawAccH","drawAccV","alignGaps","drawAcc","pixelForY","drawnAtX","_paths","band","lftIdx","rgtIdx","lftX","rgtX","hasGap","yVal","bandClipDir","fillToY","fillTo","_monotoneCubic","ds","dys","dxs","isFinite","cursorPlots","invalidateRects","syncRect","uPlot","linearPath","pointsPath","setDefaults","xo","yo","initY","snapNumX","snapTimeX","snapNumY","snapLogY","snapLogX","snapAsinhY","snapAsinhX","findIncr","minVal","maxVal","dim","intDigits","incrIdx","pxRatioFont","fontSizeCss","syncFontSize","getValPct","getHPos","pct","getVPos","getPos","status","can","getContext","wrap","mouseLeft0","mouseTop0","under","xyo","xScaleKey","drawOrderMap","_show","shiftDir","shiftAmt","baseLpos","_lpos","setFontStyle","translate","fillText","_found","plotDim","plotOff","axisGap","_splits","data0","tickSize","angle","_rotate","basePos","_pos","finalPos","lineHeight","canOffs","_values","_parts","drawOrthoLines","cap","fire","dataLen","cacheStrokeFill","_idxs","ydata","getOuterIdxs","ctxAlpha","globalAlpha","drawPath","_gaps","initScale","scaleOpts","isTime","rn","rangeIsArr","xScaleDistr","pendScales","legendTable","legendHead","legendBody","_tzDate","ts","_fmtDate","_timeAxisSplits","_timeAxisVals","_timeSeriesVal","activeIdxs","showLegend","legendCols","legendRows","legendCells","multiValLegend","NULL_LEGEND_VALUES","getMultiVals","head","son","soff","mouseListeners","onMouse","targListeners","listener","offMouse","delete","fullWidCss","fullHgtCss","plotWidCss","plotHgtCss","plotLftCss","plotTopCss","shouldSetScales","shouldSetSize","shouldConvergeSize","shouldSetCursor","shouldSetSelect","shouldSetLegend","_setSize","force","calcSize","resetYSeries","commit","hasTopAxis","hasBtmAxis","hasRgtAxis","hasLftAxis","isVt","fullSize","_size","sidesWithAxes","_padding","calcPlotRect","off1","off2","off3","off0","incrOffset","calcAxesRects","bb","CYCLE_LIMIT","setCursorEvent","_lock","cursorFocus","cursorPts","initSeries","sv","_ptDia","rowCells","cells","indic","syncOpts","FOCUS_TRUE","initLegendRow","initCursorPt","delSeries","tr","autoPadSide","cycleNum","ctxStroke","ctxFill","ctxWidth","ctxDash","ctxJoin","ctxCap","ctxFont","ctxAlign","ctxBaseline","viaAutoScaleX","_resetScales","xsc","autoScaleX","_setScale","setCtxStyle","lineJoin","lineCap","baseline","textAlign","textBaseline","accScale","wsc","psc","getMinMaxLog","getMinMax","_points","gapsClip","_width","boundsClip","_pxAlign","strokeFill","lineDash","fillPath","didStrokeFill","bi","gapsClip2","lowerEdge","lowerData","bandClip","_fillStyle","hasData","fillStroke","CLIP_FILL_STROKE","doFill","doStroke","filts","pos0","pos1","axesCalc","converged","fullDim","incrSpace","_incrs","getIncrSpace","oldSize","paddingCalc","_p","xCursor","yCursor","vCursor","hCursor","rawMouseLeft0","rawMouseTop0","rawMouseLeft1","rawMouseTop1","queuedCommit","_commit","wipScales","xFacet","yFacet","yScaleKey","yData","changed","anyChanged","axesConverged","paddingConverged","convergeSize","_el","clearRect","updateCursor","setLegend","rebuildPaths","recalcAxes","dragging","dragX","dragY","closestDist","closestSeries","selectDiv","_fire","_hideProps","_pub","allFocused","_setAlpha","i2","isFocused","opacity","setAlpha","onOff","toggleDOM","pubSync","addBand","setBand","delBand","setSelH","setSelV","valToIdx","setSelX","setSelY","didx","sidx","setLegendValues","vals","nodeValue","syncLegend","noDataInRange","valAtPosX","yVal1","idx2","yVal2","xPos2","mouseYVal","mouseYValSign","hPos","vPos","ptWid","ptHgt","ptLft","ptTop","getBBox","xKey","yKey","matchXKeys","matchYKeys","xKeySrc","yKeySrc","sdrag","sOff","sDim","sori","sPosToVal","matchingX","matchingY","hideSelect","rawDX","rawDY","_rawDX","syncKey","xSyncKey","ySyncKey","shouldPub","_t","_w","movementX","movementY","cacheMouse","initial","snap","syncOptsSrc","xValSrc","yValSrc","rotSrc","_xDim","_yDim","_xPos","_yPos","__l","downSelectLeft","downSelectTop","downSelectWidth","downSelectHeight","mouseUp","hasSelect","chgSelect","dblClick","syncPxRatio","events","seriesIdxMatcher","_dragging","dragH","dragV","snapH","snapV","evName","a1","a2","srcSeriesIdx","filters","_init","av","dateTpl","timeAxisVal","HTMLElement","tables","nullModes","vals0","len0","vals1","allHeadersSame","table","samples","firstIdx","lastIdx","stride","prevVal","isAsc","rlen","table2","row2","sortCols","xVals","ti","xIdxs","nullMode","alignedIdx","date2","getTimezoneOffset","toLocaleString","setMilliseconds","addGap","fromX","toX","prevGap","ascDesc","prevYPos","firstXPos","prevXPos","firstXPosExt","prevXPosExt","halfStroke","startsOffset","endsOffset","extraGap","ro","radius","radiusFn","gapFactor","disp","_each","each","dispFills","dispStrokes","valRadius","baseRadius","xShift","barWid","_dirX","_dirY","y0Pos","multiPath","fillColors","fillPaths","strokeColors","strokePaths","bandClipNulls","sizes","colWid","prevIdx","minDelta","gapWid","dataY0","radVal","radBase","btm","barHgt","rv","rb","interp","xCoords","yCoords","splineInterp"],"sourceRoot":""}