(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[5246],{94790:(e,t,s)=>{"use strict";s.d(t,{f:()=>l});var a=s(68963),r=s(44920),n=s(75859);const l=e=>{let{children:t,content:s,className:l,hasArrow:i=!0,placement:o=["top","bottom"],...c}=e;const[d,p]=a.useState(!1),u=a.useRef(null);return(0,n.jsxs)(a.Fragment,{children:[(0,n.jsx)(r.G,{anchorRef:u,open:d,placement:o,hasArrow:i,...c,children:s}),(0,n.jsx)("span",{className:l,ref:u,onMouseEnter:()=>{p(!0)},onMouseLeave:()=>{p(!1)},children:t})]})}},79023:(e,t,s)=>{"use strict";s.d(t,{u:()=>b});var a,r,n,l,i,o,c,d,p,u,h,m=s(88776),v=s(24362),g=s(68963);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},f.apply(this,arguments)}const j=function(e){return g.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 383 396",fill:"none"},e),a||(a=g.createElement("path",{d:"M307.333 168.43c9.4-14.2 14.1-32.6 14.1-55.3 0-34.4-11.7-61.9-35.3-82.2-23.4-20.5-63-30.7-106.7-30.7-13.1 0-24.1.9-34.8 2.7-10.7 1.8-20.1 3.9-28.2 6.3-5.4 1.6-16.1 5.7-23.3 8.6-4.1 1.7-6.9 6-6.9 10.8v39.5c0 8.2 7.8 13.8 14.9 10.5a458.74 458.74 0 001.806-.818c2.367-1.074 4.452-2.02 5.894-2.581 5.7-2.3 12.4-4.2 20.1-5.8 7.7-1.6 16.3-2.4 25.7-2.4 22.2 0 43.1 5 52.3 14.9 9.2 10 13.8 22.499 13.8 37.499 0 13-2.7 24.1-8.2 33.2-5.5 9.1-13.1 18-22.9 26.5-7.9 6.9-15.2 13.5-22 19.8-6.8 6.3-12.6 13.2-17.5 20.7s-8.7 16-11.3 25.3c-1.6 5.6-2.7 20.3-3.3 31-.3 6.6 4.5 12.2 10.7 12.2h51.2c5.4 0 10-4.4 10.6-10.2.6-5.7 2-12.5 5.5-17.8 4-5.9 8.7-11.8 14.7-17.3s13-11 20.9-16.7c8-5.6 16.2-12.1 24.9-19.4 12.8-11.4 23.9-24.1 33.3-38.3zm-167.6 212.7c9 9.5 20.1 14.2 33.4 14.2 6.3 0 12.4-1.3 18.2-4 5.8-2.6 10.9-6 15.2-10.3 4.3-4.3 7.7-9.4 10.2-15.2 2.5-5.8 3.7-12.1 3.7-19 0-6.8-1.2-13.2-3.7-19-2.5-5.8-5.9-10.9-10.2-15.4-4.3-4.5-9.4-7.9-15.2-10.3-5.8-2.4-11.9-3.6-18.2-3.6-13.3 0-24.4 4.6-33.4 13.9s-13.5 20.8-13.5 34.5c0 13.4 4.5 24.8 13.5 34.2z",fill:"#ECF2F9"})),r||(r=g.createElement("path",{d:"M213.933 353.03h-193.5c-10 0-18.2-8.2-18.2-18.2v-125.4c0-10 8.2-18.2 18.2-18.2h193.5c10 0 18.2 8.2 18.2 18.2v125.4c0 10.1-8.2 18.2-18.2 18.2z",stroke:"#00E6C5",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4 10"})),n||(n=g.createElement("path",{d:"M21.034 214.732a5.2 5.2 0 100-10.4 5.2 5.2 0 000 10.4zm16.899 0a5.2 5.2 0 100-10.4 5.2 5.2 0 000 10.4zm16.9 0a5.2 5.2 0 100-10.4 5.2 5.2 0 000 10.4z",fill:"#2EE5C0"})),l||(l=g.createElement("path",{d:"M2.533 228.129h228.9",stroke:"#00E6C5",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4 10"})),i||(i=g.createElement("path",{d:"M301.033 264.83l-216.9 12c-7.3.4-13.3-5.2-13.3-12.5V96.93c0-7.3 6-12.9 13.3-12.5l216.9 12c5.6.3 10.1 5.7 10.1 12v144.4c0 6.3-4.5 11.7-10.1 12z",fill:"#027BF3"})),o||(o=g.createElement("path",{d:"M90.433 107.93c3.4.2 6.1-2.4 6.1-5.8s-2.7-6.3-6.1-6.4c-3.3-.2-6.1 2.4-6.1 5.8s2.7 6.3 6.1 6.4zm19.8.798c3.3.1 6-2.5 6-5.8s-2.7-6.1-6-6.3c-3.3-.1-6 2.5-6 5.8s2.7 6.2 6 6.3zm25.2-4.9c0 3.3-2.6 5.9-5.8 5.7-3.2-.1-5.9-2.9-5.9-6.2 0-3.3 2.6-5.9 5.9-5.7 3.2.1 5.8 2.9 5.8 6.2zm66.001 61.703l19.1-20.9 17.4 19.1-18.9 20.9 18.9 20.5-17.4 19.5-19.1-20.5-19.4 21.5-18.1-19.1 19.6-21.5-19.6-21 18.1-19.5 19.4 21z",fill:"#fff"})),c||(c=g.createElement("path",{d:"M327.433 112.83c0-28.4-21.7-37.1-33.5-37.9-.1 0-33.5 2.3-33.5 45.3 0 25.5 21.2 45.5 46 44.6 7.8-.3 14.9-2.6 21-6.4v-45.6z",fill:"#67B0F8"})),d||(d=g.createElement("path",{d:"M380.534 195.931c-2.9 3.4-7.6 3.7-10.5.8l-38.6-39 11.3-12.2 37.8 39c2.9 3 2.9 8 0 11.4z",fill:"#FF4645"})),p||(p=g.createElement("path",{d:"M342.833 145.629l-11.3 12.2 3.7 3.7c1.9 1.9 4.9 2 6.8.2 1.1-1 2.2-2.1 3.2-3.2.6-.7 1.3-1.4 1.9-2.1 1.6-1.9 1.5-4.8-.3-6.6l-4-4.2z",fill:"#D93654"})),u||(u=g.createElement("path",{d:"M267.633 154.13c-23-21.401-23-57.3 0-78.1 21.9-19.8 55.1-17 74.4 4.3 18.4 20.399 18.4 51.7 0 71.6-19.3 20.8-52.5 22.6-74.4 2.2zm9.4-10.802c15.6 15 39.8 14.2 54.1-.9 13.8-14.6 13.8-37.8 0-52.8-14.3-15.5-38.5-17-54.1-2.5-16.2 15.1-16.2 40.7 0 56.2z",fill:"#00236B"})),h||(h=g.createElement("path",{d:"M41.034 42.73a2 2 0 10-4 0h4zm-4 8.3a2 2 0 004 0h-4zm4 17.2a2 2 0 10-4 0h4zm-4 8.9a2 2 0 004 0h-4zm19.2-15.2a2 2 0 000-4v4zm-8.2-4a2 2 0 100 4v-4zm-17.9 4a2 2 0 000-4v4zm-8.2-4a2 2 0 100 4v-4zm15.1-15.2v8.3h4v-8.3h-4zm0 25.5v8.9h4v-8.9h-4zm19.2-10.3h-8.2v4h8.2v-4zm-26.1 0h-8.2v4h8.2v-4z",fill:"#2EE5C0"})))};var x=s(75859);const y=(0,v.cn)("empty-state"),z={s:150,m:250,l:350},b=e=>{let{image:t,title:s,description:a,actions:r,size:n="m",position:l="center"}=e;return(0,x.jsx)("div",{className:y({size:n}),children:(0,x.jsxs)("div",{className:y("wrapper",{size:n,position:l}),children:[(0,x.jsx)("div",{className:y("image"),children:t||(0,x.jsx)(m.J,{data:j,width:z[n],height:z[n]})}),(0,x.jsx)("div",{className:y("title",{size:n}),children:s}),(0,x.jsx)("div",{className:y("description"),children:a}),(0,x.jsx)("div",{className:y("actions"),children:r})]})})}},82073:(e,t,s)=>{"use strict";s.d(t,{J:()=>i});var a=s(79023),r=s(56350),n=s(68746),l=s(75859);const i=e=>{let{title:t,description:s,...i}=e;return(0,l.jsx)(a.u,{image:(0,l.jsx)(r.Q,{name:"403"}),title:t||(0,n.Z)("403.title"),description:s||(0,n.Z)("403.description"),...i})}},86969:(e,t,s)=>{"use strict";s.d(t,{J:()=>a.J});var a=s(82073)},8747:(e,t,s)=>{"use strict";s.d(t,{V:()=>n});var a=s(68746),r=s(75859);const n=e=>{let{error:t,className:s,defaultMessage:n=(0,a.Z)("responseError.defaultMessage")}=e,l="";return t&&"string"===typeof t&&(l=t),t&&"object"===typeof t&&("data"in t&&"string"===typeof t.data?l=t.data:"statusText"in t&&"string"===typeof t.statusText?l=t.statusText:"message"in t&&"string"===typeof t.message&&(l=t.message)),(0,r.jsx)("div",{className:"error ".concat(s),children:l||n})}},26688:(e,t,s)=>{"use strict";s.d(t,{V:()=>a.V});var a=s(8747)},68746:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(30817);const r=JSON.parse('{"403.title":"Access denied","403.description":"You don\u2019t have the necessary roles to view this page.","responseError.defaultMessage":"Response error"}'),n=JSON.parse('{"403.title":"\u0414\u043e\u0441\u0442\u0443\u043f \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d","403.description":"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b.","responseError.defaultMessage":"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430"}'),l=(0,a.wZ)("ydb-errors-access-denied",{ru:n,en:r})},63104:(e,t,s)=>{"use strict";s.d(t,{Y:()=>u});var a=s(54665),r=s(24362),n=s(52317),l=s(94790),i=s(74170),o=s(42784),c=s(27506),d=s(75859);const p=(0,r.cn)("tablet"),u=e=>{var t;let{tablet:s={},tenantName:r}=e;const{TabletId:u,NodeId:h,Type:m}=s,v=null===(t=s.Overall)||void 0===t?void 0:t.toLowerCase(),g=u&&(0,a.ax)(a.ZP.tablet,{id:u},{nodeId:h,tenantName:r,type:m});return(0,d.jsx)(l.f,{className:p("wrapper"),content:(0,d.jsx)(c.Fb,{data:s,className:p("popup-content")}),children:(0,d.jsx)(i.h,{to:g,children:(0,d.jsx)(o.v,{className:p({status:v}),text:(0,n.qV)(s.Type)})})})}},55246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{TabletsFilters:()=>Y});var a=s(68963),r=s(2982),n=s(2418),l=s(99090),i=s.n(l),o=s(49352),c=s(83570),d=s.n(c),p=s(52846),u=s(95408),h=s(86969),m=s(26688),v=s(63104),g=s(79061),f=s(99337),j=s(99399),x=s(36313),y=s(87555);const z=[],b=(0,x.P1)(((e,t)=>{var s;return null===(s=(0,j.em)(e,t))||void 0===s?void 0:s.TabletStateInfo}),((e,t,s)=>s),((e,t,s,a)=>a),((e,t,s)=>{let a=null!==e&&void 0!==e?e:z;var r,n;s.length>0&&(a=null===(r=a)||void 0===r?void 0:r.filter((e=>s.some((t=>e.Type===t)))));t.length>0&&(a=null===(n=a)||void 0===n?void 0:n.filter((e=>t.some((t=>e.State===t)))));return a.length>0?a:z}),{argsMemoize:x.PP,argsMemoizeOptions:{equalityCheck:y.wU}});var N=s(24362),w=s(52317),E=s(34051),k=s(83496),S=s(30817);const F=JSON.parse('{"page.title":"Tablets"}'),M=JSON.parse('{"page.title":"\u0422\u0430\u0431\u043b\u0435\u0442\u043a\u0438"}'),A=(0,S.wZ)("ydb-tablets-filters-page",{en:F,ru:M});var C=s(75859);const K=(0,N.cn)("tablets-filters"),O=u.z.preprocess((e=>Array.isArray(e)?e.filter(Boolean).sort():[]),u.z.string().array()),T=u.z.preprocess((e=>Array.isArray(e)?e.flatMap((e=>k.LV[e]||e)).filter(Boolean):[]),u.z.string().array()),I=220,P=300;function Y(){var e;const[t,s]=(0,p.useQueryParams)({nodeIds:p.ArrayParam,type:p.ArrayParam,state:p.ArrayParam,path:p.StringParam,clusterName:p.StringParam}),n=null!==(e=t.path)&&void 0!==e?e:void 0,l=(0,E.zL)();a.useEffect((()=>{l((0,g.J)("tablets",{tenantName:n}))}),[l,n]);const c=O.parse(t.nodeIds),{currentData:u,isFetching:x,error:y}=j.zg.useGetTabletsInfoQuery({nodes:c,path:n},{pollingInterval:w.t_}),{data:z}=f.W.useGetNodesListQuery({},{pollingInterval:w.t_}),N=x&&void 0===u,S=T.parse(t.state),F=k.uk.map((e=>({value:e,content:e}))),M=O.parse(t.type),I=Array.from(new Set(...[i()(null===u||void 0===u?void 0:u.TabletStateInfo,(e=>e.Type))])).map((e=>({value:String(e),content:e}))),P=(0,E.ix)((e=>b(e,{nodes:c,path:n},S,M))),Y=(e,t)=>(0,C.jsx)(v.Y,{tablet:P[e],tenantName:n},t),L=i()(z,(e=>({content:e.Id,value:String(e.Id),data:e.Host})));return(0,C.jsxs)(a.Fragment,{children:[(0,C.jsx)(o.ql,{children:(0,C.jsx)("title",{children:"".concat(A("page.title")," \u2014 ").concat(n||t.clusterName||w.DO)})}),N?(0,C.jsx)("div",{className:"loader",children:(0,C.jsx)(r.a,{size:"l"})}):y&&"object"===typeof y&&"status"in y&&403===y.status?(0,C.jsx)(h.J,{}):(0,C.jsxs)("div",{className:K(),children:[n?(0,C.jsxs)("div",{className:K("tenant"),children:[(0,C.jsx)("span",{className:K("label"),children:"Database: "})," ",n]}):null,(0,C.jsx)(D,{nodesForSelect:L,nodeFilter:c,onChangeNodes:e=>s({nodeIds:e}),states:F,stateFilter:S,onChangeStates:e=>s({state:e}),types:I,typeFilter:M,onChangeTypes:e=>s({type:e})}),y?(0,C.jsx)(m.V,{error:y}):null,P.length>0?(0,C.jsx)("div",{className:K("items"),children:(0,C.jsx)(d(),{itemRenderer:Y,length:P.length,type:"uniform"})}):!y&&(0,C.jsx)("div",{className:K("empty-message"),children:"no tablets"})]})]})}function D(e){let{nodesForSelect:t,nodeFilter:s,onChangeNodes:a,states:r,stateFilter:l,onChangeStates:i,types:o,typeFilter:c,onChangeTypes:d}=e;return(0,C.jsxs)("div",{className:K("filters"),children:[(0,C.jsx)("div",{className:K("filter-wrapper"),children:(0,C.jsx)(n.P,{multiple:!0,label:"Node ID",width:I,popupWidth:P,placeholder:"All",options:t,value:s,onUpdate:a,renderOption:e=>(0,C.jsxs)("div",{className:K("node"),children:[(0,C.jsx)("div",{children:e.content}),(0,C.jsx)("div",{className:K("node-meta"),title:e.data,children:e.data})]}),getOptionHeight:()=>40})}),(0,C.jsx)("div",{className:K("filter-wrapper"),children:(0,C.jsx)(n.P,{multiple:!0,label:"multiple",width:I,placeholder:"All",options:r,value:l,onUpdate:i})}),(0,C.jsx)("div",{className:K("filter-wrapper"),children:(0,C.jsx)(n.P,{multiple:!0,label:"Types",width:I,placeholder:"All",options:o,value:c,onUpdate:d})})]})}},83496:(e,t,s)=>{"use strict";s.d(t,{FW:()=>o,KR:()=>c,LV:()=>i,uk:()=>l});var a=s(75850),r=s(28164);const n={[r.g.Dead]:a.K.Red,[r.g.Created]:a.K.Yellow,[r.g.ResolveStateStorage]:a.K.Yellow,[r.g.Candidate]:a.K.Yellow,[r.g.BlockBlobStorage]:a.K.Yellow,[r.g.WriteZeroEntry]:a.K.Yellow,[r.g.Restored]:a.K.Yellow,[r.g.Discover]:a.K.Yellow,[r.g.Lock]:a.K.Yellow,[r.g.Stopped]:a.K.Yellow,[r.g.ResolveLeader]:a.K.Yellow,[r.g.RebuildGraph]:a.K.Yellow,[r.g.Deleted]:a.K.Green,[r.g.Active]:a.K.Green},l=Object.keys(r.g),i=Object.entries(n).reduce(((e,t)=>{let[s,a]=t;return e[a]?e[a].push(s):e[a]=[s],e}),{}),o=e=>{if(!e)return a.K.Grey;return t=e,Object.values(a.K).includes(t)?e:n[e];var t};function c(e){if(!e)return"unknown";switch(e){case r.g.Dead:return"danger";case r.g.Active:case r.g.Deleted:return"success";default:return"warning"}}},16484:(e,t,s)=>{var a=s(46067),r=s(75345);e.exports=function(e,t){var s=-1,n=r(e)?Array(e.length):[];return a(e,(function(e,a,r){n[++s]=t(e,a,r)})),n}},99090:(e,t,s)=>{var a=s(40341),r=s(67173),n=s(16484),l=s(46296);e.exports=function(e,t){return(l(e)?a:n)(e,r(t,3))}}}]);