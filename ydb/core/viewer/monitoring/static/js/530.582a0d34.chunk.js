"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[530],{21986:(e,t,n)=>{n.d(t,{J:()=>o});var i=n(68963),a=n(32257),s=n(68330),l=n(88776);const d=(0,n(31580).G)("help-popover"),r=16;function o(e){var t;return i.createElement(s.J,Object.assign({},e,{className:d(null,e.className)}),i.createElement("button",Object.assign({ref:e.buttonRef,type:"button"},e.buttonProps,{className:d("button",null===(t=e.buttonProps)||void 0===t?void 0:t.className)}),i.createElement(l.J,{data:a.Z,size:r})))}},31580:(e,t,n)=>{n.d(t,{G:()=>a});var i=n(5247);(0,i.withNaming)({e:"__",m:"_",v:"_"});const a=(0,i.withNaming)({n:"gc-",e:"__",m:"_",v:"_"})},84317:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(68963);const a=e=>i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.5a6.501 6.501 0 0 1 6.445 5.649.75.75 0 1 1-1.488.194A5.001 5.001 0 0 0 4.43 4.5h1.32a.75.75 0 0 1 0 1.5h-3A.75.75 0 0 1 2 5.25v-3a.75.75 0 1 1 1.5 0v1.06A6.48 6.48 0 0 1 8 1.5Zm5.25 13a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-3a.75.75 0 1 0 0 1.5h1.32a5.001 5.001 0 0 1-8.528-2.843.75.75 0 1 0-1.487.194 6.501 6.501 0 0 0 10.945 3.84v1.059c0 .414.336.75.75.75Z",clipRule:"evenodd"}))},2639:(e,t,n)=>{n.d(t,{B:()=>a,M:()=>s});var i=n(68963);function a(e,t){return e.map((e=>{var n;let i;e.sub&&(i=a(e.sub,t));const s=null!==(n=t[e.name])&&void 0!==n?n:e.width;return Object.assign(Object.assign({},e),{width:s,sub:i})}))}function s(e){let{saveSizes:t,getSizes:n}=e;const[a,s]=i.useState((()=>n()));return[a,i.useCallback(((e,n)=>{s((i=>{const a=Object.assign(Object.assign({},i),{[e]:n});return t(a),a}))}),[t])]}},48857:(e,t,n)=>{n.d(t,{N:()=>Se});var i=n(68963),a=n(21645),s=n(17176),l=n(88776),d=n(20397);const r=e=>i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.5 6V5a2.5 2.5 0 0 0-5 0v1h5ZM4 5v1a3 3 0 0 0-3 3v3a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3V5a4 4 0 0 0-8 0Zm6.5 2.5H12A1.5 1.5 0 0 1 13.5 9v3a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 12V9A1.5 1.5 0 0 1 4 7.5h6.5Zm-1.75 2a.75.75 0 0 0-1.5 0v2a.75.75 0 0 0 1.5 0v-2Z",clipRule:"evenodd"}));var o=n(90966),c=n(89646),u=n(68512),m=n(10288),p=n(48027),I=n(38581),v=n(34505),b=n(24119),g=n(58414),f=n(95097),h=n(77796),y=n(36951);const S=(0,y.Ge)("list-container-view"),x=i.forwardRef((function(e,t){let{as:n="div",role:a="listbox",children:s,id:l,className:d,fixedHeight:r,extraProps:o,qa:c,style:u}=e;return i.createElement(h.k,Object.assign({qa:c,as:n,direction:"column",ref:t,grow:!0,tabIndex:-1,id:l,role:a,style:u,className:S({"fixed-height":r},d)},o),s)})),B=e=>null!==e&&"object"===typeof e&&"data"in e,E=(0,y.Ge)("list-recursive-renderer");function O(e){var t,{id:n,itemSchema:a,list:s}=e,l=(0,f._T)(e,["id","itemSchema","list"]);const d=l.children(n,s.structure.idToFlattenIndex[n]);if(B(a)&&a.children){const e=!s.state.expandedById||!(n in s.state.expandedById)||s.state.expandedById[n];return i.createElement("ul",{style:l.style,className:E(null,l.className),role:"group"},d,e&&Boolean(null===(t=s.structure.groupsState[n])||void 0===t?void 0:t.childrenIds)&&a.children.map(((e,t)=>i.createElement(O,Object.assign({list:s,id:s.structure.groupsState[n].childrenIds[t],itemSchema:e,key:t},l)))))}return d}function w(e){var{containerRef:t,renderItem:n,list:a}=e,s=(0,f._T)(e,["containerRef","renderItem","list"]);return i.createElement(x,Object.assign({ref:t},s),a.structure.items.map(((e,t)=>i.createElement(O,{key:t,itemSchema:e,id:a.structure.rootIds[t],list:a},n))))}const C=e=>{let{list:t,multiple:n}=e;return e=>{let{id:i}=e;t.state.disabledById[i]||(t.state.setActiveItemId(i),t.state.expandedById&&i in t.state.expandedById&&t.state.setExpanded?t.state.setExpanded((e=>Object.assign(Object.assign({},e),{[i]:!e[i]}))):t.state.setSelected((e=>Object.assign(Object.assign({},n?e:{}),{[i]:!n||!e[i]}))))}};var j=n(59926);const k=e=>{let{list:t,index:n,step:i,disabledItems:a={}}=e;const s=t.length;let l=(n+s)%s;for(let d=0;d<s;d+=1){if(t[l]&&!a[l])return l;l=(l+s+i)%s}},N="data-list-item",R={s:[22,44],m:[26,44],l:[34,52],xl:[44,62]},_=(e,t)=>{var n;if(document){const i=(t||document).querySelector("[".concat(N,'="').concat(e,'"]'));i&&(null===(n=i.scrollIntoView)||void 0===n||n.call(i,{block:"nearest"}))}};var F=n(46318),P=n(57542);const D=e=>i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.03 10.53a.75.75 0 0 1-1.06 0L8 6.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06Z",clipRule:"evenodd"}));var z=n(39137),T=n(95216);const L=(0,y.Ge)("list-item-view"),A=e=>{var{children:t,indentation:n=1,className:a}=e,s=(0,f._T)(e,["children","indentation","className"]);return i.createElement(h.k,Object.assign({width:16*n,className:L("slot",a)},s),t)},q=i.forwardRef((function(e,t){var{id:n,as:a,size:s="m",active:d,selected:r,disabled:o,activeOnHover:c,className:u,hasSelectionIcon:p=!0,indentation:I,startSlot:v,subtitle:b,endSlot:g,title:y,height:S,expanded:x,dragging:B,style:E,role:O="option",onClick:w}=e,C=(0,f._T)(e,["id","as","size","active","selected","disabled","activeOnHover","className","hasSelectionIcon","indentation","startSlot","subtitle","endSlot","title","height","expanded","dragging","style","role","onClick"]);const j=a||"div",k="boolean"===typeof x,_=o?void 0:w,q="boolean"===typeof c?c:Boolean(_);return i.createElement(h.k,Object.assign({[N]:n,role:O,"aria-selected":r,onClick:_,className:L({active:B||d,selected:r&&!p,activeOnHover:q,radius:s,dragging:B,clickable:Boolean(_)},(0,T.W)({px:2},u)),style:Object.assign({minHeight:null!==S&&void 0!==S?S:R[s][Number(Boolean(b))]},E),as:j,ref:t,alignItems:"center",gap:"4",justifyContent:"space-between"},C),i.createElement(h.k,{gap:"2",alignItems:"center",grow:!0},p&&i.createElement(A,null,r?i.createElement(l.J,{data:F.Z,size:16,className:(0,z.V)({color:"info"})}):null),(e=>e&&e>=1?i.createElement(A,{indentation:Math.floor(e)}):null)(I),k?i.createElement(l.J,{className:L("icon",(0,z.V)({color:o?"hint":void 0})),data:x?P.Z:D,size:16}):null,v,i.createElement("div",{className:L("main-content")},"string"===typeof y?i.createElement(m.x,{ellipsis:!0,color:o?"hint":void 0,variant:k?"subheader-1":void 0},y):y,"string"===typeof b?i.createElement(m.x,{ellipsis:!0,color:o?"hint":"secondary"},b):b)),g)})),M=(0,y.Ge)("tree-list"),V=e=>{let{qa:t,id:n,size:a="m",className:s,list:l,multiple:d,containerRef:r,renderItem:o,renderContainer:u=w,onItemClick:m,mapItemDataToProps:p}=e;const I=(0,c.u)(),v=null!==n&&void 0!==n?n:I,b=i.useRef(null),g=null!==r&&void 0!==r?r:b,f=i.useMemo((()=>{if(null===m)return;return(e,t)=>{const n={id:e.id,list:l};if(m)null===m||void 0===m||m(n,t);else{C({list:l,multiple:d})(n,t)}}}),[m,l,d]);(e=>{let{containerRef:t,onItemClick:n,enabled:a,list:s}=e;const l=i.useCallback((function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var i,a;"number"===typeof e&&s.structure.visibleFlattenIds[e]&&(n&&_(s.structure.visibleFlattenIds[e],null===t||void 0===t?void 0:t.current),null===(a=(i=s.state).setActiveItemId)||void 0===a||a.call(i,s.structure.visibleFlattenIds[e]))}),[s.structure.visibleFlattenIds,s.state,t]),d=i.useCallback((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.preventDefault();const i=s.structure.visibleFlattenIds.findIndex((e=>e===s.state.activeItemId)),a=k({list:s.structure.visibleFlattenIds,index:(i>-1?i:n)+t,step:Math.sign(t),disabledItems:s.state.disabledById});l(a)}),[l,s.state.activeItemId,s.state.disabledById,s.structure.visibleFlattenIds]);i.useLayoutEffect((()=>{const e=null===t||void 0===t?void 0:t.current;if(a||!e)return;const i=e=>{switch(e.key){case j.V.ARROW_DOWN:d(e,1,-1);break;case j.V.ARROW_UP:d(e,-1);break;case j.V.SPACEBAR:case j.V.ENTER:s.state.activeItemId&&!s.state.disabledById[s.state.activeItemId]&&(e.preventDefault(),null===n||void 0===n||n({id:s.state.activeItemId}))}};return e.addEventListener("keydown",i),()=>{e.removeEventListener("keydown",i)}}),[t,a,d,s.state.activeItemId,s.state.disabledById,n])})({containerRef:g,onItemClick:f,list:l});return u({qa:t,id:"list-".concat(v),size:a,containerRef:g,className:M(null,s),list:l,renderItem:(e,n,s)=>{const r=(e=>{let{qa:t,list:n,onItemClick:i,mapItemDataToProps:a,size:s="m",multiple:l=!1,id:d}=e;var r;const o=Object.assign(Object.assign(Object.assign({},n.structure.itemsState[d]),n.structure.groupsState[d]),{isLastItem:d===n.structure.visibleFlattenIds[n.structure.visibleFlattenIds.length-1]});let c;n.state.expandedById&&d in n.state.expandedById&&(c=n.state.expandedById[d]);const u=Object.assign({id:d,size:s,expanded:c,active:d===n.state.activeItemId,indentation:o.indentation,disabled:Boolean(null===(r=n.state.disabledById)||void 0===r?void 0:r[d]),selected:Boolean(n.state.selectedById[d]),hasSelectionIcon:Boolean(l)&&!o.childrenIds,onClick:i?e=>i({id:d},e):void 0},a(n.structure.itemsById[d]));return t&&(u.qa=((e,t)=>"".concat(e,"-").concat(t))(t,d)),{data:n.structure.itemsById[d],props:u,context:o}})({qa:t,id:e,size:a,multiple:d,mapItemDataToProps:p,onItemClick:f,list:l});return o?o({data:r.data,props:r.props,context:r.context,index:n,renderContainerProps:s,list:l}):i.createElement(q,Object.assign({},r.props,s))}})};var Z=n(79805);const J=e=>{let{item:t,groupedId:n,getItemId:i}=e,a=n;return"function"===typeof i?a=i(B(t)?t.data:t):t&&"object"===typeof t&&"id"in t&&t.id&&(a=t.id),a},U=(e,t)=>t?"".concat(t).concat("-").concat(e):"".concat(e),W=e=>e.split("-");function G(e){let{items:t,expandedById:n,getItemId:a}=e;const s=i.useMemo((()=>function(e){let{items:t,getItemId:n,expandedById:i={}}=e;const a=[],s=(e,t,l,d)=>{const r=U(l,d),o=J({groupedId:r,item:t,getItemId:n});return d||a.push(o),e.push(o),B(t)&&t.children&&(o in i&&!i[o]||e.push(...t.children.reduce(((e,t,n)=>s(e,t,n,o)),[]))),e},l=t.reduce(((e,t,n)=>s(e,t,n)),[]),d={};for(const[r,o]of l.entries())d[o]=r;return{rootIds:a,visibleFlattenIds:l,idToFlattenIndex:d}}({items:t,expandedById:n,getItemId:a})),[t,n,a]);return s}function H(e){let{items:t,defaultExpandedState:n="expanded",getItemId:i}=e;const a={itemsById:{},groupsState:{},itemsState:{},initialState:{disabledById:{},selectedById:{},expandedById:{}}},s=e=>{let{item:t,index:l,parentGroupedId:d,parentId:r}=e;const o=U(l,d),c=J({groupedId:o,item:t,getItemId:i});r&&a.groupsState[r].childrenIds.push(c),a.itemsById[c]=t.data,a.itemsState[c]||(a.itemsState[c]={indentation:0}),"undefined"!==typeof r&&(a.itemsState[c].parentId=r),"undefined"!==typeof t.selected&&(a.initialState.selectedById[c]=t.selected),"undefined"!==typeof t.disabled&&(a.initialState.disabledById[c]=t.disabled),o&&(a.itemsState[c].indentation=W(o).length-1),t.children&&(a.groupsState[c]={childrenIds:[]},a.initialState.expandedById&&("undefined"===typeof t.expanded?a.initialState.expandedById[c]="expanded"===n:a.initialState.expandedById[c]=t.expanded),t.children.forEach(((e,t)=>{s({item:e,index:t,parentGroupedId:o,parentId:c})})))};return t.forEach(((e,t)=>B(e)?s({item:e,index:t}):(e=>{let{item:t,index:n}=e;const s=J({groupedId:String(n),item:t,getItemId:i});a.itemsById[s]=t,a.itemsState[s]||(a.itemsState[s]={indentation:0}),t&&"object"===typeof t&&("selected"in t&&"boolean"===typeof t.selected&&(a.initialState.selectedById[s]=t.selected),"disabled"in t&&"boolean"===typeof t.disabled&&(a.initialState.disabledById[s]=t.disabled))})({item:e,index:t}))),a}const K=e=>{let{items:t,getItemId:n,defaultExpandedState:a="expanded",withExpandedState:s=!0,initialState:l,controlledState:d}=e;const{itemsById:r,groupsState:o,itemsState:c,initialState:u}=function(e){let{items:t,getItemId:n,defaultExpandedState:a}=e;const s=i.useRef(n).current;return i.useMemo((()=>H({items:t,getItemId:s,defaultExpandedState:a})),[s,a,t])}({items:t,getItemId:n,defaultExpandedState:a}),m=(e=>{let{initialState:t,withExpandedState:n}=e;const a=i.useRef(t),s=a.current!==t;a.current=t;const[l,d]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.disabledById)&&void 0!==e?e:{}})),[r,o]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.selectedById)&&void 0!==e?e:{}})),[c,u]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.expandedById)&&void 0!==e?e:{}})),[m,p]=i.useState((()=>null===t||void 0===t?void 0:t.activeItemId));s&&((null===t||void 0===t?void 0:t.disabledById)&&d((e=>Object.assign(Object.assign({},t.disabledById),e))),(null===t||void 0===t?void 0:t.selectedById)&&o((e=>Object.assign(Object.assign({},t.selectedById),e))),(null===t||void 0===t?void 0:t.expandedById)&&u((e=>Object.assign(Object.assign({},t.expandedById),e))),p((e=>null!==e&&void 0!==e?e:null===t||void 0===t?void 0:t.activeItemId)));const I={disabledById:l,selectedById:r,activeItemId:m,setDisabled:d,setSelected:o,setActiveItemId:p};return n&&(I.expandedById=c,I.setExpanded=u),I})({initialState:i.useMemo((()=>({expandedById:Object.assign(Object.assign({},null===l||void 0===l?void 0:l.expandedById),u.expandedById),selectedById:Object.assign(Object.assign({},null===l||void 0===l?void 0:l.selectedById),u.selectedById),disabledById:Object.assign(Object.assign({},null===l||void 0===l?void 0:l.disabledById),u.disabledById)})),[u.disabledById,u.expandedById,u.selectedById,null===l||void 0===l?void 0:l.disabledById,null===l||void 0===l?void 0:l.expandedById,null===l||void 0===l?void 0:l.selectedById]),withExpandedState:s}),{visibleFlattenIds:p,idToFlattenIndex:I,rootIds:v}=G({items:t,expandedById:m.expandedById,getItemId:n});return{state:i.useMemo((()=>d?Object.assign(Object.assign({},m),d):m),[d,m]),structure:{rootIds:v,items:t,visibleFlattenIds:p,idToFlattenIndex:I,itemsById:r,groupsState:o,itemsState:c}}},X=e=>{let{defaultValue:t=[],value:n,onUpdate:a}=e;const[s,l]=i.useState(t),d=null!==n&&void 0!==n?n:s,r=!n;return i.useMemo((()=>{const e=d.reduce(((e,t)=>(e[t]=!0,e)),{});return{value:d,selectedById:e,setSelected:t=>{const n=(e=>Object.entries(e).reduce(((e,t)=>{let[n,i]=t;return i&&e.push(n),e}),[]))("function"===typeof t?t(e):t);r?l(n):null===a||void 0===a||a(n)},setInnerValue:r?l:void 0}}),[a,r,d])},Y=(0,y.Ge)("tree-select"),Q=e=>i.createElement(q,Object.assign({},e.props,e.renderContainerProps)),$=i.forwardRef((function(e,t){let{id:n,qa:a,title:s,placement:l,slotBeforeListBody:d,slotAfterListBody:r,size:o="m",defaultOpen:u,width:m,containerRef:f,className:h,containerClassName:y,popupClassName:S,open:x,multiple:B,popupWidth:E,popupDisablePortal:O,items:w,value:j,defaultValue:k,withExpandedState:N=!0,defaultExpandedState:R="expanded",onClose:_,onOpenChange:F,onUpdate:P,renderControl:D,renderItem:z=Q,renderContainer:T,mapItemDataToProps:L,onFocus:A,onBlur:q,getItemId:M,onItemClick:J}=e;const U=(0,Z.X)(),W=(0,c.u)(),G=null!==n&&void 0!==n?n:W,H="tree-select-popup-".concat(G),$=i.useRef(null),ee=i.useRef(null),te=i.useRef(null),ne=null!==f&&void 0!==f?f:te,ie=(0,p.c)(t,ee),{toggleOpen:ae,open:se}=(0,v.Z)({defaultOpen:u,onClose:_,onOpenChange:F,open:x}),{value:le,selectedById:de,setSelected:re}=X({value:j,defaultValue:k,onUpdate:P}),oe=K({controlledState:{selectedById:de,setSelected:re},items:w,getItemId:M,defaultExpandedState:R,withExpandedState:N}),ce=i.useMemo((()=>{if(null===J)return;return(e,t)=>{const n={id:e.id,list:oe};if(J)null===J||void 0===J||J(n,t);else{C({list:oe,multiple:B})(n,t);const i=oe.state.expandedById&&e.id in oe.state.expandedById;B||i||ae(!1)}}}),[J,oe,B,ae]);i.useLayoutEffect((()=>{var e;return se&&(null===(e=ne.current)||void 0===e||e.focus()),()=>oe.state.setActiveItemId(void 0)}),[se]);const ue=i.useCallback((()=>ae(!1)),[ae]),{focusWithinProps:me}=(0,I.L)({onFocusWithin:A,onBlurWithin:i.useCallback((e=>{null===q||void 0===q||q(e),ue()}),[ue,q])}),pe={list:oe,open:se,toggleOpen:ae,clearValue:()=>oe.state.setSelected({}),ref:ie,size:o,value:le,id:G,activeItemId:oe.state.activeItemId,title:s},Ie=D?D(pe):i.createElement(b.Y,Object.assign({},pe,{selectedOptionsContent:i.Children.toArray(le.map((e=>L(oe.structure.itemsById[e]).title))).join(", "),view:"normal",pin:"round-round",popupId:H,selectId:G})),ve=Object.assign({},"max"===m&&{width:m}),be={};return"number"===typeof m&&(be.width=m),i.createElement("div",Object.assign({ref:$},me,{className:Y(ve,h),style:be}),Ie,i.createElement(g.h,{ref:$,className:Y("popup",{size:o},S),controlRef:ee,width:E,placement:l,open:se,handleClose:ue,disablePortal:O,mobile:U,id:H},d,i.createElement(V,{list:oe,size:o,className:Y("list",y),qa:a,multiple:B,id:"list-".concat(G),containerRef:ne,onItemClick:ce,renderContainer:T,mapItemDataToProps:L,renderItem:null!==z&&void 0!==z?z:Q}),r))}));var ee=n(77264),te=n(57002),ne=n.n(te);function ie(e,t){return!t||"object"!==typeof t||!("title"in t)||"string"!==typeof t.title||t.title.toLowerCase().includes((e||"").toLowerCase())}function ae(e){let{items:t,initialFilterValue:n="",filterItem:a,onFilterChange:s,filterItems:l,debounceTimeout:d=300}=e;const r=i.useRef(null),[o,c]=i.useState(n),[u,m]=i.useState(t),[p,I]=i.useState(t),v=i.useCallback(((e,t)=>{if(l)return()=>l(e,t);if(e){const n=a||ie;return()=>function(e,t){const n=(e,i)=>{if(B(i)&&i.children){const a=i.children.reduce(n,[]);a.length?e.push(Object.assign(Object.assign({},i),{data:i.data,children:a})):t(i.data)&&e.push(Object.assign(Object.assign({},i),{data:i.data,children:[]}))}else if(B(i)&&t(i.data)){const{children:t}=i,n=(0,f._T)(i,["children"]);e.push(n)}else!B(i)&&t(i)&&e.push(i);return e};return e.reduce(n,[])}(t,(t=>n(e,t)))}return()=>t}),[a,l]);t!==u&&(I(v(o,t)),m(t));const b=i.useCallback(ne()((e=>I(v(e,t))),d),[I,v,d]),{onFilterUpdate:g,reset:h}=i.useMemo((()=>({reset:()=>{c(n),null===s||void 0===s||s(n),b(n)},onFilterUpdate:e=>{c(e),null===s||void 0===s||s(e),b(e)}})),[b,n,s]);return{filterRef:r,filter:o,reset:h,items:p,onFilterUpdate:g}}var se=n(54973);const le=JSON.parse('{"button_apply":"Apply","button_reset":"Reset","button_switcher":"Columns"}'),de=JSON.parse('{"button_apply":"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c","button_reset":"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c","button_switcher":"\u041a\u043e\u043b\u043e\u043d\u043a\u0438"}'),re=(0,se.e)({en:le,ru:de},"TableColumnSetupInner"),oe=(0,y.Ge)("inner-table-column-setup"),ce=oe("controls"),ue=oe("filter-input"),me=oe("empty-placeholder"),pe={isDragDisabled:!0},Ie=e=>({title:e.title}),ve=(e,t)=>"string"!==typeof t.title||t.title.toLowerCase().includes(e.trim().toLowerCase()),be=e=>{const{renderSwitcher:t,popupWidth:n,popupPlacement:p,items:I,onUpdate:v,sortable:b,renderControls:g,className:f,defaultItems:y=I,showResetButton:S,filterable:B,filterPlaceholder:E,filterEmptyMessage:O,filterSettings:w=ve}=e,[C,j]=i.useState(!1),[k,N]=i.useState(b),[R,_]=i.useState(b);b!==R&&(_(b),N(b));const[F,P]=i.useState(I),[D,z]=i.useState(I);I!==D&&(z(I),P(I));const T=ae({items:F,filterItem:w,debounceTimeout:0}),L=()=>{const e=F.map((e=>{let{id:t,isSelected:n}=e;return{id:t,isSelected:n}}));v(e),J(!1)},A=()=>i.createElement(s.z,{view:"action",width:"max",onClick:L},re("button_apply")),M="function"===typeof S?S(F):S,V=(e=>{let{onDragEnd:t,renderControls:n}=e;const a=(0,c.u)();return e=>{let{renderItem:s,list:l,containerRef:d,id:r,className:c}=e;const{stickyStartItemIdList:u,sortableItemIdList:m,stickyEndItemIdList:p}=((e,t)=>{let n=0;for(;n!==t.length;n++){const i=e[t[n]];if("left"!==(null===i||void 0===i?void 0:i.sticky)&&"start"!==(null===i||void 0===i?void 0:i.sticky))break}let i=t.length;for(;0!==i;i--){const n=e[t[i-1]];if("right"!==(null===n||void 0===n?void 0:n.sticky)&&"end"!==(null===n||void 0===n?void 0:n.sticky))break}return{stickyStartItemIdList:t.slice(0,n),sortableItemIdList:t.slice(n,i),stickyEndItemIdList:t.slice(i)}})(l.structure.itemsById,l.structure.visibleFlattenIds),I=u.map(((e,t)=>s(e,t,pe))),v=m.map(((e,t)=>s(e,t+u.length))),b=p.map(((e,t)=>s(e,I.length+v.length+t,pe)));return i.createElement(i.Fragment,null,i.createElement(x,{ref:d,id:r,className:c},I,i.createElement(o.Z5,{onDragEnd:t},i.createElement(o.bK,{droppableId:a,renderClone:(e,t,n)=>{const i={provided:e,snapshot:t};return s(l.structure.visibleFlattenIds[n.source.index],n.source.index,i)}},(e=>i.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),v,e.placeholder)))),b),i.createElement("div",{className:ce},n()))}})({onDragEnd:e=>{let{destination:t,source:n}=e;void 0!==(null===t||void 0===t?void 0:t.index)&&(null===t||void 0===t?void 0:t.index)!==n.index&&P((e=>((e,t,n)=>{const i=[...e],[a]=i.splice(t,1);return i.splice(n,0,a),i})(e,n.index,t.index)))},renderControls:()=>g?g({DefaultApplyButton:A,onApply:L}):i.createElement(h.k,{gapRow:1,direction:"column",className:ce},M&&i.createElement(s.z,{onClick:()=>{P(y)},width:"max"},re("button_reset")),i.createElement(A,null))}),Z=(e=>t=>{let{data:n,props:a,index:s,renderContainerProps:c}=t;const u=!1===e||!0===(null===c||void 0===c?void 0:c.isDragDisabled),m=u?void 0:i.createElement(l.J,{data:d.Z,size:16}),p=!n.isRequired,I=n.isRequired?i.createElement(l.J,{data:r}):void 0,v=!n.isRequired&&a.selected,b=Object.assign(Object.assign({},a),{selected:v,startSlot:I,hasSelectionIcon:p,endSlot:m});if(u)return i.createElement(q,Object.assign({},b,{key:b.id}));const g=(e,t)=>i.createElement(q,Object.assign({},b,e.draggableProps,e.dragHandleProps,{ref:e.innerRef,dragging:t.isDragging}));return(null===c||void 0===c?void 0:c.provided)&&c.snapshot?g(c.provided,c.snapshot):i.createElement(o._l,{draggableId:a.id,index:s,key:"item-key-".concat(a.id),isDragDisabled:u},g)})(k),J=e=>{j(e),!1===e&&(P(I),N(b),T.reset())},U=i.useMemo((()=>(e=>{const t=[];return e.forEach((e=>{let{id:n,isSelected:i}=e;i&&t.push(n)})),t})(F)),[F]),W=(G=O,()=>i.createElement(m.x,{className:me},G));var G;const H=B?i.createElement(ee.o,{size:"m",view:"clear",placeholder:E,value:T.filter,className:ue,onUpdate:e=>{T.onFilterUpdate(e),N(!e.length)},hasClear:!0}):null,K=T.filter&&!T.items.length?W:V;return i.createElement($,{className:oe(null,f),mapItemDataToProps:Ie,multiple:!0,size:"l",open:C,value:U,items:T.filter?T.items:F,onUpdate:e=>{P((t=>t.map((t=>Object.assign(Object.assign({},t),{isSelected:t.isRequired||e.includes(t.id)})))))},popupWidth:n,onOpenChange:J,placement:p,slotBeforeListBody:H,renderContainer:K,renderControl:e=>{let{toggleOpen:n}=e;const d=(0,u.S)(n);return(null===t||void 0===t?void 0:t({onClick:n,onKeyDown:d}))||i.createElement(s.z,{onClick:n,extraProps:{onKeyDown:d}},i.createElement(l.J,{data:a.Z}),re("button_switcher"))},renderItem:Z})},ge=JSON.parse('{"button_switcher":"Columns"}'),fe=JSON.parse('{"button_switcher":"\u041a\u043e\u043b\u043e\u043d\u043a\u0438"}'),he=(0,se.e)({en:ge,ru:fe},"TableColumnSetup"),ye=(0,y.Ge)("table-column-setup"),Se=e=>{const{switcher:t,renderSwitcher:n,disabled:d,popupWidth:r,popupPlacement:o,className:c,items:u,sortable:m=!0,showStatus:p,onUpdate:I}=e,v=u.map((e=>{let{id:t,title:n,required:i,selected:a,sticky:s}=e;return{id:t,title:n,isRequired:i,isSelected:a,sticky:s}}));return i.createElement(be,{items:v,onUpdate:e=>{I(e.map((e=>{let{id:t,isSelected:n}=e;const i=u.find((e=>e.id===t));return{id:t,selected:n,title:null===i||void 0===i?void 0:i.title,required:null===i||void 0===i?void 0:i.required}})))},popupPlacement:o,popupWidth:r,renderSwitcher:e=>(null===n||void 0===n?void 0:n(e))||t||i.createElement(s.z,{disabled:d,onClick:e.onClick},i.createElement(l.J,{data:a.Z}),he("button_switcher"),(()=>{if(!p)return null;const e=u.reduce(((e,t)=>t.selected?e+1:e),0),t=u.length,n="".concat(e,"/").concat(t);return i.createElement("span",{className:ye("status")},n)})()),sortable:m,className:ye(null,c)})}},56829:(e,t,n)=>{n.d(t,{F:()=>a});var i=n(40797);function a(){return(0,i.T)().theme}}}]);