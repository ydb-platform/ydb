"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[5986],{55982:(e,t,a)=>{a.d(t,{U:()=>d});var n=a(34706),r=a(72616),s=a(16318),o=a(47945),l=a(51403),i=a(10161);function d(e){let{children:t,onConfirmAction:a,onConfirmActionSuccess:d,dialogHeader:u,dialogText:c,retryButtonText:p,buttonDisabled:h=!1,buttonView:m="action",buttonTitle:g,buttonClassName:b,withPopover:y=!1,popoverContent:v,popoverPlacement:x="right",popoverDisabled:f=!0}=e;const[j,C]=n.useState(!1),[w,N]=n.useState(!1),[T,S]=n.useState(!1),I=()=>(0,i.jsx)(r.z,{onClick:()=>C(!0),view:m,disabled:h,loading:!h&&w,className:b,title:g,children:t});return(0,i.jsxs)(n.Fragment,{children:[(0,i.jsx)(o.g,{visible:j,header:u,text:c,withRetry:T,retryButtonText:p,onConfirm:async e=>{N(!0),await a(e)},onConfirmActionSuccess:async()=>{S(!1);try{await(null===d||void 0===d?void 0:d())}finally{N(!1)}},onConfirmActionError:e=>{S((0,l.q)(e)),N(!1)},onClose:()=>{C(!1)}}),y?(0,i.jsx)(s.J,{content:v,placement:x,disabled:f,children:I()}):I()]})}},47945:(e,t,a)=>{a.d(t,{g:()=>y});var n=a(34706),r=a(3948),s=a(15268),o=a(19912),l=a(68585),i=a(14561),d=a(58231),u=a(99294),c=a(37711);const p=JSON.parse('{"default-error":"Something went wrong, action cannot be completed","no-rights-error":"You don\'t have enough rights to complete the operation","button-confirm":"Confirm","button-retry":"Retry","button-cancel":"Cancel","button-close":"Close","checkbox-text":"I understand what I\'m doing"}'),h=(0,c.wZ)("ydb-critical-action-dialog",{en:p});var m=a(10161);const g=(0,u.cn)("ydb-critical-dialog"),b=e=>e.data&&"issues"in e.data&&e.data.issues?(0,m.jsx)(d.I,{hideSeverity:!0,data:e.data}):403===e.status?h("no-rights-error"):e.statusText?e.statusText:h("default-error");function y(e){let{visible:t,header:a,text:d,withRetry:u,retryButtonText:c,withCheckBox:p,onClose:y,onConfirm:v,onConfirmActionSuccess:x,onConfirmActionError:f}=e;const[j,C]=n.useState(!1),[w,N]=n.useState(),[T,S]=n.useState(!1),I=async e=>(C(!0),v(e).then((()=>{x(),y()})).catch((e=>{f(e),N(e)})).finally((()=>{C(!1)})));return(0,m.jsx)(l.V,{open:t,hasCloseButton:!1,className:g(),size:"s",onClose:y,onTransitionExited:()=>{N(void 0),S(!1)},children:w?(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(l.V.Header,{caption:a}),(0,m.jsx)(l.V.Body,{className:g("body"),children:(0,m.jsxs)("div",{className:g("body-message",{error:!0}),children:[(0,m.jsx)("span",{className:g("error-icon"),children:(0,m.jsx)(r.Z,{width:"24",height:"22"})}),b(w)]})}),(0,m.jsx)(l.V.Footer,{loading:!1,preset:"default",textButtonApply:u?c||h("button-retry"):void 0,textButtonCancel:h("button-close"),onClickButtonApply:()=>I(!0),onClickButtonCancel:y})]}):(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(l.V.Header,{caption:a}),(0,m.jsxs)(l.V.Body,{className:g("body"),children:[(0,m.jsxs)("div",{className:g("body-message",{warning:!0}),children:[(0,m.jsx)("span",{className:g("warning-icon"),children:(0,m.jsx)(i.J,{data:s.Z,size:24})}),d]}),p?(0,m.jsx)(o.X,{checked:T,onUpdate:S,children:h("checkbox-text")}):null]}),(0,m.jsx)(l.V.Footer,{loading:j,preset:"default",textButtonApply:h("button-confirm"),textButtonCancel:h("button-cancel"),propsButtonApply:{type:"submit",disabled:p&&!T},onClickButtonCancel:y,onClickButtonApply:()=>I()})]})})}},51403:(e,t,a)=>{a.d(t,{q:()=>n});const n=e=>Boolean(e&&"object"===typeof e&&"retryPossible"in e&&e.retryPossible)},29331:(e,t,a)=>{a.d(t,{Q:()=>o});var n=a(99294),r=a(10161);const s=(0,n.cn)("ydb-diagnostic-card");function o(e){let{children:t,className:a,active:n,size:o="m",interactive:l=!0}=e;return(0,r.jsx)("div",{className:s({active:n,size:o,interactive:l},a),children:t})}},34973:(e,t,a)=>{a.d(t,{C:()=>n.C});var n=a(14325)},66498:(e,t,a)=>{a.d(t,{a:()=>n.a});var n=a(41989)},52154:(e,t,a)=>{a.d(t,{T:()=>o});var n=a(67661),r=a(32341),s=a(10161);const o=e=>{let{value:t,onChange:a,className:o}=e;return(0,s.jsxs)(n.E,{value:t,onUpdate:a,className:o,children:[(0,s.jsx)(n.E.Option,{value:r.pu.ALL,children:r.pu.ALL}),(0,s.jsx)(n.E.Option,{value:r.pu.PROBLEMS,children:r.pu.PROBLEMS})]})}},17784:(e,t,a)=>{a.d(t,{o:()=>n.o});var n=a(76485)},76217:(e,t,a)=>{a.d(t,{P:()=>b});var n=a(83797),r=a(2194),s=a(46878),o=a(65e3),l=a(70340),i=a(55842),d=a(61168),u=a(62508),c=a(90808),p=a(37711);const h=JSON.parse('{"field_links":"Links","context_developer-ui":"Developer UI"}'),m=(0,p.wZ)("ydb-tablet-name-wrapper",{en:h});var g=a(10161);function b(e){let{tabletId:t,database:a}=e;const p=(0,i.ix)(o.VH),h=(0,s.fK)(t,{database:a});return(0,g.jsx)(d.l,{disabled:!p,delayClosing:200,content:(0,g.jsx)(n.w,{responsive:!0,children:(0,g.jsx)(n.w.Item,{name:m("field_links"),children:(0,g.jsx)(c.j,{title:m("context_developer-ui"),url:(0,l.wz)(t)})})}),placement:["top","bottom"],behavior:r.x.Immediate,children:(0,g.jsx)(u.A,{name:t.toString(),path:h,hasClipboardButton:!0,showStatus:!1})})}},59907:(e,t,a)=>{a.d(t,{f:()=>o});var n=a(2634),r=a(55973),s=a(10161);function o(e){let{state:t}=e;return(0,s.jsx)(n._,{theme:(0,r.KR)(t),children:t})}},73759:(e,t,a)=>{a.d(t,{m:()=>v});var n=a(34706),r=a(53366),s=a(23795),o=a(26390),l=a(34973),i=a(52154),d=a(17784),u=a(56065),c=a(39202),p=a(10226),h=a(35283),m=a(54162),g=a(81991),b=a(24837),y=a(10161);function v(e){let{withGroupBySelect:t,groupByParams:a=[],columnsToSelect:v,handleSelectedColumnsUpdate:x,entitiesCountCurrent:f,entitiesCountTotal:j,entitiesLoading:C}=e;const{searchValue:w,uptimeFilter:N,groupByParam:T,handleSearchQueryChange:S,handleUptimeFilterChange:I,handleGroupByParamChange:F}=(0,b.u)(a),{problemFilter:P,handleProblemFilterChange:A}=(0,p.t)(),B=(0,c.Zl)(),_=(0,h.yR)(a,B);return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(d.o,{onChange:S,placeholder:(0,m.Z)("controls_search-placeholder"),width:238,value:w}),B&&t?null:(0,y.jsx)(i.T,{value:P,onChange:A}),t?null:(0,y.jsx)(u.X,{value:N,onChange:I}),(0,y.jsx)(r.N,{popupWidth:200,items:v,showStatus:!0,onUpdate:x,sortable:!1}),t?(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(s.x,{variant:"body-2",children:(0,m.Z)("controls_group-by-placeholder")}),(0,y.jsx)(o.P,{hasClear:!0,placeholder:"-",width:150,defaultValue:T?[T]:void 0,onUpdate:e=>{F(e[0])},options:_,className:(0,g.b)("group-by-select"),popupClassName:(0,g.b)("group-by-popup")})]}):null,(0,y.jsx)(l.C,{current:f,total:j,label:(0,m.Z)("nodes"),loading:C})]})}},78294:(e,t,a)=>{a.d(t,{G:()=>F});var n=a(27810),r=a(55842),s=a(34706),o=a(20560),l=a(71037),i=a(93225),d=a(15327),u=a(91538),c=a(74116),p=a(74640),h=a(60918),m=a(88366),g=a(82114),b=a(10226),y=a(96183),v=a(73759),x=a(97485),f=a(92256),j=a(35283);var C=a(54162),w=a(81991),N=a(24837),T=(a(62545),a(10161));const S=e=>{let{path:t,database:a,additionalNodesProps:S={}}=e;const{searchValue:I,uptimeFilter:F}=(0,N.u)(void 0),{problemFilter:P}=(0,b.t)(),[A]=(0,r.Rj)(),{columnsToShow:B,columnsToSelect:_,setColumns:k}=function(e){const t=s.useMemo((()=>(0,f.g)(e)),[e]);return(0,x.N)(t,j.pM,h.Pr,j.P3,j.nn)}({getNodeRef:S.getNodeRef,database:a}),{currentData:R,isLoading:G,error:U}=m.k.useGetNodesQuery({path:t,database:a},{pollingInterval:A}),[V,L]=s.useState({sortValue:"NodeId",sortOrder:o.zE}),[E,D]=(0,r.sC)(V,(e=>{L(e)})),q=s.useMemo((()=>(0,g.A)(null===R||void 0===R?void 0:R.Nodes,{searchValue:I,uptimeFilter:F,problemFilter:P})),[R,I,F,P]),Z=(null===R||void 0===R?void 0:R.TotalNodes)||0;return(0,i.u)(U)?(0,T.jsx)(l.J,{}):(0,T.jsxs)(p.l,{children:[(0,T.jsx)(p.l.Controls,{children:(0,T.jsx)(v.m,{columnsToSelect:_,handleSelectedColumnsUpdate:k,entitiesCountCurrent:q.length,entitiesCountTotal:Z,entitiesLoading:G,groupByParams:void 0})}),U?(0,T.jsx)(d.V,{error:U}):null,(0,T.jsx)(p.l.Table,{loading:G,children:R?0!==q.length||"All"===P&&F===y.Uu.All?(0,T.jsx)(c.G,{columnsWidthLSKey:h.t5,data:q||[],columns:B,settings:n.LE,sortOrder:E,onSort:D,emptyDataMessage:(0,C.Z)("empty.default"),rowClassName:w.U}):(0,T.jsx)(u.Q,{name:"thumbsUp",width:"200"}):null})]})};var I=a(97379);const F=e=>{let{parentRef:t,...a}=e;const[s]=(0,r.yu)(n.Qy);return s?(0,T.jsx)(I.m,{parentRef:t,...a}):(0,T.jsx)(S,{...a})}},97379:(e,t,a)=>{a.d(t,{m:()=>A});var n=a(34706),r=a(15327),s=a(48653),o=a(74640),l=a(60918),i=a(39202),d=a(88366),u=a(10226),c=a(55842),p=a(97485),h=a(96183),m=a(78326),g=a(18258),b=a(73759),y=a(91538),v=a(25747),x=a(16124),f=a(89991),j=a(83023);const C=async e=>{const{type:t="any",storage:a=!1,tablets:n=!0,limit:r,offset:s,sortParams:o,filters:i,columnsIds:d}=e,{sortOrder:u,columnId:c}=null!==o&&void 0!==o?o:{},{path:p,database:m,searchValue:g,problemFilter:b,uptimeFilter:y,filterGroup:v,filterGroupBy:C}=null!==i&&void 0!==i?i:{},w=(0,l.Gd)(c),N=w?(0,f.A)(w,u):void 0,T=(0,j.w)(d,l.WN),S=await window.api.getNodes({type:t,storage:a,tablets:n,limit:r,offset:s,sort:N,path:p,database:m,filter:g,problems_only:(0,h.eV)(b),uptime:(0,h.RW)(y),filter_group:v,filter_group_by:C,fieldsRequired:T}),I=(0,x.n)(S);return{data:I.Nodes||[],found:I.FoundNodes||0,total:I.TotalNodes||0}};var w=a(54162),N=a(81991),T=a(10161);function S(e){let{path:t,database:a,searchValue:r,problemFilter:s,uptimeFilter:o,filterGroup:i,filterGroupBy:d,columns:u,parentRef:c,renderControls:p,initialEntitiesCount:m}=e;const g=n.useMemo((()=>({path:t,database:a,searchValue:r,problemFilter:s,uptimeFilter:o,filterGroup:i,filterGroupBy:d})),[t,a,r,s,o,i,d]);return(0,T.jsx)(v.WQ,{columnsWidthLSKey:l.t5,parentRef:c,columns:u,fetchData:C,limit:50,initialEntitiesCount:m,renderControls:p,renderErrorMessage:N.i,renderEmptyDataMessage:()=>"All"!==s||o!==h.Uu.All?(0,T.jsx)(y.Q,{name:"thumbsUp",width:"200"}):(0,w.Z)("empty.default"),getRowClassName:N.U,filters:g,tableName:"nodes"})}var I=a(92256),F=a(35283),P=a(24837);a(62545);function A(e){let{path:t,database:a,parentRef:r,additionalNodesProps:o,columns:l=(0,I.g)({database:a,getNodeRef:null===o||void 0===o?void 0:o.getNodeRef}),defaultColumnsIds:d=F.P3,requiredColumnsIds:c=F.nn,selectedColumnsKey:p=F.pM,groupByParams:m=F.VP}=e;const{uptimeFilter:g,groupByParam:b,handleUptimeFilterChange:y}=(0,P.u)(m),{problemFilter:v,handleProblemFilterChange:x}=(0,u.t)(),f=(0,i.rU)(),j=(0,i.th)();n.useEffect((()=>{!j||"All"===v&&g===h.Uu.All||(x("All"),y(h.Uu.All))}),[x,y,v,g,j]);return(0,T.jsx)(s.s,{loading:!f,children:j&&b?(0,T.jsx)(_,{path:t,database:a,parentRef:r,columns:l,defaultColumnsIds:d,requiredColumnsIds:c,selectedColumnsKey:p,groupByParams:m}):(0,T.jsx)(B,{path:t,database:a,parentRef:r,columns:l,defaultColumnsIds:d,requiredColumnsIds:c,selectedColumnsKey:p,groupByParams:m})})}function B(e){let{path:t,database:a,parentRef:n,columns:r,defaultColumnsIds:s,requiredColumnsIds:o,selectedColumnsKey:d,groupByParams:c}=e;const{searchValue:h,uptimeFilter:m}=(0,P.u)(c),{problemFilter:g}=(0,u.t)(),y=(0,i.th)(),{columnsToShow:v,columnsToSelect:x,setColumns:f}=(0,p.N)(r,d,l.Pr,s,o);return(0,T.jsx)(S,{path:t,database:a,searchValue:h,problemFilter:g,uptimeFilter:m,columns:v,parentRef:n,renderControls:e=>{let{totalEntities:t,foundEntities:a,inited:n}=e;return(0,T.jsx)(b.m,{withGroupBySelect:y,groupByParams:c,columnsToSelect:x,handleSelectedColumnsUpdate:f,entitiesCountCurrent:a,entitiesCountTotal:t,entitiesLoading:!n})}})}function _(e){let{path:t,database:a,parentRef:n,columns:s,defaultColumnsIds:i,requiredColumnsIds:u,selectedColumnsKey:y,groupByParams:v}=e;const{searchValue:x,groupByParam:f}=(0,P.u)(v),[j]=(0,c.Rj)(),{columnsToShow:C,columnsToSelect:I,setColumns:F}=(0,p.N)(s,y,l.Pr,i,u),{currentData:A,isFetching:B,error:_}=d.k.useGetNodesQuery({path:t,database:a,filter:x,group:f,limit:0},{pollingInterval:j}),k=void 0===A&&B,{NodeGroups:R,FoundNodes:G=0,TotalNodes:U=0}=A||{},{expandedGroups:V,setIsGroupExpanded:L}=(0,g.r)(R);return(0,T.jsxs)(o.l,{children:[(0,T.jsx)(o.l.Controls,{children:(0,T.jsx)(b.m,{withGroupBySelect:!0,groupByParams:v,columnsToSelect:I,handleSelectedColumnsUpdate:F,entitiesCountCurrent:G,entitiesCountTotal:U,entitiesLoading:k})}),_?(0,T.jsx)(r.V,{error:_}):null,(0,T.jsx)(o.l.Table,{loading:k,className:(0,N.b)("groups-wrapper"),children:null!==R&&void 0!==R&&R.length?R.map((e=>{let{name:r,count:s}=e;const o=V[r];return(0,T.jsx)(m.G,{title:r,count:s,entityName:(0,w.Z)("nodes"),expanded:o,onIsExpandedChange:L,children:(0,T.jsx)(S,{path:t,database:a,searchValue:x,problemFilter:"All",uptimeFilter:h.Uu.All,filterGroup:r,filterGroupBy:f,initialEntitiesCount:s,columns:C,parentRef:n})},r)})):(0,w.Z)("no-nodes-groups")})]})}},92256:(e,t,a)=>{a.d(t,{g:()=>s});var n=a(2387),r=a(60918);function s(e){return[(0,n.A6)(),(0,n.Up)(e),(0,n.iJ)(),(0,n.EF)(),(0,n.KO)(),(0,n.Zi)(),(0,n.VQ)(),(0,n.rh)(),(0,n.n2)(),(0,n.o9)(),(0,n.eb)(),(0,n.gs)(),(0,n.TX)(e)].map((e=>({...e,sortable:(0,r.Ke)(e.name)})))}},35283:(e,t,a)=>{a.d(t,{P3:()=>s,VP:()=>l,WG:()=>u,nn:()=>o,pM:()=>r,yR:()=>d});var n=a(60918);const r="nodesTableSelectedColumns",s=["NodeId","Host","DC","Rack","Version","Uptime","Memory","Pools","LoadAverage","Tablets"],o=["NodeId"],l=["SystemState","Host","DC","Rack","Database","Version","Uptime"];function i(e,t){return t?e:e.filter((e=>"SystemState"!==e))}function d(e,t){return i(e,t).map((e=>({value:e,content:(0,n.ws)(e)})))}function u(e,t,a){return i(t,a).find((t=>t===e))}},54162:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(37711);const r=JSON.parse('{"nodes":"Nodes","empty.default":"No such nodes","no-nodes-groups":"No nodes groups","controls_search-placeholder":"Host name","controls_group-by-placeholder":"Group by:"}'),s=(0,n.wZ)("ydb-nodes",{en:r})},81991:(e,t,a)=>{a.d(t,{U:()=>d,b:()=>i,i:()=>u});var n=a(71037),r=a(15327),s=a(99294),o=a(96183),l=a(10161);const i=(0,s.cn)("ydb-nodes"),d=e=>i("node",{unavailable:(0,o.TA)(e)}),u=e=>e&&403===e.status?(0,l.jsx)(n.J,{position:"left"}):(0,l.jsx)(r.V,{error:e})},24837:(e,t,a)=>{a.d(t,{u:()=>l});var n=a(99495),r=a(39202),s=a(96183),o=a(35283);function l(e){var t;const[a,l]=(0,n.useQueryParams)({uptimeFilter:n.StringParam,search:n.StringParam,nodesGroupBy:n.StringParam}),i=s.U8.parse(a.uptimeFilter),d=null!==(t=a.search)&&void 0!==t?t:"",u=(0,r.Zl)();return{uptimeFilter:i,searchValue:d,groupByParam:(0,o.WG)(a.nodesGroupBy,null!==e&&void 0!==e?e:[],u),handleSearchQueryChange:e=>{l({search:e||void 0},"replaceIn")},handleUptimeFilterChange:e=>{l({uptimeFilter:e},"replaceIn")},handleGroupByParamChange:e=>{l({nodesGroupBy:e},"replaceIn")}}}},72427:(e,t,a)=>{a.d(t,{O:()=>S});var n=a(42568),r=a(23795),s=a(14561),o=a(55982),l=a(62508),i=a(67653),d=a(74116),u=a(22877),c=a(76217),p=a(59907),h=a(65e3),m=a(6215),g=a(9038),b=a(27810),y=a(38980),v=a(55842),x=a(75544),f=a(37711);const j=JSON.parse('{"noTabletsData":"No tablets data","Type":"Type","Tablet":"Tablet","State":"State","Node ID":"Node ID","Node FQDN":"Node FQDN","Generation":"Generation","Uptime":"Uptime","dialog.kill-header":"Restart tablet","dialog.kill-text":"The tablet will be restarted. Do you want to proceed?","controls.kill-not-allowed":"You don\'t have enough rights to restart tablet"}'),C=(0,f.wZ)("ydb-tablets",{en:j});var w=a(10161);function N(e){let{database:t}=e;return[{name:"Type",width:150,get header(){return C("Type")},render:e=>{let{row:t}=e;const a=!1===t.Leader;return(0,w.jsxs)("span",{children:[t.Type," ",a?(0,w.jsx)(r.x,{color:"secondary",children:"follower"}):""]})}},{name:"TabletId",width:220,get header(){return C("Tablet")},render:e=>{let{row:a}=e;return a.TabletId?(0,w.jsx)(c.P,{tabletId:a.TabletId,database:t}):b.jX}},{name:"State",get header(){return C("State")},render:e=>{let{row:t}=e;return(0,w.jsx)(p.f,{state:t.State})}},{name:"NodeId",get header(){return C("Node ID")},render:e=>{let{row:t}=e;const a=void 0===t.NodeId?void 0:(0,x.a3)(t.NodeId);return(0,w.jsx)(i.h,{to:a,children:t.NodeId})},align:"right"},{name:"fqdn",get header(){return C("Node FQDN")},render:e=>{let{row:t}=e;return t.fqdn?(0,w.jsx)(l.A,{name:t.fqdn,showStatus:!1,hasClipboardButton:!0}):(0,w.jsx)("span",{children:"\u2014"})}},{name:"Generation",get header(){return C("Generation")},align:"right"},{name:"Uptime",get header(){return C("Uptime")},render:e=>{let{row:t}=e;return(0,y.fG)(t.ChangeTime)},sortAccessor:e=>-Number(e.ChangeTime),align:"right"},{name:"Actions",sortable:!1,resizeable:!1,header:"",render:e=>{let{row:t}=e;return(0,w.jsx)(T,{...t})}}]}function T(e){const t=e.State===g.g.Stopped,a=(0,v.ix)(h.VH),[r]=m._.useKillTabletMutation(),l=e.TabletId;return l?(0,w.jsx)(o.U,{buttonView:"outlined",buttonTitle:C("dialog.kill-header"),dialogHeader:C("dialog.kill-header"),dialogText:C("dialog.kill-text"),onConfirmAction:()=>r({id:l}).unwrap(),buttonDisabled:t||!a,withPopover:!0,popoverContent:C(a?"dialog.kill-header":"controls.kill-not-allowed"),popoverPlacement:["right","auto"],popoverDisabled:!1,children:(0,w.jsx)(s.J,{data:n.Z})}):null}function S(e){let{database:t,tablets:a,className:n,loading:r}=e;return r?(0,w.jsx)(u.h,{}):(0,w.jsx)(d.G,{wrapperClassName:n,columns:N({database:t}),data:a,settings:b.LE,emptyDataMessage:C("noTabletsData")})}},58231:(e,t,a)=>{a.d(t,{I:()=>S});var n=a(34706),r=a(29254),s=a(96334),o=a(15268),l=a(3948),i=a(72616),d=a(81778),u=a(14561),c=a(17823),p=a(99294),h=a(37711);const m=JSON.parse('{"default_collapse_label":"Show less","default_expand_label":"Show more","chars_count":[" ({{count}} symbol)"," ({{count}} symbols)"," ({{count}} symbols)"," ({{count}} symbols)"]}'),g=JSON.parse('{"default_collapse_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435","default_expand_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451","chars_count":[" ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b)"," ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b\u0430)"," ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)"," ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)"]}'),b=(0,h.wZ)("ydb-shorty-string",{ru:g,en:m});var y=a(10161);const v=(0,p.cn)("kv-shorty-string");function x(e){let{value:t="",limit:a=200,strict:r=!1,displayLength:s=!0,render:o=(e=>e),onToggle:l,expandLabel:i=b("default_expand_label"),collapseLabel:d=b("default_collapse_label")}=e;const[u,p]=n.useState(!1),h=(u?d:i)+(s&&!u?b("chars_count",{count:t.length}):""),m=t.length>a+(r?0:h.length),g=u||!m?t:t.slice(0,a-4)+"\xa0...";return(0,y.jsxs)("div",{className:v(),children:[o(g),m?(0,y.jsx)(c.r,{className:v("toggle"),href:"#",onClick:e=>{e.stopPropagation(),e.preventDefault(),p((e=>!e)),null===l||void 0===l||l()},children:h}):null]})}var f=a(73689);const j=["S_FATAL","S_ERROR","S_WARNING","S_INFO"];function C(e){return function(e){return!!e&&void 0!==j[e]}(e)?j[e]:"S_INFO"}const w=(0,p.cn)("kv-result-issues"),N=(0,p.cn)("kv-issues"),T=(0,p.cn)("kv-issue");function S(e){let{data:t,hideSeverity:a}=e;const[r,s]=n.useState(!1),o="string"===typeof t||null===t||void 0===t?void 0:t.issues,l=Array.isArray(o)&&o.length>0;return(0,y.jsxs)("div",{className:w(),children:[(0,y.jsxs)("div",{className:w("error-message"),children:[(()=>{let e;if("string"===typeof t)e=t;else{var r,s;const o=C(null===t||void 0===t||null===(r=t.error)||void 0===r?void 0:r.severity);e=(0,y.jsxs)(n.Fragment,{children:[a?null:(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(_,{severity:o})," "]}),(0,y.jsx)("span",{className:w("error-message-text"),children:null===t||void 0===t||null===(s=t.error)||void 0===s?void 0:s.message})]})}return e})(),l&&(0,y.jsx)(i.z,{view:"normal",onClick:()=>s(!r),children:r?"Hide details":"Show details"})]}),l&&r&&(0,y.jsx)(I,{hideSeverity:a,issues:o})]})}function I(e){let{issues:t,hideSeverity:a}=e;const n=null===t||void 0===t?void 0:t.reduce(((e,t)=>{var a;const n=null!==(a=t.severity)&&void 0!==a?a:10;return Math.min(e,n)}),10);return(0,y.jsx)("div",{className:N(null),children:null===t||void 0===t?void 0:t.map(((e,t)=>(0,y.jsx)(F,{hideSeverity:a,issue:e,expanded:e===n},t)))})}function F(e){let{issue:t,hideSeverity:a,level:r=0}=e;const[s,o]=n.useState(!0),l=C(t.severity),u=function(e){const{position:t}=e;if("object"!==typeof t||null===t||!(0,f.kE)(t.row))return"";const{row:a,column:n}=t;return(0,f.kE)(n)?`${a}:${n}`:`line ${a}`}(t),c=t.issues,p=Array.isArray(c)&&c.length>0,h=s?"bottom":"right";return(0,y.jsxs)("div",{className:T({leaf:!p,"has-issues":p}),children:[(0,y.jsxs)("div",{className:T("line"),children:[p&&(0,y.jsx)(i.z,{view:"flat-secondary",onClick:()=>o(!s),className:T("arrow-toggle"),children:(0,y.jsx)(d.F,{direction:h,size:16})}),a?null:(0,y.jsx)(_,{severity:l}),(0,y.jsxs)("span",{className:T("message"),children:[u&&(0,y.jsx)("span",{className:T("place-text"),title:"Position",children:u}),(0,y.jsx)("div",{className:T("message-text"),children:(0,y.jsx)(x,{value:t.message,expandLabel:"Show full message"})})]}),t.issue_code?(0,y.jsxs)("span",{className:T("code"),children:["Code: ",t.issue_code]}):null]}),p&&s&&(0,y.jsx)("div",{className:T("issues"),children:(0,y.jsx)(P,{issues:c,level:r+1,expanded:s})})]})}function P(e){const{issues:t,level:a,expanded:n}=e;return(0,y.jsx)("div",{className:T("list"),children:t.map(((e,t)=>(0,y.jsx)(F,{issue:e,level:a,expanded:n},t)))})}const A={S_INFO:r.Z,S_WARNING:s.Z,S_ERROR:o.Z,S_FATAL:l.Z},B=(0,p.cn)("yql-issue-severity");function _(e){let{severity:t}=e;const a=t.slice(2).toLowerCase();return(0,y.jsxs)("span",{className:B({severity:a}),children:[(0,y.jsx)(u.J,{className:B("icon"),data:A[t]}),(0,y.jsx)("span",{className:B("title"),children:a})]})}},88366:(e,t,a)=>{a.d(t,{k:()=>s});var n=a(78759),r=a(16124);const s=n.h.injectEndpoints({endpoints:e=>({getNodes:e.query({queryFn:async(e,t)=>{let{signal:a}=t;try{const t=await window.api.getNodes({type:"any",storage:!1,tablets:!0,...e},{signal:a});return{data:(0,r.n)(t)}}catch(n){return{error:n}}},providesTags:["All"]})}),overrideExisting:"throw"})},10226:(e,t,a)=>{a.d(t,{t:()=>s});var n=a(55842),r=a(32341);function s(){const e=(0,n.zL)();return{problemFilter:(0,n.ix)(r.qz),handleProblemFilterChange:t=>{e((0,r.M6)(t))}}}},6215:(e,t,a)=>{a.d(t,{_:()=>r});var n=a(96183);const r=a(78759).h.injectEndpoints({endpoints:e=>({getTablet:e.query({queryFn:async(e,t)=>{let{id:a,database:r}=e,{signal:s}=t;try{const[e,t,o]=await Promise.all([window.api.getTablet({id:a,database:r},{signal:s}),window.api.getTabletHistory({id:a,database:r},{signal:s}),window.api.getNodesList({signal:s})]),l=(0,n.Xs)(o),i=Object.keys(t).reduce(((e,a)=>{var n;const r=null===(n=t[a])||void 0===n?void 0:n.TabletStateInfo;if(r&&r.length){const t=r.find((e=>e.Leader))||r[0],{ChangeTime:n,Generation:s,State:o,Leader:i,FollowerId:d}=t,u=l&&a?l.get(Number(a)):void 0;"Dead"!==o&&e.push({nodeId:a,generation:s,changeTime:n,state:o,leader:i,followerId:d,fqdn:u})}return e}),[]),{TabletStateInfo:d=[]}=e,[u={}]=d,{TabletId:c}=u;return{data:{id:c,data:u,history:i}}}catch(o){return{error:o}}},providesTags:(e,t,a)=>["All",{type:"Tablet",id:a.id}]}),getTabletDescribe:e.query({queryFn:async(e,t)=>{let{tenantId:a}=e,{signal:n}=t;try{const e=await window.api.getTabletDescribe(a,{signal:n}),{SchemeShard:t,PathId:r}=a;return{data:(null===e||void 0===e?void 0:e.Path)||`${t}:${r}`}}catch(r){return{error:r}}},providesTags:["All"]}),getAdvancedTableInfo:e.query({queryFn:async(e,t)=>{let{id:a,hiveId:n}=e,{signal:r}=t;try{return{data:await window.api.getTabletFromHive({id:a,hiveId:n},{signal:r})}}catch(s){return{error:s}}},providesTags:(e,t,a)=>["All",{type:"Tablet",id:a.id}]}),killTablet:e.mutation({queryFn:async e=>{let{id:t}=e;try{return{data:await window.api.killTablet(t)}}catch(a){return{error:a}}},invalidatesTags:(e,t,a)=>[{type:"Tablet",id:a.id},{type:"Tablet",id:"LIST"}]}),stopTablet:e.mutation({queryFn:async e=>{let{id:t,hiveId:a}=e;try{return{data:await window.api.stopTablet(t,a)}}catch(n){return{error:n}}},invalidatesTags:(e,t,a)=>[{type:"Tablet",id:a.id},{type:"Tablet",id:"LIST"}]}),resumeTablet:e.mutation({queryFn:async e=>{let{id:t,hiveId:a}=e;try{return{data:await window.api.resumeTablet(t,a)}}catch(n){return{error:n}}},invalidatesTags:(e,t,a)=>[{type:"Tablet",id:a.id},{type:"Tablet",id:"LIST"}]})}),overrideExisting:"throw"})},62545:()=>{}}]);