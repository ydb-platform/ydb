"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[6382],{50422:(e,s,t)=>{t.d(s,{q:()=>g});var r=t(84317),a=t(17176),o=t(2418),n=t(905),i=t(24362),l=t(17096),d=t(30817);const u=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),c=(0,d.wZ)("ydb-diagnostics-autorefresh-control",{en:u});var p=t(75859);const m=(0,i.cn)("auto-refresh-control");function g(e){let{className:s}=e;const t=(0,l.zL)(),[i,d]=(0,l.Rj)();return(0,p.jsxs)("div",{className:m(null,s),children:[(0,p.jsx)(a.z,{view:"flat",onClick:()=>{t(n.h.util.invalidateTags(["All"]))},extraProps:{"aria-label":c("Refresh")},children:(0,p.jsx)(a.z.Icon,{children:(0,p.jsx)(r.Z,{})})}),(0,p.jsxs)(o.P,{value:[String(i)],onUpdate:e=>{d(Number(e))},width:85,children:[(0,p.jsx)(o.P.Option,{value:"0",children:c("None")}),(0,p.jsx)(o.P.Option,{value:"15000",children:c("15 sec")}),(0,p.jsx)(o.P.Option,{value:"60000",children:c("1 min")}),(0,p.jsx)(o.P.Option,{value:"120000",children:c("2 min")}),(0,p.jsx)(o.P.Option,{value:"300000",children:c("5 min")})]})]})}},99683:(e,s,t)=>{t.d(s,{l:()=>i});var r=t(68330),a=t(24362),o=t(75859);const n=(0,a.cn)("ydb-cell-with-popover");function i(e){let{children:s,className:t,wrapperClassName:a,...i}=e;return(0,o.jsx)("div",{className:n(null,a),children:(0,o.jsx)(r.J,{className:n("popover",t),...i,children:s})})}},90861:(e,s,t)=>{t.d(s,{m:()=>c});var r=t(27320),a=t(17176),o=t(11050),n=t(81434),i=t(24362),l=t(75859);const d=(0,i.cn)("clipboard-button");function u(e){let{className:s,status:t,title:n,...i}=e;return(0,l.jsx)(r.u,{content:"success"===t?"Copied!":n||"Copy",placement:"bottom-start",children:(0,l.jsx)(a.z,{...i,className:d(null,s),children:(0,l.jsx)(a.z.Icon,{children:(0,l.jsx)(o.K,{status:t,size:16})})})})}function c(e){let{text:s,...t}=e;return(0,l.jsx)(n.h,{text:s,timeout:1e3,children:e=>(0,l.jsx)(u,{...t,status:e})})}},41919:(e,s,t)=>{t.d(s,{Q:()=>d});var r=t(39683),a=t(17176),o=t(88776),n=t(24362),i=t(75859);const l=(0,n.cn)("developer-ui-link-button");function d(e){let{href:s,visible:t=!1,className:n}=e;return(0,i.jsx)(a.z,{size:"s",href:s,className:l({visible:t},n),target:"_blank",children:(0,i.jsx)(o.J,{data:r.Z})})}},1796:(e,s,t)=>{t.d(s,{p:()=>d});t(68963);var r=t(24362),a=t(52317),o=t(92666),n=t(17096),i=t(75859);const l=(0,r.cn)("storage-disk-progress-bar");function d(e){let{diskAllocatedPercent:s=-1,severity:t,compact:r,faded:d,inactive:u,empty:c,content:p,className:m}=e;const[g]=(0,n.yu)(a.yT),h={inverted:g,compact:r,faded:d,empty:c,inactive:u},v=void 0!==t&&(0,o.b2)(t);v&&(h[v.toLocaleLowerCase()]=!0);return(0,i.jsxs)("div",{className:l(h,m),role:"meter","aria-label":"Disk allocated space","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":s,children:[(()=>{if(r)return(0,i.jsx)("div",{className:l("fill-bar",h),style:{width:"100%"}});const e=g?100-s:s;return s>=0?(0,i.jsx)("div",{className:l("fill-bar",h),style:{width:`${e}%`}}):null})(),p||(!r&&s>=0?(0,i.jsx)("div",{className:l("title"),children:`${Math.round(s)}%`}):null)]})}},49201:(e,s,t)=>{t.d(s,{C:()=>l});var r=t(14979),a=t(24362);const o=(0,t(30817).wZ)("ydb-entities-count",{ru:{of:"\u0438\u0437"},en:{of:"of"}});var n=t(75859);const i=(0,a.cn)("ydb-entities-count"),l=e=>{let{total:s,current:t,label:a,loading:l,className:d}=e,u="";return a&&(u+=`${a}: `),l?u+="...":(u+=`${t}`,s&&Number(s)!==Number(t)&&(u+=` ${o("of")} ${s}`)),(0,n.jsx)(r._,{theme:"info",size:"m",className:i(null,d),children:u})}},69214:(e,s,t)=>{t.d(s,{A:()=>c});var r=t(86017),a=t(75850),o=t(24362),n=t(90861),i=t(68036),l=t(98366),d=t(75859);const u=(0,o.cn)("entity-status");function c(e){let{status:s=a.K.Grey,name:t="",label:o,path:c,iconPath:p,size:m="s",mode:g="color",showStatus:h=!0,externalLink:v=!1,withLeftTrim:N=!1,hasClipboardButton:k,clipboardButtonAlwaysVisible:b=!1,className:y,additionalControls:D}=e;const S=()=>h?(0,d.jsx)(l.J,{className:u("icon"),status:s,size:m,mode:g}):null;return(0,d.jsxs)("div",{className:u(null,y),title:t,children:[p?(w=p,(0,d.jsx)(r.r,{target:"_blank",href:w,children:S()})):S(),o&&(0,d.jsx)("span",{title:o,className:u("label",{size:m,state:s.toLowerCase()}),children:o}),(0,d.jsx)("span",{className:u("link",{"with-left-trim":N}),children:c?v?(0,d.jsx)(r.r,{className:u("name"),href:c,children:t}):(0,d.jsx)(i.h,{className:u("name"),to:c,children:t}):t&&(0,d.jsx)("span",{className:u("name"),children:t})}),k&&(0,d.jsx)(n.m,{text:t,size:"s",className:u("clipboard-button",{visible:b})}),D&&(0,d.jsx)("span",{className:u("additional-controls "),children:D})]});var w}},89778:(e,s,t)=>{t.d(s,{k:()=>p});var r=t(10502),a=t(92398),o=t(48169),n=t(51688),i=t(99683),l=t(41919),d=t(69214),u=t(27506),c=t(75859);const p=e=>{let{node:s,getNodeRef:t,database:p}=e;if(!s.Host)return(0,c.jsx)("span",{children:"\u2014"});const m=!(0,n.TA)(s);let g;t?g=t(s)+"internal":s.NodeId&&(g=(0,o.wq)(s.NodeId)+"internal");const h=m?(0,a.a3)(s.NodeId,{tenantName:null!==p&&void 0!==p?p:s.TenantName}):void 0,v=g?(0,c.jsx)(l.Q,{href:g}):null;return(0,c.jsx)(i.l,{disabled:!m,content:(0,c.jsx)(u.bP,{data:s}),placement:["top","bottom"],behavior:r.x.Immediate,children:(0,c.jsx)(d.A,{name:s.Host,status:s.SystemState,path:h,hasClipboardButton:!0,additionalControls:v})})}},40073:(e,s,t)=>{t.d(s,{J:()=>k,b:()=>N});var r=t(68963),a=t(44920),o=t(99337),n=t(75850),i=t(5922),l=t(24362),d=t(52317),u=t(92666),c=t(17096),p=t(55850),m=t(62206),g=t(75859);const h=(0,l.cn)("pdisk-storage-popup"),v=[n.K.Orange,n.K.Red,n.K.Yellow],N=(e,s)=>{var t;const{AvailableSize:r,TotalSize:a,State:o,PDiskId:n,NodeId:i,Path:l,Realtime:c,Type:m,Device:g}=e,h=[{label:"PDisk",value:null!==(t=(0,u.CH)(i,n))&&void 0!==t?t:d.jX},{label:"State",value:o||"not available"},{label:"Type",value:m||"unknown"}];return i&&h.push({label:"Node Id",value:i}),s&&h.push({label:"Host",value:s}),l&&h.push({label:"Path",value:l}),h.push({label:"Available",value:`${(0,p.Uz)(r)} of ${(0,p.Uz)(a)}`}),c&&v.includes(c)&&h.push({label:"Realtime",value:c}),g&&v.includes(g)&&h.push({label:"Device",value:g}),h},k=e=>{let{data:s,...t}=e;const n=(0,c.ix)(o.s),l=(0,i.D)(s.NodeId)?null===n||void 0===n?void 0:n.get(s.NodeId):void 0,d=r.useMemo((()=>N(s,l)),[s,l]);return(0,g.jsx)(a.G,{contentClassName:h(),placement:["top","bottom"],hasArrow:!0,offset:[0,12],...t,children:(0,g.jsx)(m._P,{title:"PDisk",info:d,size:"s"})})}},67359:(e,s,t)=>{t.d(s,{y:()=>c});var r=t(56829),a=t(24362),o=t(34301),n=t(55850),i=t(75859);const l=(0,a.cn)("progress-viewer"),d=e=>(0,o.uf)((0,o.W0)(Number(e),2)),u=(e,s)=>[d(e),d(s)];function c(e){let{value:s,capacity:t,formatValues:a=u,percents:o,className:d,size:c="xs",colorizeProgress:p,inverseColorize:m,warningThreshold:g=60,dangerThreshold:h=80}=e;const v=(0,r.F)();let N=Math.round(parseFloat(String(s))/parseFloat(String(t))*100)||0;N=N>100?100:N;let k=s,b=t,y="/";o?(k=N+"%",b="",y=""):a&&([k,b]=a(Number(s),Number(t)));let D=m?"danger":"good";p&&(N>g&&N<=h?D="warning":N>h&&(D=m?"good":"danger"),(0,n.kE)(t)||(N=100));const S={width:N+"%"};return(0,n.kE)(s)?(0,i.jsxs)("div",{className:l({size:c,theme:v,status:D},d),children:[(0,i.jsx)("div",{className:l("line"),style:S}),(0,i.jsx)("span",{className:l("text"),children:(0,n.kE)(t)?`${k} ${y} ${b}`:k})]}):(0,i.jsx)("div",{className:`${l({size:c})} ${d} error`,children:"no data"})}},2098:(e,s,t)=>{t.d(s,{G:()=>d});var r=t(2639),a=t(19812),o=t(24362),n=t(89712),i=t(75859);const l=(0,o.cn)("ydb-resizeable-data-table");function d(e){let{columnsWidthLSKey:s,columns:t,settings:o,wrapperClassName:d,...u}=e;const[c,p]=(0,n.M)(s),m=(0,r.B)(t,c),g={...o,defaultResizeable:!0};return(0,i.jsx)("div",{className:l(null,d),children:(0,i.jsx)(a.ZP,{theme:"yandex-cloud",columns:m,onResize:p,settings:g,...u})})}},30629:(e,s,t)=>{t.d(s,{o:()=>l});var r=t(68963),a=t(77264),o=t(24362),n=t(75859);const i=(0,o.cn)("ydb-search"),l=e=>{let{onChange:s,value:t="",className:o,debounce:l=200,placeholder:d}=e;const[u,c]=r.useState(t),p=r.useRef();r.useEffect((()=>{c((e=>e!==t?t:e))}),[t]);return(0,n.jsx)(a.o,{hasClear:!0,autoFocus:!0,className:i(null,o),placeholder:d,value:u,onUpdate:e=>{c(e),window.clearTimeout(p.current),p.current=window.setTimeout((()=>{null===s||void 0===s||s(e)}),l)}})}},98366:(e,s,t)=>{t.d(s,{J:()=>p});var r=t(67585),a=t(57225),o=t(71586),n=t(88776),i=t(75850),l=t(24362),d=t(75859);const u=(0,l.cn)("ydb-status-icon"),c={[i.K.Blue]:r.Z,[i.K.Yellow]:a.Z,[i.K.Orange]:o.Z,[i.K.Red]:a.Z};function p(e){let{status:s=i.K.Grey,size:t="s",mode:r="color",className:a}=e;const o={state:s.toLowerCase(),size:t};return"icons"===r&&s in c?(0,d.jsx)(n.J,{className:u("status-icon",o,a),data:c[s]}):(0,d.jsx)("div",{className:u("status-color",o,a)})}},22692:(e,s,t)=>{t.d(s,{h:()=>l});var r=t(56711),a=t(24362),o=t(42587),n=t(75859);const i=(0,a.cn)("table-skeleton"),l=e=>{let{rows:s=2,delay:t=600,className:a}=e;const[l]=(0,o.$)(t);return(0,n.jsxs)("div",{className:i("wrapper",{hidden:!l},a),children:[(0,n.jsxs)("div",{className:i("row"),children:[(0,n.jsx)(r.O,{className:i("col-1")}),(0,n.jsx)(r.O,{className:i("col-2")}),(0,n.jsx)(r.O,{className:i("col-3")}),(0,n.jsx)(r.O,{className:i("col-4")}),(0,n.jsx)(r.O,{className:i("col-5")})]}),[...new Array(s)].map(((e,s)=>(0,n.jsx)("div",{className:i("row"),children:(0,n.jsx)(r.O,{className:i("col-full")})},`skeleton-row-${s}`)))]})}},47101:(e,s,t)=>{t.d(s,{l:()=>i});var r=t(24362),a=t(22692),o=t(75859);const n=(0,r.cn)("ydb-table-with-controls-layout"),i=e=>{let{children:s,className:t}=e;return(0,o.jsx)("div",{className:n(null,t),children:s})};i.Controls=function(e){let{children:s,className:t}=e;return(0,o.jsx)("div",{className:n("controls-wrapper"),children:(0,o.jsx)("div",{className:n("controls",t),children:s})})},i.Table=function(e){let{children:s,loading:t,className:r}=e;return t?(0,o.jsx)(a.h,{className:n("loader")}):(0,o.jsx)("div",{className:n("table",r),children:s})}},43989:(e,s,t)=>{t.d(s,{X:()=>n});var r=t(79734),a=t(51688),o=t(75859);const n=e=>{let{value:s,onChange:t,className:n}=e;return(0,o.jsxs)(r.E,{value:s,onUpdate:t,className:n,children:[(0,o.jsx)(r.E.Option,{value:a.Uu.All,children:a.qU[a.Uu.All]}),(0,o.jsx)(r.E.Option,{value:a.Uu.SmallUptime,children:a.qU[a.Uu.SmallUptime]})]})}},80816:(e,s,t)=>{t.d(s,{a:()=>i});var r=t(14979),a=t(24362),o=t(75859);const n=(0,a.cn)("ydb-usage-label");function i(e){let{value:s,overloadThreshold:t=90,theme:a,...i}=e;return(0,o.jsxs)(r._,{theme:a,className:n({overload:Number(s)>=t}),...i,children:[s||0,"%"]})}},79255:(e,s,t)=>{t.d(s,{c:()=>G});var r=t(34301),a=t(92666),o=t(68963),n=t(24362),i=t(75859);const l=(0,n.cn)("stack"),d=e=>{let{children:s,className:t}=e;return(0,i.jsx)("div",{className:l(null,t),children:o.Children.map(s,((e,s)=>o.isValidElement(e)?(0,i.jsx)("div",{className:l("layer"),style:{"--ydb-stack-level":s},children:e}):null))})};var u=t(92398),c=t(54665),p=t(17880),m=t(5922),g=t(1796),h=t(74170),v=t(44920),N=t(14979),k=t(99337),b=t(75850),y=t(52317),D=t(17096),S=t(55850),w=t(62206),x=t(40073);const I=(0,n.cn)("vdisk-storage-popup"),P=e=>{let{data:s,...t}=e;const n=(0,a.Iz)(s),l=o.useMemo((()=>n?(e=>{var s,t,a,o;const{VDiskId:n,VDiskState:i,SatisfactionRank:l,DiskSpace:d,FrontQueues:u,Replicated:c,UnsyncedVDisks:p,AllocatedSize:m,ReadThroughput:g,WriteThroughput:h,StoragePoolName:v}=e,N=[{label:"VDisk",value:(0,r.a2)(n)},{label:"State",value:null!==i&&void 0!==i?i:"not available"}];var k,y;return v&&N.push({label:"StoragePool",value:v}),l&&(null===(s=l.FreshRank)||void 0===s?void 0:s.Flag)!==b.K.Green&&N.push({label:"Fresh",value:null===(k=l.FreshRank)||void 0===k?void 0:k.Flag}),l&&(null===(t=l.LevelRank)||void 0===t?void 0:t.Flag)!==b.K.Green&&N.push({label:"Level",value:null===(y=l.LevelRank)||void 0===y?void 0:y.Flag}),l&&null!==(a=l.FreshRank)&&void 0!==a&&a.RankPercent&&N.push({label:"Fresh",value:l.FreshRank.RankPercent}),l&&null!==(o=l.LevelRank)&&void 0!==o&&o.RankPercent&&N.push({label:"Level",value:l.LevelRank.RankPercent}),d&&d!==b.K.Green&&N.push({label:"Space",value:d}),u&&u!==b.K.Green&&N.push({label:"FrontQueues",value:u}),c||N.push({label:"Replicated",value:"NO"}),p&&N.push({label:"UnsyncVDisks",value:p}),Number(m)&&N.push({label:"Allocated",value:(0,S.Uz)(m)}),Number(g)&&N.push({label:"Read",value:(0,S.Qt)(g)}),Number(h)&&N.push({label:"Write",value:(0,S.Qt)(h)}),N})(s):(e=>{const{NodeId:s,PDiskId:t,VSlotId:r,StoragePoolName:a}=e,o=[{label:"State",value:"not available"}];return a&&o.push({label:"StoragePool",value:a}),o.push({label:"NodeId",value:null!==s&&void 0!==s?s:y.jX},{label:"PDiskId",value:null!==t&&void 0!==t?t:y.jX},{label:"VSlotId",value:null!==r&&void 0!==r?r:y.jX}),o})(s)),[s,n]),d=(0,D.ix)(k.s),u=(0,m.D)(s.NodeId)?null===d||void 0===d?void 0:d.get(s.NodeId):void 0,c=o.useMemo((()=>n&&s.PDisk&&(0,x.b)(s.PDisk,u)),[s,u,n]);return(0,i.jsxs)(v.G,{contentClassName:I(),placement:["top","bottom"],hasArrow:!0,offset:[0,12],...t,children:[s.DonorMode&&(0,i.jsx)(N._,{className:I("donor-label"),children:"Donor"}),(0,i.jsx)(w._P,{title:"VDisk",info:l,size:"s"}),c&&(0,i.jsx)(w._P,{title:"PDisk",info:c,size:"s"})]})},f=(0,n.cn)("ydb-vdisk-component"),j=e=>{let{data:s={},compact:t,inactive:n,showPopup:l,onShowPopup:d,onHidePopup:v,progressBarClassName:N}=e;const k=(0,a.Iz)(s),b=(0,p.X_)(),[y,D]=o.useState(!1),S=o.useRef(null);let w;return b&&(0,m.D)(s.VDiskSlotId)&&(0,m.D)(s.PDiskId)&&(0,m.D)(s.NodeId)?w=(0,c.By)(s.VDiskSlotId,s.PDiskId,s.NodeId):(0,m.D)(s.NodeId)&&k&&(w=(0,c.ax)(c.ZP.node,{id:s.NodeId,activeTab:u.pV},{pdiskId:s.PDiskId,vdiskId:(0,r.a2)(s.VDiskId)})),(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)("div",{className:f(),ref:S,onMouseEnter:()=>{D(!0),null===d||void 0===d||d()},onMouseLeave:()=>{D(!1),null===v||void 0===v||v()},children:(0,i.jsx)(h.h,{to:w,className:f("content"),children:(0,i.jsx)(g.p,{diskAllocatedPercent:s.AllocatedPercent,severity:s.Severity,compact:t,inactive:n,className:N})})}),(0,i.jsx)(P,{data:s,anchorRef:S,open:y||l})]})};function G(e){let{data:s,className:t,stackClassName:o,...n}=e;const l=null===s||void 0===s?void 0:s.Donors,u=l&&l.length>0?(0,i.jsxs)(d,{className:o,children:[(0,i.jsx)(j,{data:s,...n}),l.map((e=>{const s=(0,a.Iz)(e);return(0,i.jsx)(j,{data:e,...n},(0,r.a2)(s?e.VDiskId:e))}))]}):(0,i.jsx)(j,{data:s,...n});return(0,i.jsx)("div",{className:t,children:u})}},54997:(e,s,t)=>{t.d(s,{P3:()=>d,xv:()=>l,Pr:()=>c,t5:()=>n,pM:()=>i,nn:()=>u});var r=t(30817);const a=JSON.parse('{"node-id":"Node Id","host":"Host","node-name":"Node Name","dc":"DC","rack":"Rack","version":"Version","uptime":"Uptime","memory":"Memory","cpu":"CPU","tablets":"Tablets","load-average":"Load Average","load":"Load","process":"Process","caches":"Caches","sessions":"Sessions"}'),o=(0,r.wZ)("ydb-nodes-columns",{en:a}),n="nodesTableColumnsWidth",i="nodesTableSelectedColumns",l={NodeId:"NodeId",Host:"Host",NodeName:"NodeName",DC:"DC",Rack:"Rack",Version:"Version",Uptime:"Uptime",Memory:"Memory",CPU:"CPU",LoadAverage:"LoadAverage",Tablets:"Tablets",TopNodesLoadAverage:"TopNodesLoadAverage",TopNodesMemory:"TopNodesMemory",SharedCacheUsage:"SharedCacheUsage",TotalSessions:"TotalSessions"},d=["NodeId","Host","DC","Rack","Version","Uptime","Memory","CPU","LoadAverage","Tablets"],u=["NodeId"],c={get NodeId(){return o("node-id")},get Host(){return o("host")},get NodeName(){return o("node-name")},get DC(){return o("dc")},get Rack(){return o("rack")},get Version(){return o("version")},get Uptime(){return o("uptime")},get Memory(){return o("memory")},get CPU(){return o("cpu")},get LoadAverage(){return o("load-average")},get Tablets(){return o("tablets")},get TopNodesLoadAverage(){return o("load")},get TopNodesMemory(){return o("process")},get SharedCacheUsage(){return o("caches")},get TotalSessions(){return o("sessions")}}},59625:(e,s,t)=>{t.d(s,{y:()=>c});var r=t(17176),a=t(79023),o=t(56350),n=t(30817);const i=JSON.parse('{"default_message":"Everything is fine!","default_button_label":"Show All"}'),l=JSON.parse('{"default_message":"\u0412\u0441\u0451 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435!","default_button_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}'),d=(0,n.wZ)("ydb-storage-empty-filter",{ru:l,en:i});var u=t(75859);const c=e=>{let{title:s,message:t=d("default_message"),showAll:n=d("default_button_label"),onShowAll:i}=e;return(0,u.jsx)(a.u,{image:(0,u.jsx)(o.Q,{name:"thumbsUp"}),position:"left",title:s,description:t,actions:i&&[(0,u.jsx)(r.z,{onClick:i,children:n},"show-all")]})}},17931:(e,s,t)=>{t.d(s,{l:()=>N});var r=t(68963),a=t(1796),o=t(74170),n=t(40073),i=t(79255),l=t(54665),d=t(17880),u=t(5922),c=t(24362),p=t(34301),m=t(92398),g=t(10703),h=t(75859);const v=(0,c.cn)("pdisk-storage"),N=e=>{let{data:s={},vDisks:t,showPopup:c,onShowPopup:N,onHidePopup:k,className:b,progressBarClassName:y,viewContext:D}=e;const[S,w]=r.useState(!1),x=(0,d.X_)(),I=r.useRef(null),{NodeId:P,PDiskId:f}=s,j=(0,u.D)(P)&&(0,u.D)(f);let G;return j&&(G=(0,l.ax)(l.ZP.node,{id:P,activeTab:m.pV},{pdiskId:f})),j&&x&&(G=(0,l.ds)(f,P)),(0,h.jsxs)(r.Fragment,{children:[(0,h.jsxs)("div",{className:v(null,b),ref:I,children:[null!==t&&void 0!==t&&t.length?(0,h.jsx)("div",{className:v("vdisks"),children:t.map((e=>(0,h.jsx)("div",{className:v("vdisks-item"),style:{flexGrow:Number(e.AllocatedSize)||1},children:(0,h.jsx)(i.c,{data:e,inactive:!(0,g.XW)(e,D),stackClassName:v("donors-stack"),compact:!0})},(0,p.a2)(e.VDiskId))))}):null,(0,h.jsxs)(o.h,{to:G,className:v("content"),onMouseEnter:()=>{w(!0),null===N||void 0===N||N()},onMouseLeave:()=>{w(!1),null===k||void 0===k||k()},children:[(0,h.jsx)(a.p,{diskAllocatedPercent:s.AllocatedPercent,severity:s.Severity,className:y}),(0,h.jsx)("div",{className:v("media-type"),children:s.Type})]})]}),(0,h.jsx)(n.J,{data:s,anchorRef:I,open:S||c})]})}},57180:(e,s,t)=>{t.d(s,{K:()=>A});var r=t(68963),a=t(28492),o=t(1440),n=t(26688),i=t(47101),l=t(17880),d=t(77915),u=t(14223);const c=e=>e.trim().toLowerCase(),p=(e,s)=>{const t=c(s);return t?e.filter((e=>{var s,r;return(null===(s=e.NodeId)||void 0===s?void 0:s.toString().includes(t))||(null===(r=e.Host)||void 0===r?void 0:r.toLowerCase().includes(t))})):e},m=(e,s)=>{const t=c(s);return t?e.filter((e=>{var s,r;return(null===(s=e.PoolName)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(r=e.GroupId)||void 0===r?void 0:r.toString().includes(t))})):e};var g=t(33058),h=t(17096),v=t(41616),N=t(87255),k=t(2098),b=t(95829),y=t(52317),D=t(64782),S=t(51323),w=t(43817),x=t(75859);function I(e){let{data:s,columns:t,visibleEntities:r,onShowAll:a,sort:o,handleSort:n}=e;return s.length||r===b.G.all?(0,x.jsx)(k.G,{columnsWidthLSKey:S.Ty,data:s,columns:t,settings:y.LE,emptyDataMessage:(0,w.Z)("empty.default"),sortOrder:o,onSort:n},r):(0,x.jsx)(D.a,{onShowAll:a,visibleEntities:r})}var P=t(46393),f=t(51688),j=t(64682),G=t(55434),C=t(73790),U=t(20108);const E={...y.LE,dynamicRenderMinSize:51};function R(e){let{data:s,columns:t,visibleEntities:r,nodesUptimeFilter:a,sort:o,onShowAll:n,handleSort:i}=e;return s.length||r===b.G.all&&a===f.Uu.All?(0,x.jsx)(k.G,{columnsWidthLSKey:G.Wj,data:s,columns:t,settings:E,emptyDataMessage:(0,C.Z)("empty.default"),rowClassName:U.q,sortOrder:o,onSort:i},r):(0,x.jsx)(j.r,{visibleEntities:r,nodesUptimeFilter:a,onShowAll:n})}var T=t(24733),L=t(11476),V=t(18577),M=t(10703);t(64372);const A=e=>{var s,t;let{database:c,nodeId:k,groupId:b,pDiskId:y}=e;const{balancer:D}=(0,d.kW)(),{additionalNodesProps:S}=(0,v.f)({balancer:D}),{storageType:w,searchValue:f,visibleEntities:j,nodesUptimeFilter:G,handleShowAllGroups:C,handleShowAllNodes:U}=(0,V.u)(),E=(0,l.rU)(),A=(0,l.tS)(),[O]=(0,h.Rj)(),F="groups"===w,z="nodes"===w,[_,Z]=r.useState({sortOrder:void 0,sortValue:void 0}),H=_.sortValue?_:M.TP,[W,B]=r.useState({sortOrder:void 0,sortValue:void 0}),K=W.sortOrder?W:(0,M._r)(j),{columnsToShow:J,columnsToSelect:Q,setColumns:$}=(0,T.i)({additionalNodesProps:S,visibleEntities:j,database:c,groupId:null===b||void 0===b?void 0:b.toString()}),{columnsToShow:q,columnsToSelect:X,setColumns:Y}=(0,P.k)({visibleEntities:j,nodeId:null===k||void 0===k?void 0:k.toString()}),ee=g.y.useGetStorageNodesInfoQuery({database:c,with:j,node_id:k,group_id:b},{skip:!z,pollingInterval:O}),se=g.y.useGetStorageGroupsInfoQuery({database:c,with:j,nodeId:k,groupId:b,pDiskId:y,shouldUseGroupsHandler:A},{skip:!F||!E,pollingInterval:O}),{currentData:te,isFetching:re,error:ae}=z?ee:se,{currentData:{nodes:oe=[]}={}}=ee,{currentData:{groups:ne=[]}={}}=se,ie=(null===(s=ee.currentData)||void 0===s?void 0:s.total)||0,le=(null===(t=se.currentData)||void 0===t?void 0:t.total)||0,de=void 0===te&&re,ue=r.useMemo((()=>function(e,s,t){let r=e||[];return r=p(r,s),r=(0,u.f)(r,t),r}(oe,f,G)),[oe,G,f]),ce=r.useMemo((()=>function(e,s){let t=e||[];return t=m(t,s),t}(ne,f)),[f,ne]),[pe,me]=(0,h.sC)(H,(e=>Z(e))),[ge,he]=(0,h.sC)(K,(e=>B(e)));return(0,o.u)(ae)?(0,x.jsx)(a.J,{position:"left"}):(0,x.jsxs)(i.l,{children:[(0,x.jsx)(i.l.Controls,{children:(0,x.jsxs)(r.Fragment,{children:[F?(0,x.jsx)(N.q,{withTypeSelector:!0,entitiesCountCurrent:ce.length,entitiesCountTotal:le,entitiesLoading:de,columnsToSelect:X,handleSelectedColumnsUpdate:Y}):null,z?(0,x.jsx)(N.e,{withTypeSelector:!0,entitiesCountCurrent:ue.length,entitiesCountTotal:ie,entitiesLoading:de,columnsToSelect:Q,handleSelectedColumnsUpdate:$}):null]})}),ae?(0,x.jsx)(n.V,{error:ae}):null,(0,x.jsx)(i.l.Table,{loading:de||!E,className:(0,L.b)("table"),children:te?(0,x.jsxs)(r.Fragment,{children:[F?(0,x.jsx)(I,{visibleEntities:j,data:ce,onShowAll:C,sort:ge,handleSort:he,columns:q},"groups"):null,z?(0,x.jsx)(R,{visibleEntities:j,nodesUptimeFilter:G,data:ue,onShowAll:U,sort:pe,handleSort:me,columns:J},"nodes"):null]}):null})]})}},87255:(e,s,t)=>{t.d(s,{q:()=>S,e:()=>w});var r=t(68963),a=t(48857),o=t(10288),n=t(2418),i=t(49201),l=t(30629),d=t(43989),u=t(51323),c=t(55434),p=t(79734),m=t(95829),g=t(75859);const h={[m.d.groups]:"Groups",[m.d.nodes]:"Nodes"},v=e=>{let{value:s,onChange:t}=e;return(0,g.jsxs)(p.E,{value:s,onUpdate:t,qa:"storage-type-filter",children:[(0,g.jsx)(p.E.Option,{value:m.d.groups,children:h[m.d.groups]}),(0,g.jsx)(p.E.Option,{value:m.d.nodes,children:h[m.d.nodes]})]})},N={[m.G.all]:"All",[m.G.missing]:"Degraded",[m.G.space]:"Out of Space"},k=e=>{let{value:s,onChange:t}=e;return(0,g.jsxs)(p.E,{value:s,onUpdate:t,qa:"storage-visible-entities-filter",children:[(0,g.jsx)(p.E.Option,{value:m.G.missing,children:N[m.G.missing]}),(0,g.jsx)(p.E.Option,{value:m.G.space,children:N[m.G.space]}),(0,g.jsx)(p.E.Option,{value:m.G.all,children:N[m.G.all]})]})};var b=t(52002),y=t(11476),D=t(18577);function S(e){let{withTypeSelector:s,withGroupBySelect:t,entitiesCountCurrent:d,entitiesCountTotal:c,entitiesLoading:p,columnsToSelect:m,handleSelectedColumnsUpdate:h}=e;const{searchValue:N,storageType:S,visibleEntities:w,storageGroupsGroupByParam:x,handleTextFilterChange:I,handleStorageTypeChange:P,handleVisibleEntitiesChange:f,handleStorageGroupsGroupByParamChange:j}=(0,D.u)();return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(l.o,{value:N,onChange:I,placeholder:(0,b.Z)("controls_groups-search-placeholder"),className:(0,y.b)("search")}),s&&(0,g.jsx)(v,{value:S,onChange:P}),t?null:(0,g.jsx)(k,{value:w,onChange:f}),(0,g.jsx)(i.C,{label:(0,b.Z)("groups"),loading:p,total:c,current:d}),(0,g.jsx)(a.N,{popupWidth:200,items:m,showStatus:!0,onUpdate:h,sortable:!1}),t?(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(o.x,{variant:"body-2",children:(0,b.Z)("controls_group-by-placeholder")}),(0,g.jsx)(n.P,{hasClear:!0,placeholder:"-",width:170,defaultValue:x?[x]:void 0,onUpdate:e=>{j(e[0])},options:u.r8})]}):null]})}function w(e){let{withTypeSelector:s,withGroupBySelect:t,entitiesCountCurrent:u,entitiesCountTotal:p,entitiesLoading:m,columnsToSelect:h,handleSelectedColumnsUpdate:N}=e;const{searchValue:S,storageType:w,visibleEntities:x,nodesUptimeFilter:I,storageNodesGroupByParam:P,handleTextFilterChange:f,handleStorageTypeChange:j,handleVisibleEntitiesChange:G,handleUptimeFilterChange:C,handleStorageNodesGroupByParamChange:U}=(0,D.u)();return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(l.o,{value:S,onChange:f,placeholder:(0,b.Z)("controls_nodes-search-placeholder"),className:(0,y.b)("search")}),s&&(0,g.jsx)(v,{value:w,onChange:j}),t?null:(0,g.jsx)(k,{value:x,onChange:G}),t?null:(0,g.jsx)(d.X,{value:I,onChange:C}),(0,g.jsx)(i.C,{label:(0,b.Z)("nodes"),loading:m,total:p,current:u}),(0,g.jsx)(a.N,{popupWidth:200,items:h,showStatus:!0,onUpdate:N,sortable:!1}),t?(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(o.x,{variant:"body-2",children:(0,b.Z)("controls_group-by-placeholder")}),(0,g.jsx)(n.P,{hasClear:!0,placeholder:"-",width:170,defaultValue:P?[P]:void 0,onUpdate:e=>{U(e[0])},options:c.lo})]}):null]})}},64782:(e,s,t)=>{t.d(s,{a:()=>i});var r=t(95829),a=t(59625),o=t(43817),n=t(75859);const i=e=>{let s,{visibleEntities:t,onShowAll:i}=e;return t===r.G.space&&(s=(0,o.Z)("empty.out_of_space")),t===r.G.missing&&(s=(0,o.Z)("empty.degraded")),s?(0,n.jsx)(a.y,{title:s,showAll:(0,o.Z)("show_all"),onShowAll:i}):null}},6130:(e,s,t)=>{t.d(s,{V:()=>$,m:()=>Q});var r=t(68963),a=t(71549),o=t(19812),n=t(10502),i=t(14979),l=t(68330),d=t(88776),u=t(99683),c=t(69214),p=t(74170),m=t(80816),g=t(79255),h=t(54665),v=t(5922),N=t(24362),k=t(52317),b=t(34301),y=t(15106),D=t(1504),S=t(55850),w=t(92666),x=t(17931),I=t(10703),P=t(75859);const f=(0,N.cn)("ydb-storage-disks");function j(e){let{vDisks:s=[],viewContext:t}=e;const[a,o]=r.useState();return s.length?(0,P.jsxs)("div",{className:f(null),children:[(0,P.jsx)("div",{className:f("vdisks-wrapper"),children:null===s||void 0===s?void 0:s.map((e=>(0,P.jsx)(G,{vDisk:e,inactive:!(0,I.XW)(e,t),highlightedVDisk:a,setHighlightedVDisk:o},(0,b.a2)(e.VDiskId))))}),(0,P.jsx)("div",{className:f("pdisks-wrapper"),children:null===s||void 0===s?void 0:s.map((e=>{var s;return(0,P.jsx)(C,{vDisk:e,highlightedVDisk:a,setHighlightedVDisk:o},(0,w.CH)(e.NodeId,null===e||void 0===e||null===(s=e.PDisk)||void 0===s?void 0:s.PDiskId))}))})]}):null}function G(e){let{vDisk:s,highlightedVDisk:t,inactive:r,setHighlightedVDisk:a}=e;const o={...s,PDisk:void 0},n=(0,b.a2)(s.VDiskId);return(0,P.jsx)("div",{style:{flexGrow:Number(s.AllocatedSize)||1},className:f("vdisk-item"),children:(0,P.jsx)(g.c,{data:o,compact:!0,inactive:r,showPopup:t===n,onShowPopup:()=>a(n),onHidePopup:()=>a(void 0),progressBarClassName:f("vdisk-progress-bar")})})}function C(e){let{vDisk:s,highlightedVDisk:t,setHighlightedVDisk:r}=e;const a=(0,b.a2)(s.VDiskId);return s.PDisk?(0,P.jsx)(x.l,{className:f("pdisk-item"),progressBarClassName:f("pdisk-progress-bar"),data:s.PDisk,showPopup:t===a,onShowPopup:()=>r(a),onHidePopup:()=>r(void 0)}):null}var U=t(43817),E=t(51323);const R=(0,N.cn)("ydb-storage-groups-columns"),T={name:E.tn.PoolName,header:E.G0.PoolName,width:250,render:e=>{var s;let{row:t}=e;const r=null===(s=t.PoolName)||void 0===s?void 0:s.split("/");return r&&(0,P.jsx)(u.l,{wrapperClassName:R("pool-name-wrapper"),content:t.PoolName,placement:["right"],behavior:n.x.Immediate,children:r[r.length-1]})},align:o.ZP.LEFT},L={name:E.tn.MediaType,header:E.G0.MediaType,width:100,resizeMinWidth:100,align:o.ZP.LEFT,render:e=>{let{row:s}=e;return(0,P.jsxs)(r.Fragment,{children:[(0,P.jsx)(i._,{children:s.MediaType||"\u2014"}),"\xa0",s.Encryption&&(0,P.jsx)(l.J,{content:(0,U.Z)("encrypted"),placement:"right",behavior:n.x.Immediate,children:(0,P.jsx)(i._,{children:(0,P.jsx)(d.J,{data:a.Z,size:18})})})]})},sortable:!1},V={name:E.tn.Erasure,header:E.G0.Erasure,width:100,sortAccessor:e=>e.ErasureSpecies,render:e=>{let{row:s}=e;return s.ErasureSpecies?s.ErasureSpecies:"-"},align:o.ZP.LEFT},M={name:E.tn.Degraded,header:E.G0.Degraded,width:110,resizeMinWidth:110,render:e=>{let{row:s}=e;return s.Degraded?(0,P.jsxs)(i._,{theme:(0,I._O)(s),children:["Degraded: ",s.Degraded]}):"-"},align:o.ZP.LEFT,defaultOrder:o.ZP.DESCENDING},A={name:E.tn.Usage,header:E.G0.Usage,width:75,resizeMinWidth:75,render:e=>{let{row:s}=e;return s.Limit?(0,P.jsx)(m.a,{value:s.Usage,theme:(0,I.YC)(s.Usage)}):"-"},sortAccessor:e=>e.Limit?e.Usage:null,align:o.ZP.LEFT},O={name:E.tn.GroupId,header:E.G0.GroupId,width:130,render:e=>{let{row:s}=e;return s.GroupId?(0,P.jsx)(p.h,{className:R("group-id"),to:(0,h.Uu)(s.GroupId),children:s.GroupId}):"-"},sortAccessor:e=>Number(e.GroupId),align:o.ZP.RIGHT},F={name:E.tn.Used,header:E.G0.Used,width:100,render:e=>{let{row:s}=e;return(0,S.Uz)(s.Used,!0)},align:o.ZP.RIGHT},z={name:E.tn.Limit,header:E.G0.Limit,width:100,render:e=>{let{row:s}=e;return(0,S.Uz)(s.Limit)},align:o.ZP.RIGHT},_={name:E.tn.DiskSpace,header:E.G0.DiskSpace,width:110,render:e=>{let{row:s}=e;return(0,P.jsx)(c.A,{status:s.DiskSpace})},align:o.ZP.CENTER},Z={name:E.tn.Read,header:E.G0.Read,width:100,render:e=>{let{row:s}=e;return s.Read?(0,S.Qt)(s.Read):"-"},align:o.ZP.RIGHT},H={name:E.tn.Write,header:E.G0.Write,width:100,render:e=>{let{row:s}=e;return s.Write?(0,S.Qt)(s.Write):"-"},align:o.ZP.RIGHT},W={name:E.tn.Latency,header:E.G0.Latency,width:100,render:e=>{let{row:s}=e;return(0,v.D)(s.LatencyPutTabletLogMs)?(0,D.zm)((0,D.BO)(s.LatencyPutTabletLogMs)):k.jX},align:o.ZP.RIGHT},B={name:E.tn.AllocationUnits,header:E.G0.AllocationUnits,width:150,render:e=>{let{row:s}=e;return(0,v.D)(s.AllocationUnits)?(0,b.uf)(s.AllocationUnits):k.jX},align:o.ZP.RIGHT},K=e=>({name:E.tn.VDisks,header:E.G0.VDisks,className:R("vdisks-column"),render:s=>{var t;let{row:r}=s;return(0,P.jsx)("div",{className:R("vdisks-wrapper"),children:null===(t=r.VDisks)||void 0===t?void 0:t.map((s=>(0,P.jsx)(g.c,{data:s,inactive:!(0,I.XW)(s,e),className:R("vdisks-item")},(0,b.a2)(s.VDiskId))))})},align:o.ZP.CENTER,width:900,resizeable:!1,sortable:!1}),J=e=>({name:E.tn.VDisksPDisks,header:E.G0.VDisksPDisks,className:R("disks-column"),render:s=>{let{row:t}=s;return(0,P.jsx)(j,{vDisks:t.VDisks,viewContext:e})},align:o.ZP.CENTER,width:900,resizeable:!1,sortable:!1}),Q=()=>[O,L,V,A,F,z].map((e=>({...e,sortable:!1}))),$=e=>[O,T,L,V,M,A,F,z,_,Z,H,W,B,K(e),J(e)].map((e=>({...e,sortable:(0,y.P)(e.name)})))},51323:(e,s,t)=>{t.d(s,{nu:()=>u,Rt:()=>c,tn:()=>d,G0:()=>p,Ty:()=>i,r8:()=>g,j0:()=>l,Hx:()=>h});var r=t(95408),a=t(30817);const o=JSON.parse('{"pool-name":"Pool Name","type":"Type","encryption":"Encryption","erasure":"Erasure","degraded":"Degraded","missing-disks":"Missing Disks","state":"State","usage":"Usage","disk-space-usage":"Disk space usage","group-id":"Group ID","used":"Used","limit":"Limit","space":"Space","read":"Read","write":"Write","latency":"Latency","allocation-units":"Allocation Units","vdisks":"VDisks","vdisks-pdisks":"VDisks with PDisks"}'),n=(0,a.wZ)("ydb-storage-groups-columns",{en:o}),i="storageGroupsColumnsWidth",l="storageGroupsSelectedColumns",d={GroupId:"GroupId",PoolName:"PoolName",MediaType:"MediaType",Encryption:"Encryption",Erasure:"Erasure",Used:"Used",Limit:"Limit",Usage:"Usage",DiskSpaceUsage:"DiskSpaceUsage",DiskSpace:"DiskSpace",Read:"Read",Write:"Write",Latency:"Latency",AllocationUnits:"AllocationUnits",VDisks:"VDisks",VDisksPDisks:"VDisksPDisks",MissingDisks:"MissingDisks",Degraded:"Degraded",State:"State"},u=["GroupId","PoolName","MediaType","Erasure","Used","Limit","Usage","Read","Write","VDisks"],c=["GroupId"],p={get PoolName(){return n("pool-name")},get MediaType(){return n("type")},get Encryption(){return n("encryption")},get Erasure(){return n("erasure")},get GroupId(){return n("group-id")},get Used(){return n("used")},get Limit(){return n("limit")},get Usage(){return n("usage")},get DiskSpaceUsage(){return n("disk-space-usage")},get DiskSpace(){return n("space")},get Read(){return n("read")},get Write(){return n("write")},get Latency(){return n("latency")},get AllocationUnits(){return n("allocation-units")},get VDisks(){return n("vdisks")},get VDisksPDisks(){return n("vdisks-pdisks")},get Degraded(){return n("missing-disks")},get MissingDisks(){return n("missing-disks")},get State(){return n("state")}},m=["PoolName","MediaType","Encryption","Erasure","Usage","DiskSpaceUsage","State","MissingDisks","Latency"],g=m.map((e=>({value:e,content:p[e]}))),h=r.z.custom((e=>m.includes(e))).catch(void 0)},46393:(e,s,t)=>{t.d(s,{k:()=>l});var r=t(68963),a=t(95829),o=t(57344),n=t(6130),i=t(51323);function l(e){let{visibleEntities:s,nodeId:t}=e;const l=function(e){return r.useMemo((()=>(0,n.V)({nodeId:e})),[e])}(t),d=r.useMemo((()=>s===a.G.missing?[...i.Rt,i.tn.Degraded]:s===a.G.space?[...i.Rt,i.tn.DiskSpace]:i.Rt),[s]);return(0,o.N)(l,i.j0,i.G0,i.nu,d)}},43817:(e,s,t)=>{t.d(s,{Z:()=>n});var r=t(30817);const a=JSON.parse('{"empty.default":"No such groups","empty.out_of_space":"No groups with out of space errors","empty.degraded":"No degraded groups","show_all":"Show all groups","encrypted":"Encrypted group"}'),o=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f","empty.out_of_space":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0433\u0440\u0443\u043f\u043f","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","encrypted":"\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430"}'),n=(0,r.wZ)("ydb-storage-groups",{ru:o,en:a})},64682:(e,s,t)=>{t.d(s,{r:()=>l});var r=t(95829),a=t(51688),o=t(59625),n=t(73790),i=t(75859);const l=e=>{let s,{visibleEntities:t,nodesUptimeFilter:l,onShowAll:d}=e;return t===r.G.space&&(s=(0,n.Z)("empty.out_of_space")),t===r.G.missing&&(s=(0,n.Z)("empty.degraded")),l===a.Uu.SmallUptime&&(s=(0,n.Z)("empty.small_uptime")),t!==r.G.all&&l!==a.Uu.All&&(s=(0,n.Z)("empty.several_filters")),s?(0,i.jsx)(o.y,{title:s,showAll:(0,n.Z)("show_all"),onShowAll:d}):null}},55434:(e,s,t)=>{t.d(s,{wn:()=>u,ae:()=>c,rC:()=>d,NU:()=>p,Wj:()=>i,lo:()=>g,rm:()=>l,tb:()=>h});var r=t(95408),a=t(30817);const o=JSON.parse('{"nodes-id":"Node ID","host":"Host","dc":"DC","rack":"Rack","version":"Version","uptime":"Uptime","missing":"Missing","disk-space-usage":"Disk space usage","pdisks":"PDisks"}'),n=(0,a.wZ)("ydb-storage-nodes-columns",{en:o}),i="storageNodesColumnsWidth",l="storageNodesSelectedColumns",d={NodeId:"NodeId",Host:"Host",DC:"DC",Rack:"Rack",Version:"Version",Uptime:"Uptime",PDisks:"PDisks",Missing:"Missing",DiskSpaceUsage:"DiskSpaceUsage"},u=["NodeId","Host","DC","Rack","Uptime","PDisks"],c=["NodeId"],p={get NodeId(){return n("nodes-id")},get Host(){return n("host")},get DC(){return n("dc")},get Rack(){return n("rack")},get Version(){return n("version")},get Uptime(){return n("uptime")},get PDisks(){return n("pdisks")},get Missing(){return n("missing")},get DiskSpaceUsage(){return n("disk-space-usage")}},m=["Host","DC","Rack","Version","Uptime","Missing","DiskSpaceUsage"],g=m.map((e=>({value:e,content:p[e]}))),h=r.z.custom((e=>m.includes(e))).catch(void 0)},24733:(e,s,t)=>{t.d(s,{i:()=>v});var r=t(68963),a=t(95829),o=t(57344),n=t(19812),i=t(89778),l=t(24362),d=t(52317),u=t(51688),c=t(17931),p=t(55434),m=t(75859);const g=(0,l.cn)("ydb-storage-nodes-columns"),h=e=>(e=>{let{additionalNodesProps:s,database:t,groupId:r}=e;const a=null===s||void 0===s?void 0:s.getNodeRef;return[{name:p.rC.NodeId,header:p.NU.NodeId,width:100,align:n.ZP.RIGHT,render:e=>{let{row:s}=e;return s.NodeId}},{name:p.rC.Host,header:p.NU.Host,width:350,render:e=>{let{row:s}=e;return(0,m.jsx)(i.k,{node:s,getNodeRef:a,database:t})},align:n.ZP.LEFT},{name:p.rC.DC,header:p.NU.DC,width:100,render:e=>{let{row:s}=e;return s.DC||d.jX},align:n.ZP.LEFT},{name:p.rC.Rack,header:p.NU.Rack,width:100,render:e=>{let{row:s}=e;return s.Rack||"\u2014"},align:n.ZP.LEFT},{name:p.rC.Uptime,header:p.NU.Uptime,width:130,sortAccessor:e=>{let{StartTime:s}=e;return s?-s:0},align:n.ZP.RIGHT,render:e=>{let{row:s}=e;return s.Uptime}},{name:p.rC.Missing,header:p.NU.Missing,width:100,align:n.ZP.CENTER,defaultOrder:n.ZP.DESCENDING,render:e=>{let{row:s}=e;return s.Missing}},{name:p.rC.PDisks,header:p.NU.PDisks,className:g("pdisks-column"),render:e=>{var s;let{row:t}=e;return(0,m.jsx)("div",{className:g("pdisks-wrapper"),children:null===(s=t.PDisks)||void 0===s?void 0:s.map((e=>{var s;const a=null===(s=t.VDisks)||void 0===s?void 0:s.filter((s=>s.PDiskId===e.PDiskId));return(0,m.jsx)("div",{className:g("pdisks-item"),children:(0,m.jsx)(c.l,{data:e,vDisks:a,viewContext:{groupId:r}})},e.PDiskId)}))})},align:n.ZP.CENTER,sortable:!1,width:900,resizeable:!1}]})(e).map((e=>({...e,sortable:(0,u.oh)(e.name)})));function v(e){let{visibleEntities:s,database:t,additionalNodesProps:n,groupId:i}=e;const l=r.useMemo((()=>h({database:t,additionalNodesProps:n,groupId:i})),[t,n,i]),d=r.useMemo((()=>s===a.G.missing?[...p.ae,p.rC.Missing]:p.ae),[s]);return(0,o.N)(l,p.rm,p.NU,p.wn,d)}},73790:(e,s,t)=>{t.d(s,{Z:()=>n});var r=t(30817);const a=JSON.parse('{"empty.default":"No such nodes","empty.out_of_space":"No nodes with out of space errors","empty.degraded":"No degraded nodes","empty.small_uptime":"No nodes with uptime < 1h","empty.several_filters":"No nodes match current filters combination","show_all":"Show all nodes"}'),o=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432","empty.out_of_space":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0443\u0437\u043b\u043e\u0432","empty.small_uptime":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432 \u0441 uptime < 1h","empty.several_filters":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0443\u0437\u043b\u044b"}'),n=(0,r.wZ)("ydb-storage-nodes",{ru:o,en:a})},20108:(e,s,t)=>{t.d(s,{q:()=>n});var r=t(24362),a=t(51688);const o=(0,r.cn)("ydb-storage-nodes"),n=e=>o("node",{unavailable:(0,a.TA)(e)})},52002:(e,s,t)=>{t.d(s,{Z:()=>o});var r=t(30817);const a=JSON.parse('{"groups":"Groups","nodes":"Nodes","controls_groups-search-placeholder":"Group ID, Pool name","controls_nodes-search-placeholder":"Node ID, FQDN","controls_group-by-placeholder":"Group by:","no-nodes":"No such nodes","no-groups":"No such groups"}'),o=(0,r.wZ)("ydb-storage",{en:a})},11476:(e,s,t)=>{t.d(s,{b:()=>i,i:()=>l});var r=t(28492),a=t(26688),o=t(24362),n=t(75859);const i=(0,o.cn)("global-storage"),l=e=>403===e.status?(0,n.jsx)(r.J,{position:"left"}):(0,n.jsx)(a.V,{error:e})},18577:(e,s,t)=>{t.d(s,{u:()=>c});var r=t(98994),a=t(95408),o=t(95829);const n=a.z.nativeEnum(o.G).catch(o.G.all),i=a.z.nativeEnum(o.d).catch(o.d.groups);var l=t(51688),d=t(51323),u=t(55434);function c(){var e;const[s,t]=(0,r.useQueryParams)({type:r.StringParam,visible:r.StringParam,search:r.StringParam,uptimeFilter:r.StringParam,storageNodesGroupBy:r.StringParam,storageGroupsGroupBy:r.StringParam}),a=i.parse(s.type),o=n.parse(s.visible),c=null!==(e=s.search)&&void 0!==e?e:"",p=l.U8.parse(s.uptimeFilter),m=d.Hx.parse(s.storageGroupsGroupBy),g=u.tb.parse(s.storageNodesGroupBy),h=e=>{t({visible:e},"replaceIn")},v=e=>{t({uptimeFilter:e},"replaceIn")};return{storageType:a,visibleEntities:o,searchValue:c,nodesUptimeFilter:p,storageGroupsGroupByParam:m,storageNodesGroupByParam:g,handleTextFilterChange:e=>{t({search:e||void 0},"replaceIn")},handleVisibleEntitiesChange:h,handleStorageTypeChange:e=>{t({type:e},"replaceIn")},handleUptimeFilterChange:v,handleStorageGroupsGroupByParamChange:e=>{t({storageGroupsGroupBy:e},"replaceIn")},handleStorageNodesGroupByParamChange:e=>{t({storageNodesGroupBy:e},"replaceIn")},handleShowAllGroups:()=>{h("all")},handleShowAllNodes:()=>{h("all"),v(l.Uu.All)}}}},10703:(e,s,t)=>{t.d(s,{TP:()=>m,XW:()=>k,YC:()=>p,_O:()=>c,_r:()=>N});var r=t(81413),a=t(95829),o=t(5922),n=t(99106),i=t(54997),l=t(51323);const d=(0,n.p)(1,2,["success","warning","danger"]),u={"block-4-2":(0,n.p)(1,2,["success","warning","danger"]),"mirror-3-dc":(0,n.p)(1,3,["success","warning","danger"])},c=e=>{var s;return(void 0!==(s=e.ErasureSpecies)&&s in u?u[e.ErasureSpecies]:d)(e.Degraded)},p=(0,n.p)(80,85,["success","warning","danger"]),m={sortValue:i.xv.NodeId,sortOrder:r.zE},g={sortValue:l.tn.PoolName,sortOrder:r.zE},h={sortValue:l.tn.Degraded,sortOrder:r.hr},v={sortValue:l.tn.Usage,sortOrder:r.hr};function N(e){return e===a.G.missing?h:e===a.G.space?v:g}function k(e,s){var t;return(0,o.D)(null===(t=e.VDiskId)||void 0===t?void 0:t.GroupID)&&null!==s&&void 0!==s&&s.groupId?String(e.VDiskId.GroupID)===s.groupId:!(0,o.D)(e.NodeId)||null===s||void 0===s||!s.nodeId||String(e.NodeId)===s.nodeId}},14223:(e,s,t)=>{t.d(s,{A:()=>p,f:()=>u});var r=t(75850),a=t(52317),o=t(34301),n=t(27070),i=t(51688),l=t(80839);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0)===l.pu.ALL?e:e.filter((e=>{let{SystemState:s}=e;return s&&s!==r.K.Green}))},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0)===i.Uu.All?e:e.filter((e=>{let{StartTime:s}=e;return!s||(0,o.OW)(s)<a.RQ}))},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;if(!s)return e;const t=(0,n.Y)(s);return e.filter((e=>!e.Host||(t.test(e.Host)||t.test(String(e.NodeId)))))};function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{uptimeFilter:s,searchValue:t,problemFilter:r}=arguments.length>1?arguments[1]:void 0,a=u(e,s);return a=d(a,r),a=c(a,t),a}},95829:(e,s,t)=>{t.d(s,{G:()=>r,d:()=>a});const r={all:"all",missing:"missing",space:"space"},a={groups:"groups",nodes:"nodes"}},26491:(e,s,t)=>{t.d(s,{R:()=>a});var r=t(92092);async function a(e,s){let{version:t="v2",shouldUseGroupsHandler:a,...o}=e;if(a&&"v1"!==t){const e=await window.api.getStorageGroups({...o},s);return(0,r._u)(e)}{const e=await window.api.getStorageInfo({version:t,...o},s);return(0,r.S9)(e)}}},33058:(e,s,t)=>{t.d(s,{y:()=>n});var r=t(905),a=t(26491),o=t(92092);const n=r.h.injectEndpoints({endpoints:e=>({getStorageNodesInfo:e.query({queryFn:async(e,s)=>{let{signal:t}=s;try{const s=await window.api.getNodes({storage:!0,type:"static",...e},{signal:t});return{data:(0,o.Y2)(s)}}catch(r){return{error:r}}},providesTags:["All","StorageData"]}),getStorageGroupsInfo:e.query({queryFn:async(e,s)=>{let{signal:t}=s;try{return{data:await(0,a.R)(e,{signal:t})}}catch(r){return{error:r}}},providesTags:["All","StorageData"]})}),overrideExisting:"throw"})},92092:(e,s,t)=>{t.d(s,{S9:()=>v,Y2:()=>h,_u:()=>N});var r=t(21897),a=t(17632),o=t(92666),n=t(3764),i=t(51688),l=t(15106),d=t(1504);function u(e){const{DiskSpace:s,VDisks:t=[]}=e;return s||(0,o.b2)(Math.max(...t.map((e=>(0,o.Or)(e.DiskSpace)))))}const c=(e,s)=>{var t;const r=(0,n.w)(e);return{...r,StoragePoolName:s,Donors:null===r||void 0===r||null===(t=r.Donors)||void 0===t?void 0:t.map((e=>({...e,StoragePoolName:s})))}},p=e=>{const{VDisks:s=[],PoolName:t,Usage:r=0,Read:a=0,Write:o=0,Used:n=0,Limit:i=0,Degraded:l=0,Kind:d,MediaType:p,GroupID:m,Overall:g,GroupGeneration:h}=e,v=s.map((e=>c(e,t))),N=Math.floor(100*Number(r)),k=u(e);return{...e,PoolName:t,GroupId:m,MediaType:p||d,VDisks:v,Usage:N,Overall:g,GroupGeneration:h?String(h):void 0,Read:Number(a),Write:Number(o),Used:Number(n),Limit:Number(i),Degraded:Number(l),DiskSpace:k}},m=(e,s)=>{let t=[];return e?t=e.map(p):null===s||void 0===s||s.forEach((e=>{var s;null===(s=e.Groups)||void 0===s||s.forEach((s=>{t.push(((e,s)=>{var t;let o,i=0,d=0,p=0,m=0,g=0;const{Name:h,MediaType:v}=s;if(e.VDisks)for(const l of e.VDisks){const{Replicated:e,VDiskState:s,AvailableSize:t,AllocatedSize:u,PDisk:c,ReadThroughput:h,WriteThroughput:v}=l,{Type:N,State:k,AvailableSize:b}=(0,n.b)(c);e&&k===r.w.Normal&&s===a.H.OK||(i+=1);const y=Number(null!==t&&void 0!==t?t:b)||0,D=Number(u)||0;d+=D,p+=y+D,m+=Number(h)||0,g+=Number(v)||0,o=!N||N!==o&&o?"Mixed":N}const N=null===(t=e.VDisks)||void 0===t?void 0:t.map((e=>c(e,h))),k=(0,l.I)({Used:d,Limit:p},5),b=u(e);return{...e,GroupGeneration:e.GroupGeneration?String(e.GroupGeneration):void 0,GroupId:e.GroupID,Overall:e.Overall,VDisks:N,Usage:k,Read:m,Write:g,PoolName:h,Used:d,Limit:p,Degraded:i,MediaType:v||o||void 0,DiskSpace:b}})(s,e))}))})),t},g=e=>{var s,t,a;const o=(null===(s=e.PDisks)||void 0===s?void 0:s.filter((e=>e.State!==r.w.Normal)).length)||0,l=null===(t=e.PDisks)||void 0===t?void 0:t.map((s=>({...(0,n.b)(s),NodeId:e.NodeId}))),d=null===(a=e.VDisks)||void 0===a?void 0:a.map((s=>({...(0,n.w)(s),NodeId:e.NodeId})));return{...(0,i.Ns)(e.SystemState),NodeId:e.NodeId,PDisks:l,VDisks:d,Missing:o}},h=e=>{const{Nodes:s,TotalNodes:t,FoundNodes:r,NodeGroups:a}=e,o=null===a||void 0===a?void 0:a.map((e=>{let{GroupName:s,NodeCount:t}=e;if(s&&t)return{name:s,count:Number(t)}})).filter((e=>Boolean(e))),n=null===s||void 0===s?void 0:s.map(g);return{nodes:n,total:Number(t)||(null===n||void 0===n?void 0:n.length),found:Number(r),tableGroups:o}},v=e=>{const{StoragePools:s,StorageGroups:t,TotalGroups:r,FoundGroups:a}=e,o=m(t,s);return{groups:o,total:Number(r)||o.length,found:Number(a)}};function N(e){const{FoundGroups:s,TotalGroups:t,StorageGroups:r=[],StorageGroupGroups:a}=e,o=r.map((e=>{const{Usage:s,Read:t,Write:r,Used:a,Limit:o,MissingDisks:i,VDisks:l=[],Overall:c,LatencyPutTabletLog:p,LatencyPutUserData:m,LatencyGetFast:g}=e,h=l.map((e=>{var s;const t=e.Whiteboard,r=null===(s=e.PDisk)||void 0===s?void 0:s.Whiteboard,a=e.NodeId,o={...t,PDiskId:null===r||void 0===r?void 0:r.PDiskId,NodeId:a,PDisk:{...r,NodeId:a}};return(0,n.w)(o)})),v=u(e);return{...e,Usage:Math.floor(Number(s))||0,Read:Number(t),Write:Number(r),Used:Number(a),Limit:Number(o),LatencyPutTabletLogMs:(0,d.BO)(p),LatencyPutUserDataMs:(0,d.BO)(m),LatencyGetFastMs:(0,d.BO)(g),Degraded:Number(i),Overall:c,VDisks:h,DiskSpace:v}})),i=null===a||void 0===a?void 0:a.map((e=>{let{GroupName:s,GroupCount:t}=e;if(s&&t)return{name:s,count:Number(t)}})).filter((e=>Boolean(e)));return{groups:o,total:Number(t)||o.length,found:Number(s),tableGroups:i}}},21897:(e,s,t)=>{let r;t.d(s,{w:()=>r}),function(e){e.Initial="Initial",e.InitialFormatRead="InitialFormatRead",e.InitialFormatReadError="InitialFormatReadError",e.InitialSysLogRead="InitialSysLogRead",e.InitialSysLogReadError="InitialSysLogReadError",e.InitialSysLogParseError="InitialSysLogParseError",e.InitialCommonLogRead="InitialCommonLogRead",e.InitialCommonLogReadError="InitialCommonLogReadError",e.InitialCommonLogParseError="InitialCommonLogParseError",e.CommonLoggerInitError="CommonLoggerInitError",e.Normal="Normal",e.OpenFileError="OpenFileError",e.ChunkQuotaError="ChunkQuotaError",e.DeviceIoError="DeviceIoError",e.Missing="Missing",e.Timeout="Timeout",e.NodeDisconnected="NodeDisconnected",e.Unknown="Unknown"}(r||(r={}))},17632:(e,s,t)=>{let r;t.d(s,{H:()=>r}),function(e){e.Initial="Initial",e.LocalRecoveryError="LocalRecoveryError",e.SyncGuidRecovery="SyncGuidRecovery",e.SyncGuidRecoveryError="SyncGuidRecoveryError",e.OK="OK",e.PDiskError="PDiskError"}(r||(r={}))},77072:(e,s,t)=>{t.d(s,{i6:()=>i,mG:()=>n,mr:()=>d,oO:()=>o,s:()=>l,tH:()=>u});var r=t(21897),a=t(17632);const o={Grey:0,Green:1,Blue:2,Yellow:3,Orange:4,Red:5},n=Object.entries(o).reduce(((e,s)=>{let[t,r]=s;return{...e,[r]:t}}),{}),i=o.Grey,l=n[i],d={[a.H.OK]:o.Green,[a.H.Initial]:o.Yellow,[a.H.SyncGuidRecovery]:o.Yellow,[a.H.LocalRecoveryError]:o.Red,[a.H.SyncGuidRecoveryError]:o.Red,[a.H.PDiskError]:o.Red},u={[r.w.Initial]:o.Grey,[r.w.Normal]:o.Green,[r.w.InitialFormatRead]:o.Yellow,[r.w.InitialSysLogRead]:o.Yellow,[r.w.InitialCommonLogRead]:o.Yellow,[r.w.InitialFormatReadError]:o.Red,[r.w.InitialSysLogReadError]:o.Red,[r.w.InitialSysLogParseError]:o.Red,[r.w.InitialCommonLogReadError]:o.Red,[r.w.InitialCommonLogParseError]:o.Red,[r.w.CommonLoggerInitError]:o.Red,[r.w.OpenFileError]:o.Red,[r.w.ChunkQuotaError]:o.Red,[r.w.DeviceIoError]:o.Red}},92666:(e,s,t)=>{t.d(s,{CH:()=>l,FR:()=>d,Iz:()=>o,Or:()=>i,b2:()=>n});var r=t(5922),a=t(77072);function o(e){return"VDiskId"in e}function n(e){return void 0===e?a.s:a.mG[e]||a.s}function i(e){return e?a.oO[e]:0}function l(e,s){if((0,r.D)(e)&&(0,r.D)(s))return`${e}-${s}`}function d(e,s,t){return[e,s,t].join("-")}},3764:(e,s,t)=>{t.d(s,{b:()=>g,w:()=>m});var r=t(75850),a=t(99106),o=t(77072);const n=(0,a.p)(85,95,[r.K.Green,r.K.Yellow,r.K.Red]);function i(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const t=function(e){return s=e,void 0!==s&&s in o.tH?o.tH[e]:o.i6;var s}(e.State),r=n(s);return t!==o.i6&&r?Math.max(t,o.oO[r]):t}var l=t(92666);function d(e){if(!(0,l.Iz)(e))return o.i6;const{DiskSpace:s,VDiskState:t,FrontQueues:r,Replicated:a,DonorMode:n}=e;if(!t)return o.i6;const i=u(s),d=function(e){var s;if(!e)return o.i6;return null!==(s=o.mr[e])&&void 0!==s?s:o.i6}(t),c=Math.min(o.oO.Orange,u(r));let p=Math.max(i,d,c);return a||n||p!==o.oO.Green||(p=o.oO.Blue),p}function u(e){var s;return e&&null!==(s=o.oO[e])&&void 0!==s?s:o.i6}const c={HDD:"HDD",SSD:"SSD",MVME:"NVME"};function p(e){if(!e)return;const s=function(e,s){const t={};return Object.entries(s).reduce(((s,r)=>{let[a,o]=r;const n=e.length-s,i=n-o;return t[a]=e.substring(i,n)||"0",s+o}),0),t}(BigInt(e).toString(2),{isSolidState:1,kind:55,typeExt:8});if("1"===s.isSolidState)switch(parseInt(s.typeExt,2)){case 0:return c.SSD;case 2:return c.MVME}else if("0"===s.typeExt)return c.HDD}function m(){var e,s,t,r;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=a.PDisk?g({...a.PDisk,NodeId:null!==(e=a.PDisk.NodeId)&&void 0!==e?e:a.NodeId}):void 0,n=null!==(s=a.PDiskId)&&void 0!==s?s:null===o||void 0===o?void 0:o.PDiskId,i=Number(null!==(t=a.AvailableSize)&&void 0!==t?t:null===o||void 0===o?void 0:o.AvailableSize),l=Number(a.AllocatedSize),u=l+i,c=Math.round(100*l/u),p=null===(r=a.Donors)||void 0===r?void 0:r.map((e=>m({...e,DonorMode:!0}))),h=d(a);return{...a,PDisk:o,PDiskId:n,Donors:p,Severity:h,TotalSize:u,AllocatedPercent:c}}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{AvailableSize:t,TotalSize:r,Category:a}=e,o=p(a),n=Number(t),l=Number(r),d=l-n,u=Math.round(100*d/l),c=i(e,u);return{...s,...e,Type:o,Severity:c,AllocatedSize:d,AllocatedPercent:u}}},27070:(e,s,t)=>{t.d(s,{A:()=>n,Y:()=>i});var r=t(81413),a=t(43680),o=t.n(a);const n=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.hr)===r.hr?`-${e}`:e},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new RegExp(o()(e),"i")}},99106:(e,s,t)=>{t.d(s,{p:()=>r});const r=(e,s,t)=>r=>0<=r&&r<e?t[0]:e<=r&&r<s?t[1]:s<=r?t[2]:void 0},57344:(e,s,t)=>{t.d(s,{N:()=>o});var r=t(68963),a=t(18193);const o=(e,s,t,o,n)=>{const[i,l]=r.useState((()=>a.r.readUserSettingsValue(s,o)));return{columnsToShow:r.useMemo((()=>e.filter((e=>{const s=e.name,t=i.includes(s),r=null===n||void 0===n?void 0:n.includes(s);return t||r}))),[e,n,i]),columnsToSelect:r.useMemo((()=>e.map((e=>e.name)).map((e=>{const s=null===n||void 0===n?void 0:n.includes(e),r=i.includes(e);return{id:e,title:t[e],selected:s||r,required:s,sticky:s?"start":void 0}}))),[e,t,n,i]),setColumns:r.useCallback((e=>{const t=e.filter((e=>e.selected)).map((e=>e.id));a.r.setUserSettingsValue(s,t),l(t)}),[s])}}},89712:(e,s,t)=>{t.d(s,{M:()=>n});var r=t(68963),a=t(2639),o=t(18193);const n=e=>{const s=r.useCallback((()=>e?o.r.readUserSettingsValue(e,{}):{}),[e]),t=r.useCallback((s=>{e&&o.r.setUserSettingsValue(e,s)}),[e]);return(0,a.M)({saveSizes:t,getSizes:s})}},15106:(e,s,t)=>{t.d(s,{I:()=>r,P:()=>o});const r=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const t=e.Limit?100*e.Used/e.Limit:0;return Math.floor(t/s)*s},a=["PoolName","Kind","MediaType","Erasure","Degraded","Usage","GroupId","Used","Limit","Read","Write","AllocationUnits","Latency"],o=e=>a.includes(e)},64372:()=>{}}]);