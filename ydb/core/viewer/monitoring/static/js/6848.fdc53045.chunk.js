"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[6848],{50422:(e,s,a)=>{a.d(s,{q:()=>p});var r=a(84317),t=a(17176),o=a(2418),n=a(905),l=a(24362),i=a(17096),d=a(30817);const c=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),u=(0,d.wZ)("ydb-diagnostics-autorefresh-control",{en:c});var m=a(75859);const v=(0,l.cn)("auto-refresh-control");function p(e){let{className:s}=e;const a=(0,i.zL)(),[l,d]=(0,i.Rj)();return(0,m.jsxs)("div",{className:v(null,s),children:[(0,m.jsx)(t.z,{view:"flat",onClick:()=>{a(n.h.util.invalidateTags(["All"]))},extraProps:{"aria-label":u("Refresh")},children:(0,m.jsx)(t.z.Icon,{children:(0,m.jsx)(r.Z,{})})}),(0,m.jsxs)(o.P,{value:[String(l)],onUpdate:e=>{d(Number(e))},width:85,children:[(0,m.jsx)(o.P.Option,{value:"0",children:u("None")}),(0,m.jsx)(o.P.Option,{value:"15000",children:u("15 sec")}),(0,m.jsx)(o.P.Option,{value:"60000",children:u("1 min")}),(0,m.jsx)(o.P.Option,{value:"120000",children:u("2 min")}),(0,m.jsx)(o.P.Option,{value:"300000",children:u("5 min")})]})]})}},99683:(e,s,a)=>{a.d(s,{l:()=>l});var r=a(68330),t=a(24362),o=a(75859);const n=(0,t.cn)("ydb-cell-with-popover");function l(e){let{children:s,className:a,wrapperClassName:t,...l}=e;return(0,o.jsx)("div",{className:n(null,t),children:(0,o.jsx)(r.J,{className:n("popover",a),...l,children:s})})}},90861:(e,s,a)=>{a.d(s,{m:()=>u});var r=a(27320),t=a(17176),o=a(11050),n=a(81434),l=a(24362),i=a(75859);const d=(0,l.cn)("clipboard-button");function c(e){let{className:s,status:a,title:n,...l}=e;return(0,i.jsx)(r.u,{content:"success"===a?"Copied!":n||"Copy",placement:"bottom-start",children:(0,i.jsx)(t.z,{...l,className:d(null,s),children:(0,i.jsx)(t.z.Icon,{children:(0,i.jsx)(o.K,{status:a,size:16})})})})}function u(e){let{text:s,...a}=e;return(0,i.jsx)(n.h,{text:s,timeout:1e3,children:e=>(0,i.jsx)(c,{...a,status:e})})}},1796:(e,s,a)=>{a.d(s,{p:()=>d});a(68963);var r=a(24362),t=a(52317),o=a(92666),n=a(17096),l=a(75859);const i=(0,r.cn)("storage-disk-progress-bar");function d(e){let{diskAllocatedPercent:s=-1,severity:a,compact:r,faded:d,empty:c,content:u,className:m}=e;const[v]=(0,n.yu)(t.yT),p={inverted:v,compact:r,faded:d,empty:c},h=void 0!==a&&(0,o.b2)(a);h&&(p[h.toLocaleLowerCase()]=!0);return(0,l.jsxs)("div",{className:i(p,m),role:"meter","aria-label":"Disk allocated space","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":s,children:[(()=>{if(r)return(0,l.jsx)("div",{className:i("fill-bar",p),style:{width:"100%"}});const e=v?100-s:s;return s>=0?(0,l.jsx)("div",{className:i("fill-bar",p),style:{width:"".concat(e,"%")}}):null})(),u||(!r&&s>=0?(0,l.jsx)("div",{className:i("title"),children:"".concat(Math.round(s),"%")}):null)]})}},69214:(e,s,a)=>{a.d(s,{A:()=>u});var r=a(86017),t=a(75850),o=a(24362),n=a(90861),l=a(68036),i=a(98366),d=a(75859);const c=(0,o.cn)("entity-status");function u(e){let{status:s=t.K.Grey,name:a="",label:o,path:u,iconPath:m,size:v="s",mode:p="color",showStatus:h=!0,externalLink:g=!1,withLeftTrim:N=!1,hasClipboardButton:k,clipboardButtonAlwaysVisible:b=!1,className:D,additionalControls:I}=e;const w=()=>h?(0,d.jsx)(i.J,{className:c("icon"),status:s,size:v,mode:p}):null;return(0,d.jsxs)("div",{className:c(null,D),title:a,children:[m?(S=m,(0,d.jsx)(r.r,{target:"_blank",href:S,children:w()})):w(),o&&(0,d.jsx)("span",{title:o,className:c("label",{size:v,state:s.toLowerCase()}),children:o}),(0,d.jsx)("span",{className:c("link",{"with-left-trim":N}),children:u?g?(0,d.jsx)(r.r,{className:c("name"),href:u,children:a}):(0,d.jsx)(l.h,{className:c("name"),to:u,children:a}):a&&(0,d.jsx)("span",{className:c("name"),children:a})}),k&&(0,d.jsx)(n.m,{text:a,size:"s",className:c("clipboard-button",{visible:b})}),I&&(0,d.jsx)("span",{className:c("additional-controls "),children:I})]});var S}},40073:(e,s,a)=>{a.d(s,{J:()=>h,b:()=>p});var r=a(68963),t=a(44920),o=a(75850),n=a(24362),l=a(52317),i=a(92666),d=a(55850),c=a(62206),u=a(75859);const m=(0,n.cn)("pdisk-storage-popup"),v=[o.K.Orange,o.K.Red,o.K.Yellow],p=(e,s)=>{var a;const{AvailableSize:r,TotalSize:t,State:o,PDiskId:n,NodeId:c,Path:u,Realtime:m,Type:p,Device:h}=e,g=[{label:"PDisk",value:null!==(a=(0,i.CH)(c,n))&&void 0!==a?a:l.jX},{label:"State",value:o||"not available"},{label:"Type",value:p||"unknown"}];return c&&g.push({label:"Node Id",value:c}),s&&c&&s.get(c)&&g.push({label:"Host",value:s.get(c)}),u&&g.push({label:"Path",value:u}),g.push({label:"Available",value:"".concat((0,d.Uz)(r)," of ").concat((0,d.Uz)(t))}),m&&v.includes(m)&&g.push({label:"Realtime",value:m}),h&&v.includes(h)&&g.push({label:"Device",value:h}),g},h=e=>{let{data:s,nodes:a,...o}=e;const n=r.useMemo((()=>p(s,a)),[s,a]);return(0,u.jsx)(t.G,{contentClassName:m(),placement:["top","bottom"],hasArrow:!0,offset:[0,12],...o,children:(0,u.jsx)(c._P,{title:"PDisk",info:n,size:"s"})})}},67359:(e,s,a)=>{a.d(s,{y:()=>u});var r=a(56829),t=a(24362),o=a(34301),n=a(55850),l=a(75859);const i=(0,t.cn)("progress-viewer"),d=e=>(0,o.uf)((0,o.W0)(Number(e),2)),c=(e,s)=>[d(e),d(s)];function u(e){let{value:s,capacity:a,formatValues:t=c,percents:o,className:d,size:u="xs",colorizeProgress:m,inverseColorize:v,warningThreshold:p=60,dangerThreshold:h=80}=e;const g=(0,r.F)();let N=Math.round(parseFloat(String(s))/parseFloat(String(a))*100)||0;N=N>100?100:N;let k=s,b=a,D="/";o?(k=N+"%",b="",D=""):t&&([k,b]=t(Number(s),Number(a)));let I=v?"danger":"good";m&&(N>p&&N<=h?I="warning":N>h&&(I=v?"good":"danger"),(0,n.kE)(a)||(N=100));const w={width:N+"%"};return(0,n.kE)(s)?(0,l.jsxs)("div",{className:i({size:u,theme:g,status:I},d),children:[(0,l.jsx)("div",{className:i("line"),style:w}),(0,l.jsx)("span",{className:i("text"),children:(0,n.kE)(a)?"".concat(k," ").concat(D," ").concat(b):k})]}):(0,l.jsx)("div",{className:"".concat(i({size:u})," ").concat(d," error"),children:"no data"})}},2098:(e,s,a)=>{a.d(s,{G:()=>d});var r=a(2639),t=a(19812),o=a(24362),n=a(89712),l=a(75859);const i=(0,o.cn)("ydb-resizeable-data-table");function d(e){let{columnsWidthLSKey:s,columns:a,settings:o,wrapperClassName:d,...c}=e;const[u,m]=(0,n.M)(s),v=(0,r.B)(a,u),p={...o,defaultResizeable:!0};return(0,l.jsx)("div",{className:i(null,d),children:(0,l.jsx)(t.ZP,{theme:"yandex-cloud",columns:v,onResize:m,settings:p,...c})})}},98366:(e,s,a)=>{a.d(s,{J:()=>m});var r=a(67585),t=a(57225),o=a(71586),n=a(88776),l=a(75850),i=a(24362),d=a(75859);const c=(0,i.cn)("ydb-status-icon"),u={[l.K.Blue]:r.Z,[l.K.Yellow]:t.Z,[l.K.Orange]:o.Z,[l.K.Red]:t.Z};function m(e){let{status:s=l.K.Grey,size:a="s",mode:r="color",className:t}=e;const o={state:s.toLowerCase(),size:a};return"icons"===r&&s in u?(0,d.jsx)(n.J,{className:c("status-icon",o,t),data:u[s]}):(0,d.jsx)("div",{className:c("status-color",o,t)})}},80816:(e,s,a)=>{a.d(s,{a:()=>l});var r=a(14979),t=a(24362),o=a(75859);const n=(0,t.cn)("ydb-usage-label");function l(e){let{value:s,overloadThreshold:a=90,theme:t,...l}=e;return(0,o.jsxs)(r._,{theme:t,className:n({overload:Number(s)>=a}),...l,children:[s||0,"%"]})}},79255:(e,s,a)=>{a.d(s,{c:()=>f});var r=a(34301),t=a(92666),o=a(68963),n=a(24362),l=a(75859);const i=(0,n.cn)("stack"),d=e=>{let{children:s,className:a}=e;return(0,l.jsx)("div",{className:i(null,a),children:o.Children.map(s,((e,s)=>o.isValidElement(e)?(0,l.jsx)("div",{className:i("layer"),style:{"--ydb-stack-level":s},children:e}):null))})};var c=a(92398),u=a(54665),m=a(17880),v=a(5922),p=a(1796),h=a(74170),g=a(44920),N=a(14979),k=a(75850),b=a(52317),D=a(55850),I=a(62206),w=a(40073);const S=(0,n.cn)("vdisk-storage-popup"),x=e=>{let{data:s,nodes:a,...n}=e;const i=(0,t.Iz)(s),d=o.useMemo((()=>i?(e=>{var s,a,t,o;const{VDiskId:n,VDiskState:l,SatisfactionRank:i,DiskSpace:d,FrontQueues:c,Replicated:u,UnsyncedVDisks:m,AllocatedSize:v,ReadThroughput:p,WriteThroughput:h,StoragePoolName:g}=e,N=[{label:"VDisk",value:(0,r.a2)(n)},{label:"State",value:null!==l&&void 0!==l?l:"not available"}];var b,I;return g&&N.push({label:"StoragePool",value:g}),i&&(null===(s=i.FreshRank)||void 0===s?void 0:s.Flag)!==k.K.Green&&N.push({label:"Fresh",value:null===(b=i.FreshRank)||void 0===b?void 0:b.Flag}),i&&(null===(a=i.LevelRank)||void 0===a?void 0:a.Flag)!==k.K.Green&&N.push({label:"Level",value:null===(I=i.LevelRank)||void 0===I?void 0:I.Flag}),i&&null!==(t=i.FreshRank)&&void 0!==t&&t.RankPercent&&N.push({label:"Fresh",value:i.FreshRank.RankPercent}),i&&null!==(o=i.LevelRank)&&void 0!==o&&o.RankPercent&&N.push({label:"Level",value:i.LevelRank.RankPercent}),d&&d!==k.K.Green&&N.push({label:"Space",value:d}),c&&c!==k.K.Green&&N.push({label:"FrontQueues",value:c}),u||N.push({label:"Replicated",value:"NO"}),m&&N.push({label:"UnsyncVDisks",value:m}),Number(v)&&N.push({label:"Allocated",value:(0,D.Uz)(v)}),Number(p)&&N.push({label:"Read",value:(0,D.Qt)(p)}),Number(h)&&N.push({label:"Write",value:(0,D.Qt)(h)}),N})(s):(e=>{const{NodeId:s,PDiskId:a,VSlotId:r,StoragePoolName:t}=e,o=[{label:"State",value:"not available"}];return t&&o.push({label:"StoragePool",value:t}),o.push({label:"NodeId",value:null!==s&&void 0!==s?s:b.jX},{label:"PDiskId",value:null!==a&&void 0!==a?a:b.jX},{label:"VSlotId",value:null!==r&&void 0!==r?r:b.jX}),o})(s)),[s,i]),c=o.useMemo((()=>i&&s.PDisk&&(0,w.b)(s.PDisk,a)),[s,a,i]);return(0,l.jsxs)(g.G,{contentClassName:S(),placement:["top","bottom"],hasArrow:!0,offset:[0,12],...n,children:[s.DonorMode&&(0,l.jsx)(N._,{className:S("donor-label"),children:"Donor"}),(0,l.jsx)(I._P,{title:"VDisk",info:d,size:"s"}),c&&(0,l.jsx)(I._P,{title:"PDisk",info:c,size:"s"})]})},P=(0,n.cn)("ydb-vdisk-component"),y=e=>{let{data:s={},nodes:a,compact:n,showPopup:i,onShowPopup:d,onHidePopup:g,progressBarClassName:N}=e;const k=(0,t.Iz)(s),b=(0,m.X_)(),[D,I]=o.useState(!1),w=o.useRef(null);let S;return b&&(0,v.D)(s.VDiskSlotId)&&(0,v.D)(s.PDiskId)&&(0,v.D)(s.NodeId)?S=(0,u.By)(s.VDiskSlotId,s.PDiskId,s.NodeId):(0,v.D)(s.NodeId)&&k&&(S=(0,u.ax)(u.ZP.node,{id:s.NodeId,activeTab:c.pV},{pdiskId:s.PDiskId,vdiskId:(0,r.a2)(s.VDiskId)})),(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:P(),ref:w,onMouseEnter:()=>{I(!0),null===d||void 0===d||d()},onMouseLeave:()=>{I(!1),null===g||void 0===g||g()},children:(0,l.jsx)(h.h,{to:S,className:P("content"),children:(0,l.jsx)(p.p,{diskAllocatedPercent:s.AllocatedPercent,severity:s.Severity,compact:n,className:N})})}),(0,l.jsx)(x,{data:s,nodes:a,anchorRef:w,open:D||i})]})};function f(e){let{data:s,className:a,stackClassName:o,...n}=e;const i=null===s||void 0===s?void 0:s.Donors,c=i&&i.length>0?(0,l.jsxs)(d,{className:o,children:[(0,l.jsx)(y,{data:s,...n}),i.map((e=>{const s=(0,t.Iz)(e);return(0,l.jsx)(y,{data:e,...n},(0,r.a2)(s?e.VDiskId:e))}))]}):(0,l.jsx)(y,{data:s,...n});return(0,l.jsx)("div",{className:a,children:c})}},17931:(e,s,a)=>{a.d(s,{l:()=>g});var r=a(68963),t=a(1796),o=a(74170),n=a(40073),l=a(79255),i=a(54665),d=a(17880),c=a(5922),u=a(24362),m=a(34301),v=a(92398),p=a(75859);const h=(0,u.cn)("pdisk-storage"),g=e=>{let{data:s={},vDisks:a,showPopup:u,onShowPopup:g,onHidePopup:N,className:k,progressBarClassName:b}=e;const[D,I]=r.useState(!1),w=(0,d.X_)(),S=r.useRef(null),{NodeId:x,PDiskId:P}=s,y=(0,c.D)(x)&&(0,c.D)(P);let f;return y&&(f=(0,i.ax)(i.ZP.node,{id:x,activeTab:v.pV},{pdiskId:P})),y&&w&&(f=(0,i.ds)(P,x)),(0,p.jsxs)(r.Fragment,{children:[(0,p.jsxs)("div",{className:h(null,k),ref:S,children:[null!==a&&void 0!==a&&a.length?(0,p.jsx)("div",{className:h("vdisks"),children:a.map((e=>(0,p.jsx)("div",{className:h("vdisks-item"),style:{flexGrow:Number(e.AllocatedSize)||1},children:(0,p.jsx)(l.c,{data:e,compact:!0,stackClassName:h("donors-stack")})},(0,m.a2)(e.VDiskId))))}):null,(0,p.jsxs)(o.h,{to:f,className:h("content"),onMouseEnter:()=>{I(!0),null===g||void 0===g||g()},onMouseLeave:()=>{I(!1),null===N||void 0===N||N()},children:[(0,p.jsx)(t.p,{diskAllocatedPercent:s.AllocatedPercent,severity:s.Severity,className:b}),(0,p.jsx)("div",{className:h("media-type"),children:s.Type})]})]}),(0,p.jsx)(n.J,{data:s,anchorRef:S,open:D||u})]})}},77382:(e,s,a)=>{a.d(s,{Ty:()=>E,AH:()=>re,k8:()=>te,mk:()=>ae});var r=a(68963),t=a(71549),o=a(19812),n=a(10502),l=a(14979),i=a(68330),d=a(88776),c=a(99683),u=a(69214),m=a(80816),v=a(79255),p=a(95829),h=a(75850),g=a(24362),N=a(34301),k=a(15106),b=a(55850),D=a(92666),I=a(17931),w=a(75859);const S=(0,g.cn)("ydb-storage-disks");function x(e){let{vDisks:s=[],nodes:a}=e;const[t,o]=r.useState();return s.length?(0,w.jsxs)("div",{className:S(null),children:[(0,w.jsx)("div",{className:S("vdisks-wrapper"),children:null===s||void 0===s?void 0:s.map((e=>(0,w.jsx)(P,{vDisk:e,nodes:a,highlightedVDisk:t,setHighlightedVDisk:o},(0,N.a2)(e.VDiskId))))}),(0,w.jsx)("div",{className:S("pdisks-wrapper"),children:null===s||void 0===s?void 0:s.map((e=>{var s;return(0,w.jsx)(y,{vDisk:e,nodes:a,highlightedVDisk:t,setHighlightedVDisk:o},(0,D.CH)(e.NodeId,null===e||void 0===e||null===(s=e.PDisk)||void 0===s?void 0:s.PDiskId))}))})]}):null}function P(e){let{nodes:s,vDisk:a,highlightedVDisk:r,setHighlightedVDisk:t}=e;const o={...a,PDisk:void 0},n=(0,N.a2)(a.VDiskId);return(0,w.jsx)("div",{style:{flexGrow:Number(a.AllocatedSize)||1},className:S("vdisk-item"),children:(0,w.jsx)(v.c,{data:o,nodes:s,compact:!0,showPopup:r===n,onShowPopup:()=>t(n),onHidePopup:()=>t(void 0),progressBarClassName:S("vdisk-progress-bar")})})}function y(e){let{vDisk:s,highlightedVDisk:a,setHighlightedVDisk:r}=e;const t=(0,N.a2)(s.VDiskId);return s.PDisk?(0,w.jsx)(I.l,{className:S("pdisk-item"),progressBarClassName:S("pdisk-progress-bar"),data:s.PDisk,showPopup:a===t,onShowPopup:()=>r(t),onHidePopup:()=>r(void 0)}):null}var f=a(10703),j=a(43817);const R=(0,g.cn)("ydb-storage-groups-columns"),E="storageGroupsColumnsWidth",z="MediaType",L="Erasure",V="GroupId",G="Used",C="Limit",T="Usage",M="UsedSpaceFlag",K="Read",F="Write",O="VDisks",U="Disks",A="Degraded",H={name:"PoolName",header:"Pool Name",width:250,render:e=>{var s;let{row:a}=e;const r=null===(s=a.PoolName)||void 0===s?void 0:s.split("/");return r&&(0,w.jsx)(c.l,{wrapperClassName:R("pool-name-wrapper"),content:a.PoolName,placement:["right"],behavior:n.x.Immediate,children:r[r.length-1]})},align:o.ZP.LEFT},Z={name:z,header:"Type",width:100,resizeMinWidth:100,align:o.ZP.LEFT,render:e=>{let{row:s}=e;return(0,w.jsxs)(r.Fragment,{children:[(0,w.jsx)(l._,{children:s.MediaType||"\u2014"}),"\xa0",s.Encryption&&(0,w.jsx)(i.J,{content:(0,j.Z)("encrypted"),placement:"right",behavior:n.x.Immediate,children:(0,w.jsx)(l._,{children:(0,w.jsx)(d.J,{data:t.Z,size:18})})})]})},sortable:!1},_={name:L,header:"Erasure",width:100,sortAccessor:e=>e.ErasureSpecies,render:e=>{let{row:s}=e;return s.ErasureSpecies?s.ErasureSpecies:"-"},align:o.ZP.LEFT},W={name:A,header:"Degraded",width:110,resizeMinWidth:110,render:e=>{let{row:s}=e;return s.Degraded?(0,w.jsxs)(l._,{theme:(0,f._O)(s),children:["Degraded: ",s.Degraded]}):"-"},align:o.ZP.LEFT,defaultOrder:o.ZP.DESCENDING},J={name:T,header:"Usage",width:75,resizeMinWidth:75,render:e=>{let{row:s}=e;return s.Limit?(0,w.jsx)(m.a,{value:s.Usage,theme:(0,f.YC)(s.Usage)}):"-"},sortAccessor:e=>e.Limit?e.Usage:null,align:o.ZP.LEFT},Y={name:V,header:"Group ID",width:130,render:e=>{let{row:s}=e;return(0,w.jsx)("span",{className:R("group-id"),children:s.GroupID})},sortAccessor:e=>Number(e.GroupID),align:o.ZP.RIGHT},B={name:G,header:"Used",width:100,render:e=>{let{row:s}=e;return(0,b.Uz)(s.Used,!0)},align:o.ZP.RIGHT},Q={name:C,header:"Limit",width:100,render:e=>{let{row:s}=e;return(0,b.Uz)(s.Limit)},align:o.ZP.RIGHT},X={name:M,header:"Space",width:110,render:e=>{let{row:s}=e;const a=s.UsedSpaceFlag;let r=h.K.Red;return a<100?r=h.K.Green:a<1e4?r=h.K.Yellow:a<1e6&&(r=h.K.Orange),(0,w.jsx)(u.A,{status:r})},align:o.ZP.CENTER},q={name:K,header:"Read",width:100,render:e=>{let{row:s}=e;return s.Read?(0,b.Qt)(s.Read):"-"},align:o.ZP.RIGHT},$={name:F,header:"Write",width:100,render:e=>{let{row:s}=e;return s.Write?(0,b.Qt)(s.Write):"-"},align:o.ZP.RIGHT},ee=e=>({name:O,className:R("vdisks-column"),header:"VDisks",render:s=>{var a;let{row:r}=s;return(0,w.jsx)("div",{className:R("vdisks-wrapper"),children:null===(a=r.VDisks)||void 0===a?void 0:a.map((s=>(0,w.jsx)(v.c,{data:s,nodes:e,className:R("vdisks-item")},(0,N.a2)(s.VDiskId))))})},align:o.ZP.CENTER,width:900,resizeable:!1,sortable:!1}),se=e=>({name:U,className:R("disks-column"),header:"Disks",render:s=>{let{row:a}=s;return(0,w.jsx)(x,{vDisks:a.VDisks,nodes:e})},align:o.ZP.CENTER,width:900,resizeable:!1,sortable:!1}),ae=()=>[Y,Z,_,J,B,Q].map((e=>({...e,sortable:!1}))),re=(e,s)=>{const a=null!==s&&void 0!==s&&s.useAdvancedStorage?se():ee(null===e||void 0===e?void 0:e.nodes);return[H,Z,_,W,Y,J,B,a]},te=(e,s)=>{const a=((e,s)=>{const a=null!==s&&void 0!==s&&s.useAdvancedStorage?se():ee(null===e||void 0===e?void 0:e.nodes);return[H,Z,_,W,J,Y,B,Q,X,q,$,a]})(e,s);var r,t;return(r=a,(t=null===s||void 0===s?void 0:s.visibleEntities)===p.G.space?r.filter((e=>e.name!==A)):t===p.G.missing?r.filter((e=>e.name!==M)):r.filter((e=>e.name!==A&&e.name!==M))).map((e=>({...e,sortable:(0,k.P7)(e.name)})))}},46393:(e,s,a)=>{a.d(s,{M:()=>c,V:()=>d});var r=a(68963),t=a(99337),o=a(52317),n=a(17096),l=a(77382);const i=(e,s)=>{const[a]=(0,n.yu)(o.uJ,!1),l=(0,n.ix)(t.d);return r.useMemo((()=>e({nodes:l},{useAdvancedStorage:a,visibleEntities:s})),[e,l,a,s])},d=e=>i(l.k8,e),c=()=>i(l.AH)},43817:(e,s,a)=>{a.d(s,{Z:()=>n});var r=a(30817);const t=JSON.parse('{"empty.default":"No such groups","empty.out_of_space":"No groups with out of space errors","empty.degraded":"No degraded groups","show_all":"Show all groups","encrypted":"Encrypted group"}'),o=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f","empty.out_of_space":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0433\u0440\u0443\u043f\u043f","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","encrypted":"\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430"}'),n=(0,r.wZ)("ydb-storage-groups",{ru:o,en:t})},10703:(e,s,a)=>{a.d(s,{CZ:()=>v,TP:()=>p,YC:()=>m,_O:()=>u,_r:()=>k});var r=a(81413),t=a(95829),o=a(75850),n=a(99106),l=a(51688),i=a(15106);const d=(0,n.p)(1,2,["success","warning","danger"]),c={"block-4-2":(0,n.p)(1,2,["success","warning","danger"]),"mirror-3-dc":(0,n.p)(1,3,["success","warning","danger"])},u=e=>{var s;return(void 0!==(s=e.ErasureSpecies)&&s in c?c[e.ErasureSpecies]:d)(e.Degraded)},m=(0,n.p)(80,85,["success","warning","danger"]),v=(0,n.p)(80,85,[o.K.Green,o.K.Yellow,o.K.Red]),p={sortValue:l.Hk.NodeId,sortOrder:r.zE},h={sortValue:i.t5.PoolName,sortOrder:r.zE},g={sortValue:i.t5.Degraded,sortOrder:r.hr},N={sortValue:i.t5.Usage,sortOrder:r.hr};function k(e){return e===t.G.missing?g:e===t.G.space?N:h}},95829:(e,s,a)=>{a.d(s,{G:()=>r,d:()=>t});const r={all:"all",missing:"missing",space:"space"},t={groups:"groups",nodes:"nodes"}},92092:(e,s,a)=>{a.d(s,{KJ:()=>g,Y2:()=>h,mD:()=>u,sl:()=>v});var r=a(75850),t=a(21897),o=a(17632),n=a(3764),l=a(51688),i=a(15106);const d={[r.K.Grey]:0,[r.K.Blue]:0,[r.K.Green]:1,[r.K.Yellow]:100,[r.K.Orange]:1e4,[r.K.Red]:1e6},c=(e,s)=>{var a;const r=(0,n.w)(e);return{...r,StoragePoolName:s,Donors:null===r||void 0===r||null===(a=r.Donors)||void 0===a?void 0:a.map((e=>({...e,StoragePoolName:s})))}},u=(e,s)=>{var a;let r,l=0,u=0,m=0,v=0,p=0,h=0;const{Name:g,MediaType:N}=s;if(e.VDisks)for(const i of e.VDisks){const{Replicated:e,VDiskState:s,AvailableSize:a,AllocatedSize:c,PDisk:g,DiskSpace:N,ReadThroughput:k,WriteThroughput:b}=i,{Type:D,State:I,AvailableSize:w}=(0,n.b)(g);e&&I===t.w.Normal&&s===o.H.OK||(l+=1),N&&(u+=d[N]);const S=Number(null!==a&&void 0!==a?a:w)||0,x=Number(c)||0;m+=x,v+=S+x,p+=Number(k)||0,h+=Number(b)||0,r=!D||D!==r&&r?"Mixed":D}const k=null===(a=e.VDisks)||void 0===a?void 0:a.map((e=>c(e,g))),b=(0,i.Ic)({Used:m,Limit:v},5);return{...e,VDisks:k,Usage:b,Read:p,Write:h,PoolName:g,Used:m,Limit:v,Degraded:l,UsedSpaceFlag:u,MediaType:N||r||void 0}},m=e=>{const{VDisks:s=[],PoolName:a,Usage:t=0,Read:o=0,Write:n=0,Used:l=0,Limit:i=0,Degraded:u=0,Kind:m,MediaType:v}=e,p=s.reduce(((e,s)=>{let{DiskSpace:a}=s;return a&&a!==r.K.Grey?e+d[a]:e}),0),h=s.map((e=>c(e,a))),g=Math.floor(100*Number(t));return{...e,UsedSpaceFlag:p,PoolName:a,MediaType:v||m,VDisks:h,Usage:g,Read:Number(o),Write:Number(n),Used:Number(l),Limit:Number(i),Degraded:Number(u)}},v=(e,s)=>{let a=[];return e?a=e.map(m):null===s||void 0===s||s.forEach((e=>{var s;null===(s=e.Groups)||void 0===s||s.forEach((s=>{a.push(u(s,e))}))})),a},p=e=>{var s,a,r;const o=(null===(s=e.PDisks)||void 0===s?void 0:s.filter((e=>e.State!==t.w.Normal)).length)||0,i=null===(a=e.PDisks)||void 0===a?void 0:a.map((s=>({...(0,n.b)(s),NodeId:e.NodeId}))),d=null===(r=e.VDisks)||void 0===r?void 0:r.map((s=>({...(0,n.w)(s),NodeId:e.NodeId})));return{...(0,l.Ns)(e.SystemState),NodeId:e.NodeId,PDisks:i,VDisks:d,Missing:o}},h=e=>{const{Nodes:s,TotalNodes:a,FoundNodes:r}=e,t=null===s||void 0===s?void 0:s.map(p);return{nodes:t,total:Number(a)||(null===t||void 0===t?void 0:t.length),found:Number(r)}},g=e=>{const{StoragePools:s,StorageGroups:a,TotalGroups:r,FoundGroups:t}=e,o=v(a,s);return{groups:o,total:Number(r)||o.length,found:Number(t)}}},21897:(e,s,a)=>{let r;a.d(s,{w:()=>r}),function(e){e.Initial="Initial",e.InitialFormatRead="InitialFormatRead",e.InitialFormatReadError="InitialFormatReadError",e.InitialSysLogRead="InitialSysLogRead",e.InitialSysLogReadError="InitialSysLogReadError",e.InitialSysLogParseError="InitialSysLogParseError",e.InitialCommonLogRead="InitialCommonLogRead",e.InitialCommonLogReadError="InitialCommonLogReadError",e.InitialCommonLogParseError="InitialCommonLogParseError",e.CommonLoggerInitError="CommonLoggerInitError",e.Normal="Normal",e.OpenFileError="OpenFileError",e.ChunkQuotaError="ChunkQuotaError",e.DeviceIoError="DeviceIoError",e.Missing="Missing",e.Timeout="Timeout",e.NodeDisconnected="NodeDisconnected",e.Unknown="Unknown"}(r||(r={}))},11431:(e,s,a)=>{let r;a.d(s,{w:()=>r}),function(e){e.v1="v1",e.v2="v2"}(r||(r={}))},17632:(e,s,a)=>{let r;a.d(s,{H:()=>r}),function(e){e.Initial="Initial",e.LocalRecoveryError="LocalRecoveryError",e.SyncGuidRecovery="SyncGuidRecovery",e.SyncGuidRecoveryError="SyncGuidRecoveryError",e.OK="OK",e.PDiskError="PDiskError"}(r||(r={}))},48169:(e,s,a)=>{a.d(s,{ok:()=>n,wq:()=>o,wz:()=>i,yf:()=>l});var r=a(27102),t=a(55850);const o=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.y3;const a=/\/node\/\d+\/?$/g;return a.test(String(s))?String(s).replace(a,"/node/".concat(e,"/")):"".concat(null!==s&&void 0!==s?s:"","/node/").concat(e,"/")},n=e=>{let{nodeId:s,pDiskId:a,host:r}=e;const n="actors/pdisks/pdisk"+(0,t.bJ)(a);return o(s,r)+n},l=e=>{let{nodeId:s,pDiskId:a,vDiskSlotId:r,host:n}=e;const l="actors/vdisks/vdisk"+(0,t.bJ)(a)+"_"+(0,t.bJ)(r);return o(s,n)+l};function i(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"TabletID",t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.y3;const o=s?"/".concat(s):"";return"".concat(t,"/tablets").concat(o,"?").concat(a,"=").concat(e)}},77072:(e,s,a)=>{a.d(s,{i6:()=>l,mG:()=>n,mr:()=>d,oO:()=>o,s:()=>i,tH:()=>c});var r=a(21897),t=a(17632);const o={Grey:0,Green:1,Blue:2,Yellow:3,Orange:4,Red:5},n=Object.entries(o).reduce(((e,s)=>{let[a,r]=s;return{...e,[r]:a}}),{}),l=o.Grey,i=n[l],d={[t.H.OK]:o.Green,[t.H.Initial]:o.Yellow,[t.H.SyncGuidRecovery]:o.Yellow,[t.H.LocalRecoveryError]:o.Red,[t.H.SyncGuidRecoveryError]:o.Red,[t.H.PDiskError]:o.Red},c={[r.w.Initial]:o.Grey,[r.w.Normal]:o.Green,[r.w.InitialFormatRead]:o.Yellow,[r.w.InitialSysLogRead]:o.Yellow,[r.w.InitialCommonLogRead]:o.Yellow,[r.w.InitialFormatReadError]:o.Red,[r.w.InitialSysLogReadError]:o.Red,[r.w.InitialSysLogParseError]:o.Red,[r.w.InitialCommonLogReadError]:o.Red,[r.w.InitialCommonLogParseError]:o.Red,[r.w.CommonLoggerInitError]:o.Red,[r.w.OpenFileError]:o.Red,[r.w.ChunkQuotaError]:o.Red,[r.w.DeviceIoError]:o.Red}},92666:(e,s,a)=>{a.d(s,{CH:()=>l,Iz:()=>o,b2:()=>n});var r=a(5922),t=a(77072);function o(e){return"VDiskId"in e}function n(e){return void 0===e?t.s:t.mG[e]||t.s}function l(e,s){if((0,r.D)(e)&&(0,r.D)(s))return"".concat(e,"-").concat(s)}},3764:(e,s,a)=>{a.d(s,{b:()=>p,w:()=>v});var r=a(75850),t=a(99106),o=a(77072);const n=(0,t.p)(85,95,[r.K.Green,r.K.Yellow,r.K.Red]);function l(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=function(e){return s=e,void 0!==s&&s in o.tH?o.tH[e]:o.i6;var s}(e.State),r=n(s);return a!==o.i6&&r?Math.max(a,o.oO[r]):a}var i=a(92666);function d(e){if(!(0,i.Iz)(e))return o.i6;const{DiskSpace:s,VDiskState:a,FrontQueues:r,Replicated:t,DonorMode:n}=e;if(!a)return o.i6;const l=c(s),d=function(e){var s;if(!e)return o.i6;return null!==(s=o.mr[e])&&void 0!==s?s:o.i6}(a),u=Math.min(o.oO.Orange,c(r));let m=Math.max(l,d,u);return t||n||m!==o.oO.Green||(m=o.oO.Blue),m}function c(e){var s;return e&&null!==(s=o.oO[e])&&void 0!==s?s:o.i6}const u={HDD:"HDD",SSD:"SSD",MVME:"NVME"};function m(e){if(!e)return;const s=function(e,s){const a={};return Object.entries(s).reduce(((s,r)=>{let[t,o]=r;const n=e.length-s,l=n-o;return a[t]=e.substring(l,n)||"0",s+o}),0),a}(BigInt(e).toString(2),{isSolidState:1,kind:55,typeExt:8});if("1"===s.isSolidState)switch(parseInt(s.typeExt,2)){case 0:return u.SSD;case 2:return u.MVME}else if("0"===s.typeExt)return u.HDD}function v(){var e,s,a,r;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=t.PDisk?p({...t.PDisk,NodeId:null!==(e=t.PDisk.NodeId)&&void 0!==e?e:t.NodeId}):void 0,n=null!==(s=t.PDiskId)&&void 0!==s?s:null===o||void 0===o?void 0:o.PDiskId,l=Number(null!==(a=t.AvailableSize)&&void 0!==a?a:null===o||void 0===o?void 0:o.AvailableSize),i=Number(t.AllocatedSize),c=i+l,u=Math.round(100*i/c),m=null===(r=t.Donors)||void 0===r?void 0:r.map((e=>v({...e,DonorMode:!0}))),h=d(t);return{...t,PDisk:o,PDiskId:n,Donors:m,Severity:h,TotalSize:c,AllocatedPercent:u}}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{AvailableSize:a,TotalSize:r,Category:t}=e,o=m(t),n=Number(a),i=Number(r),d=i-n,c=Math.round(100*d/i),u=l(e,c);return{...s,...e,Type:o,Severity:u,AllocatedSize:d,AllocatedPercent:c}}},99106:(e,s,a)=>{a.d(s,{p:()=>r});const r=(e,s,a)=>r=>0<=r&&r<e?a[0]:e<=r&&r<s?a[1]:s<=r?a[2]:void 0},89712:(e,s,a)=>{a.d(s,{M:()=>n});var r=a(68963),t=a(2639),o=a(18193);const n=e=>{const s=r.useCallback((()=>e?o.r.readUserSettingsValue(e,{}):{}),[e]),a=r.useCallback((s=>{e&&o.r.setUserSettingsValue(e,s)}),[e]);return(0,t.M)({saveSizes:a,getSizes:s})}},15106:(e,s,a)=>{a.d(s,{Ic:()=>r,P7:()=>o,t5:()=>t});const r=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const a=e.Limit?100*e.Used/e.Limit:0;return Math.floor(a/s)*s},t={PoolName:"PoolName",Kind:"Kind",MediaType:"MediaType",Erasure:"Erasure",Degraded:"Degraded",Usage:"Usage",GroupId:"GroupId",Used:"Used",Limit:"Limit",Read:"Read",Write:"Write"},o=e=>Object.values(t).includes(e)}}]);