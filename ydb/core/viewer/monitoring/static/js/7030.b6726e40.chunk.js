"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[7030],{50422:(e,r,a)=>{a.d(r,{q:()=>p});var t=a(84317),s=a(17176),n=a(2418),o=a(905),l=a(24362),i=a(17096),d=a(30817);const c=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),u=(0,d.wZ)("ydb-diagnostics-autorefresh-control",{en:c});var m=a(75859);const v=(0,l.cn)("auto-refresh-control");function p(e){let{className:r}=e;const a=(0,i.zL)(),[l,d]=(0,i.Rj)();return(0,m.jsxs)("div",{className:v(null,r),children:[(0,m.jsx)(s.z,{view:"flat",onClick:()=>{a(o.h.util.invalidateTags(["All"]))},extraProps:{"aria-label":u("Refresh")},children:(0,m.jsx)(s.z.Icon,{children:(0,m.jsx)(t.Z,{})})}),(0,m.jsxs)(n.P,{value:[String(l)],onUpdate:e=>{d(Number(e))},width:85,children:[(0,m.jsx)(n.P.Option,{value:"0",children:u("None")}),(0,m.jsx)(n.P.Option,{value:"15000",children:u("15 sec")}),(0,m.jsx)(n.P.Option,{value:"60000",children:u("1 min")}),(0,m.jsx)(n.P.Option,{value:"120000",children:u("2 min")}),(0,m.jsx)(n.P.Option,{value:"300000",children:u("5 min")})]})]})}},99683:(e,r,a)=>{a.d(r,{l:()=>l});var t=a(68330),s=a(24362),n=a(75859);const o=(0,s.cn)("ydb-cell-with-popover");function l(e){let{children:r,className:a,wrapperClassName:s,...l}=e;return(0,n.jsx)("div",{className:o(null,s),children:(0,n.jsx)(t.J,{className:o("popover",a),...l,children:r})})}},90861:(e,r,a)=>{a.d(r,{m:()=>u});var t=a(27320),s=a(17176),n=a(11050),o=a(81434),l=a(24362),i=a(75859);const d=(0,l.cn)("clipboard-button");function c(e){let{className:r,status:a,title:o,...l}=e;return(0,i.jsx)(t.u,{content:"success"===a?"Copied!":o||"Copy",placement:"bottom-start",children:(0,i.jsx)(s.z,{...l,className:d(null,r),children:(0,i.jsx)(s.z.Icon,{children:(0,i.jsx)(n.K,{status:a,size:16})})})})}function u(e){let{text:r,...a}=e;return(0,i.jsx)(o.h,{text:r,timeout:1e3,children:e=>(0,i.jsx)(c,{...a,status:e})})}},1796:(e,r,a)=>{a.d(r,{p:()=>d});a(68963);var t=a(24362),s=a(52317),n=a(92666),o=a(17096),l=a(75859);const i=(0,t.cn)("storage-disk-progress-bar");function d(e){let{diskAllocatedPercent:r=-1,severity:a,compact:t,faded:d,empty:c,content:u,className:m}=e;const[v]=(0,o.yu)(s.yT),p={inverted:v,compact:t,faded:d,empty:c},h=void 0!==a&&(0,n.b2)(a);h&&(p[h.toLocaleLowerCase()]=!0);return(0,l.jsxs)("div",{className:i(p,m),role:"meter","aria-label":"Disk allocated space","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r,children:[(()=>{if(t)return(0,l.jsx)("div",{className:i("fill-bar",p),style:{width:"100%"}});const e=v?100-r:r;return r>=0?(0,l.jsx)("div",{className:i("fill-bar",p),style:{width:"".concat(e,"%")}}):null})(),u||(!t&&r>=0?(0,l.jsx)("div",{className:i("title"),children:"".concat(Math.round(r),"%")}):null)]})}},69214:(e,r,a)=>{a.d(r,{A:()=>u});var t=a(86017),s=a(75850),n=a(24362),o=a(90861),l=a(68036),i=a(98366),d=a(75859);const c=(0,n.cn)("entity-status");function u(e){let{status:r=s.K.Grey,name:a="",label:n,path:u,iconPath:m,size:v="s",mode:p="color",showStatus:h=!0,externalLink:g=!1,withLeftTrim:N=!1,hasClipboardButton:b,clipboardButtonAlwaysVisible:k=!1,className:D,additionalControls:I}=e;const S=()=>h?(0,d.jsx)(i.J,{className:c("icon"),status:r,size:v,mode:p}):null;return(0,d.jsxs)("div",{className:c(null,D),title:a,children:[m?(y=m,(0,d.jsx)(t.r,{target:"_blank",href:y,children:S()})):S(),n&&(0,d.jsx)("span",{title:n,className:c("label",{size:v,state:r.toLowerCase()}),children:n}),(0,d.jsx)("span",{className:c("link",{"with-left-trim":N}),children:u?g?(0,d.jsx)(t.r,{className:c("name"),href:u,children:a}):(0,d.jsx)(l.h,{className:c("name"),to:u,children:a}):a&&(0,d.jsx)("span",{className:c("name"),children:a})}),b&&(0,d.jsx)(o.m,{text:a,size:"s",className:c("clipboard-button",{visible:k})}),I&&(0,d.jsx)("span",{className:c("additional-controls "),children:I})]});var y}},40073:(e,r,a)=>{a.d(r,{J:()=>g,b:()=>h});var t=a(68963),s=a(44920),n=a(75850),o=a(5922),l=a(24362),i=a(52317),d=a(92666),c=a(55850),u=a(62206),m=a(75859);const v=(0,l.cn)("pdisk-storage-popup"),p=[n.K.Orange,n.K.Red,n.K.Yellow],h=(e,r)=>{const{AvailableSize:a,TotalSize:t,State:s,PDiskId:n,NodeId:l,Path:u,Realtime:m,Type:v,Device:h}=e,g=[{label:"PDisk",value:(0,o.D)(l)&&(0,o.D)(n)?(0,d.CH)(l,n):i.jX},{label:"State",value:s||"not available"},{label:"Type",value:v||"unknown"}];return l&&g.push({label:"Node Id",value:l}),r&&l&&r.get(l)&&g.push({label:"Host",value:r.get(l)}),u&&g.push({label:"Path",value:u}),g.push({label:"Available",value:"".concat((0,c.Uz)(a)," of ").concat((0,c.Uz)(t))}),m&&p.includes(m)&&g.push({label:"Realtime",value:m}),h&&p.includes(h)&&g.push({label:"Device",value:h}),g},g=e=>{let{data:r,nodes:a,...n}=e;const o=t.useMemo((()=>h(r,a)),[r,a]);return(0,m.jsx)(s.G,{contentClassName:v(),placement:["top","bottom"],offset:[0,12],...n,children:(0,m.jsx)(u._P,{title:"PDisk",info:o,size:"s"})})}},67359:(e,r,a)=>{a.d(r,{y:()=>u});var t=a(56829),s=a(24362),n=a(34301),o=a(55850),l=a(75859);const i=(0,s.cn)("progress-viewer"),d=e=>(0,n.uf)((0,n.W0)(Number(e),2)),c=(e,r)=>[d(e),d(r)];function u(e){let{value:r,capacity:a,formatValues:s=c,percents:n,className:d,size:u="xs",colorizeProgress:m,inverseColorize:v,warningThreshold:p=60,dangerThreshold:h=80}=e;const g=(0,t.F)();let N=Math.round(parseFloat(String(r))/parseFloat(String(a))*100)||0;N=N>100?100:N;let b=r,k=a,D="/";n?(b=N+"%",k="",D=""):s&&([b,k]=s(Number(r),Number(a)));let I=v?"danger":"good";m&&(N>p&&N<=h?I="warning":N>h&&(I=v?"good":"danger"),(0,o.kE)(a)||(N=100));const S={width:N+"%"};return(0,o.kE)(r)?(0,l.jsxs)("div",{className:i({size:u,theme:g,status:I},d),children:[(0,l.jsx)("div",{className:i("line"),style:S}),(0,l.jsx)("span",{className:i("text"),children:(0,o.kE)(a)?"".concat(b," ").concat(D," ").concat(k):b})]}):(0,l.jsx)("div",{className:"".concat(i({size:u})," ").concat(d," error"),children:"no data"})}},2098:(e,r,a)=>{a.d(r,{G:()=>d});var t=a(2639),s=a(19812),n=a(24362),o=a(89712),l=a(75859);const i=(0,n.cn)("ydb-resizeable-data-table");function d(e){let{columnsWidthLSKey:r,columns:a,settings:n,wrapperClassName:d,...c}=e;const[u,m]=(0,o.M)(r),v=(0,t.B)(a,u),p={...n,defaultResizeable:!0};return(0,l.jsx)("div",{className:i(null,d),children:(0,l.jsx)(s.ZP,{theme:"yandex-cloud",columns:v,onResize:m,settings:p,...c})})}},98366:(e,r,a)=>{a.d(r,{J:()=>m});var t=a(67585),s=a(57225),n=a(71586),o=a(88776),l=a(75850),i=a(24362),d=a(75859);const c=(0,i.cn)("ydb-status-icon"),u={[l.K.Blue]:t.Z,[l.K.Yellow]:s.Z,[l.K.Orange]:n.Z,[l.K.Red]:s.Z};function m(e){let{status:r=l.K.Grey,size:a="s",mode:t="color",className:s}=e;const n={state:r.toLowerCase(),size:a};return"icons"===t&&r in u?(0,d.jsx)(o.J,{className:c("status-icon",n,s),data:u[r]}):(0,d.jsx)("div",{className:c("status-color",n,s)})}},80816:(e,r,a)=>{a.d(r,{a:()=>l});var t=a(14979),s=a(24362),n=a(75859);const o=(0,s.cn)("ydb-usage-label");function l(e){let{value:r,overloadThreshold:a=90,theme:s,...l}=e;return(0,n.jsxs)(t._,{theme:s,className:o({overload:Number(r)>=a}),...l,children:[r||0,"%"]})}},79255:(e,r,a)=>{a.d(r,{c:()=>P});var t=a(34301),s=a(92666),n=a(68963),o=a(24362),l=a(75859);const i=(0,o.cn)("stack"),d=e=>{let{children:r,className:a}=e;return(0,l.jsx)("div",{className:i(null,a),children:n.Children.map(r,((e,r)=>n.isValidElement(e)?(0,l.jsx)("div",{className:i("layer"),style:{"--ydb-stack-level":r},children:e}):null))})};var c=a(92398),u=a(54665),m=a(17880),v=a(5922),p=a(1796),h=a(74170),g=a(44920),N=a(14979),b=a(75850),k=a(52317),D=a(55850),I=a(62206),S=a(40073);const y=(0,o.cn)("vdisk-storage-popup"),w=e=>{let{data:r,nodes:a,...o}=e;const i=(0,s.Iz)(r),d=n.useMemo((()=>i?(e=>{var r,a,s,n;const{VDiskId:o,VDiskState:l,SatisfactionRank:i,DiskSpace:d,FrontQueues:c,Replicated:u,UnsyncedVDisks:m,AllocatedSize:v,ReadThroughput:p,WriteThroughput:h,StoragePoolName:g}=e,N=[{label:"VDisk",value:(0,t.a2)(o)},{label:"State",value:null!==l&&void 0!==l?l:"not available"}];var k,I;return g&&N.push({label:"StoragePool",value:g}),i&&(null===(r=i.FreshRank)||void 0===r?void 0:r.Flag)!==b.K.Green&&N.push({label:"Fresh",value:null===(k=i.FreshRank)||void 0===k?void 0:k.Flag}),i&&(null===(a=i.LevelRank)||void 0===a?void 0:a.Flag)!==b.K.Green&&N.push({label:"Level",value:null===(I=i.LevelRank)||void 0===I?void 0:I.Flag}),i&&null!==(s=i.FreshRank)&&void 0!==s&&s.RankPercent&&N.push({label:"Fresh",value:i.FreshRank.RankPercent}),i&&null!==(n=i.LevelRank)&&void 0!==n&&n.RankPercent&&N.push({label:"Level",value:i.LevelRank.RankPercent}),d&&d!==b.K.Green&&N.push({label:"Space",value:d}),c&&c!==b.K.Green&&N.push({label:"FrontQueues",value:c}),u||N.push({label:"Replicated",value:"NO"}),m&&N.push({label:"UnsyncVDisks",value:m}),Number(v)&&N.push({label:"Allocated",value:(0,D.Uz)(v)}),Number(p)&&N.push({label:"Read",value:(0,D.Qt)(p)}),Number(h)&&N.push({label:"Write",value:(0,D.Qt)(h)}),N})(r):(e=>{const{NodeId:r,PDiskId:a,VSlotId:t,StoragePoolName:s}=e,n=[{label:"State",value:"not available"}];return s&&n.push({label:"StoragePool",value:s}),n.push({label:"NodeId",value:null!==r&&void 0!==r?r:k.jX},{label:"PDiskId",value:null!==a&&void 0!==a?a:k.jX},{label:"VSlotId",value:null!==t&&void 0!==t?t:k.jX}),n})(r)),[r,i]),c=n.useMemo((()=>i&&r.PDisk&&(0,S.b)(r.PDisk,a)),[r,a,i]);return(0,l.jsxs)(g.G,{contentClassName:y(),placement:["top","bottom"],offset:[0,12],...o,children:[r.DonorMode&&(0,l.jsx)(N._,{className:y("donor-label"),children:"Donor"}),(0,l.jsx)(I._P,{title:"VDisk",info:d,size:"s"}),c&&(0,l.jsx)(I._P,{title:"PDisk",info:c,size:"s"})]})},R=(0,o.cn)("ydb-vdisk-component"),x=e=>{let{data:r={},nodes:a,compact:o}=e;const i=(0,s.Iz)(r),d=(0,m.X_)(),[g,N]=n.useState(!1),b=n.useRef(null);let k;return d&&(0,v.D)(r.VDiskSlotId)&&(0,v.D)(r.PDiskId)&&(0,v.D)(r.NodeId)?k=(0,u.By)(r.VDiskSlotId,r.PDiskId,r.NodeId):(0,v.D)(r.NodeId)&&i&&(k=(0,u.ax)(u.ZP.node,{id:r.NodeId,activeTab:c.pV},{pdiskId:r.PDiskId,vdiskId:(0,t.a2)(r.VDiskId)})),(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(w,{data:r,nodes:a,anchorRef:b,open:g}),(0,l.jsx)("div",{className:R(),ref:b,onMouseEnter:()=>{N(!0)},onMouseLeave:()=>{N(!1)},children:k?(0,l.jsx)(h.h,{to:k,className:R("content"),children:(0,l.jsx)(p.p,{diskAllocatedPercent:r.AllocatedPercent,severity:r.Severity,compact:o})}):(0,l.jsx)(p.p,{diskAllocatedPercent:r.AllocatedPercent,severity:r.Severity,compact:o})})]})};function P(e){let{data:r,nodes:a,compact:n,className:o,stackClassName:i}=e;const c=null===r||void 0===r?void 0:r.Donors,u=c&&c.length>0?(0,l.jsxs)(d,{className:i,children:[(0,l.jsx)(x,{data:r,nodes:a,compact:n}),c.map((e=>{const r=(0,s.Iz)(e);return(0,l.jsx)(x,{data:e,nodes:a,compact:n},(0,t.a2)(r?e.VDiskId:e))}))]}):(0,l.jsx)(x,{data:r,nodes:a,compact:n});return(0,l.jsx)("div",{className:o,children:u})}},92076:(e,r,a)=>{a.d(r,{AH:()=>Q,Ty:()=>w,k8:()=>B,mk:()=>J});var t=a(68963),s=a(71549),n=a(19812),o=a(10502),l=a(14979),i=a(68330),d=a(88776),c=a(99683),u=a(69214),m=a(80816),v=a(79255),p=a(95829),h=a(75850),g=a(24362),N=a(34301),b=a(15106),k=a(55850),D=a(10703),I=a(43817),S=(a(5384),a(75859));const y=(0,g.cn)("global-storage-groups"),w="storageGroupsColumnsWidth",R="MediaType",x="Erasure",P="GroupId",f="Used",j="Limit",E="Usage",L="UsedSpaceFlag",z="Read",G="Write",T="VDisks",C="Degraded",K={name:"PoolName",header:"Pool Name",width:250,render:e=>{var r;let{row:a}=e;const t=null===(r=a.PoolName)||void 0===r?void 0:r.split("/");return t&&(0,S.jsx)(c.l,{wrapperClassName:y("pool-name-wrapper"),content:a.PoolName,placement:["right"],behavior:o.x.Immediate,children:t[t.length-1]})},align:n.ZP.LEFT},M={name:R,header:"Type",width:100,resizeMinWidth:100,align:n.ZP.LEFT,render:e=>{let{row:r}=e;return(0,S.jsxs)(t.Fragment,{children:[(0,S.jsx)(l._,{children:r.MediaType||"\u2014"}),"\xa0",r.Encryption&&(0,S.jsx)(i.J,{content:(0,I.Z)("encrypted"),placement:"right",behavior:o.x.Immediate,children:(0,S.jsx)(l._,{children:(0,S.jsx)(d.J,{data:s.Z,size:18})})})]})},sortable:!1},V={name:x,header:"Erasure",width:100,sortAccessor:e=>e.ErasureSpecies,render:e=>{let{row:r}=e;return r.ErasureSpecies?r.ErasureSpecies:"-"},align:n.ZP.LEFT},F={name:C,header:"Degraded",width:110,resizeMinWidth:110,render:e=>{let{row:r}=e;return r.Degraded?(0,S.jsxs)(l._,{theme:(0,D._O)(r),children:["Degraded: ",r.Degraded]}):"-"},align:n.ZP.LEFT,defaultOrder:n.ZP.DESCENDING},O={name:E,header:"Usage",width:75,resizeMinWidth:75,render:e=>{let{row:r}=e;return r.Limit?(0,S.jsx)(m.a,{value:r.Usage,theme:(0,D.YC)(r.Usage)}):"-"},sortAccessor:e=>e.Limit?e.Usage:null,align:n.ZP.LEFT},U={name:P,header:"Group ID",width:130,render:e=>{let{row:r}=e;return(0,S.jsx)("span",{className:y("group-id"),children:r.GroupID})},sortAccessor:e=>Number(e.GroupID),align:n.ZP.RIGHT},A={name:f,header:"Used",width:100,render:e=>{let{row:r}=e;return(0,k.Uz)(r.Used,!0)},align:n.ZP.RIGHT},Z={name:j,header:"Limit",width:100,render:e=>{let{row:r}=e;return(0,k.Uz)(r.Limit)},align:n.ZP.RIGHT},H={name:L,header:"Space",width:110,render:e=>{let{row:r}=e;const a=r.UsedSpaceFlag;let t=h.K.Red;return a<100?t=h.K.Green:a<1e4?t=h.K.Yellow:a<1e6&&(t=h.K.Orange),(0,S.jsx)(u.A,{status:t})},align:n.ZP.CENTER},_={name:z,header:"Read",width:100,render:e=>{let{row:r}=e;return r.Read?(0,k.Qt)(r.Read):"-"},align:n.ZP.RIGHT},W={name:G,header:"Write",width:100,render:e=>{let{row:r}=e;return r.Write?(0,k.Qt)(r.Write):"-"},align:n.ZP.RIGHT},Y=e=>({name:T,className:y("vdisks-column"),header:"VDisks",render:r=>{var a;let{row:t}=r;return(0,S.jsx)("div",{className:y("vdisks-wrapper"),children:null===(a=t.VDisks)||void 0===a?void 0:a.map((r=>(0,S.jsx)(v.c,{data:r,nodes:e,className:y("vdisks-item")},(0,N.a2)(r.VDiskId))))})},align:n.ZP.CENTER,width:900,resizeable:!1,sortable:!1}),J=()=>[U,M,V,O,A,Z].map((e=>({...e,sortable:!1}))),Q=e=>[K,M,V,F,U,O,A,Y(e)],B=(e,r)=>{const a=((e,r)=>r===p.G.space?e.filter((e=>e.name!==C)):r===p.G.missing?e.filter((e=>e.name!==L)):e.filter((e=>e.name!==C&&e.name!==L)))([K,M,V,F,O,U,A,Z,H,_,W,Y(e)],r);return a.map((e=>({...e,sortable:(0,b.P7)(e.name)})))}},43817:(e,r,a)=>{a.d(r,{Z:()=>o});var t=a(30817);const s=JSON.parse('{"empty.default":"No such groups","empty.out_of_space":"No groups with out of space errors","empty.degraded":"No degraded groups","show_all":"Show all groups","encrypted":"Encrypted group"}'),n=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f","empty.out_of_space":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0433\u0440\u0443\u043f\u043f","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","encrypted":"\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430"}'),o=(0,t.wZ)("ydb-storage-groups",{ru:n,en:s})},10703:(e,r,a)=>{a.d(r,{CZ:()=>v,TP:()=>p,YC:()=>m,_O:()=>u,_r:()=>b});var t=a(81413),s=a(95829),n=a(75850),o=a(99106),l=a(51688),i=a(15106);const d=(0,o.p)(1,2,["success","warning","danger"]),c={"block-4-2":(0,o.p)(1,2,["success","warning","danger"]),"mirror-3-dc":(0,o.p)(1,3,["success","warning","danger"])},u=e=>{var r;return(void 0!==(r=e.ErasureSpecies)&&r in c?c[e.ErasureSpecies]:d)(e.Degraded)},m=(0,o.p)(80,85,["success","warning","danger"]),v=(0,o.p)(80,85,[n.K.Green,n.K.Yellow,n.K.Red]),p={sortValue:l.Hk.NodeId,sortOrder:t.zE},h={sortValue:i.t5.PoolName,sortOrder:t.zE},g={sortValue:i.t5.Degraded,sortOrder:t.hr},N={sortValue:i.t5.Usage,sortOrder:t.hr};function b(e){return e===s.G.missing?g:e===s.G.space?N:h}},95829:(e,r,a)=>{a.d(r,{G:()=>t,d:()=>s});const t={all:"all",missing:"missing",space:"space"},s={groups:"groups",nodes:"nodes"}},92092:(e,r,a)=>{a.d(r,{KJ:()=>g,Y2:()=>h,mD:()=>u,sl:()=>v});var t=a(75850),s=a(21897),n=a(17632),o=a(3764),l=a(51688),i=a(15106);const d={[t.K.Grey]:0,[t.K.Blue]:0,[t.K.Green]:1,[t.K.Yellow]:100,[t.K.Orange]:1e4,[t.K.Red]:1e6},c=(e,r)=>{var a;const t=(0,o.w)(e);return{...t,StoragePoolName:r,Donors:null===t||void 0===t||null===(a=t.Donors)||void 0===a?void 0:a.map((e=>({...e,StoragePoolName:r})))}},u=(e,r)=>{var a;let t,l=0,u=0,m=0,v=0,p=0,h=0;const{Name:g,MediaType:N}=r;if(e.VDisks)for(const i of e.VDisks){const{Replicated:e,VDiskState:r,AvailableSize:a,AllocatedSize:c,PDisk:g,DiskSpace:N,ReadThroughput:b,WriteThroughput:k}=i,{Type:D,State:I,AvailableSize:S}=(0,o.b)(g);e&&I===s.w.Normal&&r===n.H.OK||(l+=1),N&&(u+=d[N]);const y=Number(null!==a&&void 0!==a?a:S)||0,w=Number(c)||0;m+=w,v+=y+w,p+=Number(b)||0,h+=Number(k)||0,t=!D||D!==t&&t?"Mixed":D}const b=null===(a=e.VDisks)||void 0===a?void 0:a.map((e=>c(e,g))),k=(0,i.Ic)({Used:m,Limit:v},5);return{...e,VDisks:b,Usage:k,Read:p,Write:h,PoolName:g,Used:m,Limit:v,Degraded:l,UsedSpaceFlag:u,MediaType:N||t||void 0}},m=e=>{const{VDisks:r=[],PoolName:a,Usage:s=0,Read:n=0,Write:o=0,Used:l=0,Limit:i=0,Degraded:u=0,Kind:m,MediaType:v}=e,p=r.reduce(((e,r)=>{let{DiskSpace:a}=r;return a&&a!==t.K.Grey?e+d[a]:e}),0),h=r.map((e=>c(e,a))),g=Math.floor(100*Number(s));return{...e,UsedSpaceFlag:p,PoolName:a,MediaType:v||m,VDisks:h,Usage:g,Read:Number(n),Write:Number(o),Used:Number(l),Limit:Number(i),Degraded:Number(u)}},v=(e,r)=>{let a=[];return e?a=e.map(m):null===r||void 0===r||r.forEach((e=>{var r;null===(r=e.Groups)||void 0===r||r.forEach((r=>{a.push(u(r,e))}))})),a},p=e=>{var r,a,t;const n=(null===(r=e.PDisks)||void 0===r?void 0:r.filter((e=>e.State!==s.w.Normal)).length)||0,i=null===(a=e.PDisks)||void 0===a?void 0:a.map((r=>({...(0,o.b)(r),NodeId:e.NodeId}))),d=null===(t=e.VDisks)||void 0===t?void 0:t.map((r=>({...(0,o.w)(r),NodeId:e.NodeId})));return{...(0,l.Ns)(e.SystemState),NodeId:e.NodeId,PDisks:i,VDisks:d,Missing:n}},h=e=>{const{Nodes:r,TotalNodes:a,FoundNodes:t}=e,s=null===r||void 0===r?void 0:r.map(p);return{nodes:s,total:Number(a)||(null===s||void 0===s?void 0:s.length),found:Number(t)}},g=e=>{const{StoragePools:r,StorageGroups:a,TotalGroups:t,FoundGroups:s}=e,n=v(a,r);return{groups:n,total:Number(t)||n.length,found:Number(s)}}},21897:(e,r,a)=>{let t;a.d(r,{w:()=>t}),function(e){e.Initial="Initial",e.InitialFormatRead="InitialFormatRead",e.InitialFormatReadError="InitialFormatReadError",e.InitialSysLogRead="InitialSysLogRead",e.InitialSysLogReadError="InitialSysLogReadError",e.InitialSysLogParseError="InitialSysLogParseError",e.InitialCommonLogRead="InitialCommonLogRead",e.InitialCommonLogReadError="InitialCommonLogReadError",e.InitialCommonLogParseError="InitialCommonLogParseError",e.CommonLoggerInitError="CommonLoggerInitError",e.Normal="Normal",e.OpenFileError="OpenFileError",e.ChunkQuotaError="ChunkQuotaError",e.DeviceIoError="DeviceIoError",e.Missing="Missing",e.Timeout="Timeout",e.NodeDisconnected="NodeDisconnected",e.Unknown="Unknown"}(t||(t={}))},11431:(e,r,a)=>{let t;a.d(r,{w:()=>t}),function(e){e.v1="v1",e.v2="v2"}(t||(t={}))},17632:(e,r,a)=>{let t;a.d(r,{H:()=>t}),function(e){e.Initial="Initial",e.LocalRecoveryError="LocalRecoveryError",e.SyncGuidRecovery="SyncGuidRecovery",e.SyncGuidRecoveryError="SyncGuidRecoveryError",e.OK="OK",e.PDiskError="PDiskError"}(t||(t={}))},48169:(e,r,a)=>{a.d(r,{ok:()=>o,wq:()=>n,wz:()=>i,yf:()=>l});var t=a(27102),s=a(55850);const n=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.y3;const a=/\/node\/\d+\/?$/g;return a.test(String(r))?String(r).replace(a,"/node/".concat(e,"/")):"".concat(null!==r&&void 0!==r?r:"","/node/").concat(e,"/")},o=e=>{let{nodeId:r,pDiskId:a,host:t}=e;const o="actors/pdisks/pdisk"+(0,s.bJ)(a);return n(r,t)+o},l=e=>{let{nodeId:r,pDiskId:a,vDiskSlotId:t,host:o}=e;const l="actors/vdisks/vdisk"+(0,s.bJ)(a)+"_"+(0,s.bJ)(t);return n(r,o)+l};function i(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"TabletID",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.y3;const n=r?"/".concat(r):"";return"".concat(s,"/tablets").concat(n,"?").concat(a,"=").concat(e)}},77072:(e,r,a)=>{a.d(r,{i6:()=>l,mG:()=>o,mr:()=>d,oO:()=>n,s:()=>i,tH:()=>c});var t=a(21897),s=a(17632);const n={Grey:0,Green:1,Blue:2,Yellow:3,Orange:4,Red:5},o=Object.entries(n).reduce(((e,r)=>{let[a,t]=r;return{...e,[t]:a}}),{}),l=n.Grey,i=o[l],d={[s.H.OK]:n.Green,[s.H.Initial]:n.Yellow,[s.H.SyncGuidRecovery]:n.Yellow,[s.H.LocalRecoveryError]:n.Red,[s.H.SyncGuidRecoveryError]:n.Red,[s.H.PDiskError]:n.Red},c={[t.w.Initial]:n.Grey,[t.w.Normal]:n.Green,[t.w.InitialFormatRead]:n.Yellow,[t.w.InitialSysLogRead]:n.Yellow,[t.w.InitialCommonLogRead]:n.Yellow,[t.w.InitialFormatReadError]:n.Red,[t.w.InitialSysLogReadError]:n.Red,[t.w.InitialSysLogParseError]:n.Red,[t.w.InitialCommonLogReadError]:n.Red,[t.w.InitialCommonLogParseError]:n.Red,[t.w.CommonLoggerInitError]:n.Red,[t.w.OpenFileError]:n.Red,[t.w.ChunkQuotaError]:n.Red,[t.w.DeviceIoError]:n.Red}},92666:(e,r,a)=>{a.d(r,{CH:()=>o,Iz:()=>s,b2:()=>n});var t=a(77072);function s(e){return"VDiskId"in e}function n(e){return void 0===e?t.s:t.mG[e]||t.s}function o(e,r){return"".concat(e,"-").concat(r)}},3764:(e,r,a)=>{a.d(r,{b:()=>p,w:()=>v});var t=a(75850),s=a(99106),n=a(77072);const o=(0,s.p)(85,95,[t.K.Green,t.K.Yellow,t.K.Red]);function l(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=function(e){return r=e,void 0!==r&&r in n.tH?n.tH[e]:n.i6;var r}(e.State),t=o(r);return a!==n.i6&&t?Math.max(a,n.oO[t]):a}var i=a(92666);function d(e){if(!(0,i.Iz)(e))return n.i6;const{DiskSpace:r,VDiskState:a,FrontQueues:t,Replicated:s,DonorMode:o}=e;if(!a)return n.i6;const l=c(r),d=function(e){var r;if(!e)return n.i6;return null!==(r=n.mr[e])&&void 0!==r?r:n.i6}(a),u=Math.min(n.oO.Orange,c(t));let m=Math.max(l,d,u);return s||o||m!==n.oO.Green||(m=n.oO.Blue),m}function c(e){var r;return e&&null!==(r=n.oO[e])&&void 0!==r?r:n.i6}const u={HDD:"HDD",SSD:"SSD",MVME:"NVME"};function m(e){if(!e)return;const r=function(e,r){const a={};return Object.entries(r).reduce(((r,t)=>{let[s,n]=t;const o=e.length-r,l=o-n;return a[s]=e.substring(l,o)||"0",r+n}),0),a}(BigInt(e).toString(2),{isSolidState:1,kind:55,typeExt:8});if("1"===r.isSolidState)switch(parseInt(r.typeExt,2)){case 0:return u.SSD;case 2:return u.MVME}else if("0"===r.typeExt)return u.HDD}function v(){var e,r,a;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=t.PDisk?p(t.PDisk):void 0,n=null!==(e=t.PDiskId)&&void 0!==e?e:null===s||void 0===s?void 0:s.PDiskId,o=Number(null!==(r=t.AvailableSize)&&void 0!==r?r:null===s||void 0===s?void 0:s.AvailableSize),l=Number(t.AllocatedSize),i=l+o,c=Math.round(100*l/i),u=null===(a=t.Donors)||void 0===a?void 0:a.map((e=>v({...e,DonorMode:!0}))),m=d(t);return{...t,PDisk:s,PDiskId:n,Donors:u,Severity:m,TotalSize:i,AllocatedPercent:c}}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{AvailableSize:a,TotalSize:t,Category:s}=e,n=m(s),o=Number(a),i=Number(t),d=i-o,c=Math.round(100*d/i),u=l(e,c);return{...r,...e,Type:n,Severity:u,AllocatedSize:d,AllocatedPercent:c}}},99106:(e,r,a)=>{a.d(r,{p:()=>t});const t=(e,r,a)=>t=>0<=t&&t<e?a[0]:e<=t&&t<r?a[1]:r<=t?a[2]:void 0},89712:(e,r,a)=>{a.d(r,{M:()=>o});var t=a(68963),s=a(2639),n=a(18193);const o=e=>{const r=t.useCallback((()=>e?n.r.readUserSettingsValue(e,{}):{}),[e]),a=t.useCallback((r=>{e&&n.r.setUserSettingsValue(e,r)}),[e]);return(0,s.M)({saveSizes:a,getSizes:r})}},15106:(e,r,a)=>{a.d(r,{Ic:()=>t,P7:()=>n,t5:()=>s});const t=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const a=e.Limit?100*e.Used/e.Limit:0;return Math.floor(a/r)*r},s={PoolName:"PoolName",Kind:"Kind",MediaType:"MediaType",Erasure:"Erasure",Degraded:"Degraded",Usage:"Usage",GroupId:"GroupId",Used:"Used",Limit:"Limit",Read:"Read",Write:"Write"},n=e=>Object.values(s).includes(e)},5384:()=>{}}]);