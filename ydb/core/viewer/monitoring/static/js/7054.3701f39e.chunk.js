"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[7054],{74003:(e,t,n)=>{n.d(t,{q:()=>p});var a=n(26714),l=n(72616),o=n(98647),s=n(78759),r=n(99294),i=n(55842),d=n(37711);const c=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),u=(0,d.wZ)("ydb-diagnostics-autorefresh-control",{en:c});var h=n(10161);const m=(0,r.cn)("auto-refresh-control");function p(e){let{className:t}=e;const n=(0,i.zL)(),[r,d]=(0,i.Rj)();return(0,h.jsxs)("div",{className:m(null,t),children:[(0,h.jsx)(l.z,{view:"flat",onClick:()=>{n(s.h.util.invalidateTags(["All"]))},extraProps:{"aria-label":u("Refresh")},children:(0,h.jsx)(l.z.Icon,{children:(0,h.jsx)(a.Z,{})})}),(0,h.jsxs)(o.P,{value:[String(r)],onUpdate:e=>{d(Number(e))},width:85,children:[(0,h.jsx)(o.P.Option,{value:"0",children:u("None")}),(0,h.jsx)(o.P.Option,{value:"15000",children:u("15 sec")}),(0,h.jsx)(o.P.Option,{value:"60000",children:u("1 min")}),(0,h.jsx)(o.P.Option,{value:"120000",children:u("2 min")}),(0,h.jsx)(o.P.Option,{value:"300000",children:u("5 min")})]})]})}},55982:(e,t,n)=>{n.d(t,{U:()=>d});var a=n(34706),l=n(72616),o=n(16318),s=n(47945),r=n(51403),i=n(10161);function d(e){let{children:t,onConfirmAction:n,onConfirmActionSuccess:d,dialogHeader:c,dialogText:u,retryButtonText:h,buttonDisabled:m=!1,buttonView:p="action",buttonClassName:g,withPopover:v=!1,popoverContent:b,popoverPlacement:x="right",popoverDisabled:f=!0}=e;const[w,y]=a.useState(!1),[j,N]=a.useState(!1),[T,I]=a.useState(!1),S=()=>(0,i.jsx)(l.z,{onClick:()=>y(!0),view:p,disabled:m,loading:!m&&j,className:g,children:t});return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(s.g,{visible:w,header:c,text:u,withRetry:T,retryButtonText:h,onConfirm:async e=>{N(!0),await n(e)},onConfirmActionSuccess:async()=>{I(!1);try{await(null===d||void 0===d?void 0:d())}finally{N(!1)}},onConfirmActionError:e=>{I((0,r.q)(e)),N(!1)},onClose:()=>{y(!1)}}),v?(0,i.jsx)(o.J,{content:b,placement:x,disabled:f,children:S()}):S()]})}},47329:(e,t,n)=>{n.d(t,{m:()=>u});var a=n(81187),l=n(72616),o=n(69847),s=n(92011),r=n(99294),i=n(10161);const d=(0,r.cn)("clipboard-button");function c(e){let{className:t,status:n,title:s,...r}=e;return(0,i.jsx)(a.u,{content:"success"===n?"Copied!":s||"Copy",placement:"bottom-start",children:(0,i.jsx)(l.z,{...r,className:d(null,t),children:(0,i.jsx)(l.z.Icon,{children:(0,i.jsx)(o.K,{status:n,size:16})})})})}function u(e){let{text:t,...n}=e;return(0,i.jsx)(s.h,{text:t,timeout:1e3,children:e=>(0,i.jsx)(c,{...n,status:e})})}},47945:(e,t,n)=>{n.d(t,{g:()=>v});var a=n(34706),l=n(3948),o=n(15268),s=n(19912),r=n(68585),i=n(14561),d=n(99294),c=n(37711);const u=JSON.parse('{"default-error":"Something went wrong, action cannot be completed","no-rights-error":"You don\'t have enough rights to complete the operation","button-confirm":"Confirm","button-retry":"Retry","button-cancel":"Cancel","button-close":"Close","checkbox-text":"I understand what I\'m doing"}'),h=(0,c.wZ)("ydb-critical-action-dialog",{en:u});var m=n(10161);const p=(0,d.cn)("ydb-critical-dialog"),g=e=>403===e.status?h("no-rights-error"):e.statusText?e.statusText:h("default-error");function v(e){let{visible:t,header:n,text:d,withRetry:c,retryButtonText:u,withCheckBox:v,onClose:b,onConfirm:x,onConfirmActionSuccess:f,onConfirmActionError:w}=e;const[y,j]=a.useState(!1),[N,T]=a.useState(),[I,S]=a.useState(!1),C=async e=>(j(!0),x(e).then((()=>{f(),b()})).catch((e=>{w(e),T(e)})).finally((()=>{j(!1)})));return(0,m.jsx)(r.V,{open:t,hasCloseButton:!1,className:p(),size:"s",onClose:b,onTransitionExited:()=>{T(void 0),S(!1)},children:N?(0,m.jsxs)(a.Fragment,{children:[(0,m.jsx)(r.V.Header,{caption:n}),(0,m.jsx)(r.V.Body,{className:p("body"),children:(0,m.jsxs)("div",{className:p("body-message",{error:!0}),children:[(0,m.jsx)("span",{className:p("error-icon"),children:(0,m.jsx)(l.Z,{width:"24",height:"22"})}),g(N)]})}),(0,m.jsx)(r.V.Footer,{loading:!1,preset:"default",textButtonApply:c?u||h("button-retry"):void 0,textButtonCancel:h("button-close"),onClickButtonApply:()=>C(!0),onClickButtonCancel:b})]}):(0,m.jsxs)(a.Fragment,{children:[(0,m.jsx)(r.V.Header,{caption:n}),(0,m.jsxs)(r.V.Body,{className:p("body"),children:[(0,m.jsxs)("div",{className:p("body-message",{warning:!0}),children:[(0,m.jsx)("span",{className:p("warning-icon"),children:(0,m.jsx)(i.J,{data:o.Z,size:24})}),d]}),v?(0,m.jsx)(s.X,{checked:I,onUpdate:S,children:h("checkbox-text")}):null]}),(0,m.jsx)(r.V.Footer,{loading:y,preset:"default",textButtonApply:h("button-confirm"),textButtonCancel:h("button-cancel"),propsButtonApply:{type:"submit",disabled:v&&!I},onClickButtonCancel:b,onClickButtonApply:()=>C()})]})})}},51403:(e,t,n)=>{n.d(t,{q:()=>a});const a=e=>Boolean(e&&"object"===typeof e&&"retryPossible"in e&&e.retryPossible)},89516:(e,t,n)=>{n.d(t,{a:()=>r});var a=n(99294),l=n(73287),o=n(10161);const s=(0,a.cn)("ydb-entity-page-title");function r(e){let{entityName:t,status:n,id:a,className:r}=e;return(0,o.jsxs)("div",{className:s(null,r),children:[(0,o.jsx)("span",{className:s("prefix"),children:t}),(0,o.jsx)(l.J,{className:s("icon"),status:n,size:"s"}),a]})}},62508:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(17823),l=n(77468),o=n(99294),s=n(47329),r=n(32489),i=n(73287),d=n(10161);const c=(0,o.cn)("entity-status");function u(e){let{status:t=l.K.Grey,name:n="",label:o,path:u,iconPath:h,size:m="s",mode:p="color",showStatus:g=!0,externalLink:v=!1,withLeftTrim:b=!1,hasClipboardButton:x,clipboardButtonAlwaysVisible:f=!1,className:w,additionalControls:y}=e;const j=()=>g?(0,d.jsx)(i.J,{className:c("icon"),status:t,size:m,mode:p}):null;return(0,d.jsxs)("div",{className:c(null,w),title:n,children:[h?(N=h,(0,d.jsx)(a.r,{target:"_blank",href:N,children:j()})):j(),o&&(0,d.jsx)("span",{title:o,className:c("label",{size:m,state:t.toLowerCase()}),children:o}),(0,d.jsx)("span",{className:c("link",{"with-left-trim":b}),children:u?v?(0,d.jsx)(a.r,{className:c("name"),href:u,children:n}):(0,d.jsx)(r.h,{className:c("name"),to:u,children:n}):n&&(0,d.jsx)("span",{className:c("name"),children:n})}),x&&(0,d.jsx)(s.m,{text:n,size:"s",className:c("clipboard-button",{visible:f})}),y&&(0,d.jsx)("span",{className:c("additional-controls "),children:y})]});var N}},22136:(e,t,n)=>{n.d(t,{B:()=>h});var a=n(41577),l=n(99294),o=n(74003),s=n(5194),r=n(83658),i=n(10161);const d=e=>{let{delay:t=600,className:n}=e;const[a]=(0,r.$)(t);return a?(0,i.jsx)(s.O,{className:n}):null},c=(0,l.cn)("ydb-page-meta");function u(e){let{items:t,loading:n}=e;return(0,i.jsx)("div",{className:c("info"),children:n?(0,i.jsx)(d,{className:c("skeleton")}):t.filter((e=>Boolean(e))).join("\xa0\xa0\xb7\xa0\xa0")})}function h(e){let{className:t,...n}=e;return(0,i.jsxs)(a.k,{gap:1,alignItems:"center",justifyContent:"space-between",className:c(null,t),children:[(0,i.jsx)(u,{...n}),(0,i.jsx)(o.q,{})]})}},74116:(e,t,n)=>{n.d(t,{G:()=>d});var a=n(59769),l=n(71624),o=n(99294),s=n(46154),r=n(10161);const i=(0,o.cn)("ydb-resizeable-data-table");function d(e){let{columnsWidthLSKey:t,columns:n,settings:o,wrapperClassName:d,...c}=e;const[u,h]=(0,s.M)(t),m=(0,a.B)(n,u),p={...o,defaultResizeable:!0};return(0,r.jsx)("div",{className:i(null,d),children:(0,r.jsx)(l.ZP,{theme:"yandex-cloud",columns:m,onResize:h,settings:p,...c})})}},73287:(e,t,n)=>{n.d(t,{J:()=>h});var a=n(29254),l=n(96334),o=n(15268),s=n(14561),r=n(77468),i=n(99294),d=n(10161);const c=(0,i.cn)("ydb-status-icon"),u={[r.K.Blue]:a.Z,[r.K.Yellow]:l.Z,[r.K.Orange]:o.Z,[r.K.Red]:l.Z};function h(e){let{status:t=r.K.Grey,size:n="s",mode:a="color",className:l}=e;const o={state:t.toLowerCase(),size:n};return"icons"===a&&t in u?(0,d.jsx)(s.J,{className:c("status-icon",o,l),data:u[t]}):(0,d.jsx)("div",{className:c("status-color",o,l)})}},59907:(e,t,n)=>{n.d(t,{f:()=>s});var a=n(2634),l=n(55973),o=n(10161);function s(e){let{state:t}=e;return(0,o.jsx)(a._,{theme:(0,l.KR)(t),children:t})}},65874:(e,t,n)=>{n.r(t),n.d(t,{Tablet:()=>fe,b:()=>me});var a=n(34706),l=n(41577),o=n(72555),s=n(64485),r=n(42152),i=n(55783),d=n(99495),c=n(75475),u=n(90205),h=n(89516),m=n(15327),p=n(67653),g=n(48653),v=n(22136),b=n(46878),x=n(65e3),f=n(85709),w=n(90195),y=n(6215),j=n(77468),N=n(9038),T=n(99294),I=n(27810),S=n(55842),C=n(42568),k=n(87130);const _=e=>a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),a.createElement("path",{fill:"currentColor",d:"M13.756 10.164c1.665-.962 1.665-3.366 0-4.328L5.251.919C3.584-.045 1.5 1.158 1.5 3.083v9.834c0 1.925 2.084 3.128 3.751 2.164l8.505-4.917Z"}));var D=n(14561),z=n(55982),A=n(37711);const E=JSON.parse('{"tablet.header":"Tablet","tablet.meta-database":"Database","tablet.meta-follower":"Follower","controls.kill":"Restart","controls.stop":"Stop","controls.resume":"Resume","controls.kill-not-allowed":"You don\'t have enough rights to restart tablet","controls.stop-not-allowed":"You don\'t have enough rights to stop tablet","controls.resume-not-allowed":"You don\'t have enough rights to resume tablet","dialog.kill-header":"Restart tablet","dialog.stop-header":"Stop tablet","dialog.resume-header":"Resume tablet","dialog.kill-text":"The tablet will be restarted. Do you want to proceed?","dialog.stop-text":"The tablet will be stopped. Do you want to proceed?","dialog.resume-text":"The tablet will be resumed. Do you want to proceed?","emptyState":"The tablet was not found","label_tablet-history":"Tablets","label_tablet-channels":"Storage"}'),P=(0,A.wZ)("ydb-tablet-page",{en:E});function K(e){return Boolean(e&&"0"!==e)}var R=n(10161);const B=e=>{let{tablet:t}=e;const{TabletId:n,HiveId:o}=t,s=(0,S.ix)(x.VH),[r]=y._.useKillTabletMutation(),[i]=y._.useStopTabletMutation(),[d]=y._.useResumeTabletMutation();if(!n)return null;const c=K(o),u=t.State===N.g.Stopped,h=t.State!==N.g.Stopped&&t.State!==N.g.Dead,m=t.State===N.g.Stopped||t.State===N.g.Deleted;return(0,R.jsxs)(l.k,{gap:2,wrap:"nowrap",children:[(0,R.jsxs)(z.U,{dialogHeader:P("dialog.kill-header"),dialogText:P("dialog.kill-text"),onConfirmAction:()=>r({id:n}).unwrap(),buttonDisabled:u||!s,withPopover:!0,buttonView:"normal",popoverContent:P("controls.kill-not-allowed"),popoverPlacement:"bottom",popoverDisabled:s,children:[(0,R.jsx)(D.J,{data:C.Z}),P("controls.kill")]}),c&&(0,R.jsxs)(a.Fragment,{children:[(0,R.jsxs)(z.U,{dialogHeader:P("dialog.stop-header"),dialogText:P("dialog.stop-text"),onConfirmAction:()=>i({id:n,hiveId:o}).unwrap(),buttonDisabled:m||!s,withPopover:!0,buttonView:"normal",popoverContent:P("controls.stop-not-allowed"),popoverPlacement:"bottom",popoverDisabled:s,children:[(0,R.jsx)(D.J,{data:k.Z}),P("controls.stop")]}),(0,R.jsxs)(z.U,{dialogHeader:P("dialog.resume-header"),dialogText:P("dialog.resume-text"),onConfirmAction:()=>d({id:n,hiveId:o}).unwrap(),buttonDisabled:h||!s,withPopover:!0,buttonView:"normal",popoverContent:P("controls.resume-not-allowed"),popoverPlacement:"bottom",popoverDisabled:s,children:[(0,R.jsx)(D.J,{data:_}),P("controls.resume")]})]})]})};var Z=n(26836),F=n(41591),G=n(90808),O=n(59907),q=n(14075),V=n(70340),H=n(75544);const L=JSON.parse('{"field_scheme-shard":"SchemeShard","field_follower":"Follower","field_generation":"Generation","field_hive":"HiveId","field_state":"State","field_uptime":"Uptime","field_node":"Node","field_links":"Links","field_developer-ui-app":"App","field_developer-ui-counters":"Counters","field_developer-ui-executor":"Executor DB internals","field_developer-ui-state":"State Storage","title_info":"Info","title_links":"Links"}'),M=(0,A.wZ)("ydb-tablet-info",{en:L}),Y=(0,T.cn)("ydb-tablet-info"),J=e=>{let{tablet:t}=e;const n=(0,S.ix)(x.VH),{ChangeTime:a,Generation:o,FollowerId:s,NodeId:r,HiveId:i,State:d,TenantId:{SchemeShard:c}={},TabletId:u}=t,h=K(i),m=d===N.g.Active,p=[];h&&p.push({label:M("field_hive"),value:(0,R.jsx)(Z.rU,{to:(0,b.fK)(i),className:Y("link"),children:i})}),c&&p.push({label:M("field_scheme-shard"),value:(0,R.jsx)(Z.rU,{to:(0,b.fK)(c),className:Y("link"),children:c})}),p.push({label:M("field_state"),value:(0,R.jsx)(O.f,{state:d})}),m&&p.push({label:M("field_uptime"),value:(0,q.fG)(a)}),p.push({label:M("field_generation"),value:o},{label:M("field_node"),value:(0,R.jsx)(Z.rU,{className:Y("link"),to:(0,H.a3)(String(r)),children:r})}),s&&p.push({label:M("field_follower"),value:s});return(0,R.jsxs)(l.k,{gap:10,wrap:"nowrap",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:Y("section-title"),children:M("title_info")}),(0,R.jsx)(F._P,{info:p})]}),n&&u?(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:Y("section-title"),children:M("title_links")}),(0,R.jsxs)(l.k,{direction:"column",gap:3,children:[(0,R.jsx)(G.j,{title:M("field_developer-ui-app"),url:(0,V.wz)(u,"app")}),(0,R.jsx)(G.j,{title:M("field_developer-ui-counters"),url:(0,V.wz)(u,"counters")}),(0,R.jsx)(G.j,{title:M("field_developer-ui-executor"),url:(0,V.wz)(u,"executorInternals")}),(0,R.jsx)(G.j,{title:M("field_developer-ui-state"),url:(0,V.wz)(u,void 0,"SsId")})]})]}):null]})};var U=n(8475),$=n(72001),Q=n(72616),W=n(81778);const X=JSON.parse('{"label_channel-index":"Channel","label_storage-pool":"Storage Pool Name","label_group-id":"Group ID","label_generation":"From generation","label_timestamp":"Timestamp"}'),ee=(0,A.wZ)("ydb-tablet-storage-info",{en:X}),te=(0,T.cn)("ydb-tablet-storage-info");function ne(e){let{name:t,className:n}=e;return(0,R.jsx)("div",{className:te("table-header-content",n),children:t})}function ae(e,t){const n=e.getValue(),a="function"===typeof t?t(n):n;return(0,R.jsx)("div",{className:te("metrics-cell"),children:a})}function le(e){let{row:t,name:n,hasExpand:a}=e;const o=t.getCanExpand();return(0,R.jsxs)(l.k,{gap:1,alignItems:"flex-start",className:te("name-wrapper"),children:[o&&(0,R.jsx)(Q.z,{view:"flat",size:"xs",onClick:t.getToggleExpandedHandler(),children:(0,R.jsx)(Q.z.Icon,{children:(0,R.jsx)(W.F,{direction:t.getIsExpanded()?"bottom":"right",size:14})})}),(0,R.jsx)("div",{className:te("name-content",{"no-control":a&&!o}),children:n})]})}function oe(e){let{data:t}=e;const[n,l]=a.useState({}),o=a.useMemo((()=>function(e){var t;if(!e)return[];const{BoundChannels:n,TabletStorageInfo:a={}}=e,l=null!==(t=a.Channels)&&void 0!==t?t:[],o=[];for(const r of l){var s;const e=r.Channel,t=r.History;if(!e||!t||!t.length)continue;const a=[...t];a.reverse();const[l,...i]=a,d={...l,storagePoolName:null===n||void 0===n||null===(s=n[e])||void 0===s?void 0:s.StoragePoolName,channelIndex:e,children:i};o.push(d)}return o}(t)),[t]),s=a.useMemo((()=>o.some((e=>{var t;return null===(t=e.children)||void 0===t?void 0:t.length}))),[o]),r=a.useMemo((()=>{return e=s,[{accessorKey:"channelIndex",header:()=>(0,R.jsx)(ne,{name:ee("label_channel-index")}),size:50,cell:ae,meta:{align:"right"}},{accessorKey:"storagePoolName",header:()=>(0,R.jsx)(ne,{name:ee("label_storage-pool")}),size:200,cell:ae},{accessorKey:"GroupID",header:()=>(0,R.jsx)(ne,{name:ee("label_group-id"),className:e?te("with-padding"):void 0}),size:100,cell:t=>(0,R.jsx)(le,{row:t.row,name:t.getValue(),hasExpand:e})},{accessorKey:"FromGeneration",header:()=>(0,R.jsx)(ne,{name:ee("label_generation")}),size:100,cell:ae,meta:{align:"right"}},{accessorKey:"Timestamp",header:()=>(0,R.jsx)(ne,{name:ee("label_timestamp")}),size:200,cell:e=>ae(e,q.i$),meta:{align:"right"}}];var e}),[s]),i=(0,U.x)({columns:r,data:o,getSubRows:e=>e.children,enableExpanding:!0,onExpandedChange:l,state:{expanded:n}});return(0,R.jsx)("div",{children:(0,R.jsx)($.i,{table:i,headerCellClassName:e=>{var t;let{column:n}=e;const a=null===(t=n.columnDef.meta)||void 0===t?void 0:t.align;return te("table-header-cell",{align:a})},cellClassName:e=>{var t,n;const a=null===e||void 0===e||null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.align,l=null===e||void 0===e||null===(n=e.column.columnDef.meta)||void 0===n?void 0:n.verticalAlign;return te("table-cell",{align:a,"vertical-align":l})},className:te("table")})})}var se=n(71624),re=n(62508),ie=n(32489),de=n(74116);const ce=[{name:"Generation",align:se.ZP.RIGHT,render:e=>{let{row:t}=e;return t.generation}},{name:"Change time",align:se.ZP.RIGHT,sortable:!1,render:e=>{let{row:t}=e;return(0,q.fG)(t.changeTime)}},{name:"State",sortable:!1,render:e=>{let{row:t}=e;return(0,R.jsx)(O.f,{state:t.state})}},{name:"Follower ID",sortable:!1,render:e=>{let{row:t}=e;return t.leader?"leader":t.followerId}},{name:"Node ID",align:se.ZP.RIGHT,sortable:!1,render:e=>{let{row:t}=e;return(0,R.jsx)(ie.h,{to:(0,H.a3)(t.nodeId),children:t.nodeId})}},{name:"Node FQDN",sortable:!1,width:300,render:e=>{let{row:t}=e;return t.fqdn?(0,R.jsx)(re.A,{name:t.fqdn,showStatus:!1,hasClipboardButton:!0}):(0,R.jsx)("span",{children:"\u2014"})}}],ue={displayIndices:!1},he=e=>{let{history:t}=e;return(0,R.jsx)(de.G,{columnsWidthLSKey:"tabletTableColumnsWidth",data:t,columns:ce,settings:ue,initialSortOrder:{columnId:"Generation",order:se.ZP.DESCENDING}})},me=(0,T.cn)("ydb-tablet-page"),pe={history:"history",channels:"channels"},ge=[{id:pe.history,get title(){return P("label_tablet-history")}},{id:pe.channels,get title(){return P("label_tablet-channels")},isAdvanced:!0}],ve=c.z.nativeEnum(pe).catch(pe.history),be=c.z.nativeEnum(N.F).or(c.z.undefined()).catch(void 0),xe={nodeId:d.StringParam,tenantName:d.StringParam,type:d.StringParam,clusterName:d.StringParam,activeTab:d.StringParam};function fe(){var e,t,n;const o=(0,S.zL)(),{id:c}=(0,i.UO)(),[{nodeId:u,tenantName:h,type:p,clusterName:b}]=(0,d.useQueryParams)(xe),[x]=(0,S.Rj)(),{currentData:j,isFetching:N,error:T}=y._.useGetTabletQuery({id:c,database:null!==h&&void 0!==h?h:void 0,nodeId:null!==u&&void 0!==u?u:void 0},{pollingInterval:x}),C=N&&void 0===j,{data:k={},history:_=[]}=j||{},{currentData:D}=y._.useGetTabletDescribeQuery(k.TenantId?{tenantId:k.TenantId}:s.CN),z=null!==(e=null!==(t=k.NodeId)&&void 0!==t?t:u)&&void 0!==e?e:void 0,A=null!==(n=D||h)&&void 0!==n?n:void 0,E=function(e){const{currentData:t}=w.N.useGetNodeInfoQuery(e?{nodeId:e}:s.CN);let n;if(t){var a;n=!(null!==t&&void 0!==t&&null!==(a=t.Tenants)&&void 0!==a&&a[0])?"Storage":"Compute"}return n}(null===z||void 0===z?void 0:z.toString()),K=k.Type||be.parse(p);a.useEffect((()=>{o((0,f.J)("tablet",{nodeId:z,nodeRole:E,tenantName:null!==h&&void 0!==h?h:void 0,tabletId:c,tabletType:K}))}),[o,h,c,z,E,K]);const{Leader:B,Type:Z}=k,F=[];return A&&F.push(`${P("tablet.meta-database")}: ${A}`),Z&&F.push(Z),!1===B&&F.push(P("tablet.meta-follower").toUpperCase()),(0,R.jsxs)(l.k,{gap:5,direction:"column",className:me(),children:[(0,R.jsx)(r.ql,{children:(0,R.jsx)("title",{children:`${c} \u2014 ${P("tablet.header")} \u2014 ${A||b||I.DO}`})}),(0,R.jsx)(v.B,{items:F}),(0,R.jsxs)(g.s,{loading:C,size:"l",children:[T?(0,R.jsx)(m.V,{error:T}):null,j?(0,R.jsx)(we,{id:c,tablet:k,history:_}):null]})]})}function we(e){let{id:t,tablet:n,history:a}=e;const o=!Object.keys(n).length,{Overall:s,HiveId:r}=n;return(0,R.jsxs)(u.$,{title:P("emptyState"),className:me("placeholder"),isEmpty:o,children:[(0,R.jsxs)(l.k,{gap:5,direction:"column",children:[(0,R.jsx)(h.a,{entityName:P("tablet.header"),status:null!==s&&void 0!==s?s:j.K.Grey,id:t}),(0,R.jsx)(B,{tablet:n}),(0,R.jsx)(J,{tablet:n})]}),(0,R.jsx)(ye,{id:t,hiveId:r,history:a})]})}function ye(e){var t;let{id:n,hiveId:s,history:r}=e;const[{activeTab:i,...c},u]=(0,d.useQueryParams)(xe),h=!(0,S.ix)(x.VH)||!K(s);let m=ve.parse(i);return h&&null!==(t=ge.find((e=>e.id===m)))&&void 0!==t&&t.isAdvanced&&(m=pe.history),a.useEffect((()=>{i!==m&&u({activeTab:m},"replaceIn")}),[i,m,u]),(0,R.jsxs)(l.k,{gap:5,direction:"column",children:[(0,R.jsx)("div",{children:(0,R.jsx)(o.m,{size:"l",items:ge.filter((e=>{let{isAdvanced:t}=e;return!t||!h})),activeTab:m,wrapTo:(e,t)=>{const a=(0,b.fK)(n,{...c,activeTab:e.id});return(0,R.jsx)(p.h,{to:a,children:t},e.id)}})}),"history"===m?(0,R.jsx)(he,{history:r}):null,"channels"!==m||h?null:(0,R.jsx)(je,{id:n,hiveId:s})]})}function je(e){let{id:t,hiveId:n}=e;const[a]=(0,S.Rj)(),{currentData:l,error:o,isFetching:s}=y._.useGetAdvancedTableInfoQuery({id:t,hiveId:n},{pollingInterval:a}),r=s&&void 0===l;return(0,R.jsxs)(g.s,{loading:r,size:"l",children:[o?(0,R.jsx)(m.V,{error:o}):null,l?(0,R.jsx)(oe,{data:l}):null]})}},90195:(e,t,n)=>{n.d(t,{N:()=>s});var a=n(78759),l=n(96183);const o=e=>{var t;if(null===(t=e.SystemStateInfo)||void 0===t||!t.length)return{};const n=e.SystemStateInfo[0];return(0,l.Ns)(n)},s=a.h.injectEndpoints({endpoints:e=>({getNodeInfo:e.query({queryFn:async(e,t)=>{let{nodeId:n}=e,{signal:a}=t;try{const e=await window.api.getNodeInfo(n,{signal:a});return{data:o(e)}}catch(l){return{error:l}}},providesTags:["All"]}),getNodeStructure:e.query({queryFn:async(e,t)=>{let{nodeId:n}=e,{signal:a}=t;try{return{data:await window.api.getStorageInfo({nodeId:n},{signal:a})}}catch(l){return{error:l}}},providesTags:["All"]})}),overrideExisting:"throw"})},6215:(e,t,n)=>{n.d(t,{_:()=>l});var a=n(96183);const l=n(78759).h.injectEndpoints({endpoints:e=>({getTablet:e.query({queryFn:async(e,t)=>{let{id:n,database:l,nodeId:o}=e,{signal:s}=t;try{const[e,t,r]=await Promise.all([window.api.getTablet({id:n,database:l,nodeId:o},{signal:s}),window.api.getTabletHistory({id:n,database:l,nodeId:o},{signal:s}),window.api.getNodesList({signal:s})]),i=(0,a.Xs)(r),d=Object.keys(t).reduce(((e,n)=>{var a;const l=null===(a=t[n])||void 0===a?void 0:a.TabletStateInfo;if(l&&l.length){const t=l.find((e=>e.Leader))||l[0],{ChangeTime:a,Generation:o,State:s,Leader:r,FollowerId:d}=t,c=i&&n?i.get(Number(n)):void 0;"Dead"!==s&&e.push({nodeId:n,generation:o,changeTime:a,state:s,leader:r,followerId:d,fqdn:c})}return e}),[]),{TabletStateInfo:c=[]}=e,[u={}]=c,{TabletId:h}=u;return{data:{id:h,data:u,history:d}}}catch(r){return{error:r}}},providesTags:(e,t,n)=>["All",{type:"Tablet",id:n.id}]}),getTabletDescribe:e.query({queryFn:async(e,t)=>{let{tenantId:n}=e,{signal:a}=t;try{const e=await window.api.getTabletDescribe(n,{signal:a}),{SchemeShard:t,PathId:l}=n;return{data:(null===e||void 0===e?void 0:e.Path)||`${t}:${l}`}}catch(l){return{error:l}}},providesTags:["All"]}),getAdvancedTableInfo:e.query({queryFn:async(e,t)=>{let{id:n,hiveId:a}=e,{signal:l}=t;try{return{data:await window.api.getTabletFromHive({id:n,hiveId:a},{signal:l})}}catch(o){return{error:o}}},providesTags:(e,t,n)=>["All",{type:"Tablet",id:n.id}]}),killTablet:e.mutation({queryFn:async e=>{let{id:t}=e;try{return{data:await window.api.killTablet(t)}}catch(n){return{error:n}}},invalidatesTags:(e,t,n)=>[{type:"Tablet",id:n.id},{type:"Tablet",id:"LIST"}]}),stopTablet:e.mutation({queryFn:async e=>{let{id:t,hiveId:n}=e;try{return{data:await window.api.stopTablet(t,n)}}catch(a){return{error:a}}},invalidatesTags:(e,t,n)=>[{type:"Tablet",id:n.id},{type:"Tablet",id:"LIST"}]}),resumeTablet:e.mutation({queryFn:async e=>{let{id:t,hiveId:n}=e;try{return{data:await window.api.resumeTablet(t,n)}}catch(a){return{error:a}}},invalidatesTags:(e,t,n)=>[{type:"Tablet",id:n.id},{type:"Tablet",id:"LIST"}]})}),overrideExisting:"throw"})},46154:(e,t,n)=>{n.d(t,{M:()=>s});var a=n(34706),l=n(59769),o=n(9951);const s=e=>{const t=a.useCallback((()=>e?o.r.readUserSettingsValue(e,{}):{}),[e]),n=a.useCallback((t=>{e&&o.r.setUserSettingsValue(e,t)}),[e]);return(0,l.M)({saveSizes:n,getSizes:t})}},55973:(e,t,n)=>{n.d(t,{FW:()=>s,KR:()=>r});var a=n(77468),l=n(9038);const o={[l.g.Dead]:a.K.Red,[l.g.Created]:a.K.Yellow,[l.g.ResolveStateStorage]:a.K.Yellow,[l.g.Candidate]:a.K.Yellow,[l.g.BlockBlobStorage]:a.K.Yellow,[l.g.WriteZeroEntry]:a.K.Yellow,[l.g.Restored]:a.K.Yellow,[l.g.Discover]:a.K.Yellow,[l.g.Lock]:a.K.Yellow,[l.g.Stopped]:a.K.Yellow,[l.g.ResolveLeader]:a.K.Yellow,[l.g.RebuildGraph]:a.K.Yellow,[l.g.Deleted]:a.K.Green,[l.g.Active]:a.K.Green},s=(Object.keys(l.g),Object.entries(o).reduce(((e,t)=>{let[n,a]=t;return e[a]?e[a].push(n):e[a]=[n],e}),{}),e=>{if(!e)return a.K.Grey;return t=e,Object.values(a.K).includes(t)?e:o[e];var t});function r(e){if(!e)return"unknown";switch(e){case l.g.Dead:return"danger";case l.g.Active:case l.g.Deleted:return"success";default:return"warning"}}},42568:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(34706);const l=e=>a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.5a6.5 6.5 0 1 1-6.445 7.348.75.75 0 1 1 1.487-.194A5.001 5.001 0 1 0 4.43 4.5h1.32a.75.75 0 0 1 0 1.5h-3A.75.75 0 0 1 2 5.25v-3a.75.75 0 0 1 1.5 0v1.06A6.48 6.48 0 0 1 8 1.5Z",clipRule:"evenodd"}))},96334:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(34706);const l=e=>a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 2.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8.75 5a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0V5Z",clipRule:"evenodd"}))},29254:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(34706);const l=e=>a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm1-9.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8 7.75a.75.75 0 0 1 .75.75V11a.75.75 0 0 1-1.5 0V8.5A.75.75 0 0 1 8 7.75Z",clipRule:"evenodd"}))},15268:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(34706);const l=e=>a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.836 2.244c.962-1.665 3.366-1.665 4.328 0l4.917 8.505c.964 1.666-.239 3.751-2.164 3.751H3.083c-1.925 0-3.128-2.085-2.164-3.751l4.917-8.505ZM8 5a.75.75 0 0 1 .75.75v2a.75.75 0 1 1-1.5 0v-2A.75.75 0 0 1 8 5Zm1 5.75a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",clipRule:"evenodd"}))},5194:(e,t,n)=>{n.d(t,{O:()=>o});var a=n(34706);const l=(0,n(87578).Ge)("skeleton");function o(e){let{className:t,style:n,qa:o}=e;return a.createElement("div",{className:l(null,t),style:n,"data-qa":o})}},81187:(e,t,n)=>{n.d(t,{u:()=>c});var a=n(34706),l=n(15178),o=n(95868),s=n(24874),r=n(23795);const i=(0,n(87578).Ge)("tooltip"),d=["bottom","top"],c=e=>{const{children:t,content:n,disabled:c,placement:u=d,qa:h,id:m,className:p,style:g,disablePortal:v,contentClassName:b,openDelay:x=1e3,closeDelay:f}=e,[w,y]=a.useState(null),j=(0,o.p)(w,{openDelay:x,closeDelay:f,preventTriggerOnFocus:!0}),N=a.Children.only(t),T=N.ref,I=(0,l.c)(y,T);return a.createElement(a.Fragment,null,a.cloneElement(N,{ref:I}),w?a.createElement(s.G,{id:m,role:"tooltip",className:i(null,p),style:g,open:j&&!c,placement:u,anchorRef:{current:w},disablePortal:v,disableEscapeKeyDown:!0,disableOutsideClick:!0,disableLayer:!0,qa:h},a.createElement("div",{className:i("content",b)},a.createElement(r.x,{variant:"body-short",color:"complementary"},n))):null)}}}]);