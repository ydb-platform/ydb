"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[7054],{74003:(e,t,a)=>{a.d(t,{q:()=>p});var l=a(26714),n=a(72616),s=a(26390),o=a(78759),r=a(99294),i=a(55842),d=a(37711);const c=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),u=(0,d.wZ)("ydb-diagnostics-autorefresh-control",{en:c});var h=a(10161);const m=(0,r.cn)("auto-refresh-control");function p(e){let{className:t}=e;const a=(0,i.zL)(),[r,d]=(0,i.Rj)();return(0,h.jsxs)("div",{className:m(null,t),children:[(0,h.jsx)(n.z,{view:"flat",onClick:()=>{a(o.h.util.invalidateTags(["All"]))},extraProps:{"aria-label":u("Refresh")},children:(0,h.jsx)(n.z.Icon,{children:(0,h.jsx)(l.Z,{})})}),(0,h.jsxs)(s.P,{value:[String(r)],onUpdate:e=>{d(Number(e))},width:85,children:[(0,h.jsx)(s.P.Option,{value:"0",children:u("None")}),(0,h.jsx)(s.P.Option,{value:"15000",children:u("15 sec")}),(0,h.jsx)(s.P.Option,{value:"60000",children:u("1 min")}),(0,h.jsx)(s.P.Option,{value:"120000",children:u("2 min")}),(0,h.jsx)(s.P.Option,{value:"300000",children:u("5 min")})]})]})}},55982:(e,t,a)=>{a.d(t,{U:()=>d});var l=a(34706),n=a(72616),s=a(16318),o=a(47945),r=a(51403),i=a(10161);function d(e){let{children:t,onConfirmAction:a,onConfirmActionSuccess:d,dialogHeader:c,dialogText:u,retryButtonText:h,buttonDisabled:m=!1,buttonView:p="action",buttonClassName:b,withPopover:g=!1,popoverContent:v,popoverPlacement:x="right",popoverDisabled:w=!0}=e;const[f,j]=l.useState(!1),[y,T]=l.useState(!1),[N,S]=l.useState(!1),C=()=>(0,i.jsx)(n.z,{onClick:()=>j(!0),view:p,disabled:m,loading:!m&&y,className:b,children:t});return(0,i.jsxs)(l.Fragment,{children:[(0,i.jsx)(o.g,{visible:f,header:c,text:u,withRetry:N,retryButtonText:h,onConfirm:async e=>{T(!0),await a(e)},onConfirmActionSuccess:async()=>{S(!1);try{await(null===d||void 0===d?void 0:d())}finally{T(!1)}},onConfirmActionError:e=>{S((0,r.q)(e)),T(!1)},onClose:()=>{j(!1)}}),g?(0,i.jsx)(s.J,{content:v,placement:x,disabled:w,children:C()}):C()]})}},47945:(e,t,a)=>{a.d(t,{g:()=>g});var l=a(34706),n=a(3948),s=a(15268),o=a(19912),r=a(68585),i=a(14561),d=a(99294),c=a(37711);const u=JSON.parse('{"default-error":"Something went wrong, action cannot be completed","no-rights-error":"You don\'t have enough rights to complete the operation","button-confirm":"Confirm","button-retry":"Retry","button-cancel":"Cancel","button-close":"Close","checkbox-text":"I understand what I\'m doing"}'),h=(0,c.wZ)("ydb-critical-action-dialog",{en:u});var m=a(10161);const p=(0,d.cn)("ydb-critical-dialog"),b=e=>403===e.status?h("no-rights-error"):e.statusText?e.statusText:h("default-error");function g(e){let{visible:t,header:a,text:d,withRetry:c,retryButtonText:u,withCheckBox:g,onClose:v,onConfirm:x,onConfirmActionSuccess:w,onConfirmActionError:f}=e;const[j,y]=l.useState(!1),[T,N]=l.useState(),[S,C]=l.useState(!1),I=async e=>(y(!0),x(e).then((()=>{w(),v()})).catch((e=>{f(e),N(e)})).finally((()=>{y(!1)})));return(0,m.jsx)(r.V,{open:t,hasCloseButton:!1,className:p(),size:"s",onClose:v,onTransitionExited:()=>{N(void 0),C(!1)},children:T?(0,m.jsxs)(l.Fragment,{children:[(0,m.jsx)(r.V.Header,{caption:a}),(0,m.jsx)(r.V.Body,{className:p("body"),children:(0,m.jsxs)("div",{className:p("body-message",{error:!0}),children:[(0,m.jsx)("span",{className:p("error-icon"),children:(0,m.jsx)(n.Z,{width:"24",height:"22"})}),b(T)]})}),(0,m.jsx)(r.V.Footer,{loading:!1,preset:"default",textButtonApply:c?u||h("button-retry"):void 0,textButtonCancel:h("button-close"),onClickButtonApply:()=>I(!0),onClickButtonCancel:v})]}):(0,m.jsxs)(l.Fragment,{children:[(0,m.jsx)(r.V.Header,{caption:a}),(0,m.jsxs)(r.V.Body,{className:p("body"),children:[(0,m.jsxs)("div",{className:p("body-message",{warning:!0}),children:[(0,m.jsx)("span",{className:p("warning-icon"),children:(0,m.jsx)(i.J,{data:s.Z,size:24})}),d]}),g?(0,m.jsx)(o.X,{checked:S,onUpdate:C,children:h("checkbox-text")}):null]}),(0,m.jsx)(r.V.Footer,{loading:j,preset:"default",textButtonApply:h("button-confirm"),textButtonCancel:h("button-cancel"),propsButtonApply:{type:"submit",disabled:g&&!S},onClickButtonCancel:v,onClickButtonApply:()=>I()})]})})}},51403:(e,t,a)=>{a.d(t,{q:()=>l});const l=e=>Boolean(e&&"object"===typeof e&&"retryPossible"in e&&e.retryPossible)},89516:(e,t,a)=>{a.d(t,{a:()=>r});var l=a(99294),n=a(73287),s=a(10161);const o=(0,l.cn)("ydb-entity-page-title");function r(e){let{entityName:t,status:a,id:l,className:r}=e;return(0,s.jsxs)("div",{className:o(null,r),children:[(0,s.jsx)("span",{className:o("prefix"),children:t}),(0,s.jsx)(n.J,{className:o("icon"),status:a,size:"s"}),l]})}},62508:(e,t,a)=>{a.d(t,{A:()=>u});var l=a(17823),n=a(99175),s=a(77468),o=a(99294),r=a(32489),i=a(73287),d=a(10161);const c=(0,o.cn)("entity-status");function u(e){let{status:t=s.K.Grey,name:a="",label:o,path:u,iconPath:h,size:m="s",mode:p="color",showStatus:b=!0,externalLink:g=!1,withLeftTrim:v=!1,hasClipboardButton:x,clipboardButtonAlwaysVisible:w=!1,className:f}=e;const j=()=>b?(0,d.jsx)(i.J,{className:c("icon"),status:t,size:m,mode:p}):null;return(0,d.jsxs)("div",{className:c(null,f),title:a,children:[h?(y=h,(0,d.jsx)(l.r,{target:"_blank",href:y,children:j()})):j(),o&&(0,d.jsx)("span",{title:o,className:c("label",{size:m,state:t.toLowerCase()}),children:o}),(u||a)&&(0,d.jsxs)("div",{className:c("wrapper"),children:[(0,d.jsx)("span",{className:c("link",{"with-left-trim":v}),children:u?g?(0,d.jsx)(l.r,{className:c("name"),href:u,children:a}):(0,d.jsx)(r.h,{className:c("name"),to:u,children:a}):a&&(0,d.jsx)("span",{className:c("name"),children:a})}),x&&(0,d.jsx)("div",{className:c("controls-wrapper",{visible:w}),children:(0,d.jsx)(n.m,{text:a,size:"xs",view:"normal",className:c("clipboard-button",{visible:w})})})]})]});var y}},84573:(e,t,a)=>{a.d(t,{B:()=>c});var l=a(79777),n=a(99294),s=a(74003),o=a(43464),r=a(10161);const i=(0,n.cn)("ydb-page-meta");function d(e){let{items:t,loading:a}=e;return(0,r.jsx)("div",{className:i("info"),children:a?(0,r.jsx)(o.O,{className:i("skeleton")}):t.filter((e=>Boolean(e))).join("\xa0\xa0\xb7\xa0\xa0")})}function c(e){let{className:t,...a}=e;return(0,r.jsxs)(l.k,{gap:1,alignItems:"center",justifyContent:"space-between",className:i(null,t),children:[(0,r.jsx)(d,{...a}),(0,r.jsx)(s.q,{})]})}},74116:(e,t,a)=>{a.d(t,{G:()=>d});var l=a(59769),n=a(71624),s=a(99294),o=a(46154),r=a(10161);const i=(0,s.cn)("ydb-resizeable-data-table");function d(e){let{columnsWidthLSKey:t,columns:a,settings:s,wrapperClassName:d,...c}=e;const[u,h]=(0,o.M)(t),m=(0,l.B)(a,u),p={...s,defaultResizeable:!0};return(0,r.jsx)("div",{className:i(null,d),children:(0,r.jsx)(n.ZP,{theme:"yandex-cloud",columns:m,onResize:h,settings:p,...c})})}},43464:(e,t,a)=>{a.d(t,{O:()=>o});var l=a(5194),n=a(83658),s=a(10161);const o=e=>{let{delay:t=600,className:a}=e;const[o]=(0,n.$)(t);return o?(0,s.jsx)(l.O,{className:a}):null}},73287:(e,t,a)=>{a.d(t,{J:()=>h});var l=a(29254),n=a(96334),s=a(15268),o=a(14561),r=a(77468),i=a(99294),d=a(10161);const c=(0,i.cn)("ydb-status-icon"),u={[r.K.Blue]:l.Z,[r.K.Yellow]:n.Z,[r.K.Orange]:s.Z,[r.K.Red]:n.Z};function h(e){let{status:t=r.K.Grey,size:a="s",mode:l="color",className:n}=e;const s={state:t.toLowerCase(),size:a};return"icons"===l&&t in u?(0,d.jsx)(o.J,{className:c("status-icon",s,n),data:u[t]}):(0,d.jsx)("div",{className:c("status-color",s,n)})}},59907:(e,t,a)=>{a.d(t,{f:()=>o});var l=a(2634),n=a(55973),s=a(10161);function o(e){let{state:t}=e;return(0,s.jsx)(l._,{theme:(0,n.KR)(t),children:t})}},65874:(e,t,a)=>{a.r(t),a.d(t,{Tablet:()=>ve,b:()=>he});var l=a(34706),n=a(79777),s=a(72555),o=a(64485),r=a(42152),i=a(55783),d=a(99495),c=a(75475),u=a(90205),h=a(89516),m=a(15327),p=a(67653),b=a(48653),g=a(84573),v=a(46878),x=a(65e3),w=a(85709),f=a(6215),j=a(77468),y=a(99294),T=a(27810),N=a(55842),S=a(42568),C=a(87130);const I=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",d:"M13.756 10.164c1.665-.962 1.665-3.366 0-4.328L5.251.919C3.584-.045 1.5 1.158 1.5 3.083v9.834c0 1.925 2.084 3.128 3.751 2.164l8.505-4.917Z"}));var _=a(14561),k=a(55982),A=a(9038),D=a(37711);const z=JSON.parse('{"tablet.header":"Tablet","tablet.meta-database":"Database","tablet.meta-follower":"Follower","controls.kill":"Restart","controls.stop":"Stop","controls.resume":"Resume","controls.kill-not-allowed":"You don\'t have enough rights to restart tablet","controls.stop-not-allowed":"You don\'t have enough rights to stop tablet","controls.resume-not-allowed":"You don\'t have enough rights to resume tablet","dialog.kill-header":"Restart tablet","dialog.stop-header":"Stop tablet","dialog.resume-header":"Resume tablet","dialog.kill-text":"The tablet will be restarted. Do you want to proceed?","dialog.stop-text":"The tablet will be stopped. Do you want to proceed?","dialog.resume-text":"The tablet will be resumed. Do you want to proceed?","emptyState":"The tablet was not found","label_tablet-history":"Tablets","label_tablet-channels":"Storage"}'),K=(0,D.wZ)("ydb-tablet-page",{en:z});function P(e){return Boolean(e&&"0"!==e)}var R=a(10161);const B=e=>{let{tablet:t}=e;const{TabletId:a,HiveId:s}=t,o=(0,N.ix)(x.VH),[r]=f._.useKillTabletMutation(),[i]=f._.useStopTabletMutation(),[d]=f._.useResumeTabletMutation();if(!a)return null;const c=P(s),u=t.State===A.g.Stopped,h=t.State!==A.g.Stopped&&t.State!==A.g.Dead,m=t.State===A.g.Stopped||t.State===A.g.Deleted;return(0,R.jsxs)(n.k,{gap:2,wrap:"nowrap",children:[(0,R.jsxs)(k.U,{dialogHeader:K("dialog.kill-header"),dialogText:K("dialog.kill-text"),onConfirmAction:()=>r({id:a}).unwrap(),buttonDisabled:u||!o,withPopover:!0,buttonView:"normal",popoverContent:K("controls.kill-not-allowed"),popoverPlacement:"bottom",popoverDisabled:o,children:[(0,R.jsx)(_.J,{data:S.Z}),K("controls.kill")]}),c&&(0,R.jsxs)(l.Fragment,{children:[(0,R.jsxs)(k.U,{dialogHeader:K("dialog.stop-header"),dialogText:K("dialog.stop-text"),onConfirmAction:()=>i({id:a,hiveId:s}).unwrap(),buttonDisabled:m||!o,withPopover:!0,buttonView:"normal",popoverContent:K("controls.stop-not-allowed"),popoverPlacement:"bottom",popoverDisabled:o,children:[(0,R.jsx)(_.J,{data:C.Z}),K("controls.stop")]}),(0,R.jsxs)(k.U,{dialogHeader:K("dialog.resume-header"),dialogText:K("dialog.resume-text"),onConfirmAction:()=>d({id:a,hiveId:s}).unwrap(),buttonDisabled:h||!o,withPopover:!0,buttonView:"normal",popoverContent:K("controls.resume-not-allowed"),popoverPlacement:"bottom",popoverDisabled:o,children:[(0,R.jsx)(_.J,{data:I}),K("controls.resume")]})]})]})};var Z=a(26836),E=a(41591),O=a(90808),G=a(59907),F=a(14075),V=a(70340),H=a(75544);const L=JSON.parse('{"field_scheme-shard":"SchemeShard","field_follower":"Follower","field_generation":"Generation","field_hive":"HiveId","field_state":"State","field_uptime":"Uptime","field_node":"Node","field_links":"Links","field_developer-ui-app":"App","field_developer-ui-counters":"Counters","field_developer-ui-executor":"Executor DB internals","field_developer-ui-state":"State Storage","title_info":"Info","title_links":"Links"}'),q=(0,D.wZ)("ydb-tablet-info",{en:L}),M=(0,y.cn)("ydb-tablet-info"),Y=e=>{let{tablet:t}=e;const a=(0,N.ix)(x.VH),{ChangeTime:l,Generation:s,FollowerId:o,NodeId:r,HiveId:i,State:d,TenantId:{SchemeShard:c}={},TabletId:u}=t,h=P(i),m=d===A.g.Active,p=[];h&&p.push({label:q("field_hive"),value:(0,R.jsx)(Z.rU,{to:(0,v.fK)(i),className:M("link"),children:i})}),c&&p.push({label:q("field_scheme-shard"),value:(0,R.jsx)(Z.rU,{to:(0,v.fK)(c),className:M("link"),children:c})}),p.push({label:q("field_state"),value:(0,R.jsx)(G.f,{state:d})}),m&&p.push({label:q("field_uptime"),value:(0,F.fG)(l)}),p.push({label:q("field_generation"),value:s},{label:q("field_node"),value:(0,R.jsx)(Z.rU,{className:M("link"),to:(0,H.a3)(String(r)),children:r})}),o&&p.push({label:q("field_follower"),value:o});return(0,R.jsxs)(n.k,{gap:10,wrap:"nowrap",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:M("section-title"),children:q("title_info")}),(0,R.jsx)(E._P,{info:p})]}),a&&u?(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:M("section-title"),children:q("title_links")}),(0,R.jsxs)(n.k,{direction:"column",gap:3,children:[(0,R.jsx)(O.j,{title:q("field_developer-ui-app"),url:(0,V.wz)(u,"app")}),(0,R.jsx)(O.j,{title:q("field_developer-ui-counters"),url:(0,V.wz)(u,"counters")}),(0,R.jsx)(O.j,{title:q("field_developer-ui-executor"),url:(0,V.wz)(u,"executorInternals")}),(0,R.jsx)(O.j,{title:q("field_developer-ui-state"),url:(0,V.wz)(u,void 0,"SsId")})]})]}):null]})};var J=a(8475),U=a(72001),$=a(72616),Q=a(81778);const W=JSON.parse('{"label_channel-index":"Channel","label_storage-pool":"Storage Pool Name","label_group-id":"Group ID","label_generation":"From generation","label_timestamp":"Timestamp"}'),X=(0,D.wZ)("ydb-tablet-storage-info",{en:W}),ee=(0,y.cn)("ydb-tablet-storage-info");function te(e){let{name:t,className:a}=e;return(0,R.jsx)("div",{className:ee("table-header-content",a),children:t})}function ae(e,t){const a=e.getValue(),l="function"===typeof t?t(a):a;return(0,R.jsx)("div",{className:ee("metrics-cell"),children:l})}function le(e){let{row:t,name:a,hasExpand:l}=e;const s=t.getCanExpand();return(0,R.jsxs)(n.k,{gap:1,alignItems:"flex-start",className:ee("name-wrapper"),children:[s&&(0,R.jsx)($.z,{view:"flat",size:"xs",onClick:t.getToggleExpandedHandler(),children:(0,R.jsx)($.z.Icon,{children:(0,R.jsx)(Q.F,{direction:t.getIsExpanded()?"bottom":"right",size:14})})}),(0,R.jsx)("div",{className:ee("name-content",{"no-control":l&&!s}),children:a})]})}function ne(e){let{data:t}=e;const[a,n]=l.useState({}),s=l.useMemo((()=>function(e){var t;if(!e)return[];const{BoundChannels:a,TabletStorageInfo:l={}}=e,n=null!==(t=l.Channels)&&void 0!==t?t:[],s=[];for(const r of n){var o;const e=r.Channel,t=r.History;if(!e||!t||!t.length)continue;const l=[...t];l.reverse();const[n,...i]=l,d={...n,storagePoolName:null===a||void 0===a||null===(o=a[e])||void 0===o?void 0:o.StoragePoolName,channelIndex:e,children:i};s.push(d)}return s}(t)),[t]),o=l.useMemo((()=>s.some((e=>{var t;return null===(t=e.children)||void 0===t?void 0:t.length}))),[s]),r=l.useMemo((()=>{return e=o,[{accessorKey:"channelIndex",header:()=>(0,R.jsx)(te,{name:X("label_channel-index")}),size:50,cell:ae,meta:{align:"right"}},{accessorKey:"storagePoolName",header:()=>(0,R.jsx)(te,{name:X("label_storage-pool")}),size:200,cell:ae},{accessorKey:"GroupID",header:()=>(0,R.jsx)(te,{name:X("label_group-id"),className:e?ee("with-padding"):void 0}),size:100,cell:t=>(0,R.jsx)(le,{row:t.row,name:t.getValue(),hasExpand:e})},{accessorKey:"FromGeneration",header:()=>(0,R.jsx)(te,{name:X("label_generation")}),size:100,cell:ae,meta:{align:"right"}},{accessorKey:"Timestamp",header:()=>(0,R.jsx)(te,{name:X("label_timestamp")}),size:200,cell:e=>ae(e,F.i$),meta:{align:"right"}}];var e}),[o]),i=(0,J.x)({columns:r,data:s,getSubRows:e=>e.children,enableExpanding:!0,onExpandedChange:n,state:{expanded:a}});return(0,R.jsx)("div",{children:(0,R.jsx)(U.i,{table:i,headerCellClassName:e=>{var t;let{column:a}=e;const l=null===(t=a.columnDef.meta)||void 0===t?void 0:t.align;return ee("table-header-cell",{align:l})},cellClassName:e=>{var t,a;const l=null===e||void 0===e||null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.align,n=null===e||void 0===e||null===(a=e.column.columnDef.meta)||void 0===a?void 0:a.verticalAlign;return ee("table-cell",{align:l,"vertical-align":n})},className:ee("table")})})}var se=a(71624),oe=a(62508),re=a(32489),ie=a(74116);const de=[{name:"Generation",align:se.ZP.RIGHT,render:e=>{let{row:t}=e;return t.generation}},{name:"Change time",align:se.ZP.RIGHT,sortable:!1,render:e=>{let{row:t}=e;return(0,F.fG)(t.changeTime)}},{name:"State",sortable:!1,render:e=>{let{row:t}=e;return(0,R.jsx)(G.f,{state:t.state})}},{name:"Follower ID",sortable:!1,render:e=>{let{row:t}=e;return t.leader?"leader":t.followerId}},{name:"Node ID",align:se.ZP.RIGHT,sortable:!1,render:e=>{let{row:t}=e;return(0,R.jsx)(re.h,{to:(0,H.a3)(t.nodeId),children:t.nodeId})}},{name:"Node FQDN",sortable:!1,width:300,render:e=>{let{row:t}=e;return t.fqdn?(0,R.jsx)(oe.A,{name:t.fqdn,showStatus:!1,hasClipboardButton:!0}):(0,R.jsx)("span",{children:"\u2014"})}}],ce={displayIndices:!1},ue=e=>{let{history:t}=e;return(0,R.jsx)(ie.G,{columnsWidthLSKey:"tabletTableColumnsWidth",data:t,columns:de,settings:ce,initialSortOrder:{columnId:"Generation",order:se.ZP.DESCENDING}})},he=(0,y.cn)("ydb-tablet-page"),me={history:"history",channels:"channels"},pe=[{id:me.history,get title(){return K("label_tablet-history")}},{id:me.channels,get title(){return K("label_tablet-channels")},isAdvanced:!0}],be=c.z.nativeEnum(me).catch(me.history),ge={tenantName:d.StringParam,clusterName:d.StringParam,activeTab:d.StringParam};function ve(){var e;const t=(0,N.zL)(),{id:a}=(0,i.UO)(),[{tenantName:s,clusterName:c}]=(0,d.useQueryParams)(ge),[u]=(0,N.Rj)(),{currentData:h,isFetching:p,error:v}=f._.useGetTabletQuery({id:a,database:null!==s&&void 0!==s?s:void 0},{pollingInterval:u}),x=p&&void 0===h,{data:j={},history:y=[]}=h||{},{currentData:S}=f._.useGetTabletDescribeQuery(j.TenantId?{tenantId:j.TenantId}:o.CN),C=null!==(e=S||s)&&void 0!==e?e:void 0,I=j.Type;l.useEffect((()=>{t((0,w.J)("tablet",{tenantName:null!==s&&void 0!==s?s:void 0,tabletId:a,tabletType:I}))}),[t,s,a,I]);const{Leader:_,Type:k}=j,A=[];return C&&A.push(`${K("tablet.meta-database")}: ${C}`),k&&A.push(k),!1===_&&A.push(K("tablet.meta-follower").toUpperCase()),(0,R.jsxs)(n.k,{gap:5,direction:"column",className:he(),children:[(0,R.jsx)(r.ql,{children:(0,R.jsx)("title",{children:`${a} \u2014 ${K("tablet.header")} \u2014 ${C||c||T.DO}`})}),(0,R.jsx)(g.B,{items:A}),(0,R.jsxs)(b.s,{loading:x,size:"l",children:[v?(0,R.jsx)(m.V,{error:v}):null,h?(0,R.jsx)(xe,{id:a,tablet:j,history:y}):null]})]})}function xe(e){let{id:t,tablet:a,history:l}=e;const s=!Object.keys(a).length,{Overall:o,HiveId:r}=a;return(0,R.jsxs)(u.$,{title:K("emptyState"),className:he("placeholder"),isEmpty:s,children:[(0,R.jsxs)(n.k,{gap:5,direction:"column",children:[(0,R.jsx)(h.a,{entityName:K("tablet.header"),status:null!==o&&void 0!==o?o:j.K.Grey,id:t}),(0,R.jsx)(B,{tablet:a}),(0,R.jsx)(Y,{tablet:a})]}),(0,R.jsx)(we,{id:t,hiveId:r,history:l})]})}function we(e){var t;let{id:a,hiveId:o,history:r}=e;const[{activeTab:i,...c},u]=(0,d.useQueryParams)(ge),h=!(0,N.ix)(x.VH)||!P(o);let m=be.parse(i);return h&&null!==(t=pe.find((e=>e.id===m)))&&void 0!==t&&t.isAdvanced&&(m=me.history),l.useEffect((()=>{i!==m&&u({activeTab:m},"replaceIn")}),[i,m,u]),(0,R.jsxs)(n.k,{gap:5,direction:"column",children:[(0,R.jsx)("div",{children:(0,R.jsx)(s.m,{size:"l",items:pe.filter((e=>{let{isAdvanced:t}=e;return!t||!h})),activeTab:m,wrapTo:(e,t)=>{const l=(0,v.fK)(a,{...c,activeTab:e.id});return(0,R.jsx)(p.h,{to:l,children:t},e.id)}})}),"history"===m?(0,R.jsx)(ue,{history:r}):null,"channels"!==m||h?null:(0,R.jsx)(fe,{id:a,hiveId:o})]})}function fe(e){let{id:t,hiveId:a}=e;const[l]=(0,N.Rj)(),{currentData:n,error:s,isFetching:o}=f._.useGetAdvancedTableInfoQuery({id:t,hiveId:a},{pollingInterval:l}),r=o&&void 0===n;return(0,R.jsxs)(b.s,{loading:r,size:"l",children:[s?(0,R.jsx)(m.V,{error:s}):null,n?(0,R.jsx)(ne,{data:n}):null]})}},6215:(e,t,a)=>{a.d(t,{_:()=>n});var l=a(96183);const n=a(78759).h.injectEndpoints({endpoints:e=>({getTablet:e.query({queryFn:async(e,t)=>{let{id:a,database:n}=e,{signal:s}=t;try{const[e,t,o]=await Promise.all([window.api.getTablet({id:a,database:n},{signal:s}),window.api.getTabletHistory({id:a,database:n},{signal:s}),window.api.getNodesList({signal:s})]),r=(0,l.Xs)(o),i=Object.keys(t).reduce(((e,a)=>{var l;const n=null===(l=t[a])||void 0===l?void 0:l.TabletStateInfo;if(n&&n.length){const t=n.find((e=>e.Leader))||n[0],{ChangeTime:l,Generation:s,State:o,Leader:i,FollowerId:d}=t,c=r&&a?r.get(Number(a)):void 0;"Dead"!==o&&e.push({nodeId:a,generation:s,changeTime:l,state:o,leader:i,followerId:d,fqdn:c})}return e}),[]),{TabletStateInfo:d=[]}=e,[c={}]=d,{TabletId:u}=c;return{data:{id:u,data:c,history:i}}}catch(o){return{error:o}}},providesTags:(e,t,a)=>["All",{type:"Tablet",id:a.id}]}),getTabletDescribe:e.query({queryFn:async(e,t)=>{let{tenantId:a}=e,{signal:l}=t;try{const e=await window.api.getTabletDescribe(a,{signal:l}),{SchemeShard:t,PathId:n}=a;return{data:(null===e||void 0===e?void 0:e.Path)||`${t}:${n}`}}catch(n){return{error:n}}},providesTags:["All"]}),getAdvancedTableInfo:e.query({queryFn:async(e,t)=>{let{id:a,hiveId:l}=e,{signal:n}=t;try{return{data:await window.api.getTabletFromHive({id:a,hiveId:l},{signal:n})}}catch(s){return{error:s}}},providesTags:(e,t,a)=>["All",{type:"Tablet",id:a.id}]}),killTablet:e.mutation({queryFn:async e=>{let{id:t}=e;try{return{data:await window.api.killTablet(t)}}catch(a){return{error:a}}},invalidatesTags:(e,t,a)=>[{type:"Tablet",id:a.id},{type:"Tablet",id:"LIST"}]}),stopTablet:e.mutation({queryFn:async e=>{let{id:t,hiveId:a}=e;try{return{data:await window.api.stopTablet(t,a)}}catch(l){return{error:l}}},invalidatesTags:(e,t,a)=>[{type:"Tablet",id:a.id},{type:"Tablet",id:"LIST"}]}),resumeTablet:e.mutation({queryFn:async e=>{let{id:t,hiveId:a}=e;try{return{data:await window.api.resumeTablet(t,a)}}catch(l){return{error:l}}},invalidatesTags:(e,t,a)=>[{type:"Tablet",id:a.id},{type:"Tablet",id:"LIST"}]})}),overrideExisting:"throw"})},46154:(e,t,a)=>{a.d(t,{M:()=>o});var l=a(34706),n=a(59769),s=a(9951);const o=e=>{const t=l.useCallback((()=>e?s.r.readUserSettingsValue(e,{}):{}),[e]),a=l.useCallback((t=>{e&&s.r.setUserSettingsValue(e,t)}),[e]);return(0,n.M)({saveSizes:a,getSizes:t})}},55973:(e,t,a)=>{a.d(t,{FW:()=>o,KR:()=>r});var l=a(77468),n=a(9038);const s={[n.g.Dead]:l.K.Red,[n.g.Created]:l.K.Yellow,[n.g.ResolveStateStorage]:l.K.Yellow,[n.g.Candidate]:l.K.Yellow,[n.g.BlockBlobStorage]:l.K.Yellow,[n.g.WriteZeroEntry]:l.K.Yellow,[n.g.Restored]:l.K.Yellow,[n.g.Discover]:l.K.Yellow,[n.g.Lock]:l.K.Yellow,[n.g.Stopped]:l.K.Yellow,[n.g.ResolveLeader]:l.K.Yellow,[n.g.RebuildGraph]:l.K.Yellow,[n.g.Deleted]:l.K.Green,[n.g.Active]:l.K.Green},o=(Object.keys(n.g),Object.entries(s).reduce(((e,t)=>{let[a,l]=t;return e[l]?e[l].push(a):e[l]=[a],e}),{}),e=>{if(!e)return l.K.Grey;return t=e,Object.values(l.K).includes(t)?e:s[e];var t});function r(e){if(!e)return"unknown";switch(e){case n.g.Dead:return"danger";case n.g.Active:case n.g.Deleted:return"success";default:return"warning"}}},42568:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(34706);const n=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.5a6.5 6.5 0 1 1-6.445 7.348.75.75 0 1 1 1.487-.194A5.001 5.001 0 1 0 4.43 4.5h1.32a.75.75 0 0 1 0 1.5h-3A.75.75 0 0 1 2 5.25v-3a.75.75 0 0 1 1.5 0v1.06A6.48 6.48 0 0 1 8 1.5Z",clipRule:"evenodd"}))},96334:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(34706);const n=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 2.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8.75 5a.75.75 0 0 0-1.5 0v2.5a.75.75 0 0 0 1.5 0V5Z",clipRule:"evenodd"}))},29254:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(34706);const n=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14Zm1-9.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM8 7.75a.75.75 0 0 1 .75.75V11a.75.75 0 0 1-1.5 0V8.5A.75.75 0 0 1 8 7.75Z",clipRule:"evenodd"}))},15268:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(34706);const n=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.836 2.244c.962-1.665 3.366-1.665 4.328 0l4.917 8.505c.964 1.666-.239 3.751-2.164 3.751H3.083c-1.925 0-3.128-2.085-2.164-3.751l4.917-8.505ZM8 5a.75.75 0 0 1 .75.75v2a.75.75 0 1 1-1.5 0v-2A.75.75 0 0 1 8 5Zm1 5.75a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z",clipRule:"evenodd"}))},5194:(e,t,a)=>{a.d(t,{O:()=>s});var l=a(34706);const n=(0,a(87578).Ge)("skeleton");function s(e){let{className:t,style:a,qa:s}=e;return l.createElement("div",{className:n(null,t),style:a,"data-qa":s})}}}]);