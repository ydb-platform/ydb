"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[7645],{87645:(e,t,i)=>{i.r(t),i.d(t,{default:()=>P});var n=i(68963),s=i(38982),o=i.n(s),l=i(85198),r=i.n(l),a=i(66307),u=i(30746),c=i(64270),d=i(396),h=i(70832),f=i(3186),p=i.n(f),g=i(8978);function m(e){const t=document.createElement("span");return t.innerText=e,t.innerHTML}const _="data-series-name",v="data-series-idx",y="_tooltip",b="_tooltip-row",w=()=>"<td />",E=e=>`<td class="_tooltip-rows__bubble-td">\n        <div class="_tooltip-rows__bubble-div" style="background-color:${e.seriesColor};"></div>\n    </td>`,S=e=>`<td class="_tooltip-rows__name-td">\n        ${e.hideSeriesName?"":m(e.seriesName)}\n    </td>`,x=e=>`<td class="_tooltip-rows__percent-td">\n        ${e.percentValue?e.percentValue+"%":""}\n    </td>`,A=e=>`<td class="_tooltip-rows__value-td">\n        ${e.value}\n    </td>`,T=e=>`<td class="_tooltip-rows__diff-td">\n        ${e.diff?` (${e.diff})`:""}\n    </td>`,O=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return`<td class="_tooltip-right__td ${t?"_tooltip-right__td_with-split-tooltip":""}" colspan="${(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)||1}">\n             ${e.holiday?`<div class="_tooltip-right__holiday-div">\n                    <div class="_tooltip-right__holiday-emoji">\ud83c\udf88</div>\n                    <div>\n                        ${e.holidayText}\n                        ${e.region?`<span class="_tooltip-right__holiday-region">[${e.region}]</span>`:""}\n                    </div>\n                </div>`:""}\n\n            ${e.commentDateText?`<div class="${e.xComments?"_tooltip-right__margin-bot":""}">${e.commentDateText}</div>`:""}\n\n            ${e.xComments?e.xComments.map((e=>`<div class="_tooltip-right__traf-div ${t?"_tooltip-right__traf-div_for-split-tooltip":""}" style="border-color: ${e.color};">${e.text}</div>`)).join(""):""}\n        </td>`},L=(e,t)=>{let{isSelectedLine:i,cellsRenderers:n,isSingleLine:s,allowComment:o,withDarkBackground:l,rowIndex:r}=t;const a=e.commentText||e.xyCommentText,u=o&&a,c=n.slice(),d=`${String(r)||""}-${String(m(e.seriesName)).slice(0,20).replace(/(\r\n|\n|\r)/gm,"")}`;return e.insertCellAt&&(Object.keys(e.insertCellAt)||[]).forEach((e=>{c.splice(Number(e),0,w)})),e.customRender?`<tr class="${b}${i?" _tooltip-selected-row":""}${s?" _tooltip-uniq-row":""}${l?" _tooltip-row-dark-bg":""}" ${_}="${d}" ${e.seriesIdx?`${v}="${e.seriesIdx}"`:""}>\n            ${0===e.customRender.trim().indexOf("<td")?e.customRender:`<td colspan="${n.length}">${e.customRender}</td>`}\n        </tr>\n        ${u?`<tr class="_tooltip-comment-row${i?" _tooltip-selected-row":""}${l?" _tooltip-row-dark-bg":""}">\n                    <td>\n                        ${e.commentText?`<div class="_tooltip-rows__comment-div">${e.commentText}</div>`:""}\n                        ${e.xyCommentText?`<div class="_tooltip-rows__comment-div">${e.xyCommentText}</div>`:""}\n                    </td>\n                </tr>`:""}`:`<tr class="${b}${i?" _tooltip-selected-row":""}${s?" _tooltip-uniq-row":""}${l?" _tooltip-row-dark-bg":""}" ${_}="${d}" ${e.seriesIdx?`${v}="${e.seriesIdx}"`:""}>\n            ${c.map(((t,i)=>e.replaceCellAt&&e.replaceCellAt[i]?"string"===typeof e.replaceCellAt[i]?e.replaceCellAt[i]:e.replaceCellAt[i](e):e.insertCellAt&&e.insertCellAt[i]?"string"===typeof e.insertCellAt[i]?e.insertCellAt[i]:e.insertCellAt[i](e):t(e))).join("")}\n        </tr>\n\n        ${u?`<tr class="_tooltip-comment-row${i?" _tooltip-selected-row":""}${l?" _tooltip-row-dark-bg":""}">\n                    <td colspan="4">\n                        ${e.commentText?`<div class="_tooltip-rows__comment-div">${e.commentText}</div>`:""}\n                        ${e.xyCommentText?`<div class="_tooltip-rows__comment-div">${e.xyCommentText}</div>`:""}\n                    </td>\n                </tr>`:""}`},I=(e,t)=>{const{splitTooltip:i,activeRowAlwaysFirstInTooltip:n}=e,s=e.lines.findIndex((e=>{let{selectedSeries:t}=e;return t})),o=e.lines[s],l=e.lines.slice(0,(t.lastVisibleRowIndex||e.lines.length)+1),r=[];r.push(E),e.shared&&r.push(S),e.withPercent&&r.push(x),r.push(A),e.useCompareFrom&&r.push(T);const u={isSingleLine:1===l.length,cellsRenderers:r},c={cellsRenderers:r,useCompareFrom:e.useCompareFrom,isSelectedLine:!0,allowComment:s>t.lastVisibleRowIndex},d=document.body.clientHeight/(window.visualViewport&&window.visualViewport.scale||1);let h=y;return i&&(h+=` ${y}_split-tooltip`),`\n<div class="${h}" style="max-height: ${i?"auto":`${d}px`}">\n    ${e.tooltipHeader?`<div title="${(document.createRange().createContextualFragment(e.tooltipHeader).textContent||"").trim()}" class="_tooltip-date">\n                ${e.tooltipHeader.trim()}\n            </div>`:""}\n    ${i&&(e.holiday||e.commentDateText||e.xComments&&e.xComments.length)?`<table border="0" cellpadding="0" cellspacing="0">\n                <tbody>\n                    <tr>\n                        ${O(e,!0,r.length)}\n                    </tr>\n                </tbody>\n            </table>`:""}\n    <table border="0" cellpadding="0" cellspacing="0">\n        <tr>\n            <td class="_tooltip-left__td">\n                <table class="_tooltip-rows__table">\n                    ${i?"":`<thead class=_tooltip-header>\n                                ${o&&(n||t.lastVisibleRowIndex&&s>t.lastVisibleRowIndex)?L(o,c):""}\n                                <tr class="_tooltip-fake-row">${Array(r.length).fill("<td></td>").join("")}</tr>\n                            </thead>`}\n                    <tbody class="_tooltip-list">\n                        ${l.map(((e,t)=>L(e,function(e){return Object.assign(Object.assign({},u),{rowIndex:e,isSelectedLine:l.length>1&&e===s,withDarkBackground:l.length>2&&Boolean(e%2),allowComment:e!==s||!c.allowComment})}(t)))).join("")}\n                    </tbody>\n                    ${i?"":`<tbody class="_tooltip-footer">\n                                ${t.lastVisibleRowIndex&&e.hiddenRowsNumber>0?`<tr class="${b} _hidden-rows-sum${l.length%2?" _hidden-rows-sum-dark-bg":""}">\n                                            <td colspan="${r.length-1}" class="_hidden-rows-number">\n                                                ${(0,a.a)("common","tooltip-rest")} ${e.hiddenRowsNumber}\n                                            </td>\n                                            <td class="_hidden-rows-value">${e.hiddenRowsSum}</td>\n                                        </tr>`:""}\n                                <tr class="_tooltip-fake-row">${Array(r.length).fill("<td></td>").join("")}</tr>\n                                ${e.sum?`<tr class="_tooltip-rows__summ-tr">\n                                            <td class="_tooltip-rows__summ-td" colspan="${r.length-1}">${(0,a.a)("common","tooltip-sum")}</td>\n                                            <td class="_tooltip-rows__summ-td _tooltip-rows__summ-td-value">\n                                                ${e.sum}\n                                            </td>\n                                        </tr>`:""}\n                            </tbody>`}\n                </table>\n            </td>\n\n            ${!i&&(e.holiday||e.commentDateText||e.xComments&&e.xComments.length)?O(e):""}\n        </tr>\n    </table>\n</div>`},D=e=>"object"===typeof e&&null!==e?Object.values(e).reduce(((e,t)=>t)):e,M=e=>{var t;const{data:i,userData:n,row:s,rowIndex:o}=e,l=n.graphs[o],r=null===(t=i.yagr.getSeriesById(s.id))||void 0===t?void 0:t.lineColor;let a=s.color;if("lineColor"===(null===l||void 0===l?void 0:l.legendColorKey))r&&(a=r);else a=s.color;return a},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return(i,n)=>{const s=(n[n.length-1]-n[0])/e;return n.map((i=>{const n=(0,d.CQ)({input:i/e,timeZone:t});return 0===n.hour()&&0===n.minute()&&0===n.second()?n.format("DD.MM.YY"):n.format(s<300?"HH:mm:ss":"HH:mm")}))}},C=(e,t)=>i=>{const n=i/((null===e||void 0===e?void 0:e.timeMultiplier)||1),s=(0,d.CQ)({input:n}),o=60*(s.utcOffset()-(0,d.CQ)({input:n,timeZone:t}).utcOffset())*1e3;return new Date(s.valueOf()-o)},R=e=>{var t,i;const{data:n,libraryConfig:s,theme:o}=e,l=Object.assign(Object.assign({},s),{timeline:n.timeline,series:n.graphs}),{timeZone:r}=n,a={appearance:{locale:g.X.get("lang"),theme:o}};var u;p()(a,l.chart),l.chart=a,(null===(t=l.tooltip)||void 0===t?void 0:t.show)&&(l.tooltip=l.tooltip||{},l.tooltip.render=(null===(i=l.tooltip)||void 0===i?void 0:i.render)||(u=n,e=>{const{timeZone:t}=u,i=e.yagr.config.chart.timeMultiplier||1,n=e.options,{x:s,state:o}=e;let l=0;const r=Object.values(e.scales).reduce(((e,t)=>(l+=t.sum||0,e.concat(t.rows))),[]),a=r.length,c=D(n.sum),h=D(n.maxLines),f=D(n.value),p=o.pinned?void 0:a>h?Math.abs(h-a):void 0,g=p?f(r.slice(-p).reduce(((e,t)=>{let{originalValue:i}=t;return e+(i||0)}),0)):void 0,m={activeRowAlwaysFirstInTooltip:r.length>1,tooltipHeader:(0,d.CQ)({input:s/i,timeZone:t}).format("DD MMMM YYYY HH:mm:ss"),shared:!0,lines:r.map(((t,i)=>Object.assign(Object.assign({},t),{seriesName:t.name||"Serie "+(i+1),seriesColor:M({data:e,userData:u,row:t,rowIndex:i}),selectedSeries:t.active,seriesIdx:t.seriesIdx,percentValue:"number"===typeof t.transformed?t.transformed.toFixed(1):""}))),withPercent:D(n.percent),hiddenRowsNumber:p,hiddenRowsSum:g};return c&&(m.sum=f(l)),I(m,{lastVisibleRowIndex:o.pinned?r.length-1:h-1})}),l.tooltip.className||(l.tooltip.className="chartkit-yagr-tooltip"),e.customTooltip&&(l.tooltip.virtual=!0),l.tooltip.sort=l.tooltip.sort||((e,t)=>t.rowIdx-e.rowIdx)),l.axes=l.axes||{};const c=l.axes[h.defaults.DEFAULT_X_SCALE];return l.editUplotOptions=e=>Object.assign(Object.assign({},e),{tzDate:r?C(l.chart,r):void 0}),c&&!c.values&&(c.values=k(l.chart.timeMultiplier,r)),c||(l.axes[h.defaults.DEFAULT_X_SCALE]={values:k(l.chart.timeMultiplier,r)}),l},F=n.forwardRef((function(e,t){const{id:i,data:{data:s},onLoad:l,onRender:d,onChartLoad:h,tooltip:f}=e,p=n.useRef(null),[g,m]=n.useState();if(!s||r()(s))throw new u.Dx({code:u.Wn.NO_DATA,message:(0,a.a)("error","label_no-data")});const{config:_,debug:v}=((e,t)=>{const{data:i,sources:s,libraryConfig:o}=e.data,l=(0,c.C)();return{config:n.useMemo((()=>R({data:i,libraryConfig:o,theme:l,customTooltip:Boolean(e.tooltip)})),[i,o,l,e.tooltip]),debug:n.useMemo((()=>({filename:s&&Object.values(s).map((e=>{var t;return null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.program})).filter(Boolean).join(", ")||t})),[t,s])}})(e,i),y=n.useCallback(((e,t)=>{let{renderTime:i}=t;null===l||void 0===l||l(Object.assign(Object.assign({},s),{widget:e,widgetRendering:i})),null===d||void 0===d||d({renderTime:i}),m(e)}),[l,d,s,m]),b=n.useCallback((()=>{g&&g.reflow()}),[]);return n.useImperativeHandle(t,(()=>({reflow(){b()}})),[b]),n.useEffect((()=>{var e,t,i,n,s;if(!g||(null===(t=null===(e=g.config)||void 0===e?void 0:e.tooltip)||void 0===t?void 0:t.virtual))return;const o={mouseMove:null,mouseDown:null};null===(i=g.plugins.tooltip)||void 0===i||i.on("render",(e=>{(e=>{const t=e.querySelector("._tooltip-header"),i=e.querySelector("._tooltip-list");if(!t||!i||!t.children.length)return;const n=t.children[0];for(let a=0;a<n.children.length;a++){const e=n.children[a];e.removeAttribute("style"),1===(null===i||void 0===i?void 0:i.children.length)&&(e.innerHTML="&nbsp;")}const s=i.children[0];for(let a=0;a<s.children.length;a++)s.children[a].removeAttribute("style");const o=t.children[0].getBoundingClientRect().width>i.children[0].getBoundingClientRect().width?t:i,l=Array.prototype.reduce.call(o.children[0].children,((e,t)=>(e.push(t.getBoundingClientRect().width),e)),[]),r=(o===t?i:t).children[0];for(let a=0;a<r.children.length;a++)r.children[a].setAttribute("style",`width: ${l[a]}px`);if(1===i.children.length)for(const a of n.children)a.innerHTML=""})(e)})),null===(n=g.plugins.tooltip)||void 0===n||n.on("pin",((e,t)=>{let{actions:i}=t;var n;o.mouseMove=(n={tooltip:e,yagr:g},e=>{var t;const{tooltip:i,yagr:s}=n;if(!s)return;const o=e.target,l=o&&i.contains(o)&&"TD"===o.tagName?null===(t=o.parentElement)||void 0===t?void 0:t.dataset.seriesIdx:void 0,r=l?s.uplot.series[Number(l)]:null;s.setFocus(r?r.id:null,!0)}),o.mouseDown=(e=>t=>{var i;const{tooltip:n,actions:s,yagr:o}=e;if(!o)return;const l=t.target;if(l instanceof Element){const e=l&&n.contains(l),t=l&&(null===(i=o.root.querySelector(".u-over"))||void 0===i?void 0:i.contains(l));e||t||(s.pin(!1),s.hide())}})({tooltip:e,actions:i,yagr:g}),document.addEventListener("mousemove",o.mouseMove),document.addEventListener("mousedown",o.mouseDown)})),null===(s=g.plugins.tooltip)||void 0===s||s.on("unpin",(()=>{o.mouseMove&&(document.removeEventListener("mousemove",o.mouseMove),o.mouseMove=null),o.mouseDown&&(document.removeEventListener("mousedown",o.mouseDown),o.mouseDown=null)}))}),[g]),n.useLayoutEffect((()=>{null===h||void 0===h||h({widget:g})}),[g,h]),n.createElement(n.Fragment,null,f&&g&&f({yagr:g}),n.createElement(o(),{ref:p,id:i,config:_,debug:v,onChartLoad:y}))})),P=F},9084:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TIME_MULTIPLIER=t.TOOLTIP_DEFAULT_MAX_LINES=t.TOOLTIP_X_OFFSET=t.TOOLTIP_Y_OFFSET=t.MIN_SELECTION_WIDTH=t.CURSOR_STYLE=t.MARKER_DIAMETER=t.SERIE_AREA_BORDER_WIDTH=t.SERIE_AREA_BORDER_COLOR=t.SERIE_LINE_WIDTH=t.SERIE_COLOR=t.PADDING_BOTH=t.PADDING_RIGHT=t.PADDING_LEFT=t.BARS_DRAW_MAX=t.BARS_DRAW_FACTOR=t.TYPES_ORDER=t.X_AXIS_INCRS=t.X_AXIS_SPACE=t.X_AXIS_SIZE=t.X_AXIS_TICK_GAP=t.DECADE=t.YEAR=t.DAY=t.HOUR=t.MINUTE=t.SECOND=t.Y_AXIS_LABEL_SIZE=t.Y_AXIS_SIZE=t.DEFAULT_Y_AXIS_LABEL_PADDING=t.DEFAULT_Y_AXIS_PADDING=t.DEFAULT_Y_AXIS_SIZE=t.Y_AXIS_TICK_GAP=t.AXIS_VALUES_FONT=t.AXIS_LABEL_FONT=t.DEFAULT_AXIS_FONT_SIZE=t.DARK_DEFAULT_LINE_COLOR=t.LIGHT_DEFAULT_LINE_COLOR=t.DEFAULT_TITLE_FONT_SIZE=t.DEFAULT_SYNC_KEY=t.DEFAULT_POINT_SIZE=t.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE=t.DEFAULT_SCALE_MIN_RANGE=t.DEFAULT_Y_AXIS_OFFSET=t.DEFAULT_MAX_TICKS=t.DEFAULT_CANVAS_PIXEL_RATIO=t.DEFAULT_FOCUS_ALPHA=t.DEFAULT_Y_SCALE=t.DEFAULT_X_SCALE=t.DEFAULT_X_SERIE_NAME=void 0,t.DEFAULT_X_SERIE_NAME="date",t.DEFAULT_X_SCALE="x",t.DEFAULT_Y_SCALE="y",t.DEFAULT_FOCUS_ALPHA=.3,t.DEFAULT_CANVAS_PIXEL_RATIO="undefined"===typeof window?1:window.devicePixelRatio,t.DEFAULT_MAX_TICKS=5,t.DEFAULT_Y_AXIS_OFFSET=.05,t.DEFAULT_SCALE_MIN_RANGE=.01,t.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE=.001,t.DEFAULT_POINT_SIZE=t.DEFAULT_CANVAS_PIXEL_RATIO>=2?4:2,t.DEFAULT_SYNC_KEY="sync",t.DEFAULT_TITLE_FONT_SIZE=14,t.LIGHT_DEFAULT_LINE_COLOR="#222222",t.DARK_DEFAULT_LINE_COLOR="#eeeeee",t.DEFAULT_AXIS_FONT_SIZE=11,t.AXIS_LABEL_FONT="normal 11px Lucida Grande, Arial, Helvetica, sans-serif",t.AXIS_VALUES_FONT="11px Lucida Grande, Arial, Helvetica, sans-serif",t.Y_AXIS_TICK_GAP=6,t.DEFAULT_Y_AXIS_SIZE=12,t.DEFAULT_Y_AXIS_PADDING=12,t.DEFAULT_Y_AXIS_LABEL_PADDING=2;t.Y_AXIS_SIZE=(e,i,n)=>{if(!i)return t.DEFAULT_Y_AXIS_SIZE;const s=i.reduce(((e,t)=>e.length>t.length?e:t)),{ctx:o}=e;o.save();const l=e.axes[n];o.font=l.font?l.font[0]:t.AXIS_VALUES_FONT;const{width:r}=o.measureText(s);o.restore();let a=0;if(l.label){a=l.labelSize||t.DEFAULT_AXIS_FONT_SIZE,o.font=l.labelFont?l.labelFont[0]:t.AXIS_LABEL_FONT;const{fontBoundingBoxAscent:e}=o.measureText(l.label);a=e,o.restore()}return a?r/t.DEFAULT_CANVAS_PIXEL_RATIO+a/t.DEFAULT_CANVAS_PIXEL_RATIO+t.DEFAULT_Y_AXIS_LABEL_PADDING:r/t.DEFAULT_CANVAS_PIXEL_RATIO+t.DEFAULT_Y_AXIS_PADDING},t.Y_AXIS_LABEL_SIZE=11,t.SECOND=1e3,t.MINUTE=60*t.SECOND,t.HOUR=60*t.MINUTE,t.DAY=24*t.HOUR,t.YEAR=365*t.DAY,t.DECADE=10*t.YEAR,t.X_AXIS_TICK_GAP=6,t.X_AXIS_SIZE=32,t.X_AXIS_SPACE=80,t.X_AXIS_INCRS=[1,10,50,100,200,500,t.SECOND,2*t.SECOND,5*t.SECOND,10*t.SECOND,15*t.SECOND,30*t.SECOND,t.MINUTE,5*t.MINUTE,10*t.MINUTE,30*t.MINUTE,t.HOUR,2*t.HOUR,3*t.HOUR,4*t.HOUR,6*t.HOUR,12*t.HOUR,t.DAY,2*t.DAY,3*t.DAY,5*t.DAY,10*t.DAY,15*t.DAY,30*t.DAY,60*t.DAY,120*t.DAY,180*t.DAY,t.YEAR,2*t.YEAR,5*t.YEAR,10*t.YEAR],t.TYPES_ORDER=["dots","line","area","column"],t.BARS_DRAW_FACTOR=.5,t.BARS_DRAW_MAX=100,t.PADDING_LEFT=[14,14,0,4],t.PADDING_RIGHT=[14,4,0,14],t.PADDING_BOTH=[14,4,0,4],t.SERIE_COLOR="rgba(0, 0, 0, 1)",t.SERIE_LINE_WIDTH=2,t.SERIE_AREA_BORDER_COLOR="rgba(0, 0, 0, 0.2)",t.SERIE_AREA_BORDER_WIDTH=1,t.MARKER_DIAMETER=8,t.CURSOR_STYLE="1px solid #ffa0a0",t.MIN_SELECTION_WIDTH=15;t.default=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"light";this.setTheme(t),this.colors=e}setTheme(e){this.theme=e}get GRID(){return{show:!0,stroke:()=>this.colors.parse("--yagr-grid"),width:1}}get X_AXIS_TICKS(){return{size:8,...this.GRID}}get Y_AXIS_TICKS(){return{size:6,...this.GRID}}get AXIS_STROKE(){return this.colors.parse("--yagr-axis-stroke")}get BACKGROUND(){return this.colors.parse("--yagr-background")}get SHIFT(){var e;return(null===(e=this.theme)||void 0===e?void 0:e.startsWith("light"))?.68:-.6}get DEFAULT_LINE_COLOR(){var e;return(null===(e=this.theme)||void 0===e?void 0:e.startsWith("light"))?t.LIGHT_DEFAULT_LINE_COLOR:t.DARK_DEFAULT_LINE_COLOR}},t.TOOLTIP_Y_OFFSET=24,t.TOOLTIP_X_OFFSET=24,t.TOOLTIP_DEFAULT_MAX_LINES=10,t.TIME_MULTIPLIER=1},19993:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=l(i(95588)),a=l(i(6063)),u=i(36098),c=l(i(50934)),d=o(i(9084)),h=l(i(2921)),f=i(32616),p=i(24908),g=i(34730),m=i(28797),_=i(98855);class v{get isEmpty(){return this.state.isEmptyDataSet}constructor(e,t){var i=this;this.plugins={},this._meta={},this._uHooks={},this.init=()=>{var e;(null===(e=this.config.chart.size)||void 0===e?void 0:e.adaptive)&&!this.resizeOb&&(this.resizeOb=new ResizeObserver((0,u.debounce)(this.onResize,this.config.chart.size.resizeDebounceMs||100)),this.resizeOb.observe(this.root)),this.config.hooks.dispose||(this.config.hooks.dispose=[]),this.unsubscribe(),this.config.hooks.dispose.push(this.trackMouse())},this.execHooks=function(e){const t=i.config.hooks[e];if(Array.isArray(t)){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];for(const e of t)e&&"function"===typeof e&&e(...s)}},this.initRender=(e,t)=>{var i,n,s;const o=null===(i=this.config.legend)||void 0===i?void 0:i.position;this.root.firstChild?o&&"bottom"!==o?this.root.appendChild(e.root):this.root.insertBefore(e.root,this.root.firstChild):o&&"bottom"!==o?this.root.insertBefore(e.root,this.root.firstChild):this.root.appendChild(e.root),(null===(n=this.config.legend)||void 0===n?void 0:n.show)&&(null===(s=this.plugins.legend)||void 0===s||s.init(e),this.reflow(!1)),this.initTitle(),t()},this.onResize=e=>{var t;const[i]=e;this._cache.height===i.contentRect.height&&this._cache.width===i.contentRect.width||(null===(t=this.plugins.tooltip)||void 0===t||t.reset(),this.reflow(),this.execHooks("resize",{entries:e,chart:this}))},this.initMixins(),this._startTime=performance.now(),this.state={isEmptyDataSet:!1,isMouseOver:!1,stage:"config",y2uIdx:{},subscribed:!1};const n=Object.assign({title:{},data:[],axes:{},series:[],scales:{},hooks:{},settings:{},chart:{},cursor:{},plugins:{},legend:{show:!1},tooltip:{show:!0},grid:null,markers:{}},t);this.config=n,this.inStage("config",(()=>{var t;this.id=e.id||(0,u.genId)(),this.root=e,this.root.classList.add("yagr"),this.root.id||(this.root.id=this.id);const i=new c.default,s=this.config.cursor.sync,o=this.config.chart;o.series||(o.series={type:"line"}),o.size||(o.size={adaptive:!0}),o.appearance||(o.appearance={locale:"en"}),o.select||(o.select={}),this.utils={colors:i,i18n:(0,h.default)((null===(t=n.chart.appearance)||void 0===t?void 0:t.locale)||"en"),theme:new d.default(i)},i.setContext(e),s&&(this.utils.sync=r.default.sync("string"===typeof s?s:d.DEFAULT_SYNC_KEY)),!o.size.adaptive&&o.size.width&&o.size.height&&(e.style.width=(0,u.px)(o.size.width),e.style.height=(0,u.px)(o.size.height)),this.plugins.legend=new a.default,this.setTheme(o.appearance.theme||"light"),this.createUplotOptions(),this._cache={height:this.options.height,width:this.options.width},n.editUplotOptions&&(this.options=n.editUplotOptions(this.options))})).inStage("processing",(()=>{this.transformSeries()})).inStage("uplot",(()=>{this.uplot=new r.default(this.options,this.series,this.initRender),this.canvas=e.querySelector("canvas"),this.init();const t=performance.now()-this._startTime;this._meta.processTime=t})).inStage("render")}redraw(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.uplot.redraw(e,t)}getSeriesById(e){return this.uplot.series[this.state.y2uIdx[e]]}dispose(){var e,t,i,n;this.resizeOb&&this.resizeOb.unobserve(this.root),this.unsubscribe(),null===(t=null===(e=this.plugins)||void 0===e?void 0:e.tooltip)||void 0===t||t.dispose(),null===(n=null===(i=this.plugins)||void 0===i?void 0:i.legend)||void 0===n||n.destroy(),this.uplot.destroy(),this._uHooks={},this.execHooks("dispose",{chart:this})}toDataUrl(){return this.canvas.toDataURL("img/png")}subscribe(){var e;this.state.subscribed||(null===(e=this.utils.sync)||void 0===e||e.sub(this.uplot),this.state.subscribed=!0)}unsubscribe(){var e;null===(e=this.utils.sync)||void 0===e||e.unsub(this.uplot),this.state.subscribed=!1}inStage(e,t){this.state.stage,this.execHooks("stage",{chart:this,stage:e});try{t&&t()}catch(i){console.error(i),this.onError(i)}return this}initTitle(){if(this.config.title&&this.config.title.fontSize){const e=this.config.title.fontSize,t=this.root.querySelector(".u-title");t.setAttribute("style",`font-size:${e}px;line-height:${e}px;`),t.innerHTML=this.config.title.text}}onError(e){return this.execHooks("error",{stage:this.state.stage,error:e,chart:this}),e}trackMouse(){const e=()=>{this.state.isMouseOver=!0},t=()=>{this.state.isMouseOver=!1};return this.root.addEventListener("mouseover",e),this.root.addEventListener("mouseleave",t),()=>{this.root.removeEventListener("mouseover",e),this.root.removeEventListener("mouseleave",t)}}get clientHeight(){var e;const t=this.config.title.text?(this.config.title.fontSize||d.DEFAULT_TITLE_FONT_SIZE)+8:0;return this.root.clientHeight-t-((null===(e=this.plugins.legend)||void 0===e?void 0:e.state.totalSpace)||0)}reflow(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.root.clientWidth,i=this.clientHeight;this._cache.width=t,this.options.width=t,this._cache.height=i,this.options.height=i,e&&this.uplot.setSize({width:this.options.width,height:this.options.height}),e&&this.uplot.redraw()}}(0,m.applyMixins)(v,[f.CreateUplotOptionsMixin,p.TransformSeriesMixin,g.DynamicUpdatesMixin,_.BatchMixin]),t.default=v},2921:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const i={ru:{"hide-all":"\u0421\u043a\u0440\u044b\u0442\u044c \u0432\u0441\u0435","show-all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435",sum:"\u0421\u0443\u043c\u043c\u0430",scale:"\u0428\u043a\u0430\u043b\u0430",series:"\u041b\u0438\u043d\u0438\u044f",weekend:"\u0412\u044b\u0445\u043e\u0434\u043d\u043e\u0439",nodata:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"},en:{"hide-all":"Hide all","show-all":"Show all",sum:"Total",scale:"Scale",series:"Series",weekend:"Weekend",nodata:"No data"}};t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return"string"!==typeof e&&(i.custom=e,e="custom"),t=>i[e][t]||t}},98855:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BatchMixin=void 0;const s=n(i(95588)),o=n(i(6063));t.BatchMixin=class{initMixin(){this._batch={active:!1,fns:[]}}batch(e){var t;return this._batch.active?e(this._batch):(this._batch.active=!0,e(this._batch),this._batch.reinit?this.fullUpdate():(this._batch.redrawLegend&&(null===(t=this.plugins.legend)||void 0===t||t.redraw()),this._batch.reopt&&this.createUplotOptions(!0),this._batch.recalc&&this.inStage("processing",(()=>{this.transformSeries()})).inStage("listen"),this._batch.fns.length&&this.uplot.batch((()=>this._batch.fns.forEach((e=>e(this._batch))))),this._batch.redraw&&this.uplot&&this.redraw(...this._batch.redraw),void(this._batch={active:!1,fns:[]})))}fullUpdate(){let e,t;this.inStage("dispose",(()=>{var i;if(this.uplot){const i=this.uplot.cursor;e=i.left,t=i.top,this.uplot.destroy()}null===(i=this.plugins.legend)||void 0===i||i.destroy()})).inStage("config",(()=>{this.plugins.legend=new o.default,this._batch={active:!1,fns:[]},this.createUplotOptions(!0),this.options=this.config.editUplotOptions?this.config.editUplotOptions(this.options):this.options})).inStage("processing",(()=>{this.transformSeries()})).inStage("uplot",(()=>{this.uplot=new s.default(this.options,this.series,this.initRender),e&&t&&e>0&&t>0&&this.uplot.setCursor({left:e,top:t}),this.state.subscribed||this.unsubscribe()})).inStage("listen")}}},32616:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateUplotOptionsMixin=void 0;const s=n(i(36558)),o=n(i(87163)),l=i(9084),r=i(36374),a=n(i(5613)),u=i(25009),c=i(6883),d=i(77423),h=i(61579),f=n(i(20315));function p(e,t){for(const i of e||[])if(i===t)return;null===e||void 0===e||e.push(t)}t.CreateUplotOptionsMixin=class{initMixin(){this._uHooks.onDraw=()=>{if("listen"===this.state.stage)return;this.state.stage="listen",this.execHooks("stage",{chart:this,stage:this.state.stage});const e=performance.now()-this._startTime;this._meta.renderTime=e,this.execHooks("load",{chart:this,meta:this._meta})},this._uHooks.ready=()=>{const e=performance.now()-this._startTime;this._meta.initTime=e,this.execHooks("inited",{chart:this,meta:{initTime:e}})},this._uHooks.drawClear=e=>{const{ctx:t}=e;t.save(),t.fillStyle=this.utils.theme.BACKGROUND,t.fillRect(l.DEFAULT_CANVAS_PIXEL_RATIO,l.DEFAULT_CANVAS_PIXEL_RATIO,e.width*l.DEFAULT_CANVAS_PIXEL_RATIO-2*l.DEFAULT_CANVAS_PIXEL_RATIO,e.height*l.DEFAULT_CANVAS_PIXEL_RATIO-2*l.DEFAULT_CANVAS_PIXEL_RATIO),t.restore()},this._uHooks.setSelect=e=>{const{left:t,width:i}=e.select,[n,s]=[e.posToVal(t,l.DEFAULT_X_SCALE),e.posToVal(t+i,l.DEFAULT_X_SCALE)],{timeMultiplier:o=l.TIME_MULTIPLIER}=this.config.chart||{};this.execHooks("onSelect",{from:Math.ceil(n/o),to:Math.ceil(s/o),chart:this}),e.setSelect({width:0,height:0,top:0,left:0},!1)}}createUplotOptions(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t,i,n,g,m,_,v,y,b,w,E;const{config:S}=this,x=[];let A=null===(t=this.plugins)||void 0===t?void 0:t.tooltip;if(S.tooltip&&!1!==S.tooltip.show&&(A?A.updateOptions(S.tooltip):A=(0,s.default)(this,S.tooltip),x.push(A.uplot),this.plugins.tooltip=A),e)this.plugins.plotLines&&x.push(this.plugins.plotLines.uplot);else{const e=(0,f.default)(this.config.plotLines||{})(this);this.plugins.plotLines=e,x.push(e.uplot)}Object.entries(S.plugins).forEach((e=>{let[t,i]=e;const n=i(this);x.push(n.uplot),Object.assign(this.plugins,{[t]:n})}));const T=S.chart,O={width:this.root.clientWidth,height:this.clientHeight,title:null===(i=S.title)||void 0===i?void 0:i.text,plugins:x,focus:{alpha:l.DEFAULT_FOCUS_ALPHA},series:[{id:l.DEFAULT_X_SERIE_NAME,$c:S.timeline,scale:l.DEFAULT_X_SCALE,count:S.timeline.length}],ms:T.timeMultiplier||l.TIME_MULTIPLIER,hooks:S.hooks||{}};if(this.state.isEmptyDataSet=0===S.timeline.length||0===S.series.length||S.series.every((e=>{let{data:t}=e;return 0===t.length})),O.cursor=O.cursor||{},O.cursor.points=O.cursor.points||{},O.cursor.drag=O.cursor.drag||{dist:(null===(n=T.select)||void 0===n?void 0:n.minWidth)||l.MIN_SELECTION_WIDTH,x:null===(g=O.cursor.y)||void 0===g||g,y:null!==(m=O.cursor.y)&&void 0!==m&&m,setScale:null===(v=null===(_=T.select)||void 0===_?void 0:_.zoom)||void 0===v||v},this.utils.sync&&(O.cursor.sync=O.cursor.sync||{key:this.utils.sync.key}),S.cursor){const e=(0,o.default)(this,S.cursor);this.plugins.cursor=e,x.push(e.uplot)}const L=S.series||[],I=O.series;for(let s=L.length-1;s>=0;s--){const e=(0,r.configureSeries)(this,L[s]||{},s),t=I.push(e);this.state.y2uIdx[e.id||s]=t-1}const D=(0,a.default)(this,S);x.push(D),O.series=I,S.scales&&0!==Object.keys(S.scales).length||(S.scales={x:{},y:{}}),O.scales=O.scales||{},O.scales=(0,u.configureScales)(this,O.scales,S),O.axes=O.axes||[];return O.axes.push(...(0,c.configureAxes)(this,S)),O.hooks=S.hooks||{},O.hooks.draw=O.hooks.draw||[],O.hooks.ready=O.hooks.ready||[],O.hooks.drawClear=O.hooks.drawClear||[],O.hooks.setSelect=O.hooks.setSelect||[],p(O.hooks.draw,this._uHooks.onDraw),p(O.hooks.ready,this._uHooks.ready),p(O.hooks.drawClear,this._uHooks.drawClear),p(O.hooks.setSelect,this._uHooks.setSelect),O.drawOrder=(null===(y=T.appearance)||void 0===y?void 0:y.drawOrder)?null===(b=T.appearance)||void 0===b?void 0:b.drawOrder.filter((e=>e===h.DrawOrderKey.Series||e===h.DrawOrderKey.Axes)):[h.DrawOrderKey.Series,h.DrawOrderKey.Axes],O.legend={show:!1},O.padding=(null===(w=S.chart.size)||void 0===w?void 0:w.padding)||(0,d.getPaddingByAxes)(O),null===(E=this.plugins.legend)||void 0===E||E.preInit(this,this.config.legend,O),O.height=this.clientHeight,this.options=O,O}}},34730:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicUpdatesMixin=void 0;const s=n(i(2921)),o=i(9084),l=i(36374),r=i(6883),a=i(36098);function u(e,t,i){var n,s,o,l,r,u,c,d,h,f,p,g;if(arguments.length>3&&void 0!==arguments[3]&&arguments[3])return e.config={...e.config,...i},void(t.reinit=!0);const m=function(e,t){return function(i,n){const s=(0,a.get)(e,i),o=(0,a.get)(t,i);return n?!n(s,o):s!==o}}(e.config,i);i.title&&m("title")&&e.setTitle(i.title),(null===(s=null===(n=i.chart)||void 0===n?void 0:n.appearance)||void 0===s?void 0:s.theme)&&m("chart.appearance.theme")&&e.setTheme(null===(l=null===(o=i.chart)||void 0===o?void 0:o.appearance)||void 0===l?void 0:l.theme),(null===(u=null===(r=i.chart)||void 0===r?void 0:r.appearance)||void 0===u?void 0:u.locale)&&m("chart.appearance.locale")&&e.setLocale(null===(d=null===(c=i.chart)||void 0===c?void 0:c.appearance)||void 0===d?void 0:d.locale),i.axes&&m("axes",a.deepIsEqual)&&e.setAxes(i.axes),i.scales&&m("scales",a.deepIsEqual)&&e.setScales(i.scales);Boolean(i.series)&&function(e,t){if(e.length!==(null===t||void 0===t?void 0:t.length))return!0;const i=new Map,n=new Map;return e.forEach((e=>{i.set(e.id,e)})),t.forEach((e=>{n.set(e.id,e)})),!(!t.some((e=>{let{id:t}=e;return!i.has(t)}))&&!e.some((e=>{let{id:t}=e;return!n.has(t)})))}(e.config.series,i.series)&&(t.redrawLegend=!0),(i.series||i.timeline)&&e.setSeries(null!==(h=i.timeline)&&void 0!==h?h:e.config.timeline,null!==(f=i.series)&&void 0!==f?f:e.config.series,{incremental:!1}),i.tooltip&&m("tooltip")&&(null===(p=e.plugins.tooltip)||void 0===p||p.updateOptions(i.tooltip)),i.legend&&m("legend")&&(t.reinit=!0),null===(g=e.plugins.tooltip)||void 0===g||g.reset(),t.reopt=!0,e.config={...e.config,...i}}function c(e,t,i){let n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{incremental:!0,splice:!1},o=[],r=[],a=null,u=!1,c=!1;if(["number","string"].includes(typeof t)?(u=!1,n=!1,r=[i],a=t):"number"===typeof t[0]?(o=t,r=i,u=Boolean(s.incremental),n=!s.incremental):(r=t,n=!0),this.isEmpty&&r.some((e=>{let{data:t}=e;return null===t||void 0===t?void 0:t.length})))e.reinit=!0;else{if(!1===n){let t=!1;if(u&&this.config.timeline.push(...o),r.forEach((i=>{var n,s;let o="number"===typeof a?this.config.series[0]:this.config.series.find((e=>{let{id:t}=e;return t===i.id||t===a})),r=null===o||void 0===o?void 0:o.id;if("number"===typeof a&&this.state.y2uIdx[a]&&(o=this.config.series[a],r=a),o&&r){const{data:a,...d}=i,h=this.state.y2uIdx[r];"dots"!==o.type&&"dots"!==i.type&&"dots"!==(null===(n=this.config.chart.series)||void 0===n?void 0:n.type)||(e.reinit=!0),u?o.data=a?o.data.concat(a):o.data:(null===a||void 0===a?void 0:a.length)&&(o.data=a,c=!0);const f=(0,l.configureSeries)(this,Object.assign(o,d),h),p=this.options.series[h],g=this.uplot.series[h];g.show!==f.show&&e.fns.push((()=>{this.uplot.setSeries(h,{show:f.show})})),null!==g._focus&&g._focus===f.focus||e.fns.push((()=>{this.uplot.setSeries(h,{focus:f.focus})})),g.color!==f.color&&(t=!0),f.scale&&(null===(s=this.config.scales[f.scale])||void 0===s?void 0:s.stacking)&&(c=!0),(0,l.overrideSeriesInUpdate)(p,f),(0,l.overrideSeriesInUpdate)(g,f)}else e.fns.push((()=>{const e=(0,l.configureSeries)(this,i,this.config.series.length);this.state.y2uIdx[e.id]=this.uplot.series.length,this.uplot.addSeries(e,this.config.series.length)})),this.config.series.push(i)})),t&&e.fns.push((()=>{var e;null===(e=this.plugins.cursor)||void 0===e||e.updatePoints()})),s.splice){const e=r[0].data.length;this.config.series.forEach((t=>{t.data.splice(0,e)})),this.config.timeline.splice(0,o.length)}}else this.config.timeline=o,this.config.series=r,e.reinit=!0;e.reinit||(this._batch.fns.push((()=>{var e,t;return null===(t=null===(e=this.plugins)||void 0===e?void 0:e.tooltip)||void 0===t?void 0:t.reset()})),(c||o.length)&&(e.recalc=!0,e.fns.push((()=>{this.uplot.setData(this.series)}))))}}t.DynamicUpdatesMixin=class{setLocale(e){this.batch((t=>function(e,t,i){e.utils.i18n=(0,s.default)(i),t.redrawLegend=!0}(this,t,e)))}setTitle(e){this.batch((t=>{this.config.title=e,this.initTitle(),t.redraw=[!0,!0]}))}setTheme(e){this.batch((t=>function(e,t,i){e.utils.theme.setTheme(t);const n=["light","light-hc","dark","dark-hc"].map((e=>`yagr_theme_${e}`));e.root.classList.remove(...n),e.root.classList.add("yagr_theme_"+t),i.redraw=[!1,!0]}(this,e,t)))}setAxes(e){this.batch((t=>function(e,t,i){const{x:n,...s}=i;if(n){const t=e.uplot.axes.find((e=>{let{scale:t}=e;return t===o.DEFAULT_X_SCALE}));t&&(0,r.updateAxis)(e,t,{scale:o.DEFAULT_X_SCALE,...n})}Object.entries(s).forEach((t=>{let[i,n]=t;const s=e.uplot.axes.find((e=>{let{scale:t}=e;return t===i}));s&&(0,r.updateAxis)(e,s,{scale:i,...n})})),t.redraw=(0,r.getRedrawOptionsForAxesUpdate)(i)}(this,t,e)))}setSeries(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{incremental:!0,splice:!1};this.batch((n=>c.call(this,n,e,t,i)))}setFocus(e,t){this.batch((()=>function(e,t,i){var n;const s=null===t?null:e.state.y2uIdx[t];null===(n=e.plugins.cursor)||void 0===n||n.focus(s,i),e.uplot.setSeries(s,{focus:i})}(this,e,t)))}setVisible(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.batch((n=>function(e,t,i,n,s){const l=null===t?null:e.state.y2uIdx[t];(null===t?e.config.series:[e.config.series.find((e=>{let{id:i}=e;return i===t}))]).forEach((e=>{e&&(e.show=i)})),s.fns.push((()=>{e.uplot.setSeries(l,{show:i})})),e.options.series=e.uplot.series;let r=!1;if(l){const t=e.uplot.series[l];t.show=i;const n=t.scale||o.DEFAULT_Y_SCALE,s=e.config.scales[n];r=Boolean(s&&s.stacking)}else r=e.options.series.reduce(((t,n)=>{var s;const{scale:o}=n;return n.show=i,Boolean(o&&(null===(s=e.config.scales[o])||void 0===s?void 0:s.stacking)||t)}),!1);r&&(s.recalc=!0,s.fns.push((()=>{var t;e.uplot.setData(e.series,!0),n&&(null===(t=e.plugins.legend)||void 0===t||t.update())})))}(this,e,t,i,n)))}setScales(e){this.batch((t=>function(e,t,i){let n=!1,s=!1;Object.entries(t).forEach((t=>{let[i,o]=t;const l=e.config.scales[i];if(l){const{stacking:e}=l,{stacking:t}=o;e!==t&&(n=!0),o.normalize===l.normalize&&o.normalizeBase===l.normalizeBase||(s=!0)}}));const l=Object.entries(t).every((t=>{let[i,n]=t;const s=e.config.scales[i],{min:o,max:l,...r}=s,{min:u,max:c,...d}=n;return!(!1===(0,a.deepIsEqual)(d,r))&&(o!==u||l!==c)})),r=Object.keys(t).includes(o.DEFAULT_X_SCALE);if(l&&!r)return Object.entries(t).forEach((t=>{let[n,s]=t;i.fns.push((()=>{e.uplot.setScale(n,{min:s.min,max:s.max})}))}));(n||s)&&(i.reinit=!0),e.config.scales=t,i.reinit=!0}(this,e,t)))}setConfig(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.batch((i=>u(this,i,e,t)))}}},24908:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransformSeriesMixin=void 0;const n=i(9084),s=i(36098);t.TransformSeriesMixin=class{transformSeries(){const e=performance.now(),t=[],i=this.config,o=i.timeline;let l=i.processing||!1,r=this.config.series.map((e=>{let{data:t}=e;return t}));l&&l.interpolation&&(r=(0,s.preprocess)(r,o,l),l=!1);const a=Boolean(l&&l.nullValues),u=l&&l.nullValues||{},c={};for(let d=0;d<r.length;d++){let e=[];const i=d+1,l=r[d],h=this.options.series.length-i,f=this.options.series[h],p=f.scale||n.DEFAULT_Y_SCALE,g=this.config.scales[p]||{},m=g.stacking,_=f.stackGroup||0;let v=!0;m&&!c[p]&&(this.options.focus=this.options.focus||{alpha:1.1},this.options.focus.alpha=1.1,c[p]=[]),m&&!c[p][_]&&(c[p][_]=new Array(o.length).fill(0)),f.count=0;for(let t=0;t<l.length;t++){let i=l[t];if(a&&u[String(i)]&&(i=null),f.transform&&(f._transformed=!0,i=f.transform(i,r,t)),g.transform&&(f._transformed=!0,i=g.transform(i,r,t)),null===i){if("line"===f.type||"dots"===f.type){e.push(null);continue}i=m?0:null}if(v=!1,g.normalize){const e=(0,s.getSumByIdx)(this.options.series,t,p);i=e&&(null!==i&&void 0!==i?i:0)/e*(g.normalizeBase||100),f.normalizedData=f.normalizedData||[],f.normalizedData[t]=i}g.stacking&&(!1===f.show&&(i=0),i=c[p][_][t]+=null!==i&&void 0!==i?i:0),"logarithmic"===g.type&&0===i&&(i=1),f.sum=(f.sum||0)+(i||0);"number"===typeof f.$c[t]&&(f.count+=1),e.push(i)}f.avg=(f.sum||0)/f.count,f.empty=v,f.postProcess&&(e=f.postProcess(e,d,this)),t.unshift(e)}return t.unshift(this.config.timeline),this.series=t,this.execHooks("processed",{chart:this,meta:{processTime:performance.now()-e}}),this.series}}},87163:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cursorPoint=void 0;const s=i(9084),o=n(i(50934)),l=i(36098),r=50;function a(e,t,i){if(i||(i=t.querySelector("span")),!i)return;t.style.background=`${e.color}`,i.style.background=e.color||s.SERIE_COLOR;const n=o.default.parseRgba(e.color)||[256,256,256,0];t.style.boxShadow=`0px 0px 0px 1px rgba(${n[0]}, ${n[1]}, ${n[2]}, 0.5)`}function u(e,t){const i=e.series[t],n=(0,l.html)("span"),s=(0,l.html)("div",{class:"yagr-point","data-idx":String(t)},i.empty?void 0:n);return i.empty?(s.style.display="none",s):(a(i,s,n),s)}function c(e,t){return void 0===t?Array.from(e.querySelectorAll(".yagr-point")):[e.querySelector(`.yagr-point[data-idx="${t}"]`)]}t.cursorPoint=u,t.default=function(e,t){var i,n,o;const d=e.config.processing||{},h=Boolean(d.interpolation),f=null===(i=d.interpolation)||void 0===i?void 0:i.value,p=!1!==t.snapToValues&&(t.snapToValues||"closest"),g=!!h&&(null!==(o=null===(n=d.interpolation)||void 0===n?void 0:n.snapToValues)&&void 0!==o?o:"closest");let m={};const _=(e,t,i)=>{const n=e.series[t];if(n.scale===s.DEFAULT_X_SCALE)return i;const o=n.$c||e.data[t],r=o[i];return h&&r===f?(0,l.findDataIdx)(o,n,i,g,f):null===r?(0,l.findDataIdx)(o,n,i,p,null):i};return{showPoints:t=>{const i=e.uplot.over;if(!i)return;c(i,t).forEach((e=>{e.style.visibility="visible"}))},hidePoints:t=>{const i=e.uplot.over;if(!i)return;c(i,t).forEach((e=>{e.style.visibility="hidden"}))},pin:t=>{var i;const n=e.root.querySelector(".u-over");if(n)if(t){const e=document.createElement("div");e.classList.add("yagr-points-holder"),n.querySelectorAll(".yagr-point").forEach((t=>{const i=t.cloneNode(!0);e.appendChild(i);const n=i.dataset.idx;n&&(m[n]=i)})),n.appendChild(e)}else m={},null===(i=n.querySelector(".yagr-points-holder"))||void 0===i||i.remove()},updatePoints:()=>{e.root.querySelectorAll(".yagr-point").forEach((t=>{const i=Number(t.dataset.idx);if(isNaN(i))return;a(e.uplot.series[i],t)}))},focus:(e,t)=>{Object.entries(m).forEach((i=>{let[n,s]=i;s.style.display=null!==e?n===String(e)&&t?"block":"none":t?"block":"none"}))},uplot:{opts:(e,i)=>{var n;i.cursor=i.cursor||{};const o=i.series.filter((e=>e.empty)).length,l=i.series.length-1,a=null!==(n=null===t||void 0===t?void 0:t.maxMarkers)&&void 0!==n?n:r;i.cursor.points={show:l-o<=a&&u,size:(e,i)=>{const n=e.series[i];return(n.cursorOptions?n.cursorOptions.markersSize:null===t||void 0===t?void 0:t.markersSize)||s.MARKER_DIAMETER}},i.cursor.dataIdx=_},hooks:{...t.hideMarkers&&{setCursor:i=>{var n,s;const o=i.cursor.idx;if(!(0,l.isNil)(o))for(let l=1;l<i.series.length;l++){const r=i.series[l].$c[o];t.hideMarkers(r,l)?null===(n=e.plugins.cursor)||void 0===n||n.hidePoints(l):null===(s=e.plugins.cursor)||void 0===s||s.showPoints(l)}}},init:e=>{const i=e.root.querySelector(".u-cursor-x");i&&(t.x&&!1===t.x.visible&&(i.style.display="none"),i.style.borderRight=t.x&&t.x.style||s.CURSOR_STYLE);const n=e.root.querySelector(".u-cursor-y");n&&(t.y&&!1!==t.y.visible?n.style.borderBottom=t.y.style||s.CURSOR_STYLE:n.style.display="none")}}}}}},6063:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hasOneVisibleLine=void 0;const n=i(9084),s=i(36098),o=i(540),l="null";t.hasOneVisibleLine=e=>e.some((e=>{let{show:t,id:i}=e;return i!==n.DEFAULT_X_SERIE_NAME&&t}));const r=(e,i)=>i.length>3&&e((0,t.hasOneVisibleLine)(i)?"hide-all":"show-all");t.default=class{constructor(){this.pagesCount=0,this.state={page:0,pages:1,pageSize:0,rowsPerPage:1,paginated:!1,requiredSpace:0,totalSpace:0},this.itemsHtml="",this.preInit=(e,t,i)=>{this.yagr=e,this.options=Object.assign({show:!1,position:"bottom",fontSize:12,maxLegendSpace:.3,className:void 0,behaviour:"basic"},t||{}),this.calc(i)},this.init=e=>{var t;this.options.show&&(this.uplot=e,null===(t=e.root.querySelector(".u-legend"))||void 0===t||t.remove(),this.render())},this.update=()=>{this.yagr.root.querySelectorAll("[data-serie-id]").forEach((e=>{var t,i;const n=e.getAttribute("data-serie-id");if(!n||n===l)return;const s=null===(i=null===(t=this.uplot)||void 0===t?void 0:t.series[this.yagr.state.y2uIdx[n]])||void 0===i?void 0:i.show;e.classList[s?"remove":"add"]("yagr-legend__item_hidden")}))},this.measureLegend=e=>{const t=this.yagr.root,i=(0,s.html)("div",{class:"yagr-legend",style:{visibility:"hidden"}},e);t.appendChild(i);const n=i.childNodes[0].getBoundingClientRect();return i.remove(),n},this.nextPage=()=>{const{state:e}=this;this.state.page+=1,this.items&&(this.items.style.transform=`translate(0, ${-1*e.page*e.pageSize}px)`,this.renderPagination())},this.prevPage=()=>{const{state:e}=this;this.state.page-=1,this.items&&(this.items.style.transform=`translate(0, ${-1*e.page*e.pageSize}px)`,this.renderPagination())}}redraw(){this.options.show&&this.render()}destroy(){var e;this._onDestroy&&this._onDestroy(),null===(e=this.legendEl)||void 0===e||e.remove()}applyHandlers(){const{yagr:e,uplot:i}=this;if(!i)return()=>{};const n=e.root.querySelectorAll("[data-serie-id]"),s=[],a={basic:n=>()=>{const s=n.getAttribute("data-serie-id"),o=[];if(s===l){const e=!(0,t.hasOneVisibleLine)(i.series);for(let t=1;t<i.series.length;t++)o.push([i.series[t],e])}else{const e=i.series.find((e=>{let{id:t}=e;return t===s}));if(!e)return;o.push([e,!e.show])}o.forEach((t=>{let[i,n]=t;if(i.show===n)return;const s=e.root.querySelector(`[data-serie-id="${i.id}"]`);e.setVisible(i.id,n,!1),null===s||void 0===s||s.classList[n?"remove":"add"]("yagr-legend__item_hidden")}));const a=e.root.querySelector(".yagr-legend__all-series");if(a){const e=r(this.yagr.utils.i18n,i.series);a.innerHTML=e||""}},extended:n=>{const s=(t,i)=>{const n=e.root.querySelector(`[data-serie-id="${t}"]`);e.setVisible(t,i,!1),null===n||void 0===n||n.classList[i?"remove":"add"]("yagr-legend__item_hidden")},o=e=>{this.state.startSerieRange=e;const n=i.series.filter((t=>t.id!==e.id)),o=!(0,t.hasOneVisibleLine)(n)&&!1!==e.show;i.series.forEach((t=>{const i=e.id===t.id||o;s(t.id,i)}))},l=e=>{this.state.startSerieRange||(this.state.startSerieRange=i.series[1]);const t=[];i.series.forEach(((i,n)=>{var s;i.id===e.id&&t.push(n),i.id===(null===(s=this.state.startSerieRange)||void 0===s?void 0:s.id)&&t.push(n)})),i.series.forEach(((e,i)=>{const n=i>=t[0]&&i<=t[1];s(e.id,n)}))};return e=>{const t=n.getAttribute("data-serie-id"),r=i.series.find((e=>{let{id:i}=e;return i===t}));r&&(e.preventDefault(),e.ctrlKey||e.metaKey?(e=>{s(e.id,!e.show)})(r):e.shiftKey?l(r):o(r))}}},u=t=>()=>{const i=t.getAttribute("data-serie-id");if(t.classList.contains("yagr-legend__item_hidden")||i===l)return;const n=this.yagr.uplot.series.find((e=>{let{id:t}=e;return t===i}));n&&e.setFocus(n.id,!0)},c=()=>{e.setFocus(null,!0)};n.forEach((e=>{const t=a[this.options.behaviour||"basic"](e),i=u(e);e.addEventListener("click",t),e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",c),e.addEventListener("mousedown",o.preventMouseEvents),s.push((()=>{e.removeEventListener("click",t),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",c),e.removeEventListener("mousedown",o.preventMouseEvents)}))}));const d=()=>s.forEach((e=>e()));return this._onDestroy=d,d}render(){var e,t;let i=!1;const{uplot:n,options:o}=this;if(!n)return;let l=this.yagr.root.querySelector(".yagr-legend");if(l?i=!0:l=(0,s.html)("div",{class:`yagr-legend yagr-legend__${this.options.position} ${(null===o||void 0===o?void 0:o.className)||""}`}),l){if(i||("top"===o.position?n.root.before(l):null===(e=n.root)||void 0===e||e.after(l)),this.legendEl=l,this.itemsHtml&&!i||this.calc(this.yagr.options),l.innerHTML=`<div class="yagr-legend__container" style="height: ${this.state.requiredSpace}px">${this.itemsHtml}</div>`,this.items=l.querySelector(".yagr-legend__items"),this.container=l.querySelector(".yagr-legend__container"),this.state.paginated){const e=this.renderPagination();null===(t=this.container)||void 0===t||t.after(e)}else this.items.style.justifyContent="center";this.applyHandlers()}}renderPagination(){const{state:e}=this;let t=this.yagr.root.querySelector(".yagr-legend__pagination");if(t){const e=t.querySelector(".yagr-legend__icon-down"),i=t.querySelector(".yagr-legend__icon-up");e.removeEventListener("click",this.nextPage),i.removeEventListener("click",this.prevPage)}else t=(0,s.html)("div",{class:"yagr-legend__pagination"});const i=0===e.page?"yagr-legend__icon-up_disabled":"",n=e.page===e.pages-1?"yagr-legend__icon-down_disabled":"";t.innerHTML=`<span class="yagr-legend__icon-up ${i}"></span>\n<span class="yagr-legend__pagination-text">${e.page+1}/${e.pages}</span>\n<span class="yagr-legend__icon-down ${n}"></span>`;const o=t.querySelector(".yagr-legend__icon-down"),l=t.querySelector(".yagr-legend__icon-up");return n||o.addEventListener("click",this.nextPage),i||l.addEventListener("click",this.prevPage),t}createIconLineElement(e){return(0,s.html)("span",{class:`yagr-legend__icon yagr-legend__icon_${e.type}`,style:{"background-color":e.color}})}createSerieNameElement(e){const t=(0,s.html)("span");return t.innerText=e.name||"unnamed",t}renderItems(e){const t=r(this.yagr.utils.i18n,e.series),i="extended"!==this.options.behaviour&&(e=>e.length>3&&l||void 0)(e.series),n=i?[i]:[];for(let s=1;s<e.series.length;s++)n.push(e.series[s]);return`<div class="yagr-legend__items">${n.map((e=>{let n,s,o=" ";if(e===l)n=t,s=i,o=" yagr-legend__all-series ";else{s=e.id;const t=this.createIconLineElement(e),i=this.createSerieNameElement(e);n=`${t.outerHTML}${i.outerHTML}`}return`<div class="yagr-legend__item${o}${"string"===typeof e||!1!==e.show?"":"yagr-legend__item_hidden"}" data-serie-id="${s}">${n}</div>`})).join("")}</div>`}calc(e){if(!this.options.show)return;const t=e.height-this.VERTICAL_PADDING,i=this.renderItems(e),{height:n}=this.measureLegend(i),s=this.options.fontSize+2,o=t*this.options.maxLegendSpace,l=Math.floor(o/s),r=l-1,a=Math.min(r*s,o),u=Math.min(l*s,o),c=n>a&&a>0,d=Math.min(c?u:a,n),h=Math.ceil(n/a),f=c?this.VERTICAL_PADDING+18:this.VERTICAL_PADDING;this.state.requiredSpace=d,this.state.totalSpace=d+f,this.state.paginated=c,this.state.page=this.state.page||0,this.state.pages=h,this.state.pageSize=a,this.state.rowsPerPage=l,this.itemsHtml=i}get VERTICAL_PADDING(){return"bottom"===this.options.position?20:48}}},5613:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.drawMarkersIfRequired=t.renderCircle=void 0;const n=i(9084),s=i(36098);t.renderCircle=(e,t,i,s,o,l,r,a)=>{const{ctx:u}=e,c=Math.round(e.valToPos(t,n.DEFAULT_X_SCALE,!0)),d=Math.round(e.valToPos(i,a||n.DEFAULT_Y_SCALE,!0));if(u.beginPath(),u.arc(c,d,2*s,0,2*Math.PI),u.fillStyle=l,o){const e=u.lineWidth,t=u.strokeStyle;u.lineWidth=o,u.strokeStyle=r,u.stroke(),u.lineWidth=e,u.strokeStyle=t}u.fill(),u.closePath()},t.drawMarkersIfRequired=function(e,i,o,l){const{color:r,scale:a,spanGaps:u,count:c,pointsSize:d}=e.series[i];if(u&&c>1)return!1;let h,f=o;for(;f<=l;){const o=e.data[i][f];if(null===o){h=o,f++;continue}const l=f+1,u=e.data[i][l];(0,s.isNil)(h)&&(0,s.isNil)(u)&&(0,t.renderCircle)(e,e.data[0][f],o,null!==d&&void 0!==d?d:n.DEFAULT_POINT_SIZE/2,0,r,r,a||n.DEFAULT_Y_SCALE),h=o,f++}},t.default=function(e,i){var s;const{size:o=n.DEFAULT_POINT_SIZE,strokeWidth:l=2,strokeColor:r="#ffffff",show:a}=i.markers,u=null===(s=i.chart)||void 0===s?void 0:s.series,c=(null===u||void 0===u?void 0:u.pointsSize)||n.DEFAULT_POINT_SIZE;function d(i,s,u,d){const{scale:h,_focus:f,color:p,getFocusedColor:g,type:m}=i.series[s];let _=u;const v="dots"===m?a?o:c:o;for(;_<=d;){const o=i.data[s][_];null!==o&&(0,t.renderCircle)(i,i.data[0][_],o,v,l,(f||null===f?p:g(e,s))||p,r,h||n.DEFAULT_Y_SCALE),_++}}const h=(e,t)=>{0!==e&&null!==e&&("dots"===t.type||i.markers.show)&&(t.points=t.points||{},t.points.show=d)};return{opts:(e,t)=>{(i.markers.show||t.series.some((e=>"dots"===e.type)))&&t.series.forEach(((e,t)=>h(t,e)))},hooks:{addSeries:(e,t)=>{const i=e.series[t];h(t,i)},setSeries:(e,t,i)=>{h(t,i)}}}}},20315:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(9084),s=i(61579),o=i(36098),l=0,r={[s.DrawOrderKey.Series]:0,[s.DrawOrderKey.Axes]:1,plotLines:2};function a(e,t){return e.some((e=>(0,o.deepIsEqual)(e,t)))}const u={"012":"draw",102:"draw",201:"drawClear",210:"drawClear",120:"drawAxes","021":"drawSeries"};t.default=function(e){let t=[];return function(i){var s;const o=null===(s=i.config.chart.appearance)||void 0===s?void 0:s.drawOrder,c=(o?o.map((e=>r[e])):[0,1,2]).join(""),d=u[c]||"drawClear";function h(s){const{ctx:o}=s,{height:r,top:a,width:u,left:c}=s.bbox,d=s.data[0];for(const h of t){if(!h.scale)continue;if(e.render){e.render(s,h);continue}o.save(),o.fillStyle=i.utils.colors.parse(h.color);const{scale:t,value:f}=h;if(Array.isArray(f)){const[e,i]=f.map((e=>{if(Math.abs(e)!==1/0){if(t===n.DEFAULT_X_SCALE){if(e<d[0])return d[0];if(e>d[d.length-1])return d[d.length-1]}else{const i=s.scales[t];if(void 0!==i.min&&e<i.min)return i.min;if(void 0!==i.max&&e>i.max)return i.max}return e}const i=e>0?t===n.DEFAULT_X_SCALE?s.width:0:t===n.DEFAULT_X_SCALE?0:s.height;return s.posToVal(i,t)})),l=s.valToPos(e,t,!0),p=s.valToPos(i,t,!0),g=h.accent;t===n.DEFAULT_X_SCALE?(o.fillRect(l,a,p-l,r),g&&(o.fillStyle=g.color,o.fillRect(l,a-g.space,p-l,g.space))):(o.fillRect(c,l,u,p-l),g&&(o.fillStyle=g.color,o.fillRect(u+c,l,g.space,p-l)))}else{const e=s.valToPos(f,t,!0),i=h;if(o.beginPath(),t===n.DEFAULT_X_SCALE){const i=s.data[0][s.data[0].length-1];if(e-s.valToPos(i,t,!0)>l)continue;o.moveTo(e,a),o.lineTo(e,r+a)}else o.moveTo(c,e),o.lineTo(u+c,e);o.lineWidth=i.width||n.DEFAULT_CANVAS_PIXEL_RATIO,o.strokeStyle=i.color||"#000",i.dash&&o.setLineDash(i.dash),o.closePath(),o.stroke()}o.restore()}}const f={get:()=>t,clear:e=>{t=e?t.filter((t=>t.scale!==e)):[]},remove:e=>{t=t.filter((t=>!a(e,t)))},add:(e,i)=>{for(const n of e)t.push(i?{scale:i,...n}:n)},update:(e,i)=>{if(!e||0===e.length)return void f.clear(i);const n=e.filter((e=>!a(t,e))),s=t.filter((t=>!a(e,t)));n.length&&f.add(n,i),s.length&&f.remove(s)},uplot:{opts:()=>{const e=i.config;t=[],Object.entries(e.axes).forEach((e=>{let[i,n]=e;n.plotLines&&n.plotLines.forEach((e=>{t.push({...e,scale:i})}))}))},hooks:{[d]:"drawSeries"===d?(e,t)=>{t===e.series.length-1&&h(e)}:h}}};return f}}},43287:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=i(36098),s={size:["height","width"],clientSize:["clientHeight","clientWidth"],offsetSize:["offsetHeight","offsetWidth"],maxSize:["maxHeight","maxWidth"],before:["top","left"],marginBefore:["marginTop","marginLeft"],after:["bottom","right"],marginAfter:["marginBottom","marginRight"],scrollOffset:["pageYOffset","pageXOffset"],offset:["offsetY","offsetY"],offsetOpt:["yOffset","xOffset"]};function o(e){return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}t.default=function(e,t){let i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bottom",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i=t instanceof Element||t instanceof Range?o(e.getBoundingClientRect()):t;const a=Object.assign({top:i.bottom||0,bottom:i.top||0,left:i.right||0,right:i.left||0},i),u={top:0,left:0,bottom:window.innerHeight,right:window.innerWidth};r.bound&&((r.bound instanceof Element||r.bound instanceof Range)&&(r.bound=o(r.bound.getBoundingClientRect())),Object.assign(u,r.bound));const c=getComputedStyle(e),{primary:d,secondary:h}=Object.entries(s).reduce(((e,t)=>{let[i,n]=t;return{primary:{...e.primary,[i]:n["top"===l||"bottom"===l?0:1]},secondary:{...e.secondary,[i]:n["top"===l||"bottom"===l?1:0]}}}),{primary:{},secondary:{}});e.style.position="absolute",e.style.maxWidth="",e.style.maxHeight="";const f=r[d.offsetOpt]||0,p=parseInt(c[h.marginBefore],10),g=p+parseInt(c[h.marginAfter],10),m=u[h.after]-u[h.before]-g,_=parseInt(c[h.maxSize],10);(!_||m<_)&&(e.style[h.maxSize]=(0,n.px)(m));const v=parseInt(c[d.marginBefore],10)+parseInt(c[d.marginAfter],10),y=a[d.before]-u[d.before]-v,b=u[d.after]-a[d.after]-v-f;(l===d.before&&e[d.offsetSize]>y||l===d.after&&e[d.offsetSize]>b)&&(l=y>b?d.before:d.after);const w=l===d.before?y:b,E=parseInt(c[d.maxSize],10);(!E||w<E)&&(e.style[d.maxSize]=(0,n.px)(w));const S=window[d.scrollOffset],x=t=>Math.max(u[d.before],Math.min(t,u[d.after]-e[d.offsetSize]-v));l===d.before?(e.style[d.before]=S+x(a[d.before]-e[d.offsetSize]-v)-f+"px",e.style[d.after]="auto"):(e.style[d.before]=(0,n.px)(S+x(a[d.after])+f),e.style[d.after]="auto");const A=window[h.scrollOffset];var T;return e.style[h.before]=(0,n.px)(A+(T=a[h.before]-p,Math.max(u[h.before],Math.min(T,u[h.after]-e[h.offsetSize]-g)))),e.style[h.after]="auto",e.dataset.side=l,{side:l,anchorRect:a,boundRect:u}}},2258:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderTooltip=void 0;const n=i(13135);t.renderTooltip=function(e){if(0===e.scales.length)return e.yagr.utils.i18n("nodata");const[t,i]=e.options.title?"string"===typeof e.options.title?[e.options.title,!1]:["",!0]:["",!1];return`${t?`<div class="__title">${t}</div>`:""}${e.scales.map((t=>{const s=(0,n.getOptionValue)(e.options.title,t.scale),o=e.scales.length>1?e.options.scales?`${(0,n.getOptionValue)(e.options.scales,t.scale)||""}`:`${e.yagr.utils.i18n("scale")}: ${t.scale}`:"";return`\n<div class="__section" data-scale=${t.scale}>\n    ${i&&s?`<div class="_section_title">${s}</div>`:""}\n    ${o?`<div class="__section_scale">${o}</div>`:""}\n    <div class="__section_body">${function(e,t,i){const s=e.slice(0,(0,n.getOptionValue)(t.maxLines,i));return s.map(((i,s)=>{let{value:o,name:l="unnamed",color:r,active:a,transformed:u,seriesIdx:c}=i;const d=`\n<span class="yagr-tooltip__val">${o}</span>\n    ${"number"===typeof u?`<span class="yagr-tooltip__tf">${u.toFixed(2)}</span>`:""}\n`;return`\n<div class="yagr-tooltip__item ${a?"_active":""}" data-series="${c}">\n    ${t.showIndicies?`<span class="yagr-tooltip__idx">${e.length-s}</span>`:""}\n    <span class="yagr-tooltip__mark" style="background-color: ${r}"></span>${(0,n.escapeHTML)(l)}&nbsp;&nbsp;${d}\n</div>`})).join("")+(e.length>s.length?`<div class="yagr-tooltip__item _more">+${e.length-s.length}</div>`:"")}(t.rows,e.options,t.scale)}</div>\n    ${(0,n.getOptionValue)(e.options.sum,t.scale)?`\n        <div class="__section_sum">\n            ${e.yagr.utils.i18n("sum")}: ${t.sum}\n        </div>\n    `:""}\n</div>`})).join("")}`}},36558:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(i(43287)),o=i(9084),l=i(36098),r=i(2258),a=i(13135),u=(e,t,i,n,s)=>{var o,r,a;const u=Array.isArray(i.$c)?i.$c:t;let c=u[n];if(s&&c===s.value){const e=null!==(o=s.snapToValues)&&void 0!==o?o:"closest";c=u[(0,l.findDataIdx)(u,i,n,e,s.value)]}else if(null===c){const t=null!==(r=e.snapToValues)&&void 0!==r?r:"closest",s=null!==(a=i.snapToValues)&&void 0!==a?a:t;c=u[(0,l.findDataIdx)(u,i,n,s,null)]}return c},c={maxLines:o.TOOLTIP_DEFAULT_MAX_LINES,highlight:!0,sum:!1,render:r.renderTooltip,pinable:!0,strategy:"pin",sort:void 0,showIndicies:!1,hideNoData:!1,className:"yagr-tooltip_default",xOffset:o.TOOLTIP_X_OFFSET,yOffset:o.TOOLTIP_Y_OFFSET,virtual:!1,showEmpty:!1,onUpdate:"reset"};class d{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i,n;this.handlers={init:[],mount:[],show:[],pin:[],unpin:[],hide:[],render:[],destroy:[],reset:[]},this.placement=s.default,this.renderTooltipCloses=()=>{},this.skipNextMouseUp=!1,this.emit=(e,t)=>{this.handlers[e].forEach((i=>{i(this.tOverlay,{state:this.state,actions:{pin:this.pin,show:this.show,hide:this.hide,dispose:this.dispose,reset:this.reset},data:t,yagr:this.yagr,event:e})}))},this.reset=()=>{var e;"none"!==this.opts.onUpdate?(this.state.visible&&this.hide(),this.state.pinned&&this.pin(!1),this.emit("reset")):null===(e=this.yagr.plugins.cursor)||void 0===e||e.pin(!1)},this.show=()=>{const e=!this.state.visible;this.state.visible=!0,this.tOverlay.style.display="block",e&&this.emit("show")},this.hide=()=>{const e=this.state.visible;this.state.visible=!1,this.tOverlay.style.display="none",this.emit("hide"),e&&this.emit("show")},this.pin=(e,t)=>{var i;this.state.pinned=e;const n=this.state.range||[];if(null===(i=this.yagr.plugins.cursor)||void 0===i||i.pin(e&&(null===n[1]||n.length<2)),this.opts.virtual)return this.emit(e?"pin":"unpin");t&&this.placement(this.tOverlay,{left:t.x+this.bLeft,top:this.bTop+t.y-(this.opts.yOffset||0)},"right",{bound:this.bound,xOffset:this.opts.xOffset,yOffset:this.opts.yOffset});const s=this.tOverlay.querySelector("._tooltip-list");e?(this.state.visible||this.show(),this.tOverlay.classList.add("yagr-tooltip_pinned"),s&&(null===s||void 0===s?void 0:s.clientHeight)&&(s.style.height=(0,l.px)(s.clientHeight)),this.opts.render===r.renderTooltip&&(document.addEventListener("mousemove",this.checkFocus),document.addEventListener("mousedown",this.detectClickOutside))):(this.tOverlay.classList.remove("yagr-tooltip_pinned"),this.opts.render===r.renderTooltip&&(document.removeEventListener("mousemove",this.checkFocus),document.removeEventListener("mousedown",this.detectClickOutside))),this.emit(e?"pin":"unpin")},this.checkFocus=e=>{const t=e.target;let i;t&&this.tOverlay.contains(t)&&t.classList.contains("yagr-tooltip__item")&&(i=t.dataset.series);const n=i?this.yagr.uplot.series[Number(i)]:null;i&&n?(this.state.focusedSeries=i,this.yagr.setFocus(n.id,!0)):this.state.focusedSeries&&(this.state.focusedSeries=null,this.yagr.setFocus(null,!0))},this.render=e=>{const t=this.yagr.uplot;let{left:i,top:n}=e;const{idx:s}=e,{opts:r,state:d}=this;if(r.show&&"function"===typeof r.show&&!1===r.show(this.yagr))return void this.hide();(i<0||n<0)&&!d.pinned&&this.isNotInDrag&&this.hide(),n=(0,l.inBetween)(n,0,t.bbox.top+t.bbox.height),i=(0,l.inBetween)(i,0,t.bbox.left+t.bbox.width);const{data:h}=t;if(null===h||(0,l.isNil)(s)||void 0===n)return;const f=h[0][s],p={},g={},m={};let _=t.series.length-1;for(;_>=1;){const e=t.series[_];if(!e.show){_-=1;continue}const i=e.scale||o.DEFAULT_Y_SCALE;m[i]=m[i]||[],m[i].push(_),_-=1}Object.entries(m).forEach((e=>{let[o,c]=e;var d;g[o]=g[o]||{rows:[]};const h=g[o],f=Number(t.posToVal(n,o).toFixed(2)),m=(0,a.getOptionValue)(r.value,o);for(const i of c){const e=t.data[i],n=t.series[i];let l=u(this.yagr.config.cursor,e,n,s,this.interpolation),c=l;"string"===typeof l&&(c=l,l=null),(0,a.getOptionValue)(r.sum,o)&&(p[o]=p[o]||0,p[o]+=l||0);const f=e[s],g=n.$c&&n.$c[s]===this.stripValue?l:f;if(null===l&&r.hideNoData||!1===n.showInTooltip)continue;const _=null!==(d=n.precision)&&void 0!==d?d:(0,a.getOptionValue)(r.precision,o),v=n.formatter?n.formatter(c,n):m(c,_),y={id:n.id,name:n.name,dataValue:n.$c[s],originalValue:l,value:v,y:g,displayY:f,color:n.color,seriesIdx:i,rowIdx:h.rows.length?h.rows[h.rows.length-1].rowIdx+1:0};n.normalizedData&&(y.transformed=n.normalizedData[s]),n._transformed&&(y.transformed=e[s]),r.omitBy&&r.omitBy(y)||h.rows.push(y)}if((0,a.getOptionValue)(r.highlight,o)&&h.rows.length){const e=(0,a.getOptionValue)(r.tracking,o);let u=0;"area"===e?u=(0,l.findInRange)(h,f,(0,a.getOptionValue)(r.stickToRanges,o)):"sticky"===e?u=(0,l.findSticky)(h,f):"function"===typeof e&&(u=e(h,f,{x:t.posToVal(i,"x"),y:t.posToVal(n,o),idx:s,scale:o,series:this.yagr.series,serieIndicies:c,interpolation:this.interpolation})),null!==u&&(h.rows[u].active=!0)}const _=(0,a.getOptionValue)(r.sort,o);_&&h.rows.sort(_)}));if(!Object.values(g).some((e=>{let{rows:t}=e;return t.length>0}))&&!r.showEmpty)return void this.hide();this.onMouseEnter();const v=this.over.getBoundingClientRect();this.bLeft=v.left,this.bTop=v.top,this.bWidth=v.width;const y={left:i+this.bLeft,top:this.bTop+n-(r.yOffset||0)};this.renderTooltipCloses=()=>{const e={scales:Object.entries(g).map((e=>{let[t,i]=e;return{scale:t,rows:i.rows,sum:p[t]}})),options:r,x:f},t=Object.values(g).some((e=>{let{rows:t}=e;return t.filter((e=>{let{id:t}=e;var i;return null===(i=this.yagr.getSeriesById(t))||void 0===i?void 0:i.show})).length>0}));t||r.showEmpty?(r.virtual||(this.tOverlay.innerHTML=r.render({...e,state:d,yagr:this.yagr,defaultRender:c.render}),this.placement(this.tOverlay,y,"right",{bound:this.bound,xOffset:r.xOffset,yOffset:r.yOffset})),this.emit("render",{...e,anchor:y})):this.hide()},d.pinned||this.renderTooltipCloses()},this.initWithUplot=e=>{this.over=e.root.querySelector(".u-over"),this.over.addEventListener("mousedown",this.onMouseDown),this.over.addEventListener("mousemove",this.onMouseMove),this.over.addEventListener("mouseenter",this.onMouseEnter),this.over.addEventListener("mouseleave",this.onMouseLeave),document.addEventListener("mouseup",this.onMouseUp)},this.setSize=()=>{const e=this.over.getBoundingClientRect();this.bLeft=e.left,this.bTop=e.top},this.dispose=()=>{this.over.removeEventListener("mousedown",this.onMouseDown),this.over.removeEventListener("mousemove",this.onMouseMove),this.over.removeEventListener("mouseenter",this.onMouseEnter),this.over.removeEventListener("mouseleave",this.onMouseLeave),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.checkFocus),document.removeEventListener("mousedown",this.detectClickOutside),this.tOverlay.remove(),this.state.mounted=!1,this.emit("destroy")},this.updateOptions=e=>{Object.assign(this.opts,e),this.tOverlay.className=`yagr-tooltip ${this.opts.className||""}`},this.on=(e,t)=>{this.handlers[e].push(t)},this.off=(e,t)=>{this.handlers[e]=this.handlers[e].filter((e=>e!==t))},this.detectClickOutside=e=>{const t=e.target;if(t instanceof Element){const e=t&&this.tOverlay.contains(t),i=t&&this.over.contains(t);e||i||(this.pin(!1),this.hide())}},this.onMouseDown=e=>{this.state.range=[this.getCursorPosition(),null],this.state.pinned&&(this.pin(!1),this.hide(),this.render({left:e.clientX-this.bLeft,top:e.clientY-this.bTop,idx:this.yagr.uplot.posToIdx(e.clientX-this.bLeft)}),this.skipNextMouseUp=!0)},this.onMouseMove=()=>{var e;(null===(e=this.state.range)||void 0===e?void 0:e.length)&&(this.state.range[1]=this.getCursorPosition())},this.setCursorLeaved=e=>{const t=this.over.getBoundingClientRect(),i=e.clientX,n=this.state.range,s=n[0],o=i-t.left>s.clientX,l=this.yagr.config.timeline;let r;o?(n[1]={clientX:this.bWidth,value:this.yagr.uplot.posToVal(this.bWidth,"x"),idx:l.length-1},r=n[1]):(n[1]=n[0],n[0]={clientX:0,value:this.yagr.uplot.posToVal(0,"x"),idx:0},r=n[0]),this.yagr.uplot.setCursor({left:r.clientX,top:e.clientY-t.top})},this.onMouseUp=e=>{if(null===this.state.range)return;const[t]=this.state.range||[];let i;if(i=e.target===this.over?this.getCursorPosition():this.state.range[1],"none"===this.opts.strategy)return;const n=t&&t.clientX===(null===i||void 0===i?void 0:i.clientX),s=t&&t.clientX!==(null===i||void 0===i?void 0:i.clientX),o=this.opts.strategy;(n&&!this.skipNextMouseUp&&"drag"!==o||s&&("all"===o||"drag"===o))&&(this.pin(!this.state.pinned),this.show(),this.renderTooltipCloses()),this.state.range=null,this.skipNextMouseUp=!1},this.onMouseEnter=()=>{this.show()},this.onMouseLeave=e=>{var t;const i=this.state.pinned;(null===(t=this.state.range)||void 0===t?void 0:t[0])&&this.setCursorLeaved(e),!i&&this.isNotInDrag&&this.hide()},this.defaultTooltipValueFormatter=(e,t)=>{const i=this.yagr.config.processing||{};return"string"===typeof e?i.nullValues&&i.nullValues.hasOwnProperty(e)?i.nullValues[e]:"-":"number"===typeof e?e.toFixed("number"===typeof t?t:"number"===typeof this.opts.precision?this.opts.precision:2):"-"},this.getCursorPosition=()=>{const e=this.yagr.uplot.cursor.left;return void 0===e?null:{clientX:e,value:this.yagr.uplot.posToVal(e,"x"),idx:this.yagr.uplot.posToIdx(e)}},this.yagr=e,this.over=null===(i=null===e||void 0===e?void 0:e.uplot)||void 0===i?void 0:i.over,this.opts={...c,strategy:t.pinable?"pin":c.strategy,tracking:"area"===(null===(n=e.config.chart.series)||void 0===n?void 0:n.type)?"area":"sticky",value:this.defaultTooltipValueFormatter,...t},this.bound=this.opts.boundClassName&&document.querySelector(this.opts.boundClassName)||document.body,this.renderNode=this.opts.renderClassName&&document.querySelector(this.opts.renderClassName)||document.body,this.tOverlay=document.createElement("div"),this.tOverlay.id=`${e.id}_tooltip`,this.tOverlay.className=`yagr-tooltip ${this.opts.className||""}`,this.tOverlay.style.display="none",this.state={mounted:!1,pinned:!1,visible:!1,range:null,focusedSeries:null},this.bLeft=0,this.bTop=0,this.bWidth=0,this.opts.virtual?this.placement=()=>{}:(this.renderNode.appendChild(this.tOverlay),this.state.mounted=!0,this.emit("mount"))}get interpolation(){var e;return null===(e=this.yagr.config.processing)||void 0===e?void 0:e.interpolation}get stripValue(){return this.interpolation?this.interpolation.value:void 0}get isNotInDrag(){var e;return"none"===this.opts.strategy||"pin"===this.opts.strategy||!(null===(e=this.state.range)||void 0===e?void 0:e[1])}}t.default=function(e){const t=new d(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),i=()=>({hooks:{init:e=>{t.initWithUplot(e)},setSize:()=>{t.setSize()},setCursor:e=>{t.render(e.cursor)}}}),n=i();return{state:t.state,pin:t.pin,show:t.show,hide:t.hide,uplot:n,display:t.render,updateOptions:t.updateOptions,on:t.on,off:t.off,tooltip:t,dispose:t.dispose,reInit:function(e){const n=i();t.reset(),e.hooks.init.push(n.hooks.init),e.hooks.setSize.push(n.hooks.setSize),e.hooks.setCursor.push(n.hooks.setCursor)},reset:t.reset}}},78612:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},13135:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.escapeHTML=t.getOptionValue=void 0,t.getOptionValue=function(e,t){return"object"===typeof e?e[t]:e},t.escapeHTML=function(e){const t=document.createElement("span");return t.innerText=e,t.innerHTML}},33481:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6883:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.configureAxes=t.updateAxis=t.getRedrawOptionsForAxesUpdate=t.getTimeFormatter=t.getDefaultNumberFormatter=t.getAxisPositioning=void 0;const r=l(i(95588)),a=o(i(9084)),u=i(36098),c=i(61579),d={right:c.Axis.Side.Right,top:c.Axis.Side.Top,bottom:c.Axis.Side.Bottom,left:c.Axis.Side.Left},h={left:c.Axis.Align.Right,right:c.Axis.Align.Left,top:void 0,bottom:void 0};t.getAxisPositioning=(e,t)=>({side:e?d[e]:c.Axis.Side.Left,align:t||(e?h[e]:void 0)});t.getDefaultNumberFormatter=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i=>{if((0,u.isNil)(i))return t;if(0===i)return"0";const n=Math.abs(i),s="auto"===e?2:e,[o,l]=(0,u.getUnitSuffix)(n),r=i/o;return("auto"===e?String(r).replace(/\.(\d{5,})/,(e=>e.slice(0,6))):(0,u.toFixed)(r,s))+l}};const f=e=>{const i=e.precision,n=(0,t.getDefaultNumberFormatter)("number"===typeof i?i:i||"auto","");return function(e,t){return t.map(n)}},p=r.default.fmtDate("{DD}.{MM}.{YYYY}"),g=r.default.fmtDate("{HH}:{mm}:{ss}"),m=r.default.fmtDate("{mm}:{ss}"),_=r.default.fmtDate("{mm}:{ss}.{fff}"),v=r.default.fmtDate("{YYYY}");function y(e,t){let i=p;const n=Math.ceil(e/t);return n<=a.SECOND?i=_:n<=a.MINUTE?i=m:n<=a.DAY?i=g:n>=a.YEAR&&(i=v),e=>i(new Date(e))}function b(e,i){var n,s;const o=i.utils.theme,l=i.config,r={splits:e.splitsCount?(c=e.splitsCount,(e,t,i,n)=>{if(c<=2)return[i,n];const s=Math.abs(n-i)/(c-1);let o=s;const l=[];for(;i+o<n;)l.push(i+o),o+=s;return[i,...l,n]}):e.splits,show:"undefined"===typeof e.show||e.show,label:e.label||void 0,labelSize:e.labelSize||a.Y_AXIS_LABEL_SIZE,labelFont:e.labelFont||a.AXIS_LABEL_FONT,font:e.font||a.AXIS_VALUES_FONT,stroke:e.stroke||(()=>o.AXIS_STROKE),ticks:e.ticks?{...o.Y_AXIS_TICKS,...e.ticks}:o.Y_AXIS_TICKS,grid:l.grid||e.grid||o.GRID};var c;return e.scale===a.DEFAULT_X_SCALE?Object.assign(r,{getFormatter:y,gap:null!==(n=e.gap)&&void 0!==n?n:a.X_AXIS_TICK_GAP,size:(0,u.asFn)(e.size)||(()=>a.X_AXIS_SIZE),values:e.values||(0,t.getTimeFormatter)(l),ticks:e.ticks?{...o.X_AXIS_TICKS,...e.ticks}:o.X_AXIS_TICKS,scale:a.DEFAULT_X_SCALE,space:e.space||(()=>a.X_AXIS_SPACE),incrs:e.incrs||(()=>a.X_AXIS_INCRS.map((e=>e*(l.chart.timeMultiplier||a.TIME_MULTIPLIER)))),side:2,stroke:e.stroke||(()=>o.AXIS_STROKE)}):(Object.assign(r,{gap:null!==(s=e.gap)&&void 0!==s?s:a.Y_AXIS_TICK_GAP,size:(0,u.asFn)(e.size)||a.Y_AXIS_SIZE,values:e.values||f(e),scale:e.scale||a.DEFAULT_Y_SCALE,getFormatter:()=>(0,t.getDefaultNumberFormatter)("number"===typeof e.precision?e.precision:e.precision||"auto",""),...(0,t.getAxisPositioning)(e.side||"left",e.align)}),e.space&&(r.space=e.space),r)}function w(e){let t,i;return[e=e.replace(/(\d+)px/,((e,n)=>(0,u.px)(t=Math.round((i=Number(n))*window.devicePixelRatio)))),t,i]}t.getTimeFormatter=e=>{const t=e.chart.timeMultiplier||a.TIME_MULTIPLIER;return(e,i)=>{const n=y((i[i.length-1]-i[0])/t,i.length);return i.map((e=>n(e/t)))}},t.getRedrawOptionsForAxesUpdate=function(e){const t=[!1,!0];return Object.values(e).forEach((e=>{["align","side","size","label","labelFont","labelGap","labelSize"].some((t=>void 0!==e[t]))&&(t[1]=!0)})),t},t.updateAxis=function(e,t,i){var n,s,o;const l=b({...i,font:t.font},e);l.ticks={...t.ticks,...l.ticks},l.grid={...t.grid,...l.grid},l.border={...t.border,...l.border},l.splits=l.splits||t.splits,i.font&&i.font!==(null===(n=t.font)||void 0===n?void 0:n[0])&&(l.font=w(i.font)),i.labelFont&&i.labelFont!==(null===(s=t.labelFont)||void 0===s?void 0:s[0])&&(l.labelFont=w(i.labelFont)),Object.assign(t,l),null===(o=e.plugins.plotLines)||void 0===o||o.update(i.plotLines,i.scale)},t.configureAxes=function(e,t){const i=[];Object.entries(t.axes).forEach((t=>{let[n,s]=t;i.push(b({...s,scale:n},e))}));const n=a.DEFAULT_X_SCALE,s=a.DEFAULT_Y_SCALE;return t.axes[n]||i.push(b({scale:n},e)),i.find((e=>{let{scale:t}=e;return t!==n}))||i.push(b({scale:s},e)),i}},77423:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getPaddingByAxes=void 0;const l=o(i(9084));t.getPaddingByAxes=function(e){let t=!1,i=!1;return e.axes?e.axes.forEach((e=>{e.scale!==l.DEFAULT_X_SCALE&&(void 0!==e.side&&3!==e.side||(t=!0),1===e.side&&(i=!0))})):t=!0,t&&!i?l.PADDING_LEFT:i&&!t?l.PADDING_RIGHT:l.PADDING_BOTH}},50934:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSerieFocusColors=t.getFocusedColor=void 0;const i=[0,0,0,.6];class n{static parseRgba(e){const t=e.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*(\d+\.?\d*)?\s*\)/);return t?[t[1],t[2],t[3],t[4]||1].map(Number):null}parse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"000";const t=e.startsWith("var(--");let i,n=e,s=!0;const o=this.context,l=o.style.color;return t||e.startsWith("--")?(s=!1,i=t?e.slice(4,-1):e):e.startsWith("#")||e.startsWith("rgb")||(o.style.color=e,i="color",s=!1),n=s?n:getComputedStyle(o).getPropertyValue(i),o.style.color=l,n}setContext(e){this.context=e}rgba(e){return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}toRgba(e,t){return n.parseRgba(this.parse(e))||t}shade(e,t){let[i,n,s,o]=e;const l=t<0,r=l?0:255*t,a=l?1+t:1-t;return"rgba("+Math.round(i*a+r)+","+Math.round(n*a+r)+","+Math.round(s*a+r)+","+o+")"}}t.default=n;t.getFocusedColor=(e,t)=>{const s=e.utils.theme.SHIFT,o=e.uplot.series[t],l=n.parseRgba(o.color)||i;return e.utils.colors.shade(l,s)};t.getSerieFocusColors=(e,t)=>(i,n)=>{const s=i.series[n];return!1===s._focus?s.getFocusedColor(e,n):s[t]}},36098:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inBetween=t.isNil=t.asPlain=t.asFn=t.deepIsEqual=t.get=t.html=t.px=t.debounce=t.exec=t.preprocess=t.genId=t.findDataIdx=t.toFixed=t.getUnitSuffix=t.findSticky=t.getSumByIdx=t.findInRange=void 0;t.findInRange=function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=t>=0;let s=-1/0,o=null,l=1/0,r=null;const a=[];let u=null;for(let c=e.rows.length-1;c>=0;c--){const i=e.rows[c],{displayY:d,rowIdx:h}=i;let f;null!==d&&(d>s&&(s=d,o=i.rowIdx),d<l&&(l=d,r=i.rowIdx)),f=null===d||(n?d<0:d>=0)?null:n?t>d?null:d-t:t<d?null:Math.abs(d-t);const p=null===u?1/0:a[u],g=null===f?p:Math.min(p,f);(null!==f&&p===f||g!==p)&&(u=h)}return null===u&&i?t>=s?o:t<=l?r:null:u};t.getSumByIdx=(e,t,i)=>{let n=0,s=0;for(;s<e.length;){const o=e[e.length-s-1],l=o.$c;if(s+=1,o.scale!==i||!1===o.show)continue;const r=l[t];n+="number"===typeof r?r:0}return n};t.findSticky=(e,t)=>{let i,n,s=0;for(;!n&&s<e.rows.length;){const o=e.rows[s].displayY;null!==o&&(i=s,n=Math.abs(o-(t||0))),s+=1}if(!n||void 0===i)return null;for(s=i+1;s<e.rows.length;s++){const o=e.rows[s].displayY;if(null===o)continue;const l=Math.abs(o-t);n>l&&(n=l,i=s)}return i};t.getUnitSuffix=e=>e>=1e18?[1e18,"E"]:e>=1e15?[1e15,"P"]:e>=1e12?[1e12,"T"]:e>=1e9?[1e9,"G"]:e>=1e6?[1e6,"M"]:e>=1e3?[1e3,"K"]:[1,""],t.toFixed=function(e,t){if(0===t)return parseInt(e);if(Number.isInteger(e))return e+"."+"0".repeat(t);const[i,n]=e.toString().split(".");return n.length>=t?`${i}.${n.slice(0,t)}`:`${i}.${n}${"0".repeat(t-n.length)}`},t.findDataIdx=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"closest",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;var o;let l=i,r=i;const a=null!==(o=t.snapToValues)&&void 0!==o?o:n;if(!1===a)return i;if("left"===a||"closest"===a)for(let u=i-1;u>=0;u--)if(e[u]!==s){l=u;break}if("right"===a||"closest"===a)for(let u=i+1;u<e.length;u++)if(e[u]!==s){r=u;break}return"left"===a?l:"right"===a?r:r-i>i-l?l:r};const i=function(e,t,i,n,s,o,l){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"linear",a=null;const u=e[o];switch(r){case"linear":if(null===t||null===i)return null;a=t+(u-n)*(i-t)/(s-n),(isNaN(a)||Math.abs(a)===1/0)&&(a=null);break;case"previous":a=t;break;case"next":a=i;break;case"left":a=l[l.length-1]===e.length-1||null===i?null:t;break;case"right":a=0===l[0]?null:i;break;case"closest":a=Math.abs(n-e[o])<Math.abs(s-e[o])?t:i;break;default:a=r}return a};t.genId=()=>Math.random().toString(36).substr(2,9).replace(/^\d+/,"");t.preprocess=(e,t,n)=>{const s=[],o=n.nullValues||{},l=n.interpolation;for(let r=0;r<e.length;r++){const n=e[r],a=[];let u,c,d=[],h=null,f=null;for(let e=0;e<n.length;e++){let s=n[e];if(l&&s===l.value)d.push(e);else{if(o[s]&&(s=null),d.length){f=s,c=t[e];for(const e of d)a[e]=i(t,h,f,u||t[0],c||t[t.length-1],e,d,l&&l.type);d=[]}h=s,u=t[e],a.push(s)}}if(f=null,d.length)for(const e of d)a.push(i(t,h,f,u||t[0],c||t[t.length-1],e,d,l&&l.type));s.push(a)}return s};t.exec=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return"function"===typeof e?e(...i):e},t.debounce=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>e(...s)),i)}};t.px=e=>e+"px";function n(e){return null===e||void 0===e}t.html=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const n=document.createElement(e);return Object.keys(t).forEach((e=>{const i=t[e];n.setAttribute(e,"object"===typeof i?Object.entries(i).map((e=>{let[t,i]=e;return`${t}:${i}`})).join(";"):i)})),i&&("string"===typeof i?n.innerHTML=i:n.appendChild(i)),n},t.get=function(e,t){return t.split(".").reduce(((e,t)=>{var i,n;return null!==(n=null===(i=Object.getOwnPropertyDescriptor(e,t))||void 0===i?void 0:i.value)&&void 0!==n?n:{}}),e)},t.deepIsEqual=function e(t,i){if(typeof t!==typeof i)return!1;if("function"!==typeof t&&"function"!==typeof i||(t=t.toString(),i=i.toString()),"object"!==typeof t||n(t)||n(i))return t===i;const s=t,o=i,l=Object.keys(s),r=Object.keys(o);if(l.length!==r.length)return!1;for(const n of l){if(!o.hasOwnProperty(n))return!1;if(!e(s[n],o[n]))return!1}return!0},t.asFn=function(e){return"function"===typeof e||"undefined"===typeof e?e:()=>e},t.asPlain=function(e){return"function"===typeof e?e():e},t.isNil=n,t.inBetween=function(e,t,i){return e>=t&&e<=i?e:e<t?t:i}},540:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.preventMouseEvents=void 0;t.preventMouseEvents=e=>e.preventDefault()},28797:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=void 0,t.applyMixins=function(e,t){const i=[];t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((i=>{Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i)||Object.create(null))})),t.prototype.initMixin&&i.push(t.prototype.initMixin)})),e.prototype.initMixins=function(){i.forEach((e=>e.call(this)))}}},67807:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pathsRenderer=void 0;const r=l(i(95588)),a=o(i(9084));t.pathsRenderer=function(e,t,i,n){const s=e.series[t],{type:o,interpolation:l}=s;let u;switch(o){case"column":u=r.default.paths.bars&&r.default.paths.bars({size:[a.BARS_DRAW_FACTOR,a.BARS_DRAW_MAX],...e.series[t].renderOptions||{}});break;case"dots":u=()=>null;break;default:switch(l){case"smooth":u=r.default.paths.spline&&r.default.paths.spline();break;case"left":u=r.default.paths.stepped&&r.default.paths.stepped({align:1});break;case"right":u=r.default.paths.stepped&&r.default.paths.stepped({align:-1});break;default:u=r.default.paths.linear&&r.default.paths.linear()}}return u?u(e,t,i,n):null}},25009:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.configureScales=t.niceScale=t.offsetScale=t.getScaleRange=void 0;const n=i(9084),s=i(61579);function o(e,t,i){const s=e>=0&&i.stacking,o=t<=0&&i.stacking;return{min:s?0:Math.round(e-Math.abs(e)*(i.offset||n.DEFAULT_Y_AXIS_OFFSET)),max:o?0:Math.round(t+Math.abs(t)*(i.offset||n.DEFAULT_Y_AXIS_OFFSET))}}function l(e,t,i){const s=e>=0&&i.stacking,o=t<=0&&i.stacking?0:"number"===typeof i.max?i.max:t,l=s?0:"number"===typeof i.min?i.min:e;if(l===o)return l>=0?{min:l,max:l+2}:{min:l-1,max:l+1};const a=r(o-l,!1),u=r(a/(n.DEFAULT_MAX_TICKS-1),!0);let c=Math.ceil(o/u)*u;c=isNaN(c)?100:c;let d=(s?Math.min(0,l):Math.floor(l/u)*u)||0;return d===c&&(d-=1,c+=1),{min:d,max:c}}function r(e,t){const i=Math.floor(Math.log10(e)),n=e/10**i;return(t?n<1.5?1:n<3?2:n<7?5:10:n<=1?1:n<=2?2:n<=5?5:10)*10**i}t.getScaleRange=(e,t)=>{const i=e.range;if("function"===typeof i)return(e,n,s)=>i(e,n,s,t);if(e.normalize)return[0,e.normalizeBase||100];if("auto"===e.range)return;let s;switch(e.range){case void 0:case"nice":s=l;break;case"offset":s=o;break;default:throw new Error(`Unknown scale range type ${e.range}`)}return(i,o,l)=>{let{min:a,max:u}=s(o,l,e,t);const c=e.minRange||n.DEFAULT_SCALE_MIN_RANGE;if(Math.abs(u-a)<c&&(a>=0?u+=c:(u+=c/2,a-=c/2)),a="number"===typeof e.min?e.min:a,u="number"===typeof e.max?e.max:u,"logarithmic"===e.type){const t="number"===typeof e.min;a<=0?a=n.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE:t||(a=Math.min(a,n.DEFAULT_LOGARITHMIC_MIN_SCALE_VALUE))}return(a>=u||u<=a)&&("number"===typeof e.max?a=u-(r(u-.1*u,!1)||1):u=a+(r(a+.1*a,!1)||1)),[a,u]}},t.offsetScale=o,t.niceScale=l,t.configureScales=function(e,i,o){const l=o.scales?{...o.scales}:{};return Object.keys(o.scales).length||(l.y={}),Object.entries(l).forEach((l=>{let[r,a]=l;i[r]=i[r]||{};const u=i[r];if(r===n.DEFAULT_X_SCALE)return;const c="number"===typeof a.min?a.min:null,d="number"===typeof a.max?a.max:null;if(null!==d&&null!==c){if(d<=c)throw new Error("Invalid scale config. .max should be > .min");u.range=[c,d]}const h="logarithmic"===a.type;if(h)return u.distr=s.Scale.Distr.Logarithmic,void(u.range=(0,t.getScaleRange)(a,o));e.isEmpty?u.range=[null===c?h?1:0:c,null===d?100:d]:u.range=(0,t.getScaleRange)(a,o)})),i.x||(i.x={time:!0}),i}},36374:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.overrideSeriesInUpdate=t.configureSeries=void 0;const l=o(i(9084)),r=i(36098),a=i(50934),u=i(5613),c=i(67807);function d(e,t,i,n){if(void 0!==e[i])return e[i];const s=t.config.chart.series;return s&&i in s?s[i]:n}t.configureSeries=function(e,t,i){var n,s;const o=d(t,e,"type","line"),h={...t,type:o,show:null===(n=t.show)||void 0===n||n,name:t.name||`${e.utils.i18n("series")} ${i+1}`,color:t.color?e.utils.colors.parse(t.color):e.utils.theme.DEFAULT_LINE_COLOR,id:(void 0===t.id?t.name:String(t.id))||(0,r.genId)(),$c:t.data,scale:t.scale||l.DEFAULT_Y_SCALE,count:0,sum:0,avg:0,getFocusedColor:a.getFocusedColor};h.points=h.points||{};const f=(0,a.getSerieFocusColors)(e,"color");return"area"===h.type&&(h.lineColor=e.utils.colors.parse(d(t,e,"lineColor",l.SERIE_AREA_BORDER_COLOR)),h.lineWidth=d(t,e,"lineWidth",l.SERIE_AREA_BORDER_WIDTH),h.fill=f,h.stroke=(0,a.getSerieFocusColors)(e,"lineColor"),h.width=h.lineWidth,h.points.show=u.drawMarkersIfRequired,h.interpolation=d(t,e,"interpolation","linear"),h.spanGaps=d(t,e,"spanGaps",!1)),"line"===h.type&&(h.width=d(t,e,"width",l.SERIE_LINE_WIDTH),h.width=h.width||l.SERIE_LINE_WIDTH,h.stroke=f,h.points.show=u.drawMarkersIfRequired,h.interpolation=d(t,e,"interpolation","linear"),h.spanGaps=d(t,e,"spanGaps",!1)),"column"===h.type&&(h.stroke=f,h.fill=f,h.points.show=!1,h.width=null!==(s=h.width)&&void 0!==s?s:0,h.renderOptions=d(h,e,"renderOptions")),"dots"===h.type&&(h.stroke=()=>h.color,h.fill=f,h.width=2,h.pointsSize=d(h,e,"pointsSize",l.DEFAULT_POINT_SIZE)),h.paths=c.pathsRenderer,h};t.overrideSeriesInUpdate=(e,t)=>{var i,n,s,o,l,r,a,u,c,d,h,f;e.$c=null!==(i=t.$c)&&void 0!==i?i:e.$c,e.show=null!==(n=t.show)&&void 0!==n?n:e.show,e.data=null!==(s=t.data)&&void 0!==s?s:e.data,e.width=null!==(o=t.width)&&void 0!==o?o:e.width,e.pointsSize=null!==(l=t.pointsSize)&&void 0!==l?l:e.pointsSize,e.color=null!==(r=t.color)&&void 0!==r?r:e.color,e.lineColor=null!==(a=t.lineColor)&&void 0!==a?a:e.lineColor,e.lineWidth=null!==(u=t.lineWidth)&&void 0!==u?u:e.lineWidth,e.stroke=null!==(c=t.stroke)&&void 0!==c?c:e.stroke,e.getFocusedColor=null!==(d=t.getFocusedColor)&&void 0!==d?d:e.getFocusedColor,e.formatter=null!==(h=t.formatter)&&void 0!==h?h:e.formatter,e.paths=null!==(f=t.paths)&&void 0!==f?f:e.paths}},61579:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Axis=t.Scale=t.DrawOrderKey=void 0,t.DrawOrderKey={Series:"series",Axes:"axes"},t.Scale={Distr:{Linear:1,Ordinal:2,Logarithmic:3,ArcSinh:4}},t.Axis={Side:{Top:0,Right:1,Bottom:2,Left:3},Align:{Right:0,Left:1}}},70832:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0,o(i(33481),t),o(i(78612),t);const a=l(i(9084));t.defaults=a;const u=r(i(19993));"undefined"!==typeof window&&Object.assign(window,{Yagr:u.default}),t.default=u.default},38982:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return s(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useTooltipState=void 0;const r=o(i(68963)),a=l(i(19993));t.default=r.forwardRef((function(e,t){let{id:i,config:n,className:s="",debug:o,onChartLoad:l,onSelect:u,update:c="dynamic"}=e;const d=r.useRef(null),h=r.useRef();r.useImperativeHandle(t,(()=>({yagr:()=>h.current,domElement:()=>d.current})));const f=r.useCallback((()=>{if(d.current){n.hooks=n.hooks||{};const e=n.hooks;if(l){const t=e.load||[];t.push((e=>{let{chart:t,meta:i}=e;l(t,i)})),e.load=t}if(u){const t=e.onSelect||[];t.push((e=>{let{from:t,to:i}=e;return u(t,i)})),e.onSelect=t}h.current=new a.default(d.current,n)}}),[]);r.useEffect((()=>{var e;n&&(null===(e=h.current)||void 0===e||e.setConfig(n,"hard"===c))}),[n]),r.useEffect((()=>(f(),()=>{var e;null===(e=h.current)||void 0===e||e.dispose(),h.current=void 0})),[]);const p=r.useCallback((e=>{if(h.current&&(e.ctrlKey||e.metaKey)&&e.shiftKey){const e=h.current.toDataUrl().replace("image/png","image/octet-stream"),t=document.createElement("a");t.href=e,t.download=((null===o||void 0===o?void 0:o.filename)||h.current.id)+".png",t.click()}}),[i,h]);return r.createElement("div",{id:i,onClick:p,className:`yagr ${s}`,ref:d})}));t.useTooltipState=(e,t)=>{r.useEffect((()=>{var i;if(!e.current||!t.current)return;const n=t.current,s=e.current.yagr();s&&(null===(i=null===s||void 0===s?void 0:s.plugins)||void 0===i?void 0:i.tooltip)&&(s.plugins.tooltip.on("render",((e,t)=>{n.onChange(t)})),s.plugins.tooltip.on("show",((e,t)=>{n.onChange(t)})),s.plugins.tooltip.on("show",((e,t)=>{n.onChange(t)})))}),[e.current])}},95588:(e,t,i)=>{i.r(t),i.d(t,{default:()=>An});const n="uplot",s="u-hz",o="u-vt",l="u-title",r="u-wrap",a="u-under",u="u-over",c="u-axis",d="u-off",h="u-select",f="u-cursor-x",p="u-cursor-y",g="u-cursor-pt",m="u-legend",_="u-live",v="u-inline",y="u-series",b="u-marker",w="u-label",E="u-value",S="width",x="height",A="top",T="bottom",O="left",L="right",I="#000",D=I+"0",M="mousemove",k="mousedown",C="mouseup",R="mouseenter",F="mouseleave",P="dblclick",U="change",N="dppxchange",$="--",j="undefined"!=typeof window,X=j?document:null,z=j?window:null,H=j?navigator:null;let Y,B;function V(e,t){if(null!=t){let i=e.classList;!i.contains(t)&&i.add(t)}}function W(e,t){let i=e.classList;i.contains(t)&&i.remove(t)}function G(e,t,i){e.style[t]=i+"px"}function q(e,t,i,n){let s=X.createElement(e);return null!=t&&V(s,t),null!=i&&i.insertBefore(s,n),s}function K(e,t){return q("div",e,t)}const Z=new WeakMap;function J(e,t,i,n,s){let o="translate("+t+"px,"+i+"px)";o!=Z.get(e)&&(e.style.transform=o,Z.set(e,o),t<0||i<0||t>n||i>s?V(e,d):W(e,d))}const Q=new WeakMap;function ee(e,t,i){let n=t+i;n!=Q.get(e)&&(Q.set(e,n),e.style.background=t,e.style.borderColor=i)}const te=new WeakMap;function ie(e,t,i,n){let s=t+""+i;s!=te.get(e)&&(te.set(e,s),e.style.height=i+"px",e.style.width=t+"px",e.style.marginLeft=n?-t/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const ne={passive:!0},se={...ne,capture:!0};function oe(e,t,i,n){t.addEventListener(e,i,n?se:ne)}function le(e,t,i,n){t.removeEventListener(e,i,n?se:ne)}function re(e,t,i,n){let s;i=i||0;let o=(n=n||t.length-1)<=2147483647;for(;n-i>1;)s=o?i+n>>1:Se((i+n)/2),t[s]<e?i=s:n=s;return e-t[i]<=t[n]-e?i:n}function ae(e,t,i,n){for(let s=1==n?t:i;s>=t&&s<=i;s+=n)if(null!=e[s])return s;return-1}function ue(e,t,i,n){let s=Ie(e),o=Ie(t),l=10==i?De:Me;e==t&&(-1==s?(e*=i,t/=i):(e/=i,t*=i));let r=1==o?Ae:Se,a=(1==s?Se:Ae)(l(Ee(e))),u=r(l(Ee(t))),c=Le(i,a),d=Le(i,u);return 10==i&&(a<0&&(c=We(c,-a)),u<0&&(d=We(d,-u))),n||2==i?(e=c*s,t=d*o):(e=Ve(e,c),t=Be(t,d)),[e,t]}function ce(e,t,i,n){let s=ue(e,t,i,n);return 0==e&&(s[0]=0),0==t&&(s[1]=0),s}j&&function e(){let t=devicePixelRatio;Y!=t&&(Y=t,B&&le(U,B,e),B=matchMedia(`(min-resolution: ${Y-.001}dppx) and (max-resolution: ${Y+.001}dppx)`),oe(U,B,e),z.dispatchEvent(new CustomEvent(N)))}();const de=.1,he={mode:3,pad:de},fe={pad:0,soft:null,mode:0},pe={min:fe,max:fe};function ge(e,t,i,n){return st(i)?_e(e,t,i):(fe.pad=i,fe.soft=n?0:null,fe.mode=n?3:0,_e(e,t,pe))}function me(e,t){return null==e?t:e}function _e(e,t,i){let n=i.min,s=i.max,o=me(n.pad,0),l=me(s.pad,0),r=me(n.hard,-Re),a=me(s.hard,Re),u=me(n.soft,Re),c=me(s.soft,-Re),d=me(n.mode,0),h=me(s.mode,0),f=t-e,p=De(f),g=Oe(Ee(e),Ee(t)),m=De(g),_=Ee(m-p);(f<1e-9||_>10)&&(f=0,0!=e&&0!=t||(f=1e-9,2==d&&u!=Re&&(o=0),2==h&&c!=-Re&&(l=0)));let v=f||g||1e3,y=De(v),b=Le(10,Se(y)),w=We(Ve(e-v*(0==f?0==e?.1:1:o),b/10),9),E=e>=u&&(1==d||3==d&&w<=u||2==d&&w>=u)?u:Re,S=Oe(r,w<E&&e>=E?E:Te(E,w)),x=We(Be(t+v*(0==f?0==t?.1:1:l),b/10),9),A=t<=c&&(1==h||3==h&&x>=c||2==h&&x<=c)?c:-Re,T=Te(a,x>A&&t<=A?A:Oe(A,x));return S==T&&0==S&&(T=100),[S,T]}const ve=new Intl.NumberFormat(j?H.language:"en-US"),ye=e=>ve.format(e),be=Math,we=be.PI,Ee=be.abs,Se=be.floor,xe=be.round,Ae=be.ceil,Te=be.min,Oe=be.max,Le=be.pow,Ie=be.sign,De=be.log10,Me=be.log2,ke=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return be.sinh(e)*t},Ce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return be.asinh(e/t)},Re=1/0;function Fe(e){return 1+(0|De((e^e>>31)-(e>>31)))}function Pe(e,t,i){return Te(Oe(e,t),i)}function Ue(e){return"function"==typeof e?e:()=>e}const Ne=e=>e,$e=(e,t)=>t,je=e=>null,Xe=e=>!0,ze=(e,t)=>e==t,He=e=>We(e,14);function Ye(e,t){return He(We(He(e/t))*t)}function Be(e,t){return He(Ae(He(e/t))*t)}function Ve(e,t){return He(Se(He(e/t))*t)}function We(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(tt(e))return e;let i=10**t,n=e*i*(1+Number.EPSILON);return xe(n)/i}const Ge=new Map;function qe(e){return((""+e).split(".")[1]||"").length}function Ke(e,t,i,n){let s=[],o=n.map(qe);for(let l=t;l<i;l++){let t=Ee(l),i=We(Le(e,l),t);for(let e=0;e<n.length;e++){let r=n[e]*i,a=(r>=0&&l>=0?0:t)+(l>=o[e]?0:o[e]),u=We(r,a);s.push(u),Ge.set(u,a)}}return s}const Ze={},Je=[],Qe=[null,null],et=Array.isArray,tt=Number.isInteger,it=e=>void 0===e;function nt(e){return"string"==typeof e}function st(e){let t=!1;if(null!=e){let i=e.constructor;t=null==i||i==Object}return t}function ot(e){return null!=e&&"object"==typeof e}const lt=Object.getPrototypeOf(Uint8Array);function rt(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st;if(et(e)){let n=e.find((e=>null!=e));if(et(n)||i(n)){t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=rt(e[n],i)}else t=e.slice()}else if(e instanceof lt)t=e.slice();else if(i(e)){t={};for(let n in e)t[n]=rt(e[n],i)}else t=e;return t}function at(e){let t=arguments;for(let i=1;i<t.length;i++){let n=t[i];for(let t in n)st(e[t])?at(e[t],rt(n[t])):e[t]=rt(n[t])}return e}const ut=0,ct=1,dt=2;function ht(e,t,i){for(let n,s=0,o=-1;s<t.length;s++){let l=t[s];if(l>o){for(n=l-1;n>=0&&null==e[n];)e[n--]=null;for(n=l+1;n<i&&null==e[n];)e[o=n++]=null}}}const ft="undefined"==typeof queueMicrotask?e=>Promise.resolve().then(e):queueMicrotask;const pt=["January","February","March","April","May","June","July","August","September","October","November","December"],gt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function mt(e){return e.slice(0,3)}const _t=gt.map(mt),vt=pt.map(mt),yt={MMMM:pt,MMM:vt,WWWW:gt,WWW:_t};function bt(e){return(e<10?"0":"")+e}const wt={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,t)=>t.MMMM[e.getMonth()],MMM:(e,t)=>t.MMM[e.getMonth()],MM:e=>bt(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>bt(e.getDate()),D:e=>e.getDate(),WWWW:(e,t)=>t.WWWW[e.getDay()],WWW:(e,t)=>t.WWW[e.getDay()],HH:e=>bt(e.getHours()),H:e=>e.getHours(),h:e=>{let t=e.getHours();return 0==t?12:t>12?t-12:t},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>bt(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>bt(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>{return((t=e.getMilliseconds())<10?"00":t<100?"0":"")+t;var t}};function Et(e,t){t=t||yt;let i,n=[],s=/\{([a-z]+)\}|[^{]+/gi;for(;i=s.exec(e);)n.push("{"==i[0][0]?wt[i[1]]:i[0]);return e=>{let i="";for(let s=0;s<n.length;s++)i+="string"==typeof n[s]?n[s]:n[s](e,t);return i}}const St=(new Intl.DateTimeFormat).resolvedOptions().timeZone;const xt=e=>e%1==0,At=[1,2,2.5,5],Tt=Ke(10,-16,0,At),Ot=Ke(10,0,16,At),Lt=Ot.filter(xt),It=Tt.concat(Ot),Dt="{YYYY}",Mt="\n"+Dt,kt="{M}/{D}",Ct="\n"+kt,Rt=Ct+"/{YY}",Ft="{aa}",Pt="{h}:{mm}"+Ft,Ut="\n"+Pt,Nt=":{ss}",$t=null;function jt(e){let t=1e3*e,i=60*t,n=60*i,s=24*n,o=30*s,l=365*s;return[(1==e?Ke(10,0,3,At).filter(xt):Ke(10,-3,0,At)).concat([t,5*t,10*t,15*t,30*t,i,5*i,10*i,15*i,30*i,n,2*n,3*n,4*n,6*n,8*n,12*n,s,2*s,3*s,4*s,5*s,6*s,7*s,8*s,9*s,10*s,15*s,o,2*o,3*o,4*o,6*o,l,2*l,5*l,10*l,25*l,50*l,100*l]),[[l,Dt,$t,$t,$t,$t,$t,$t,1],[28*s,"{MMM}",Mt,$t,$t,$t,$t,$t,1],[s,kt,Mt,$t,$t,$t,$t,$t,1],[n,"{h}"+Ft,Rt,$t,Ct,$t,$t,$t,1],[i,Pt,Rt,$t,Ct,$t,$t,$t,1],[t,Nt,Rt+" "+Pt,$t,Ct+" "+Pt,$t,Ut,$t,1],[e,Nt+".{fff}",Rt+" "+Pt,$t,Ct+" "+Pt,$t,Ut,$t,1]],function(t){return(r,a,u,c,d,h)=>{let f=[],p=d>=l,g=d>=o&&d<l,m=t(u),_=We(m*e,3),v=qt(m.getFullYear(),p?0:m.getMonth(),g||p?1:m.getDate()),y=We(v*e,3);if(g||p){let i=g?d/o:0,n=p?d/l:0,s=_==y?_:We(qt(v.getFullYear()+n,v.getMonth()+i,1)*e,3),r=new Date(xe(s/e)),a=r.getFullYear(),u=r.getMonth();for(let o=0;s<=c;o++){let l=qt(a+n*o,u+i*o,1),r=l-t(We(l*e,3));s=We((+l+r)*e,3),s<=c&&f.push(s)}}else{let o=d>=s?s:d,l=y+(Se(u)-Se(_))+Be(_-y,o);f.push(l);let p=t(l),g=p.getHours()+p.getMinutes()/i+p.getSeconds()/n,m=d/n,v=h/r.axes[a]._space;for(;l=We(l+d,1==e?0:3),!(l>c);)if(m>1){let e=Se(We(g+m,6))%24,i=t(l).getHours()-e;i>1&&(i=-1),l-=i*n,g=(g+m)%24,We((l-f[f.length-1])/d,3)*v>=.7&&f.push(l)}else f.push(l)}return f}}]}const[Xt,zt,Ht]=jt(1),[Yt,Bt,Vt]=jt(.001);function Wt(e,t){return e.map((e=>e.map(((i,n)=>0==n||8==n||null==i?i:t(1==n||0==e[8]?i:e[1]+i)))))}function Gt(e,t){return(i,n,s,o,l)=>{let r,a,u,c,d,h,f=t.find((e=>l>=e[0]))||t[t.length-1];return n.map((t=>{let i=e(t),n=i.getFullYear(),s=i.getMonth(),o=i.getDate(),l=i.getHours(),p=i.getMinutes(),g=i.getSeconds(),m=n!=r&&f[2]||s!=a&&f[3]||o!=u&&f[4]||l!=c&&f[5]||p!=d&&f[6]||g!=h&&f[7]||f[1];return r=n,a=s,u=o,c=l,d=p,h=g,m(i)}))}}function qt(e,t,i){return new Date(e,t,i)}function Kt(e,t){return t(e)}Ke(2,-53,53,[1]);const Zt="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Jt(e,t){return(i,n,s,o)=>null==o?$:t(e(n))}const Qt={show:!0,live:!0,isolate:!1,mount:()=>{},markers:{show:!0,width:2,stroke:function(e,t){let i=e.series[t];return i.width?i.stroke(e,t):i.points.width?i.points.stroke(e,t):null},fill:function(e,t){return e.series[t].fill(e,t)},dash:"solid"},idx:null,idxs:null,values:[]};const ei=[0,0];function ti(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e=>{0==e.button&&(!n||e.target==t)&&i(e)}}function ii(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e=>{(!n||e.target==t)&&i(e)}}const ni={show:!0,x:!0,y:!0,lock:!1,move:function(e,t,i){return ei[0]=t,ei[1]=i,ei},points:{show:function(e,t){let i=e.cursor.points,n=K(),s=i.size(e,t);G(n,S,s),G(n,x,s);let o=s/-2;G(n,"marginLeft",o),G(n,"marginTop",o);let l=i.width(e,t,s);return l&&G(n,"borderWidth",l),n},size:function(e,t){return e.series[t].points.size},width:0,stroke:function(e,t){let i=e.series[t].points;return i._stroke||i._fill},fill:function(e,t){let i=e.series[t].points;return i._fill||i._stroke}},bind:{mousedown:ti,mouseup:ti,click:ti,dblclick:ti,mousemove:ii,mouseleave:ii,mouseenter:ii},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,t)=>{t.stopPropagation(),t.stopImmediatePropagation()},_x:!1,_y:!1},focus:{prox:-1,bias:0},left:-10,top:-10,idx:null,dataIdx:function(e,t,i){return i},idxs:null,event:null},si={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},oi=at({},si,{filter:$e}),li=at({},oi,{size:10}),ri=at({},si,{show:!1}),ai='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',ui="bold "+ai,ci={show:!0,scale:"x",stroke:I,space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:ui,side:2,grid:oi,ticks:li,border:ri,font:ai,lineGap:1.5,rotate:0},di="Value",hi="Time",fi={show:!0,scale:"x",auto:!1,sorted:1,min:Re,max:-Re,idxs:[]};function pi(e,t,i,n,s){return t.map((e=>null==e?"":ye(e)))}function gi(e,t,i,n,s,o,l){let r=[],a=Ge.get(s)||0;for(let u=i=l?i:We(Be(i,s),a);u<=n;u=We(u+s,a))r.push(Object.is(u,-0)?0:u);return r}function mi(e,t,i,n,s,o,l){const r=[],a=e.scales[e.axes[t].scale].log,u=Se((10==a?De:Me)(i));s=Le(a,u),10==a&&u<0&&(s=We(s,-u));let c=i;do{r.push(c),c+=s,10==a&&(c=We(c,Ge.get(s))),c>=s*a&&(s=c)}while(c<=n);return r}function _i(e,t,i,n,s,o,l){let r=e.scales[e.axes[t].scale].asinh,a=n>r?mi(e,t,Oe(r,i),n,s):[r],u=n>=0&&i<=0?[0]:[];return(i<-r?mi(e,t,Oe(r,-n),-i,s):[r]).reverse().map((e=>-e)).concat(u,a)}const vi=/./,yi=/[12357]/,bi=/[125]/,wi=/1/,Ei=(e,t,i,n)=>e.map(((e,s)=>4==t&&0==e||s%n==0&&i.test(e.toExponential()[e<0?1:0])?e:null));function Si(e,t,i,n,s){let o=e.axes[i],l=o.scale,r=e.scales[l],a=e.valToPos,u=o._space,c=a(10,l),d=a(9,l)-c>=u?vi:a(7,l)-c>=u?yi:a(5,l)-c>=u?bi:wi;if(d==wi){let e=Ee(a(1,l)-c);if(e<u)return Ei(t.slice().reverse(),r.distr,d,Ae(u/e)).reverse()}return Ei(t,r.distr,d,1)}function xi(e,t,i,n,s){let o=e.axes[i],l=o.scale,r=o._space,a=e.valToPos,u=Ee(a(1,l)-a(2,l));return u<r?Ei(t.slice().reverse(),3,vi,Ae(r/u)).reverse():t}function Ai(e,t,i,n){return null==n?$:null==t?"":ye(t)}const Ti={show:!0,scale:"y",stroke:I,space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:ui,side:3,grid:oi,ticks:li,border:ri,font:ai,lineGap:1.5,rotate:0};const Oi={scale:null,auto:!0,sorted:0,min:Re,max:-Re},Li=(e,t,i,n,s)=>s,Ii={show:!0,auto:!0,sorted:0,gaps:Li,alpha:1,facets:[at({},Oi,{scale:"x"}),at({},Oi,{scale:"y"})]},Di={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Li,alpha:1,points:{show:function(e,t){let{scale:i,idxs:n}=e.series[0],s=e._data[0],o=e.valToPos(s[n[0]],i,!0),l=e.valToPos(s[n[1]],i,!0),r=Ee(l-o)/(e.series[t].points.space*Y);return n[1]-n[0]<=r},filter:null},values:null,min:Re,max:-Re,idxs:[],path:null,clip:null};function Mi(e,t,i,n,s){return i/10}const ki={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Ci=at({},ki,{time:!1,ori:1}),Ri={};function Fi(e,t){let i=Ri[e];return i||(i={key:e,plots:[],sub(e){i.plots.push(e)},unsub(e){i.plots=i.plots.filter((t=>t!=e))},pub(e,t,n,s,o,l,r){for(let a=0;a<i.plots.length;a++)i.plots[a]!=t&&i.plots[a].pub(e,t,n,s,o,l,r)}},null!=e&&(Ri[e]=i)),i}const Pi=1,Ui=2;function Ni(e,t,i){const n=e.mode,s=e.series[t],o=2==n?e._data[t]:e._data,l=e.scales,r=e.bbox;let a=o[0],u=2==n?o[1]:o[t],c=2==n?l[s.facets[0].scale]:l[e.series[0].scale],d=2==n?l[s.facets[1].scale]:l[s.scale],h=r.left,f=r.top,p=r.width,g=r.height,m=e.valToPosH,_=e.valToPosV;return 0==c.ori?i(s,a,u,c,d,m,_,h,f,p,g,Vi,Gi,Ki,Ji,en):i(s,a,u,c,d,_,m,f,h,g,p,Wi,qi,Zi,Qi,tn)}function $i(e,t){let i=0,n=0,s=me(e.bands,Je);for(let o=0;o<s.length;o++){let e=s[o];e.series[0]==t?i=e.dir:e.series[1]==t&&(1==e.dir?n|=1:n|=2)}return[i,1==n?-1:2==n?1:3==n?2:0]}function ji(e,t,i,n,s){let o=e.mode,l=e.series[t],r=2==o?l.facets[1].scale:l.scale,a=e.scales[r];return-1==s?a.min:1==s?a.max:3==a.distr?1==a.dir?a.min:a.max:0}function Xi(e,t,i,n,s,o){return Ni(e,t,((e,t,l,r,a,u,c,d,h,f,p)=>{let g=e.pxRound;const m=r.dir*(0==r.ori?1:-1),_=0==r.ori?Gi:qi;let v,y;1==m?(v=i,y=n):(v=n,y=i);let b=g(u(t[v],r,f,d)),w=g(c(l[v],a,p,h)),E=g(u(t[y],r,f,d)),S=g(c(1==o?a.max:a.min,a,p,h)),x=new Path2D(s);return _(x,E,S),_(x,b,S),_(x,b,w),x}))}function zi(e,t,i,n,s,o){let l=null;if(e.length>0){l=new Path2D;const r=0==t?Ki:Zi;let a=i;for(let t=0;t<e.length;t++){let i=e[t];if(i[1]>i[0]){let e=i[0]-a;e>0&&r(l,a,n,e,n+o),a=i[1]}}let u=i+s-a,c=10;u>0&&r(l,a,n-c/2,u,n+o+c)}return l}function Hi(e,t,i,n,s,o,l){let r=[],a=e.length;for(let u=1==s?i:n;u>=i&&u<=n;u+=s){if(null===t[u]){let c=u,d=u;if(1==s)for(;++u<=n&&null===t[u];)d=u;else for(;--u>=i&&null===t[u];)d=u;let h=o(e[c]),f=d==c?h:o(e[d]),p=c-s;h=l<=0&&p>=0&&p<a?o(e[p]):h;let g=d+s;f=l>=0&&g>=0&&g<a?o(e[g]):f,f>=h&&r.push([h,f])}}return r}function Yi(e){return 0==e?Ne:1==e?xe:t=>Ye(t,e)}function Bi(e){let t=0==e?Vi:Wi,i=0==e?(e,t,i,n,s,o)=>{e.arcTo(t,i,n,s,o)}:(e,t,i,n,s,o)=>{e.arcTo(i,t,s,n,o)},n=0==e?(e,t,i,n,s)=>{e.rect(t,i,n,s)}:(e,t,i,n,s)=>{e.rect(i,t,s,n)};return function(e,s,o,l,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;0==a&&0==u?n(e,s,o,l,r):(a=Te(a,l/2,r/2),u=Te(u,l/2,r/2),t(e,s+a,o),i(e,s+l,o,s+l,o+r,a),i(e,s+l,o+r,s,o+r,u),i(e,s,o+r,s,o,u),i(e,s,o,s+l,o,a),e.closePath())}}const Vi=(e,t,i)=>{e.moveTo(t,i)},Wi=(e,t,i)=>{e.moveTo(i,t)},Gi=(e,t,i)=>{e.lineTo(t,i)},qi=(e,t,i)=>{e.lineTo(i,t)},Ki=Bi(0),Zi=Bi(1),Ji=(e,t,i,n,s,o)=>{e.arc(t,i,n,s,o)},Qi=(e,t,i,n,s,o)=>{e.arc(i,t,n,s,o)},en=(e,t,i,n,s,o,l)=>{e.bezierCurveTo(t,i,n,s,o,l)},tn=(e,t,i,n,s,o,l)=>{e.bezierCurveTo(i,t,s,n,l,o)};function nn(e){return(e,t,i,n,s)=>Ni(e,t,((t,o,l,r,a,u,c,d,h,f,p)=>{let g,m,{pxRound:_,points:v}=t;0==r.ori?(g=Vi,m=Ji):(g=Wi,m=Qi);const y=We(v.width*Y,3);let b=(v.size-v.width)/2*Y,w=We(2*b,3),E=new Path2D,S=new Path2D,{left:x,top:A,width:T,height:O}=e.bbox;Ki(S,x-w,A-w,T+2*w,O+2*w);const L=e=>{if(null!=l[e]){let t=_(u(o[e],r,f,d)),i=_(c(l[e],a,p,h));g(E,t+b,i),m(E,t,i,b,0,2*we)}};if(s)s.forEach(L);else for(let e=i;e<=n;e++)L(e);return{stroke:y>0?E:null,fill:E,clip:S,flags:Pi|Ui}}))}function sn(e){return(t,i,n,s,o,l)=>{n!=s&&(o!=n&&l!=n&&e(t,i,n),o!=s&&l!=s&&e(t,i,s),e(t,i,l))}}const on=sn(Gi),ln=sn(qi);function rn(e){const t=me(e?.alignGaps,0);return(e,i,n,s)=>Ni(e,i,((o,l,r,a,u,c,d,h,f,p,g)=>{let m,_,v=o.pxRound,y=e=>v(c(e,a,p,h)),b=e=>v(d(e,u,g,f));0==a.ori?(m=Gi,_=on):(m=qi,_=ln);const w=a.dir*(0==a.ori?1:-1),E={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Pi},S=E.stroke;let x,A,T,O=Re,L=-Re,I=y(l[1==w?n:s]),D=ae(r,n,s,1*w),M=ae(r,n,s,-1*w),k=y(l[D]),C=y(l[M]),R=!1;for(let e=1==w?n:s;e>=n&&e<=s;e+=w){let t=y(l[e]),i=r[e];t==I?null!=i?(A=b(i),O==Re&&(m(S,t,A),x=A),O=Te(A,O),L=Oe(A,L)):null===i&&(R=!0):(O!=Re&&(_(S,I,O,L,x,A),T=I),null!=i?(A=b(i),m(S,t,A),O=L=x=A):(O=Re,L=-Re,null===i&&(R=!0)),I=t)}O!=Re&&O!=L&&T!=I&&_(S,I,O,L,x,A);let[F,P]=$i(e,i);if(null!=o.fill||0!=F){let t=E.fill=new Path2D(S),n=b(o.fillTo(e,i,o.min,o.max,F));m(t,C,n),m(t,k,n)}if(!o.spanGaps){let u=[];R&&u.push(...Hi(l,r,n,s,w,y,t)),E.gaps=u=o.gaps(e,i,n,s,u),E.clip=zi(u,a.ori,h,f,p,g)}return 0!=P&&(E.band=2==P?[Xi(e,i,n,s,S,-1),Xi(e,i,n,s,S,1)]:Xi(e,i,n,s,S,P)),E}))}function an(e,t,i,n,s,o){const l=e.length;if(l<2)return null;const r=new Path2D;if(i(r,e[0],t[0]),2==l)n(r,e[1],t[1]);else{let i=Array(l),n=Array(l-1),o=Array(l-1),a=Array(l-1);for(let s=0;s<l-1;s++)o[s]=t[s+1]-t[s],a[s]=e[s+1]-e[s],n[s]=o[s]/a[s];i[0]=n[0];for(let e=1;e<l-1;e++)0===n[e]||0===n[e-1]||n[e-1]>0!==n[e]>0?i[e]=0:(i[e]=3*(a[e-1]+a[e])/((2*a[e]+a[e-1])/n[e-1]+(a[e]+2*a[e-1])/n[e]),isFinite(i[e])||(i[e]=0));i[l-1]=n[l-2];for(let u=0;u<l-1;u++)s(r,e[u]+a[u]/3,t[u]+i[u]*a[u]/3,e[u+1]-a[u]/3,t[u+1]-i[u+1]*a[u]/3,e[u+1],t[u+1])}return r}const un=new Set;function cn(){for(let e of un)e.syncRect(!0)}j&&(oe("resize",z,cn),oe("scroll",z,cn,!0),oe(N,z,(()=>{An.pxRatio=Y})));const dn=rn(),hn=nn();function fn(e,t,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map(((e,n)=>pn(e,n,t,i)))}function pn(e,t,i,n){return at({},0==t?i:n,e)}function gn(e,t,i){return null==t?Qe:[t,i]}const mn=gn;function _n(e,t,i){return null==t?Qe:ge(t,i,de,!0)}function vn(e,t,i,n){return null==t?Qe:ue(t,i,e.scales[n].log,!1)}const yn=vn;function bn(e,t,i,n){return null==t?Qe:ce(t,i,e.scales[n].log,!1)}const wn=bn;function En(e,t,i,n,s){let o=Oe(Fe(e),Fe(t)),l=t-e,r=re(s/n*l,i);do{let e=i[r],t=n*e/l;if(t>=s&&o+(e<5?Ge.get(e):0)<=17)return[e,t]}while(++r<i.length);return[0,0]}function Sn(e){let t,i;return[e=e.replace(/(\d+)px/,((e,n)=>(t=xe((i=+n)*Y))+"px")),t,i]}function xn(e){e.show&&[e.font,e.labelFont].forEach((e=>{let t=We(e[2]*Y,1);e[0]=e[0].replace(/[0-9.]+px/,t+"px"),e[1]=t}))}function An(e,t,i){const I={mode:me(e.mode,1)},U=I.mode;function j(e,t){return((3==t.distr?De(e>0?e:t.clamp(I,e,t.min,t.max,t.key)):4==t.distr?Ce(e,t.asinh):e)-t._min)/(t._max-t._min)}function H(e,t,i,n){let s=j(e,t);return n+i*(-1==t.dir?1-s:s)}function B(e,t,i,n){let s=j(e,t);return n+i*(-1==t.dir?s:1-s)}function Z(e,t,i,n){return 0==t.ori?H(e,t,i,n):B(e,t,i,n)}I.valToPosH=H,I.valToPosV=B;let Q=!1;I.status=0;const te=I.root=K(n);if(null!=e.id&&(te.id=e.id),V(te,e.class),e.title){K(l,te).textContent=e.title}const ne=q("canvas"),se=I.ctx=ne.getContext("2d"),ae=K(r,te);oe("click",ae,(e=>{if(e.target===pe){(es!=Kn||ts!=Zn)&&rs.click(I,e)}}),!0);const fe=I.under=K(a,ae);ae.appendChild(ne);const pe=I.over=K(u,ae),_e=+me((e=rt(e)).pxAlign,1),ve=Yi(_e);(e.plugins||[]).forEach((t=>{t.opts&&(e=t.opts(I,e)||e)}));const ye=e.ms||.001,be=I.series=1==U?fn(e.series||[],fi,Di,!1):(Se=e.series||[null],Ie=Ii,Se.map(((e,t)=>0==t?null:at({},Ie,e))));var Se,Ie;const Me=I.axes=fn(e.axes||[],ci,Ti,!0),Fe=I.scales={},Ne=I.bands=e.bands||[];Ne.forEach((e=>{e.fill=Ue(e.fill||null),e.dir=me(e.dir,-1)}));const He=2==U?be[1].facets[0].scale:be[0].scale,Ve={axes:function(){for(let e=0;e<Me.length;e++){let t=Me[e];if(!t.show||!t._show)continue;let i,n,s=t.side,o=s%2,l=t.stroke(I,e),r=0==s||3==s?-1:1;if(t.label){let e=t.labelGap*r,a=xe((t._lpos+e)*Y);kn(t.labelFont[0],l,"center",2==s?A:T),se.save(),1==o?(i=n=0,se.translate(a,xe(li+ai/2)),se.rotate((3==s?-we:we)/2)):(i=xe(oi+ri/2),n=a),se.fillText(t.label,i,n),se.restore()}let[a,u]=t._found;if(0==u)continue;let c=Fe[t.scale],d=0==o?ri:ai,h=0==o?oi:li,f=xe(t.gap*Y),p=t._splits,g=2==c.distr?p.map((e=>On[e])):p,m=2==c.distr?On[p[1]]-On[p[0]]:a,_=t.ticks,v=t.border,y=_.show?xe(_.size*Y):0,b=t._rotate*-we/180,w=ve(t._pos*Y),E=w+(y+f)*r;n=0==o?E:0,i=1==o?E:0,kn(t.font[0],l,1==t.align?O:2==t.align?L:b>0?O:b<0?L:0==o?"center":3==s?L:O,b||1==o?"middle":2==s?A:T);let S=t.font[1]*t.lineGap,x=p.map((e=>ve(Z(e,c,d,h)))),D=t._values;for(let e=0;e<D.length;e++){let t=D[e];if(null!=t){0==o?i=x[e]:n=x[e],t=""+t;let s=-1==t.indexOf("\n")?[t]:t.split(/\n/gm);for(let e=0;e<s.length;e++){let t=s[e];b?(se.save(),se.translate(i,n+e*S),se.rotate(b),se.fillText(t,0,0),se.restore()):se.fillText(t,i,n+e*S)}}}_.show&&jn(x,_.filter(I,g,e,u,m),o,s,w,y,We(_.width*Y,3),_.stroke(I,e),_.dash,_.cap);let M=t.grid;M.show&&jn(x,M.filter(I,g,e,u,m),o,0==o?2:1,0==o?li:oi,0==o?ai:ri,We(M.width*Y,3),M.stroke(I,e),M.dash,M.cap),v.show&&jn([w],[1],0==o?1:0,0==o?1:2,1==o?li:oi,1==o?ai:ri,We(v.width*Y,3),v.stroke(I,e),v.dash,v.cap)}Hs("drawAxes")},series:function(){Zi>0&&(be.forEach(((e,i)=>{if(i>0&&e.show&&(Rn(i,!1),Rn(i,!0),null==e._paths)){let n=2==U?[0,t[i][0].length-1]:function(e){let t=Pe(Ji-1,0,Zi-1),i=Pe(Qi+1,0,Zi-1);for(;null==e[t]&&t>0;)t--;for(;null==e[i]&&i<Zi-1;)i++;return[t,i]}(t[i]);e._paths=e.paths(I,i,n[0],n[1])}})),be.forEach(((e,t)=>{if(t>0&&e.show){Tn!=e.alpha&&(se.globalAlpha=Tn=e.alpha),null!=e._paths&&Fn(t,!1);{let i=null!=e._paths?e._paths.gaps:null,n=e.points.show(I,t,Ji,Qi,i),s=e.points.filter(I,t,n,i);(n||s)&&(e.points._paths=e.points.paths(I,t,Ji,Qi,s),Fn(t,!0))}1!=Tn&&(se.globalAlpha=Tn=1),Hs("drawSeries",t)}})))}},Ke=(e.drawOrder||["axes","series"]).map((e=>Ve[e]));function tt(t){let i=Fe[t];if(null==i){let n=(e.scales||Ze)[t]||Ze;if(null!=n.from)tt(n.from),Fe[t]=at({},Fe[n.from],n,{key:t});else{i=Fe[t]=at({},t==He?ki:Ci,n),i.key=t;let e=i.time,s=i.range,o=et(s);if((t!=He||2==U&&!e)&&(!o||null!=s[0]&&null!=s[1]||(s={min:null==s[0]?he:{mode:1,hard:s[0],soft:s[0]},max:null==s[1]?he:{mode:1,hard:s[1],soft:s[1]}},o=!1),!o&&st(s))){let e=s;s=(t,i,n)=>null==i?Qe:ge(i,n,e)}i.range=Ue(s||(e?mn:t==He?3==i.distr?yn:4==i.distr?wn:gn:3==i.distr?vn:4==i.distr?bn:_n)),i.auto=Ue(!o&&i.auto),i.clamp=Ue(i.clamp||Mi),i._min=i._max=null}}}tt("x"),tt("y"),1==U&&be.forEach((e=>{tt(e.scale)})),Me.forEach((e=>{tt(e.scale)}));for(let n in e.scales)tt(n);const lt=Fe[He],ut=lt.distr;let ct,dt;0==lt.ori?(V(te,s),ct=H,dt=B):(V(te,o),ct=B,dt=H);const ht={};for(let n in Fe){let e=Fe[n];null==e.min&&null==e.max||(ht[n]={min:e.min,max:e.max},e.min=e.max=null)}const pt=e.tzDate||(e=>new Date(xe(e/ye))),gt=e.fmtDate||Et,mt=1==ye?Ht(pt):Vt(pt),_t=Gt(pt,Wt(1==ye?zt:Bt,gt)),vt=Jt(pt,Kt(Zt,gt)),yt=[],bt=I.legend=at({},Qt,e.legend),wt=bt.show,St=bt.markers;let xt,At,Tt;bt.idxs=yt,St.width=Ue(St.width),St.dash=Ue(St.dash),St.stroke=Ue(St.stroke),St.fill=Ue(St.fill);let Ot,Dt=[],Mt=[],kt=!1,Ct={};if(bt.live){const e=be[1]?be[1].values:null;kt=null!=e,Ot=kt?e(I,1,0):{_:0};for(let t in Ot)Ct[t]=$}if(wt)if(xt=q("table",m,te),Tt=q("tbody",null,xt),bt.mount(I,xt),kt){At=q("thead",null,xt,Tt);let e=q("tr",null,At);for(var Rt in q("th",null,e),Ot)q("th",w,e).textContent=Rt}else V(xt,v),bt.live&&V(xt,_);const Ft={show:!0},Pt={show:!1};const Ut=new Map;function Nt(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=Ut.get(t)||{},o=Ni.bind[e](I,t,i,n);o&&(oe(e,t,s[e]=o),Ut.set(t,s))}function $t(e,t,i){const n=Ut.get(t)||{};for(let s in n)null!=e&&s!=e||(le(s,t,n[s]),delete n[s]);null==e&&Ut.delete(t)}let jt=0,qt=0,ei=0,ti=0,ii=0,si=0,oi=0,li=0,ri=0,ai=0;I.bbox={};let ui=!1,vi=!1,yi=!1,bi=!1,wi=!1,Ei=!1;function Oi(e,t,i){(i||e!=I.width||t!=I.height)&&Li(e,t),Hn(!1),yi=!0,vi=!0,Ni.left>=0&&(bi=Ei=!0),ns()}function Li(e,t){I.width=jt=ei=e,I.height=qt=ti=t,ii=si=0,function(){let e=!1,t=!1,i=!1,n=!1;Me.forEach(((s,o)=>{if(s.show&&s._show){let{side:o,_size:l}=s,r=o%2,a=l+(null!=s.label?s.labelSize:0);a>0&&(r?(ei-=a,3==o?(ii+=a,n=!0):i=!0):(ti-=a,0==o?(si+=a,e=!0):t=!0))}})),Wi[0]=e,Wi[1]=i,Wi[2]=t,Wi[3]=n,ei-=Ki[1]+Ki[3],ii+=Ki[3],ti-=Ki[2]+Ki[0],si+=Ki[0]}(),function(){let e=ii+ei,t=si+ti,i=ii,n=si;function s(s,o){switch(s){case 1:return e+=o,e-o;case 2:return t+=o,t-o;case 3:return i-=o,i+o;case 0:return n-=o,n+o}}Me.forEach(((e,t)=>{if(e.show&&e._show){let t=e.side;e._pos=s(t,e._size),null!=e.label&&(e._lpos=s(t,e.labelSize))}}))}();let i=I.bbox;oi=i.left=Ye(ii*Y,.5),li=i.top=Ye(si*Y,.5),ri=i.width=Ye(ei*Y,.5),ai=i.height=Ye(ti*Y,.5)}const Ri=3;I.setSize=function(e){let{width:t,height:i}=e;Oi(t,i)};const Ni=I.cursor=at({},ni,{drag:{y:2==U}},e.cursor),$i=e=>{Ni.event=e};Ni.idxs=yt,Ni._lock=!1;let Xi=Ni.points;Xi.show=Ue(Xi.show),Xi.size=Ue(Xi.size),Xi.stroke=Ue(Xi.stroke),Xi.width=Ue(Xi.width),Xi.fill=Ue(Xi.fill);const zi=I.focus=at({},e.focus||{alpha:.3},Ni.focus),Hi=zi.prox>=0;let Bi=[null];function Vi(e,t){if(1==U||t>0){let t=1==U&&Fe[e.scale].time,i=e.value;e.value=t?nt(i)?Jt(pt,Kt(i,gt)):i||vt:i||Ai,e.label=e.label||(t?hi:di)}if(t>0){e.width=null==e.width?1:e.width,e.paths=e.paths||dn||je,e.fillTo=Ue(e.fillTo||ji),e.pxAlign=+me(e.pxAlign,_e),e.pxRound=Yi(e.pxAlign),e.stroke=Ue(e.stroke||null),e.fill=Ue(e.fill||null),e._stroke=e._fill=e._paths=e._focus=null;let t=We((3+2*(Oe(1,e.width)||1))*1,3),i=e.points=at({},{size:t,width:Oe(1,.2*t),stroke:e.stroke,space:2*t,paths:hn,_stroke:null,_fill:null},e.points);i.show=Ue(i.show),i.filter=Ue(i.filter),i.fill=Ue(i.fill),i.stroke=Ue(i.stroke),i.paths=Ue(i.paths),i.pxAlign=e.pxAlign}if(wt){let i=function(e,t){if(0==t&&(kt||!bt.live||2==U))return Qe;let i=[],n=q("tr",y,Tt,Tt.childNodes[t]);V(n,e.class),e.show||V(n,d);let s=q("th",null,n);if(St.show){let e=K(b,s);if(t>0){let i=St.width(I,t);i&&(e.style.border=i+"px "+St.dash(I,t)+" "+St.stroke(I,t)),e.style.background=St.fill(I,t)}}let o=K(w,s);for(var l in o.textContent=e.label,t>0&&(St.show||(o.style.color=e.width>0?St.stroke(I,t):St.fill(I,t)),Nt("click",s,(t=>{if(Ni._lock)return;$i(t);let i=be.indexOf(e);if((t.ctrlKey||t.metaKey)!=bt.isolate){let e=be.some(((e,t)=>t>0&&t!=i&&e.show));be.forEach(((t,n)=>{n>0&&ps(n,e?n==i?Ft:Pt:Ft,!0,Bs.setSeries)}))}else ps(i,{show:!e.show},!0,Bs.setSeries)}),!1),Hi&&Nt(R,s,(t=>{Ni._lock||($i(t),ps(be.indexOf(e),vs,!0,Bs.setSeries))}),!1)),Ot){let e=q("td",E,n);e.textContent="--",i.push(e)}return[n,i]}(e,t);Dt.splice(t,0,i[0]),Mt.splice(t,0,i[1]),bt.values.push(null)}if(Ni.show){yt.splice(t,0,null);let i=function(e,t){if(t>0){let i=Ni.points.show(I,t);if(i)return V(i,g),V(i,e.class),J(i,-10,-10,ei,ti),pe.insertBefore(i,Bi[t]),i}}(e,t);i&&Bi.splice(t,0,i)}Hs("addSeries",t)}I.addSeries=function(e,t){t=null==t?be.length:t,e=1==U?pn(e,t,fi,Di):pn(e,t,null,Ii),be.splice(t,0,e),Vi(be[t],t)},I.delSeries=function(e){if(be.splice(e,1),wt){bt.values.splice(e,1),Mt.splice(e,1);let t=Dt.splice(e,1)[0];$t(null,t.firstChild),t.remove()}Ni.show&&(yt.splice(e,1),Bi.length>1&&Bi.splice(e,1)[0].remove()),Hs("delSeries",e)};const Wi=[!1,!1,!1,!1];function Gi(e,t,i,n){let[s,o,l,r]=i,a=t%2,u=0;return 0==a&&(r||o)&&(u=0==t&&!s||2==t&&!l?xe(ci.size/3):0),1==a&&(s||l)&&(u=1==t&&!o||3==t&&!r?xe(Ti.size/2):0),u}const qi=I.padding=(e.padding||[Gi,Gi,Gi,Gi]).map((e=>Ue(me(e,Gi)))),Ki=I._padding=qi.map(((e,t)=>e(I,t,Wi,0)));let Zi,Ji=null,Qi=null;const en=1==U?be[0].idxs:null;let tn,nn,sn,on,ln,rn,an,cn,An,Tn,On=null,Ln=!1;function In(e,i){if(t=null==e?[]:rt(e,ot),2==U){Zi=0;for(let e=1;e<be.length;e++)Zi+=t[e][0].length;I.data=t=e}else if(null==t[0]&&(t[0]=[]),I.data=t.slice(),On=t[0],Zi=On.length,2==ut){t[0]=Array(Zi);for(let e=0;e<Zi;e++)t[0][e]=e}if(I._data=t,Hn(!0),Hs("setData"),2==ut&&(yi=!0),!1!==i){let e=lt;e.auto(I,Ln)?Dn():fs(He,e.min,e.max),bi=bi||Ni.left>=0,Ei=!0,ns()}}function Dn(){let e,i;Ln=!0,1==U&&(Zi>0?(Ji=en[0]=0,Qi=en[1]=Zi-1,e=t[0][Ji],i=t[0][Qi],2==ut?(e=Ji,i=Qi):e==i&&(3==ut?[e,i]=ue(e,e,lt.log,!1):4==ut?[e,i]=ce(e,e,lt.log,!1):lt.time?i=e+xe(86400/ye):[e,i]=ge(e,i,de,!0))):(Ji=en[0]=e=null,Qi=en[1]=i=null)),fs(He,e,i)}function Mn(e,t,i,n,s,o){e??=D,i??=Je,n??="butt",s??=D,o??="round",e!=tn&&(se.strokeStyle=tn=e),s!=nn&&(se.fillStyle=nn=s),t!=sn&&(se.lineWidth=sn=t),o!=ln&&(se.lineJoin=ln=o),n!=rn&&(se.lineCap=rn=n),i!=on&&se.setLineDash(on=i)}function kn(e,t,i,n){t!=nn&&(se.fillStyle=nn=t),e!=an&&(se.font=an=e),i!=cn&&(se.textAlign=cn=i),n!=An&&(se.textBaseline=An=n)}function Cn(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(n.length>0&&e.auto(I,Ln)&&(null==t||null==t.min)){let t=me(Ji,0),o=me(Qi,n.length-1),l=null==i.min?3==e.distr?function(e,t,i){let n=Re,s=-Re;for(let o=t;o<=i;o++){let t=e[o];null!=t&&t>0&&(t<n&&(n=t),t>s&&(s=t))}return[n==Re?1:n,s==-Re?10:s]}(n,t,o):function(e,t,i,n){let s=Re,o=-Re;if(1==n)s=e[t],o=e[i];else if(-1==n)s=e[i],o=e[t];else for(let l=t;l<=i;l++){let t=e[l];null!=t&&(t<s&&(s=t),t>o&&(o=t))}return[s,o]}(n,t,o,s):[i.min,i.max];e.min=Te(e.min,i.min=l[0]),e.max=Oe(e.max,i.max=l[1])}}function Rn(e,t){let i=t?be[e].points:be[e];i._stroke=i.stroke(I,e),i._fill=i.fill(I,e)}function Fn(e,i){let n=i?be[e].points:be[e],{stroke:s,fill:o,clip:l,flags:r,_stroke:a=n._stroke,_fill:u=n._fill,_width:c=n.width}=n._paths;c=We(c*Y,3);let d=null,h=c%2/2;i&&null==u&&(u=c>0?"#fff":a);let f=1==n.pxAlign&&h>0;if(f&&se.translate(h,h),!i){let e=oi-c/2,t=li-c/2,i=ri+c,n=ai+c;d=new Path2D,d.rect(e,t,i,n)}i?Un(a,c,n.dash,n.cap,u,s,o,r,l):function(e,i,n,s,o,l,r,a,u,c,d){let h=!1;Ne.forEach(((f,p)=>{if(f.series[0]==e){let e,g=be[f.series[1]],m=t[f.series[1]],_=(g._paths||Ze).band;et(_)&&(_=1==f.dir?_[0]:_[1]);let v=null;g.show&&_&&function(e,t,i){for(t=me(t,0),i=me(i,e.length-1);t<=i;){if(null!=e[t])return!0;t++}return!1}(m,Ji,Qi)?(v=f.fill(I,p)||l,e=g._paths.clip):_=null,Un(i,n,s,o,v,r,a,u,c,d,e,_),h=!0}})),h||Un(i,n,s,o,l,r,a,u,c,d)}(e,a,c,n.dash,n.cap,u,s,o,r,d,l),f&&se.translate(-h,-h)}I.setData=In;const Pn=Pi|Ui;function Un(e,t,i,n,s,o,l,r,a,u,c,d){Mn(e,t,i,n,s),(a||u||d)&&(se.save(),a&&se.clip(a),u&&se.clip(u)),d?(r&Pn)==Pn?(se.clip(d),c&&se.clip(c),$n(s,l),Nn(e,o,t)):r&Ui?($n(s,l),se.clip(d),Nn(e,o,t)):r&Pi&&(se.save(),se.clip(d),c&&se.clip(c),$n(s,l),se.restore(),Nn(e,o,t)):($n(s,l),Nn(e,o,t)),(a||u||d)&&se.restore()}function Nn(e,t,i){i>0&&(t instanceof Map?t.forEach(((e,t)=>{se.strokeStyle=tn=t,se.stroke(e)})):null!=t&&e&&se.stroke(t))}function $n(e,t){t instanceof Map?t.forEach(((e,t)=>{se.fillStyle=nn=t,se.fill(e)})):null!=t&&e&&se.fill(t)}function jn(e,t,i,n,s,o,l,r,a,u){let c=l%2/2;1==_e&&se.translate(c,c),Mn(r,l,a,u,r),se.beginPath();let d,h,f,p,g=s+(0==n||3==n?-o:o);0==i?(h=s,p=g):(d=s,f=g);for(let m=0;m<e.length;m++)null!=t[m]&&(0==i?d=f=e[m]:h=p=e[m],se.moveTo(d,h),se.lineTo(f,p));se.stroke(),1==_e&&se.translate(-c,-c)}function Xn(e){let t=!0;return Me.forEach(((i,n)=>{if(!i.show)return;let s=Fe[i.scale];if(null==s.min)return void(i._show&&(t=!1,i._show=!1,Hn(!1)));i._show||(t=!1,i._show=!0,Hn(!1));let o=i.side,l=o%2,{min:r,max:a}=s,[u,c]=function(e,t,i,n){let s,o=Me[e];if(n<=0)s=[0,0];else{let l=o._space=o.space(I,e,t,i,n);s=En(t,i,o._incrs=o.incrs(I,e,t,i,n,l),n,l)}return o._found=s}(n,r,a,0==l?ei:ti);if(0==c)return;let d=2==s.distr,h=i._splits=i.splits(I,n,r,a,u,c,d),f=2==s.distr?h.map((e=>On[e])):h,p=2==s.distr?On[h[1]]-On[h[0]]:u,g=i._values=i.values(I,i.filter(I,f,n,c,p),n,c,p);i._rotate=2==o?i.rotate(I,g,n,c):0;let m=i._size;i._size=Ae(i.size(I,g,n,e)),null!=m&&i._size!=m&&(t=!1)})),t}function zn(e){let t=!0;return qi.forEach(((i,n)=>{let s=i(I,n,Wi,e);s!=Ki[n]&&(t=!1),Ki[n]=s})),t}function Hn(e){be.forEach(((t,i)=>{i>0&&(t._paths=null,e&&(1==U?(t.min=null,t.max=null):t.facets.forEach((e=>{e.min=null,e.max=null}))))}))}let Yn,Bn,Vn,Wn,Gn,qn,Kn,Zn,Jn,Qn,es,ts,is=!1;function ns(){is||(ft(ss),is=!0)}function ss(){ui&&(!function(){let e=rt(Fe,ot);for(let t in e){let i=e[t],n=ht[t];if(null!=n&&null!=n.min)at(i,n),t==He&&Hn(!0);else if(t!=He||2==U)if(0==Zi&&null==i.from){let e=i.range(I,null,null,t);i.min=e[0],i.max=e[1]}else i.min=Re,i.max=-Re}if(Zi>0){be.forEach(((i,n)=>{if(1==U){let s=i.scale,o=e[s],l=ht[s];if(0==n){let e=o.range(I,o.min,o.max,s);o.min=e[0],o.max=e[1],Ji=re(o.min,t[0]),Qi=re(o.max,t[0]),Qi-Ji>1&&(t[0][Ji]<o.min&&Ji++,t[0][Qi]>o.max&&Qi--),i.min=On[Ji],i.max=On[Qi]}else i.show&&i.auto&&Cn(o,l,i,t[n],i.sorted);i.idxs[0]=Ji,i.idxs[1]=Qi}else if(n>0&&i.show&&i.auto){let[s,o]=i.facets,l=s.scale,r=o.scale,[a,u]=t[n];Cn(e[l],ht[l],s,a,s.sorted),Cn(e[r],ht[r],o,u,o.sorted),i.min=o.min,i.max=o.max}}));for(let t in e){let i=e[t],n=ht[t];if(null==i.from&&(null==n||null==n.min)){let e=i.range(I,i.min==Re?null:i.min,i.max==-Re?null:i.max,t);i.min=e[0],i.max=e[1]}}}for(let t in e){let i=e[t];if(null!=i.from){let n=e[i.from];if(null==n.min)i.min=i.max=null;else{let e=i.range(I,n.min,n.max,t);i.min=e[0],i.max=e[1]}}}let i={},n=!1;for(let t in e){let s=e[t],o=Fe[t];if(o.min!=s.min||o.max!=s.max){o.min=s.min,o.max=s.max;let e=o.distr;o._min=3==e?De(o.min):4==e?Ce(o.min,o.asinh):o.min,o._max=3==e?De(o.max):4==e?Ce(o.max,o.asinh):o.max,i[t]=n=!0}}if(n){be.forEach(((e,t)=>{2==U?t>0&&i.y&&(e._paths=null):i[e.scale]&&(e._paths=null)}));for(let e in i)yi=!0,Hs("setScale",e);Ni.show&&Ni.left>=0&&(bi=Ei=!0)}for(let t in ht)ht[t]=null}(),ui=!1),yi&&(!function(){let e=!1,t=0;for(;!e;){t++;let i=Xn(t),n=zn(t);e=t==Ri||i&&n,e||(Li(I.width,I.height),vi=!0)}}(),yi=!1),vi&&(G(fe,O,ii),G(fe,A,si),G(fe,S,ei),G(fe,x,ti),G(pe,O,ii),G(pe,A,si),G(pe,S,ei),G(pe,x,ti),G(ae,S,jt),G(ae,x,qt),ne.width=xe(jt*Y),ne.height=xe(qt*Y),Me.forEach((e=>{let{_el:t,_show:i,_size:n,_pos:s,side:o}=e;if(null!=t)if(i){let e=o%2==1;G(t,e?"left":"top",s-(3===o||0===o?n:0)),G(t,e?"width":"height",n),G(t,e?"top":"left",e?si:ii),G(t,e?"height":"width",e?ti:ei),W(t,d)}else V(t,d)})),tn=nn=sn=ln=rn=an=cn=An=on=null,Tn=1,Ls(!0),Hs("setSize"),vi=!1),jt>0&&qt>0&&(se.clearRect(0,0,ne.width,ne.height),Hs("drawClear"),Ke.forEach((e=>e())),Hs("draw")),cs.show&&wi&&(hs(cs),wi=!1),Ni.show&&bi&&(Ts(null,!0,!1),bi=!1),bt.show&&bt.live&&Ei&&(xs(),Ei=!1),Q||(Q=!0,I.status=1,Hs("ready")),Ln=!1,is=!1}function os(e,i){let n=Fe[e];if(null==n.from){if(0==Zi){let t=n.range(I,i.min,i.max,e);i.min=t[0],i.max=t[1]}if(i.min>i.max){let e=i.min;i.min=i.max,i.max=e}if(Zi>1&&null!=i.min&&null!=i.max&&i.max-i.min<1e-16)return;e==He&&2==n.distr&&Zi>0&&(i.min=re(i.min,t[0]),i.max=re(i.max,t[0]),i.min==i.max&&i.max++),ht[e]=i,ui=!0,ns()}}I.redraw=(e,t)=>{yi=t||!1,!1!==e?fs(He,lt.min,lt.max):ns()},I.setScale=os;let ls=!1;const rs=Ni.drag;let as=rs.x,us=rs.y;Ni.show&&(Ni.x&&(Yn=K(f,pe)),Ni.y&&(Bn=K(p,pe)),0==lt.ori?(Vn=Yn,Wn=Bn):(Vn=Bn,Wn=Yn),es=Ni.left,ts=Ni.top);const cs=I.select=at({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),ds=cs.show?K(h,cs.over?pe:fe):null;function hs(e,t){if(cs.show){for(let t in e)cs[t]=e[t],t in Ms&&G(ds,t,e[t]);!1!==t&&Hs("setSelect")}}function fs(e,t,i){os(e,{min:t,max:i})}function ps(e,t,i,n){null!=t.focus&&function(e){if(e!=_s){let t=null==e,i=1!=zi.alpha;be.forEach(((n,s)=>{let o=t||0==s||s==e;n._focus=t?null:o,i&&function(e,t){be[e].alpha=t,Ni.show&&Bi[e]&&(Bi[e].style.opacity=t);wt&&Dt[e]&&(Dt[e].style.opacity=t)}(s,o?1:zi.alpha)})),_s=e,i&&ns()}}(e),null!=t.show&&be.forEach(((i,n)=>{n>0&&(e==n||null==e)&&(i.show=t.show,function(e,t){let i=be[e],n=wt?Dt[e]:null;i.show?n&&W(n,d):(n&&V(n,d),Bi.length>1&&J(Bi[e],-10,-10,ei,ti))}(n,t.show),fs(2==U?i.facets[1].scale:i.scale,null,null),ns())})),!1!==i&&Hs("setSeries",e,t),n&&Gs("setSeries",I,e,t)}let gs,ms,_s;I.setSelect=hs,I.setSeries=ps,I.addBand=function(e,t){e.fill=Ue(e.fill||null),e.dir=me(e.dir,-1),t=null==t?Ne.length:t,Ne.splice(t,0,e)},I.setBand=function(e,t){at(Ne[e],t)},I.delBand=function(e){null==e?Ne.length=0:Ne.splice(e,1)};const vs={focus:!0};function ys(e,t,i){let n=Fe[t];i&&(e=e/Y-(1==n.ori?si:ii));let s=ei;1==n.ori&&(s=ti,e=s-e),-1==n.dir&&(e=s-e);let o=n._min,l=o+(n._max-o)*(e/s),r=n.distr;return 3==r?Le(10,l):4==r?ke(l,n.asinh):l}function bs(e,t){G(ds,O,cs.left=e),G(ds,S,cs.width=t)}function ws(e,t){G(ds,A,cs.top=e),G(ds,x,cs.height=t)}wt&&Hi&&Nt(F,xt,(e=>{Ni._lock||($i(e),null!=_s&&ps(null,vs,!0,Bs.setSeries))})),I.valToIdx=e=>re(e,t[0]),I.posToIdx=function(e,i){return re(ys(e,He,i),t[0],Ji,Qi)},I.posToVal=ys,I.valToPos=(e,t,i)=>0==Fe[t].ori?H(e,Fe[t],i?ri:ei,i?oi:0):B(e,Fe[t],i?ai:ti,i?li:0),I.batch=function(e){e(I),ns()},I.setCursor=(e,t,i)=>{es=e.left,ts=e.top,Ts(null,t,i)};let Es=0==lt.ori?bs:ws,Ss=1==lt.ori?bs:ws;function xs(e,t){null!=e&&(e.idxs?e.idxs.forEach(((e,t)=>{yt[t]=e})):it(e.idx)||yt.fill(e.idx),bt.idx=yt[0]);for(let i=0;i<be.length;i++)(i>0||1==U&&!kt)&&As(i,yt[i]);wt&&bt.live&&function(){if(wt&&bt.live)for(let e=2==U?1:0;e<be.length;e++){if(0==e&&kt)continue;let t=bt.values[e],i=0;for(let n in t)Mt[e][i++].firstChild.nodeValue=t[n]}}(),Ei=!1,!1!==t&&Hs("setLegend")}function As(e,i){let n,s=be[e],o=0==e&&2==ut?On:t[e];kt?n=s.values(I,e,i)??Ct:(n=s.value(I,null==i?null:o[i],e,i),n=null==n?Ct:{_:n}),bt.values[e]=n}function Ts(e,i,n){let s;Jn=es,Qn=ts,[es,ts]=Ni.move(I,es,ts),Ni.show&&(Vn&&J(Vn,xe(es),0,ei,ti),Wn&&J(Wn,0,xe(ts),ei,ti));let o=Ji>Qi;gs=Re;let l=0==lt.ori?ei:ti,r=1==lt.ori?ei:ti;if(es<0||0==Zi||o){s=null;for(let e=0;e<be.length;e++)e>0&&Bi.length>1&&J(Bi[e],-10,-10,ei,ti);Hi&&ps(null,vs,!0,null==e&&Bs.setSeries),bt.live&&(yt.fill(s),Ei=!0)}else{let e,i,n;1==U&&(e=0==lt.ori?es:ts,i=ys(e,He),s=re(i,t[0],Ji,Qi),n=ct(t[0][s],lt,l,0));for(let o=2==U?1:0;o<be.length;o++){let e=be[o],a=yt[o],u=1==U?t[o][a]:t[o][1][a],c=Ni.dataIdx(I,o,s,i),d=1==U?t[o][c]:t[o][1][c];Ei=Ei||d!=u||c!=a,yt[o]=c;let h=Be(c==s?n:ct(1==U?t[0][c]:t[o][0][c],lt,l,0),1);if(o>0&&e.show){let t,i,n=null==d?-10:Be(dt(d,1==U?Fe[e.scale]:Fe[e.facets[1].scale],r,0),1);if(Hi&&n>=0&&1==U){let t=Ee(n-ts);if(t<gs){let i=zi.bias;if(0!=i){let n=ys(1==lt.ori?es:ts,e.scale),s=n>=0?1:-1;s==(d>=0?1:-1)&&(1==s?1==i?d>=n:d<=n:1==i?d<=n:d>=n)&&(gs=t,ms=o)}else gs=t,ms=o}}if(0==lt.ori?(t=h,i=n):(t=n,i=h),Ei&&Bi.length>1){ee(Bi[o],Ni.points.fill(I,o),Ni.points.stroke(I,o));let e,n,s,l,r=!0,a=Ni.points.bbox;if(null!=a){r=!1;let t=a(I,o);s=t.left,l=t.top,e=t.width,n=t.height}else s=t,l=i,e=n=Ni.points.size(I,o);ie(Bi[o],e,n,r),J(Bi[o],s,l,ei,ti)}}}}if(Ni.idx=s,Ni.left=es,Ni.top=ts,Ei&&(bt.idx=s,xs()),cs.show&&ls)if(null!=e){let[t,i]=Bs.scales,[n,s]=Bs.match,[o,a]=e.cursor.sync.scales,u=e.cursor.drag;if(as=u._x,us=u._y,as||us){let u,c,d,h,f,{left:p,top:g,width:m,height:_}=e.select,v=e.scales[t].ori,y=e.posToVal,b=null!=t&&n(t,o),w=null!=i&&s(i,a);b&&as?(0==v?(u=p,c=m):(u=g,c=_),d=Fe[t],h=ct(y(u,o),d,l,0),f=ct(y(u+c,o),d,l,0),Es(Te(h,f),Ee(f-h))):Es(0,l),w&&us?(1==v?(u=p,c=m):(u=g,c=_),d=Fe[i],h=dt(y(u,a),d,r,0),f=dt(y(u+c,a),d,r,0),Ss(Te(h,f),Ee(f-h))):Ss(0,r)}else ks()}else{let e=Ee(Jn-Gn),t=Ee(Qn-qn);if(1==lt.ori){let i=e;e=t,t=i}as=rs.x&&e>=rs.dist,us=rs.y&&t>=rs.dist;let i,n,s=rs.uni;null!=s?as&&us&&(as=e>=s,us=t>=s,as||us||(t>e?us=!0:as=!0)):rs.x&&rs.y&&(as||us)&&(as=us=!0),as&&(0==lt.ori?(i=Kn,n=es):(i=Zn,n=ts),Es(Te(i,n),Ee(n-i)),us||Ss(0,r)),us&&(1==lt.ori?(i=Kn,n=es):(i=Zn,n=ts),Ss(Te(i,n),Ee(n-i)),as||Es(0,l)),as||us||(Es(0,0),Ss(0,0))}if(rs._x=as,rs._y=us,null==e){if(n){if(null!=Vs){let[e,t]=Bs.scales;Bs.values[0]=null!=e?ys(0==lt.ori?es:ts,e):null,Bs.values[1]=null!=t?ys(1==lt.ori?es:ts,t):null}Gs(M,I,es,ts,ei,ti,s)}if(Hi){let e=n&&Bs.setSeries,t=zi.prox;null==_s?gs<=t&&ps(ms,vs,!0,e):gs>t?ps(null,vs,!0,e):ms!=_s&&ps(ms,vs,!0,e)}}!1!==i&&Hs("setCursor")}I.setLegend=xs;let Os=null;function Ls(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Os=null:(Os=pe.getBoundingClientRect(),Hs("syncRect",Os))}function Is(e,t,i,n,s,o,l){Ni._lock||ls&&null!=e&&0==e.movementX&&0==e.movementY||(Ds(e,t,i,n,s,o,l,!1,null!=e),null!=e?Ts(null,!0,!0):Ts(t,!0,!1))}function Ds(e,t,i,n,s,o,l,r,a){if(null==Os&&Ls(!1),$i(e),null!=e)i=e.clientX-Os.left,n=e.clientY-Os.top;else{if(i<0||n<0)return es=-10,void(ts=-10);let[e,l]=Bs.scales,r=t.cursor.sync,[a,u]=r.values,[c,d]=r.scales,[h,f]=Bs.match,p=t.axes[0].side%2==1,g=0==lt.ori?ei:ti,m=1==lt.ori?ei:ti,_=p?o:s,v=p?s:o,y=p?n:i,b=p?i:n;if(i=null!=c?h(e,c)?Z(a,Fe[e],g,0):-10:g*(y/_),n=null!=d?f(l,d)?Z(u,Fe[l],m,0):-10:m*(b/v),1==lt.ori){let e=i;i=n,n=e}}a&&((i<=1||i>=ei-1)&&(i=Ye(i,ei)),(n<=1||n>=ti-1)&&(n=Ye(n,ti))),r?(Gn=i,qn=n,[Kn,Zn]=Ni.move(I,i,n)):(es=i,ts=n)}Object.defineProperty(I,"rect",{get:()=>(null==Os&&Ls(!1),Os)});const Ms={width:0,height:0,left:0,top:0};function ks(){hs(Ms,!1)}let Cs,Rs,Fs,Ps;function Us(e,t,i,n,s,o,l){ls=!0,as=us=rs._x=rs._y=!1,Ds(e,t,i,n,s,o,0,!0,!1),null!=e&&(Nt(C,X,Ns,!1),Gs(k,I,Kn,Zn,ei,ti,null));let{left:r,top:a,width:u,height:c}=cs;Cs=r,Rs=a,Fs=u,Ps=c,ks()}function Ns(e,t,i,n,s,o,l){ls=rs._x=rs._y=!1,Ds(e,t,i,n,s,o,0,!1,!0);let{left:r,top:a,width:u,height:c}=cs,d=u>0||c>0,h=Cs!=r||Rs!=a||Fs!=u||Ps!=c;if(d&&h&&hs(cs),rs.setScale&&d&&h){let e=r,t=u,i=a,n=c;if(1==lt.ori&&(e=a,t=c,i=r,n=u),as&&fs(He,ys(e,He),ys(e+t,He)),us)for(let s in Fe){let e=Fe[s];s!=He&&null==e.from&&e.min!=Re&&fs(s,ys(i+n,s),ys(i,s))}ks()}else Ni.lock&&(Ni._lock=!Ni._lock,Ni._lock||Ts(null,!0,!1));null!=e&&($t(C,X),Gs(C,I,es,ts,ei,ti,null))}function $s(e,t,i,n,s,o,l){Ni._lock||($i(e),Dn(),ks(),null!=e&&Gs(P,I,es,ts,ei,ti,null))}function js(){Me.forEach(xn),Oi(I.width,I.height,!0)}oe(N,z,js);const Xs={};Xs.mousedown=Us,Xs.mousemove=Is,Xs.mouseup=Ns,Xs.dblclick=$s,Xs.setSeries=(e,t,i,n)=>{-1!=(i=(0,Bs.match[2])(I,t,i))&&ps(i,n,!0,!1)},Ni.show&&(Nt(k,pe,Us),Nt(M,pe,Is),Nt(R,pe,(e=>{$i(e),Ls(!1)})),Nt(F,pe,(function(e,t,i,n,s,o,l){if(Ni._lock)return;$i(e);let r=ls;if(ls){let e,t,i=!0,n=!0,s=10;0==lt.ori?(e=as,t=us):(e=us,t=as),e&&t&&(i=es<=s||es>=ei-s,n=ts<=s||ts>=ti-s),e&&i&&(es=es<Kn?0:ei),t&&n&&(ts=ts<Zn?0:ti),Ts(null,!0,!0),ls=!1}es=-10,ts=-10,Ts(null,!0,!0),r&&(ls=r)})),Nt(P,pe,$s),un.add(I),I.syncRect=Ls);const zs=I.hooks=e.hooks||{};function Hs(e,t,i){e in zs&&zs[e].forEach((e=>{e.call(null,I,t,i)}))}(e.plugins||[]).forEach((e=>{for(let t in e.hooks)zs[t]=(zs[t]||[]).concat(e.hooks[t])}));const Ys=(e,t,i)=>i,Bs=at({key:null,setSeries:!1,filters:{pub:Xe,sub:Xe},scales:[He,be[1]?be[1].scale:null],match:[ze,ze,Ys],values:[null,null]},Ni.sync);2==Bs.match.length&&Bs.match.push(Ys),Ni.sync=Bs;const Vs=Bs.key,Ws=Fi(Vs);function Gs(e,t,i,n,s,o,l){Bs.filters.pub(e,t,i,n,s,o,l)&&Ws.pub(e,t,i,n,s,o,l)}function qs(){Hs("init",e,t),In(t||e.data,!1),ht[He]?os(He,ht[He]):Dn(),wi=cs.show&&(cs.width>0||cs.height>0),bi=Ei=!0,Oi(e.width,e.height)}return Ws.sub(I),I.pub=function(e,t,i,n,s,o,l){Bs.filters.sub(e,t,i,n,s,o,l)&&Xs[e](null,t,i,n,s,o,l)},I.destroy=function(){Ws.unsub(I),un.delete(I),Ut.clear(),le(N,z,js),te.remove(),xt?.remove(),Hs("destroy")},be.forEach(Vi),Me.forEach((function(e,t){if(e._show=e.show,e.show){let i=e.side%2,n=Fe[e.scale];null==n&&(e.scale=i?be[1].scale:He,n=Fe[e.scale]);let s=n.time;e.size=Ue(e.size),e.space=Ue(e.space),e.rotate=Ue(e.rotate),et(e.incrs)&&e.incrs.forEach((e=>{!Ge.has(e)&&Ge.set(e,qe(e))})),e.incrs=Ue(e.incrs||(2==n.distr?Lt:s?1==ye?Xt:Yt:It)),e.splits=Ue(e.splits||(s&&1==n.distr?mt:3==n.distr?mi:4==n.distr?_i:gi)),e.stroke=Ue(e.stroke),e.grid.stroke=Ue(e.grid.stroke),e.ticks.stroke=Ue(e.ticks.stroke),e.border.stroke=Ue(e.border.stroke);let o=e.values;e.values=et(o)&&!et(o[0])?Ue(o):s?et(o)?Gt(pt,Wt(o,gt)):nt(o)?function(e,t){let i=Et(t);return(t,n,s,o,l)=>n.map((t=>i(e(t))))}(pt,o):o||_t:o||pi,e.filter=Ue(e.filter||(n.distr>=3&&10==n.log?Si:3==n.distr&&2==n.log?xi:$e)),e.font=Sn(e.font),e.labelFont=Sn(e.labelFont),e._size=e.size(I,null,t,0),e._space=e._rotate=e._incrs=e._found=e._splits=e._values=null,e._size>0&&(Wi[t]=!0,e._el=K(c,ae))}})),i?i instanceof HTMLElement?(i.appendChild(te),qs()):i(I,qs):qs(),I}An.assign=at,An.fmtNum=ye,An.rangeNum=ge,An.rangeLog=ue,An.rangeAsinh=ce,An.orient=Ni,An.pxRatio=Y,An.join=function(e,t){if(function(e){let t=e[0][0],i=t.length;for(let n=1;n<e.length;n++){let s=e[n][0];if(s.length!=i)return!1;if(s!=t)for(let e=0;e<i;e++)if(s[e]!=t[e])return!1}return!0}(e)){let t=e[0].slice();for(let i=1;i<e.length;i++)t.push(...e[i].slice(1));return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;const i=e.length;if(i<=1)return!0;let n=0,s=i-1;for(;n<=s&&null==e[n];)n++;for(;s>=n&&null==e[s];)s--;if(s<=n)return!0;const o=Oe(1,Se((s-n+1)/t));for(let l=e[n],r=n+o;r<=s;r+=o){const t=e[r];if(null!=t){if(t<=l)return!1;l=t}}return!0}(t[0])||(t=function(e){let t=e[0],i=t.length,n=Array(i);for(let o=0;o<n.length;o++)n[o]=o;n.sort(((e,i)=>t[e]-t[i]));let s=[];for(let o=0;o<e.length;o++){let t=e[o],l=Array(i);for(let e=0;e<i;e++)l[e]=t[n[e]];s.push(l)}return s}(t)),t}let i=new Set;for(let l=0;l<e.length;l++){let t=e[l][0],n=t.length;for(let e=0;e<n;e++)i.add(t[e])}let n=[Array.from(i).sort(((e,t)=>e-t))],s=n[0].length,o=new Map;for(let l=0;l<s;l++)o.set(n[0][l],l);for(let l=0;l<e.length;l++){let i=e[l],r=i[0];for(let e=1;e<i.length;e++){let a=i[e],u=Array(s).fill(void 0),c=t?t[l][e]:ct,d=[];for(let e=0;e<a.length;e++){let t=a[e],i=o.get(r[e]);null===t?c!=ut&&(u[i]=t,c==dt&&d.push(i)):u[i]=t}ht(u,d,s),n.push(u)}}return n},An.fmtDate=Et,An.tzDate=function(e,t){let i;return"UTC"==t||"Etc/UTC"==t?i=new Date(+e+6e4*e.getTimezoneOffset()):t==St?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:t})),i.setMilliseconds(e.getMilliseconds())),i},An.sync=Fi;{An.addGap=function(e,t,i){let n=e[e.length-1];n&&n[0]==t?n[1]=i:e.push([t,i])},An.clipGaps=zi;let e=An.paths={points:nn};e.linear=rn,e.stepped=function(e){const t=me(e.align,1),i=me(e.ascDesc,!1),n=me(e.alignGaps,0),s=me(e.extend,!1);return(e,o,l,r)=>Ni(e,o,((a,u,c,d,h,f,p,g,m,_,v)=>{let y=a.pxRound,{left:b,width:w}=e.bbox,E=e=>y(f(e,d,_,g)),S=e=>y(p(e,h,v,m)),x=0==d.ori?Gi:qi;const A={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Pi},T=A.stroke,O=d.dir*(0==d.ori?1:-1);l=ae(c,l,r,1),r=ae(c,l,r,-1);let L=S(c[1==O?l:r]),I=E(u[1==O?l:r]),D=I,M=I;s&&-1==t&&(M=b,x(T,M,L)),x(T,I,L);for(let e=1==O?l:r;e>=l&&e<=r;e+=O){let i=c[e];if(null==i)continue;let n=E(u[e]),s=S(i);1==t?x(T,n,L):x(T,D,s),x(T,n,s),L=s,D=n}let k=D;s&&1==t&&(k=b+w,x(T,k,L));let[C,R]=$i(e,o);if(null!=a.fill||0!=C){let t=A.fill=new Path2D(T),i=S(a.fillTo(e,o,a.min,a.max,C));x(t,k,i),x(t,M,i)}if(!a.spanGaps){let s=[];s.push(...Hi(u,c,l,r,O,E,n));let h=a.width*Y/2,f=i||1==t?h:-h,p=i||-1==t?-h:h;s.forEach((e=>{e[0]+=f,e[1]+=p})),A.gaps=s=a.gaps(e,o,l,r,s),A.clip=zi(s,d.ori,g,m,_,v)}return 0!=R&&(A.band=2==R?[Xi(e,o,l,r,T,-1),Xi(e,o,l,r,T,1)]:Xi(e,o,l,r,T,R)),A}))},e.bars=function(e){const t=me((e=e||Ze).size,[.6,Re,1]),i=e.align||0,n=(e.gap||0)*Y;let s=e.radius;s=null==s?[0,0]:"number"==typeof s?[s,0]:s;const o=Ue(s),l=1-t[0],r=me(t[1],Re)*Y,a=me(t[2],1)*Y,u=me(e.disp,Ze),c=me(e.each,(e=>{})),{fill:d,stroke:h}=u;return(e,t,s,f)=>Ni(e,t,((p,g,m,_,v,y,b,w,E,S,x)=>{let A,T,O=p.pxRound;0==_.ori?[A,T]=o(e,t):[T,A]=o(e,t);const L=_.dir*(0==_.ori?1:-1),I=v.dir*(1==v.ori?1:-1);let D,M,k=0==_.ori?Ki:Zi,C=0==_.ori?c:(e,t,i,n,s,o,l)=>{c(e,t,i,s,n,l,o)},[R,F]=$i(e,t),P=3==v.distr?1==R?v.max:v.min:0,U=b(P,v,x,E),N=O(p.width*Y),$=!1,j=null,X=null,z=null,H=null;null==d||0!=N&&null==h||($=!0,j=d.values(e,t,s,f),X=new Map,new Set(j).forEach((e=>{null!=e&&X.set(e,new Path2D)})),N>0&&(z=h.values(e,t,s,f),H=new Map,new Set(z).forEach((e=>{null!=e&&H.set(e,new Path2D)}))));let{x0:B,size:V}=u,W=!0;if(null!=B&&null!=V){g=B.values(e,t,s,f),2==B.unit&&(g=g.map((t=>e.posToVal(w+t*S,_.key,!0))));let i=V.values(e,t,s,f);M=2==V.unit?i[0]*S:y(i[0],_,S,w)-y(0,_,S,w),N>=M/2&&(N=0),M=O(Pe(M-N,a,r)),D=1==L?-N/2:M+N/2}else{let e=S;if(g.length>1){let t=null;for(let i=0,n=1/0;i<g.length;i++)if(void 0!==m[i]){if(null!=t){let s=Ee(g[i]-g[t]);s<n&&(n=s,e=Ee(y(g[i],_,S,w)-y(g[t],_,S,w)))}t=i}}let t=e*l;M=e-t-n,N>=M/2&&(N=0),t+n<5&&(O=Ne),M=O(Pe(e-t,a,r)-N-n),D=(0==i?M/2:i==L?0:M)-i*L*n/2,M+N>e&&(W=!1)}const G={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:Pi|Ui};let q;0!=F&&(G.band=new Path2D,q=O(b(1==F?v.max:v.min,v,x,E)));const K=$?null:new Path2D,Z=G.band;let{y0:J,y1:Q}=u,ee=null;null!=J&&null!=Q&&(m=Q.values(e,t,s,f),ee=J.values(e,t,s,f));let te=A*M,ie=T*M;for(let i=1==L?s:f;i>=s&&i<=f;i+=L){let n=m[i];if(void 0===n)continue;let s=y(2!=_.distr||null!=u?g[i]:i,_,S,w),o=b(me(n,P),v,x,E);null!=ee&&null!=n&&(U=b(ee[i],v,x,E));let l=O(s-D),r=O(Oe(o,U)),a=O(Te(o,U)),c=r-a;if(null!=n){let s=n<0?ie:te,o=n<0?te:ie;$?(N>0&&null!=z[i]&&k(H.get(z[i]),l,a+Se(N/2),M,Oe(0,c-N),s,o),null!=j[i]&&k(X.get(j[i]),l,a+Se(N/2),M,Oe(0,c-N),s,o)):k(K,l,a+Se(N/2),M,Oe(0,c-N),s,o),C(e,t,i,l-N/2,a,M+N,c)}0==F||null==n&&!W||(I*F==1?(r=a,a=q):(a=r,r=q),c=r-a,k(Z,l-N/2,a,M+N,Oe(0,c),0,0))}return N>0?G.stroke=$?H:K:$||(G._fill=0==p.width?p._fill:p._stroke??p._fill,G.width=0),G.fill=$?X:K,G}))},e.spline=function(e){return function(e,t){const i=me(t?.alignGaps,0);return(t,n,s,o)=>Ni(t,n,((l,r,a,u,c,d,h,f,p,g,m)=>{let _,v,y,b=l.pxRound,w=e=>b(d(e,u,g,f)),E=e=>b(h(e,c,m,p));0==u.ori?(_=Vi,y=Gi,v=en):(_=Wi,y=qi,v=tn);const S=u.dir*(0==u.ori?1:-1);s=ae(a,s,o,1),o=ae(a,s,o,-1);let x=w(r[1==S?s:o]),A=x,T=[],O=[];for(let e=1==S?s:o;e>=s&&e<=o;e+=S)if(null!=a[e]){let t=w(r[e]);T.push(A=t),O.push(E(a[e]))}const L={stroke:e(T,O,_,y,v,b),fill:null,clip:null,band:null,gaps:null,flags:Pi},I=L.stroke;let[D,M]=$i(t,n);if(null!=l.fill||0!=D){let e=L.fill=new Path2D(I),i=E(l.fillTo(t,n,l.min,l.max,D));y(e,A,i),y(e,x,i)}if(!l.spanGaps){let e=[];e.push(...Hi(r,a,s,o,S,w,i)),L.gaps=e=l.gaps(t,n,s,o,e),L.clip=zi(e,u.ori,f,p,g,m)}return 0!=M&&(L.band=2==M?[Xi(t,n,s,o,I,-1),Xi(t,n,s,o,I,1)]:Xi(t,n,s,o,I,M)),L}))}(an,e)}}}}]);