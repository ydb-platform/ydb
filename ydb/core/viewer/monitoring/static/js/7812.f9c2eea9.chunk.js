(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[7812],{53366:(e,t,n)=>{"use strict";n.d(t,{N:()=>Ce});var i=n(34706),l=n(68045),s=n(72616),d=n(14561),a=n(6982);const r=e=>i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.5 6V5a2.5 2.5 0 0 0-5 0v1h5ZM4 5v1a3 3 0 0 0-3 3v3a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3V5a4 4 0 0 0-8 0Zm6.5 2.5H12A1.5 1.5 0 0 1 13.5 9v3a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 12V9A1.5 1.5 0 0 1 4 7.5h6.5Zm-1.75 2a.75.75 0 0 0-1.5 0v2a.75.75 0 0 0 1.5 0v-2Z",clipRule:"evenodd"}));var o=n(52519),c=n(11746),u=n(75813),m=n(23795),p=n(15178),I=n(14082),v=n(70610),b=n(15258),g=n(94078),f=n(23337),y=n(79777),h=n(87578);const S=(0,h.Ge)("list-container-view"),x=i.forwardRef((function(e,t){let{as:n="div",role:l="listbox",children:s,id:d,className:a,fixedHeight:r,extraProps:o,qa:c,style:u}=e;return i.createElement(y.k,Object.assign({qa:c,as:n,direction:"column",ref:t,grow:!0,tabIndex:-1,id:d,role:l,style:u,className:S({"fixed-height":r},a)},o),s)})),B=e=>null!==e&&"object"===typeof e&&"data"in e,E=(0,h.Ge)("list-recursive-renderer");function C(e){var t,{id:n,itemSchema:l,list:s}=e,d=(0,f._T)(e,["id","itemSchema","list"]);const a=d.children(n,s.structure.idToFlattenIndex[n]);if(B(l)&&l.children){const e=!s.state.expandedById||!(n in s.state.expandedById)||s.state.expandedById[n];return i.createElement("ul",{style:d.style,className:E(null,d.className),role:"group"},a,e&&Boolean(null===(t=s.structure.groupsState[n])||void 0===t?void 0:t.childrenIds)&&l.children.map(((e,t)=>i.createElement(C,Object.assign({list:s,id:s.structure.groupsState[n].childrenIds[t],itemSchema:e,key:t},d)))))}return a}function O(e){var{containerRef:t,renderItem:n,list:l}=e,s=(0,f._T)(e,["containerRef","renderItem","list"]);return i.createElement(x,Object.assign({ref:t},s),l.structure.items.map(((e,t)=>i.createElement(C,{key:t,itemSchema:e,id:l.structure.rootIds[t],list:l},n))))}const w=e=>{let{list:t,multiple:n}=e;return e=>{let{id:i}=e;t.state.disabledById[i]||(t.state.setActiveItemId(i),t.state.expandedById&&i in t.state.expandedById&&t.state.setExpanded?t.state.setExpanded((e=>Object.assign(Object.assign({},e),{[i]:!e[i]}))):t.state.setSelected((e=>Object.assign(Object.assign({},n?e:{}),{[i]:!n||!e[i]}))))}};var j=n(59143);const k=e=>{let{list:t,index:n,step:i,disabledItemsById:l={}}=e;const s=t.length;let d=(n+s)%s;for(let a=0;a<s;a+=1){const e=t[d];if(e&&!l[e])return d;d=(d+s+i)%s}},R="data-list-item",N={s:[22,44],m:[26,44],l:[34,52],xl:[44,62]},F=(e,t)=>{var n;if(document){const i=(t||document).querySelector(`[${R}="${e}"]`);i&&(null===(n=i.scrollIntoView)||void 0===n||n.call(i,{block:"nearest"}))}};var P=n(1713),T=n(43334),D=n(85996);const _=e=>i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),i.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.03 10.53a.75.75 0 0 1-1.06 0L8 6.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06Z",clipRule:"evenodd"}));var V=n(24840);const z=(0,h.Ge)("list-item-view"),M=e=>"object"===typeof e&&null!==e&&"title"in e,L=e=>{var{children:t,indentation:n=1,className:l}=e,s=(0,f._T)(e,["children","indentation","className"]);return i.createElement(y.k,Object.assign({width:16*n,className:z("slot",l)},s),t)},q=e=>{let{startSlot:t,subtitle:n,endSlot:l,disabled:s,hasSelectionIcon:a,isGroup:r,indentation:o,expanded:c,selected:u,title:p}=e;return i.createElement(y.k,{alignItems:"center",justifyContent:"space-between",gap:"4",className:z("content")},i.createElement(y.k,{gap:"2",alignItems:"center",grow:!0},a&&i.createElement(L,null,u?i.createElement(d.J,{data:T.Z,size:16,className:(0,V.V)({color:"info"})}):null),(e=>e&&e>=1?i.createElement(L,{indentation:Math.floor(e)}):null)(o),r?i.createElement(d.J,{className:z("icon",(0,V.V)({color:s?"hint":void 0})),data:c?D.Z:_,size:16}):null,t,i.createElement("div",{className:z("main-content")},"string"===typeof p?i.createElement(m.x,{ellipsis:!0,color:s?"hint":void 0,variant:r?"subheader-1":void 0},p):p,"string"===typeof n?i.createElement(m.x,{ellipsis:!0,color:s?"hint":"secondary"},n):n)),l)},A=i.forwardRef((function(e,t){var{id:n,as:l,size:s="m",active:d,selected:a,disabled:r,selectionViewType:o="multiple",activeOnHover:c,className:u,height:m,dragging:p,style:I,content:v,role:b="option",onClick:g}=e,y=(0,f._T)(e,["id","as","size","active","selected","disabled","selectionViewType","activeOnHover","className","height","dragging","style","content","role","onClick"]);const h=l||"li",S=r?void 0:g,x="boolean"===typeof c?c:Boolean(S),B=Object.assign({minHeight:`var(--g-list-item-height, ${null!==m&&void 0!==m?m:N[s][Number(Boolean(!!M(v)&&(null===v||void 0===v?void 0:v.subtitle)))]}px)`},I);return i.createElement(h,Object.assign({[R]:n,role:b,"aria-selected":a,onClick:S,className:z({active:p||d,selected:a&&"single"===o,activeOnHover:x,radius:s,size:s,dragging:p,clickable:Boolean(S)},(0,P.W)({px:2},u)),style:B,ref:t},y),M(v)?i.createElement(q,Object.assign({},v,{hasSelectionIcon:"multiple"===o,selected:a,disabled:r})):v)})),$=(0,h.Ge)("tree-list"),U=e=>{let{qa:t,id:n,size:l="m",className:s,list:d,multiple:a,containerRef:r,renderItem:o,renderContainer:u=O,onItemClick:m,mapItemDataToContentProps:p}=e;const I=(0,c.u)(),v=null!==n&&void 0!==n?n:I,b=i.useRef(null),g=null!==r&&void 0!==r?r:b,f=i.useMemo((()=>{if(null===m)return;return(e,t)=>{const n={id:e.id,list:d};if(m)null===m||void 0===m||m(n,t);else{w({list:d,multiple:a})(n,t)}}}),[m,d,a]);(e=>{let{containerRef:t,onItemClick:n,enabled:l,list:s}=e;const d=i.useCallback((function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var i,l;"number"===typeof e&&s.structure.visibleFlattenIds[e]&&(n&&F(s.structure.visibleFlattenIds[e],null===t||void 0===t?void 0:t.current),null===(l=(i=s.state).setActiveItemId)||void 0===l||l.call(i,s.structure.visibleFlattenIds[e]))}),[s.structure.visibleFlattenIds,s.state,t]),a=i.useCallback((function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.preventDefault();const i="string"===typeof s.state.activeItemId?s.structure.visibleFlattenIds.findIndex((e=>e===s.state.activeItemId)):-1,l=k({list:s.structure.visibleFlattenIds,index:(i>-1?i:n)+t,step:Math.sign(t),disabledItemsById:s.state.disabledById});d(l)}),[d,s.state.activeItemId,s.state.disabledById,s.structure.visibleFlattenIds]);i.useLayoutEffect((()=>{const e=null===t||void 0===t?void 0:t.current;if(l||!e)return;const i=e=>{switch(e.key){case j.V.ARROW_DOWN:a(e,1,-1);break;case j.V.ARROW_UP:a(e,-1);break;case j.V.SPACEBAR:case j.V.ENTER:s.state.activeItemId&&!s.state.disabledById[s.state.activeItemId]&&(e.preventDefault(),null===n||void 0===n||n({id:s.state.activeItemId}))}};return e.addEventListener("keydown",i),()=>{e.removeEventListener("keydown",i)}}),[t,l,a,s.state.activeItemId,s.state.disabledById,n])})({containerRef:g,onItemClick:f,list:d});return u({qa:t,id:`list-${v}`,size:l,containerRef:g,className:$(null,s),list:d,renderItem:(e,n,s)=>{const r=(e=>{let{qa:t,list:n,onItemClick:i,mapItemDataToContentProps:l,size:s="m",multiple:d=!1,id:a}=e;var r,o;const c=Object.assign(Object.assign(Object.assign({},n.structure.itemsState[a]),n.structure.groupsState[a]),{isLastItem:a===n.structure.visibleFlattenIds[n.structure.visibleFlattenIds.length-1]}),u={id:a,size:s,selected:Boolean(n.state.selectedById[a]),disabled:Boolean(null===(r=n.state.disabledById)||void 0===r?void 0:r[a]),active:a===n.state.activeItemId,onClick:i?e=>i({id:a},e):void 0,selectionViewType:Boolean(d)&&!c.childrenIds?"multiple":"single",content:Object.assign({expanded:null===(o=n.state.expandedById)||void 0===o?void 0:o[a],indentation:c.indentation,isGroup:n.state.expandedById&&a in n.state.expandedById},l(n.structure.itemsById[a]))};return t&&(u.qa=((e,t)=>`${e}-${t}`)(t,a)),{data:n.structure.itemsById[a],props:u,context:c}})({qa:t,id:e,size:l,multiple:a,mapItemDataToContentProps:p,onItemClick:f,list:d});return o?o({id:e,data:r.data,props:r.props,context:r.context,index:n,renderContainerProps:s,list:d}):i.createElement(A,Object.assign({},r.props,s))}})};var Z=n(99474),W=n(61784),G=n(56952);const J=e=>{let{item:t,groupedId:n,getItemId:i}=e,l=n;return"function"===typeof i?l=i(B(t)?t.data:t):t&&"object"===typeof t&&"id"in t&&t.id&&(l=t.id),l},H=(e,t)=>t?`${t}-${e}`:`${e}`,K=e=>e.split("-");function X(e){let{items:t,expandedById:n,getItemId:l}=e;const s=i.useMemo((()=>function(e){let{items:t,getItemId:n,expandedById:i={}}=e;const l=[],s=(e,t,d,a)=>{const r=H(d,a),o=J({groupedId:r,item:t,getItemId:n});return a||l.push(o),e.push(o),B(t)&&t.children&&(o in i&&!i[o]||e.push(...t.children.reduce(((e,t,n)=>s(e,t,n,o)),[]))),e},d=t.reduce(((e,t,n)=>s(e,t,n)),[]),a={};for(const[r,o]of d.entries())a[o]=r;return{rootIds:l,visibleFlattenIds:d,idToFlattenIndex:a}}({items:t,expandedById:n,getItemId:l})),[t,n,l]);return s}function Y(e){let{items:t,defaultExpandedState:n="expanded",getItemId:i}=e;const l={itemsById:{},groupsState:{},itemsState:{},initialState:{disabledById:{},selectedById:{},expandedById:{}}},s=e=>{let{item:t,index:d,parentGroupedId:a,parentId:r}=e;const o=H(d,a),c=J({groupedId:o,item:t,getItemId:i});r&&l.groupsState[r].childrenIds.push(c),l.itemsById[c]=t.data,l.itemsState[c]||(l.itemsState[c]={indentation:0}),"undefined"!==typeof r&&(l.itemsState[c].parentId=r),"undefined"!==typeof t.selected&&(l.initialState.selectedById[c]=t.selected),"undefined"!==typeof t.disabled&&(l.initialState.disabledById[c]=t.disabled),o&&(l.itemsState[c].indentation=K(o).length-1),t.children&&(l.groupsState[c]={childrenIds:[]},l.initialState.expandedById&&("undefined"===typeof t.expanded?l.initialState.expandedById[c]="expanded"===n:l.initialState.expandedById[c]=t.expanded),t.children.forEach(((e,t)=>{s({item:e,index:t,parentGroupedId:o,parentId:c})})))};return t.forEach(((e,t)=>B(e)?s({item:e,index:t}):(e=>{let{item:t,index:n}=e;const s=J({groupedId:String(n),item:t,getItemId:i});l.itemsById[s]=t,l.itemsState[s]||(l.itemsState[s]={indentation:0}),t&&"object"===typeof t&&("selected"in t&&"boolean"===typeof t.selected&&(l.initialState.selectedById[s]=t.selected),"disabled"in t&&"boolean"===typeof t.disabled&&(l.initialState.disabledById[s]=t.disabled))})({item:e,index:t}))),l}const Q=e=>{let{items:t,getItemId:n,defaultExpandedState:l="expanded",withExpandedState:s=!0,initialState:d,controlledState:a}=e;const{itemsById:r,groupsState:o,itemsState:c,initialState:u}=function(e){let{items:t,getItemId:n,defaultExpandedState:l}=e;const s=i.useRef(n).current;return i.useMemo((()=>Y({items:t,getItemId:s,defaultExpandedState:l})),[s,l,t])}({items:t,getItemId:n,defaultExpandedState:l}),m=(e=>{let{initialState:t,withExpandedState:n}=e;const l=i.useRef(t),s=l.current!==t;l.current=t;const[d,a]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.disabledById)&&void 0!==e?e:{}})),[r,o]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.selectedById)&&void 0!==e?e:{}})),[c,u]=i.useState((()=>{var e;return null!==(e=null===t||void 0===t?void 0:t.expandedById)&&void 0!==e?e:{}})),[m,p]=i.useState((()=>null===t||void 0===t?void 0:t.activeItemId));s&&((null===t||void 0===t?void 0:t.disabledById)&&a((e=>Object.assign(Object.assign({},t.disabledById),e))),(null===t||void 0===t?void 0:t.selectedById)&&o((e=>Object.assign(Object.assign({},t.selectedById),e))),(null===t||void 0===t?void 0:t.expandedById)&&u((e=>Object.assign(Object.assign({},t.expandedById),e))),p((e=>null!==e&&void 0!==e?e:null===t||void 0===t?void 0:t.activeItemId)));const I={disabledById:d,selectedById:r,activeItemId:m,setDisabled:a,setSelected:o,setActiveItemId:p};return n&&(I.expandedById=c,I.setExpanded=u),I})({initialState:i.useMemo((()=>({expandedById:Object.assign(Object.assign({},u.expandedById),null===d||void 0===d?void 0:d.expandedById),selectedById:Object.assign(Object.assign({},u.selectedById),null===d||void 0===d?void 0:d.selectedById),disabledById:Object.assign(Object.assign({},u.disabledById),null===d||void 0===d?void 0:d.disabledById),activeItemId:null===d||void 0===d?void 0:d.activeItemId})),[u.disabledById,u.expandedById,u.selectedById,null===d||void 0===d?void 0:d.activeItemId,null===d||void 0===d?void 0:d.disabledById,null===d||void 0===d?void 0:d.expandedById,null===d||void 0===d?void 0:d.selectedById]),withExpandedState:s}),p=i.useMemo((()=>a?Object.assign(Object.assign({},m),a):m),[a,m]),{visibleFlattenIds:I,idToFlattenIndex:v,rootIds:b}=X({items:t,expandedById:p.expandedById,getItemId:n});return{state:p,structure:{rootIds:b,items:t,visibleFlattenIds:I,idToFlattenIndex:v,itemsById:r,groupsState:o,itemsState:c}}},ee=e=>{let{defaultValue:t=[],value:n,onUpdate:l}=e;const[s,d]=i.useState(t),a=null!==n&&void 0!==n?n:s,r=!n;return i.useMemo((()=>{const e=a.reduce(((e,t)=>(e[t]=!0,e)),{});return{value:a,selectedById:e,setSelected:t=>{const n=(e=>Object.entries(e).reduce(((e,t)=>{let[n,i]=t;return i&&e.push(n),e}),[]))("function"===typeof t?t(e):t);r?d(n):null===l||void 0===l||l(n)},setInnerValue:r?d:void 0}}),[l,r,a])},te=(0,h.Ge)("tree-select"),ne=e=>i.createElement(A,Object.assign({},e.props,e.renderContainerProps)),ie=i.forwardRef((function(e,t){let{id:n,qa:l,title:s,placement:d,slotBeforeListBody:a,slotAfterListBody:r,size:o="m",defaultOpen:u,width:m,containerRef:f,className:y,containerClassName:h,popupClassName:S,open:x,multiple:B,popupWidth:E,popupDisablePortal:C,items:O,value:j,defaultValue:k,placeholder:R,disabled:N=!1,withExpandedState:F=!0,defaultExpandedState:P="expanded",hasClear:T,errorMessage:D,errorPlacement:_,validationState:V,onClose:z,onOpenChange:M,onUpdate:L,renderControl:q,renderItem:A=ne,renderContainer:$,mapItemDataToContentProps:J,onFocus:H,onBlur:K,getItemId:X,onItemClick:Y}=e;const ie=(0,G.X)(),le=(0,c.u)(),se=null!==n&&void 0!==n?n:le,de=`tree-select-popup-${se}`,ae=i.useRef(null),re=i.useRef(null),oe=i.useRef(null),ce=null!==f&&void 0!==f?f:oe,{errorMessage:ue,errorPlacement:me,validationState:pe}=(0,W.II)({errorMessage:D,errorPlacement:_||"outside",validationState:V}),Ie=(0,c.u)(),ve="invalid"===pe,be=ve&&Boolean(ue)&&"outside"===me,ge=ve&&Boolean(ue)&&"inside"===me,fe=(0,p.c)(t,re),{toggleOpen:ye,open:he}=(0,v.Z)({defaultOpen:u,onClose:z,onOpenChange:M,open:x}),{value:Se,selectedById:xe,setSelected:Be}=ee({value:j,defaultValue:k,onUpdate:L}),Ee=Q({controlledState:{selectedById:xe,setSelected:Be},items:O,getItemId:X,defaultExpandedState:P,withExpandedState:F}),Ce=i.useMemo((()=>{if(null===Y)return;return(e,t)=>{const n={id:e.id,list:Ee};if(Y)null===Y||void 0===Y||Y(n,t);else{w({list:Ee,multiple:B})(n,t);const i=Ee.state.expandedById&&e.id in Ee.state.expandedById;B||i||ye(!1)}}}),[Y,Ee,B,ye]);i.useLayoutEffect((()=>{var e;return he&&(null===(e=ce.current)||void 0===e||e.focus({preventScroll:!0})),()=>Ee.state.setActiveItemId(void 0)}),[he]);const Oe=i.useCallback((()=>ye(!1)),[ye]),{focusWithinProps:we}=(0,I.L)({onFocusWithin:H,onBlurWithin:i.useCallback((e=>{null===K||void 0===K||K(e),Oe()}),[Oe,K])}),je={list:Ee,open:he,placeholder:R,toggleOpen:ye,clearValue:()=>Ee.state.setSelected({}),ref:fe,size:o,value:Se,disabled:N,id:se,activeItemId:Ee.state.activeItemId,title:s,errorMessage:ge?ue:void 0,errorPlacement:me,validationState:pe,hasClear:T,isErrorVisible:ve},ke=q?q(je):i.createElement(b.Y,Object.assign({},je,{selectedOptionsContent:i.Children.toArray(Se.map((e=>e in Ee.structure.itemsById?J(Ee.structure.itemsById[e]).title:""))).join(", "),view:"normal",pin:"round-round",popupId:de,selectId:se})),Re=Object.assign({},"max"===m&&{width:m}),Ne={};return"number"===typeof m&&(Ne.width=m),i.createElement("div",Object.assign({ref:ae},we,{className:te(Re,y),style:Ne}),ke,i.createElement(g.h,{ref:ae,className:te("popup",{size:o},S),controlRef:re,width:E,placement:d,open:he,handleClose:Oe,disablePortal:C,mobile:ie,id:de},a,i.createElement(U,{list:Ee,size:o,className:te("list",h),qa:l,multiple:B,id:`list-${se}`,containerRef:ce,onItemClick:Ce,renderContainer:$,mapItemDataToContentProps:J,renderItem:null!==A&&void 0!==A?A:ne}),r),i.createElement(Z.Z,{errorMessage:be?ue:null,errorMessageId:Ie}))}));var le=n(86357),se=n(58399),de=n.n(se);function ae(e,t){return!t||"object"!==typeof t||!("title"in t)||"string"!==typeof t.title||t.title.toLowerCase().includes((e||"").toLowerCase())}function re(e){let{items:t,initialFilterValue:n="",filterItem:l,onFilterChange:s,filterItems:d,debounceTimeout:a=300}=e;const r=i.useRef(null),[o,c]=i.useState(n),[u,m]=i.useState(t),[p,I]=i.useState(t),v=i.useCallback(((e,t)=>{if(d)return()=>d(e,t);if(e){const n=l||ae;return()=>function(e,t){const n=(e,i)=>{if(B(i)&&i.children){const l=i.children.reduce(n,[]);l.length?e.push(Object.assign(Object.assign({},i),{data:i.data,children:l})):t(i.data)&&e.push(Object.assign(Object.assign({},i),{data:i.data,children:[]}))}else if(B(i)&&t(i.data)){const{children:t}=i,n=(0,f._T)(i,["children"]);e.push(n)}else!B(i)&&t(i)&&e.push(i);return e};return e.reduce(n,[])}(t,(t=>n(e,t)))}return()=>t}),[l,d]);t!==u&&(I(v(o,t)),m(t));const b=i.useCallback(de()((e=>I(v(e,t))),a),[I,v,t,a]),{onFilterUpdate:g,reset:y}=i.useMemo((()=>({reset:()=>{c(n),null===s||void 0===s||s(n),b(n)},onFilterUpdate:e=>{c(e),null===s||void 0===s||s(e),b(e)}})),[b,n,s]);return{filterRef:r,filter:o,reset:y,items:p,onFilterUpdate:g}}var oe=n(3581);const ce=JSON.parse('{"button_apply":"Apply","button_reset":"Reset","button_switcher":"Columns"}'),ue=JSON.parse('{"button_apply":"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c","button_reset":"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c","button_switcher":"\u041a\u043e\u043b\u043e\u043d\u043a\u0438"}'),me=(0,oe.e)({en:ce,ru:ue},"TableColumnSetupInner"),pe=(0,h.Ge)("inner-table-column-setup"),Ie=pe("controls"),ve=pe("filter-input"),be=pe("empty-placeholder"),ge={isDragDisabled:!0},fe=e=>({title:e.title}),ye=(e,t)=>"string"!==typeof t.title||t.title.toLowerCase().includes(e.trim().toLowerCase()),he=e=>{const{renderSwitcher:t,popupWidth:n,popupPlacement:p,items:I,onUpdate:v,sortable:b,renderControls:g,className:f,defaultItems:h=I,showResetButton:S,filterable:B,filterPlaceholder:E,filterEmptyMessage:C,filterSettings:O=ye}=e,[w,j]=i.useState(!1),[k,R]=i.useState(b),[N,F]=i.useState(b);b!==N&&(F(b),R(b));const[P,T]=i.useState(I),[D,_]=i.useState(I);I!==D&&(_(I),T(I));const V=re({items:P,filterItem:O,debounceTimeout:0}),z=()=>{const e=P.map((e=>{let{id:t,isSelected:n}=e;return{id:t,isSelected:n}}));v(e),U(!1)},M=()=>i.createElement(s.z,{view:"action",width:"max",onClick:z},me("button_apply")),L="function"===typeof S?S(P):S,q=(e=>{let{onDragEnd:t,renderControls:n}=e;const l=(0,c.u)();return e=>{let{renderItem:s,list:d,containerRef:a,id:r,className:c}=e;const{stickyStartItemIdList:u,sortableItemIdList:m,stickyEndItemIdList:p}=((e,t)=>{let n=0;for(;n!==t.length;n++){const i=e[t[n]];if("left"!==(null===i||void 0===i?void 0:i.sticky)&&"start"!==(null===i||void 0===i?void 0:i.sticky))break}let i=t.length;for(;0!==i;i--){const n=e[t[i-1]];if("right"!==(null===n||void 0===n?void 0:n.sticky)&&"end"!==(null===n||void 0===n?void 0:n.sticky))break}return{stickyStartItemIdList:t.slice(0,n),sortableItemIdList:t.slice(n,i),stickyEndItemIdList:t.slice(i)}})(d.structure.itemsById,d.structure.visibleFlattenIds),I=u.map(((e,t)=>s(e,t,ge))),v=m.map(((e,t)=>s(e,t+u.length))),b=p.map(((e,t)=>s(e,I.length+v.length+t,ge)));return i.createElement(i.Fragment,null,i.createElement(x,{ref:a,id:r,className:c},I,i.createElement(o.Z5,{onDragEnd:t},i.createElement(o.bK,{droppableId:l,renderClone:(e,t,n)=>{const i={provided:e,snapshot:t};return s(d.structure.visibleFlattenIds[n.source.index],n.source.index,i)}},(e=>i.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),v,e.placeholder)))),b),i.createElement("div",{className:Ie},n()))}})({onDragEnd:e=>{let{destination:t,source:n}=e;void 0!==(null===t||void 0===t?void 0:t.index)&&(null===t||void 0===t?void 0:t.index)!==n.index&&T((e=>((e,t,n)=>{const i=[...e],[l]=i.splice(t,1);return i.splice(n,0,l),i})(e,n.index,t.index)))},renderControls:()=>g?g({DefaultApplyButton:M,onApply:z}):i.createElement(y.k,{gapRow:1,direction:"column",className:Ie},L&&i.createElement(s.z,{onClick:()=>{T(h)},width:"max"},me("button_reset")),i.createElement(M,null))}),$=(e=>t=>{let{data:n,props:l,index:s,renderContainerProps:c}=t;const u=!1===e||!0===(null===c||void 0===c?void 0:c.isDragDisabled),m=u?void 0:i.createElement(d.J,{data:a.Z,size:16}),p=n.isRequired?i.createElement(d.J,{data:r}):void 0,I=!n.isRequired&&l.selected,v=Object.assign(Object.assign({},l),{selected:I,selectionViewType:n.isRequired?"single":"multiple",content:Object.assign(Object.assign({},l.content),{startSlot:p,endSlot:m})});if(u)return i.createElement(A,Object.assign({},v,{key:v.id}));const b=(e,t)=>i.createElement(A,Object.assign({},v,e.draggableProps,e.dragHandleProps,{ref:e.innerRef,dragging:t.isDragging}));return(null===c||void 0===c?void 0:c.provided)&&c.snapshot?b(c.provided,c.snapshot):i.createElement(o._l,{draggableId:l.id,index:s,key:`item-key-${l.id}`,isDragDisabled:u},b)})(k),U=e=>{j(e),!1===e&&(T(I),R(b),V.reset())},Z=i.useMemo((()=>(e=>{const t=[];return e.forEach((e=>{let{id:n,isSelected:i}=e;i&&t.push(n)})),t})(P)),[P]),W=(G=C,()=>i.createElement(m.x,{className:be},G));var G;const J=B?i.createElement(le.o,{size:"m",view:"clear",placeholder:E,value:V.filter,className:ve,onUpdate:e=>{V.onFilterUpdate(e),R(!e.length)},hasClear:!0}):null,H=V.filter&&!V.items.length?W:q;return i.createElement(ie,{className:pe(null,f),mapItemDataToContentProps:fe,multiple:!0,size:"l",open:w,value:Z,items:V.filter?V.items:P,onUpdate:e=>{T((t=>t.map((t=>Object.assign(Object.assign({},t),{isSelected:t.isRequired||e.includes(t.id)})))))},popupWidth:n,onOpenChange:U,placement:p,slotBeforeListBody:J,renderContainer:H,renderControl:e=>{let{toggleOpen:n}=e;const a=(0,u.S)(n);return(null===t||void 0===t?void 0:t({onClick:n,onKeyDown:a}))||i.createElement(s.z,{onClick:n,extraProps:{onKeyDown:a}},i.createElement(d.J,{data:l.Z}),me("button_switcher"))},renderItem:$})},Se=JSON.parse('{"button_switcher":"Columns"}'),xe=JSON.parse('{"button_switcher":"\u041a\u043e\u043b\u043e\u043d\u043a\u0438"}'),Be=(0,oe.e)({en:Se,ru:xe},"TableColumnSetup"),Ee=(0,h.Ge)("table-column-setup"),Ce=e=>{const{switcher:t,renderSwitcher:n,disabled:a,popupWidth:r,popupPlacement:o,className:c,items:u,sortable:m=!0,showStatus:p,onUpdate:I}=e,v=u.map((e=>{let{id:t,title:n,required:i,selected:l,sticky:s}=e;return{id:t,title:n,isRequired:i,isSelected:l,sticky:s}}));return i.createElement(he,{items:v,onUpdate:e=>{I(e.map((e=>{let{id:t,isSelected:n}=e;const i=u.find((e=>e.id===t));return{id:t,selected:n,title:null===i||void 0===i?void 0:i.title,required:null===i||void 0===i?void 0:i.required}})))},popupPlacement:o,popupWidth:r,renderSwitcher:e=>(null===n||void 0===n?void 0:n(e))||t||i.createElement(s.z,{disabled:a,onClick:e.onClick},i.createElement(d.J,{data:l.Z}),Be("button_switcher"),(()=>{if(!p)return null;const e=`${u.reduce(((e,t)=>t.selected?e+1:e),0)}/${u.length}`;return i.createElement("span",{className:Ee("status")},e)})()),sortable:m,className:Ee(null,c)})}},53216:(e,t,n)=>{"use strict";n.d(t,{F:()=>l});var i=n(8349);function l(){return(0,i.T)().theme}},78171:(e,t,n)=>{var i=n(28406),l=/[\\^$.*+?()[\]{}|]/g,s=RegExp(l.source);e.exports=function(e){return(e=i(e))&&s.test(e)?e.replace(l,"\\$&"):e}}}]);