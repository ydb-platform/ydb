"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[8667],{91816:(e,s,t)=>{t.d(s,{b:()=>c});var r=t(68963),a=t(56711),l=t(24362),n=t(42587),o=t(75859);const i=(0,l.cn)("ydb-info-viewer-skeleton"),d=()=>(0,o.jsxs)("div",{className:i("label"),children:[(0,o.jsx)(a.O,{className:i("label__text")}),(0,o.jsx)("div",{className:i("label__dots")})]}),c=e=>{let{rows:s=8,className:t,delay:l=600}=e;const c=(0,n.$)(l);let u=(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)(d,{}),(0,o.jsx)(a.O,{className:i("value")})]});return c||(u=null),(0,o.jsx)("div",{className:i(null,t),children:[...new Array(s)].map(((e,s)=>(0,o.jsx)("div",{className:i("row"),children:u},"skeleton-row-".concat(s))))})}},63104:(e,s,t)=>{t.d(s,{Y:()=>v});var r=t(54665),a=t(24362),l=t(52317),n=t(94790),o=t(74170),i=t(42784),d=t(27506),c=t(75859);const u=(0,a.cn)("tablet"),v=e=>{var s;let{tablet:t={},tenantName:a}=e;const{TabletId:v,NodeId:m,Type:h}=t,p=null===(s=t.Overall)||void 0===s?void 0:s.toLowerCase(),x=v&&(0,r.fK)(v,{nodeId:m,tenantName:a,type:h});return(0,c.jsx)(n.f,{className:u("wrapper"),content:(0,c.jsx)(d.Fb,{data:t,className:u("popup-content")}),children:(0,c.jsx)(o.h,{to:x,children:(0,c.jsx)(i.v,{className:u({status:p}),text:(0,l.qV)(t.Type)})})})}},12199:(e,s,t)=>{t.d(s,{$:()=>i});var r=t(24362),a=t(75859);const l=(0,r.cn)("tag"),n=e=>{let{text:s,type:t}=e;return(0,a.jsx)("div",{className:l({type:t}),children:s})},o=(0,r.cn)("tags"),i=e=>{let{tags:s,tagsType:t,className:r=""}=e;return(0,a.jsx)("div",{className:o(null,r),children:s&&s.map(((e,s)=>(0,a.jsx)(n,{text:e,type:t},s)))})}},33091:(e,s,t)=>{t.r(s),t.d(s,{Cluster:()=>Me});var r=t(68963),a=t(56711),l=t(8179),n=t(49352),o=t(86974),i=t(52846),d=t(50422),c=t(69214),u=t(74170),v=t(54665),m=t(77915),h=t(51688);const p=t(905).h.injectEndpoints({endpoints:e=>({getClusterNodes:e.query({queryFn:async()=>{try{const e=await window.api.getClusterNodes(),{SystemStateInfo:s=[]}=e;return{data:s.map(h.Ns)}}catch(e){return{error:e}}},providesTags:["All"]})}),overrideExisting:"throw"});var x=t(79061),j=t(24362),g=t(52317),N=t(17096),b=t(94076),y=t(30601);const T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1?arguments[1]:void 0;const t=e.reduce(((e,s)=>(s.Version&&(e[s.Version]?e[s.Version]=e[s.Version]+1:e[s.Version]=1),e)),{});return Object.keys(t).map((r=>({title:r,version:r,color:null===s||void 0===s?void 0:s.get((0,y.H)(r)),value:t[r]/e.length*100})))};var C=t(2335),w=t(70885),f=t(19812),P=t(17176),S=t(36985),E=t(26688),k=t(56350),O=t(68242),L=t(74221),A=t(2098),D=t(11551),V=t(47101),I=t(27102),z=t(80839),G=t(36313),Z=t(43680),M=t.n(Z),F=t(75850),R=t(53809);const B=(0,G.P1)((e=>e),(e=>R.Xv.endpoints.getTenantsInfo.select({clusterName:e}))),H=(0,G.P1)((e=>e),((e,s)=>B(s)),((e,s)=>{var t;return null!==(t=s(e).data)&&void 0!==t?t:[]})),U=e=>e.tenants.searchValue,W=(0,G.P1)([H,z.qz,U,e=>(0,z.Cx)(e,g.Zy)],((e,s,t,r)=>{let a=((e,s)=>s===z.pu.ALL?e:e.filter((e=>e.Overall&&e.Overall!==F.K.Green)))(e,s);return a=((e,s)=>e.filter((e=>{const t=new RegExp(M()(s),"i");return t.test(e.Name||"")||t.test(e.controlPlaneName)})))(a,t),a=!r&&a.length>1?a.filter((e=>"Domain"!==e.Type)):a,a}));var q=t(34301),_=t(95478),Q=t(75859);const Y=(0,j.cn)("tenants"),K=e=>{let{additionalTenantsProps:s}=e;const t=(0,N.zL)(),[a]=(0,N.Rj)(),{currentData:l,isFetching:n,error:o}=R.Xv.useGetTenantsInfoQuery({clusterName:I.qw},{pollingInterval:a}),i=n&&void 0===l,d=null!==l&&void 0!==l?l:[],u=(0,N.ix)(U),v=(0,N.ix)((e=>W(e,I.qw))),m=(0,N.ix)(z.qz),h=e=>{t((0,z.M6)(e))},p=e=>{t((0,R.gI)(e))};return(0,Q.jsxs)(V.l,{children:[(0,Q.jsx)(V.l.Controls,{children:(0,Q.jsxs)(r.Fragment,{children:[(0,Q.jsx)(D.o,{value:u,onChange:p,placeholder:"Database name",className:Y("search")}),(0,Q.jsx)(L.T,{value:m,onChange:h}),(0,Q.jsx)(S.C,{total:d.length,current:(null===v||void 0===v?void 0:v.length)||0,label:"Databases",loading:i})]})}),o?(0,Q.jsx)(E.V,{error:o}):null,(0,Q.jsx)(V.l.Table,{loading:i,children:l?(()=>{const e=[{name:"Name",header:"Database",render:e=>{var t;let{row:r}=e;const a=(e=>{var t,r;const a=null!==(t=e.MonitoringEndpoint)&&void 0!==t?t:e.backend;return null===s||void 0===s||null===(r=s.prepareTenantBackend)||void 0===r?void 0:r.call(s,a)})(r),l=Boolean(a);return(0,Q.jsx)(c.A,{externalLink:l,className:Y("name"),name:r.Name||"unknown database",withLeftTrim:!0,status:r.Overall,hasClipboardButton:!0,path:(0,_.Sj)({name:r.Name,backend:a}),additionalControls:null===s||void 0===s||null===(t=s.getMonitoringLink)||void 0===t?void 0:t.call(s,r.Name,r.Type)})},width:440,sortable:!0,defaultOrder:f.ZP.DESCENDING},{name:"controlPlaneName",header:"Name",render:e=>{let{row:s}=e;return s.controlPlaneName},width:200,sortable:!0,defaultOrder:f.ZP.DESCENDING},{name:"Type",width:200,resizeMinWidth:150,render:e=>{let{row:s}=e;return"Serverless"!==s.Type?s.Type:(0,Q.jsxs)("div",{className:Y("type"),children:[(0,Q.jsx)("span",{className:Y("type-value"),children:s.Type}),(0,Q.jsx)(P.z,{className:Y("type-button"),onClick:()=>p(s.sharedTenantName||""),children:"Show shared"})]})}},{name:"State",width:90,render:e=>{let{row:s}=e;return s.State?s.State.toLowerCase():"\u2014"},customStyle:()=>({textTransform:"capitalize"})},{name:"cpu",header:"CPU",width:80,render:e=>{let{row:s}=e;return s.cpu&&s.cpu>1e4?(0,q.LO)(s.cpu):"\u2014"},align:f.ZP.RIGHT,defaultOrder:f.ZP.DESCENDING},{name:"memory",header:"Memory",width:120,render:e=>{let{row:s}=e;return s.memory?(0,q.q3)(s.memory):"\u2014"},align:f.ZP.RIGHT,defaultOrder:f.ZP.DESCENDING},{name:"storage",header:"Storage",width:120,render:e=>{let{row:s}=e;return s.storage?(0,q.q3)(s.storage):"\u2014"},align:f.ZP.RIGHT,defaultOrder:f.ZP.DESCENDING},{name:"nodesCount",header:"Nodes",width:100,render:e=>{let{row:s}=e;return s.nodesCount?(0,q.uf)(s.nodesCount):"\u2014"},align:f.ZP.RIGHT,defaultOrder:f.ZP.DESCENDING},{name:"groupsCount",header:"Groups",width:100,render:e=>{let{row:s}=e;return s.groupsCount?(0,q.uf)(s.groupsCount):"\u2014"},align:f.ZP.RIGHT,defaultOrder:f.ZP.DESCENDING},{name:"PoolStats",header:"Pools",width:100,resizeMinWidth:60,sortAccessor:e=>{let{PoolStats:s=[]}=e;return s.reduce(((e,s)=>e+(s.Usage||0)),0)},defaultOrder:f.ZP.DESCENDING,align:f.ZP.LEFT,render:e=>{let{row:s}=e;return(0,Q.jsx)(O.m,{pools:s.PoolStats})}}];return 0===v.length&&m!==z.pu.ALL?(0,Q.jsx)(k.Q,{name:"thumbsUp",width:"200"}):(0,Q.jsx)(A.G,{columnsWidthLSKey:"databasesTableColumnsWidth",data:v,columns:e,settings:g.LE,emptyDataMessage:"No such tenants"})})():null})]})};var $=t(79734),J=t(48897),X=t(62776),ee=t(40067),se=t(67359),te=t(92398);const re=[{name:"NodeId",header:"#",width:80,resizeMinWidth:80,align:f.ZP.LEFT,render:e=>{let{row:s}=e;return s.NodeId}},{name:"Host",render:e=>{var s;let{row:t}=e;const r=t.Endpoints&&(null===(s=t.Endpoints.find((e=>"http-mon"===e.Name)))||void 0===s?void 0:s.Address),a=t.Host&&"".concat(t.Host).concat(r||"")||"unknown",l=!(0,h.TA)(t)&&t.NodeId?(0,te.a3)(t.NodeId):void 0;return(0,Q.jsx)(c.A,{name:a,path:l,hasClipboardButton:!0,showStatus:!1})},width:400,align:f.ZP.LEFT},{name:"Endpoints",sortable:!1,render:e=>{let{row:s}=e;return s.Endpoints?s.Endpoints.map((e=>{let{Name:s,Address:t}=e;return"".concat(s," ").concat(t)})).join(", "):"-"},width:300,align:f.ZP.LEFT},{name:"Uptime",header:"Uptime",sortAccessor:e=>{let{StartTime:s}=e;return s&&-s},width:120,align:f.ZP.LEFT,render:e=>{let{row:s}=e;return s.Uptime}},{name:"MemoryUsed",header:"Memory used",sortAccessor:e=>{let{MemoryUsed:s=0}=e;return Number(s)},defaultOrder:f.ZP.DESCENDING,render:e=>{let{row:s}=e;return s.MemoryUsed?(0,q.td)(s.MemoryUsed):"\u2014"},width:120,align:f.ZP.RIGHT},{name:"MemoryLimit",header:"Memory limit",sortAccessor:e=>{let{MemoryLimit:s=0}=e;return Number(s)},defaultOrder:f.ZP.DESCENDING,render:e=>{let{row:s}=e;return s.MemoryLimit?(0,q.td)(s.MemoryLimit):"\u2014"},width:120,align:f.ZP.RIGHT},{name:"PoolStats",header:"Pools",sortAccessor:e=>{let{PoolStats:s=[]}=e;return s.reduce(((e,s)=>e+(s.Usage||0)),0)},defaultOrder:f.ZP.DESCENDING,width:80,resizeMinWidth:60,render:e=>{let{row:s}=e;return s.PoolStats?(0,Q.jsx)(O.m,{pools:s.PoolStats}):"\u2014"},align:f.ZP.LEFT},{name:"LoadAverage",header:"Load average",sortAccessor:e=>{let{LoadAveragePercents:s=[]}=e;return s[0]},defaultOrder:f.ZP.DESCENDING,width:140,resizeMinWidth:140,render:e=>{let{row:s}=e;return s.LoadAveragePercents&&s.LoadAveragePercents.length>0?(0,Q.jsx)(se.y,{value:s.LoadAveragePercents[0],percents:!0,capacity:100,colorizeProgress:!0}):"\u2014"},align:f.ZP.LEFT}],ae=e=>{let{nodes:s}=e;return(0,Q.jsx)(A.G,{columnsWidthLSKey:"versionsTableColumnsWidth",data:s,columns:re,settings:g.LE})};var le=t(84893),ne=t(90861);const oe=(0,j.cn)("ydb-versions-nodes-tree-title"),ie=e=>{let s,{title:t,nodes:r,items:a,versionColor:l,versionsValues:n}=e;return s=a?a.reduce(((e,s)=>s.nodes?e+s.nodes.length:e),0):r?r.length:0,(0,Q.jsxs)("div",{className:oe("overview"),children:[(0,Q.jsxs)("div",{className:oe("overview-container"),children:[l?(0,Q.jsx)("div",{className:oe("version-color"),style:{background:l}}):null,t?(0,Q.jsxs)("span",{className:oe("overview-title"),children:[t,(0,Q.jsx)(ne.m,{text:t,size:"s",className:oe("clipboard-button")})]}):null]}),(0,Q.jsxs)("div",{className:oe("overview-info"),children:[(0,Q.jsxs)("div",{children:[(0,Q.jsx)("span",{className:oe("info-value"),children:s}),(0,Q.jsx)("span",{className:oe("info-label",{margin:"left"}),children:"Nodes"})]}),n?(0,Q.jsxs)("div",{className:oe("version-progress"),children:[(0,Q.jsx)("span",{className:oe("info-label",{margin:"right"}),children:"Versions"}),(0,Q.jsx)(le.E,{size:"s",value:100,stack:n})]}):null]})]})},de=(0,j.cn)("ydb-versions-grouped-node-tree"),ce=e=>{let{title:s,nodes:t,items:a,expanded:l=!1,versionColor:n,versionsValues:o,level:i=0}=e;const[d,c]=r.useState(!1);r.useEffect((()=>{c(l)}),[l]);const u=(0,Q.jsx)(ie,{title:s,nodes:t,items:a,versionColor:n,versionsValues:o}),v=()=>{c((e=>!e))};return a?(0,Q.jsx)("div",{className:de({"first-level":0===i}),children:(0,Q.jsx)(ee.L,{name:u,collapsed:!d,hasArrow:!0,onClick:v,onArrowClick:v,children:a.map(((e,s)=>(0,Q.jsx)(ce,{title:e.title,nodes:e.nodes,expanded:l,versionColor:e.versionColor,level:i+1},s)))},s)}):(0,Q.jsx)("div",{className:de({"first-level":0===i}),children:(0,Q.jsx)(ee.L,{name:u,collapsed:!d,hasArrow:!0,onClick:v,onArrowClick:v,children:(0,Q.jsx)("div",{className:de("dt-wrapper"),children:(0,Q.jsx)(ae,{nodes:t||[]})})},s)})};var ue=t(46754),ve=t.n(ue);let me;!function(e){e.VERSION="Version",e.TENANT="Database",e.STORAGE="Storage"}(me||(me={}));const he=(e,s)=>{var t;return(null===(t=e.title)||void 0===t?void 0:t.localeCompare(s.title||""))||-1},pe=(0,j.cn)("ydb-versions"),xe=e=>{let{versionToColor:s}=e;const[t]=(0,N.Rj)(),{data:a=[],isLoading:l}=p.useGetClusterNodesQuery(void 0,{pollingInterval:t}),[n,o]=r.useState(me.VERSION),[i,d]=r.useState(!1),c=e=>{o(e)};if(l)return(0,Q.jsx)(X.a,{});const u=((e,s,t)=>{if(e&&e.length){if(t===me.VERSION){const t=ve()(e,"Version");return Object.keys(t).map((e=>{const r=t[e].filter((e=>{let{Tenants:s}=e;return Boolean(s)})),a=ve()(r,"Tenants"),l=Object.keys(a).map((e=>({title:e,nodes:a[e]}))).sort(he);return l.length?{title:e,items:l,versionColor:null===s||void 0===s?void 0:s.get((0,y.H)(e))}:null})).filter((e=>Boolean(e)))}{const t=e.filter((e=>{let{Tenants:s}=e;return Boolean(s)})),r=ve()(t,"Tenants");return Object.keys(r).map((e=>{const t=T(r[e],s),a=ve()(r[e],"Version"),l=Object.keys(a).map((e=>({title:e,nodes:a[e],versionColor:null===s||void 0===s?void 0:s.get((0,y.H)(e))})));return l.length?{title:e,items:l,versionsValues:t}:null})).filter((e=>Boolean(e))).sort(he)}}})(a,s,n),v=((e,s)=>{if(!e||!e.length)return;const t=e.filter((e=>{let{Roles:s}=e;return null===s||void 0===s?void 0:s.includes("Storage")})),r=ve()(t,"Version");return Object.keys(r).map((e=>({title:e,nodes:r[e],versionColor:null===s||void 0===s?void 0:s.get((0,y.H)(e))})))})(a,s),m=((e,s)=>{if(!e||!e.length)return;const t=e.filter((e=>{let{Roles:s}=e;return!s})),r=ve()(t,"Version");return Object.keys(r).map((e=>({title:e,nodes:r[e],versionColor:null===s||void 0===s?void 0:s.get((0,y.H)(e))})))})(a,s),h=null!==v&&void 0!==v&&v.length?(0,Q.jsxs)(r.Fragment,{children:[(0,Q.jsx)("h3",{children:"Storage nodes"}),v.map((e=>{let{title:s,nodes:t,items:r,versionColor:a}=e;return(0,Q.jsx)(ce,{title:s,nodes:t,items:r,versionColor:a},"storage-nodes-".concat(s))}))]}):null,x=null!==u&&void 0!==u&&u.length?(0,Q.jsxs)(r.Fragment,{children:[(0,Q.jsx)("h3",{children:"Database nodes"}),(0,Q.jsxs)("div",{className:pe("controls"),children:[(0,Q.jsxs)("div",{className:pe("group"),children:[(0,Q.jsx)("span",{className:pe("label"),children:"Group by:"}),(0,Q.jsxs)($.E,{value:n,onUpdate:c,children:[(0,Q.jsx)($.E.Option,{value:me.TENANT,children:me.TENANT}),(0,Q.jsx)($.E.Option,{value:me.VERSION,children:me.VERSION})]})]}),(0,Q.jsx)(J.X,{className:pe("checkbox"),onChange:()=>d((e=>!e)),checked:i,children:"All expanded"})]}),u.map((e=>{let{title:s,nodes:t,items:r,versionColor:a,versionsValues:l}=e;return(0,Q.jsx)(ce,{title:s,nodes:t,items:r,expanded:i,versionColor:a,versionsValues:l},"tenant-nodes-".concat(s))}))]}):null,j=null!==m&&void 0!==m&&m.length?(0,Q.jsxs)(r.Fragment,{children:[(0,Q.jsx)("h3",{children:"Other nodes"}),m.map((e=>{let{title:s,nodes:t,items:r,versionColor:a,versionsValues:l}=e;return(0,Q.jsx)(ce,{title:s,nodes:t,items:r,versionColor:a,versionsValues:l},"other-nodes-".concat(s))}))]}):null;return(0,Q.jsxs)("div",{className:pe("versions"),children:[h,x,j]})};var je=t(94790),ge=t(23373),Ne=t(91816),be=t(32270),ye=t(63104),Te=t(12199),Ce=t(81854);const we=(0,j.cn)("ydb-cluster-versions-bar"),fe=e=>{let{versionsValues:s=[]}=e;return(0,Q.jsxs)("div",{className:we(),children:[(0,Q.jsx)(le.E,{value:100,stack:s,size:"s"}),(0,Q.jsx)("div",{className:we("versions"),children:s.map(((e,t)=>(0,Q.jsx)("div",{className:we("version-title"),style:{color:e.color},title:e.version,children:"".concat(e.version).concat(t===s.length-1?"":",")},e.version)))})]})};var Pe=t(30817);const Se=JSON.parse('{"disk-type":"Disk Type","erasure":"Erasure","allocated":"Allocated","available":"Available","usage":"Usage","dc":"DC","tablets":"Tablets","databases":"Databases","nodes":"Nodes","load":"Load","storage-size":"Storage size","storage-groups":"Storage groups, {{diskType}}","links":"Links","versions":"Versions"}'),Ee=JSON.parse('{"disk-type":"\u0422\u0438\u043f \u0434\u0438\u0441\u043a\u0430","erasure":"\u0420\u0435\u0436\u0438\u043c","allocated":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043e","available":"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e","usage":"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435","dc":"\u0414\u0426","tablets":"\u0422\u0430\u0431\u043b\u0435\u0442\u043a\u0438","databases":"\u0411\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445","nodes":"\u0423\u0437\u043b\u044b","load":"\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0430","storage-size":"\u0420\u0430\u0437\u043c\u0435\u0440 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430","storage-groups":"\u0413\u0440\u0443\u043f\u043f\u044b \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f, {{diskType}}","links":"\u0421\u0441\u044b\u043b\u043a\u0438","versions":"\u0412\u0435\u0440\u0441\u0438\u0438"}'),ke=(0,Pe.wZ)("ydb-cluster",{ru:Ee,en:Se});var Oe=t(28164);const Le=(e,s)=>e.Type===Oe.F.TxAllocator?1:s.Type===Oe.F.TxAllocator?-1:0,Ae=(0,j.cn)("cluster-info"),De=e=>{let{stats:s}=e;const{diskType:t,erasure:r,allocatedSize:a,availableSize:l}=s,n=(0,Ce.dT)(Math.max(a,l),2),o=(0,Ce.td)({value:a,size:n}),i=(0,Ce.td)({value:l,size:n}),d=Math.round(a/(a+l)*100),c=[{label:ke("disk-type"),value:t},{label:ke("erasure"),value:r},{label:ke("allocated"),value:o},{label:ke("available"),value:i},{label:ke("usage"),value:d+"%"}];return(0,Q.jsx)(ge.Z,{dots:!0,info:c,className:Ae("groups-stats-popup-content"),size:"s"})},Ve=e=>{let{stats:s}=e;return(0,Q.jsx)("div",{className:Ae("storage-groups-stats"),children:Object.values(s).map((e=>(0,Q.jsx)(je.f,{placement:["right"],content:(0,Q.jsx)(De,{stats:e}),children:(0,Q.jsx)(se.y,{className:Ae("groups-stats-bar"),value:e.createdGroups,capacity:e.totalGroups})},e.erasure)))})},Ie=(e,s,t,r,a)=>{const l=[];if(e.DataCenters&&l.push({label:ke("dc"),value:(0,Q.jsx)(Te.$,{tags:e.DataCenters})}),e.SystemTablets){const s=e.SystemTablets.slice(0).sort(Le);l.push({label:ke("tablets"),value:(0,Q.jsx)("div",{className:Ae("system-tablets"),children:s.map(((e,s)=>(0,Q.jsx)(ye.Y,{tablet:e},s)))})})}return e.Tenants&&l.push({label:ke("databases"),value:e.Tenants}),l.push({label:ke("nodes"),value:(0,Q.jsx)(se.y,{value:null===e||void 0===e?void 0:e.NodesAlive,capacity:null===e||void 0===e?void 0:e.NodesTotal})},{label:ke("load"),value:(0,Q.jsx)(se.y,{value:null===e||void 0===e?void 0:e.LoadAverage,capacity:null===e||void 0===e?void 0:e.NumberOfCpus})},{label:ke("storage-size"),value:(0,Q.jsx)(se.y,{value:null===e||void 0===e?void 0:e.StorageUsed,capacity:null===e||void 0===e?void 0:e.StorageTotal,formatValues:q.QO})}),Object.keys(t).length&&l.push(...(e=>Object.keys(e).map((s=>({label:ke("storage-groups",{diskType:s}),value:(0,Q.jsx)(Ve,{stats:e[s]})}))))(t)),l.push(...r,{label:ke("links"),value:(0,Q.jsx)("div",{className:Ae("links"),children:a.map((e=>{let{title:s,url:t}=e;return(0,Q.jsx)(be.j,{title:s,url:t},s)}))})},{label:ke("versions"),value:(0,Q.jsx)(fe,{versionsValues:s})}),l},ze=e=>{let{cluster:s,versionsValues:t=[],groupsStats:r={},loading:a,error:l,additionalClusterProps:n={}}=e;const o=(0,N.ix)((e=>e.singleClusterMode));let i=I.y3+"/internal";o&&!I.j4&&(i="/internal");const{info:d=[],links:c=[]}=n,u=Ie(null!==s&&void 0!==s?s:{},t,r,d,[{title:g.Ah,url:i},...c]);return(0,Q.jsxs)("div",{className:Ae(),children:[l?(0,Q.jsx)(E.V,{error:l,className:Ae("error")}):null,(0,Q.jsx)("div",{className:Ae("info"),children:a?(0,Q.jsx)(Ne.b,{className:Ae("skeleton"),rows:9}):l&&!s?null:(0,Q.jsx)(ge.Z,{dots:!0,info:u})})]})};var Ge=t(81003);const Ze=(0,j.cn)("cluster");function Me(e){var s,t;let{additionalClusterProps:h,additionalTenantsProps:j,additionalNodesProps:y,additionalVersionsProps:f}=e;const P=r.useRef(null),S=(0,N.zL)(),E=function(){const e=(0,N.zL)(),s=(0,N.ix)((e=>e.cluster.defaultClusterTab)),t=(0,o.$B)(v.ZP.cluster),{activeTab:a}=(null===t||void 0===t?void 0:t.params)||{};let l;l=(0,Ge.V2)(a)?a:s;return r.useEffect((()=>{l!==s&&e((0,m.LQ)(l))}),[l,s,e]),l}(),[{clusterName:k,backend:O}]=(0,i.useQueryParams)({clusterName:i.StringParam,backend:i.StringParam}),[L]=(0,N.Rj)(),{data:{clusterData:A={},groupsStats:D}={},isLoading:V,error:I}=m.UM.useGetClusterInfoQuery(null!==k&&void 0!==k?k:void 0,{pollingInterval:L}),z=I&&"object"===typeof I?I:void 0,{data:G=[],isLoading:Z}=p.useGetClusterNodesQuery(void 0),M=V||Z,{Name:F}=A;r.useEffect((()=>{S((0,x.J)("cluster",{}))}),[S,F]);const R=r.useMemo((()=>null!==f&&void 0!==f&&f.getVersionToColorMap?null===f||void 0===f?void 0:f.getVersionToColorMap():(0,b.ZP)(null===A||void 0===A?void 0:A.Versions)),[f,A]),B=r.useMemo((()=>T(G,R)),[G,R]),H=null!==(s=null!==(t=null===A||void 0===A?void 0:A.Name)&&void 0!==t?t:k)&&void 0!==s?s:g.DO,U=r.useMemo((()=>Ge._Y.find((e=>{let{id:s}=e;return s===E}))),[E]);return(0,Q.jsxs)("div",{className:Ze(),ref:P,children:[(0,Q.jsx)(n.ql,{defaultTitle:"".concat(H," \u2014 YDB Monitoring"),titleTemplate:"%s \u2014 ".concat(H," \u2014 YDB Monitoring"),children:U?(0,Q.jsx)("title",{children:U.title}):null}),(0,Q.jsx)("div",{className:Ze("header"),children:(()=>{var e;return M?(0,Q.jsx)(a.O,{className:Ze("title-skeleton")}):(0,Q.jsx)(c.A,{size:"m",status:null===A||void 0===A?void 0:A.Overall,name:null!==(e=null===A||void 0===A?void 0:A.Name)&&void 0!==e?e:g.DO,className:Ze("title")})})()}),(0,Q.jsx)("div",{className:Ze("tabs"),children:(0,Q.jsx)(l.m,{size:"l",allowNotSelected:!0,activeTab:E,items:Ge._Y,wrapTo:(e,s)=>{let{id:t}=e;const r=(0,Ge.B7)(t,{clusterName:k,backend:O});return(0,Q.jsx)(u.h,{to:r,onClick:()=>{S((0,m.LQ)(t))},children:s},t)}})}),(0,Q.jsxs)("div",{children:[(0,Q.jsx)("div",{className:Ze("sticky-wrapper"),children:(0,Q.jsx)(d.q,{className:Ze("auto-refresh-control")})}),(0,Q.jsxs)(o.rs,{children:[(0,Q.jsx)(o.AW,{path:(0,v.Fz)((0,Ge.B7)(Ge.xu.overview)).pathname,children:(0,Q.jsx)(ze,{cluster:A,groupsStats:D,versionsValues:B,loading:M,error:z,additionalClusterProps:h})}),(0,Q.jsx)(o.AW,{path:(0,v.Fz)((0,Ge.B7)(Ge.xu.tenants)).pathname,children:(0,Q.jsx)(K,{additionalTenantsProps:j})}),(0,Q.jsx)(o.AW,{path:(0,v.Fz)((0,Ge.B7)(Ge.xu.nodes)).pathname,children:(0,Q.jsx)(C.G,{parentContainer:P.current,additionalNodesProps:y})}),(0,Q.jsx)(o.AW,{path:(0,v.Fz)((0,Ge.B7)(Ge.xu.storage)).pathname,children:(0,Q.jsx)(w.V,{parentContainer:P.current,additionalNodesProps:y})}),(0,Q.jsx)(o.AW,{path:(0,v.Fz)((0,Ge.B7)(Ge.xu.versions)).pathname,children:(0,Q.jsx)(xe,{versionToColor:R})}),(0,Q.jsx)(o.AW,{render:()=>(0,Q.jsx)(o.l_,{to:(0,v.Fz)((0,Ge.B7)(E))})})]})]})]})}}}]);