"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[89177],{3685:(e,s,t)=>{t.d(s,{$:()=>o});var l=t(54090),n=t(77506),i=t(33775),a=t(60712);const r=(0,n.cn)("ydb-entity-page-title");function o({entityName:e,status:s=l.m.Grey,id:t,className:n}){return(0,a.jsxs)("div",{className:r(null,n),children:[(0,a.jsx)("span",{className:r("prefix"),children:e}),(0,a.jsx)(i.k,{className:r("icon"),status:s,size:"s"}),t]})}},18677:(e,s,t)=>{t.d(s,{A:()=>n});var l=t(59284);const n=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14M6.53 5.47a.75.75 0 0 0-1.06 1.06L6.94 8 5.47 9.47a.75.75 0 1 0 1.06 1.06L8 9.06l1.47 1.47a.75.75 0 1 0 1.06-1.06L9.06 8l1.47-1.47a.75.75 0 1 0-1.06-1.06L8 6.94z",clipRule:"evenodd"}))},22983:(e,s,t)=>{t.d(s,{B:()=>c});var l=t(59284),n=t(80136),i=t(58611),a=t(55974),r=t(42829),o=t(60712);function c({children:e,onConfirmAction:s,onConfirmActionSuccess:t,dialogHeader:c,dialogText:d,retryButtonText:u,buttonDisabled:h=!1,buttonView:v="action",buttonTitle:p,buttonClassName:m,withPopover:x=!1,popoverContent:g,popoverPlacement:b="right",popoverDisabled:f=!0}){const[j,N]=l.useState(!1),[y,w]=l.useState(!1),[k,S]=l.useState(!1),C=()=>(0,o.jsx)(n.$,{onClick:()=>N(!0),view:v,disabled:h,loading:!h&&y,className:m,title:p,children:e});return(0,o.jsxs)(l.Fragment,{children:[(0,o.jsx)(a.g,{visible:j,header:c,text:d,withRetry:k,retryButtonText:u,onConfirm:async e=>{w(!0),await s(e)},onConfirmActionSuccess:async()=>{S(!1);try{await(null===t||void 0===t?void 0:t())}finally{w(!1)}},onConfirmActionError:e=>{S((0,r.D)(e)),w(!1)},onClose:()=>{N(!1)}}),x?(0,o.jsx)(i.A,{content:g,placement:b,disabled:f,children:C()}):C()]})}},27160:(e,s,t)=>{t.d(s,{D:()=>n});var l=t(77773);function n(){return(0,l.w)().theme}},42655:(e,s,t)=>{t.d(s,{y:()=>d});var l=t(59284),n=t(1608),i=t(77506),a=t(66781),r=t(60712);const o=(0,i.cn)("ydb-info-viewer-skeleton"),c=()=>(0,r.jsxs)("div",{className:o("label"),children:[(0,r.jsx)(n.E,{className:o("label__text")}),(0,r.jsx)("div",{className:o("label__dots")})]}),d=({rows:e=8,className:s,delay:t=600})=>{const[i]=(0,a.y)(t);let d=(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(c,{}),(0,r.jsx)(n.E,{className:o("value")})]});return i||(d=null),(0,r.jsx)("div",{className:o(null,s),children:[...new Array(e)].map(((e,s)=>(0,r.jsx)("div",{className:o("row"),children:d},`skeleton-row-${s}`)))})}},42829:(e,s,t)=>{t.d(s,{D:()=>l});const l=e=>Boolean(e&&"object"===typeof e&&"retryPossible"in e&&e.retryPossible)},48139:(e,s,t)=>{t.d(s,{S:()=>d});var l=t(60712),n=t(59284),i=t(90883),a=t(21246);function r(e){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 17",width:"16",height:"16",fill:"currentColor",...e,children:(0,l.jsx)("path",{d:"M4 7h9v3H4z"})})}function o(e){return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10",width:"16",height:"16",fill:"currentColor",...e,children:(0,l.jsx)("path",{d:"M.49 5.385l1.644-1.644 4.385 4.385L4.874 9.77.49 5.385zm4.384 1.096L10.356 1 12 2.644 6.519 8.126 4.874 6.48v.001z"})})}const c=(0,t(10417).om)("checkbox"),d=n.forwardRef((function(e,s){const{size:t="m",indeterminate:n,disabled:d=!1,content:u,children:h,title:v,style:p,className:m,qa:x}=e,{checked:g,inputProps:b}=(0,i.v)(e),f=u||h,j=(0,l.jsxs)("span",{className:c("indicator"),children:[(0,l.jsx)("span",{className:c("icon"),"aria-hidden":!0,children:n?(0,l.jsx)(r,{className:c("icon-svg",{type:"dash"})}):(0,l.jsx)(o,{className:c("icon-svg",{type:"tick"})})}),(0,l.jsx)("input",{...b,className:c("control")}),(0,l.jsx)("span",{className:c("outline")})]});return(0,l.jsx)(a.m,{ref:s,title:v,style:p,size:t,disabled:d,className:c({size:t,disabled:d,indeterminate:n,checked:g},m),qa:x,control:j,children:f})}))},55974:(e,s,t)=>{t.d(s,{g:()=>b});var l=t(59284),n=t(18677),i=t(71153),a=t(48139),r=t(82521),o=t(47653),c=t(56999),d=t(77506),u=t(81288),h=t(48372);const v=JSON.parse('{"default-error":"Something went wrong, action cannot be completed","no-rights-error":"You don\'t have enough rights to complete the operation","button-confirm":"Confirm","button-retry":"Retry","button-cancel":"Cancel","button-close":"Close","checkbox-text":"I understand what I\'m doing"}'),p=(0,h.g4)("ydb-critical-action-dialog",{en:v});var m=t(60712);const x=(0,d.cn)("ydb-critical-dialog"),g=e=>{if((0,u.cH)(e)){if(403===e.status)return p("no-rights-error");if("string"===typeof e.data)return e.data;if((0,u._E)(e)&&e.data)return(0,m.jsx)(c.O,{hideSeverity:!0,data:e.data});if(e.statusText)return e.statusText}return p("default-error")};function b({visible:e,header:s,text:t,withRetry:c,retryButtonText:d,withCheckBox:u,onClose:h,onConfirm:v,onConfirmActionSuccess:b,onConfirmActionError:f}){const[j,N]=l.useState(!1),[y,w]=l.useState(),[k,S]=l.useState(!1),C=async e=>(N(!0),v(e).then((()=>{b(),h()})).catch((e=>{f(e),w(e)})).finally((()=>{N(!1)})));return(0,m.jsx)(r.l,{open:e,hasCloseButton:!1,className:x(),size:"s",onClose:h,onTransitionOutComplete:()=>{w(void 0),S(!1)},children:y?(0,m.jsxs)(l.Fragment,{children:[(0,m.jsx)(r.l.Header,{caption:s}),(0,m.jsx)(r.l.Body,{className:x("body"),children:(0,m.jsxs)("div",{className:x("body-message",{error:!0}),children:[(0,m.jsx)("span",{className:x("error-icon"),children:(0,m.jsx)(n.A,{width:"24",height:"22"})}),g(y)]})}),(0,m.jsx)(r.l.Footer,{loading:!1,preset:"default",textButtonApply:c?d||p("button-retry"):void 0,textButtonCancel:p("button-close"),onClickButtonApply:()=>C(!0),onClickButtonCancel:h})]}):(0,m.jsxs)(l.Fragment,{children:[(0,m.jsx)(r.l.Header,{caption:s}),(0,m.jsxs)(r.l.Body,{className:x("body"),children:[(0,m.jsxs)("div",{className:x("body-message",{warning:!0}),children:[(0,m.jsx)("span",{className:x("warning-icon"),children:(0,m.jsx)(o.I,{data:i.A,size:24})}),t]}),u?(0,m.jsx)(a.S,{checked:k,onUpdate:S,children:p("checkbox-text")}):null]}),(0,m.jsx)(r.l.Footer,{loading:j,preset:"default",textButtonApply:p("button-confirm"),textButtonCancel:p("button-cancel"),propsButtonApply:{type:"submit",disabled:u&&!k},onClickButtonCancel:h,onClickButtonApply:()=>C()})]})})}},56999:(e,s,t)=>{t.d(s,{O:()=>N});var l=t(59284),n=t(45720),i=t(16929),a=t(71153),r=t(18677),o=t(80136),c=t(60461),d=t(78540),u=t(47653),h=t(74529),v=t(77506),p=t(41650);const m=["S_FATAL","S_ERROR","S_WARNING","S_INFO"];function x(e){return function(e){return!!e&&void 0!==m[e]}(e)?m[e]:"S_INFO"}var g=t(60712);const b=(0,v.cn)("kv-result-issues"),f=(0,v.cn)("kv-issues"),j=(0,v.cn)("kv-issue");function N({data:e,hideSeverity:s}){const[t,n]=l.useState(!1),i="string"===typeof e||null===e||void 0===e?void 0:e.issues,a=Array.isArray(i)&&i.length>0;return(0,g.jsxs)("div",{className:b(),children:[(0,g.jsxs)("div",{className:b("error-message"),children:[(()=>{let t;if("string"===typeof e)t=e;else{var n,i;const a=x(null===e||void 0===e||null===(n=e.error)||void 0===n?void 0:n.severity);t=(0,g.jsxs)(l.Fragment,{children:[s?null:(0,g.jsxs)(l.Fragment,{children:[(0,g.jsx)(_,{severity:a})," "]}),(0,g.jsx)("span",{className:b("error-message-text"),children:null===e||void 0===e||null===(i=e.error)||void 0===i?void 0:i.message})]})}return t})(),a&&(0,g.jsx)(o.$,{view:"normal",onClick:()=>n(!t),children:t?"Hide details":"Show details"})]}),a&&t&&(0,g.jsx)(y,{hideSeverity:s,issues:i})]})}function y({issues:e,hideSeverity:s}){const t=null===e||void 0===e?void 0:e.reduce(((e,s)=>{var t;const l=null!==(t=s.severity)&&void 0!==t?t:10;return Math.min(e,l)}),10);return(0,g.jsx)("div",{className:f(null),children:null===e||void 0===e?void 0:e.map(((e,l)=>(0,g.jsx)(w,{hideSeverity:s,issue:e,expanded:e===t},l)))})}function w({issue:e,hideSeverity:s,level:t=0}){const[n,i]=l.useState(!0),a=x(e.severity),r=e.issues,d=Array.isArray(r)&&r.length>0,u=n?"bottom":"right";return(0,g.jsxs)("div",{className:j({leaf:!d,"has-issues":d}),children:[(0,g.jsxs)("div",{className:j("line"),children:[d&&(0,g.jsx)(o.$,{view:"flat-secondary",onClick:()=>i(!n),className:j("arrow-toggle"),children:(0,g.jsx)(c.I,{direction:u,size:16})}),s?null:(0,g.jsx)(_,{severity:a}),(0,g.jsx)(k,{issue:e}),e.issue_code?(0,g.jsxs)("span",{className:j("code"),children:["Code: ",e.issue_code]}):null]}),d&&n&&(0,g.jsx)("div",{className:j("issues"),children:(0,g.jsx)(S,{issues:r,level:t+1,expanded:n})})]})}function k({issue:e}){var s;const t=function(e){const{position:s}=e;if("object"!==typeof s||null===s||!(0,p.kf)(s.row))return"";const{row:t,column:l}=s;return(0,p.kf)(l)?`${t}:${l}`:`line ${t}`}(e),l=window.ydbEditor,n=()=>(0,g.jsxs)("span",{className:j("message"),children:[t&&(0,g.jsx)("span",{className:j("place-text"),title:"Position",children:t}),(0,g.jsx)("div",{className:j("message-text"),children:(0,g.jsx)(h.A,{value:e.message,expandLabel:"Show full message"})})]}),{row:i,column:a}=null!==(s=e.position)&&void 0!==s?s:{};if(!((0,p.kf)(i)&&l))return n();return(0,g.jsx)(d.N,{href:"#",onClick:()=>{const e={lineNumber:i,column:null!==a&&void 0!==a?a:0};l.setPosition(e),l.revealPositionInCenterIfOutsideViewport(e),l.focus()},view:"primary",draggable:!1,children:n()})}function S(e){const{issues:s,level:t,expanded:l}=e;return(0,g.jsx)("div",{className:j("list"),children:s.map(((e,s)=>(0,g.jsx)(w,{issue:e,level:t,expanded:l},s)))})}const C={S_INFO:n.A,S_WARNING:i.A,S_ERROR:a.A,S_FATAL:r.A},A=(0,v.cn)("yql-issue-severity");function _({severity:e}){const s=e.slice(2).toLowerCase();return(0,g.jsxs)("span",{className:A({severity:s}),children:[(0,g.jsx)(u.I,{className:A("icon"),data:C[e]}),(0,g.jsx)("span",{className:A("title"),children:s})]})}},58389:(e,s,t)=>{t.d(s,{B:()=>u});var l=t(32752),n=t(77506),i=t(90053),a=t(70043),r=t(60712);const o=(0,n.cn)("ydb-page-meta"),c="\xa0\xa0\xb7\xa0\xa0";function d({items:e,loading:s}){return(0,r.jsx)("div",{className:o("info"),children:s?(0,r.jsx)(a.E,{className:o("skeleton")}):e.filter((e=>Boolean(e))).join(c)})}function u({className:e,...s}){return(0,r.jsxs)(l.s,{gap:1,alignItems:"center",justifyContent:"space-between",className:o(null,e),children:[(0,r.jsx)(d,{...s}),(0,r.jsx)(i.E,{})]})}},67808:(e,s,t)=>{t.d(s,{E:()=>y});t(59284);var l=t(32752),n=t(13847),i=t(92459),a=t(67375),r=t(77506),o=t(56839),c=t(31684),d=t(7187),u=t(28232),h=t(12888),v=t(41650),p=t(60073),m=t(44294),x=t(25196),g=t(15132),b=t(33775),f=t(39110),j=t(60712);const N=(0,r.cn)("ydb-vdisk-info");function y({data:e,withVDiskPageLink:s,withTitle:t,className:r,wrap:d}){var y,k;const S=(0,h.X)(),C=(0,u.J)(),{AllocatedSize:A,DiskSpace:_,FrontQueues:I,Guid:B,Replicated:R,ReplicationProgress:E,ReplicationSecondsRemaining:F,Donors:O,VDiskState:z,VDiskSlotId:L,Kind:D,SatisfactionRank:T,AvailableSize:P,HasUnreadableBlobs:V,IncarnationGuid:$,InstanceGuid:H,StoragePoolName:M,ReadThroughput:G,WriteThroughput:W,PDiskId:K,StringifiedId:X,NodeId:q}=e||{},J=[];var Y,U;((0,n.isNil)(M)||J.push({label:(0,f.r)("pool-name"),value:M}),(0,n.isNil)(z)||J.push({label:(0,f.r)("state-status"),value:z}),Number(A)>=0&&Number(P)>=0&&J.push({label:(0,f.r)("size"),value:(0,j.jsx)(g.O,{value:A,capacity:Number(A)+Number(P),formatValues:o.vX,colorizeProgress:!0})}),(0,n.isNil)(_)||J.push({label:(0,f.r)("space-status"),value:(0,j.jsx)(b.k,{status:_})}),(0,n.isNil)(I)||J.push({label:(0,f.r)("front-queues"),value:(0,j.jsx)(b.k,{status:I})}),(0,n.isNil)(null===T||void 0===T||null===(y=T.FreshRank)||void 0===y?void 0:y.Flag))||J.push({label:(0,f.r)("fresh-rank-satisfaction"),value:(0,j.jsx)(b.k,{status:null===T||void 0===T||null===(Y=T.FreshRank)||void 0===Y?void 0:Y.Flag})});(0,n.isNil)(null===T||void 0===T||null===(k=T.LevelRank)||void 0===k?void 0:k.Flag)||J.push({label:(0,f.r)("level-rank-satisfaction"),value:(0,j.jsx)(b.k,{status:null===T||void 0===T||null===(U=T.LevelRank)||void 0===U?void 0:U.Flag})});(0,n.isNil)(G)||J.push({label:(0,f.r)("read-throughput"),value:(0,v.O4)(G)}),(0,n.isNil)(W)||J.push({label:(0,f.r)("write-throughput"),value:(0,v.O4)(W)});const Q=[];if((0,n.isNil)(R)||Q.push({label:(0,f.r)("replication-status"),value:R?(0,f.r)("yes"):(0,f.r)("no")}),!1===R&&z===a.W.OK&&((0,n.isNil)(E)||Q.push({label:(0,f.r)("replication-progress"),value:(0,j.jsx)(g.O,{value:Math.round(100*E),percents:!0,colorizeProgress:!0,capacity:100})}),!(0,n.isNil)(F))){const e=(0,o.YS)(F);e&&Q.push({label:(0,f.r)("replication-time-remaining"),value:e})}if((0,n.isNil)(L)||Q.push({label:(0,f.r)("slot-id"),value:L}),!(0,n.isNil)(K)){const e=(0,n.isNil)(q)?void 0:(0,i.Ck)(K,q),s=e?(0,j.jsx)(m.E,{to:e,children:K}):K;Q.push({label:(0,f.r)("label_pdisk-id"),value:s})}if((0,n.isNil)(D)||Q.push({label:(0,f.r)("kind"),value:D}),(0,n.isNil)(B)||Q.push({label:(0,f.r)("guid"),value:B}),(0,n.isNil)($)||Q.push({label:(0,f.r)("incarnation-guid"),value:$}),(0,n.isNil)(H)||Q.push({label:(0,f.r)("instance-guid"),value:H}),(0,n.isNil)(V)||Q.push({label:(0,f.r)("has-unreadable-blobs"),value:V?(0,f.r)("yes"):(0,f.r)("no")}),!1===R&&z===a.W.OK&&null!==O&&void 0!==O&&O.length){const e=O.map(((e,s)=>{const{StringifiedId:t,NodeId:l}=e;if(!t||!l)return null;const n=(0,i.yX)({nodeId:l,vDiskId:t},{database:C});return(0,j.jsx)(m.E,{to:n,children:t},s)})).filter(Boolean);e.length&&Q.push({label:(0,f.r)("donors"),value:(0,j.jsx)(l.s,{direction:"column",gap:1,children:e})})}const Z=[];if(!(0,n.isNil)(X)&&s){const e=(0,i.yX)({nodeId:q,vDiskId:X},{database:C});Z.push((0,j.jsx)(x.K,{title:(0,f.r)("vdisk-page"),url:e,external:!1},e))}if(S&&!(0,n.isNil)(q)&&!(0,n.isNil)(L)&&!(0,n.isNil)(K)){const e=(0,c.Wg)({nodeId:q,pDiskId:K,vDiskSlotId:L});Z.push((0,j.jsx)(x.K,{title:(0,f.r)("developer-ui"),url:e},e))}Z.length&&Q.push({label:(0,f.r)("links"),value:(0,j.jsx)(l.s,{wrap:"wrap",gap:2,children:Z})});const ee=e&&t?(0,j.jsx)(w,{data:e}):null;return(0,j.jsxs)(l.s,{className:r,gap:2,direction:d?"row":"column",wrap:d,children:[(0,j.jsx)(p.z_,{title:ee,info:J,renderEmptyState:()=>null,className:N("info")}),(0,j.jsx)(p.z_,{info:Q,renderEmptyState:()=>null,className:N("info")})]})}function w({data:e}){return(0,j.jsxs)("div",{className:N("title"),children:[(0,f.r)("vdiks-title"),(0,j.jsx)(b.k,{status:(0,d.XY)(e.Severity)}),e.StringifiedId]})}},70043:(e,s,t)=>{t.d(s,{E:()=>a});var l=t(1608),n=t(66781),i=t(60712);const a=({delay:e=600,className:s})=>{const[t]=(0,n.y)(e);return t?(0,i.jsx)(l.E,{className:s}):null}},74529:(e,s,t)=>{t.d(s,{A:()=>h});var l=t(59284),n=t(78540),i=t(77506),a=t(48372);const r=JSON.parse('{"default_collapse_label":"Show less","default_expand_label":"Show more","chars_count":[" ({{count}} symbol)"," ({{count}} symbols)"," ({{count}} symbols)"," ({{count}} symbols)"]}'),o=JSON.parse('{"default_collapse_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435","default_expand_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451","chars_count":[" ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b)"," ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b\u0430)"," ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)"," ({{count}} \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)"]}'),c=(0,a.g4)("ydb-shorty-string",{ru:o,en:r});var d=t(60712);const u=(0,i.cn)("kv-shorty-string");function h({value:e="",limit:s=200,strict:t=!1,displayLength:i=!0,render:a=e=>e,onToggle:r,expandLabel:o=c("default_expand_label"),collapseLabel:h=c("default_collapse_label")}){const[v,p]=l.useState(!1),m=(v?h:o)+(i&&!v?c("chars_count",{count:e.length}):""),x=e.length>s+(t?0:m.length),g=v||!x?e:e.slice(0,s-4)+"\xa0...";return(0,d.jsxs)("div",{className:u(),children:[a(g),x?(0,d.jsx)(n.N,{className:u("toggle"),href:"#",onClick:e=>{e.stopPropagation(),e.preventDefault(),p((e=>!e)),null===r||void 0===r||r()},children:m}):null]})}},79879:(e,s,t)=>{t.d(s,{A:()=>n});var l=t(59284);const n=e=>l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m3.003 4.702 4.22-2.025a1.8 1.8 0 0 1 1.554 0l4.22 2.025a.89.89 0 0 1 .503.8V6a8.55 8.55 0 0 1-3.941 7.201l-.986.631a1.06 1.06 0 0 1-1.146 0l-.986-.63A8.55 8.55 0 0 1 2.5 6v-.498c0-.341.196-.652.503-.8m3.57-3.377L2.354 3.35A2.39 2.39 0 0 0 1 5.502V6a10.05 10.05 0 0 0 4.632 8.465l.986.63a2.56 2.56 0 0 0 2.764 0l.986-.63A10.05 10.05 0 0 0 15 6v-.498c0-.918-.526-1.755-1.354-2.152l-4.22-2.025a3.3 3.3 0 0 0-2.852 0M9.5 7a1.5 1.5 0 0 1-.75 1.3v1.95a.75.75 0 0 1-1.5 0V8.3A1.5 1.5 0 1 1 9.5 7",clipRule:"evenodd"}))}}]);