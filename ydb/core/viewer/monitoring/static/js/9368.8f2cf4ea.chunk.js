"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[9368],{74003:(e,t,s)=>{s.d(t,{q:()=>h});var r=s(26714),n=s(72616),a=s(98647),o=s(78759),i=s(99294),l=s(55842),d=s(37711);const u=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),c=(0,d.wZ)("ydb-diagnostics-autorefresh-control",{en:u});var m=s(10161);const p=(0,i.cn)("auto-refresh-control");function h(e){let{className:t}=e;const s=(0,l.zL)(),[i,d]=(0,l.Rj)();return(0,m.jsxs)("div",{className:p(null,t),children:[(0,m.jsx)(n.z,{view:"flat",onClick:()=>{s(o.h.util.invalidateTags(["All"]))},extraProps:{"aria-label":c("Refresh")},children:(0,m.jsx)(n.z.Icon,{children:(0,m.jsx)(r.Z,{})})}),(0,m.jsxs)(a.P,{value:[String(i)],onUpdate:e=>{d(Number(e))},width:85,children:[(0,m.jsx)(a.P.Option,{value:"0",children:c("None")}),(0,m.jsx)(a.P.Option,{value:"15000",children:c("15 sec")}),(0,m.jsx)(a.P.Option,{value:"60000",children:c("1 min")}),(0,m.jsx)(a.P.Option,{value:"120000",children:c("2 min")}),(0,m.jsx)(a.P.Option,{value:"300000",children:c("5 min")})]})]})}},61168:(e,t,s)=>{s.d(t,{l:()=>l});var r=s(16318),n=s(99294),a=s(10161);const o=(0,n.cn)("ydb-cell-with-popover"),i=100;function l(e){let{children:t,className:s,wrapperClassName:n,...l}=e;return(0,a.jsx)("div",{className:o(null,n),children:(0,a.jsx)(r.J,{delayClosing:i,delayOpening:i,className:o("popover",s),...l,children:t})})}},47329:(e,t,s)=>{s.d(t,{m:()=>c});var r=s(81187),n=s(72616),a=s(69847),o=s(92011),i=s(99294),l=s(10161);const d=(0,i.cn)("clipboard-button");function u(e){let{className:t,status:s,title:o,...i}=e;return(0,l.jsx)(r.u,{content:"success"===s?"Copied!":o||"Copy",placement:"bottom-start",children:(0,l.jsx)(n.z,{...i,className:d(null,t),children:(0,l.jsx)(n.z.Icon,{children:(0,l.jsx)(a.K,{status:s,size:16})})})})}function c(e){let{text:t,...s}=e;return(0,l.jsx)(o.h,{text:t,timeout:1e3,children:e=>(0,l.jsx)(u,{...s,status:e})})}},43926:(e,t,s)=>{s.d(t,{f:()=>o});var r=s(34706),n=s(24874),a=s(10161);const o=e=>{let{children:t,content:s,className:o,pinOnClick:i,hasArrow:l=!0,placement:d=["top","bottom"],...u}=e;const[c,m]=r.useState(!1),[p,h]=r.useState(!1),g=r.useRef(null);return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(n.G,{anchorRef:g,open:p||c,placement:d,hasArrow:l,onOutsideClick:()=>{h(!1)},...u,children:s}),(0,a.jsx)("span",{className:o,ref:g,onClick:i?()=>{h(!0)}:void 0,onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},children:t})]})}},98779:(e,t,s)=>{s.d(t,{Q:()=>d});var r=s(15152),n=s(72616),a=s(14561),o=s(99294),i=s(10161);const l=(0,o.cn)("developer-ui-link-button");function d(e){let{href:t,visible:s=!1,className:o}=e;return(0,i.jsx)(n.z,{size:"s",href:t,className:l({visible:s},o),target:"_blank",children:(0,i.jsx)(a.J,{data:r.Z})})}},90457:(e,t,s)=>{s.d(t,{p:()=>d});s(34706);var r=s(99294),n=s(27810),a=s(53458),o=s(55842),i=s(10161);const l=(0,r.cn)("storage-disk-progress-bar");function d(e){let{diskAllocatedPercent:t=-1,severity:s,compact:r,faded:d,inactive:u,empty:c,content:m,className:p}=e;const[h]=(0,o.yu)(n.yT),g={inverted:h,compact:r,faded:d,empty:c,inactive:u},v=void 0!==s&&(0,a.b2)(s);v&&(g[v.toLocaleLowerCase()]=!0);return(0,i.jsxs)("div",{className:l(g,p),role:"meter","aria-label":"Disk allocated space","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t,children:[(()=>{if(r)return(0,i.jsx)("div",{className:l("fill-bar",g),style:{width:"100%"}});const e=h?100-t:t;return t>=0?(0,i.jsx)("div",{className:l("fill-bar",g),style:{width:`${e}%`}}):null})(),m||(!r&&t>=0?(0,i.jsx)("div",{className:l("title"),children:`${Math.round(t)}%`}):null)]})}},14325:(e,t,s)=>{s.d(t,{C:()=>l});var r=s(2634),n=s(99294);const a=(0,s(37711).wZ)("ydb-entities-count",{ru:{of:"\u0438\u0437"},en:{of:"of"}});var o=s(10161);const i=(0,n.cn)("ydb-entities-count"),l=e=>{let{total:t,current:s,label:n,loading:l,className:d}=e,u="";return n&&(u+=`${n}: `),l?u+="...":(u+=`${s}`,t&&Number(t)!==Number(s)&&(u+=` ${a("of")} ${t}`)),(0,o.jsx)(r._,{theme:"info",size:"m",className:i(null,d),children:u})}},62508:(e,t,s)=>{s.d(t,{A:()=>c});var r=s(17823),n=s(77468),a=s(99294),o=s(47329),i=s(32489),l=s(73287),d=s(10161);const u=(0,a.cn)("entity-status");function c(e){let{status:t=n.K.Grey,name:s="",label:a,path:c,iconPath:m,size:p="s",mode:h="color",showStatus:g=!0,externalLink:v=!1,withLeftTrim:N=!1,hasClipboardButton:b,clipboardButtonAlwaysVisible:x=!1,className:f,additionalControls:S}=e;const w=()=>g?(0,d.jsx)(l.J,{className:u("icon"),status:t,size:p,mode:h}):null;return(0,d.jsxs)("div",{className:u(null,f),title:s,children:[m?(y=m,(0,d.jsx)(r.r,{target:"_blank",href:y,children:w()})):w(),a&&(0,d.jsx)("span",{title:a,className:u("label",{size:p,state:t.toLowerCase()}),children:a}),(0,d.jsx)("span",{className:u("link",{"with-left-trim":N}),children:c?v?(0,d.jsx)(r.r,{className:u("name"),href:c,children:s}):(0,d.jsx)(i.h,{className:u("name"),to:c,children:s}):s&&(0,d.jsx)("span",{className:u("name"),children:s})}),b&&(0,d.jsx)(o.m,{text:s,size:"s",className:u("clipboard-button",{visible:x})}),S&&(0,d.jsx)("span",{className:u("additional-controls "),children:S})]});var y}},10570:(e,t,s)=>{s.d(t,{J:()=>b,b:()=>N});var r=s(34706),n=s(24874),a=s(4969),o=s(77468),i=s(25665),l=s(99294),d=s(27810),u=s(53458),c=s(55842),m=s(73689),p=s(41591),h=s(10161);const g=(0,l.cn)("pdisk-storage-popup"),v=[o.K.Orange,o.K.Red,o.K.Yellow],N=(e,t)=>{var s;const{AvailableSize:r,TotalSize:n,State:a,PDiskId:o,NodeId:i,Path:l,Realtime:c,Type:p,Device:h}=e,g=[{label:"PDisk",value:null!==(s=(0,u.CH)(i,o))&&void 0!==s?s:d.jX},{label:"State",value:a||"not available"},{label:"Type",value:p||"unknown"}];return i&&g.push({label:"Node Id",value:i}),t&&g.push({label:"Host",value:t}),l&&g.push({label:"Path",value:l}),g.push({label:"Available",value:`${(0,m.Uz)(r)} of ${(0,m.Uz)(n)}`}),c&&v.includes(c)&&g.push({label:"Realtime",value:c}),h&&v.includes(h)&&g.push({label:"Device",value:h}),g},b=e=>{let{data:t,...s}=e;const o=(0,c.ix)(a.s),l=(0,i.D)(t.NodeId)?null===o||void 0===o?void 0:o.get(t.NodeId):void 0,d=r.useMemo((()=>N(t,l)),[t,l]),[u,m]=r.useState(!1),v=r.useCallback((()=>{m(!1)}),[]),b=r.useCallback((()=>{m(!0)}),[]);return(0,h.jsx)(n.G,{contentClassName:g(),placement:["top","bottom"],hasArrow:!0,offset:[0,12],onMouseLeave:v,onMouseEnter:b,...s,open:u||s.open,children:(0,h.jsx)(p._P,{title:"PDisk",info:d,size:"s"})})}},79317:(e,t,s)=>{s.d(t,{WQ:()=>R});var r=s(34706),n=s(25665),a=s(74640);const o=s(78759).h.injectEndpoints({endpoints:function(e){return{fetchTableChunk:e.query({queryFn:async(e,t)=>{let{offset:s,limit:r,sortParams:n,filters:a,fetchData:o}=e,{signal:i}=t;try{return{data:await o({limit:r,offset:s,filters:a,sortParams:n,signal:i})}}catch(l){return{error:l}}},providesTags:["All"]})}}});var i=s(55842),l=s(15327),d=s(5194);const u="left",c=!0,m=-1,p=40;const h=(0,s(99294).cn)("ydb-paginated-table");var g=s(10161);const v=e=>{let{children:t,className:s,height:r,width:n,align:a=u,resizeable:o}=e;return(0,g.jsx)("td",{className:h("row-cell",{align:a},s),style:{height:`${r}px`,width:`${n}px`,maxWidth:o?`${n}px`:void 0},children:t})},N=e=>{let{index:t,columns:s,height:r}=e;return(0,g.jsx)("tr",{className:h("row",{loading:!0}),children:s.map((e=>{var s;const n=null!==(s=e.resizeable)&&void 0!==s?s:c;return(0,g.jsx)(v,{height:r,width:e.width,align:e.align,className:e.className,resizeable:n,children:(0,g.jsx)(d.O,{className:h("row-skeleton"),style:{width:"80%",height:"50%"}})},`${e.name}${t}`)}))})},b=e=>{let{row:t,index:s,columns:r,getRowClassName:n,height:a}=e;const o=null===n||void 0===n?void 0:n(t);return(0,g.jsx)("tr",{className:h("row",o),children:r.map((e=>{var r;const n=null!==(r=e.resizeable)&&void 0!==r?r:c;return(0,g.jsx)(v,{height:a,width:e.width,align:e.align,className:e.className,resizeable:n,children:e.render({row:t,index:s})},`${e.name}${s}`)}))})},x=e=>{let{columns:t,children:s}=e;return(0,g.jsx)("tr",{className:h("row",{empty:!0}),children:(0,g.jsx)("td",{colSpan:t.length,className:h("td"),children:s})})},f=e=>{var t;let{id:s,limit:a,totalLength:d,rowHeight:u,columns:c,fetchData:m,tableName:p,filters:h,sortParams:v,getRowClassName:f,renderErrorMessage:S,onDataFetched:w,isActive:y}=e;const[D,k]=r.useState(!0),[j]=(0,i.Rj)(),I={offset:s*a,limit:a,fetchData:m,filters:h,sortParams:v,tableName:p};o.useFetchTableChunkQuery(I,{skip:D||!y,pollingInterval:j});const{currentData:C,error:P}=o.endpoints.fetchTableChunk.useQueryState(I);r.useEffect((()=>{let e=0;return y&&D&&(e=window.setTimeout((()=>{k(!1)}),200)),()=>{window.clearTimeout(e)}}),[y,D]),r.useEffect((()=>{if(C&&y){const{total:e=0,found:t=0}=C;w(e,t)}}),[C,y,w]);const E=d-s*a,G=E<a?E:a,T=(null===C||void 0===C||null===(t=C.data)||void 0===t?void 0:t.length)||G,R=T?T*u:a*u;return(0,g.jsx)("tbody",{id:s.toString(),style:{height:`${R}px`,display:y?"table-row-group":"block"},children:(()=>{if(!y)return null;if(!C){if(P){const e=P;return(0,g.jsx)(x,{columns:c,children:S?S(e):(0,g.jsx)(l.V,{error:e})})}return(0,n.c$)(T).map((e=>(0,g.jsx)(N,{columns:c,height:u,index:e},e)))}return C.data.map(((e,t)=>(0,g.jsx)(b,{index:t,row:e,columns:c,height:u,getRowClassName:f},t)))})()})};function S(e){let{minWidth:t,maxWidth:s,getCurrentColumnWidth:n,onResize:a}=e;const o=r.useRef(null),[i,l]=r.useState(!1);return r.useEffect((()=>{const e=o.current;if(!e)return;let r,i,d;const u=function(e){let t,s=null;return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];t=n,"number"!==typeof s&&(s=requestAnimationFrame((()=>{e(...t),s=null})))}}((e=>{if(w(e),"number"!==typeof r||"number"!==typeof i)return;const n=e.clientX-r,o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;return Math.max(t,Math.min(e,s))}(i+n,t,s);o!==d&&(d=o,null===a||void 0===a||a(d))})),c=e=>{w(e),void 0!==d&&(null===a||void 0===a||a(d)),l(!1),r=void 0,document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)},m=e=>{i=n(),w(e),r=e.clientX,l(!0),document.addEventListener("mousemove",u),document.addEventListener("mouseup",c)};return e.addEventListener("mousedown",m),()=>{e.removeEventListener("mousedown",m),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",c)}}),[a,t,s,n]),(0,g.jsx)("span",{ref:o,className:h("resize-handler",{resizing:i}),onClick:e=>w(e)})}function w(e){e.preventDefault(),e.stopPropagation()}const y=e=>{let{order:t}=e;return(0,g.jsx)("svg",{className:h("sort-icon",{desc:-1===t}),viewBox:"0 0 10 6",width:"10",height:"6",children:(0,g.jsx)("path",{fill:"currentColor",d:"M0 5h10l-5 -5z"})})},D=e=>{let{sortOrder:t,sortable:s,defaultSortOrder:r}=e;return s?(0,g.jsx)("span",{className:h("sort-icon-container",{shadow:!t}),children:(0,g.jsx)(y,{order:t||r})}):null},k=e=>{var t;let{column:s,resizeable:n,sortOrder:a,defaultSortOrder:o,onSort:i,rowHeight:l,onCellMount:d,onCellUnMount:u,onColumnsResize:c}=e;const m=r.useRef(null);r.useEffect((()=>{const e=m.current;return e&&(null===d||void 0===d||d(e)),()=>{e&&(null===u||void 0===u||u(e))}}),[d,u]);const p=r.useCallback((()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect().width}),[]),v=r.useCallback((e=>{null===c||void 0===c||c(s.name,e)}),[c,s.name]),N=null!==(t=s.header)&&void 0!==t?t:s.name,b={height:`${l}px`,width:`${s.width}px`,minWidth:n?`${s.width}px`:void 0,maxWidth:n?`${s.width}px`:void 0};return(0,g.jsxs)("th",{ref:m,className:h("head-cell-wrapper"),style:b,children:[(0,g.jsxs)("div",{className:h("head-cell",{align:s.align,sortable:s.sortable},s.className),onClick:()=>{s.sortable&&(null===i||void 0===i||i(s.name))},children:[(0,g.jsx)("div",{className:h("head-cell-content"),children:N}),(0,g.jsx)(D,{sortOrder:a,sortable:s.sortable,defaultSortOrder:o})]}),n?(0,g.jsx)(S,{maxWidth:s.resizeMaxWidth,minWidth:s.resizeMinWidth,getCurrentColumnWidth:p,onResize:v}):null]})},j=e=>{let{columns:t,onSort:s,onColumnsResize:n,defaultSortOrder:a=m,rowHeight:o=p}=e;const[i,l]=r.useState({}),d=e=>{let t={};if(e===i.columnId){if(i.sortOrder&&i.sortOrder!==a)return l(t),void(null===s||void 0===s||s(t));t={sortOrder:1===i.sortOrder?-1:1,columnId:e}}else t={sortOrder:a,columnId:e};null===s||void 0===s||s(t),l(t)};return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)("colgroup",{children:t.map((e=>(0,g.jsx)("col",{style:{width:`${e.width}px`}},e.name)))}),(0,g.jsx)("thead",{className:h("head"),children:(0,g.jsx)("tr",{children:t.map((e=>{var t;const s=i.columnId===e.name?i.sortOrder:void 0,r=n&&(null!==(t=e.resizeable)&&void 0!==t?t:c);return(0,g.jsx)(k,{column:e,resizeable:r,sortOrder:s,defaultSortOrder:a,onSort:d,rowHeight:o,onColumnsResize:n},e.name)}))})})]})};var I=s(37711);const C=JSON.parse('{"empty":"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}'),P=(0,I.wZ)("ydb-paginated-table",{ru:C,en:{empty:"No data"}});var E=s(76421);const G=e=>{let{limit:t,initialEntitiesCount:s,fetchData:o,filters:i,tableName:l,columns:d,getRowClassName:u,rowHeight:c=p,parentRef:m,initialSortParams:v,onColumnsResize:N,renderControls:b,renderErrorMessage:S,renderEmptyDataMessage:w,containerClassName:y}=e;const D=s||t,k=s||0,[I,C]=r.useState(v),[G,T]=r.useState(D),[R,U]=r.useState(k),[L,M]=r.useState(!0),A=r.useRef(null),V=(e=>{let{containerRef:t,totalItems:s,itemHeight:a,chunkSize:o}=e;const[i,l]=r.useState((0,n.c$)(2).map((e=>e))),d=r.useCallback((()=>{const e=t.current;if(!e)return;const{scrollTop:r,clientHeight:i}=e,d=Math.floor(r/a),u=Math.min(Math.ceil((r+i)/a),s-1),c=Math.floor(d/o),m=Math.floor(u/o),p=(0,n.c$)(m-c+1+1).map((e=>c+e));l(p)}),[o,t,a,s]),u=r.useMemo((()=>(0,E.throttle)(d,100)),[d]);return r.useEffect((()=>{const e=t.current;if(e)return e.addEventListener("scroll",u),()=>{e.removeEventListener("scroll",u),u.cancel()}}),[t,u]),i})({containerRef:null!==m&&void 0!==m?m:A,totalItems:R,itemHeight:c,chunkSize:t}),z=r.useCallback(((e,t)=>{T(e),U(t),M(!1)}),[]);r.useLayoutEffect((()=>{var e;(T(D),U(k),M(!0),null!==m&&void 0!==m&&m.current)?m.current.scrollTo(0,0):null===(e=A.current)||void 0===e||e.scrollTo(0,0)}),[i,k,D,t,m]);const F=()=>{if(!L&&0===R)return(0,g.jsx)("tbody",{children:(0,g.jsx)(x,{columns:d,children:w?w():P("empty")})});const e=R||t,s=Math.ceil(e/t);return(0,n.c$)(s).map((s=>(0,g.jsx)(f,{id:s,limit:t,totalLength:e,rowHeight:c,columns:d,fetchData:o,filters:i,tableName:l,sortParams:I,getRowClassName:u,renderErrorMessage:S,onDataFetched:z,isActive:V.includes(s)},s)))},O=()=>(0,g.jsxs)("table",{className:h("table"),children:[(0,g.jsx)(j,{columns:d,onSort:C,onColumnsResize:N}),F()]});return(0,g.jsx)("div",{ref:A,className:h(null,y),children:b?(0,g.jsxs)(a.l,{children:[(0,g.jsx)(a.l.Controls,{children:b({inited:!L,totalEntities:G,foundEntities:R})}),(0,g.jsx)(a.l.Table,{children:O()})]}):O()})};var T=s(46154);function R(e){let{columnsWidthLSKey:t,columns:s,...r}=e;const[n,a]=(0,T.M)(t),o=function(e,t){return e.map((e=>{var s;return{...e,width:null!==(s=t[e.name])&&void 0!==s?s:e.width}}))}(s,n);return(0,g.jsx)(G,{columns:o,onColumnsResize:a,containerClassName:h("resizeable-table-container"),...r})}},31580:(e,t,s)=>{s.d(t,{m:()=>u});var r=s(99294),n=s(43926),a=s(93060),o=s(10161);const i=(0,r.cn)("ydb-pool-bar"),l=e=>{let{data:t={}}=e;const{Usage:s=0}=t,r=Math.min(100*s,100),l=(e=>e>=75?"danger":e>=50&&e<75?"warning":"normal")(r);return(0,o.jsx)(n.f,{className:i({type:l}),content:(0,o.jsx)(a.A8,{data:t,className:i("popup-content")}),children:(0,o.jsx)("div",{style:{height:`${r}%`},className:i("value",{type:l})})})},d=(0,r.cn)("ydb-pools-graph"),u=e=>{let{pools:t=[]}=e;return(0,o.jsx)("div",{className:d(),children:t.map(((e,t)=>(0,o.jsx)(l,{data:e},t)))})}},20760:(e,t,s)=>{s.d(t,{y:()=>c});var r=s(53216),n=s(99294),a=s(14075),o=s(73689),i=s(10161);const l=(0,n.cn)("progress-viewer"),d=e=>(0,a.uf)((0,a.W0)(Number(e),2)),u=(e,t)=>[d(e),d(t)];function c(e){let{value:t,capacity:s,formatValues:n=u,percents:a,className:d,size:c="xs",colorizeProgress:m,inverseColorize:p,warningThreshold:h=60,dangerThreshold:g=80}=e;const v=(0,r.F)();let N=Math.round(parseFloat(String(t))/parseFloat(String(s))*100)||0;N=N>100?100:N;let b=t,x=s,f="/";a?(b=N+"%",x="",f=""):n&&([b,x]=n(Number(t),Number(s)));let S=p?"danger":"good";m&&(N>h&&N<=g?S="warning":N>g&&(S=p?"good":"danger"),(0,o.kE)(s)||(N=100));const w={width:N+"%"};return(0,o.kE)(t)?(0,i.jsxs)("div",{className:l({size:c,theme:v,status:S},d),children:[(0,i.jsx)("div",{className:l("line"),style:w}),(0,i.jsx)("span",{className:l("text"),children:(0,o.kE)(s)?`${b} ${f} ${x}`:b})]}):(0,i.jsx)("div",{className:`${l({size:c})} ${d} error`,children:"no data"})}},74116:(e,t,s)=>{s.d(t,{G:()=>d});var r=s(59769),n=s(71624),a=s(99294),o=s(46154),i=s(10161);const l=(0,a.cn)("ydb-resizeable-data-table");function d(e){let{columnsWidthLSKey:t,columns:s,settings:a,wrapperClassName:d,...u}=e;const[c,m]=(0,o.M)(t),p=(0,r.B)(s,c),h={...a,defaultResizeable:!0};return(0,i.jsx)("div",{className:l(null,d),children:(0,i.jsx)(n.ZP,{theme:"yandex-cloud",columns:p,onResize:m,settings:h,...u})})}},76485:(e,t,s)=>{s.d(t,{o:()=>l});var r=s(34706),n=s(86357),a=s(99294),o=s(10161);const i=(0,a.cn)("ydb-search"),l=e=>{let{onChange:t,value:s="",className:a,debounce:l=200,placeholder:d}=e;const[u,c]=r.useState(s),m=r.useRef();r.useEffect((()=>{c((e=>e!==s?s:e))}),[s]);return(0,o.jsx)(n.o,{hasClear:!0,autoFocus:!0,className:i(null,a),placeholder:d,value:u,onUpdate:e=>{c(e),window.clearTimeout(m.current),m.current=window.setTimeout((()=>{null===t||void 0===t||t(e)}),l)}})}},73287:(e,t,s)=>{s.d(t,{J:()=>m});var r=s(29254),n=s(96334),a=s(15268),o=s(14561),i=s(77468),l=s(99294),d=s(10161);const u=(0,l.cn)("ydb-status-icon"),c={[i.K.Blue]:r.Z,[i.K.Yellow]:n.Z,[i.K.Orange]:a.Z,[i.K.Red]:n.Z};function m(e){let{status:t=i.K.Grey,size:s="s",mode:r="color",className:n}=e;const a={state:t.toLowerCase(),size:s};return"icons"===r&&t in c?(0,d.jsx)(o.J,{className:u("status-icon",a,n),data:c[t]}):(0,d.jsx)("div",{className:u("status-color",a,n)})}},22877:(e,t,s)=>{s.d(t,{h:()=>l});var r=s(5194),n=s(99294),a=s(83658),o=s(10161);const i=(0,n.cn)("table-skeleton"),l=e=>{let{rows:t=2,delay:s=600,className:n}=e;const[l]=(0,a.$)(s);return(0,o.jsxs)("div",{className:i("wrapper",{hidden:!l},n),children:[(0,o.jsxs)("div",{className:i("row"),children:[(0,o.jsx)(r.O,{className:i("col-1")}),(0,o.jsx)(r.O,{className:i("col-2")}),(0,o.jsx)(r.O,{className:i("col-3")}),(0,o.jsx)(r.O,{className:i("col-4")}),(0,o.jsx)(r.O,{className:i("col-5")})]}),[...new Array(t)].map(((e,t)=>(0,o.jsx)("div",{className:i("row"),children:(0,o.jsx)(r.O,{className:i("col-full")})},`skeleton-row-${t}`)))]})}},74640:(e,t,s)=>{s.d(t,{l:()=>i});var r=s(99294),n=s(22877),a=s(10161);const o=(0,r.cn)("ydb-table-with-controls-layout"),i=e=>{let{children:t,className:s}=e;return(0,a.jsx)("div",{className:o(null,s),children:t})};i.Controls=function(e){let{children:t,className:s}=e;return(0,a.jsx)("div",{className:o("controls-wrapper"),children:(0,a.jsx)("div",{className:o("controls",s),children:t})})},i.Table=function(e){let{children:t,loading:s,className:r}=e;return s?(0,a.jsx)(n.h,{className:o("loader")}):(0,a.jsx)("div",{className:o("table",r),children:t})}},56065:(e,t,s)=>{s.d(t,{X:()=>o});var r=s(67661),n=s(96183),a=s(10161);const o=e=>{let{value:t,onChange:s,className:o}=e;return(0,a.jsxs)(r.E,{value:t,onUpdate:s,className:o,children:[(0,a.jsx)(r.E.Option,{value:n.Uu.All,children:n.qU[n.Uu.All]}),(0,a.jsx)(r.E.Option,{value:n.Uu.SmallUptime,children:n.qU[n.Uu.SmallUptime]})]})}},46931:(e,t,s)=>{s.d(t,{a:()=>i});var r=s(2634),n=s(99294),a=s(10161);const o=(0,n.cn)("ydb-usage-label");function i(e){let{value:t,overloadThreshold:s=90,theme:n,...i}=e;return(0,a.jsxs)(r._,{theme:n,className:o({overload:Number(t)>=s}),...i,children:[t||0,"%"]})}},4893:(e,t,s)=>{s.d(t,{T:()=>I});var r=s(34706),n=s(76421),a=s(99294),o=s(90457),i=s(67653),l=s(24874),d=s(2634),u=s(4969),c=s(77468),m=s(25665),p=s(27810),h=s(14075),g=s(53458),v=s(55842),N=s(73689),b=s(41591),x=s(10570),f=s(75544),S=s(46878);function w(e){let t;const s=(0,g.Iz)(e)?e.VDiskSlotId:e.VSlotId;return(0,m.D)(s)&&(0,m.D)(e.PDiskId)&&(0,m.D)(e.NodeId)?t=(0,S.By)(s,e.PDiskId,e.NodeId):(0,m.D)(e.NodeId)&&(0,g.Iz)(e)&&(t=(0,S.ax)(S.ZP.node,{id:e.NodeId,activeTab:f.pV},{pdiskId:e.PDiskId,vdiskId:(0,h.a2)(e.VDiskId)})),t}var y=s(10161);const D=(0,a.cn)("vdisk-storage-popup"),k=e=>{let{data:t,...s}=e;const n=(0,g.Iz)(t),[a,o]=r.useState(!1),f=r.useCallback((()=>{o(!1)}),[]),S=r.useCallback((()=>{o(!0)}),[]),k=r.useMemo((()=>n?(e=>{var t,s,r,n;const{StringifiedId:a,VDiskState:o,SatisfactionRank:i,DiskSpace:l,FrontQueues:d,Replicated:u,UnsyncedVDisks:m,AllocatedSize:p,ReadThroughput:h,WriteThroughput:g,StoragePoolName:v}=e,b=[{label:"VDisk",value:a},{label:"State",value:null!==o&&void 0!==o?o:"not available"}];var x,f;return v&&b.push({label:"StoragePool",value:v}),i&&(null===(t=i.FreshRank)||void 0===t?void 0:t.Flag)!==c.K.Green&&b.push({label:"Fresh",value:null===(x=i.FreshRank)||void 0===x?void 0:x.Flag}),i&&(null===(s=i.LevelRank)||void 0===s?void 0:s.Flag)!==c.K.Green&&b.push({label:"Level",value:null===(f=i.LevelRank)||void 0===f?void 0:f.Flag}),i&&null!==(r=i.FreshRank)&&void 0!==r&&r.RankPercent&&b.push({label:"Fresh",value:i.FreshRank.RankPercent}),i&&null!==(n=i.LevelRank)&&void 0!==n&&n.RankPercent&&b.push({label:"Level",value:i.LevelRank.RankPercent}),l&&l!==c.K.Green&&b.push({label:"Space",value:l}),d&&d!==c.K.Green&&b.push({label:"FrontQueues",value:d}),u||b.push({label:"Replicated",value:"NO"}),m&&b.push({label:"UnsyncVDisks",value:m}),Number(p)&&b.push({label:"Allocated",value:(0,N.Uz)(p)}),Number(h)&&b.push({label:"Read",value:(0,N.Qt)(h)}),Number(g)&&b.push({label:"Write",value:(0,N.Qt)(g)}),b})(t):(e=>{const{NodeId:t,PDiskId:s,VSlotId:r,StoragePoolName:n}=e,a=[{label:"State",value:"not available"}];return n&&a.push({label:"StoragePool",value:n}),a.push({label:"NodeId",value:null!==t&&void 0!==t?t:p.jX},{label:"PDiskId",value:null!==s&&void 0!==s?s:p.jX},{label:"VSlotId",value:null!==r&&void 0!==r?r:p.jX}),a})(t)),[t,n]),j=(0,v.ix)(u.s),I=(0,m.D)(t.NodeId)?null===j||void 0===j?void 0:j.get(t.NodeId):void 0,C=r.useMemo((()=>n&&t.PDisk&&(0,x.b)(t.PDisk,I)),[t,I,n]),P=[];if("Donors"in t&&t.Donors){const e=t.Donors;for(const t of e){const e=(0,g.Iz)(t);P.push({label:"VDisk",value:(0,y.jsx)(i.h,{to:w(t),children:(0,h.a2)(e?t.VDiskId:{NodeId:t.NodeId,PDiskId:t.PDiskId,VSlotId:t.VSlotId})})})}}return(0,y.jsxs)(l.G,{contentClassName:D(),placement:["top","bottom"],hasArrow:!0,offset:[0,12],onMouseEnter:S,onMouseLeave:f,...s,open:a||s.open,children:[t.DonorMode&&(0,y.jsx)(d._,{className:D("donor-label"),children:"Donor"}),(0,y.jsx)(b._P,{title:"VDisk",info:k,size:"s"}),C&&(0,y.jsx)(b._P,{title:"PDisk",info:C,size:"s"}),P.length>0&&(0,y.jsx)(b._P,{title:"Donors",info:P,size:"s"})]})},j=(0,a.cn)("ydb-vdisk-component"),I=e=>{let{data:t={},compact:s,inactive:a,showPopup:l,onShowPopup:d,onHidePopup:u,progressBarClassName:c}=e;const[m,p]=r.useState(!1),h=r.useRef(null),g=(0,n.debounce)((()=>{p(!0),null===d||void 0===d||d()}),100),v=(0,n.debounce)((()=>{p(!1),null===u||void 0===u||u()}),100),N=w(t);return(0,y.jsxs)(r.Fragment,{children:[(0,y.jsx)("div",{className:j(),ref:h,onMouseEnter:g,onMouseLeave:()=>{g.cancel(),v()},children:(0,y.jsx)(i.h,{to:N,className:j("content"),children:(0,y.jsx)(o.p,{diskAllocatedPercent:t.AllocatedPercent,severity:t.Severity,compact:s,inactive:a,className:c})})}),(0,y.jsx)(k,{data:t,anchorRef:h,open:m||l})]})}},9796:(e,t,s)=>{s.d(t,{eb:()=>V,EF:()=>T,cB:()=>O,Up:()=>E,gs:()=>z,OJ:()=>F,rh:()=>M,Fi:()=>H,A6:()=>P,iJ:()=>G,KO:()=>R,As:()=>_,Zn:()=>A,TX:()=>Z,VQ:()=>L,Zi:()=>U});var r=s(71624),n=s(16124),a=s(25665),o=s(27810),i=s(14075),l=s(61734),d=s(61168),u=s(2194),c=s(75544),m=s(70340),p=s(96183),h=s(98779),g=s(62508),v=s(93060),N=s(10161);const b=e=>{let{node:t,getNodeRef:s,database:r}=e;if(!t.Host)return(0,N.jsx)("span",{children:"\u2014"});const n=!(0,p.TA)(t);let a;s?a=s(t)+"internal":t.NodeId&&(a=(0,m.wq)(t.NodeId)+"internal");const o=n?(0,c.a3)(t.NodeId,{tenantName:null!==r&&void 0!==r?r:t.TenantName}):void 0,i=a?(0,N.jsx)(h.Q,{href:a}):null;return(0,N.jsx)(d.l,{disabled:!n,content:(0,N.jsx)(v.bP,{data:t}),placement:["top","bottom"],behavior:u.x.Immediate,children:(0,N.jsx)(g.A,{name:t.Host,status:t.SystemState,path:o,hasClipboardButton:!0,additionalControls:i})})};var x=s(31580),f=s(20760),S=s(26836),w=s(46878),y=s(99294),D=s(55973);const k=(0,y.cn)("tablets-statistic"),j=e=>{let{tablets:t=[],tenantName:s,nodeId:r,backend:n}=e;const a=(e=>e.map((e=>({label:(0,o.qV)(e.Type),type:e.Type,count:e.Count,state:(0,D.FW)(e.State)}))).sort(((e,t)=>String(e.label).localeCompare(String(t.label)))))(t);return(0,N.jsx)("div",{className:k(),children:a.map(((e,t)=>{var a;const o=(0,w.ax)(w.ZP.node,{id:r,activeTab:c.IA},{tenantName:s,backend:n}),i=`${e.label}: ${e.count}`,l=k("tablet",{state:null===(a=e.state)||void 0===a?void 0:a.toLowerCase()});return n?(0,N.jsx)("a",{href:o,className:l,children:i},t):(0,N.jsx)(S.rU,{to:o,className:l,children:i},t)}))})};var I=s(46931),C=s(27660);function P(){return{name:C.xv.NodeId,header:"#",width:80,render:e=>{let{row:t}=e;return t.NodeId},align:r.ZP.RIGHT}}function E(e){let{getNodeRef:t,database:s}=e;return{name:C.xv.Host,header:C.Pr.Host,render:e=>{let{row:r}=e;return(0,N.jsx)(b,{node:r,getNodeRef:t,database:s})},width:350,align:r.ZP.LEFT}}function G(){return{name:C.xv.NodeName,header:C.Pr.NodeName,align:r.ZP.LEFT,render:e=>{let{row:t}=e;return t.NodeName||o.jX},width:200}}function T(){return{name:C.xv.DC,header:C.Pr.DC,align:r.ZP.LEFT,render:e=>{let{row:t}=e;return t.DC||o.jX},width:60}}function R(){return{name:C.xv.Rack,header:C.Pr.Rack,align:r.ZP.LEFT,render:e=>{let{row:t}=e;return t.Rack||o.jX},width:100}}function U(){return{name:C.xv.Version,header:C.Pr.Version,width:200,align:r.ZP.LEFT,render:e=>{let{row:t}=e;return(0,N.jsx)(d.l,{content:t.Version,children:t.Version})}}}function L(){return{name:C.xv.Uptime,header:C.Pr.Uptime,sortAccessor:e=>{let{StartTime:t}=e;return t?-t:0},render:e=>{let{row:t}=e;return t.Uptime},align:r.ZP.RIGHT,width:110}}function M(){return{name:C.xv.Memory,header:C.Pr.Memory,sortAccessor:e=>{let{MemoryUsed:t=0}=e;return Number(t)},defaultOrder:r.ZP.DESCENDING,render:e=>{let{row:t}=e;return(0,N.jsx)(f.y,{value:t.MemoryUsed,capacity:t.MemoryLimit,formatValues:i.q3,colorizeProgress:!0})},align:r.ZP.LEFT,width:140,resizeMinWidth:140}}function A(){return{name:C.xv.SharedCacheUsage,header:C.Pr.SharedCacheUsage,render:e=>{let{row:t}=e;return(0,N.jsx)(f.y,{value:t.SharedCacheUsed,capacity:t.SharedCacheLimit,formatValues:i.q3,colorizeProgress:!0})},align:r.ZP.LEFT,width:140,resizeMinWidth:140}}function V(){return{name:C.xv.CPU,header:C.Pr.CPU,sortAccessor:e=>{let{PoolStats:t=[]}=e;return Math.max(...t.map((e=>{let{Usage:t}=e;return Number(t)})))},defaultOrder:r.ZP.DESCENDING,render:e=>{let{row:t}=e;return t.PoolStats?(0,N.jsx)(x.m,{pools:t.PoolStats}):o.jX},align:r.ZP.LEFT,width:80,resizeMinWidth:60}}function z(){return{name:C.xv.LoadAverage,header:C.Pr.LoadAverage,sortAccessor:e=>{let{LoadAveragePercents:t=[]}=e;return t[0]},defaultOrder:r.ZP.DESCENDING,render:e=>{let{row:t}=e;return(0,N.jsx)(f.y,{value:t.LoadAveragePercents&&t.LoadAveragePercents.length>0?t.LoadAveragePercents[0]:void 0,percents:!0,colorizeProgress:!0,capacity:100})},align:r.ZP.LEFT,width:140,resizeMinWidth:140}}function F(){return{name:C.xv.Load,header:C.Pr.Load,sortAccessor:e=>{let{LoadAveragePercents:t=[]}=e;return t[0]},defaultOrder:r.ZP.DESCENDING,render:e=>{let{row:t}=e;return t.LoadAveragePercents&&t.LoadAveragePercents.length>0?(0,N.jsx)(I.a,{value:t.LoadAveragePercents[0].toFixed(),theme:(0,n.w)(t.LoadAveragePercents[0])}):o.jX},align:r.ZP.LEFT,width:80,resizeMinWidth:70}}function O(){return{name:C.xv.DiskSpaceUsage,header:C.Pr.DiskSpaceUsage,render:e=>{let{row:t}=e;return(0,a.D)(t.DiskSpaceUsage)?(0,N.jsx)(I.a,{value:Math.floor(t.DiskSpaceUsage),theme:(0,l.HQ)(t.DiskSpaceUsage)}):o.jX},align:r.ZP.LEFT,width:115,resizeMinWidth:75}}function _(){return{name:C.xv.TotalSessions,header:C.Pr.TotalSessions,render:e=>{var t;let{row:s}=e;return null!==(t=s.TotalSessions)&&void 0!==t?t:o.jX},align:r.ZP.RIGHT,width:100}}function Z(e){let{database:t}=e;return{name:C.xv.Tablets,header:C.Pr.Tablets,width:500,resizeMinWidth:500,render:e=>{let{row:s}=e;return s.Tablets?(0,N.jsx)(j,{tenantName:null!==t&&void 0!==t?t:s.TenantName,nodeId:s.NodeId,tablets:s.Tablets}):o.jX},align:r.ZP.LEFT,sortable:!1}}function H(){return{name:C.xv.Missing,header:C.Pr.Missing,render:e=>{let{row:t}=e;return t.Missing},align:r.ZP.CENTER,defaultOrder:r.ZP.DESCENDING}}},27660:(e,t,s)=>{s.d(t,{xv:()=>i,Pr:()=>l,t5:()=>o});var r=s(37711);const n=JSON.parse('{"node-id":"Node ID","host":"Host","node-name":"Node Name","dc":"DC","rack":"Rack","version":"Version","uptime":"Uptime","memory":"Memory","cpu":"CPU","disk-usage":"Disk usage","tablets":"Tablets","load-average":"Load Average","load":"Load","caches":"Caches","sessions":"Sessions","missing":"Missing"}'),a=(0,r.wZ)("ydb-nodes-columns",{en:n}),o="nodesTableColumnsWidth",i={NodeId:"NodeId",Host:"Host",NodeName:"NodeName",DC:"DC",Rack:"Rack",Version:"Version",Uptime:"Uptime",Memory:"Memory",CPU:"CPU",LoadAverage:"LoadAverage",Load:"Load",DiskSpaceUsage:"DiskSpaceUsage",SharedCacheUsage:"SharedCacheUsage",TotalSessions:"TotalSessions",Missing:"Missing",Tablets:"Tablets"},l={get NodeId(){return a("node-id")},get Host(){return a("host")},get NodeName(){return a("node-name")},get DC(){return a("dc")},get Rack(){return a("rack")},get Version(){return a("version")},get Uptime(){return a("uptime")},get Memory(){return a("memory")},get CPU(){return a("cpu")},get LoadAverage(){return a("load-average")},get Load(){return a("load")},get DiskSpaceUsage(){return a("disk-usage")},get SharedCacheUsage(){return a("caches")},get TotalSessions(){return a("sessions")},get Missing(){return a("missing")},get Tablets(){return a("tablets")}}},98530:(e,t,s)=>{s.d(t,{l:()=>v});var r=s(34706),n=s(76421),a=s(90457),o=s(67653),i=s(10570),l=s(4893),d=s(46878),u=s(25665),c=s(99294),m=s(75544),p=s(14418),h=s(10161);const g=(0,c.cn)("pdisk-storage"),v=e=>{let{data:t={},vDisks:s,showPopup:c,onShowPopup:v,onHidePopup:N,className:b,progressBarClassName:x,viewContext:f}=e;const[S,w]=r.useState(!1),y=r.useRef(null),{NodeId:D,PDiskId:k}=t,j=(0,u.D)(D)&&(0,u.D)(k),I=(0,n.debounce)((()=>{w(!0),null===v||void 0===v||v()}),100),C=(0,n.debounce)((()=>{w(!1),null===N||void 0===N||N()}),100);let P;return j&&(P=(0,d.ax)(d.ZP.node,{id:D,activeTab:m.pV},{pdiskId:k})),j&&(P=(0,d.ds)(k,D)),(0,h.jsxs)(r.Fragment,{children:[(0,h.jsxs)("div",{className:g(null,b),ref:y,children:[null!==s&&void 0!==s&&s.length?(0,h.jsx)("div",{className:g("vdisks"),children:s.map((e=>(0,h.jsx)("div",{className:g("vdisks-item"),style:{flexGrow:Number(e.AllocatedSize)||1},children:(0,h.jsx)(l.T,{data:e,inactive:!(0,p.XW)(e,f),compact:!0})},e.StringifiedId)))}):null,(0,h.jsxs)(o.h,{to:P,className:g("content"),onMouseEnter:I,onMouseLeave:()=>{I.cancel(),C()},children:[(0,h.jsx)(a.p,{diskAllocatedPercent:t.AllocatedPercent,severity:t.Severity,className:x}),(0,h.jsx)("div",{className:g("media-type"),children:t.Type})]})]}),(0,h.jsx)(i.J,{data:t,anchorRef:y,open:S||c})]})}},96635:(e,t,s)=>{s.d(t,{V:()=>ee,m:()=>q});var r=s(34706),n=s(51553),a=s(71624),o=s(2194),i=s(2634),l=s(16318),d=s(14561),u=s(61168),c=s(62508),m=s(67653),p=s(46931),h=s(14075),g=s(53458),v=s(99294),N=s(10161);const b=(0,v.cn)("stack"),x=e=>{let{children:t,className:s}=e;return(0,N.jsx)("div",{className:b(null,s),children:r.Children.map(t,((e,t)=>r.isValidElement(e)?(0,N.jsx)("div",{className:b("layer"),style:{"--ydb-stack-level":t},children:e}):null))})};var f=s(4893);function S(e){let{data:t,className:s,stackClassName:r,...n}=e;const{Donors:a,...o}=t||{},i=a&&a.length>0?(0,N.jsxs)(x,{className:r,children:[(0,N.jsx)(f.T,{data:o,...n}),a.map((e=>{const t=(0,g.Iz)(e);return(0,N.jsx)(f.T,{data:e,...n},(0,h.a2)(t?e.VDiskId:e))}))]}):(0,N.jsx)(f.T,{data:t,...n});return(0,N.jsx)("div",{className:s,children:i})}var w=s(46878),y=s(25665),D=s(27810),k=s(61734),j=s(83627),I=s(73689),C=s(98530),P=s(14418);const E=(0,v.cn)("ydb-storage-disks");function G(e){let{vDisks:t=[],viewContext:s}=e;const[n,a]=r.useState();return t.length?(0,N.jsxs)("div",{className:E(null),children:[(0,N.jsx)("div",{className:E("vdisks-wrapper"),children:null===t||void 0===t?void 0:t.map((e=>(0,N.jsx)(T,{vDisk:e,inactive:!(0,P.XW)(e,s),highlightedVDisk:n,setHighlightedVDisk:a},e.StringifiedId)))}),(0,N.jsx)("div",{className:E("pdisks-wrapper"),children:null===t||void 0===t?void 0:t.map((e=>{var t;return(0,N.jsx)(R,{vDisk:e,highlightedVDisk:n,setHighlightedVDisk:a},(0,g.CH)(e.NodeId,null===e||void 0===e||null===(t=e.PDisk)||void 0===t?void 0:t.PDiskId))}))})]}):null}function T(e){let{vDisk:t,highlightedVDisk:s,inactive:r,setHighlightedVDisk:n}=e;const a={...t,PDisk:void 0},o=t.StringifiedId;return(0,N.jsx)("div",{style:{flexGrow:Number(t.AllocatedSize)||1},className:E("vdisk-item"),children:(0,N.jsx)(f.T,{data:a,compact:!0,inactive:r,showPopup:s===o,onShowPopup:()=>n(o),onHidePopup:()=>n(void 0),progressBarClassName:E("vdisk-progress-bar")})})}function R(e){let{vDisk:t,highlightedVDisk:s,setHighlightedVDisk:r}=e;const n=t.StringifiedId;return t.PDisk?(0,N.jsx)(C.l,{className:E("pdisk-item"),progressBarClassName:E("pdisk-progress-bar"),data:t.PDisk,showPopup:s===n,onShowPopup:()=>r(n),onHidePopup:()=>r(void 0)}):null}var U=s(50791),L=s(78090);const M=(0,v.cn)("ydb-storage-groups-columns"),A={name:L.tn.PoolName,header:L.G0.PoolName,width:250,render:e=>{let{row:t}=e;return t.PoolName?(0,N.jsx)(u.l,{content:t.PoolName,placement:["right"],behavior:o.x.Immediate,className:M("pool-name-wrapper"),children:(0,N.jsx)("span",{className:M("pool-name"),children:t.PoolName})}):D.jX},align:a.ZP.LEFT},V={name:L.tn.MediaType,header:L.G0.MediaType,width:100,resizeMinWidth:100,align:a.ZP.LEFT,render:e=>{let{row:t}=e;return(0,N.jsxs)(r.Fragment,{children:[(0,N.jsx)(i._,{children:t.MediaType||"\u2014"}),"\xa0",t.Encryption&&(0,N.jsx)(l.J,{content:(0,U.Z)("encrypted"),placement:"right",behavior:o.x.Immediate,children:(0,N.jsx)(i._,{children:(0,N.jsx)(d.J,{data:n.Z,size:18})})})]})},sortable:!1},z={name:L.tn.Erasure,header:L.G0.Erasure,width:100,sortAccessor:e=>e.ErasureSpecies,render:e=>{let{row:t}=e;return t.ErasureSpecies?t.ErasureSpecies:"-"},align:a.ZP.LEFT},F={name:L.tn.Degraded,header:L.G0.Degraded,width:110,resizeMinWidth:110,render:e=>{let{row:t}=e;return t.Degraded?(0,N.jsxs)(i._,{theme:(0,P._O)(t),children:["Degraded: ",t.Degraded]}):"-"},align:a.ZP.LEFT,defaultOrder:a.ZP.DESCENDING},O={name:L.tn.Usage,header:L.G0.Usage,width:85,resizeMinWidth:75,render:e=>{let{row:t}=e;return(0,y.D)(t.Usage)?(0,N.jsx)(p.a,{value:Math.floor(t.Usage),theme:(0,k.HQ)(t.Usage)}):D.jX},align:a.ZP.LEFT},_={name:L.tn.DiskSpaceUsage,header:L.G0.DiskSpaceUsage,width:115,resizeMinWidth:75,render:e=>{let{row:t}=e;return(0,y.D)(t.DiskSpaceUsage)?(0,N.jsx)(p.a,{value:Math.floor(t.DiskSpaceUsage),theme:(0,k.HQ)(t.DiskSpaceUsage)}):D.jX},align:a.ZP.LEFT},Z={name:L.tn.GroupId,header:L.G0.GroupId,width:130,render:e=>{let{row:t}=e;return t.GroupId?(0,N.jsx)(m.h,{className:M("group-id"),to:(0,w.Uu)(t.GroupId),children:t.GroupId}):"-"},sortAccessor:e=>Number(e.GroupId),align:a.ZP.RIGHT},H={name:L.tn.Used,header:L.G0.Used,width:100,render:e=>{let{row:t}=e;return(0,I.Uz)(t.Used,!0)},align:a.ZP.RIGHT},W={name:L.tn.Limit,header:L.G0.Limit,width:100,render:e=>{let{row:t}=e;return(0,I.Uz)(t.Limit)},align:a.ZP.RIGHT},B={name:L.tn.DiskSpace,header:L.G0.DiskSpace,width:110,render:e=>{let{row:t}=e;return(0,N.jsx)(c.A,{status:t.DiskSpace})},align:a.ZP.CENTER},K={name:L.tn.Read,header:L.G0.Read,width:100,render:e=>{let{row:t}=e;return t.Read?(0,I.Qt)(t.Read):"-"},align:a.ZP.RIGHT},$={name:L.tn.Write,header:L.G0.Write,width:100,render:e=>{let{row:t}=e;return t.Write?(0,I.Qt)(t.Write):"-"},align:a.ZP.RIGHT},Q={name:L.tn.Latency,header:L.G0.Latency,width:100,render:e=>{let{row:t}=e;return(0,y.D)(t.LatencyPutTabletLogMs)?(0,j.zm)(t.LatencyPutTabletLogMs):D.jX},align:a.ZP.RIGHT},X={name:L.tn.AllocationUnits,header:L.G0.AllocationUnits,width:150,render:e=>{let{row:t}=e;return(0,y.D)(t.AllocationUnits)?(0,h.uf)(t.AllocationUnits):D.jX},align:a.ZP.RIGHT},J=e=>({name:L.tn.VDisks,header:L.G0.VDisks,className:M("vdisks-column"),render:t=>{var s;let{row:r}=t;return(0,N.jsx)("div",{className:M("vdisks-wrapper"),children:null===(s=r.VDisks)||void 0===s?void 0:s.map((t=>(0,N.jsx)(S,{data:t,inactive:!(0,P.XW)(t,null===e||void 0===e?void 0:e.viewContext),className:M("vdisks-item")},t.StringifiedId)))})},align:a.ZP.CENTER,width:900,resizeable:!1,sortable:!1}),Y=e=>({name:L.tn.VDisksPDisks,header:L.G0.VDisksPDisks,className:M("disks-column"),render:t=>{let{row:s}=t;return(0,N.jsx)(G,{vDisks:s.VDisks,viewContext:null===e||void 0===e?void 0:e.viewContext})},align:a.ZP.CENTER,width:900,resizeable:!1,sortable:!1}),q=()=>[Z,V,z,O,H,W].map((e=>({...e,sortable:!1}))),ee=e=>[Z,A,V,z,F,O,_,H,W,B,K,$,Q,X,J(e),Y(e)].map((e=>({...e,sortable:(0,k.P7)(e.name)})))},78090:(e,t,s)=>{s.d(t,{nu:()=>u,Rt:()=>c,tn:()=>d,G0:()=>m,Ty:()=>i,r8:()=>h,j0:()=>l,Hx:()=>g});var r=s(75475),n=s(37711);const a=JSON.parse('{"pool-name":"Pool Name","type":"Type","encryption":"Encryption","erasure":"Erasure","degraded":"Degraded","missing-disks":"Missing Disks","state":"State","usage":"Usage","disk-usage":"Disk usage","group-id":"Group ID","used":"Used","limit":"Limit","space":"Space","read":"Read","write":"Write","latency":"Latency","allocation-units":"Allocation Units","vdisks":"VDisks","vdisks-pdisks":"VDisks with PDisks"}'),o=(0,n.wZ)("ydb-storage-groups-columns",{en:a}),i="storageGroupsColumnsWidth",l="storageGroupsSelectedColumns",d={GroupId:"GroupId",PoolName:"PoolName",MediaType:"MediaType",Encryption:"Encryption",Erasure:"Erasure",Used:"Used",Limit:"Limit",Usage:"Usage",DiskSpaceUsage:"DiskSpaceUsage",DiskSpace:"DiskSpace",Read:"Read",Write:"Write",Latency:"Latency",AllocationUnits:"AllocationUnits",VDisks:"VDisks",VDisksPDisks:"VDisksPDisks",MissingDisks:"MissingDisks",Degraded:"Degraded",State:"State"},u=["GroupId","PoolName","MediaType","Erasure","Used","Limit","Usage","Read","Write","VDisks"],c=["GroupId"],m={get PoolName(){return o("pool-name")},get MediaType(){return o("type")},get Encryption(){return o("encryption")},get Erasure(){return o("erasure")},get GroupId(){return o("group-id")},get Used(){return o("used")},get Limit(){return o("limit")},get Usage(){return o("usage")},get DiskSpaceUsage(){return o("disk-usage")},get DiskSpace(){return o("space")},get Read(){return o("read")},get Write(){return o("write")},get Latency(){return o("latency")},get AllocationUnits(){return o("allocation-units")},get VDisks(){return o("vdisks")},get VDisksPDisks(){return o("vdisks-pdisks")},get Degraded(){return o("missing-disks")},get MissingDisks(){return o("missing-disks")},get State(){return o("state")}},p=["PoolName","MediaType","Encryption","Erasure","Usage","DiskSpaceUsage","State","MissingDisks","Latency"],h=p.map((e=>({value:e,content:m[e]}))),g=r.z.custom((e=>p.includes(e))).catch(void 0)},50791:(e,t,s)=>{s.d(t,{Z:()=>o});var r=s(37711);const n=JSON.parse('{"empty.default":"No such groups","empty.out_of_space":"No groups with out of space errors","empty.degraded":"No degraded groups","show_all":"Show all groups","encrypted":"Encrypted group"}'),a=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f","empty.out_of_space":"\u041d\u0435\u0442 \u0433\u0440\u0443\u043f\u043f, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0433\u0440\u0443\u043f\u043f","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0433\u0440\u0443\u043f\u043f\u044b","encrypted":"\u0417\u0430\u0448\u0438\u0444\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430"}'),o=(0,r.wZ)("ydb-storage-groups",{ru:a,en:n})},35120:(e,t,s)=>{s.d(t,{V:()=>nt});var r=s(27810),n=s(55842),a=s(34706),o=s(87149),i=s(48653),l=s(74640),d=s(39202),u=s(89085),c=s(38471),m=s(23795),p=s(98647),h=s(14325),g=s(76485),v=s(56065),N=s(78090),b=s(75475),x=s(27660),f=s(37711);const S=(0,f.wZ)("ydb-storage-nodes-columns",{en:{pdisks:"PDisks"}}),w="storageNodesColumnsWidth",y="storageNodesSelectedColumns",D={...x.xv,PDisks:"PDisks"},k=["NodeId","Host","DC","Rack","CPU","Uptime","PDisks"],j=["NodeId"],I={...x.Pr,get PDisks(){return S("pdisks")}},C=["Host","DC","Rack","Version","Uptime","Missing","DiskSpaceUsage"],P=C.map((e=>({value:e,content:I[e]}))),E=b.z.custom((e=>C.includes(e))).catch(void 0);var G=s(67661),T=s(34695),R=s(10161);const U={[T.d.groups]:"Groups",[T.d.nodes]:"Nodes"},L=e=>{let{value:t,onChange:s}=e;return(0,R.jsxs)(G.E,{value:t,onUpdate:s,qa:"storage-type-filter",children:[(0,R.jsx)(G.E.Option,{value:T.d.groups,children:U[T.d.groups]}),(0,R.jsx)(G.E.Option,{value:T.d.nodes,children:U[T.d.nodes]})]})},M={[T.G.all]:"All",[T.G.missing]:"Degraded",[T.G.space]:"Out of Space"},A=e=>{let{value:t,onChange:s}=e;return(0,R.jsxs)(G.E,{value:t,onUpdate:s,qa:"storage-visible-entities-filter",children:[(0,R.jsx)(G.E.Option,{value:T.G.missing,children:M[T.G.missing]}),(0,R.jsx)(G.E.Option,{value:T.G.space,children:M[T.G.space]}),(0,R.jsx)(G.E.Option,{value:T.G.all,children:M[T.G.all]})]})},V=JSON.parse('{"groups":"Groups","nodes":"Nodes","controls_groups-search-placeholder":"Group ID, Pool name","controls_nodes-search-placeholder":"Node ID, FQDN","controls_group-by-placeholder":"Group by:","no-nodes":"No such nodes","no-groups":"No such groups"}'),z=(0,f.wZ)("ydb-storage",{en:V});var F=s(71037),O=s(15327),_=s(99294);const Z=(0,_.cn)("global-storage"),H=e=>403===e.status?(0,R.jsx)(F.J,{position:"left"}):(0,R.jsx)(O.V,{error:e});var W=s(99495);const B=b.z.nativeEnum(T.G).catch(T.G.all),K=b.z.nativeEnum(T.d).catch(T.d.groups);var $=s(96183);function Q(){var e;const[t,s]=(0,W.useQueryParams)({type:W.StringParam,visible:W.StringParam,search:W.StringParam,uptimeFilter:W.StringParam,storageNodesGroupBy:W.StringParam,storageGroupsGroupBy:W.StringParam}),r=K.parse(t.type),n=B.parse(t.visible),a=null!==(e=t.search)&&void 0!==e?e:"",o=$.U8.parse(t.uptimeFilter),i=N.Hx.parse(t.storageGroupsGroupBy),l=E.parse(t.storageNodesGroupBy),d=e=>{s({visible:e},"replaceIn")},u=e=>{s({uptimeFilter:e},"replaceIn")};return{storageType:r,visibleEntities:n,searchValue:a,nodesUptimeFilter:o,storageGroupsGroupByParam:i,storageNodesGroupByParam:l,handleTextFilterChange:e=>{s({search:e||void 0},"replaceIn")},handleVisibleEntitiesChange:d,handleStorageTypeChange:e=>{s({type:e},"replaceIn")},handleUptimeFilterChange:u,handleStorageGroupsGroupByParamChange:e=>{s({storageGroupsGroupBy:e},"replaceIn")},handleStorageNodesGroupByParamChange:e=>{s({storageNodesGroupBy:e},"replaceIn")},handleShowAllGroups:()=>{d("all")},handleShowAllNodes:()=>{d("all"),u($.Uu.All)}}}function X(e){let{withTypeSelector:t,withGroupBySelect:s,entitiesCountCurrent:r,entitiesCountTotal:n,entitiesLoading:o,columnsToSelect:i,handleSelectedColumnsUpdate:l}=e;const{searchValue:d,storageType:u,visibleEntities:v,storageGroupsGroupByParam:b,handleTextFilterChange:x,handleStorageTypeChange:f,handleVisibleEntitiesChange:S,handleStorageGroupsGroupByParamChange:w}=Q();return(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(g.o,{value:d,onChange:x,placeholder:z("controls_groups-search-placeholder"),className:Z("search")}),t&&(0,R.jsx)(L,{value:u,onChange:f}),s?null:(0,R.jsx)(A,{value:v,onChange:S}),(0,R.jsx)(h.C,{label:z("groups"),loading:o,total:n,current:r}),(0,R.jsx)(c.N,{popupWidth:200,items:i,showStatus:!0,onUpdate:l,sortable:!1}),s?(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(m.x,{variant:"body-2",children:z("controls_group-by-placeholder")}),(0,R.jsx)(p.P,{hasClear:!0,placeholder:"-",width:150,defaultValue:b?[b]:void 0,onUpdate:e=>{w(e[0])},options:N.r8})]}):null]})}function J(e){let{withTypeSelector:t,withGroupBySelect:s,entitiesCountCurrent:r,entitiesCountTotal:n,entitiesLoading:o,columnsToSelect:i,handleSelectedColumnsUpdate:l}=e;const{searchValue:d,storageType:u,visibleEntities:N,nodesUptimeFilter:b,storageNodesGroupByParam:x,handleTextFilterChange:f,handleStorageTypeChange:S,handleVisibleEntitiesChange:w,handleUptimeFilterChange:y,handleStorageNodesGroupByParamChange:D}=Q();return(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(g.o,{value:d,onChange:f,placeholder:z("controls_nodes-search-placeholder"),className:Z("search")}),t&&(0,R.jsx)(L,{value:u,onChange:S}),s?null:(0,R.jsx)(A,{value:N,onChange:w}),s?null:(0,R.jsx)(v.X,{value:b,onChange:y}),(0,R.jsx)(h.C,{label:z("nodes"),loading:o,total:n,current:r}),(0,R.jsx)(c.N,{popupWidth:200,items:i,showStatus:!0,onUpdate:l,sortable:!1}),s?(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(m.x,{variant:"body-2",children:z("controls_group-by-placeholder")}),(0,R.jsx)(p.P,{hasClear:!0,placeholder:"-",width:150,defaultValue:x?[x]:void 0,onUpdate:e=>{D(e[0])},options:P})]}):null]})}var Y=s(79317),q=s(72616),ee=s(90205),te=s(91538);const se=JSON.parse('{"default_message":"Everything is fine!","default_button_label":"Show All"}'),re=JSON.parse('{"default_message":"\u0412\u0441\u0451 \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435!","default_button_label":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}'),ne=(0,f.wZ)("ydb-storage-empty-filter",{ru:re,en:se}),ae=e=>{let{title:t,message:s=ne("default_message"),showAll:r=ne("default_button_label"),onShowAll:n}=e;return(0,R.jsx)(ee.u,{image:(0,R.jsx)(te.Q,{name:"thumbsUp"}),position:"left",title:t,description:s,actions:n&&[(0,R.jsx)(q.z,{onClick:n,children:r},"show-all")]})};var oe=s(50791);const ie=e=>{let t,{visibleEntities:s,onShowAll:r}=e;return s===T.G.space&&(t=(0,oe.Z)("empty.out_of_space")),s===T.G.missing&&(t=(0,oe.Z)("empty.degraded")),t?(0,R.jsx)(ae,{title:t,showAll:(0,oe.Z)("show_all"),onShowAll:r}):null};var le=s(55993),de=s(89991),ue=s(61734);const ce=e=>{let{columns:t,database:s,nodeId:r,groupId:n,pDiskId:o,filterGroup:l,filterGroupBy:u,searchValue:c,visibleEntities:m,onShowAll:p,parentRef:h,renderControls:g,renderErrorMessage:v,initialEntitiesCount:b}=e;const x=(0,d.rU)(),f=(0,d.tS)(),S=(w=f,a.useCallback((async e=>{const{limit:t,offset:s,sortParams:r,filters:n}=e,{sortOrder:a,columnId:o}=null!==r&&void 0!==r?r:{},{searchValue:i,visibleEntities:l,database:d,nodeId:u,groupId:c,pDiskId:m,filterGroup:p,filterGroupBy:h}=null!==n&&void 0!==n?n:{},g=(0,ue.P7)(o)?(0,de.A)(o,a):void 0,{groups:v,found:N,total:b}=await(0,le.R)({limit:t,offset:s,sort:g,filter:i,with:l,database:d,nodeId:u,groupId:c,pDiskId:m,filter_group:p,filter_group_by:h,shouldUseGroupsHandler:w});return{data:v||[],found:N||0,total:b||0}}),[w]));var w;const y=a.useMemo((()=>({searchValue:c,visibleEntities:m,database:s,nodeId:r,groupId:n,pDiskId:o,filterGroup:l,filterGroupBy:u})),[c,m,s,r,n,o,l,u]);return(0,R.jsx)(i.s,{loading:!x,children:(0,R.jsx)(Y.WQ,{columnsWidthLSKey:N.Ty,parentRef:h,columns:t,fetchData:S,limit:50,initialEntitiesCount:b,renderControls:g,renderErrorMessage:v,renderEmptyDataMessage:()=>m!==T.G.all?(0,R.jsx)(ie,{onShowAll:p,visibleEntities:m}):(0,oe.Z)("empty.default"),filters:y,tableName:"storage-groups"})})};var me=s(97485),pe=s(96635);function he(e){return a.useMemo((()=>(0,pe.V)({viewContext:e})),[e])}function ge(e){let{visibleEntities:t,viewContext:s}=e;const r=he(s),n=a.useMemo((()=>t===T.G.missing?[...N.Rt,N.tn.Degraded]:t===T.G.space?[...N.Rt,N.tn.DiskSpace]:N.Rt),[t]);return(0,me.N)(r,N.j0,N.G0,N.nu,n)}var ve=s(81778),Ne=s(2634);const be=(0,_.cn)("ydb-table-group");function xe(e){let{children:t,title:s,entityName:r,count:n,expanded:a=!1,onIsExpandedChange:o}=e;const i=()=>{o(s,!a)};return(0,R.jsxs)("div",{className:be(null),children:[(0,R.jsx)("button",{onClick:i,className:be("button"),title:s,children:(0,R.jsxs)("div",{className:be("title-wrapper"),children:[(0,R.jsx)(ve.F,{direction:a?"top":"bottom"}),(0,R.jsxs)("div",{className:be("title"),children:[(0,R.jsx)(m.x,{variant:"subheader-2",children:s}),(0,R.jsxs)(m.x,{variant:"body-2",color:"secondary",className:be("count"),children:[r,": ",(0,R.jsx)(Ne._,{theme:"normal",children:n})]})]})]})}),a?(0,R.jsx)("div",{className:be("content"),children:t}):null]})}function fe(e){const[t,s]=a.useState({});a.useEffect((()=>{null!==e&&void 0!==e&&e.length&&s((t=>e.reduce(((e,s)=>{let{name:r}=s;const n=t[r];return{...e,[r]:null!==n&&void 0!==n&&n}}),{})))}),[e]);return{expandedGroups:t,setIsGroupExpanded:a.useCallback(((e,t)=>{s((s=>({...s,[e]:t})))}),[])}}function Se(e){const{storageGroupsGroupByParam:t,visibleEntities:s,handleShowAllGroups:r}=Q(),n=(0,d.rU)(),o=(0,d.Pq)();a.useEffect((()=>{o&&"all"!==s&&r()}),[r,o,s]);return(0,R.jsx)(i.s,{loading:!n,children:o&&t?(0,R.jsx)(ye,{...e}):(0,R.jsx)(we,{...e})})}function we(e){let{database:t,nodeId:s,groupId:r,pDiskId:n,viewContext:a,parentRef:o,initialEntitiesCount:i}=e;const{searchValue:l,visibleEntities:u,handleShowAllGroups:c}=Q(),m=(0,d.Pq)(),{columnsToShow:p,columnsToSelect:h,setColumns:g}=ge({visibleEntities:u,viewContext:a});return(0,R.jsx)(ce,{database:t,nodeId:s,groupId:r,pDiskId:n,searchValue:l,visibleEntities:u,onShowAll:c,parentRef:o,renderControls:e=>{let{totalEntities:t,foundEntities:s,inited:r}=e;return(0,R.jsx)(X,{withTypeSelector:!0,withGroupBySelect:m,entitiesCountCurrent:s,entitiesCountTotal:t,entitiesLoading:!r,columnsToSelect:h,handleSelectedColumnsUpdate:g})},renderErrorMessage:H,columns:p,initialEntitiesCount:i})}function ye(e){let{database:t,nodeId:s,groupId:r,pDiskId:a,viewContext:i}=e;const[d]=(0,n.Rj)(),{searchValue:c,storageGroupsGroupByParam:m,visibleEntities:p,handleShowAllGroups:h}=Q(),{columnsToShow:g,columnsToSelect:v,setColumns:N}=ge({visibleEntities:p,viewContext:i}),{currentData:b,isFetching:x,error:f}=u.y.useGetStorageGroupsInfoQuery({database:t,with:"all",nodeId:s,groupId:r,pDiskId:a,filter:c,shouldUseGroupsHandler:!0,group:m},{pollingInterval:d}),S=void 0===b&&x,{tableGroups:w,found:y=0,total:D=0}=b||{},{expandedGroups:k,setIsGroupExpanded:j}=fe(w);return(0,R.jsxs)(l.l,{children:[(0,R.jsx)(l.l.Controls,{children:(0,R.jsx)(X,{withTypeSelector:!0,withGroupBySelect:!0,entitiesCountCurrent:y,entitiesCountTotal:D,entitiesLoading:S,columnsToSelect:v,handleSelectedColumnsUpdate:N})}),f?(0,R.jsx)(o.V,{error:f}):null,(0,R.jsx)(l.l.Table,{loading:S,className:Z("groups-wrapper"),children:null!==w&&void 0!==w&&w.length?w.map((e=>{let{name:n,count:o}=e;const i=k[n];return(0,R.jsx)(xe,{title:n,count:o,entityName:z("groups"),expanded:i,onIsExpandedChange:j,children:(0,R.jsx)(ce,{database:t,nodeId:s,groupId:r,pDiskId:a,filterGroup:n,filterGroupBy:m,searchValue:c,visibleEntities:"all",onShowAll:h,renderErrorMessage:H,columns:g,initialEntitiesCount:o})},n)})):z("no-groups")})]})}var De=s(10730),ke=s(61979);const je=JSON.parse('{"empty.default":"No such nodes","empty.out_of_space":"No nodes with out of space errors","empty.degraded":"No degraded nodes","empty.small_uptime":"No nodes with uptime < 1h","empty.several_filters":"No nodes match current filters combination","show_all":"Show all nodes"}'),Ie=JSON.parse('{"empty.default":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432","empty.out_of_space":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0447\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0441\u0442\u043e","empty.degraded":"\u041d\u0435\u0442 \u0434\u0435\u0433\u0440\u0430\u0434\u0438\u0440\u043e\u0432\u0430\u0432\u0448\u0438\u0445 \u0443\u0437\u043b\u043e\u0432","empty.small_uptime":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432 \u0441 uptime < 1h","empty.several_filters":"\u041d\u0435\u0442 \u0443\u0437\u043b\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0442\u0435\u043a\u0443\u0449\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b","show_all":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0443\u0437\u043b\u044b"}'),Ce=(0,f.wZ)("ydb-storage-nodes",{ru:Ie,en:je}),Pe=e=>{let t,{visibleEntities:s,nodesUptimeFilter:r,onShowAll:n}=e;return s===T.G.space&&(t=Ce("empty.out_of_space")),s===T.G.missing&&(t=Ce("empty.degraded")),r===$.Uu.SmallUptime&&(t=Ce("empty.small_uptime")),s!==T.G.all&&r!==$.Uu.All&&(t=Ce("empty.several_filters")),t?(0,R.jsx)(ae,{title:t,showAll:Ce("show_all"),onShowAll:n}):null};var Ee=s(32527);const Ge=async e=>{const{type:t="static",storage:s=!0,limit:r,offset:n,sortParams:a,filters:o}=e,{searchValue:i,nodesUptimeFilter:l,visibleEntities:d,database:u,nodeId:c,groupId:m,filterGroup:p,filterGroupBy:h}=null!==o&&void 0!==o?o:{},{sortOrder:g,columnId:v}=null!==a&&void 0!==a?a:{},N=(0,$.oh)(v)?(0,de.A)(v,g):void 0,b=await window.api.getNodes({type:t,storage:s,limit:r,offset:n,sort:N,filter:i,uptime:(0,$.RW)(l),with:d,database:u,node_id:c,group_id:m,filter_group:p,filter_group_by:h}),x=(0,Ee.Y2)(b);return{data:x.nodes||[],found:x.found||0,total:x.total||0}},Te=(0,_.cn)("ydb-storage-nodes"),Re=e=>Te("node",{unavailable:(0,$.TA)(e)}),Ue=e=>{let{columns:t,database:s,nodeId:r,groupId:n,filterGroup:o,filterGroupBy:i,searchValue:l,visibleEntities:d,nodesUptimeFilter:u,onShowAll:c,parentRef:m,renderControls:p,renderErrorMessage:h,initialEntitiesCount:g}=e;const v=a.useMemo((()=>({searchValue:l,visibleEntities:d,nodesUptimeFilter:u,database:s,nodeId:r,groupId:n,filterGroup:o,filterGroupBy:i})),[l,d,u,s,r,n,o,i]);return(0,R.jsx)(Y.WQ,{columnsWidthLSKey:w,parentRef:m,columns:t,fetchData:Ge,rowHeight:51,limit:50,initialEntitiesCount:g,renderControls:p,renderErrorMessage:h,renderEmptyDataMessage:()=>d!==T.G.all||u!==$.Uu.All?(0,R.jsx)(Pe,{onShowAll:c,nodesUptimeFilter:u,visibleEntities:d}):Ce("empty.default"),getRowClassName:Re,filters:v,tableName:"storage-nodes"})};var Le=s(71624),Me=s(9796),Ae=s(98530);const Ve=(0,_.cn)("ydb-storage-nodes-columns"),ze=e=>{let{viewContext:t}=e;return{name:D.PDisks,header:I.PDisks,className:Ve("pdisks-column"),render:e=>{var s;let{row:r}=e;return(0,R.jsx)("div",{className:Ve("pdisks-wrapper"),children:null===(s=r.PDisks)||void 0===s?void 0:s.map((e=>{var s;const n=null===(s=r.VDisks)||void 0===s?void 0:s.filter((t=>t.PDiskId===e.PDiskId));return(0,R.jsx)("div",{className:Ve("pdisks-item"),children:(0,R.jsx)(Ae.l,{data:e,vDisks:n,viewContext:t})},e.PDiskId)}))})},align:Le.ZP.CENTER,sortable:!1,width:900,resizeable:!1}},Fe=e=>{let{database:t,additionalNodesProps:s,viewContext:r}=e;const n=null===s||void 0===s?void 0:s.getNodeRef;return[(0,Me.A6)(),(0,Me.iJ)(),(0,Me.Up)({getNodeRef:n,database:t}),(0,Me.EF)(),(0,Me.KO)(),(0,Me.Zi)(),(0,Me.rh)(),(0,Me.eb)(),(0,Me.cB)(),(0,Me.VQ)(),(0,Me.Fi)(),ze({viewContext:r})].map((e=>({...e,sortable:(0,$.oh)(e.name)})))};function Oe(e){let{visibleEntities:t,database:s,additionalNodesProps:r,viewContext:n}=e;const o=a.useMemo((()=>Fe({database:s,additionalNodesProps:r,viewContext:n})),[s,r,n]),i=a.useMemo((()=>t===T.G.missing?[...j,D.Missing]:j),[t]);return(0,me.N)(o,y,I,k,i)}const _e=e=>{const{storageNodesGroupByParam:t,visibleEntities:s,nodesUptimeFilter:r,handleShowAllNodes:n}=Q(),o=(0,d.rU)(),l=(0,d.th)();a.useEffect((()=>{l&&"all"!==s&&r!==$.Uu.All&&n()}),[n,r,l,s]);return(0,R.jsx)(i.s,{loading:!o,children:l&&t?(0,R.jsx)(He,{...e}):(0,R.jsx)(Ze,{...e})})};function Ze(e){let{database:t,nodeId:s,groupId:r,viewContext:n,parentRef:a,initialEntitiesCount:o}=e;const{searchValue:i,visibleEntities:l,nodesUptimeFilter:u,handleShowAllNodes:c}=Q(),m=(0,d.th)(),{columnsToShow:p,columnsToSelect:h,setColumns:g}=We({database:t,viewContext:n});return(0,R.jsx)(Ue,{database:t,nodeId:s,groupId:r,searchValue:i,visibleEntities:l,nodesUptimeFilter:u,onShowAll:c,parentRef:a,renderControls:e=>{let{totalEntities:t,foundEntities:s,inited:r}=e;return(0,R.jsx)(J,{withTypeSelector:!0,withGroupBySelect:m,entitiesCountCurrent:s,entitiesCountTotal:t,entitiesLoading:!r,columnsToSelect:h,handleSelectedColumnsUpdate:g})},renderErrorMessage:H,columns:p,initialEntitiesCount:o})}function He(e){let{database:t,groupId:s,nodeId:r,viewContext:a}=e;const[o]=(0,n.Rj)(),{searchValue:i,storageNodesGroupByParam:d,handleShowAllNodes:c}=Q(),{columnsToShow:m,columnsToSelect:p,setColumns:h}=We({database:t,viewContext:a}),{currentData:g,isFetching:v,error:N}=u.y.useGetStorageNodesInfoQuery({database:t,with:"all",filter:i,node_id:r,group_id:s,group:d},{pollingInterval:o}),b=void 0===g&&v,{tableGroups:x,found:f=0,total:S=0}=g||{},{expandedGroups:w,setIsGroupExpanded:y}=fe(x);return(0,R.jsxs)(l.l,{children:[(0,R.jsx)(l.l.Controls,{children:(0,R.jsx)(J,{withTypeSelector:!0,withGroupBySelect:!0,entitiesCountCurrent:f,entitiesCountTotal:S,entitiesLoading:b,columnsToSelect:p,handleSelectedColumnsUpdate:h})}),N?(0,R.jsx)(O.V,{error:N}):null,(0,R.jsx)(l.l.Table,{loading:b,className:Z("groups-wrapper"),children:null!==x&&void 0!==x&&x.length?x.map((e=>{let{name:n,count:a}=e;const o=w[n];return(0,R.jsx)(xe,{title:n,count:a,entityName:z("nodes"),expanded:o,onIsExpandedChange:y,children:(0,R.jsx)(Ue,{database:t,nodeId:r,groupId:s,searchValue:i,visibleEntities:"all",nodesUptimeFilter:$.Uu.All,onShowAll:c,filterGroup:n,filterGroupBy:d,renderErrorMessage:H,columns:m,initialEntitiesCount:a})},n)})):z("no-nodes")})]})}function We(e){let{database:t,viewContext:s}=e;const{balancer:r}=(0,De.kW)(),{additionalNodesProps:n}=(0,ke.f)({balancer:r}),{visibleEntities:a}=Q();return Oe({additionalNodesProps:n,visibleEntities:a,database:t,viewContext:s})}var Be=s(14418);const Ke=e=>{const{storageType:t}=Q();return"nodes"===t?(0,R.jsx)(_e,{initialEntitiesCount:(0,Be._M)(e.viewContext),...e}):(0,R.jsx)(Se,{initialEntitiesCount:(0,Be.le)(e.viewContext),...e})};var $e=s(93225),Qe=s(82114);const Xe=e=>e.trim().toLowerCase(),Je=(e,t)=>{const s=Xe(t);return s?e.filter((e=>{var t,r;return(null===(t=e.NodeId)||void 0===t?void 0:t.toString().includes(s))||(null===(r=e.Host)||void 0===r?void 0:r.toLowerCase().includes(s))})):e},Ye=(e,t)=>{const s=Xe(t);return s?e.filter((e=>{var t,r;return(null===(t=e.PoolName)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(r=e.GroupId)||void 0===r?void 0:r.toString().includes(s))})):e};var qe=s(74116);function et(e){let{data:t,columns:s,visibleEntities:n,onShowAll:a,sort:o,handleSort:i}=e;return t.length||n===T.G.all?(0,R.jsx)(qe.G,{columnsWidthLSKey:N.Ty,data:t,columns:s,settings:r.LE,emptyDataMessage:(0,oe.Z)("empty.default"),sortOrder:o,onSort:i},n):(0,R.jsx)(ie,{onShowAll:a,visibleEntities:n})}const tt={...r.LE,dynamicRenderMinSize:51};function st(e){let{data:t,columns:s,visibleEntities:r,nodesUptimeFilter:n,sort:a,onShowAll:o,handleSort:i}=e;return t.length||r===T.G.all&&n===$.Uu.All?(0,R.jsx)(qe.G,{columnsWidthLSKey:w,data:t,columns:s,settings:tt,emptyDataMessage:Ce("empty.default"),rowClassName:Re,sortOrder:a,onSort:i},r):(0,R.jsx)(Pe,{visibleEntities:r,nodesUptimeFilter:n,onShowAll:o})}const rt=e=>{var t,s;let{database:r,viewContext:o,nodeId:i,groupId:c,pDiskId:m}=e;const{balancer:p}=(0,De.kW)(),{additionalNodesProps:h}=(0,ke.f)({balancer:p}),{storageType:g,searchValue:v,visibleEntities:N,nodesUptimeFilter:b,handleShowAllGroups:x,handleShowAllNodes:f}=Q(),S=(0,d.rU)(),w=(0,d.tS)(),[y]=(0,n.Rj)(),D="groups"===g,k="nodes"===g,[j,I]=a.useState({sortOrder:void 0,sortValue:void 0}),C=j.sortValue?j:Be.TP,[P,E]=a.useState({sortOrder:void 0,sortValue:void 0}),G=P.sortOrder?P:(0,Be._r)(N),{columnsToShow:T,columnsToSelect:U,setColumns:L}=Oe({additionalNodesProps:h,visibleEntities:N,database:r,viewContext:o}),{columnsToShow:M,columnsToSelect:A,setColumns:V}=ge({visibleEntities:N,viewContext:o}),z=u.y.useGetStorageNodesInfoQuery({database:r,with:N,node_id:i,group_id:c},{skip:!k,pollingInterval:y}),_=u.y.useGetStorageGroupsInfoQuery({database:r,with:N,nodeId:i,groupId:c,pDiskId:m,shouldUseGroupsHandler:w},{skip:!D||!S,pollingInterval:y}),{currentData:H,isFetching:W,error:B}=k?z:_,{currentData:{nodes:K=[]}={}}=z,{currentData:{groups:$=[]}={}}=_,Y=(null===(t=z.currentData)||void 0===t?void 0:t.total)||0,q=(null===(s=_.currentData)||void 0===s?void 0:s.total)||0,ee=void 0===H&&W,te=a.useMemo((()=>function(e,t,s){let r=e||[];return r=Je(r,t),r=(0,Qe.f)(r,s),r}(K,v,b)),[K,b,v]),se=a.useMemo((()=>function(e,t){let s=e||[];return s=Ye(s,t),s}($,v)),[v,$]),[re,ne]=(0,n.sC)(C,(e=>I(e))),[ae,oe]=(0,n.sC)(G,(e=>E(e)));return(0,$e.u)(B)?(0,R.jsx)(F.J,{position:"left"}):(0,R.jsxs)(l.l,{children:[(0,R.jsx)(l.l.Controls,{children:(0,R.jsxs)(a.Fragment,{children:[D?(0,R.jsx)(X,{withTypeSelector:!0,entitiesCountCurrent:se.length,entitiesCountTotal:q,entitiesLoading:ee,columnsToSelect:A,handleSelectedColumnsUpdate:V}):null,k?(0,R.jsx)(J,{withTypeSelector:!0,entitiesCountCurrent:te.length,entitiesCountTotal:Y,entitiesLoading:ee,columnsToSelect:U,handleSelectedColumnsUpdate:L}):null]})}),B?(0,R.jsx)(O.V,{error:B}):null,(0,R.jsx)(l.l.Table,{loading:ee||!S,className:Z("table"),children:H?(0,R.jsxs)(a.Fragment,{children:[D?(0,R.jsx)(et,{visibleEntities:N,data:se,onShowAll:x,sort:ae,handleSort:oe,columns:M},"groups"):null,k?(0,R.jsx)(st,{visibleEntities:N,nodesUptimeFilter:b,data:te,onShowAll:f,sort:re,handleSort:ne,columns:T},"nodes"):null]}):null})]})},nt=e=>{var t,s,a,o;let{parentRef:i,...l}=e;const[d]=(0,n.yu)(r.Qy),u={nodeId:null===(t=l.nodeId)||void 0===t?void 0:t.toString(),pDiskId:null===(s=l.pDiskId)||void 0===s?void 0:s.toString(),groupId:null===(a=l.groupId)||void 0===a?void 0:a.toString(),vDiskSlotId:null===(o=l.vDiskSlotId)||void 0===o?void 0:o.toString()};return d?(0,R.jsx)(Ke,{parentRef:i,viewContext:u,...l}):(0,R.jsx)(rt,{viewContext:u,...l})}},14418:(e,t,s)=>{s.d(t,{TP:()=>m,XW:()=>N,_M:()=>x,_O:()=>c,_r:()=>v,le:()=>f});var r=s(20560),n=s(27660),a=s(34695),o=s(25665),i=s(84029),l=s(78090);const d=(0,i.p)(1,2,["success","warning","danger"]),u={"block-4-2":(0,i.p)(1,2,["success","warning","danger"]),"mirror-3-dc":(0,i.p)(1,3,["success","warning","danger"])},c=e=>{var t;return(void 0!==(t=e.ErasureSpecies)&&t in u?u[e.ErasureSpecies]:d)(e.Degraded)},m={sortValue:n.xv.NodeId,sortOrder:r.zE},p={sortValue:l.tn.PoolName,sortOrder:r.zE},h={sortValue:l.tn.Degraded,sortOrder:r.hr},g={sortValue:l.tn.Usage,sortOrder:r.hr};function v(e){return e===a.G.missing?h:e===a.G.space?g:p}function N(e,t){var s;let r=!0;return(0,o.D)(null===(s=e.VDiskId)||void 0===s?void 0:s.GroupID)&&null!==t&&void 0!==t&&t.groupId&&(r&&=String(e.VDiskId.GroupID)===t.groupId),(0,o.D)(e.NodeId)&&null!==t&&void 0!==t&&t.nodeId&&(r&&=String(e.NodeId)===t.nodeId),(0,o.D)(e.PDiskId)&&null!==t&&void 0!==t&&t.pDiskId&&(r&&=String(e.PDiskId)===t.pDiskId),(0,o.D)(e.VDiskSlotId)&&null!==t&&void 0!==t&&t.vDiskSlotId&&(r&&=String(e.VDiskSlotId)===t.vDiskSlotId),r}const b=10;function x(e){let{nodeId:t,pDiskId:s,vDiskSlotId:r}=e;return(0,o.D)(t)||(0,o.D)(s)||(0,o.D)(r)?1:b}function f(e){let{vDiskSlotId:t,groupId:s}=e;return(0,o.D)(s)||(0,o.D)(t)?1:b}},82114:(e,t,s)=>{s.d(t,{A:()=>m,f:()=>u});var r=s(77468),n=s(27810),a=s(14075),o=s(89991),i=s(96183),l=s(32341);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0)===l.pu.ALL?e:e.filter((e=>{let{SystemState:t}=e;return t&&t!==r.K.Green}))},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0)===i.Uu.All?e:e.filter((e=>{let{StartTime:t}=e;return!t||(0,a.OW)(t)<n.RQ}))},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!t)return e;const s=(0,o.Y)(t);return e.filter((e=>!e.Host||(s.test(e.Host)||s.test(String(e.NodeId)))))};function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],{uptimeFilter:t,searchValue:s,problemFilter:r}=arguments.length>1?arguments[1]:void 0,n=u(e,t);return n=d(n,r),n=c(n,s),n}},16124:(e,t,s)=>{s.d(t,{n:()=>a,w:()=>o});var r=s(84029),n=s(96183);const a=e=>{var t;const s=(e.Nodes||[]).map((e=>({...(0,n.Ns)(e.SystemState),Tablets:e.Tablets,NodeId:e.NodeId})));return{Nodes:s,NodeGroups:null===(t=e.NodeGroups)||void 0===t?void 0:t.map((e=>({name:e.GroupName,count:e.NodeCount}))),TotalNodes:Number(e.TotalNodes)||s.length,FoundNodes:Number(e.FoundNodes)}},o=(0,r.p)(60,80,["success","warning","danger"])},34695:(e,t,s)=>{s.d(t,{G:()=>r,d:()=>n});const r={all:"all",missing:"missing",space:"space"},n={groups:"groups",nodes:"nodes"}},55993:(e,t,s)=>{s.d(t,{R:()=>n});var r=s(32527);async function n(e,t){let{version:s="v2",shouldUseGroupsHandler:n,...a}=e;if(n&&"v1"!==s){const e=await window.api.getStorageGroups({...a},t);return(0,r._u)(e)}{const e=await window.api.getStorageInfo({version:s,...a},t);return(0,r.S9)(e)}}},89085:(e,t,s)=>{s.d(t,{y:()=>o});var r=s(78759),n=s(55993),a=s(32527);const o=r.h.injectEndpoints({endpoints:e=>({getStorageNodesInfo:e.query({queryFn:async(e,t)=>{let{signal:s}=t;try{const t=await window.api.getNodes({storage:!0,type:"static",...e},{signal:s});return{data:(0,a.Y2)(t)}}catch(r){return{error:r}}},providesTags:["All","StorageData"]}),getStorageGroupsInfo:e.query({queryFn:async(e,t)=>{let{signal:s}=t;try{return{data:await(0,n.R)(e,{signal:s})}}catch(r){return{error:r}}},providesTags:["All","StorageData"]})}),overrideExisting:"throw"})},32527:(e,t,s)=>{s.d(t,{S9:()=>v,Y2:()=>g,_u:()=>N});var r=s(96234),n=s(38392),a=s(53458),o=s(84953),i=s(96183),l=s(61734),d=s(83627);function u(e){const{DiskSpace:t,VDisks:s=[]}=e;return t||(0,a.b2)(Math.max(...s.map((e=>(0,a.Or)(e.DiskSpace)))))}const c=(e,t)=>{var s;const r=(0,o.w)(e);return{...r,StoragePoolName:t,Donors:null===r||void 0===r||null===(s=r.Donors)||void 0===s?void 0:s.map((e=>({...e,StoragePoolName:t})))}},m=e=>{const{VDisks:t=[],PoolName:s,Usage:r=0,Read:n=0,Write:a=0,Used:o=0,Limit:i=0,Degraded:l=0,Kind:d,MediaType:m,GroupID:p,Overall:h,GroupGeneration:g}=e,v=t.map((e=>c(e,s))),N=100*Number(r),b=u(e);return{...e,PoolName:s,GroupId:p,MediaType:m||d,VDisks:v,Usage:N,Overall:h,GroupGeneration:g?String(g):void 0,Read:Number(n),Write:Number(a),Used:Number(o),Limit:Number(i),Degraded:Number(l),DiskSpace:b}},p=(e,t)=>{let s=[];return e?s=e.map(m):null===t||void 0===t||t.forEach((e=>{var t;null===(t=e.Groups)||void 0===t||t.forEach((t=>{s.push(((e,t)=>{var s;let a,i=0,d=0,m=0,p=0,h=0;const{Name:g,MediaType:v}=t;if(e.VDisks)for(const l of e.VDisks){const{Replicated:e,VDiskState:t,AvailableSize:s,AllocatedSize:u,PDisk:c,ReadThroughput:g,WriteThroughput:v}=l,{Type:N,State:b,AvailableSize:x}=(0,o.b)(c);e&&b===r.w.Normal&&t===n.H.OK||(i+=1);const f=Number(null!==s&&void 0!==s?s:x)||0,S=Number(u)||0;d+=S,m+=f+S,p+=Number(g)||0,h+=Number(v)||0,a=!N||N!==a&&a?"Mixed":N}const N=null===(s=e.VDisks)||void 0===s?void 0:s.map((e=>c(e,g))),b=m?(0,l.Ic)({Used:d,Limit:m},5):void 0,x=u(e);return{...e,GroupGeneration:e.GroupGeneration?String(e.GroupGeneration):void 0,GroupId:e.GroupID,Overall:e.Overall,VDisks:N,Usage:b,Read:p,Write:h,PoolName:g,Used:d,Limit:m,Degraded:i,MediaType:v||a||void 0,DiskSpace:x}})(t,e))}))})),s},h=e=>{var t,s,n;const a=(null===(t=e.PDisks)||void 0===t?void 0:t.filter((e=>e.State!==r.w.Normal)).length)||0,l=null===(s=e.PDisks)||void 0===s?void 0:s.map((t=>({...(0,o.b)(t),NodeId:e.NodeId}))),d=null===(n=e.VDisks)||void 0===n?void 0:n.map((t=>({...(0,o.w)(t),NodeId:e.NodeId})));return{...(0,i.Ns)(e.SystemState),NodeId:e.NodeId,DiskSpaceUsage:e.DiskSpaceUsage,PDisks:l,VDisks:d,Missing:a}},g=e=>{const{Nodes:t,TotalNodes:s,FoundNodes:r,NodeGroups:n}=e,a=null===n||void 0===n?void 0:n.map((e=>{let{GroupName:t,NodeCount:s}=e;if(t&&s)return{name:t,count:Number(s)}})).filter((e=>Boolean(e))),o=null===t||void 0===t?void 0:t.map(h);return{nodes:o,total:Number(s)||(null===o||void 0===o?void 0:o.length),found:Number(r),tableGroups:a}},v=e=>{const{StoragePools:t,StorageGroups:s,TotalGroups:r,FoundGroups:n}=e,a=p(s,t);return{groups:a,total:Number(r)||a.length,found:Number(n)}};function N(e){const{FoundGroups:t,TotalGroups:s,StorageGroups:r=[],StorageGroupGroups:n}=e,a=r.map((e=>{const{Usage:t,DiskSpaceUsage:s,Read:r,Write:n,Used:a,Limit:i,MissingDisks:l,VDisks:c=[],Overall:m,LatencyPutTabletLog:p,LatencyPutUserData:h,LatencyGetFast:g}=e,v=c.map((e=>{const{Whiteboard:t,PDisk:s,VDiskId:r,NodeId:n,AllocatedSize:a,AvailableSize:i,DiskSpace:l,Status:d}=e,u=null===s||void 0===s?void 0:s.Whiteboard,c={...t,PDiskId:null===u||void 0===u?void 0:u.PDiskId,NodeId:n,AllocatedSize:a,AvailableSize:i,DiskSpace:l,Status:d,PDisk:{...u,NodeId:n}},m=(0,o.w)(c);return{...m,StringifiedId:m.StringifiedId||r}})),N=u(e);return{...e,Usage:t,DiskSpaceUsage:s,Read:Number(r),Write:Number(n),Used:Number(a),Limit:Number(i),LatencyPutTabletLogMs:(0,d.BO)(p),LatencyPutUserDataMs:(0,d.BO)(h),LatencyGetFastMs:(0,d.BO)(g),Degraded:Number(l),Overall:m,VDisks:v,DiskSpace:N}})),i=null===n||void 0===n?void 0:n.map((e=>{let{GroupName:t,GroupCount:s}=e;if(t&&s)return{name:t,count:Number(s)}})).filter((e=>Boolean(e)));return{groups:a,total:Number(s)||a.length,found:Number(t),tableGroups:i}}},96234:(e,t,s)=>{let r;s.d(t,{w:()=>r}),function(e){e.Initial="Initial",e.InitialFormatRead="InitialFormatRead",e.InitialFormatReadError="InitialFormatReadError",e.InitialSysLogRead="InitialSysLogRead",e.InitialSysLogReadError="InitialSysLogReadError",e.InitialSysLogParseError="InitialSysLogParseError",e.InitialCommonLogRead="InitialCommonLogRead",e.InitialCommonLogReadError="InitialCommonLogReadError",e.InitialCommonLogParseError="InitialCommonLogParseError",e.CommonLoggerInitError="CommonLoggerInitError",e.Normal="Normal",e.OpenFileError="OpenFileError",e.ChunkQuotaError="ChunkQuotaError",e.DeviceIoError="DeviceIoError",e.Missing="Missing",e.Timeout="Timeout",e.NodeDisconnected="NodeDisconnected",e.Unknown="Unknown"}(r||(r={}))},38392:(e,t,s)=>{let r;s.d(t,{H:()=>r}),function(e){e.Initial="Initial",e.LocalRecoveryError="LocalRecoveryError",e.SyncGuidRecovery="SyncGuidRecovery",e.SyncGuidRecoveryError="SyncGuidRecoveryError",e.OK="OK",e.PDiskError="PDiskError"}(r||(r={}))},53443:(e,t,s)=>{s.d(t,{i6:()=>i,mG:()=>o,mr:()=>d,oO:()=>a,s:()=>l,tH:()=>u});var r=s(96234),n=s(38392);const a={Grey:0,Green:1,Blue:2,Yellow:3,Orange:4,Red:5},o=Object.entries(a).reduce(((e,t)=>{let[s,r]=t;return{...e,[r]:s}}),{}),i=a.Grey,l=o[i],d={[n.H.OK]:a.Green,[n.H.Initial]:a.Yellow,[n.H.SyncGuidRecovery]:a.Yellow,[n.H.LocalRecoveryError]:a.Red,[n.H.SyncGuidRecoveryError]:a.Red,[n.H.PDiskError]:a.Red},u={[r.w.Initial]:a.Grey,[r.w.Normal]:a.Green,[r.w.InitialFormatRead]:a.Yellow,[r.w.InitialSysLogRead]:a.Yellow,[r.w.InitialCommonLogRead]:a.Yellow,[r.w.InitialFormatReadError]:a.Red,[r.w.InitialSysLogReadError]:a.Red,[r.w.InitialSysLogParseError]:a.Red,[r.w.InitialCommonLogReadError]:a.Red,[r.w.InitialCommonLogParseError]:a.Red,[r.w.CommonLoggerInitError]:a.Red,[r.w.OpenFileError]:a.Red,[r.w.ChunkQuotaError]:a.Red,[r.w.DeviceIoError]:a.Red}},53458:(e,t,s)=>{s.d(t,{CH:()=>l,FR:()=>d,Iz:()=>a,Or:()=>i,b2:()=>o});var r=s(25665),n=s(53443);function a(e){return"VDiskId"in e}function o(e){return void 0===e?n.s:n.mG[e]||n.s}function i(e){return e?n.oO[e]:0}function l(e,t){if((0,r.D)(e)&&(0,r.D)(t))return`${e}-${t}`}function d(e,t,s){return[e,t,s].join("-")}},84953:(e,t,s)=>{s.d(t,{b:()=>g,w:()=>h});var r=s(14075),n=s(77468),a=s(84029),o=s(53443);const i=(0,a.p)(85,95,[n.K.Green,n.K.Yellow,n.K.Red]);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=function(e){return t=e,void 0!==t&&t in o.tH?o.tH[e]:o.i6;var t}(e.State),r=i(t);return s!==o.i6&&r?Math.max(s,o.oO[r]):s}var d=s(53458);function u(e){if(!(0,d.Iz)(e))return o.i6;const{DiskSpace:t,VDiskState:s,FrontQueues:r,Replicated:n}=e;if(!s)return o.i6;const a=c(t),i=function(e){var t;if(!e)return o.i6;return null!==(t=o.mr[e])&&void 0!==t?t:o.i6}(s),l=Math.min(o.oO.Orange,c(r));let u=Math.max(a,i,l);return n||u!==o.oO.Green||(u=o.oO.Blue),u}function c(e){var t;return e&&null!==(t=o.oO[e])&&void 0!==t?t:o.i6}const m={HDD:"HDD",SSD:"SSD",MVME:"NVME"};function p(e){if(!e)return;const t=function(e,t){const s={};return Object.entries(t).reduce(((t,r)=>{let[n,a]=r;const o=e.length-t,i=o-a;return s[n]=e.substring(i,o)||"0",t+a}),0),s}(BigInt(e).toString(2),{isSolidState:1,kind:55,typeExt:8});if("1"===t.isSolidState)switch(parseInt(t.typeExt,2)){case 0:return m.SSD;case 2:return m.MVME}else if("0"===t.typeExt)return m.HDD}function h(){var e,t,s,n;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=a.PDisk?g({...a.PDisk,NodeId:null!==(e=a.PDisk.NodeId)&&void 0!==e?e:a.NodeId}):void 0,i=null!==(t=a.PDiskId)&&void 0!==t?t:null===o||void 0===o?void 0:o.PDiskId,l=Number(null!==(s=a.AvailableSize)&&void 0!==s?s:null===o||void 0===o?void 0:o.AvailableSize),d=Number(a.AllocatedSize),c=d+l,m=Math.round(100*d/c),p=null===(n=a.Donors)||void 0===n?void 0:n.map((e=>h({...e,DonorMode:!0}))),v=u(a),N=(0,r.a2)(a.VDiskId);return{...a,PDisk:o,PDiskId:i,Donors:p,Severity:v,StringifiedId:N,TotalSize:c,AllocatedPercent:m}}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{AvailableSize:s,TotalSize:r,Category:n}=e,a=p(n),o=Number(s),i=Number(r),d=i-o,u=Math.round(100*d/i),c=l(e,u);return{...t,...e,Type:a,Severity:c,AllocatedSize:d,AllocatedPercent:u}}},89991:(e,t,s)=>{s.d(t,{A:()=>o,Y:()=>i});var r=s(20560),n=s(78171),a=s.n(n);const o=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.hr)===r.hr?`-${e}`:e},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new RegExp(a()(e),"i")}},84029:(e,t,s)=>{s.d(t,{p:()=>r});const r=(e,t,s)=>r=>0<=r&&r<e?s[0]:e<=r&&r<t?s[1]:t<=r?s[2]:void 0},97485:(e,t,s)=>{s.d(t,{N:()=>a});var r=s(34706),n=s(9951);const a=(e,t,s,a,o)=>{const[i,l]=r.useState((()=>n.r.readUserSettingsValue(t,a)));return{columnsToShow:r.useMemo((()=>e.filter((e=>{const t=e.name,s=i.includes(t),r=null===o||void 0===o?void 0:o.includes(t);return s||r}))),[e,o,i]),columnsToSelect:r.useMemo((()=>e.map((e=>e.name)).map((e=>{const t=null===o||void 0===o?void 0:o.includes(e),r=i.includes(e);return{id:e,title:s[e],selected:t||r,required:t,sticky:t?"start":void 0}}))),[e,s,o,i]),setColumns:r.useCallback((e=>{const s=e.filter((e=>e.selected)).map((e=>e.id));n.r.setUserSettingsValue(t,s),l(s)}),[t])}}},46154:(e,t,s)=>{s.d(t,{M:()=>o});var r=s(34706),n=s(59769),a=s(9951);const o=e=>{const t=r.useCallback((()=>e?a.r.readUserSettingsValue(e,{}):{}),[e]),s=r.useCallback((t=>{e&&a.r.setUserSettingsValue(e,t)}),[e]);return(0,n.M)({saveSizes:s,getSizes:t})}},61734:(e,t,s)=>{s.d(t,{HQ:()=>a,Ic:()=>n,P7:()=>i});var r=s(84029);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const s=e.Limit?100*e.Used/e.Limit:0;return Math.floor(s/t)*t},a=(0,r.p)(80,85,["success","warning","danger"]),o=["PoolName","Kind","MediaType","Erasure","Degraded","Usage","GroupId","Used","Limit","Read","Write","AllocationUnits","Latency","DiskSpaceUsage"],i=e=>o.includes(e)},55973:(e,t,s)=>{s.d(t,{FW:()=>o,KR:()=>i});var r=s(77468),n=s(9038);const a={[n.g.Dead]:r.K.Red,[n.g.Created]:r.K.Yellow,[n.g.ResolveStateStorage]:r.K.Yellow,[n.g.Candidate]:r.K.Yellow,[n.g.BlockBlobStorage]:r.K.Yellow,[n.g.WriteZeroEntry]:r.K.Yellow,[n.g.Restored]:r.K.Yellow,[n.g.Discover]:r.K.Yellow,[n.g.Lock]:r.K.Yellow,[n.g.Stopped]:r.K.Yellow,[n.g.ResolveLeader]:r.K.Yellow,[n.g.RebuildGraph]:r.K.Yellow,[n.g.Deleted]:r.K.Green,[n.g.Active]:r.K.Green},o=(Object.keys(n.g),Object.entries(a).reduce(((e,t)=>{let[s,r]=t;return e[r]?e[r].push(s):e[r]=[s],e}),{}),e=>{if(!e)return r.K.Grey;return t=e,Object.values(r.K).includes(t)?e:a[e];var t});function i(e){if(!e)return"unknown";switch(e){case n.g.Dead:return"danger";case n.g.Active:case n.g.Deleted:return"success";default:return"warning"}}}}]);