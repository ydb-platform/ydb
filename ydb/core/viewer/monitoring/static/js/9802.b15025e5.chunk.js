"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([[9802],{8873:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(59284);const i=e=>o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.5a6.5 6.5 0 0 1 6.445 5.649.75.75 0 1 1-1.488.194A5.001 5.001 0 0 0 4.43 4.5h1.32a.75.75 0 0 1 0 1.5h-3A.75.75 0 0 1 2 5.25v-3a.75.75 0 1 1 1.5 0v1.06A6.48 6.48 0 0 1 8 1.5m5.25 13a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-3a.75.75 0 1 0 0 1.5h1.32a5.001 5.001 0 0 1-8.528-2.843.75.75 0 1 0-1.487.194 6.501 6.501 0 0 0 10.945 3.84v1.059c0 .414.336.75.75.75",clipRule:"evenodd"}))},12640:(e,t,n)=>{n.d(t,{c:()=>m});var o=n(59284),i=n(14794),s=n(98392),r=n(27145),a=n(67459);var l=n(11507);const c=(0,n(69220).om)("sheet");class u{constructor(e,t){this.x=e,this.y=t,this.timeStamp=Date.now()}}class d{constructor(e=5){this.points=[],this.pointsLen=e,this.clear()}clear(){this.points=new Array(this.pointsLen)}addMovement({x:e,y:t}){this.points.pop(),this.points.unshift(new u(e,t))}getYAcceleration(e=1){const t=this.points[0],n=this.points[e];return t&&n?(t.y-n.y)/Math.pow(t.timeStamp-n.timeStamp,2):0}}let h=[];class p extends o.Component{constructor(){super(...arguments),this.veilRef=o.createRef(),this.sheetRef=o.createRef(),this.sheetTopRef=o.createRef(),this.sheetContentBoxRef=o.createRef(),this.sheetScrollContainerRef=o.createRef(),this.velocityTracker=new d,this.observer=null,this.resizeWindowTimer=null,this.state={startScrollTop:0,startY:0,deltaY:0,prevSheetHeight:0,swipeAreaTouched:!1,contentTouched:!1,veilTouched:!1,isAnimating:!1,inWindowResizeScope:!1},this.setStyles=({status:e,deltaHeight:t=0})=>{if(!this.sheetRef.current||!this.veilRef.current)return;const n=this.sheetHeight-t,o="showing"===e?`translate3d(0, -${n}px, 0)`:"translate3d(0, 0, 0)";let i=0;"showing"===e&&(i=0===t?1:n/this.sheetHeight),this.veilRef.current.style.opacity=String(i),this.sheetRef.current.style.transform=o},this.getAvailableContentHeight=e=>{const t=.9*window.innerHeight-this.sheetTopHeight;return e>=t?t:e},this.show=()=>{this.setState({isAnimating:!0},(()=>{this.setStyles({status:"showing"}),this.setHash()}))},this.hide=()=>{this.setState({isAnimating:!0},(()=>{this.setStyles({status:"hiding"}),this.removeHash()}))},this.onSwipeAreaTouchStart=e=>{this.velocityTracker.clear(),this.setState({startY:e.nativeEvent.touches[0].clientY,swipeAreaTouched:!0})},this.onContentTouchStart=e=>{this.props.allowHideOnContentScroll&&!this.state.swipeAreaTouched&&(this.velocityTracker.clear(),this.setState({startY:e.nativeEvent.touches[0].clientY,startScrollTop:this.sheetScrollTop,contentTouched:!0}))},this.onSwipeAriaTouchMove=e=>{const t=e.nativeEvent.touches[0].clientY-this.state.startY;this.velocityTracker.addMovement({x:e.nativeEvent.touches[0].clientX,y:e.nativeEvent.touches[0].clientY}),this.setState({deltaY:t}),t<=0||this.setStyles({status:"showing",deltaHeight:t})},this.onContentTouchMove=e=>{if(!this.props.allowHideOnContentScroll)return;if(!this.state.startY)return void this.onContentTouchStart(e);const{startScrollTop:t,swipeAreaTouched:n}=this.state;if(n||this.sheetScrollTop>0||t>0&&t!==this.sheetScrollTop)return;const o=e.nativeEvent.touches[0].clientY-this.state.startY;this.velocityTracker.addMovement({x:e.nativeEvent.touches[0].clientX,y:e.nativeEvent.touches[0].clientY}),this.setState({deltaY:o}),o<=0||this.setStyles({status:"showing",deltaHeight:o})},this.onTouchEndAction=e=>{const t=this.velocityTracker.getYAcceleration();this.sheetHeight<=e?this.props.hideSheet():e>50&&t<=.08&&t>=-.02||t>.08?this.hide():0!==e&&this.show()},this.onSwipeAriaTouchEnd=()=>{const{deltaY:e}=this.state;this.onTouchEndAction(e),this.setState({startY:0,deltaY:0,swipeAreaTouched:!1})},this.onContentTouchEnd=()=>{const{deltaY:e,swipeAreaTouched:t}=this.state;this.props.allowHideOnContentScroll&&!t&&(this.onTouchEndAction(e),this.setState({startY:0,deltaY:0,contentTouched:!1}))},this.onVeilClick=()=>{this.setState({veilTouched:!0}),this.hide()},this.onVeilTransitionEnd=()=>{this.setState({isAnimating:!1}),"0"===this.veilOpacity&&this.props.hideSheet()},this.onContentTransitionEnd=e=>{"height"===e.propertyName&&this.sheetScrollContainerRef.current&&(this.sheetScrollContainerRef.current.style.transition="none")},this.onResizeWindow=()=>{this.state.isAnimating||(this.setState({inWindowResizeScope:!0}),this.resizeWindowTimer&&window.clearTimeout(this.resizeWindowTimer),this.resizeWindowTimer=window.setTimeout((()=>{this.onResize()}),50))},this.onResize=()=>{if(!this.sheetRef.current||!this.sheetScrollContainerRef.current)return;const e=this.sheetContentHeight;if(e===this.state.prevSheetHeight&&!this.state.inWindowResizeScope)return;const t=this.getAvailableContentHeight(e);this.sheetScrollContainerRef.current.style.transition=this.state.prevSheetHeight>e?"height 0s ease 0.3s":"none",this.sheetScrollContainerRef.current.style.height=`${t}px`,this.sheetRef.current.style.transform=`translate3d(0, -${t+this.sheetTopHeight}px, 0)`,this.setState({prevSheetHeight:e,inWindowResizeScope:!1})}}componentDidMount(){this.addListeners(),this.show();const e=this.getAvailableContentHeight(this.sheetContentHeight);this.setInitialStyles(e),this.setState({prevSheetHeight:e})}componentDidUpdate(e){const{visible:t,location:n}=this.props;!e.visible&&t&&this.show(),(e.visible&&!t||this.shouldClose(e))&&this.hide(),e.location.pathname!==n.pathname&&(h=[])}componentWillUnmount(){this.removeListeners()}render(){const{content:e,contentClassName:t,swipeAreaClassName:n,hideTopBar:i,title:s}=this.props,{deltaY:r,swipeAreaTouched:a,contentTouched:l,veilTouched:u,isAnimating:d}=this.state,h={"with-transition":!r||u},p={"with-transition":h["with-transition"]},v={"without-scroll":r>0&&l||a};return o.createElement(o.Fragment,null,o.createElement("div",{ref:this.veilRef,className:c("veil",h),onClick:d?void 0:this.onVeilClick,onTransitionEnd:this.onVeilTransitionEnd,role:"presentation"}),o.createElement("div",{ref:this.sheetRef,className:c("sheet",p),role:"dialog","aria-modal":"true","aria-label":s},!i&&o.createElement("div",{ref:this.sheetTopRef,className:c("sheet-top")},o.createElement("div",{className:c("sheet-top-resizer")})),o.createElement("div",{className:c("sheet-swipe-area",n),onTouchStart:this.onSwipeAreaTouchStart,onTouchMove:this.onSwipeAriaTouchMove,onTouchEnd:this.onSwipeAriaTouchEnd}),o.createElement("div",{ref:this.sheetScrollContainerRef,className:c("sheet-scroll-container",v),onTouchStart:this.onContentTouchStart,onTouchMove:this.onContentTouchMove,onTouchEnd:this.onContentTouchEnd,onTransitionEnd:this.onContentTransitionEnd},o.createElement("div",{ref:this.sheetContentBoxRef,className:c("sheet-content-box")},o.createElement("div",{className:c("sheet-content-box-border-compensation")},o.createElement("div",{className:c("sheet-content",t)},s&&o.createElement("div",{className:c("sheet-content-title")},s),o.createElement("div",null,e)))))))}get veilOpacity(){var e;return(null===(e=this.veilRef.current)||void 0===e?void 0:e.style.opacity)||0}get sheetTopHeight(){var e;return(null===(e=this.sheetTopRef.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0}get sheetHeight(){var e;return(null===(e=this.sheetRef.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0}get sheetScrollTop(){var e;return(null===(e=this.sheetScrollContainerRef.current)||void 0===e?void 0:e.scrollTop)||0}get sheetContentHeight(){var e;return(null===(e=this.sheetContentBoxRef.current)||void 0===e?void 0:e.getBoundingClientRect().height)||0}setInitialStyles(e){this.sheetScrollContainerRef.current&&this.sheetContentBoxRef.current&&(this.sheetScrollContainerRef.current.style.height=`${e}px`)}addListeners(){window.addEventListener("resize",this.onResizeWindow),this.sheetContentBoxRef.current&&(this.observer=new ResizeObserver((()=>{this.state.inWindowResizeScope||this.onResize()})),this.observer.observe(this.sheetContentBoxRef.current))}removeListeners(){window.removeEventListener("resize",this.onResizeWindow),this.observer&&this.observer.disconnect()}setHash(){const{id:e,platform:t,location:n,history:o}=this.props;if(t===a.O.BROWSER)return;const i=Object.assign(Object.assign({},n),{hash:e});switch(t){case a.O.IOS:n.hash&&h.push(n.hash),o.replace(i);break;case a.O.ANDROID:o.push(i)}}removeHash(){var e;const{id:t,platform:n,location:o,history:i}=this.props;if(n!==a.O.BROWSER&&o.hash===`#${t}`)switch(n){case a.O.IOS:i.replace(Object.assign(Object.assign({},o),{hash:null!==(e=h.pop())&&void 0!==e?e:""}));break;case a.O.ANDROID:i.goBack()}}shouldClose(e){const{id:t,platform:n,location:o,history:i}=this.props;return n!==a.O.BROWSER&&"POP"===i.action&&e.location.hash!==o.hash&&o.hash!==`#${t}`}}p.defaultProps={id:"sheet",allowHideOnContentScroll:!0};const v=function(e){var t;const n=(i=e).displayName||i.name||"Component";var i;return(t=class extends o.Component{render(){return o.createElement(e,Object.assign({},this.props,{mobile:this.context.mobile,platform:this.context.platform,useHistory:this.context.useHistory,useLocation:this.context.useLocation}))}}).displayName=`withMobile(${n})`,t.contextType=l.G,t}(function(e){const t=t=>{const{useHistory:n,useLocation:i}=t,s=(0,r.Tt)(t,["useHistory","useLocation"]);return o.createElement(e,Object.assign({},s,{history:n(),location:i()}))},n=e.displayName||e.name||"Component";return t.displayName=`withRouterWrapper(${n})`,t}(p)),m=({children:e,onClose:t,visible:n,id:r,title:a,className:l,contentClassName:u,swipeAreaClassName:d,allowHideOnContentScroll:h,hideTopBar:p,qa:m})=>{const[f,g]=o.useState(n),[b,C]=o.useState(n);(0,i.y)({enabled:f}),!b&&n&&g(!0),n!==b&&C(n);return f?o.createElement(s.Z,null,o.createElement("div",{"data-qa":m,className:c(null,l)},o.createElement(v,{id:r,content:e,contentClassName:u,swipeAreaClassName:d,title:a,visible:n,allowHideOnContentScroll:h,hideTopBar:p,hideSheet:()=>{t&&t(),g(!1)}}))):null}},13066:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(59284);const i=e=>o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.97 5.47a.75.75 0 0 1 1.06 0L8 9.44l3.97-3.97a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 0 1 0-1.06",clipRule:"evenodd"}))},19884:(e,t,n)=>{n.d(t,{Y:()=>b});var o=n(59284),i=n(94420),s=n(13066),r=n(905),a=n.n(r),l=n(90826),c=n(99991),u=n(84375),d=n(56353),h=n(89226),p=n(81240);const v=e=>{const{size:t,onClick:n,onMouseEnter:i,onMouseLeave:s,renderIcon:r}=e,a=r?r():o.createElement(c.I,{className:(0,d.Di)("clear"),data:p.A});return o.createElement("button",{className:(0,d.Di)({size:t}),"aria-label":(0,h.A)("label_clear"),onClick:n,onMouseEnter:i,onMouseLeave:s,"data-qa":d.pn.CLEAR,type:"button"},a)};v.displayName="SelectClear";var m=n(98089);const f=(0,n(69220).om)("select-counter");function g({count:e,size:t,disabled:n}){return o.createElement("div",{className:f({size:t})},o.createElement(m.E,{variant:"xl"===t?"body-2":"body-1",color:n?"hint":"primary",className:f("text")},e))}const b=o.forwardRef(((e,t)=>{const{toggleOpen:n,clearValue:r,onKeyDown:p,renderControl:m,view:f,size:b,pin:C,selectedOptionsContent:E,className:w,qa:T,label:S,placeholder:y,isErrorVisible:O,errorMessage:R,open:A,disabled:x,value:N,hasClear:H,popupId:z,selectId:I,activeIndex:k,renderCounter:P,hasCounter:L,title:M}=e,B=Boolean(E),D=Boolean(y&&!B),F=Array.isArray(N)&&!a()(N.filter(Boolean)),W=(0,l.u)(),[j,Y]=o.useState(!1),_={open:A,size:b,pin:C,disabled:x,error:O,"has-clear":H,"no-active":j,"has-value":F},$={open:A,size:b,view:f,pin:C,disabled:x,error:O},q=o.useCallback((e=>{e&&e.currentTarget!==document.activeElement&&"focus"in e.currentTarget&&e.currentTarget.focus(),n()}),[n]),V=o.useCallback((()=>{Y(!0)}),[]),G=o.useCallback((()=>{Y(!1)}),[]),K=o.useCallback((()=>{Y(!1),r()}),[r]),U=()=>{if(!L)return null;const e=N.length,t=o.createElement(g,{count:e,size:b,disabled:x});return P?P(t,{count:e,size:b,disabled:x}):t},J=e=>{const t=0===N.length;return!H||t||x?null:o.createElement(v,{size:b,onClick:K,onMouseEnter:V,onMouseLeave:G,renderIcon:e.renderIcon})},Z={id:I,role:"combobox","aria-controls":A?z:void 0,"aria-haspopup":"listbox","aria-expanded":A,"aria-activedescendant":void 0===k?void 0:`${z}-item-${k}`,onClick:q,onKeyDown:p,disabled:x};return m?m({onKeyDown:p,onClear:r,onClick:q,renderClear:J,renderCounter:U,ref:t,open:A,popupId:z,selectId:I,activeIndex:k,disabled:x,triggerProps:Z},{value:N}):o.createElement(o.Fragment,null,o.createElement("div",{className:(0,d.ji)(_),role:"group"},o.createElement("button",Object.assign({ref:t,className:(0,d.Zz)($,w),type:"button","data-qa":T,title:M,tabIndex:0},Z),S&&o.createElement("span",{className:(0,d.ji)("label")},S),D&&o.createElement("span",{className:(0,d.ji)("placeholder")},y),B&&o.createElement("span",{className:(0,d.ji)("option-text")},E)),U(),J({}),R&&o.createElement(u.A,{content:R,tooltipId:W},o.createElement("button",{"aria-label":(0,h.A)("label_show-error-info"),"aria-describedby":W,className:(0,d.ji)("error-icon")},o.createElement(c.I,{data:i.A,size:"s"===b?12:16}))),o.createElement(c.I,{className:(0,d.ji)("chevron-icon",{disabled:x}),data:s.A,"aria-hidden":"true"})))}));b.displayName="SelectControl"},24555:(e,t,n)=>{n.d(t,{l:()=>te});var o=n(59284),i=n(359),s=n(85736),r=n(32084),a=n(27145),l=n(92609);var c=n(90826),u=n(51301),d=n(63246),h=n(34379),p=n(46819),v=n(28664),m=n(69220),f=n(56353),g=n(89226);const b=(0,m.om)("select-filter"),C={padding:"4px 4px 0"},E=o.forwardRef(((e,t)=>{const{onChange:n,onKeyDown:i,renderFilter:s,size:r,value:a,placeholder:l,popupId:c,activeIndex:u}=e,d=o.useRef(null);o.useImperativeHandle(t,(()=>({focus:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.focus({preventScroll:!0})}})),[]);const h={value:a,placeholder:l,size:1,onKeyDown:i,onChange:e=>{n(e.target.value)},"aria-label":(0,g.A)("label_filter"),"aria-controls":c,"aria-activedescendant":void 0===u?void 0:`${c}-item-${u}`};return s?s({onChange:n,onKeyDown:i,value:a,ref:d,style:C,inputProps:h}):o.createElement("div",{className:b(),style:C},o.createElement(v.k,{controlRef:d,controlProps:{className:b("input"),size:1,"aria-label":h["aria-label"],"aria-controls":h["aria-controls"],"aria-activedescendant":h["aria-activedescendant"]},size:r,value:a,placeholder:l,onUpdate:n,onKeyDown:i,qa:f.pn.FILTER_INPUT}))}));E.displayName="SelectFilter";var w=n(40091);const T=e=>Boolean(e&&"label"in e),S=e=>{const{getOptionHeight:t,getOptionGroupHeight:n,size:o,option:i,index:s,mobile:r}=e;let a=r?f.t5:f.KK[o];if(T(i)){const e=0===s?0:f.Vm;return a=""===i.label?0:a,n?n(i,s):a+e}return t?t(i,s):a},y=e=>"string"===typeof e.content?e.content:"string"===typeof e.children?e.children:e.text?e.text:e.value,O=e=>(e=>o.Children.toArray(e))(e).reduce(((e,{props:t})=>{if("label"in t){const n=t.options||(e=>o.Children.toArray(e).reduce(((e,{props:t})=>("value"in t&&e.push(t),e)),[]))(t.children);e.push({options:n,label:t.label})}return"value"in t&&e.push(Object.assign({},t)),e}),[]),R=(e,t)=>t?t.findIndex((t=>{if(T(t))return!1;if(t.disabled)return!1;const n=y(t);return(o=e,new RegExp(o.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"i")).test(n);var o})):-1,A=e=>{var t;return(null===(t=null===e||void 0===e?void 0:e.current)||void 0===t?void 0:t.getItems())||[]},x=e=>{const{options:t,filter:n,filterOption:o}=e,i=t.filter((e=>!!T(e)||(o?o(e,n):((e,t)=>{const n=y(e).toLocaleLowerCase(),o=t.toLocaleLowerCase();return-1!==n.indexOf(o)})(e,n))));return i.reduce(((e,t,n)=>{const o=T(t),s=T(e[e.length-1]),r=n===i.length-1;return o&&s&&e.pop(),(!o||o&&!r)&&e.push(t),e}),[])};function N(e){const t=e.offsetParent;if(t instanceof HTMLElement){const n=t.offsetHeight,o=t.scrollTop,i=e.offsetTop;i+e.offsetHeight>=o+n?t.scrollTo({top:i-n+e.offsetHeight}):i<=o&&t.scrollTo({top:i})}return!0}const H=(0,m.om)("select-list"),z=({option:e,renderOptionGroup:t})=>t?o.createElement("div",{className:H("group-label-custom")},t(e)):o.createElement("div",{className:H("group-label",{empty:""===e.label})},o.createElement("div",{className:H("group-label-content")},e.label));var I=n(25569),k=n(99991);const P=(0,m.om)("select-list"),L=({option:e})=>{const{content:t,children:n,disabled:i,title:s}=e;return o.createElement("span",{title:s,className:P("option-default-label",{disabled:i})},t||n)},M=e=>{const{renderOption:t,value:n,option:i,multiple:s}=e,r=-1!==n.indexOf(i.value),a=t?t(i):o.createElement(L,{option:i});return o.createElement("div",{"data-qa":i.qa,className:P("option",{colored:r&&!s,disabled:i.disabled})},s&&o.createElement(k.I,{className:P("tick-icon",{shown:r&&s}),data:I.A}),a)};var B=n(29322),D=n(74417);const F=e=>{const t=o.useRef(null);return(0,B.v)({element:t.current,onIntersect:null===e||void 0===e?void 0:e.onIntersect}),o.createElement("div",{ref:t,className:(0,f.C1)("loading-indicator")},o.createElement(D.a,null))},W={value:"__SELECT_LIST_ITEM_LOADING__",disabled:!0},j=o.forwardRef(((e,t)=>{const{onOptionClick:n,renderOption:i,renderOptionGroup:s,getOptionHeight:r,getOptionGroupHeight:a,size:l,flattenOptions:c,value:u,multiple:d,virtualized:h,mobile:p,loading:v,onLoadMore:m,id:g,activeIndex:b,onChangeActive:C}=e,E=o.useMemo((()=>v?[...c,W]:c),[c,v]),T=o.useMemo((()=>c.reduce(((e,t,n)=>("value"in t&&u.includes(t.value)&&e.push(n),e)),[])),[c,u]),y=(e=>{const{getOptionHeight:t,getOptionGroupHeight:n,size:o,options:i,mobile:s}=e;return i.reduce(((e,i,r)=>e+S({getOptionHeight:t,getOptionGroupHeight:n,size:o,option:i,index:r,mobile:s})),0)})({options:E,getOptionHeight:r,getOptionGroupHeight:a,size:l,mobile:p}),O=o.useCallback(((e,t)=>S({getOptionHeight:r,getOptionGroupHeight:a,size:l,option:e,index:t,mobile:p})),[r,a,p,l]),R=o.useCallback(((e,t,n)=>{if("label"in e){const t=s?e=>s(e,{itemHeight:O(e,n)}):void 0;return o.createElement(z,{option:e,renderOptionGroup:t})}if(e.value===W.value)return o.createElement(F,{onIntersect:0===n?void 0:m});const r=i?e=>i(e,{itemHeight:O(e,n)}):void 0;return o.createElement(M,{option:e,value:u,multiple:d,renderOption:r})}),[i,s,u,d,O,m]);return o.createElement(w.B,{ref:t,className:(0,f.C1)({size:l,virtualized:h,mobile:p}),qa:f.pn.LIST,itemClassName:(0,f.C1)("item"),itemHeight:O,itemsHeight:h?y:void 0,items:E,filterable:!1,virtualized:h,renderItem:R,onItemClick:n,selectedItemIndex:T,id:g,role:"listbox",activeItemIndex:b,onChangeActive:C,deactivateOnLeave:!1,onScrollToItem:N})}));j.displayName="SelectList";const Y=(0,m.om)("select-empty-placeholder"),_=({renderEmptyOptions:e,filter:t})=>o.createElement("div",{className:Y({empty:!e})},null===e||void 0===e?void 0:e({filter:t}));var $=n(19884),q=n(93628),V=n(794);function G(e){const{name:t,value:n,disabled:i,form:s,onReset:r}=e,a=(0,V.d)({onReset:r,initialValue:n});return!t||i?null:0===n.length?o.createElement("input",{ref:a,type:"hidden",name:t,value:n,form:s,disabled:i}):o.createElement(o.Fragment,null,n.map(((e,n)=>o.createElement("input",{key:e,ref:0===n?a:void 0,value:e,type:"hidden",name:t,form:s,disabled:i}))))}const K=e=>{const{onChange:t,open:n,disabled:s}=e,[r,a]=o.useState(""),[l,c]=o.useState(),u=o.useCallback((e=>{if(clearTimeout(l),e){const e=window.setTimeout((()=>a("")),f.FY);c(e)}}),[l]),d=o.useCallback((e=>{e.stopPropagation();const t=((e,t)=>{const n=1===e.length;let o="";return e===i.D.BACKSPACE&&t.length?o=t.slice(0,t.length-1):n&&(o=(t+e).trim()),o})(e.key,r);r!==t&&(u(t),a(t))}),[u,r]);o.useEffect((()=>(n&&!s?document.addEventListener("keydown",d):n||s||a(""),()=>{n&&!s&&document.removeEventListener("keydown",d)})),[d,n,s]),o.useEffect((()=>(n||clearTimeout(l),()=>clearTimeout(l))),[n,l]),o.useEffect((()=>{t(r)}),[t,r])};function U(e,t){let n=-1;return t.length>0&&(n=e.findIndex((e=>"value"in e&&t.includes(e.value)&&!e.disabled))),-1===n&&(n=e.findIndex((e=>"value"in e&&!e.disabled))),-1===n?void 0:n}var J=n(87924),Z=n.n(J);function X(e){return Z()(e,[f.zJ])}function Q(e){const{filter:t="",filterable:n,filterOption:i}=e,s=o.useMemo((()=>X(e.options)?e.options:(e=>{const t=e.reduce(((e,t)=>("label"in t?(e.push({label:t.label,disabled:!0,data:t.data}),e.push(...t.options||[])):e.push(t),e)),[]);return Object.defineProperty(t,f.zJ,{enumerable:!1,value:{}}),t})(e.options)),[e.options]),r=o.useMemo((()=>n?x({options:s,filter:t,filterOption:i}):s),[t,n,i,s]);return s[f.zJ].filteredOptions=r,s}const ee=({renderFilter:e,renderList:t})=>o.createElement(o.Fragment,null,e(),t()),te=o.forwardRef((function(e,t){const{onUpdate:n,onOpenChange:v,onFilterChange:m,renderControl:g,renderFilter:b,renderOption:C,renderOptionGroup:w,renderSelectedOption:S,renderEmptyOptions:x,renderPopup:N=ee,getOptionHeight:H,getOptionGroupHeight:z,filterOption:I,name:k,form:P,className:L,controlClassName:M,popupClassName:B,qa:D,value:F,defaultValue:W,defaultOpen:Y,open:V,label:J,placeholder:te,filterPlaceholder:ne,width:oe,popupWidth:ie,popupPlacement:se,error:re,virtualizationThreshold:ae=f.Us,view:le="normal",size:ce="m",pin:ue="round-round",multiple:de=!1,disabled:he=!1,filterable:pe=!1,filter:ve,disablePortal:me,hasClear:fe=!1,onClose:ge,id:be,hasCounter:Ce,renderCounter:Ee,title:we}=e,Te=(0,p.I)(),[Se,ye]=(0,s.P)(ve,"",m),Oe=o.useRef(null),Re=o.useRef(null),Ae=o.useRef(null),xe=o.useRef(null),Ne=(0,r.N)(t,Re),{value:He,open:ze,toggleOpen:Ie,setValue:ke,handleSelection:Pe,handleClearValue:Le}=(({defaultOpen:e,onClose:t,onOpenChange:n,open:i,value:r,defaultValue:c=[],multiple:u,onUpdate:d,disabled:h})=>{const[p,v]=(0,s.P)(r,c,d),[m,f]=o.useState(),g=(0,l.F)({defaultOpen:e,onClose:t,onOpenChange:n,open:i}),{toggleOpen:b}=g,C=(0,a.Tt)(g,["toggleOpen"]),E=o.useCallback((e=>{h||v(e)}),[v,h]),w=o.useCallback((e=>{if(!p.includes(e.value)){const t=[e.value];E(t)}b(!1)}),[p,E,b]),T=o.useCallback((e=>{const t=p.includes(e.value)?p.filter((t=>t!==e.value)):[...p,e.value];E(t)}),[p,E]),S=o.useCallback((e=>{u?T(e):w(e)}),[u,w,T]),y=o.useCallback((()=>{E([])}),[E]);return Object.assign({value:p,activeIndex:m,setValue:E,handleSelection:S,handleClearValue:y,toggleOpen:b,setActiveIndex:f},C)})({onUpdate:n,value:F,defaultValue:W,defaultOpen:Y,multiple:de,open:V,onClose:ge,onOpenChange:v,disabled:he});o.useEffect((()=>{!ze&&pe&&Te&&setTimeout((()=>{ye("")}),300)}),[ze,pe,ye,Te]);const Me=Q({options:e.options||O(e.children),filter:Se,filterable:pe,filterOption:I}),Be=function(e){if(!X(e))throw Error("You should use options generated by useSelectOptions hook");return Z()(e,[f.zJ,"filteredOptions"])}(Me),De=((e,t,n)=>{if(0===t.length)return null;const i=e.filter((e=>!T(e))),s=t.reduce(((e,t)=>{const n=i.find((e=>e.value===t));return e.push(n||{value:t}),e}),[]);return n?s.map(((e,t)=>o.createElement(o.Fragment,{key:e.value},n(e,t)))):s.map((e=>y(e))).join(", ")})(Me,He,S),Fe=Be.length>=ae,{errorMessage:We,errorPlacement:je,validationState:Ye}=(0,h.Av)({error:re,errorMessage:e.errorMessage,errorPlacement:e.errorPlacement||"outside",validationState:e.validationState}),_e=(0,c.u)(),$e="invalid"===Ye,qe=$e&&Boolean(We)&&"outside"===je,Ve=$e&&Boolean(We)&&"inside"===je,Ge=o.useCallback((e=>{var t,n;if(e&&!(null===e||void 0===e?void 0:e.disabled)&&!("label"in e)){if(de){const e=null===(t=null===xe||void 0===xe?void 0:xe.current)||void 0===t?void 0:t.getActiveItem();null===(n=Ae.current)||void 0===n||n.focus(),"number"===typeof e&&setTimeout((()=>{var t;null===(t=null===xe||void 0===xe?void 0:xe.current)||void 0===t||t.activateItem(e,!0)}),50)}Pe(e)}}),[Pe,de]),Ke=o.useCallback((e=>{var t;[i.D.ENTER,i.D.SPACEBAR].includes(e.key)&&ze&&(e.preventDefault(),e.key===i.D.SPACEBAR&&Ge((e=>{var t;const n=A(e),o=null===(t=null===e||void 0===e?void 0:e.current)||void 0===t?void 0:t.getActiveItem();return"number"===typeof o?n[o]:void 0})(xe))),[i.D.ARROW_DOWN,i.D.ARROW_UP].includes(e.key)&&!ze&&(e.preventDefault(),Ie()),null===(t=null===xe||void 0===xe?void 0:xe.current)||void 0===t||t.onKeyDown(e)}),[Ge,ze,Ie]),Ue=o.useCallback((e=>{var t;null===(t=null===xe||void 0===xe?void 0:xe.current)||void 0===t||t.onKeyDown(e)}),[]),Je=o.useCallback((e=>{var t;if(e){const n=R(e,A(xe));"number"===typeof n&&-1!==n&&(null===(t=null===xe||void 0===xe?void 0:xe.current)||void 0===t||t.activateItem(n,!0))}}),[]);K({onChange:Je,open:ze,disabled:pe}),o.useEffect((()=>{var e;ze&&pe&&(null===(e=Ae.current)||void 0===e||e.focus())}),[ze,pe]);const Ze=Object.assign({},"max"===oe&&{width:oe}),Xe={};"number"===typeof oe&&(Xe.width=oe);const Qe=o.useCallback((()=>Ie(!1)),[Ie]),{onFocus:et,onBlur:tt}=e,{focusWithinProps:nt}=(0,u.R)({onFocusWithin:et,onBlurWithin:o.useCallback((e=>{null===tt||void 0===tt||tt(e),Qe()}),[Qe,tt])}),ot=(0,c.u)(),it=null!==be&&void 0!==be?be:ot,st=`select-popup-${it}`,[rt,at]=function({options:e,value:t,open:n}){const[i,s]=o.useState((()=>{if(n)return U(e,t)})),[r,a]=o.useState(n);return r!==n&&(a(n),n&&s(U(e,t))),[n&&void 0!==i&&i<e.length&&!e[i].disabled?i:void 0,s]}({options:Be,open:ze,value:He});return o.createElement("div",Object.assign({ref:Oe,className:(0,f.gm)(Ze,L)},nt,{style:Xe,tabIndex:-1}),o.createElement($.Y,{toggleOpen:Ie,hasClear:fe,clearValue:Le,ref:Ne,className:M,qa:D,view:le,size:ce,pin:ue,label:J,placeholder:te,selectedOptionsContent:De,isErrorVisible:$e,errorMessage:Ve?We:void 0,open:ze,disabled:he,onKeyDown:Ke,renderControl:g,value:He,popupId:st,selectId:it,activeIndex:rt,hasCounter:de&&Ce,renderCounter:Ee,title:we}),o.createElement(q.t,{ref:Oe,className:B,controlRef:Re,width:ie,open:ze,handleClose:Qe,disablePortal:me,virtualized:Fe,mobile:Te,placement:se,onAfterClose:pe?()=>{ye("")}:void 0},N({renderFilter:()=>pe?o.createElement(E,{ref:Ae,size:ce,value:Se,placeholder:ne,onChange:ye,onKeyDown:Ue,renderFilter:b,popupId:st,activeIndex:rt}):null,renderList:()=>Be.length||e.loading?o.createElement(j,{ref:xe,size:ce,value:He,mobile:Te,flattenOptions:Be,multiple:de,virtualized:Fe,onOptionClick:Ge,renderOption:C,renderOptionGroup:w,getOptionHeight:H,getOptionGroupHeight:z,loading:e.loading,onLoadMore:e.onLoadMore,id:st,activeIndex:rt,onChangeActive:at}):o.createElement(_,{filter:Se,renderEmptyOptions:x})})),o.createElement(d.o,{errorMessage:qe?We:null,errorMessageId:_e}),o.createElement(G,{name:k,value:He,disabled:he,form:P,onReset:ke}))}));te.Option=e=>null,te.OptionGroup=e=>null},25569:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(59284);const i=e=>o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),o.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.488 3.43a.75.75 0 0 1 .081 1.058l-6 7a.75.75 0 0 1-1.1.042l-3.5-3.5A.75.75 0 0 1 4.03 6.97l2.928 2.927 5.473-6.385a.75.75 0 0 1 1.057-.081",clipRule:"evenodd"}))},33705:(e,t,n)=>{n.d(t,{I:()=>a});var o=n(59284),i=n(13066),s=n(99991);const r=(0,n(69220).om)("arrow-toggle");function a({size:e=16,direction:t="bottom",className:n,qa:a}){return o.createElement("span",{style:{width:e,height:e},className:r({direction:t},n),"data-qa":a},o.createElement(s.I,{data:i.A,size:e}))}},51301:(e,t,n)=>{n.d(t,{R:()=>s});var o=n(59284);class i{constructor(e,t,n={}){var o,i;this.nativeEvent=t,this.target=null!==(o=n.target)&&void 0!==o?o:t.target,this.currentTarget=null!==(i=n.currentTarget)&&void 0!==i?i:t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=e}isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}}function s(e){const{onFocusWithin:t,onBlurWithin:n,onFocusWithinChange:s,isDisabled:r}=e,a=o.useRef(!1),l=o.useCallback((e=>{a.current||document.activeElement!==e.target||(a.current=!0,t&&t(e),s&&s(!0))}),[t,s]),c=o.useCallback((e=>{a.current&&(a.current=!1,n&&n(e),s&&s(!1))}),[n,s]),{onBlur:u,onFocus:d}=function({onFocus:e,onBlur:t,isDisabled:n}){const s=o.useRef(!1),r=o.useRef(null);o.useEffect((()=>{if(n)return;const e=function(){s.current=!1},o=function(e){if(!s.current&&r.current){const n=new FocusEvent("blur",Object.assign(Object.assign({},e),{relatedTarget:e.target,bubbles:!1,cancelable:!1}));t(new i("blur",n,{target:r.current,currentTarget:r.current})),r.current=null}};return window.addEventListener("focus",e,{capture:!0}),window.addEventListener("focusin",o),()=>{window.removeEventListener("focus",e,{capture:!0}),window.removeEventListener("focusin",o)}}),[n,t]);const a=o.useCallback((e=>{document.activeElement===e.target||null!==e.relatedTarget&&e.relatedTarget!==document.body&&e.relatedTarget!==document||(t(e),r.current=null)}),[t]),l=function(e){const t=o.useRef({isFocused:!1,observer:null});return o.useEffect((()=>{const e=t.current;return()=>{e.observer&&(e.observer.disconnect(),e.observer=null)}}),[]),o.useCallback((n=>{const o=n.target;if(o instanceof HTMLButtonElement||o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement||o instanceof HTMLSelectElement){t.current.isFocused=!0;const n=n=>{t.current.isFocused=!1,o.disabled&&(null===e||void 0===e||e(new i("blur",n))),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};o.addEventListener("focusout",n,{once:!0});const s=new MutationObserver((()=>{if(t.current.isFocused&&o.disabled){s.disconnect(),t.current.observer=null;const e=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),o.dispatchEvent(new FocusEvent("focusout",{relatedTarget:e,bubbles:!0}))}}));s.observe(o,{attributes:!0,attributeFilter:["disabled"]}),t.current.observer=s}}),[e])}(t),c=o.useCallback((t=>{s.current=!0,r.current=t.target,l(t),e(t)}),[l,e]);return{onBlur:a,onFocus:c}}({onFocus:l,onBlur:c,isDisabled:r});return r?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:d,onBlur:u}}}},56353:(e,t,n)=>{n.d(t,{C1:()=>a,Di:()=>l,Eq:()=>p,FY:()=>v,KK:()=>c,Us:()=>m,Vm:()=>d,Zz:()=>r,gP:()=>h,gm:()=>i,ji:()=>s,pn:()=>f,t5:()=>u,zJ:()=>g});var o=n(69220);const i=(0,o.om)("select"),s=(0,o.om)("select-control"),r=(0,o.om)("select-control__button"),a=(0,o.om)("select-list"),l=(0,o.om)("select-clear"),c={s:28,m:28,l:32,xl:36},u=32,d=5,h=1,p=100,v=2e3,m=50,f={LIST:"select-list",POPUP:"select-popup",SHEET:"select-sheet",CLEAR:"select-clear",FILTER_INPUT:"select-filter-input"},g=Symbol("flatten")},69024:(e,t,n)=>{n.d(t,{a:()=>s,j:()=>i});var o=n(59284);function i(e,t){return e.map((e=>{var n;let o;e.sub&&(o=i(e.sub,t));const s=null!==(n=t[e.name])&&void 0!==n?n:e.width;return Object.assign(Object.assign({},e),{width:s,sub:o})}))}function s({saveSizes:e,getSizes:t}){const[n,i]=o.useState((()=>t()));return[n,o.useCallback(((t,n)=>{i((o=>{const i=Object.assign(Object.assign({},o),{[t]:n});return e(i),i}))}),[e])]}},89226:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(72837);const i=JSON.parse('{"label_clear":"Clear","label_show-error-info":"Show popup with error info","label_filter":"Filter"}'),s=JSON.parse('{"label_clear":"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c","label_show-error-info":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u043f\u0430\u043f \u0441 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0435\u0439 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435","label_filter":"\u0424\u0438\u043b\u044c\u0442\u0440"}'),r=(0,o.N)({en:i,ru:s},"Select")},92609:(e,t,n)=>{n.d(t,{F:()=>s});var o=n(59284),i=n(85736);const s=e=>{var t;const{onOpenChange:n,onClose:s}=e,r=o.useCallback((e=>{null===n||void 0===n||n(e),!1===e&&s&&s()}),[n,s]),[a,l]=(0,i.P)(e.open,null!==(t=e.defaultOpen)&&void 0!==t&&t,r),c=o.useCallback((e=>{l("boolean"===typeof e?e:!a)}),[a,l]);return{open:a,toggleOpen:c}}},93628:(e,t,n)=>{n.d(t,{t:()=>p});var o=n(59284),i=n(39238),s=n(12640),r=n(69220),a=n(56353);const l=e=>e-2*a.gP,c=(e,t,n)=>{let o=t;return o="number"===typeof e?e:"fit"===e?l(t):((e,t)=>t?e>a.Eq?e:a.Eq:l(e))(t,n),`${o}px`},u=e=>{const{width:t,disablePortal:n,virtualized:o}=e;return[{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e,name:n})=>{var i;if(null===(i=e.modifiersData[`${n}#persistent`])||void 0===i?void 0:i.skip)return;const s=c(t,e.rects.reference.width,o);"number"!==typeof t&&"fit"!==t?(e.styles.popper.minWidth=s,e.styles.popper.width=void 0):(e.styles.popper.minWidth=s,e.styles.popper.width=s),e.styles.popper.maxWidth=`max(90vw, ${l(e.rects.reference.width)}px)`,e.modifiersData[`${n}#persistent`]={skip:"number"!==typeof t}},effect:({state:e,name:n})=>{var i;if(null===(i=e.modifiersData[`${n}#persistent`])||void 0===i?void 0:i.skip)return;const s=c(t,e.elements.reference.offsetWidth,o);"number"!==typeof t&&"fit"!==t?e.elements.popper.style.minWidth=s:(e.elements.popper.style.minWidth=s,e.elements.popper.style.width=s),e.elements.popper.style.maxWidth=`max(90vw, ${e.elements.reference.offsetWidth}px)`}},{name:"preventOverflow",options:{padding:10,altBoundary:n,altAxis:!0}}]},d=(0,r.om)("select-popup"),h=["bottom-start","bottom-end","top-start","top-end"],p=o.forwardRef((({handleClose:e,onAfterClose:t,width:n,open:r,placement:l=h,controlRef:c,children:p,className:v,disablePortal:m,virtualized:f,mobile:g,id:b},C)=>g?o.createElement(s.c,{qa:a.pn.SHEET,className:v,visible:Boolean(r),onClose:e},p):o.createElement(i.z,{contentClassName:d(null,v),qa:a.pn.POPUP,anchorRef:C,placement:l,offset:[a.gP,a.gP],open:r,onClose:e,disablePortal:m,restoreFocus:!0,restoreFocusRef:c,modifiers:u({width:n,disablePortal:m,virtualized:f}),id:b,onTransitionExited:t},p)));p.displayName="SelectPopup"}}]);