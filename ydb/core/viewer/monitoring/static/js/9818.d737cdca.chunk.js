"use strict";(self.webpackChunkydb_embedded_ui=self.webpackChunkydb_embedded_ui||[]).push([[9818],{50422:(e,s,t)=>{t.d(s,{q:()=>h});var r=t(84317),a=t(17176),l=t(2418),n=t(905),o=t(24362),c=t(17096),i=t(30817);const d=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}'),u=(0,i.wZ)("ydb-diagnostics-autorefresh-control",{en:d});var v=t(75859);const m=(0,o.cn)("auto-refresh-control");function h(e){let{className:s}=e;const t=(0,c.zL)(),[o,i]=(0,c.Rj)();return(0,v.jsxs)("div",{className:m(null,s),children:[(0,v.jsx)(a.z,{view:"flat",onClick:()=>{t(n.h.util.invalidateTags(["All"]))},extraProps:{"aria-label":u("Refresh")},children:(0,v.jsx)(a.z.Icon,{children:(0,v.jsx)(r.Z,{})})}),(0,v.jsxs)(l.P,{value:[String(o)],onUpdate:e=>{i(Number(e))},width:85,children:[(0,v.jsx)(l.P.Option,{value:"0",children:u("None")}),(0,v.jsx)(l.P.Option,{value:"15000",children:u("15 sec")}),(0,v.jsx)(l.P.Option,{value:"60000",children:u("1 min")}),(0,v.jsx)(l.P.Option,{value:"120000",children:u("2 min")}),(0,v.jsx)(l.P.Option,{value:"300000",children:u("5 min")})]})]})}},62776:(e,s,t)=>{t.d(s,{a:()=>r.a});var r=t(91173)},67359:(e,s,t)=>{t.d(s,{y:()=>u});var r=t(56829),a=t(24362),l=t(34301),n=t(55850),o=t(75859);const c=(0,a.cn)("progress-viewer"),i=e=>(0,l.uf)((0,l.W0)(Number(e),2)),d=(e,s)=>[i(e),i(s)];function u(e){let{value:s,capacity:t,formatValues:a=d,percents:l,className:i,size:u="xs",colorizeProgress:v,inverseColorize:m,warningThreshold:h=60,dangerThreshold:N=80}=e;const g=(0,r.F)();let p=Math.round(parseFloat(String(s))/parseFloat(String(t))*100)||0;p=p>100?100:p;let S=s,x=t,f="/";l?(S=p+"%",x="",f=""):a&&([S,x]=a(Number(s),Number(t)));let E=m?"danger":"good";v&&(p>h&&p<=N?E="warning":p>N&&(E=m?"good":"danger"),(0,n.kE)(t)||(p=100));const b={width:p+"%"};return(0,n.kE)(s)?(0,o.jsxs)("div",{className:c({size:u,theme:g,status:E},i),children:[(0,o.jsx)("div",{className:c("line"),style:b}),(0,o.jsx)("span",{className:c("text"),children:(0,n.kE)(t)?"".concat(S," ").concat(f," ").concat(x):S})]}):(0,o.jsx)("div",{className:"".concat(c({size:u})," ").concat(i," error"),children:"no data"})}},2098:(e,s,t)=>{t.d(s,{G:()=>i});var r=t(2639),a=t(19812),l=t(24362),n=t(89712),o=t(75859);const c=(0,l.cn)("ydb-resizeable-data-table");function i(e){let{columnsWidthLSKey:s,columns:t,settings:l,wrapperClassName:i,...d}=e;const[u,v]=(0,n.M)(s),m=(0,r.B)(t,u),h={...l,defaultResizeable:!0};return(0,o.jsx)("div",{className:c(null,i),children:(0,o.jsx)(a.ZP,{theme:"yandex-cloud",columns:m,onResize:v,settings:h,...d})})}},30629:(e,s,t)=>{t.d(s,{o:()=>c});var r=t(68963),a=t(77264),l=t(24362),n=t(75859);const o=(0,l.cn)("ydb-search"),c=e=>{let{onChange:s,value:t="",className:l,debounce:c=200,placeholder:i}=e;const[d,u]=r.useState(t),v=r.useRef();r.useEffect((()=>{u((e=>e!==t?t:e))}),[t]);return(0,n.jsx)(a.o,{hasClear:!0,autoFocus:!0,className:o(null,l),placeholder:i,value:d,onUpdate:e=>{u(e),window.clearTimeout(v.current),v.current=window.setTimeout((()=>{null===s||void 0===s||s(e)}),c)}})}},11551:(e,s,t)=>{t.d(s,{o:()=>r.o});var r=t(30629)},76435:(e,s,t)=>{t.r(s),t.d(s,{Clusters:()=>ee});var r=t(68963),a=t(19812),l=t(2418),n=t(48857),o=t(49352),c=t(50422),i=t(26688),d=t(62776),u=t(2098),v=t(11551),m=t(20163),h=t(43680),N=t.n(h);const g=e=>e.clusters.clusterName,p=e=>e.clusters.status,S=e=>e.clusters.service,x=e=>e.clusters.version,f=(e,s)=>0===s.length||e.status&&s.includes(e.status),E=(e,s)=>0===s.length||e.service&&s.includes(e.service),b=(e,s)=>0===s.length||s.some((s=>{var t,r;return null===(t=e.cluster)||void 0===t||null===(r=t.Versions)||void 0===r?void 0:r.some((e=>e.startsWith(s)))})),j=function(e){var s;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return!0;const r=t.toLowerCase(),a=r.split(" "),l=(null===(s=e.title)||void 0===s?void 0:s.toLowerCase().match(/[^\d\s]+|\d+|[^-\s]+|[^_\s]+/g))||[],n=a.every((s=>{const t=N()(s),r=new RegExp("^".concat(t,"|[\\s\\-_]").concat(t),"i");return e.title&&r.test(e.title)||l.some((e=>e.startsWith(s)))})),o=e.preparedVersions.some((e=>e.version.includes(r))),c=Boolean(e.hosts&&e.hosts[r]);return n||o||c};var T=t(52317),O=t(17096),w=t(30601),C=t(67359),A=t(34301),_=t(30817);const R=JSON.parse('{"controls_status-select-label":"Status:","controls_service-select-label":"Service:","controls_version-select-label":"Version:","controls_search-placeholder":"Cluster name, version, host","controls_select-placeholder":"All","statistics_clusters":"Clusters","statistics_hosts":"Hosts","statistics_tenants":"Tenants","statistics_nodes":"Nodes","statistics_load":"Load","statistics_storage":"Storage","tooltip_no-cluster-data":"No cluster data","page_title":"Clusters"}'),y=JSON.parse('{"controls_status-select-label":"\u0421\u0442\u0430\u0442\u0443\u0441:","controls_service-select-label":"\u0421\u0435\u0440\u0432\u0438\u0441:","controls_version-select-label":"\u0412\u0435\u0440\u0441\u0438\u044f:","controls_search-placeholder":"\u0418\u043c\u044f \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430, \u0432\u0435\u0440\u0441\u0438\u044f \u0438\u043b\u0438 \u0445\u043e\u0441\u0442","controls_select-placeholder":"\u0412\u0441\u0435","statistics_clusters":"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b","statistics_hosts":"\u0425\u043e\u0441\u0442\u044b","statistics_tenants":"\u0411\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445","statistics_nodes":"\u0423\u0437\u043b\u044b","statistics_load":"\u041d\u0430\u0433\u0440\u0443\u0437\u043a\u0430","statistics_storage":"\u0425\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435","tooltip_no-cluster-data":"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0430","page_title":"\u041a\u043b\u0430\u0441\u0442\u0435\u0440\u044b"}'),I=(0,_.wZ)("ydb-clusters-page",{ru:y,en:R});var L=t(24362);const z=(0,L.cn)("clusters");var D=t(75859);const P=e=>{let{count:s,stats:t}=e;const{NodesTotal:r,NodesAlive:a,Hosts:l,Tenants:n,LoadAverage:o,NumberOfCpus:c,StorageUsed:i,StorageTotal:d}=t;return(0,D.jsxs)("div",{className:z("aggregation"),children:[(0,D.jsxs)("div",{className:z("aggregation-value-container"),children:[(0,D.jsx)("span",{className:z("aggregation-label"),children:I("statistics_clusters")}),s]}),(0,D.jsxs)("div",{className:z("aggregation-value-container"),children:[(0,D.jsx)("span",{className:z("aggregation-label"),children:I("statistics_hosts")}),l]}),(0,D.jsxs)("div",{className:z("aggregation-value-container"),children:[(0,D.jsx)("span",{className:z("aggregation-label"),children:I("statistics_tenants")}),n]}),(0,D.jsxs)("div",{className:z("aggregation-value-container"),children:[(0,D.jsx)("span",{className:z("aggregation-label"),children:I("statistics_nodes")}),(0,D.jsx)(C.y,{size:"ns",value:a,capacity:r,colorizeProgress:!0,inverseColorize:!0})]}),(0,D.jsxs)("div",{className:z("aggregation-value-container"),children:[(0,D.jsx)("span",{className:z("aggregation-label"),children:I("statistics_load")}),(0,D.jsx)(C.y,{size:"ns",value:o,capacity:c,colorizeProgress:!0})]}),(0,D.jsxs)("div",{className:z("aggregation-value-container"),children:[(0,D.jsx)("span",{className:z("aggregation-label"),children:I("statistics_storage")}),(0,D.jsx)(C.y,{size:"ns",value:i,capacity:d,formatValues:A.QO,colorizeProgress:!0})]})]})};var V=t(21986),k=t(86017),U=t(84893),G=t(19797),M=t(40726);const W=(0,L.cn)("kv-user");function Z(e){let{login:s,className:t}=e;const r=(0,M.C)("StaffCard");return(0,D.jsx)("div",{className:W(null,t),children:(0,D.jsx)(r,{login:s,children:(0,D.jsx)("div",{className:W("name"),children:s})})})}var B=t(45535),H=t(81003);const q="selectedColumns",F={TITLE:"title",VERSIONS:"versions",CLUSTER:"cluster",SERVICE:"service",STATUS:"status",NODES:"nodes",LOAD:"load",STORAGE:"storage",HOSTS:"hosts",TENANTS:"tenants",OWNER:"owner",DESCRIPTION:"description",BALANCER:"balancer"},J=[F.TITLE,F.VERSIONS,F.SERVICE,F.STATUS,F.NODES,F.LOAD,F.STORAGE,F.HOSTS,F.TENANTS,F.OWNER,F.BALANCER],X={[F.TITLE]:"Cluster",[F.VERSIONS]:"Versions",[F.CLUSTER]:"DC",[F.SERVICE]:"Service",[F.STATUS]:"Status",[F.NODES]:"Nodes",[F.LOAD]:"Load",[F.STORAGE]:"Storage",[F.HOSTS]:"Hosts",[F.TENANTS]:"Tenants",[F.OWNER]:"Owner",[F.DESCRIPTION]:"Description",[F.BALANCER]:"Balancer"},K="clustersTableColumnsWidth",Q=(0,D.jsx)("span",{className:z("empty-cell"),children:"\u2014"}),Y=[{name:F.TITLE,header:X[F.TITLE],width:230,render:e=>{var s,t;let{row:r}=e;const{balancer:a,name:l}=r,n=a&&(0,B.M2)(a),o=(0,H.B7)(void 0,{backend:n,clusterName:l}),c=null===(s=r.cluster)||void 0===s?void 0:s.Overall;return(0,D.jsxs)("div",{className:z("cluster"),children:[c?(0,D.jsx)(k.r,{href:o,children:(0,D.jsx)("div",{className:z("cluster-status",{type:c&&c.toLowerCase()})})}):(0,D.jsx)("div",{className:z("cluster-status"),children:(0,D.jsx)(V.J,{content:(0,D.jsx)("span",{className:z("tooltip-content"),children:(null===(t=r.cluster)||void 0===t?void 0:t.error)||I("tooltip_no-cluster-data")}),offset:{left:0}})}),(0,D.jsx)("div",{className:z("cluster-name"),children:(0,D.jsx)(k.r,{href:o,children:r.title})})]})},defaultOrder:a.ZP.ASCENDING},{name:F.VERSIONS,header:X[F.VERSIONS],width:300,defaultOrder:a.ZP.DESCENDING,sortAccessor:e=>{let{preparedVersions:s}=e;return s.map((e=>e.version.replace(/^[0-9]\+\./g,""))).sort(((e,s)=>e.localeCompare(s)))[0]||void 0},render:e=>{let{row:s}=e;const{preparedVersions:t,versions:a=[],balancer:l,name:n}=s;if(!a.length||a.some((e=>!e.version)))return Q;const o=a.reduce(((e,s)=>e+s.count),0),c=a.map((e=>{var s;return{value:e.count/o*100,color:null===(s=t.find((s=>s.version===e.version)))||void 0===s?void 0:s.color}})),i=l&&(0,B.M2)(l);return t.length>0&&(0,D.jsx)(k.r,{className:z("cluster-versions"),href:(0,H.B7)(H.xu.versions,{backend:i,clusterName:n}),children:(0,D.jsxs)(r.Fragment,{children:[t.map(((e,s)=>(0,D.jsx)("div",{className:z("cluster-version"),style:{color:e.color},title:e.version,children:e.version},s))),(0,D.jsx)(U.E,{size:"s",value:100,stack:c})]})})}},{name:F.CLUSTER,header:X[F.CLUSTER],width:120,sortable:!1,render:e=>{let{row:s}=e;const t=s.cluster&&s.cluster.DataCenters||[];return(0,D.jsx)("div",{className:z("cluster-dc"),children:t.join(", ")||Q})}},{name:F.SERVICE,header:X[F.SERVICE],width:100,sortable:!0},{name:F.STATUS,header:X[F.STATUS],width:150,sortable:!0},{name:F.NODES,header:X[F.NODES],resizeMinWidth:140,defaultOrder:a.ZP.DESCENDING,sortAccessor:e=>{let{cluster:s={}}=e;const{NodesTotal:t=0}=s;return t},render:e=>{let{row:s}=e;const{NodesAlive:t=0,NodesTotal:r=0,Overall:a}=s.cluster||{};return a?(0,D.jsx)(C.y,{value:t,capacity:r}):Q}},{name:F.LOAD,header:X[F.LOAD],resizeMinWidth:140,defaultOrder:a.ZP.DESCENDING,sortAccessor:e=>{let{cluster:s}=e;return null===s||void 0===s?void 0:s.NumberOfCpus},render:e=>{let{row:s}=e;const{LoadAverage:t=0,NumberOfCpus:r=0,Overall:a}=s.cluster||{};return a?(0,D.jsx)(C.y,{value:t,capacity:r}):Q}},{name:F.STORAGE,header:X[F.STORAGE],resizeMinWidth:140,defaultOrder:a.ZP.DESCENDING,sortAccessor:e=>{let{cluster:s}=e;return Number(null===s||void 0===s?void 0:s.StorageTotal)},render:e=>{let{row:s}=e;const{StorageUsed:t=0,StorageTotal:r=0,Overall:a}=s.cluster||{};return a?(0,D.jsx)(C.y,{value:t,capacity:r,formatValues:A.JD}):Q}},{name:F.HOSTS,header:X[F.HOSTS],width:80,defaultOrder:a.ZP.DESCENDING,sortAccessor:e=>{let{cluster:s}=e;return Number(null===s||void 0===s?void 0:s.Hosts)||0},render:e=>{var s;let{row:t}=e;return Number(null===(s=t.cluster)||void 0===s?void 0:s.Hosts)||Q}},{name:F.TENANTS,header:X[F.TENANTS],width:80,defaultOrder:a.ZP.DESCENDING,sortAccessor:e=>{let{cluster:s}=e;return Number(null===s||void 0===s?void 0:s.Tenants)||0},render:e=>{var s;let{row:t}=e;return Number(null===(s=t.cluster)||void 0===s?void 0:s.Tenants)||Q}},{name:F.OWNER,header:X[F.OWNER],sortable:!1,width:120,render:e=>{var s;let{row:t}=e;const r=null===(s=t.owner)||void 0===s?void 0:s.split(", ");return null!==r&&void 0!==r&&r.length?r.map((e=>(0,D.jsx)(Z,{login:e},e))):Q}},{name:F.DESCRIPTION,header:X[F.DESCRIPTION],sortable:!1,width:150,render:e=>{let{row:s}=e;return s.description?(0,D.jsx)("div",{className:z("description"),children:s.description}):Q}},{name:F.BALANCER,header:X[F.BALANCER],sortable:!1,width:290,render:e=>{let{row:s}=e;if(!s.balancer)return Q;const t=(0,B.q)(s.balancer);return(0,D.jsxs)("div",{className:z("balancer-cell"),children:[(0,D.jsx)("div",{className:z("balancer-text"),children:t}),(0,D.jsx)(G.m,{size:"s",text:t,className:z("balancer-icon")})]})}}],$=(e,s,t,r,a)=>{const[l,n]=(0,O.yu)(s,r),o=e.map((e=>e.name));return{columnsToShow:e.filter((e=>l.find((s=>s===e.name)))),columnsToSelect:o.map((e=>{const s=null===a||void 0===a?void 0:a.includes(e);return{id:e,title:t[e],selected:l.includes(e),required:s,sticky:s?"start":void 0}})),setColumns:e=>{const s=e.filter((e=>e.selected)).map((e=>e.id));n(s)}}};function ee(){const[e]=(0,O.Rj)(),s=m.W1.useGetClustersListQuery(void 0,{pollingInterval:e}),t=(0,O.zL)(),h=(0,O.ix)(g),N=(0,O.ix)(p),C=(0,O.ix)(S),A=(0,O.ix)(x),{columnsToShow:_,columnsToSelect:R,setColumns:y}=$(Y,q,X,J,[F.TITLE]),L=s.data,{servicesToSelect:V,versions:k}=r.useMemo((()=>{const e=new Set,s=new Set;return(null!==L&&void 0!==L?L:[]).forEach((t=>{var r,a;t.service&&e.add(t.service),null===(r=t.cluster)||void 0===r||null===(a=r.Versions)||void 0===a||a.forEach((e=>{s.add((0,w.H)(e))}))})),{servicesToSelect:Array.from(e).map((e=>({value:e,content:e}))),versions:Array.from(s).map((e=>({value:e,content:e})))}}),[L]),U=r.useMemo((()=>function(e,s){return e.filter((e=>f(e,s.status)&&E(e,s.service)&&b(e,s.version)&&j(e,s.clusterName)))}(null!==L&&void 0!==L?L:[],{clusterName:h,status:N,service:C,version:A})),[h,L,C,N,A]),G=r.useMemo((()=>function(e){let s=0,t=0,r=0,a=0,l=0,n=0,o=0;const c=new Set;return e.filter((e=>{let{cluster:s}=e;return!(null!==s&&void 0!==s&&s.error)})).forEach((e=>{let{cluster:i,hosts:d={}}=e;s+=(null===i||void 0===i?void 0:i.NodesTotal)||0,t+=(null===i||void 0===i?void 0:i.NodesAlive)||0,Object.keys(d).forEach((e=>c.add(e))),o+=Number(null===i||void 0===i?void 0:i.Tenants)||0,r+=Number(null===i||void 0===i?void 0:i.LoadAverage)||0,a+=(null===i||void 0===i?void 0:i.NumberOfCpus)||0,l+=null!==i&&void 0!==i&&i.StorageUsed?Math.floor(parseInt(i.StorageUsed,10)):0,n+=null!==i&&void 0!==i&&i.StorageTotal?Math.floor(parseInt(i.StorageTotal,10)):0})),{NodesTotal:s,NodesAlive:t,Hosts:c.size,Tenants:o,LoadAverage:r,NumberOfCpus:a,StorageUsed:l,StorageTotal:n}}(U)),[U]),M=r.useMemo((()=>Array.from(new Set((null!==L&&void 0!==L?L:[]).map((e=>e.status)).filter(Boolean))).sort().map((e=>({value:e,content:e})))),[L]);return(0,D.jsxs)("div",{className:z(),children:[(0,D.jsx)(o.ql,{children:(0,D.jsx)("title",{children:I("page_title")})}),(0,D.jsx)(P,{stats:G,count:U.length}),(0,D.jsxs)("div",{className:z("controls"),children:[(0,D.jsx)("div",{className:z("control",{wide:!0}),children:(0,D.jsx)(v.o,{placeholder:I("controls_search-placeholder"),onChange:e=>{t((0,m.g_)({clusterName:e}))},value:h})}),(0,D.jsx)("div",{className:z("control"),children:(0,D.jsx)(l.P,{multiple:!0,filterable:!0,hasClear:!0,placeholder:I("controls_select-placeholder"),label:I("controls_status-select-label"),value:N,options:M,onUpdate:e=>{t((0,m.g_)({status:e}))},width:"max"})}),(0,D.jsx)("div",{className:z("control"),children:(0,D.jsx)(l.P,{multiple:!0,filterable:!0,hasClear:!0,placeholder:I("controls_select-placeholder"),label:I("controls_service-select-label"),value:C,options:V,onUpdate:e=>{t((0,m.g_)({service:e}))},width:"max"})}),(0,D.jsx)("div",{className:z("control"),children:(0,D.jsx)(l.P,{multiple:!0,filterable:!0,hasClear:!0,placeholder:I("controls_select-placeholder"),label:I("controls_version-select-label"),value:A,options:k,onUpdate:e=>{t((0,m.g_)({version:e}))},width:"max"})}),(0,D.jsx)("div",{className:z("control"),children:(0,D.jsx)(n.N,{popupWidth:242,items:R,showStatus:!0,onUpdate:y,sortable:!1},"TableColumnSetup")}),(0,D.jsx)(c.q,{})]}),s.isError?(0,D.jsx)(i.V,{error:s.error,className:z("error")}):null,s.isLoading?(0,D.jsx)(d.a,{size:"l"}):null,s.fulfilledTimeStamp?(0,D.jsx)("div",{className:z("table-wrapper"),children:(0,D.jsx)("div",{className:z("table-content"),children:(0,D.jsx)(u.G,{columnsWidthLSKey:K,wrapperClassName:z("table"),data:U,columns:_,settings:{...T.LE,dynamicRender:!1},initialSortOrder:{columnId:F.TITLE,order:a.ZP.ASCENDING}})})}):null]})}},89712:(e,s,t)=>{t.d(s,{M:()=>n});var r=t(68963),a=t(2639),l=t(18193);const n=e=>{const s=r.useCallback((()=>e?l.r.readUserSettingsValue(e,{}):{}),[e]),t=r.useCallback((s=>{e&&l.r.setUserSettingsValue(e,s)}),[e]);return(0,a.M)({saveSizes:t,getSizes:s})}},84317:(e,s,t)=>{t.d(s,{Z:()=>a});var r=t(68963);const a=e=>r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),r.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8 1.5a6.501 6.501 0 0 1 6.445 5.649.75.75 0 1 1-1.488.194A5.001 5.001 0 0 0 4.43 4.5h1.32a.75.75 0 0 1 0 1.5h-3A.75.75 0 0 1 2 5.25v-3a.75.75 0 1 1 1.5 0v1.06A6.48 6.48 0 0 1 8 1.5Zm5.25 13a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-3a.75.75 0 1 0 0 1.5h1.32a5.001 5.001 0 0 1-8.528-2.843.75.75 0 1 0-1.487.194 6.501 6.501 0 0 0 10.945 3.84v1.059c0 .414.336.75.75.75Z",clipRule:"evenodd"}))},2639:(e,s,t)=>{t.d(s,{B:()=>a,M:()=>l});var r=t(68963);function a(e,s){return e.map((e=>{var t;let r;e.sub&&(r=a(e.sub,s));const l=null!==(t=s[e.name])&&void 0!==t?t:e.width;return Object.assign(Object.assign({},e),{width:l,sub:r})}))}function l(e){let{saveSizes:s,getSizes:t}=e;const[a,l]=r.useState((()=>t()));return[a,r.useCallback(((e,t)=>{l((r=>{const a=Object.assign(Object.assign({},r),{[e]:t});return s(a),a}))}),[s])]}},84893:(e,s,t)=>{t.d(s,{E:()=>u});var r=t(68963);const a=(0,t(36951).Ge)("progress");function l(e){const{text:s,offset:t=0}=e;return s?r.createElement("div",{className:a("text-inner"),style:{transform:"translateX(calc(var(--g-flow-direction) * ".concat(-t,"%))")}},s):null}function n(e){let{item:s}=e;const{value:t,color:l,className:n,theme:o,title:c,content:i,loading:d}=s,u={loading:d};return"undefined"===typeof l&&(u.theme=o||"default"),Number.isFinite(t)?r.createElement("div",{className:a("item",u,n),style:{width:"".concat(t,"%"),backgroundColor:l},title:c},i):null}function o(e){return e<100?e-100:0}function c(e){const{theme:s,colorStops:t,colorStopsValue:r,value:a}=e;if(t){const e=t.find(((e,s)=>{const l="number"===typeof r?r:a,n=s>1?t[s-1].stop:0,o=s<t.length-1?e.stop:100;return l>=n&&l<=o}));return e?e.theme:s}return s}function i(e){const{stack:s,stackClassName:t,value:c,text:i}=e,d=o(c||function(e){return e.reduce(((e,s)=>{let{value:t}=s;return e+t}),0)}(s));return r.createElement("div",{className:a("stack",t),style:{transform:"translateX(calc(var(--g-flow-direction) * ".concat(d,"%))")}},r.createElement("div",{className:a("item"),style:{width:"".concat(-d,"%")}}),s.map(((e,s)=>r.createElement(n,{key:s,item:e}))),r.createElement(l,{offset:d,text:i}))}function d(e){const{value:s,loading:t,text:n}=e,i=o(s);return Number.isFinite(s)?r.createElement("div",{className:a("item",{theme:c(e),loading:t}),style:{transform:"translateX(calc(var(--g-flow-direction) * ".concat(i,"%))")}},r.createElement(l,{offset:i,text:n})):null}const u=r.forwardRef((function(e,s){const{text:t="",theme:l="default",size:n="m",loading:o=!1,className:c,qa:u}=e,v=Object.assign(Object.assign({},e),{text:t,theme:l,size:n,loading:o});return r.createElement("div",{ref:s,className:a({size:n},c),"data-qa":u},r.createElement("div",{className:a("text")},t),function(e){return void 0!==e.stack}(v)?r.createElement(i,Object.assign({},v)):r.createElement(d,Object.assign({},v)))}))}}]);