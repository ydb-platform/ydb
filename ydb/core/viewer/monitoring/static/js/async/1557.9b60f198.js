"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([["1557"],{23273:function(e,n,t){t.d(n,{E:()=>p});var l=t(74848),s=t(32065),r=t(24629),i=t(43834),a=t(56496),o=t(25247),c=t(61738),d=t(51432),u=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}');let m=(0,d.g4)("ydb-diagnostics-autorefresh-control",{en:u}),h=(0,o.cn)("auto-refresh-control");function p({className:e,onManualRefresh:n}){let t=(0,c.YQ)(),[o,d]=(0,c.Nt)();return(0,l.jsxs)("div",{className:h(null,e),children:[(0,l.jsx)(r.$,{view:"flat-secondary",onClick:()=>{t(a.F.util.invalidateTags(["All"])),n?.()},"aria-label":m("Refresh"),children:(0,l.jsx)(r.$.Icon,{children:(0,l.jsx)(s.A,{})})}),(0,l.jsxs)(i.l,{value:[String(o)],onUpdate:e=>{d(Number(e))},width:85,qa:"ydb-autorefresh-select",children:[(0,l.jsx)(i.l.Option,{value:"0",children:m("None")}),(0,l.jsx)(i.l.Option,{value:"15000",children:m("15 sec")}),(0,l.jsx)(i.l.Option,{value:"60000",children:m("1 min")}),(0,l.jsx)(i.l.Option,{value:"120000",children:m("2 min")}),(0,l.jsx)(i.l.Option,{value:"300000",children:m("5 min")})]})]})}},5948:function(e,n,t){t.d(n,{s:()=>i});var l=t(74848);t(96540);var s=t(29901);let r=(0,t(25247).cn)("ydb-cell-with-popover");function i({children:e,className:n,wrapperClassName:t,fullWidth:i,...a}){return(0,l.jsx)("div",{className:r({"full-width":i},t),children:(0,l.jsx)(s.A,{openDelay:100,closeDelay:100,className:r("popover",{"full-width":i}),...a,children:(0,l.jsx)("div",{className:r("children-wrapper",{"full-width":i},n),children:e})})})}},80720:function(e,n,t){t.d(n,{u:()=>i});var l=t(74848),s=t(96540),r=t(54403);let i=({children:e,content:n,className:t,pinOnClick:i,hasArrow:a=!0,placement:o=["top","bottom"],...c})=>{let[d,u]=s.useState(!1),[m,h]=s.useState(!1),p=s.useRef(null);return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)(r.z,{anchorElement:p.current,open:m||d,placement:o,hasArrow:a,onOutsideClick:()=>{h(!1)},...c,children:n}),(0,l.jsx)("span",{className:t,ref:p,onClick:i?()=>{h(!0)}:void 0,onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},children:e})]})}},53211:function(e,n,t){t.d(n,{T:()=>o});var l=t(74848),s=t(5434),r=t(25247);let i=(0,t(51432).g4)("ydb-entities-count",{ru:{of:"из"},en:{of:"of"}}),a=(0,r.cn)("ydb-entities-count"),o=({total:e,current:n,label:t,loading:r,className:o})=>{let c="";return t&&(c+=`${t}: `),r?c+="...":(c+=`${n}`,e&&Number(e)!==Number(n)&&(c+=` ${i("of")} ${e}`)),(0,l.jsx)(s.J,{theme:"info",size:"m",className:a(null,o),children:c})}},80865:function(e,n,t){t.d(n,{z:()=>o});var l=t(74848),s=t(96540),r=t(25247),i=t(64349);let a=(0,r.cn)("info-viewer"),o=({title:e,info:n,dots:t=!0,size:r,variant:o="default",className:c,multilineLabels:d,renderEmptyState:u})=>n&&n.length||!u?(0,l.jsxs)("div",{className:a({size:r,variant:o},c),children:[e&&(0,l.jsx)("div",{className:a("title"),children:e}),n&&n.length>0?(0,l.jsx)("div",{className:a("items"),children:n.map((e,n)=>(0,l.jsxs)("div",{className:a("row"),children:[(0,l.jsxs)("div",{className:a("label"),children:[(0,l.jsx)("div",{className:a("label-text",{multiline:d}),children:e.label}),t&&(0,l.jsx)("div",{className:a("dots")})]}),(0,l.jsx)("div",{className:a("value"),children:e.value})]},n))}):(0,i.A)("no-data")]}):(0,l.jsx)(s.Fragment,{children:u({title:e,size:r})})},64349:function(e,n,t){t.d(n,{A:()=>r});var l=t(51432),s=JSON.parse('{"common.created":"Created","common.type":"Type","no-data":"No data"}');let r=(0,l.g4)("ydb-components-info-viewer",{en:s})},83758:function(e,n,t){t.d(n,{Hr:()=>s.H,jl:()=>s.j,z_:()=>l.z});var l=t(80865),s=t(2275)},2275:function(e,n,t){function l({values:e,labels:n,defaultValueFormatter:t}){return(l,s)=>{let r;return{label:(n||{})[l]??l,value:(r=(e||{})[l]||t)?r(s):s}}}t.d(n,{H:()=>l,j:()=>s});let s=(e,n)=>n?Object.entries(n).map(([n,t])=>e(n,t)).filter(({value:e})=>!!e):[]},48649:function(e,n,t){t.d(n,{_:()=>d});var l=t(74848),s=t(25247),r=t(80720),i=t(18016);let a=(0,s.cn)("ydb-pool-bar"),o=({data:e={}})=>{let{Usage:n=0}=e,t=Math.min(100*n,100),s=t>=75?"danger":t>=50&&t<75?"warning":"normal";return(0,l.jsx)(r.u,{className:a({type:s}),content:(0,l.jsx)(i.HG,{data:e,className:a("popup-content")}),children:(0,l.jsx)("div",{style:{height:`${t}%`},className:a("value",{type:s})})})},c=(0,s.cn)("ydb-pools-graph"),d=({pools:e=[]})=>(0,l.jsx)("div",{className:c(),children:e.map((e,n)=>(0,l.jsx)(o,{data:e},n))})},29472:function(e,n,t){t.d(n,{v:()=>c});var l=t(74848);t(96540);var s=t(25247),r=t(33777),i=t(36354);let a=({onUpdate:e,value:n="",debounce:t=200,...s})=>{let[a,o]=(0,i.o)({value:n,onUpdate:e,debounce:t});return(0,l.jsx)(r.k,{value:a,onUpdate:o,...s})},o=(0,s.cn)("ydb-search"),c=({onChange:e,value:n="",width:t,className:s,debounce:r,inputRef:i,...c})=>(0,l.jsx)(a,{debounce:r,hasClear:!0,autoFocus:!0,controlRef:i,style:{width:t},className:o(null,s),value:n,onUpdate:e,...c})},31596:function(e,n,t){t.d(n,{O:()=>c});var l=t(74848),s=t(64482),r=t(77269),i=t(24629),a=t(17427),o=t(98537);function c(e){let{items:n,showStatus:t,disabled:c}=e;return(0,l.jsx)(o.O,{...e,renderSwitcher:e=>(0,l.jsxs)(i.$,{disabled:c,onClick:e.onClick,children:[(0,l.jsx)(a.I,{data:s.A}),(()=>{if(!t)return null;let e=n.reduce((e,n)=>n.selected?e+1:e,0),s=n.length;return(0,l.jsxs)(r.E,{color:"secondary",children:[e,"/",s]})})()]}),hideApplyButton:!0})}},48849:function(e,n,t){t.d(n,{L:()=>c});var l=t(74848),s=t(96540),r=t(85169),i=t(25247),a=t(78951);let o=(0,i.cn)("ydb-table-with-controls-layout"),c=({children:e,className:n,fullHeight:t})=>(0,l.jsx)("div",{className:o({"full-height":t},n),children:e});c.Controls=function({children:e,renderExtraControls:n,className:t}){return(0,l.jsxs)(r.s,{justifyContent:"space-between",className:o("controls-wrapper"),gap:2,children:[(0,l.jsx)("div",{className:o("controls",t),children:e}),(0,l.jsx)("div",{className:o("extra-controls"),children:n?.()})]})},c.Table=function({children:e,loading:n,className:t,scrollContainerRef:r,scrollDependencies:i=[]}){let c=s.useRef(null);return((({tableContainerRef:e,scrollContainerRef:n,dependencies:t=[]})=>{let l=s.useCallback(()=>{if(e?.current){let n=window.getComputedStyle(e.current).getPropertyValue("--data-table-sticky-header-offset");return n?parseInt(n,10):0}return 0},[e]),r=s.useCallback(()=>{if(e?.current&&n?.current){let t=l(),s=e.current.getBoundingClientRect(),r=n.current.getBoundingClientRect(),i=s.top-r.top+n.current.scrollTop;s.top-t<r.top&&n.current.scrollTo(0,i-t)}},[n,e,l]);return s.useLayoutEffect(()=>{e&&n&&r()},[r,e,n,...t])})({tableContainerRef:c,scrollContainerRef:r,dependencies:i}),n)?(0,l.jsx)(a.Q,{className:o("loader")}):(0,l.jsx)("div",{ref:c,className:o("table",t),children:e})}},18016:function(e,n,t){t.d(n,{Qz:()=>j,HG:()=>x,nL:()=>v,p:()=>m});var l=t(74848),s=t(66918),r=t(25247),i=t(70583),a=t(60318),o=t(51432),c=JSON.parse('{"field_rack":"Rack","field_host":"Host","context_developer-ui":"Developer UI","field_database":"Database","field_roles":"Roles"}');let d=(0,o.g4)("ydb-node-name-tooltip",{en:c}),u=(0,r.cn)("ydb-node-endpoints-tooltip-content"),m=({data:e})=>{let n=(0,i.n)(e),t=[];return e?.Roles?.length&&t.push({name:d("field_roles"),children:e.Roles.join(", "),key:"Roles"}),e?.Tenants?.[0]&&t.push({name:d("field_database"),children:e.Tenants[0],key:"Database"}),e?.Host&&t.push({name:d("field_host"),children:e.Host,copyText:e.Host,key:"Host"}),e?.Rack&&t.push({name:d("field_rack"),children:e.Rack,key:"Rack"}),e?.Endpoints&&e.Endpoints.length&&e.Endpoints.forEach(({Name:e,Address:n})=>{e&&n&&t.push({name:e,children:n,key:e})}),n&&t.push({name:"Links",children:(0,l.jsx)(a.K,{title:d("context_developer-ui"),url:n}),key:"developerUi"}),(0,l.jsx)("div",{className:u("list-container"),children:(0,l.jsx)(s.u,{responsive:!0,children:t.map(({children:e,key:n,...t})=>(0,l.jsx)(s.u.Item,{...t,children:(0,l.jsx)("div",{className:u("definition"),children:e})},n))})})};var h=t(83758),p=t(9753);let f=(0,h.Hr)({values:{ChangeTime:e=>(0,l.jsx)(p.H,{ChangeTime:e})},labels:{TabletId:"Tablet"},defaultValueFormatter:e=>e&&String(e)}),v=({data:e={},className:n})=>{let{TabletId:t,NodeId:s,State:r,Type:i,ChangeTime:a,Generation:o}=e,c=(0,h.jl)(f,{TabletId:t,NodeId:s,State:r,Type:i,ChangeTime:a,Generation:o});return(0,l.jsx)(h.z_,{className:n,info:c,dots:!1,size:"s"})},j=(0,h.Hr)({values:{Usage:e=>e&&`${(100*Number(e)).toFixed(2)} %`},labels:{Name:"Pool"},defaultValueFormatter:e=>e&&String(e)}),x=({data:e={},className:n})=>{let t=(0,h.jl)(j,e);return(0,l.jsx)(h.z_,{className:n,info:t,dots:!1,size:"s"})}},9753:function(e,n,t){t.d(n,{H:()=>m,p:()=>u});var l=t(74848);t(96540);var s=t(66918),r=t(35537),i=t(97855),a=t(5948),o=t(51432),c=JSON.parse('{"start-time":"Start time","disconnect-time":"Disconnect time","change-time":"Change time"}');let d=(0,o.g4)("ydb-uptime-viewer",{en:c});function u({StartTime:e,DisconnectTime:n}){let t,o=null;return(n?(t=(0,i.wI)(n),o=(0,l.jsx)(s.u.Item,{name:d("disconnect-time"),children:(0,i.r6)(n,{withTimeZone:!0})},"DisconnectTime")):e&&(t=(0,i.H7)(e),o=(0,l.jsx)(s.u.Item,{name:d("start-time"),children:(0,i.r6)(e,{withTimeZone:!0})},"StartTime")),t)?(0,l.jsx)(a.s,{placement:["top","bottom"],disabled:!o,content:(0,l.jsx)(s.u,{responsive:!0,children:o}),children:t}):r.Pd}function m({ChangeTime:e}){let n;return(e&&(n=(0,i.H7)(e)),n)?(0,l.jsx)(a.s,{placement:["top","bottom"],content:(0,l.jsx)(s.u,{responsive:!0,children:(0,l.jsx)(s.u.Item,{name:d("change-time"),children:(0,i.r6)(e,{withTimeZone:!0})},"changeTime")}),children:n}):r.Pd}},36354:function(e,n,t){t.d(n,{o:()=>s});var l=t(96540);function s({value:e,onUpdate:n,debounce:t=200}){let[s,r]=l.useState(e),i=l.useRef();return l.useEffect(()=>{r(n=>n!==e?e:n)},[e]),[s,e=>{r(e),window.clearTimeout(i.current),i.current=window.setTimeout(()=>{n?.(e)},t)}]}},70583:function(e,n,t){t.d(n,{n:()=>d});var l=t(29620),s=t(71790),r=t(67222),i=t(88387),a=t(39279),o=t(88831),c=t(3715);function d(e){let n=(0,c.N)(e=>e.singleClusterMode),{balancer:t=l.Hs,settings:d}=(0,s.Zd)(),u=(0,o.X)(),m=r.J.useMetaProxy&&d?.use_meta_proxy!==!1;if(u){if(!n){let n=(0,a.D)(e?.NodeId,t,m);return n?(0,i.Un)(n):void 0}if(e?.NodeId){let n=(0,i.Kx)(e.NodeId);return(0,i.Un)(n)}}}},33702:function(e,n,t){t.d(n,{K:()=>i});var l=t(96540),s=t(75442);function r(e){if("string"==typeof e)return{id:e,selected:!0};if(e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id){let n="selected"in e&&!!e.selected;return{id:e.id,selected:n}}}let i=(e,n,t,i,a)=>{let[o,c]=(0,s.i)(n,i),d=l.useMemo(()=>(Array.isArray(o)?o:i).map(r).filter(e=>void 0!==e),[i,o]),u=l.useMemo(()=>{let n=new Set(e.map(e=>e.name)),t=[],l=new Set;return d.forEach(e=>{n.has(e.id)&&(t.push(e),l.add(e.id))}),e.forEach(e=>{l.has(e.name)||t.push({id:e.name,selected:!1})}),t},[e,d]),m=l.useMemo(()=>u.reduce((n,{id:l,selected:s})=>{let r=a?.includes(l),i=e.find(e=>e.name===l);return i&&n.push({id:l,title:t[l],selected:s||r,required:r,sticky:r?"start":void 0,column:i}),n},[]).toSorted((e,n)=>Number(!!n.required)-Number(!!e.required)),[e,t,a,u]);return{columnsToShow:l.useMemo(()=>m.filter(e=>e.selected).map(e=>e.column),[m]),columnsToSelect:m,setColumns:l.useCallback(e=>{c(e.map(({id:e,selected:n})=>({id:e,selected:n})))},[c])}}}}]);