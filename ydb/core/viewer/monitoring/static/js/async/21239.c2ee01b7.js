(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([["21239"],{60680:function(e,t,s){var i=s(13222),d=/[\\^$.*+?()[\]{}|]/g,n=RegExp(d.source);e.exports=function(e){return(e=i(e))&&n.test(e)?e.replace(d,"\\$&"):e}},98537:function(e,t,s){"use strict";s.d(t,{O:()=>ex});var i=s(74848),d=s(64482),n=s(24629),l=s(17427),a=s(96540),r=s(52605);let o=e=>a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.5 6V5a2.5 2.5 0 0 0-5 0v1zM4 5v1a3 3 0 0 0-3 3v3a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3V5a4 4 0 0 0-8 0m6.5 2.5H12A1.5 1.5 0 0 1 13.5 9v3a1.5 1.5 0 0 1-1.5 1.5H4A1.5 1.5 0 0 1 2.5 12V9A1.5 1.5 0 0 1 4 7.5zm-1.75 2a.75.75 0 0 0-1.5 0v2a.75.75 0 0 0 1.5 0z",clipRule:"evenodd"}));var c=s(3477),u=s(53681),p=s(72835),m=s(61885),I=s(77269),h=s(71721),f=s(3411),y=s(94032),x=s(80108),b=s(71112),v=s(85169),g=s(54699);let B=(0,g.om)("list-container-view"),S=a.forwardRef(function({as:e="div",role:t="listbox",children:s,id:d,className:n,fixedHeight:l,extraProps:a,qa:r,style:o},c){return(0,i.jsx)(v.s,{qa:r,as:e,direction:"column",ref:c,grow:!0,tabIndex:-1,id:d,role:t,style:o,className:B({"fixed-height":l},n),...a,children:s})}),j=e=>null!==e&&"object"==typeof e&&"data"in e,w=(0,g.om)("list-recursive-renderer");function C({id:e,itemSchema:t,list:s,...d}){let n=d.children(e,s.structure.idToFlattenIndex[e]);if(j(t)&&t.children){let l=!s.state.expandedById||!(e in s.state.expandedById)||s.state.expandedById[e];return(0,i.jsxs)("ul",{style:d.style,className:w(null,d.className),role:"group",children:[n,l&&!!s.structure.groupsState[e]?.childrenIds&&t.children.map((t,n)=>(0,i.jsx)(C,{list:s,id:s.structure.groupsState[e].childrenIds[n],itemSchema:t,...d},n))]})}return n}function k({containerRef:e,renderItem:t,list:s,...d}){return(0,i.jsx)(S,{ref:e,...d,children:s.structure.items.map((e,d)=>(0,i.jsx)(C,{itemSchema:e,id:s.structure.rootIds[d],list:s,children:t},d))})}let R=({list:e,multiple:t})=>({id:s})=>{e.state.disabledById[s]||(e.state.setActiveItemId(s),e.state.expandedById&&s in e.state.expandedById&&e.state.setExpanded?e.state.setExpanded(e=>({...e,[s]:!e[s]})):e.state.setSelected(e=>({...t?e:{},[s]:!t||!e[s]})))};var N=s(95100);let E="data-list-item",$={s:[22,44],m:[26,44],l:[34,52],xl:[44,62]};var D=s(21624),A=s(5273),M=s(92732),_=s(94866);let F=(0,g.om)("list-item-expand-icon"),L=({expanded:e,behavior:t="action",disabled:s})=>(0,i.jsx)(_.I,{direction:function({behavior:e,expanded:t}){if(t&&"action"===e)return"top";if(t&&"state"===e);else if(t&&"state-inverse"===e);else if("action"===e);else if("state"===e)return"right";else if("state-inverse"===e)return"left";return"bottom"}({behavior:t,expanded:e}),className:F(null,(0,M.$)({color:s?"hint":void 0})),size:16}),O=(0,g.om)("list-item-view"),P=e=>"object"==typeof e&&null!==e&&"title"in e,T=({children:e,indentation:t=1,className:s,...d})=>(0,i.jsx)(v.s,{width:16*t,className:O("slot",s),...d,children:e}),q=({startSlot:e,subtitle:t,endSlot:s,disabled:d,hasSelectionIcon:n,isGroup:a,indentation:r,expanded:o,selected:c,title:u,expandIconPlacement:p="start",renderExpandIcon:m=L})=>{let h=a?(0,i.jsx)(m,{behavior:"start"===p?"state":"action",expanded:o,disabled:d}):null;return(0,i.jsxs)(v.s,{alignItems:"center",justifyContent:"space-between",gap:"4",className:O("content"),children:[(0,i.jsxs)(v.s,{gap:"2",alignItems:"center",grow:!0,children:[n&&(0,i.jsx)(T,{children:c?(0,i.jsx)(l.I,{data:A.A,size:16,className:(0,M.$)({color:"info"})}):null}),r&&r>=1?(0,i.jsx)(T,{indentation:Math.floor(r)}):null,"start"===p&&h,e,(0,i.jsxs)("div",{className:O("main-content"),children:["string"==typeof u?(0,i.jsx)(I.E,{ellipsis:!0,color:d?"hint":void 0,variant:a?"subheader-1":void 0,children:u}):u,"string"==typeof t?(0,i.jsx)(I.E,{ellipsis:!0,color:d?"hint":"secondary",children:t}):t]})]}),(0,i.jsxs)(v.s,{gap:"2",children:["end"===p&&h,s]})]})},V=a.forwardRef(function({id:e,as:t,size:s="m",active:d,selected:n,disabled:l,selectionViewType:a="multiple",activeOnHover:r,className:o,height:c,dragging:u,style:p,content:m,role:I="option",onClick:h,...f},y){let x=l?void 0:h,b={minHeight:`var(--g-list-item-height, ${c??$[s][Number(!!(P(m)&&m?.subtitle))]}px)`,...p};return(0,i.jsx)(t||"li",{[E]:e,role:I,"aria-selected":n,onClick:x,className:O({active:u||d,selected:n&&"single"===a,activeOnHover:"boolean"==typeof r?r:!!x,radius:s,size:s,dragging:u,clickable:!!x},(0,D.Y)({px:2},o)),style:b,ref:y,...f,children:P(m)?(0,i.jsx)(q,{...m,hasSelectionIcon:"multiple"===a,selected:n,disabled:l}):m})}),z=(0,g.om)("tree-list"),U=({qa:e,id:t,size:s="m",className:d,list:n,multiple:l,containerRef:r,renderItem:o,renderContainer:c=k,onItemClick:p,mapItemDataToContentProps:m})=>{let I=(0,u.u)(),h=a.useRef(null),f=r??h,y=a.useMemo(()=>{if(null!==p)return(e,t)=>{let s={id:e.id,list:n};p?p?.(s,t):R({list:n,multiple:l})(s,t)}},[p,n,l]);return(({containerRef:e,onItemClick:t,enabled:s,list:i})=>{let d=a.useCallback((t,s=!0)=>{"number"==typeof t&&i.structure.visibleFlattenIds[t]&&(s&&((e,t)=>{if(document){let s=(t||document).querySelector(`[${E}="${e}"]`);s&&s.scrollIntoView?.({block:"nearest"})}})(i.structure.visibleFlattenIds[t],e?.current),i.state.setActiveItemId?.(i.structure.visibleFlattenIds[t]))},[i.structure.visibleFlattenIds,i.state,e]),n=a.useCallback((e,t,s=0)=>{e.preventDefault();let n="string"==typeof i.state.activeItemId?i.structure.visibleFlattenIds.findIndex(e=>e===i.state.activeItemId):-1;d((({list:e,index:t,step:s,disabledItemsById:i={}})=>{let d=e.length,n=(t+d)%d;for(let t=0;t<d;t+=1){let t=e[n];if(t&&!i[t])return n;n=(n+d+s)%d}})({list:i.structure.visibleFlattenIds,index:(n>-1?n:s)+t,step:Math.sign(t),disabledItemsById:i.state.disabledById}))},[d,i.state.activeItemId,i.state.disabledById,i.structure.visibleFlattenIds]);a.useLayoutEffect(()=>{let d=e?.current;if(s||!d)return;let l=e=>{switch(e.key){case N.D.ARROW_DOWN:n(e,1,-1);break;case N.D.ARROW_UP:n(e,-1);break;case N.D.SPACEBAR:case N.D.ENTER:i.state.activeItemId&&!i.state.disabledById[i.state.activeItemId]&&(e.preventDefault(),t?.({id:i.state.activeItemId}))}};return d.addEventListener("keydown",l),()=>{d.removeEventListener("keydown",l)}},[e,s,n,i.state.activeItemId,i.state.disabledById,t])})({containerRef:f,onItemClick:y,list:n}),c({qa:e,id:`list-${t??I}`,size:s,containerRef:f,className:z(null,d),list:n,renderItem:(t,d,a)=>{let r=(({qa:e,list:t,onItemClick:s,mapItemDataToContentProps:i,size:d="m",multiple:n=!1,id:l})=>{let a={...t.structure.itemsState[l],...t.structure.groupsState[l],isLastItem:l===t.structure.visibleFlattenIds[t.structure.visibleFlattenIds.length-1]},r={id:l,size:d,selected:!!t.state.selectedById[l],disabled:!!t.state.disabledById?.[l],active:l===t.state.activeItemId,onClick:s?e=>s({id:l},e):void 0,selectionViewType:n&&!a.childrenIds?"multiple":"single",content:{expanded:t.state.expandedById?.[l],indentation:a.indentation,isGroup:t.state.expandedById&&l in t.state.expandedById,...i(t.structure.itemsById[l])}};return e&&(r.qa=`${e}-${l}`),{data:t.structure.itemsById[l],props:r,context:a}})({qa:e,id:t,size:s,multiple:l,mapItemDataToContentProps:m,onItemClick:y,list:n});return o?o({id:t,data:r.data,props:r.props,context:r.context,index:d,renderContainerProps:a,list:n}):(0,i.jsx)(V,{...r.props,...a})}})};var W=s(9017),H=s(95084),J=s(83452);let Y=({item:e,groupedId:t,getItemId:s})=>{let i=t;return"function"==typeof s?i=s(j(e)?e.data:e):e&&"object"==typeof e&&"id"in e&&e.id&&(i=e.id),i},G=(e,t)=>t?`${t}-${e}`:`${e}`,K=(0,g.om)("tree-select"),Q=e=>(0,i.jsx)(V,{...e.props,...e.renderContainerProps}),X=a.forwardRef(function({id:e,qa:t,title:s,placement:d,slotBeforeListBody:n,slotAfterListBody:l,size:r="m",defaultOpen:o,width:c,containerRef:p,className:m,containerClassName:I,popupClassName:v,open:g,multiple:B,popupWidth:S,popupDisablePortal:w,items:C,value:k,defaultValue:N,placeholder:E,disabled:$=!1,withExpandedState:D=!0,defaultExpandedState:A="expanded",hasClear:M,errorMessage:_,errorPlacement:F,validationState:L,onClose:O,onOpenChange:P,onUpdate:T,renderControl:q,renderItem:V=Q,renderContainer:z,mapItemDataToContentProps:X,onFocus:Z,onBlur:ee,getItemId:et,onItemClick:es},ei){let ed=(0,J.I)(),en=(0,u.u)(),el=e??en,ea=`tree-select-popup-${el}`,er=a.useRef(null),eo=a.useRef(null),ec=a.useRef(null),eu=p??ec,{errorMessage:ep,errorPlacement:em,validationState:eI}=(0,H.Av)({errorMessage:_,errorPlacement:F||"outside",validationState:L}),eh=(0,u.u)(),ef="invalid"===eI,ey=ef&&!!ep&&"outside"===em,ex=ef&&!!ep&&"inside"===em,eb=(0,h.N)(ei,eo),{toggleOpen:ev,open:eg}=(0,y.F)({defaultOpen:o,onClose:O,onOpenChange:P,open:g}),{value:eB,selectedById:eS,setSelected:ej}=(({defaultValue:e=[],value:t,onUpdate:s})=>{let[i,d]=a.useState(e),n=t??i,l=!t;return a.useMemo(()=>{let e=n.reduce((e,t)=>(e[t]=!0,e),{});return{value:n,selectedById:e,setSelected:t=>{let i=Object.entries("function"==typeof t?t(e):t).reduce((e,[t,s])=>(s&&e.push(t),e),[]);l?d(i):s?.(i)},setInnerValue:l?d:void 0}},[s,l,n])})({value:k,defaultValue:N,onUpdate:T}),ew=(({items:e,getItemId:t,defaultExpandedState:s="expanded",withExpandedState:i=!0,initialState:d,controlledState:n})=>{let{itemsById:l,groupsState:r,itemsState:o,initialState:c}=function({items:e,getItemId:t,defaultExpandedState:s}){let i=a.useRef(t).current;return a.useMemo(()=>(function({items:e,defaultExpandedState:t="expanded",getItemId:s}){let i={itemsById:{},groupsState:{},itemsState:{},initialState:{disabledById:{},selectedById:{},expandedById:{}}},d=({item:e,index:n,parentGroupedId:l,parentId:a})=>{let r=G(n,l),o=Y({groupedId:r,item:e,getItemId:s});a&&i.groupsState[a].childrenIds.push(o),i.itemsById[o]=e.data,i.itemsState[o]||(i.itemsState[o]={indentation:0}),void 0!==a&&(i.itemsState[o].parentId=a),void 0!==e.selected&&(i.initialState.selectedById[o]=e.selected),void 0!==e.disabled&&(i.initialState.disabledById[o]=e.disabled),r&&(i.itemsState[o].indentation=r.split("-").length-1),e.children&&(i.groupsState[o]={childrenIds:[]},i.initialState.expandedById&&(void 0===e.expanded?i.initialState.expandedById[o]="expanded"===t:i.initialState.expandedById[o]=e.expanded),e.children.forEach((e,t)=>{d({item:e,index:t,parentGroupedId:r,parentId:o})}))};return e.forEach((e,t)=>j(e)?d({item:e,index:t}):(({item:e,index:t})=>{let d=Y({groupedId:String(t),item:e,getItemId:s});i.itemsById[d]=e,i.itemsState[d]||(i.itemsState[d]={indentation:0}),e&&"object"==typeof e&&("selected"in e&&"boolean"==typeof e.selected&&(i.initialState.selectedById[d]=e.selected),"disabled"in e&&"boolean"==typeof e.disabled&&(i.initialState.disabledById[d]=e.disabled))})({item:e,index:t})),i})({items:e,getItemId:i,defaultExpandedState:s}),[i,s,e])}({items:e,getItemId:t,defaultExpandedState:s}),u=(({initialState:e,withExpandedState:t})=>{let s=a.useRef(e),i=s.current!==e;s.current=e;let[d,n]=a.useState(()=>e?.disabledById??{}),[l,r]=a.useState(()=>e?.selectedById??{}),[o,c]=a.useState(()=>e?.expandedById??{}),[u,p]=a.useState(()=>e?.activeItemId);i&&(e?.disabledById&&n(t=>({...e.disabledById,...t})),e?.selectedById&&r(t=>({...e.selectedById,...t})),e?.expandedById&&c(t=>({...e.expandedById,...t})),p(t=>t??e?.activeItemId));let m={disabledById:d,selectedById:l,activeItemId:u,setDisabled:n,setSelected:r,setActiveItemId:p};return t&&(m.expandedById=o,m.setExpanded=c),m})({initialState:a.useMemo(()=>({expandedById:{...c.expandedById,...d?.expandedById},selectedById:{...c.selectedById,...d?.selectedById},disabledById:{...c.disabledById,...d?.disabledById},activeItemId:d?.activeItemId}),[c.disabledById,c.expandedById,c.selectedById,d?.activeItemId,d?.disabledById,d?.expandedById,d?.selectedById]),withExpandedState:i}),p=a.useMemo(()=>n?{...u,...n}:u,[n,u]),{visibleFlattenIds:m,idToFlattenIndex:I,rootIds:h}=function({items:e,expandedById:t,getItemId:s}){return a.useMemo(()=>(function({items:e,getItemId:t,expandedById:s={}}){let i=[],d=(e,n,l,a)=>{let r=Y({groupedId:G(l,a),item:n,getItemId:t});return a||i.push(r),e.push(r),j(n)&&n.children&&!(r in s&&!s[r])&&e.push(...n.children.reduce((e,t,s)=>d(e,t,s,r),[])),e},n=e.reduce((e,t,s)=>d(e,t,s),[]),l={};for(let[e,t]of n.entries())l[t]=e;return{rootIds:i,visibleFlattenIds:n,idToFlattenIndex:l}})({items:e,expandedById:t,getItemId:s}),[e,t,s])}({items:e,expandedById:p.expandedById,getItemId:t});return{state:p,structure:{rootIds:h,items:e,visibleFlattenIds:m,idToFlattenIndex:I,itemsById:l,groupsState:r,itemsState:o}}})({controlledState:{selectedById:eS,setSelected:ej},items:C,getItemId:et,defaultExpandedState:A,withExpandedState:D}),eC=a.useMemo(()=>{if(null!==es)return(e,t)=>{let s={id:e.id,list:ew};if(es)es?.(s,t);else{R({list:ew,multiple:B})(s,t);let i=ew.state.expandedById&&e.id in ew.state.expandedById;B||i||ev(!1)}}},[es,ew,B,ev]);a.useLayoutEffect(()=>(eg&&eu.current?.focus({preventScroll:!0}),()=>ew.state.setActiveItemId(void 0)),[eg]);let ek=a.useCallback(()=>ev(!1),[ev]),{focusWithinProps:eR}=(0,f.R)({onFocusWithin:Z,onBlurWithin:a.useCallback(e=>{ee?.(e),ek()},[ek,ee])}),eN={list:ew,open:eg,placeholder:E,toggleOpen:ev,clearValue:()=>ew.state.setSelected({}),ref:eb,size:r,value:eB,disabled:$,id:el,activeItemId:ew.state.activeItemId,title:s,errorMessage:ex?ep:void 0,errorPlacement:em,validationState:eI,hasClear:M,isErrorVisible:ef},eE=q?q(eN):(0,i.jsx)(x.Y,{...eN,selectedOptionsContent:a.Children.toArray(eB.map(e=>e in ew.structure.itemsById?X(ew.structure.itemsById[e]).title:"")).join(", "),view:"normal",pin:"round-round",popupId:ea,selectId:el}),e$={..."max"===c&&{width:c}},eD={};return"number"==typeof c&&(eD.width=c),(0,i.jsxs)("div",{ref:er,...eR,className:K(e$,m),style:eD,children:[eE,(0,i.jsxs)(b.t,{ref:er,className:K("popup",{size:r},v),controlRef:eo,width:S,placement:d,open:eg,handleClose:ek,disablePortal:w,mobile:ed,id:ea,children:[n,(0,i.jsx)(U,{list:ew,size:r,className:K("list",I),qa:t,multiple:B,id:`list-${el}`,containerRef:eu,onItemClick:eC,renderContainer:z,mapItemDataToContentProps:X,renderItem:V??Q}),l]}),(0,i.jsx)(W.o,{errorMessage:ey?ep:null,errorMessageId:eh})]})});var Z=s(33777),ee=s(38221);function et(e,t){return!t||"object"!=typeof t||!("title"in t)||"string"!=typeof t.title||t.title.toLowerCase().includes((e||"").toLowerCase())}var es=s(13786),ei=JSON.parse('{"button_apply":"Apply","button_reset":"Reset","button_switcher":"Columns"}'),ed=JSON.parse('{"button_apply":"Применить","button_reset":"Сбросить","button_switcher":"Колонки"}');let en=(0,es.N)({en:ei,ru:ed},"TableColumnSetupInner"),el=(0,g.om)("inner-table-column-setup"),ea=el("controls"),er=el("filter-input"),eo=el("empty-placeholder"),ec={isDragDisabled:!0},eu=e=>({title:e.title}),ep=(e,t)=>"string"!=typeof t.title||t.title.toLowerCase().includes(e.trim().toLowerCase()),em=e=>{let{renderSwitcher:t,popupWidth:s,popupPlacement:h,items:f,onUpdate:y,sortable:x,renderControls:b,className:g,defaultItems:B=f,showResetButton:w,filterable:C,filterPlaceholder:k,filterEmptyMessage:R,filterSettings:N=ep,hideApplyButton:E}=e,[$,D]=a.useState(!1),[A,M]=a.useState(x),[_,F]=a.useState(x);x!==_&&(F(x),M(x));let[L,O]=(0,p.P)(E?f:void 0,f,E?y:void 0),[P,T]=a.useState(f);f!==P&&(T(f),E||O(f));let{t:q}=en.useTranslation(),z=function({items:e,initialFilterValue:t="",filterItem:s,onFilterChange:i,filterItems:d,debounceTimeout:n=300}){let l=a.useRef(null),[r,o]=a.useState(t),[c,u]=a.useState(e),[p,m]=a.useState(e),I=a.useCallback((e,t)=>{if(d)return()=>d(e,t);if(e){let i=s||et;return()=>{var s;let d;return s=t=>i(e,t),d=(e,t)=>{if(j(t)&&t.children){let i=t.children.reduce(d,[]);i.length?e.push({...t,data:t.data,children:i}):s(t.data)&&e.push({...t,data:t.data,children:[]})}else if(j(t)&&s(t.data)){let{children:s,...i}=t;e.push(i)}else!j(t)&&s(t)&&e.push(t);return e},t.reduce(d,[])}}return()=>t},[s,d]);e!==c&&(m(I(r,e)),u(e));let h=a.useCallback(ee(t=>m(I(t,e)),n),[m,I,e,n]),{onFilterUpdate:f,reset:y}=a.useMemo(()=>({reset:()=>{o(t),i?.(t),h(t)},onFilterUpdate:e=>{o(e),i?.(e),h(e)}}),[h,t,i]);return{filterRef:l,filter:r,reset:y,items:p,onFilterUpdate:f}}({items:L,filterItem:N,debounceTimeout:0}),U=()=>{y(L.map(({id:e,isSelected:t})=>({id:e,isSelected:t}))),G(!1)},W=()=>(0,i.jsx)(n.$,{view:"action",width:"max",onClick:U,children:q("button_apply")}),H="function"==typeof w?w(L):w,J=(({onDragEnd:e,renderControls:t})=>{let s=(0,u.u)();return({renderItem:d,list:n,containerRef:l,id:r,className:o})=>{let{stickyStartItemIdList:u,sortableItemIdList:p,stickyEndItemIdList:m}=((e,t)=>{let s=0;for(;s!==t.length;s++){let i=e[t[s]];if(i?.sticky!=="left"&&i?.sticky!=="start")break}let i=t.length;for(;0!==i;i--){let s=e[t[i-1]];if(s?.sticky!=="right"&&s?.sticky!=="end")break}return{stickyStartItemIdList:t.slice(0,s),sortableItemIdList:t.slice(s,i),stickyEndItemIdList:t.slice(i)}})(n.structure.itemsById,n.structure.visibleFlattenIds),I=u.map((e,t)=>d(e,t,ec)),h=p.map((e,t)=>d(e,t+u.length)),f=m.map((e,t)=>d(e,I.length+h.length+t,ec));return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsxs)(S,{ref:l,id:r,className:o,children:[I,(0,i.jsx)(c.JY,{onDragEnd:e,children:(0,i.jsx)(c.gL,{droppableId:s,renderClone:(e,t,s)=>d(n.structure.visibleFlattenIds[s.source.index],s.source.index,{provided:e,snapshot:t}),children:e=>(0,i.jsxs)("div",{...e.droppableProps,ref:e.innerRef,children:[h,e.placeholder]})})}),f]}),(0,i.jsx)("div",{className:ea,children:t()})]})}})({onDragEnd:({destination:e,source:t})=>{e?.index!==void 0&&e?.index!==t.index&&O(((e,t,s)=>{let i=[...e],[d]=i.splice(t,1);return i.splice(s,0,d),i})(L,t.index,e.index))},renderControls:()=>b?b({DefaultApplyButton:W,onApply:U}):(0,i.jsxs)(v.s,{gapRow:1,direction:"column",className:ea,children:[H&&(0,i.jsx)(n.$,{onClick:()=>{E&&y(B),O(B)},width:"max",children:q("button_reset")}),!E&&(0,i.jsx)(W,{})]})}),Y=({data:e,props:t,index:s,renderContainerProps:d})=>{let n=!1===A||d?.isDragDisabled===!0,u=n?void 0:(0,i.jsx)(l.I,{data:r.A,size:16}),p=e.isRequired?(0,i.jsx)(l.I,{data:o}):void 0,m=!e.isRequired&&t.selected,I={...t,selected:m,selectionViewType:e.isRequired?"single":"multiple",content:{...t.content,startSlot:p,endSlot:u}};if(n)return(0,a.createElement)(V,{...I,key:I.id});let h=(e,t)=>(0,i.jsx)(V,{...I,...e.draggableProps,...e.dragHandleProps,ref:e.innerRef,dragging:t.isDragging});return d?.provided&&d.snapshot?h(d.provided,d.snapshot):(0,i.jsx)(c.sx,{draggableId:t.id,index:s,isDragDisabled:n,children:h},`item-key-${t.id}`)},G=e=>{D(e),!1===e&&(O(f),M(x),z.reset())},K=a.useMemo(()=>{let e;return e=[],L.forEach(({id:t,isSelected:s})=>{s&&e.push(t)}),e},[L]),Q=()=>(0,i.jsx)(I.E,{className:eo,children:R}),es=C?(0,i.jsx)(Z.k,{size:"m",view:"clear",placeholder:k,value:z.filter,className:er,onUpdate:e=>{z.onFilterUpdate(e),M(!e.length)},hasClear:!0}):null,ei=z.filter&&!z.items.length?Q:J;return(0,i.jsx)(X,{className:el(null,g),mapItemDataToContentProps:eu,multiple:!0,size:"l",open:$,value:K,items:z.filter?z.items:L,onUpdate:e=>{O(L.map(t=>({...t,isSelected:t.isRequired||e.includes(t.id)})))},popupWidth:s,onOpenChange:G,placement:h,slotBeforeListBody:es,renderContainer:ei,renderControl:({toggleOpen:e})=>{let s=(0,m.h)(e);return t?.({onClick:e,onKeyDown:s})||(0,i.jsxs)(n.$,{onClick:e,onKeyDown:s,children:[(0,i.jsx)(l.I,{data:d.A}),q("button_switcher")]})},renderItem:Y})};var eI=JSON.parse('{"button_switcher":"Columns"}'),eh=JSON.parse('{"button_switcher":"Колонки"}');let ef=(0,es.N)({en:eI,ru:eh},"TableColumnSetup"),ey=(0,g.om)("table-column-setup"),ex=e=>{let{switcher:t,renderSwitcher:s,disabled:a,popupWidth:r,popupPlacement:o,className:c,items:u,sortable:p=!0,showStatus:m,onUpdate:I,hideApplyButton:h}=e,{t:f}=ef.useTranslation(),y=u.map(({id:e,title:t,required:s,selected:i,sticky:d})=>({id:e,title:t,isRequired:s,isSelected:i,sticky:d}));return(0,i.jsx)(em,{hideApplyButton:h,items:y,onUpdate:e=>{I(e.map(({id:e,isSelected:t})=>{let s=u.find(t=>t.id===e);return{id:e,selected:t,title:s?.title,required:s?.required}}))},popupPlacement:o,popupWidth:r,renderSwitcher:e=>s?.(e)||t||(0,i.jsxs)(n.$,{disabled:a,onClick:e.onClick,children:[(0,i.jsx)(l.I,{data:d.A}),f("button_switcher"),(()=>{if(!m)return null;let e=u.reduce((e,t)=>t.selected?e+1:e,0),t=u.length,s=`${e}/${t}`;return(0,i.jsx)("span",{className:ey("status"),children:s})})()]}),sortable:p,className:ey(null,c)})}}}]);