"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([["81513"],{23273:function(e,t,s){s.d(t,{E:()=>p});var r=s(74848),n=s(32065),l=s(24629),a=s(43834),o=s(56496),i=s(25247),c=s(81882),u=s(51432),d=JSON.parse('{"None":"None","15 sec":"15 sec","1 min":"1 min","2 min":"2 min","5 min":"5 min","Refresh":"Refresh"}');let m=(0,u.g4)("ydb-diagnostics-autorefresh-control",{en:d}),h=(0,i.cn)("auto-refresh-control");function p({className:e,onManualRefresh:t}){let s=(0,c.YQ)(),[i,u]=(0,c.Nt)();return(0,r.jsxs)("div",{className:h(null,e),children:[(0,r.jsx)(l.$,{view:"flat-secondary",onClick:()=>{s(o.F.util.invalidateTags(["All"])),t?.()},"aria-label":m("Refresh"),children:(0,r.jsx)(l.$.Icon,{children:(0,r.jsx)(n.A,{})})}),(0,r.jsxs)(a.l,{value:[String(i)],onUpdate:e=>{u(Number(e))},width:85,qa:"ydb-autorefresh-select",children:[(0,r.jsx)(a.l.Option,{value:"0",children:m("None")}),(0,r.jsx)(a.l.Option,{value:"15000",children:m("15 sec")}),(0,r.jsx)(a.l.Option,{value:"60000",children:m("1 min")}),(0,r.jsx)(a.l.Option,{value:"120000",children:m("2 min")}),(0,r.jsx)(a.l.Option,{value:"300000",children:m("5 min")})]})]})}},60117:function(e,t,s){s.d(t,{c:()=>y});var r=s(74848);s(96540);var n=s(6876),l=s(5434),a=s(85169),o=s(46086),i=s(40897),c=s(25247),u=s(52198),d=s(52457),m=s(75561),h=s(83544),p=s(33269),v=s(17427);let x={[i.m.Blue]:u.A,[i.m.Yellow]:d.A,[i.m.Orange]:m.A,[i.m.Red]:d.A,[i.m.Green]:h.A,[i.m.Grey]:p.A};function f({status:e,...t}){return e?(0,r.jsx)(v.I,{...t,data:x[e]}):null}var g=s(26268),j=s(53788);let N=(0,c.cn)("ydb-entity-status-new"),b={[i.m.Red]:"danger",[i.m.Blue]:"info",[i.m.Green]:"success",[i.m.Grey]:"unknown",[i.m.Orange]:"orange",[i.m.Yellow]:"warning"},w={get[i.m.Red](){return(0,g.A)("title_red")},get[i.m.Yellow](){return(0,g.A)("title_yellow")},get[i.m.Orange](){return(0,g.A)("title_orange")},get[i.m.Green](){return(0,g.A)("title_green")},get[i.m.Grey](){return(0,g.A)("title_grey")},get[i.m.Blue](){return(0,g.A)("title_blue")}};function y({className:e,children:t}){return(0,r.jsx)(a.s,{gap:"2",wrap:"nowrap",alignItems:"center",className:N(null,e),children:t})}y.Label=function({children:e,status:t,withStatusName:s=!0,note:i,size:c="m",iconSize:u=14}){let d=b[t];return(0,r.jsx)(n.m,{title:j.D[t],disabled:!!i,children:(0,r.jsx)(l.J,{theme:"orange"===d?void 0:d,icon:(0,r.jsx)(f,{size:u,status:t}),size:c,className:N({orange:"orange"===d}),children:(0,r.jsxs)(a.s,{gap:"2",wrap:"nowrap",children:[e,s?w[t]:null,i&&(0,r.jsx)(o.H,{className:N("note"),children:i})]})})})},y.displayName="EntityStatus"},26268:function(e,t,s){s.d(t,{A:()=>l});var r=s(51432),n=JSON.parse('{"title_red":"Critical","title_blue":"Normal","title_green":"Good","title_grey":"Unknown","title_orange":"Caution","title_yellow":"Warning","context_red":"Some systems are failed and not available","context_yellow":"There are minor issues","context_orange":"Critical state, requires immediate attention","context_green":"Everything is working as expected","context_grey":"The condition cannot be determined","context_blue":"All good, some parts of the system are restoring"}');let l=(0,r.g4)("ydb-entity-status",{en:n})},53788:function(e,t,s){s.d(t,{D:()=>l});var r=s(40897),n=s(26268);let l={get[r.m.Red](){return(0,n.A)("context_red")},get[r.m.Yellow](){return(0,n.A)("context_yellow")},get[r.m.Orange](){return(0,n.A)("context_orange")},get[r.m.Green](){return(0,n.A)("context_green")},get[r.m.Grey](){return(0,n.A)("context_grey")},get[r.m.Blue](){return(0,n.A)("context_blue")}}},12543:function(e,t,s){s.d(t,{a:()=>r.a});var r=s(17549)},29472:function(e,t,s){s.d(t,{v:()=>c});var r=s(74848);s(96540);var n=s(25247),l=s(33777),a=s(36354);let o=({onUpdate:e,value:t="",debounce:s=200,...n})=>{let[o,i]=(0,a.o)({value:t,onUpdate:e,debounce:s});return(0,r.jsx)(l.k,{value:o,onUpdate:i,...n})},i=(0,n.cn)("ydb-search"),c=({onChange:e,value:t="",width:s,className:n,debounce:l,inputRef:a,...c})=>(0,r.jsx)(o,{debounce:l,hasClear:!0,autoFocus:!0,controlRef:a,style:{width:s},className:i(null,n),value:t,onUpdate:e,...c})},4320:function(e,t,s){s.d(t,{v:()=>r.v});var r=s(29472)},31596:function(e,t,s){s.d(t,{O:()=>c});var r=s(74848),n=s(64482),l=s(77269),a=s(24629),o=s(17427),i=s(98537);function c(e){let{items:t,showStatus:s,disabled:c}=e;return(0,r.jsx)(i.O,{...e,renderSwitcher:e=>(0,r.jsxs)(a.$,{disabled:c,onClick:e.onClick,children:[(0,r.jsx)(o.I,{data:n.A}),(()=>{if(!s)return null;let e=t.reduce((e,t)=>t.selected?e+1:e,0),n=t.length;return(0,r.jsxs)(l.E,{color:"secondary",children:[e,"/",n]})})()]}),hideApplyButton:!0})}},41982:function(e,t,s){s.d(t,{p:()=>p});var r=s(74848),n=s(96540),l=s(24629),a=s(85169),o=s(78419),i=s(2543),c=s(25247),u=s(51432),d=JSON.parse('{"action_show_more":"Show {{count}} more","action_hide":"Hide {{count}}","tooltip_nodes":{"one":"{{count}} Node","other":"{{count}} Nodes"}}');let m=(0,u.g4)("ydb-versions-bar",{en:d}),h=(0,c.cn)("ydb-versions-bar");function p({preparedVersions:e,withTitles:t=!0,size:s="s"}){let c=e.length>4&&"s"===s,[u,d]=n.useState(),[p,x]=n.useState(!1),f=n.useMemo(()=>{let t=e.reduce((e,t)=>e+(t.count||0),0);return e.map(e=>({value:(e.count||0)/t*100,color:e.color,version:e.version,count:e.count}))},[e]),g=n.useMemo(()=>p?e:c?e.slice(0,3):e,[p,e,c]),j=e=>{e.preventDefault(),e.stopPropagation(),x(!0)},N=e=>{e.preventDefault(),e.stopPropagation(),x(!1)},b=n.useMemo(()=>(0,i.debounce)(e=>{d(e)},200),[]),w=n.useMemo(()=>(b.cancel(),(0,i.debounce)(()=>{d(void 0)},200)),[b]),y=e=>!!(u&&u!==e);return(0,r.jsxs)(a.s,{direction:"column",className:h("bar-wrapper",{size:s}),wrap:!0,children:[(0,r.jsx)(a.s,{className:h("bar",{size:s}),grow:1,children:f.map(e=>(0,r.jsx)(o.m,{content:(0,r.jsxs)(n.Fragment,{children:[m("tooltip_nodes",{count:e.count}),(0,r.jsx)("br",{}),e.version]}),placement:"m"===s?"auto":"top-start",openDelay:200,children:(0,r.jsx)("span",{onMouseEnter:()=>{b(e.version)},onMouseLeave:w,className:h("version",{dimmed:y(e.version),size:s}),style:{backgroundColor:e.color,width:`${e.value}%`}})},e.version))}),t&&(0,r.jsxs)(a.s,{className:h("titles-wrapper",{size:s}),children:[g.map(e=>(0,r.jsx)(v,{version:e.version,color:e.color||"",count:e.count,isDimmed:y(e.version),onMouseEnter:()=>{b(e.version)},onMouseLeave:w,size:s},e.version)),(()=>{if(!c)return null;let t=e.length-3;return p?(0,r.jsx)(l.$,{view:"flat-secondary",size:"s",onClick:N,className:h("button"),children:m("action_hide",{count:t})}):(0,r.jsx)(l.$,{view:"flat-secondary",size:"s",onClick:j,className:h("button"),children:m("action_show_more",{count:t})})})()]})]})}function v({version:e,color:t,count:s,isDimmed:n,onMouseEnter:l,onMouseLeave:i,size:c}){return(0,r.jsx)(o.m,{content:m("tooltip_nodes",{count:s}),placement:"bottom-end",openDelay:200,children:(0,r.jsxs)(a.s,{alignItems:"center",className:h("title",{size:c}),children:[(0,r.jsx)(x,{size:c,dimmed:n,color:t}),(0,r.jsx)("div",{className:h("title-text",{dimmed:n,size:c}),onMouseEnter:l,onMouseLeave:i,children:e})]})})}function x({size:e,dimmed:t,color:s}){let n="m"===e?8:6,l=n/2;return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:`0 0 ${n} ${n}`,fill:"none",className:h("version-icon",{dimmed:t}),children:(0,r.jsx)("circle",{cx:l,cy:l,r:l,fill:s})})}},88560:function(e,t,s){s.r(t),s.d(t,{Clusters:()=>ef});var r=s(74848),n=s(96540);let l=e=>n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.5 7a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0m-.82 4.74a6 6 0 1 1 1.06-1.06l2.79 2.79a.75.75 0 1 1-1.06 1.06z",clipRule:"evenodd"}));var a=s(29581),o=s(85169),i=s(77269),c=s(17427),u=s(43834),d=s(85902),m=s(23273),h=s(30919),p=s(67103),v=s(12543),x=s(74010),f=s(4320),g=s(31596),j=s(1459),N=s(8466),b=s(60680),w=s.n(b);let y=e=>e.clusters.clusterName,_=e=>e.clusters.status,C=e=>e.clusters.service,A=e=>e.clusters.version;var S=s(39471),E=s(67222),D=s(35537),O=s(81882),k=s(33702),M=s(69045),z=s(94307),G=s(39688),T=s(68910),I=s(97547),R=s(66111),$=s(56824),L=s(5434),B=s(47037),J=s(60117),V=s(41982),U=s(40897),W=s(97855),F=s(35157),P=s(54549);let q="title",H="versions",Y="service",Z="status",K="nodes",Q="load",X="storage",ee="hosts",et="tenants",es="description",er=[q,H,Y,Z,K,Q,X,ee,et],en={[q]:"Cluster",[H]:"Versions",dc:"DC",[Y]:"Service",[Z]:"Status",[K]:"Nodes",[Q]:"Load",[X]:"Storage",[ee]:"Hosts",[et]:"Databases",[es]:"Description"};var el=s(51432),ea=JSON.parse('{"controls_status-select-label":"Status:","controls_service-select-label":"Service:","controls_version-select-label":"Version:","controls_search-placeholder":"Cluster name, version, host...","controls_select-placeholder":"All","statistics_clusters":"Clusters","statistics_hosts":"Hosts","statistics_tenants":"Tenants","statistics_nodes":"Nodes","statistics_load":"Load","statistics_storage":"Storage","tooltip_no-cluster-data":"No cluster data","clusters-count":{"one":"{{count}} cluster","other":"{{count}} clusters"},"entities-count":"{{value}} of {{capacity}}","page_title":"Clusters","edit-cluster":"Edit Cluster","remove-cluster":"Remove Cluster"}');let eo=(0,el.g4)("ydb-clusters-page",{en:ea}),ei=(0,s(25247).cn)("clusters");var ec=s(8946),eu=s(88387);function ed(e,t){let{use_embedded_ui:s,preparedBackend:r,name:n,clusterDomain:l,settings:a,clusterExternalName:o}=e;return s&&r?(0,eu.t1)(r):(0,ec.a)({activeTab:t,environment:l?void 0:a?.auth_service},{backend:l?void 0:r,clusterName:l&&o?o:n},{withBasename:!0},l)}let em=(0,r.jsx)("span",{className:ei("empty-cell"),children:D.Pd});function eh({row:e}){let t=ed(e);return(0,r.jsx)("div",{className:ei("cluster-name"),children:(0,r.jsx)($.N,{href:t,children:e.title||e.name})})}let ep=[{name:H,header:en[H],width:400,defaultOrder:a.Ay.DESCENDING,sortAccessor:({preparedVersions:e})=>e.map(e=>e.version.replace(/^[0-9]\+\./g,"")).sort((e,t)=>e.localeCompare(t))[0]||void 0,render:({row:e})=>{let{versions:t=[]}=e;return!t.length||t.some(e=>!e.version)?em:(0,r.jsx)(ev,{row:e})}},{name:Z,header:en[Z],width:180,sortable:!0,render:({row:e})=>(0,r.jsx)(L.J,{children:e.status})},{name:Y,header:en[Y],width:100,sortable:!0},{name:"dc",header:en.dc,width:120,sortable:!1,render:({row:e})=>{let t=e.cluster&&e.cluster.DataCenters||[];return(0,r.jsx)("div",{className:ei("cluster-dc"),children:t.filter(Boolean).join(", ")||em})}},{name:K,header:en[K],width:170,resizeMinWidth:170,defaultOrder:a.Ay.DESCENDING,sortAccessor:({cluster:e={}})=>{let{NodesTotal:t=0}=e;return t},render:({row:e})=>{let{NodesAlive:t=0,NodesTotal:s=0,Overall:n}=e.cluster||{};return n?(0,r.jsx)(ex,{value:t,capacity:s,description:eo("entities-count",{value:(0,W.ZV)(t),capacity:(0,W.ZV)(s)})}):em}},{name:Q,header:en[Q],width:170,resizeMinWidth:170,defaultOrder:a.Ay.DESCENDING,sortAccessor:({cluster:e})=>e?.NumberOfCpus||0,render:({row:e})=>{let{LoadAverage:t=0,NumberOfCpus:s=0,RealNumberOfCpus:n,Overall:l}=e.cluster||{};return l?(0,r.jsx)(ex,{value:t,capacity:n??s,description:eo("entities-count",{value:(0,W.ZV)(Math.round(t)),capacity:(0,W.ZV)(n??s)})}):em}},{name:X,header:en[X],width:170,resizeMinWidth:170,defaultOrder:a.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(e?.StorageTotal)||0,render:({row:e})=>{let{StorageUsed:t=0,StorageTotal:s=0,Overall:n}=e.cluster||{};if(!n)return em;let[l,a]=(0,W.ki)(Number(t),Number(s));return(0,r.jsx)(ex,{value:Number(t),capacity:Number(s),description:eo("entities-count",{value:l,capacity:a})})}},{name:ee,header:en[ee],width:80,defaultOrder:a.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(e?.Hosts)||0,render:({row:e})=>Number(e.cluster?.Hosts)||em},{name:et,header:en[et],width:80,defaultOrder:a.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(e?.Tenants)||0,render:({row:e})=>Number(e.cluster?.Tenants)||em},{name:es,header:en[es],sortable:!1,width:200,render:({row:e})=>e.description?(0,r.jsx)("div",{className:ei("description"),children:e.description}):em}];function ev({row:e}){let{preparedVersions:t}=e;if(!t.length)return null;let s=ed(e,P.Bi.versions);return(0,r.jsx)($.N,{className:ei("cluster-versions"),href:s,children:(0,r.jsx)(V.p,{preparedVersions:t})})}function ex({value:e,capacity:t,description:s}){return(0,r.jsxs)(o.s,{direction:"column",gap:2,children:[(0,r.jsx)("div",{children:(0,r.jsx)(B.k,{theme:"success",size:"s",value:t?e/t*100:0,className:ei("progress")})}),s]})}function ef(){let[e]=(0,O.Nt)(),t=N.ub.useGetClustersListQuery(void 0,{pollingInterval:e}),s=(0,O.YQ)();n.useEffect(()=>{s((0,S.g)("clusters",{}))},[s]);let b=(0,j.zA)()&&void 0!==E.J.onEditCluster,$=(0,j.oW)()&&void 0!==E.J.onDeleteCluster,L=(0,O.N4)(y),B=(0,O.N4)(_),V=(0,O.N4)(C),W=(0,O.N4)(A),P=n.useMemo(()=>[function({isEditClusterAvailable:e,isDeleteClusterAvailable:t}){return{name:q,header:en[q],width:320,defaultOrder:a.Ay.ASCENDING,sortAccessor:e=>e.title||e.name,render:({row:s})=>{let n=s.cluster?.Overall,l=s.balancer?(0,F.Zd)(s.balancer):null;return(0,r.jsxs)(o.s,{direction:"column",gap:.5,children:[(0,r.jsxs)(o.s,{alignItems:"flex-start",justifyContent:"space-between",gap:1,children:[(0,r.jsx)(eh,{row:s}),(0,r.jsxs)(o.s,{gap:1,children:[n?(0,r.jsx)(J.c.Label,{status:n,size:"xs"}):(0,r.jsx)(J.c.Label,{status:U.m.Grey,note:s.cluster?.error||eo("tooltip_no-cluster-data"),size:"xs"}),(()=>{let n=[],{onEditCluster:l,onDeleteCluster:a}=E.J;return(e&&l&&n.push({text:eo("edit-cluster"),iconStart:(0,r.jsx)(G.A,{}),action:()=>{l({clusterData:s})}}),t&&a&&n.push({text:eo("remove-cluster"),iconStart:(0,r.jsx)(T.A,{}),action:()=>{a({clusterData:s})},theme:"danger"}),n.length)?(0,r.jsx)(I.r,{items:n,defaultSwitcherProps:{view:"flat-secondary",size:"xs"},size:"s",menuProps:{size:"l"}}):null})()]})]}),l?(0,r.jsxs)(o.s,{gap:.5,alignItems:"center",children:[(0,r.jsx)(i.E,{variant:"caption-2",color:"secondary",children:l}),(0,r.jsx)(R.b,{size:"xs",text:l,className:ei("balancer-copy-icon")})]}):null]})}}}({isEditClusterAvailable:b,isDeleteClusterAvailable:$}),...ep],[$,b]),{columnsToShow:H,columnsToSelect:Y,setColumns:Z}=(0,k.K)(P,"selectedColumns",en,er,[q]),K=t.data,{servicesToSelect:Q,versions:X}=n.useMemo(()=>{let e=new Set,t=new Set;return(K??[]).forEach(s=>{s.service&&e.add(s.service),s.cluster?.Versions?.forEach(e=>{t.add((0,z.U)(e))})}),{servicesToSelect:Array.from(e).map(e=>({value:e,content:e})),versions:Array.from(t).map(e=>({value:e,content:e}))}},[K]),ee=n.useMemo(()=>{var e,t;return e=K??[],t={clusterName:L,status:B,service:V,version:W},e.filter(e=>{let s,r,n;return(0===(s=t.status).length||e.status&&s.includes(e.status))&&(0===(r=t.service).length||e.service&&r.includes(e.service))&&(0===(n=t.version).length||n.some(t=>e.cluster?.Versions?.some(e=>e.startsWith(t))))&&((e,t="")=>{if(!t)return!0;let s=t.toLowerCase(),r=s.split(" "),n=e.title?.toLowerCase().match(/[^\d\s]+|\d+|[^-\s]+|[^_\s]+/g)||[],l=r.every(t=>{let s=w()(t),r=RegExp(`^${s}|[\\s\\-_]${s}`,"i");return e.title&&r.test(e.title)||n.some(e=>e.startsWith(t))}),a=e.preparedVersions.some(e=>e.version.includes(s)),o=!!(e.hosts&&e.hosts[s]);return l||a||o})(e,t.clusterName)})},[L,K,V,B,W]),et=n.useMemo(()=>Array.from(new Set((K??[]).map(e=>e.status).filter(Boolean))).sort().map(e=>({value:e,content:e})),[K]),es=(0,M.Pq)(t.error),el=es?E.J.clusterOrDatabaseAccessError:void 0;return(0,r.jsx)(h.A,{error:es?t.error:void 0,...el,errorPageTitle:E.J.clustersPageTitle??eo("page_title"),children:(0,r.jsxs)("div",{className:ei(),children:[(0,r.jsx)(d.mg,{children:(0,r.jsx)("title",{children:eo("page_title")})}),(0,r.jsxs)(o.s,{justifyContent:"space-between",className:ei("title-wrapper"),children:[(0,r.jsx)(i.E,{variant:"header-1",children:E.J.clustersPageTitle??eo("page_title")}),(0,r.jsx)(m.E,{className:ei("autorefresh")})]}),(0,r.jsxs)(o.s,{className:ei("controls-wrapper"),children:[(0,r.jsx)("div",{className:ei("control",{wide:!0}),children:(0,r.jsx)(f.v,{placeholder:eo("controls_search-placeholder"),endContent:(0,r.jsx)(c.I,{data:l,className:ei("search-icon")}),onChange:e=>{s((0,N.Fe)({clusterName:e}))},value:L})}),(0,r.jsx)("div",{className:ei("control"),children:(0,r.jsx)(u.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:eo("controls_select-placeholder"),label:eo("controls_status-select-label"),value:B,options:et,onUpdate:e=>{s((0,N.Fe)({status:e}))},width:"max"})}),(0,r.jsx)("div",{className:ei("control"),children:(0,r.jsx)(u.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:eo("controls_select-placeholder"),label:eo("controls_service-select-label"),value:V,options:Q,onUpdate:e=>{s((0,N.Fe)({service:e}))},width:"max"})}),(0,r.jsx)("div",{className:ei("control"),children:(0,r.jsx)(u.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:eo("controls_select-placeholder"),label:eo("controls_version-select-label"),value:W,options:X,onUpdate:e=>{s((0,N.Fe)({version:e}))},width:"max"})}),(0,r.jsx)(g.O,{className:ei("column-setup"),popupWidth:242,items:Y,showStatus:!0,onUpdate:Z},"TableColumnSetup")]}),K?.length?(0,r.jsx)(i.E,{color:"secondary",children:eo("clusters-count",{count:ee?.length})}):null,t.isError?(0,r.jsx)(p.o,{error:t.error}):null,t.isLoading?(0,r.jsx)(v.a,{size:"l"}):null,t.fulfilledTimeStamp?(0,r.jsx)("div",{className:ei("table-wrapper"),children:(0,r.jsx)("div",{className:ei("table-content"),children:(0,r.jsx)(x.l,{columnsWidthLSKey:"clustersTableColumnsWidth",wrapperClassName:ei("table"),data:ee,columns:H,settings:{...D.N3,dynamicRender:!1},initialSortOrder:{columnId:q,order:a.Ay.ASCENDING}})})}):null]})})}},36354:function(e,t,s){s.d(t,{o:()=>n});var r=s(96540);function n({value:e,onUpdate:t,debounce:s=200}){let[n,l]=r.useState(e),a=r.useRef();return r.useEffect(()=>{l(t=>t!==e?e:t)},[e]),[n,e=>{l(e),window.clearTimeout(a.current),a.current=window.setTimeout(()=>{t?.(e)},s)}]}},33702:function(e,t,s){s.d(t,{K:()=>a});var r=s(96540),n=s(99286);function l(e){if("string"==typeof e)return{id:e,selected:!0};if(e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id){let t="selected"in e&&!!e.selected;return{id:e.id,selected:t}}}let a=(e,t,s,a,o)=>{let[i,c]=r.useState(()=>{let s=n.f.readUserSettingsValue(t,a).map(l);return e.reduce((e,t)=>{let r=s.find(e=>e&&e.id===t.name);return r?e.push(r):e.push({id:t.name,selected:!1}),e},[])}),u=r.useMemo(()=>i.reduce((t,{id:r,selected:n})=>{let l=o?.includes(r),a=e.find(e=>e.name===r);return a&&t.push({id:r,title:s[r],selected:n||l,required:l,sticky:l?"start":void 0,column:a}),t},[]).toSorted((e,t)=>Number(!!t.required)-Number(!!e.required)),[e,s,o,i]);return{columnsToShow:r.useMemo(()=>u.filter(e=>e.selected).map(e=>e.column),[u]),columnsToSelect:u,setColumns:r.useCallback(e=>{let s=e.map(({id:e,selected:t})=>({id:e,selected:t}));n.f.setUserSettingsValue(t,s),c(s)},[t])}}},47037:function(e,t,s){s.d(t,{k:()=>d});var r=s(74848),n=s(96540);let l=(0,s(54699).om)("progress");function a(e){let{text:t,offset:s=0}=e;return t?(0,r.jsx)("div",{className:l("text-inner"),style:{transform:`translateX(calc(var(--g-flow-direction) * ${-s}%))`},children:t}):null}function o({item:e}){let{value:t,color:s,className:n,theme:a,title:o,content:i,loading:c}=e,u={loading:c};return(void 0===s&&(u.theme=a||"default"),Number.isFinite(t))?(0,r.jsx)("div",{className:l("item",u,n),style:{width:`${t}%`,backgroundColor:s},title:o,children:i}):null}function i(e){return e<100?e-100:0}function c(e){let{stack:t,stackClassName:s,value:n,text:c}=e,u=i(n||t.reduce((e,{value:t})=>e+t,0));return(0,r.jsxs)("div",{className:l("stack",s),style:{transform:`translateX(calc(var(--g-flow-direction) * ${u}%))`},children:[(0,r.jsx)("div",{className:l("item"),style:{width:`${-u}%`}}),t.map((e,t)=>(0,r.jsx)(o,{item:e},t)),(0,r.jsx)(a,{offset:u,text:c})]})}function u(e){let{value:t,loading:s,text:n}=e,o=i(t);return Number.isFinite(t)?(0,r.jsx)("div",{className:l("item",{theme:function(e){let{theme:t,colorStops:s,colorStopsValue:r,value:n}=e;if(s){let e=s.find((e,t)=>{let l="number"==typeof r?r:n,a=t>1?s[t-1].stop:0,o=t<s.length-1?e.stop:100;return l>=a&&l<=o});return e?e.theme:t}return t}(e),loading:s}),style:{transform:`translateX(calc(var(--g-flow-direction) * ${o}%))`},children:(0,r.jsx)(a,{offset:o,text:n})}):null}let d=n.forwardRef(function(e,t){let{text:s="",theme:n="default",size:a="m",loading:o=!1,className:i,qa:d}=e,m={...e,text:s,theme:n,size:a,loading:o};return(0,r.jsxs)("div",{ref:t,className:l({size:a},i),"data-qa":d,children:[(0,r.jsx)("div",{className:l("text"),children:s}),void 0!==m.stack?(0,r.jsx)(c,{...m}):(0,r.jsx)(u,{...m})]})})}}]);