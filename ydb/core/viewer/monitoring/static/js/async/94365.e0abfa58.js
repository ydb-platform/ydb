"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([["94365"],{5948:function(e,t,n){n.d(t,{s:()=>a});var l=n(74848);n(96540);var s=n(29901);let r=(0,n(25247).cn)("ydb-cell-with-popover");function a({children:e,className:t,wrapperClassName:n,fullWidth:a,...i}){return(0,l.jsx)("div",{className:r({"full-width":a},n),children:(0,l.jsx)(s.A,{openDelay:100,closeDelay:100,className:r("popover",{"full-width":a}),...i,children:(0,l.jsx)("div",{className:r("children-wrapper",{"full-width":a},t),children:e})})})}},80720:function(e,t,n){n.d(t,{u:()=>a});var l=n(74848),s=n(96540),r=n(54403);let a=({children:e,content:t,className:n,pinOnClick:a,hasArrow:i=!0,placement:o=["top","bottom"],...c})=>{let[d,u]=s.useState(!1),[m,h]=s.useState(!1),p=s.useRef(null);return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)(r.z,{anchorElement:p.current,open:m||d,placement:o,hasArrow:i,onOutsideClick:()=>{h(!1)},...c,children:t}),(0,l.jsx)("span",{className:n,ref:p,onClick:a?()=>{h(!0)}:void 0,onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},children:e})]})}},53211:function(e,t,n){n.d(t,{T:()=>o});var l=n(74848),s=n(5434),r=n(25247);let a=(0,n(51432).g4)("ydb-entities-count",{ru:{of:"из"},en:{of:"of"}}),i=(0,r.cn)("ydb-entities-count"),o=({total:e,current:t,label:n,loading:r,className:o})=>{let c="";return n&&(c+=`${n}: `),r?c+="...":(c+=`${t}`,e&&Number(e)!==Number(t)&&(c+=` ${a("of")} ${e}`)),(0,l.jsx)(s.J,{theme:"info",size:"m",className:i(null,o),children:c})}},80865:function(e,t,n){n.d(t,{z:()=>o});var l=n(74848),s=n(96540),r=n(25247),a=n(64349);let i=(0,r.cn)("info-viewer"),o=({title:e,info:t,dots:n=!0,size:r,variant:o="default",className:c,multilineLabels:d,renderEmptyState:u})=>t&&t.length||!u?(0,l.jsxs)("div",{className:i({size:r,variant:o},c),children:[e&&(0,l.jsx)("div",{className:i("title"),children:e}),t&&t.length>0?(0,l.jsx)("div",{className:i("items"),children:t.map((e,t)=>(0,l.jsxs)("div",{className:i("row"),children:[(0,l.jsxs)("div",{className:i("label"),children:[(0,l.jsx)("div",{className:i("label-text",{multiline:d}),children:e.label}),n&&(0,l.jsx)("div",{className:i("dots")})]}),(0,l.jsx)("div",{className:i("value"),children:e.value})]},t))}):(0,a.A)("no-data")]}):(0,l.jsx)(s.Fragment,{children:u({title:e,size:r})})},64349:function(e,t,n){n.d(t,{A:()=>r});var l=n(51432),s=JSON.parse('{"common.created":"Created","common.type":"Type","no-data":"No data"}');let r=(0,l.g4)("ydb-components-info-viewer",{en:s})},83758:function(e,t,n){n.d(t,{Hr:()=>s.H,jl:()=>s.j,z_:()=>l.z});var l=n(80865),s=n(2275)},2275:function(e,t,n){function l({values:e,labels:t,defaultValueFormatter:n}){return(l,s)=>{let r;return{label:(t||{})[l]??l,value:(r=(e||{})[l]||n)?r(s):s}}}n.d(t,{H:()=>l,j:()=>s});let s=(e,t)=>t?Object.entries(t).map(([t,n])=>e(t,n)).filter(({value:e})=>!!e):[]},48649:function(e,t,n){n.d(t,{_:()=>d});var l=n(74848),s=n(25247),r=n(80720),a=n(18016);let i=(0,s.cn)("ydb-pool-bar"),o=({data:e={}})=>{let{Usage:t=0}=e,n=Math.min(100*t,100),s=n>=75?"danger":n>=50&&n<75?"warning":"normal";return(0,l.jsx)(r.u,{className:i({type:s}),content:(0,l.jsx)(a.HG,{data:e,className:i("popup-content")}),children:(0,l.jsx)("div",{style:{height:`${n}%`},className:i("value",{type:s})})})},c=(0,s.cn)("ydb-pools-graph"),d=({pools:e=[]})=>(0,l.jsx)("div",{className:c(),children:e.map((e,t)=>(0,l.jsx)(o,{data:e},t))})},29472:function(e,t,n){n.d(t,{v:()=>c});var l=n(74848);n(96540);var s=n(25247),r=n(33777),a=n(36354);let i=({onUpdate:e,value:t="",debounce:n=200,...s})=>{let[i,o]=(0,a.o)({value:t,onUpdate:e,debounce:n});return(0,l.jsx)(r.k,{value:i,onUpdate:o,...s})},o=(0,s.cn)("ydb-search"),c=({onChange:e,value:t="",width:n,className:s,debounce:r,inputRef:a,...c})=>(0,l.jsx)(i,{debounce:r,hasClear:!0,autoFocus:!0,controlRef:a,style:{width:n},className:o(null,s),value:t,onUpdate:e,...c})},31596:function(e,t,n){n.d(t,{O:()=>c});var l=n(74848),s=n(64482),r=n(77269),a=n(24629),i=n(17427),o=n(98537);function c(e){let{items:t,showStatus:n,disabled:c}=e;return(0,l.jsx)(o.O,{...e,renderSwitcher:e=>(0,l.jsxs)(a.$,{disabled:c,onClick:e.onClick,children:[(0,l.jsx)(i.I,{data:s.A}),(()=>{if(!n)return null;let e=t.reduce((e,t)=>t.selected?e+1:e,0),s=t.length;return(0,l.jsxs)(r.E,{color:"secondary",children:[e,"/",s]})})()]}),hideApplyButton:!0})}},48849:function(e,t,n){n.d(t,{L:()=>c});var l=n(74848),s=n(96540),r=n(85169),a=n(25247),i=n(78951);let o=(0,a.cn)("ydb-table-with-controls-layout"),c=({children:e,className:t,fullHeight:n})=>(0,l.jsx)("div",{className:o({"full-height":n},t),children:e});c.Controls=function({children:e,renderExtraControls:t,className:n}){return(0,l.jsxs)(r.s,{justifyContent:"space-between",className:o("controls-wrapper"),gap:2,children:[(0,l.jsx)("div",{className:o("controls",n),children:e}),(0,l.jsx)("div",{className:o("extra-controls"),children:t?.()})]})},c.Table=function({children:e,loading:t,className:n,scrollContainerRef:r,scrollDependencies:a=[]}){let c=s.useRef(null);return((({tableContainerRef:e,scrollContainerRef:t,dependencies:n=[]})=>{let l=s.useCallback(()=>{if(e?.current){let t=window.getComputedStyle(e.current).getPropertyValue("--data-table-sticky-header-offset");return t?parseInt(t,10):0}return 0},[e]),r=s.useCallback(()=>{if(e?.current&&t?.current){let n=l(),s=e.current.getBoundingClientRect(),r=t.current.getBoundingClientRect(),a=s.top-r.top+t.current.scrollTop;s.top-n<r.top&&t.current.scrollTo(0,a-n)}},[t,e,l]);return s.useLayoutEffect(()=>{e&&t&&r()},[r,e,t,...n])})({tableContainerRef:c,scrollContainerRef:r,dependencies:a}),t)?(0,l.jsx)(i.Q,{className:o("loader")}):(0,l.jsx)("div",{ref:c,className:o("table",n),children:e})}},18016:function(e,t,n){n.d(t,{Qz:()=>j,HG:()=>x,nL:()=>v,p:()=>m});var l=n(74848),s=n(66918),r=n(25247),a=n(70583),i=n(60318),o=n(51432),c=JSON.parse('{"field_rack":"Rack","field_host":"Host","context_developer-ui":"Developer UI","field_database":"Database","field_roles":"Roles"}');let d=(0,o.g4)("ydb-node-name-tooltip",{en:c}),u=(0,r.cn)("ydb-node-endpoints-tooltip-content"),m=({data:e})=>{let t=(0,a.n)(e),n=[];return e?.Roles?.length&&n.push({name:d("field_roles"),children:e.Roles.join(", "),key:"Roles"}),e?.Tenants?.[0]&&n.push({name:d("field_database"),children:e.Tenants[0],key:"Database"}),e?.Host&&n.push({name:d("field_host"),children:e.Host,copyText:e.Host,key:"Host"}),e?.Rack&&n.push({name:d("field_rack"),children:e.Rack,key:"Rack"}),e?.Endpoints&&e.Endpoints.length&&e.Endpoints.forEach(({Name:e,Address:t})=>{e&&t&&n.push({name:e,children:t,key:e})}),t&&n.push({name:"Links",children:(0,l.jsx)(i.K,{title:d("context_developer-ui"),url:t}),key:"developerUi"}),(0,l.jsx)("div",{className:u("list-container"),children:(0,l.jsx)(s.u,{responsive:!0,children:n.map(({children:e,key:t,...n})=>(0,l.jsx)(s.u.Item,{...n,children:(0,l.jsx)("div",{className:u("definition"),children:e})},t))})})};var h=n(83758),p=n(9753);let f=(0,h.Hr)({values:{ChangeTime:e=>(0,l.jsx)(p.H,{ChangeTime:e})},labels:{TabletId:"Tablet"},defaultValueFormatter:e=>e&&String(e)}),v=({data:e={},className:t})=>{let{TabletId:n,NodeId:s,State:r,Type:a,ChangeTime:i,Generation:o}=e,c=(0,h.jl)(f,{TabletId:n,NodeId:s,State:r,Type:a,ChangeTime:i,Generation:o});return(0,l.jsx)(h.z_,{className:t,info:c,dots:!1,size:"s"})},j=(0,h.Hr)({values:{Usage:e=>e&&`${(100*Number(e)).toFixed(2)} %`},labels:{Name:"Pool"},defaultValueFormatter:e=>e&&String(e)}),x=({data:e={},className:t})=>{let n=(0,h.jl)(j,e);return(0,l.jsx)(h.z_,{className:t,info:n,dots:!1,size:"s"})}},9753:function(e,t,n){n.d(t,{H:()=>m,p:()=>u});var l=n(74848);n(96540);var s=n(66918),r=n(35537),a=n(97855),i=n(5948),o=n(51432),c=JSON.parse('{"start-time":"Start time","disconnect-time":"Disconnect time","change-time":"Change time"}');let d=(0,o.g4)("ydb-uptime-viewer",{en:c});function u({StartTime:e,DisconnectTime:t}){let n,o=null;return(t?(n=(0,a.wI)(t),o=(0,l.jsx)(s.u.Item,{name:d("disconnect-time"),children:(0,a.r6)(t,{withTimeZone:!0})},"DisconnectTime")):e&&(n=(0,a.H7)(e),o=(0,l.jsx)(s.u.Item,{name:d("start-time"),children:(0,a.r6)(e,{withTimeZone:!0})},"StartTime")),n)?(0,l.jsx)(i.s,{placement:["top","bottom"],disabled:!o,content:(0,l.jsx)(s.u,{responsive:!0,children:o}),children:n}):r.Pd}function m({ChangeTime:e}){let t;return(e&&(t=(0,a.H7)(e)),t)?(0,l.jsx)(i.s,{placement:["top","bottom"],content:(0,l.jsx)(s.u,{responsive:!0,children:(0,l.jsx)(s.u.Item,{name:d("change-time"),children:(0,a.r6)(e,{withTimeZone:!0})},"changeTime")}),children:t}):r.Pd}},36354:function(e,t,n){n.d(t,{o:()=>s});var l=n(96540);function s({value:e,onUpdate:t,debounce:n=200}){let[s,r]=l.useState(e),a=l.useRef();return l.useEffect(()=>{r(t=>t!==e?e:t)},[e]),[s,e=>{r(e),window.clearTimeout(a.current),a.current=window.setTimeout(()=>{t?.(e)},n)}]}},70583:function(e,t,n){n.d(t,{n:()=>d});var l=n(29620),s=n(71790),r=n(67222),a=n(88387),i=n(39279),o=n(88831),c=n(3715);function d(e){let t=(0,c.N)(e=>e.singleClusterMode),{balancer:n=l.Hs,settings:d}=(0,s.Zd)(),u=(0,o.X)(),m=r.J.useMetaProxy&&d?.use_meta_proxy!==!1;if(u){if(!t){let t=(0,i.D)(e?.NodeId,n,m);return t?(0,a.Un)(t):void 0}if(e?.NodeId){let t=(0,a.Kx)(e.NodeId);return(0,a.Un)(t)}}}},33702:function(e,t,n){n.d(t,{K:()=>a});var l=n(96540),s=n(75442);function r(e){if("string"==typeof e)return{id:e,selected:!0};if(e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id){let t="selected"in e&&!!e.selected;return{id:e.id,selected:t}}}let a=(e,t,n,a,i)=>{let[o,c]=(0,s.i)(t,a),d=l.useMemo(()=>(Array.isArray(o)?o:a).map(r),[a,o]),u=l.useMemo(()=>e.reduce((e,t)=>{let n=d.find(e=>e&&e.id===t.name);return n?e.push(n):e.push({id:t.name,selected:!1}),e},[]),[e,d]),m=l.useMemo(()=>u.reduce((t,{id:l,selected:s})=>{let r=i?.includes(l),a=e.find(e=>e.name===l);return a&&t.push({id:l,title:n[l],selected:s||r,required:r,sticky:r?"start":void 0,column:a}),t},[]).toSorted((e,t)=>Number(!!t.required)-Number(!!e.required)),[e,n,i,u]);return{columnsToShow:l.useMemo(()=>m.filter(e=>e.selected).map(e=>e.column),[m]),columnsToSelect:m,setColumns:l.useCallback(e=>{c(e.map(({id:e,selected:t})=>({id:e,selected:t})))},[c])}}}}]);