"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([["96981"],{32692:function(e,s,t){t.d(s,{B:()=>c});var n=t(74848),i=t(96540),l=t(24629),r=t(29901),a=t(5104),o=t(69610);function c({children:e,onConfirmAction:s,onConfirmActionSuccess:t,dialogHeader:c,dialogText:d,retryButtonText:u,buttonDisabled:h=!1,buttonView:x="action",buttonClassName:m,withPopover:p=!1,popoverContent:y,popoverPlacement:f="right",popoverDisabled:j=!0}){let[g,v]=i.useState(!1),[b,_]=i.useState(!1),[N,C]=i.useState(!1),S=async e=>{_(!0),await s(e)},w=async()=>{C(!1);try{await t?.()}finally{_(!1)}},A=()=>(0,n.jsx)(l.$,{onClick:()=>v(!0),view:x,disabled:h,loading:!h&&b,className:m,children:e});return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(a.g,{visible:g,header:c,text:d,withRetry:N,retryButtonText:u,onConfirm:S,onConfirmActionSuccess:w,onConfirmActionError:e=>{C((0,o.D)(e)),_(!1)},onClose:()=>{v(!1)}}),p?(0,n.jsx)(r.A,{content:y,placement:f,disabled:j,children:(0,n.jsx)("span",{children:A()})}):A()]})}},5104:function(e,s,t){t.d(s,{g:()=>f});var n=t(74848),i=t(96540),l=t(17453),r=t(75561),a=t(68243),o=t(74101),c=t(17427),d=t(69117),u=t(25247),h=t(69045),x=t(51432),m=JSON.parse('{"default-error":"Something went wrong, action cannot be completed","no-rights-error":"You don\'t have enough rights to complete the operation","button-confirm":"Confirm","button-retry":"Retry","button-cancel":"Cancel","button-close":"Close","checkbox-text":"I understand what I\'m doing"}');let p=(0,x.g4)("ydb-critical-action-dialog",{en:m}),y=(0,u.cn)("ydb-critical-dialog");function f({visible:e,header:s,text:t,withRetry:u,retryButtonText:x,withCheckBox:m,onClose:f,onConfirm:j,onConfirmActionSuccess:g,onConfirmActionError:v}){let[b,_]=i.useState(!1),[N,C]=i.useState(),[S,w]=i.useState(!1),A=async e=>(_(!0),j(e).then(()=>{g(),f()}).catch(e=>{v(e),C(e)}).finally(()=>{_(!1)}));return(0,n.jsx)(o.l,{open:e,hasCloseButton:!1,className:y(),size:"s",onClose:f,onTransitionOutComplete:()=>{C(void 0),w(!1)},children:N?(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(o.l.Header,{caption:s}),(0,n.jsx)(o.l.Body,{className:y("body"),children:(0,n.jsxs)("div",{className:y("body-message",{error:!0}),children:[(0,n.jsx)("span",{className:y("error-icon"),children:(0,n.jsx)(l.A,{width:"24",height:"22"})}),(e=>{if((0,h.cH)(e)){if(403===e.status)return p("no-rights-error");if("string"==typeof e.data)return e.data;if((0,h._E)(e)&&e.data)return(0,n.jsx)(d.OI,{hideSeverity:!0,data:e.data});if(e.statusText)return e.statusText}return p("default-error")})(N)]})}),(0,n.jsx)(o.l.Footer,{loading:!1,preset:"default",textButtonApply:u?x||p("button-retry"):void 0,textButtonCancel:p("button-close"),onClickButtonApply:()=>A(!0),onClickButtonCancel:f})]}):(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(o.l.Header,{caption:s}),(0,n.jsxs)(o.l.Body,{className:y("body"),children:[(0,n.jsxs)("div",{className:y("body-message",{warning:!0}),children:[(0,n.jsx)("span",{className:y("warning-icon"),children:(0,n.jsx)(c.I,{data:r.A,size:24})}),t]}),m?(0,n.jsx)(a.S,{checked:S,onUpdate:w,children:p("checkbox-text")}):null]}),(0,n.jsx)(o.l.Footer,{loading:b,preset:"default",textButtonApply:p("button-confirm"),textButtonCancel:p("button-cancel"),propsButtonApply:{type:"submit",disabled:m&&!S},onClickButtonCancel:f,onClickButtonApply:()=>A()})]})})}},69610:function(e,s,t){t.d(s,{D:()=>n});let n=e=>!!(e&&"object"==typeof e&&"retryPossible"in e&&e.retryPossible)},58634:function(e,s,t){t.d(s,{A:()=>h});var n=t(74848),i=t(96540),l=t(56824),r=t(25247),a=t(51432),o=JSON.parse('{"default_collapse_label":"Show less","default_expand_label":"Show more","chars_count":[" ({{count}} symbol)"," ({{count}} symbols)"," ({{count}} symbols)"," ({{count}} symbols)"]}'),c=JSON.parse('{"default_collapse_label":"Показать меньше","default_expand_label":"Показать ещё","chars_count":[" ({{count}} символ)"," ({{count}} символа)"," ({{count}} символов)"," ({{count}} символов)"]}');let d=(0,a.g4)("ydb-shorty-string",{ru:c,en:o}),u=(0,r.cn)("kv-shorty-string");function h({value:e="",limit:s=200,strict:t=!1,displayLength:r=!0,render:a=e=>e,onToggle:o,expandLabel:c=d("default_expand_label"),collapseLabel:h=d("default_collapse_label")}){let[x,m]=i.useState(!1),p=(x?h:c)+(r&&!x?d("chars_count",{count:e.length}):""),y=e.length>s+(t?0:p.length),f=x||!y?e:e.slice(0,s-4)+"\xa0...";return(0,n.jsxs)("div",{className:u(),children:[a(f),y?(0,n.jsx)(l.N,{className:u("toggle"),href:"#",onClick:e=>{e.stopPropagation(),e.preventDefault(),m(e=>!e),o?.()},children:p}):null]})}},69117:function(e,s,t){t.d(s,{tm:()=>R,vt:()=>O,OI:()=>I});var n=t(74848),i=t(96540),l=t(63584),r=t(52457),a=t(75561),o=t(17453),c=t(85169),d=t(24629),u=t(94866),h=t(56824),x=t(17427),m=t(58634),p=t(25247),y=t(28241),f=t(74101);function j({open:e,issues:s,hideSeverity:t,onClose:i,textButtonCancel:l="Close",size:r="m",caption:a}){return(0,n.jsxs)(f.l,{size:r,onClose:i,disableOutsideClick:!0,open:e,children:[(0,n.jsx)(f.l.Header,{caption:a}),(0,n.jsx)(f.l.Body,{children:(0,n.jsx)(R,{issues:s,hideSeverity:t})}),(0,n.jsx)(f.l.Footer,{textButtonCancel:l,onClickButtonCancel:i})]})}function g(e){return Array.isArray(e)&&e.length>0}function v(e){return"string"==typeof e?[]:e?.error?.message?[{message:e.error.message,severity:e.error.severity,position:e.error.position,end_position:e.error.end_position,issue_code:e.error.issue_code,issues:Array.isArray(e.issues)?e.issues:[]}]:Array.isArray(e.issues)?e.issues:[]}var b=t(51432),_=JSON.parse('{"action_show-details":"Show details","action_hide-details":"Hide details","action_close":"Close","action_show-full-message":"Show full message","field_code":"Code","field_position":"Position"}');let N=(0,b.g4)("issues",{en:_}),C=["S_FATAL","S_ERROR","S_WARNING","S_INFO"];function S(e){return e&&void 0!==C[e]?C[e]:"S_INFO"}let w=(0,p.cn)("kv-result-issues"),A=(0,p.cn)("kv-issues"),k=(0,p.cn)("kv-issue");function B({message:e}){return(0,n.jsx)("div",{className:w("error-message"),children:e})}function I({data:e,hideSeverity:s}){let t=v(e),[l,r]=i.useState({});return"string"==typeof e?(0,n.jsx)(B,{message:e}):(0,n.jsx)("div",{className:w(),children:(0,n.jsx)(c.s,{direction:"column",gap:"2",children:t.map((e,t)=>{let a=g(e.issues);return(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)(F,{severity:S(e.severity),message:e.message||"",hideSeverity:s,hasIssues:a,expanded:l[t],onClick:()=>r(e=>({...e,[t]:!e[t]}))}),l[t]&&a&&(0,n.jsx)(R,{hideSeverity:s,issues:e.issues})]},t)})})})}function O({data:e,hideSeverity:s}){let t=v(e),[l,r]=i.useState(!1),[a,o]=i.useState(null);return"string"==typeof e?(0,n.jsx)(B,{message:e}):(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)("div",{className:w(),children:(0,n.jsx)(c.s,{direction:"column",gap:"2",children:t.map((e,t)=>{let i=g(e.issues);return(0,n.jsx)(F,{severity:S(e.severity),message:e.message||"",hideSeverity:s,hasIssues:i,onClick:()=>{o(e.issues??[]),r(!0)}},t)})})}),(0,n.jsx)(j,{open:l,issues:a??[],hideSeverity:s,onClose:()=>r(!1),textButtonCancel:N("action_close")})]})}function F({severity:e,message:s,hideSeverity:t,hasIssues:i,expanded:l,onClick:r}){let a=l?N("action_hide-details"):N("action_show-details");return(0,n.jsxs)("div",{className:w("error-message"),children:[t?null:(0,n.jsx)(H,{severity:e}),(0,n.jsx)("span",{className:w("error-message-text"),children:s}),i&&(0,n.jsx)(d.$,{view:"normal",size:"s",onClick:r,children:a})]})}function R({issues:e,hideSeverity:s}){let t=e?.reduce((e,s)=>Math.min(e,s.severity??10),10);return(0,n.jsx)("div",{className:A(null),children:e?.map((e,i)=>(0,n.jsx)(T,{hideSeverity:s,issue:e,expanded:e.severity===t},i))})}function T({issue:e,hideSeverity:s,level:t=0}){let[l,r]=i.useState(!0),a=S(e.severity),o=e.issues,c=g(o),h=l?"bottom":"right";return(0,n.jsxs)("div",{className:k({leaf:!c,"has-issues":c}),children:[(0,n.jsxs)("div",{className:k("line"),children:[c&&(0,n.jsx)(d.$,{view:"flat-secondary",onClick:()=>r(!l),className:k("arrow-toggle"),children:(0,n.jsx)(u.I,{direction:h,size:16})}),s?null:(0,n.jsx)(H,{severity:a}),(0,n.jsx)(P,{issue:e}),e.issue_code?(0,n.jsxs)("span",{className:k("code"),children:[N("field_code"),": ",e.issue_code]}):null]}),c&&l&&(0,n.jsx)("div",{className:k("issues"),children:(0,n.jsx)($,{issues:o,level:t+1,expanded:l})})]})}function P({issue:e}){let s=function(e){let{position:s}=e;if("object"!=typeof s||null===s||!(0,y.kf)(s.row))return"";let{row:t,column:n}=s;return(0,y.kf)(n)?`${t}:${n}`:`line ${t}`}(e),t=window.ydbEditor,i=()=>(0,n.jsxs)("span",{className:k("message"),children:[s&&(0,n.jsx)("span",{className:k("place-text"),title:N("field_position"),children:s}),(0,n.jsx)("div",{className:k("message-text"),children:(0,n.jsx)(m.A,{value:e.message,expandLabel:N("action_show-full-message")})})]}),{row:l,column:r}=e.position??{};return(0,y.kf)(l)&&t?(0,n.jsx)(h.N,{href:"#",onClick:()=>{let e={lineNumber:l,column:r??0};t.setPosition(e),t.revealPositionInCenterIfOutsideViewport(e),t.focus()},view:"primary",draggable:!1,children:i()}):i()}function $(e){let{issues:s,level:t,expanded:i}=e;return(0,n.jsx)("div",{className:k("list"),children:s.map((e,s)=>(0,n.jsx)(T,{issue:e,level:t,expanded:i},s))})}let z={S_INFO:l.A,S_WARNING:r.A,S_ERROR:a.A,S_FATAL:o.A},E=(0,p.cn)("yql-issue-severity");function H({severity:e}){let s=e.slice(2).toLowerCase();return(0,n.jsxs)("span",{className:E({severity:s}),children:[(0,n.jsx)(x.I,{className:E("icon"),data:z[e]}),(0,n.jsx)("span",{className:E("title"),children:s})]})}}}]);