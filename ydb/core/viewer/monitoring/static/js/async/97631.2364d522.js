"use strict";(globalThis.webpackChunkydb_embedded_ui=globalThis.webpackChunkydb_embedded_ui||[]).push([["97631"],{61058:function(e,t,r){r.d(t,{T:()=>s.T});var s=r(53211)},60117:function(e,t,r){r.d(t,{c:()=>_});var s=r(74848);r(96540);var n=r(6876),l=r(5434),a=r(85169),i=r(46086),o=r(40897),c=r(25247),u=r(52198),d=r(52457),m=r(75561),h=r(83544),p=r(33269),v=r(17427);let g={[o.m.Blue]:u.A,[o.m.Yellow]:d.A,[o.m.Orange]:m.A,[o.m.Red]:d.A,[o.m.Green]:h.A,[o.m.Grey]:p.A};function x({status:e,...t}){return e?(0,s.jsx)(v.I,{...t,data:g[e]}):null}var f=r(26268),b=r(53788);let j=(0,c.cn)("ydb-entity-status-new"),w={[o.m.Red]:"danger",[o.m.Blue]:"info",[o.m.Green]:"success",[o.m.Grey]:"unknown",[o.m.Orange]:"orange",[o.m.Yellow]:"warning"},N={get[o.m.Red](){return(0,f.A)("title_red")},get[o.m.Yellow](){return(0,f.A)("title_yellow")},get[o.m.Orange](){return(0,f.A)("title_orange")},get[o.m.Green](){return(0,f.A)("title_green")},get[o.m.Grey](){return(0,f.A)("title_grey")},get[o.m.Blue](){return(0,f.A)("title_blue")}};function _({className:e,children:t}){return(0,s.jsx)(a.s,{gap:"2",wrap:"nowrap",alignItems:"center",className:j(null,e),children:t})}_.Label=function({children:e,status:t,withStatusName:r=!0,note:o,size:c="m",iconSize:u=14}){let d=w[t];return(0,s.jsx)(n.m,{title:b.D[t],disabled:!!o,children:(0,s.jsx)(l.J,{theme:"orange"===d?void 0:d,icon:(0,s.jsx)(x,{size:u,status:t}),size:c,className:j({orange:"orange"===d}),children:(0,s.jsxs)(a.s,{gap:"2",wrap:"nowrap",children:[e,r?N[t]:null,o&&(0,s.jsx)(i.H,{className:j("note"),children:o})]})})})},_.displayName="EntityStatus"},26268:function(e,t,r){r.d(t,{A:()=>l});var s=r(51432),n=JSON.parse('{"title_red":"Critical","title_blue":"Normal","title_green":"Good","title_grey":"Unknown","title_orange":"Caution","title_yellow":"Warning","context_red":"Some systems are failed and not available","context_yellow":"There are minor issues","context_orange":"Critical state, requires immediate attention","context_green":"Everything is working as expected","context_grey":"The condition cannot be determined","context_blue":"All good, some parts of the system are restoring"}');let l=(0,s.g4)("ydb-entity-status",{en:n})},53788:function(e,t,r){r.d(t,{D:()=>l});var s=r(40897),n=r(26268);let l={get[s.m.Red](){return(0,n.A)("context_red")},get[s.m.Yellow](){return(0,n.A)("context_yellow")},get[s.m.Orange](){return(0,n.A)("context_orange")},get[s.m.Green](){return(0,n.A)("context_green")},get[s.m.Grey](){return(0,n.A)("context_grey")},get[s.m.Blue](){return(0,n.A)("context_blue")}}},53808:function(e,t,r){r.d(t,{k:()=>c});var s=r(74848),n=r(96540),l=r(81392),a=r(51432),i=JSON.parse('{"value_all":"All","value_with-problems":"With problems"}');let o=(0,a.g4)("ydb-problem-filter",{en:i});function c({value:e,onChange:t,className:r}){let a=n.useCallback(e=>{t("true"===e)},[t]);return(0,s.jsxs)(l.x,{value:e.toString(),onUpdate:a,className:r,children:[(0,s.jsx)(l.x.Option,{value:"false",children:o("value_all")}),(0,s.jsx)(l.x.Option,{value:"true",children:o("value_with-problems")})]})}},4320:function(e,t,r){r.d(t,{v:()=>s.v});var s=r(29472)},9259:function(e,t,r){r.d(t,{A:()=>l});var s=r(51432),n=JSON.parse('{"field_links":"Links","field_monitoring-link":"Monitoring","field_logs-link":"Logs","context_unknown":"unknown database"}');let l=(0,s.g4)("ydb-tenant-name-wrapper",{en:n})},68650:function(e,t,r){r.r(t),r.d(t,{HomePage:()=>eO});var s=r(74848),n=r(96540),l=r(81392),a=r(85169),i=r(77269),o=r(85902),c=r(56347),u=r(30919),d=r(42724),m=r(8946),h=r(1459),p=r(66900),v=r(56496),g=r(67222);let x=v.F.injectEndpoints({endpoints:e=>({getMetaEnvironments:e.query({queryFn:async e=>{try{var t;let e,r;if(!window.api.meta)throw Error("Method is not implemented.");return{data:(t=await window.api.meta.getMetaEnvironments(),e=t?.environments.map(e=>e.name)??[],r=g.J.databasesEnvironmentsConfig?.supportedEnvironments,r?.length?r.filter(t=>e.includes(t)):[])}}catch(e){return{error:(0,p.N)(e)}}}})}),overrideExisting:"throw"});var f=r(39471),b=r(2837),j=r(25247),w=r(61738),N=r(88831),_=r(69045);let y=e=>n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16"},e),n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.5 7a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0m-.82 4.74a6 6 0 1 1 1.06-1.06l2.79 2.79a.75.75 0 1 1-1.06 1.06z",clipRule:"evenodd"}));var A=r(29581),C=r(17427),E=r(43834),k=r(67103),S=r(74010),L=r(4320),D=r(31596),O=r(48849),G=r(8466),M=r(60680),T=r.n(M);let I=e=>e.clusters.clusterName,J=e=>e.clusters.status,z=e=>e.clusters.service,R=e=>e.clusters.version;var B=r(35537),P=r(33702),V=r(94307),W=r(39688),H=r(68910),U=r(97547),F=r(66111),q=r(56824),Q=r(5434),$=r(47037),Y=r(60117),Z=r(41982),K=r(40897),X=r(97855),ee=r(35157),et=r(54549);let er="title",es="versions",en="service",el="status",ea="nodes",ei="load",eo="storage",ec="hosts",eu="tenants",ed="description",em=[er,es,en,el,ea,ei,eo,ec,eu],eh={[er]:"Cluster",[es]:"Versions",dc:"DC",[en]:"Service",[el]:"Status",[ea]:"Nodes",[ei]:"Load",[eo]:"Storage",[ec]:"Hosts",[eu]:"Databases",[ed]:"Description"};var ep=r(51432),ev=JSON.parse('{"controls_status-select-label":"Status:","controls_service-select-label":"Service:","controls_version-select-label":"Version:","controls_search-placeholder":"Cluster name, version, host...","controls_select-placeholder":"All","statistics_clusters":"Clusters","statistics_hosts":"Hosts","statistics_tenants":"Tenants","statistics_nodes":"Nodes","statistics_load":"Load","statistics_storage":"Storage","tooltip_no-cluster-data":"No cluster data","clusters-count":{"one":"{{count}} cluster","other":"{{count}} clusters"},"entities-count":"{{value}} of {{capacity}}","page_title":"Clusters","edit-cluster":"Edit Cluster","remove-cluster":"Remove Cluster"}');let eg=(0,ep.g4)("ydb-clusters-page",{en:ev}),ex=(0,j.cn)("ydb-clusters");var ef=r(88387);function eb(e,t){let{use_embedded_ui:r,preparedBackend:s,name:n,clusterDomain:l,settings:a,clusterExternalName:i}=e;return r&&s?(0,ef.t1)(s):(0,m.a)({activeTab:t,environment:l?void 0:a?.auth_service},{backend:l?void 0:s,clusterName:l&&i?i:n},{withBasename:!0},l)}let ej=(0,s.jsx)("span",{className:ex("empty-cell"),children:B.Pd});function ew({row:e}){let t=eb(e);return(0,s.jsx)("div",{className:ex("cluster-name"),children:(0,s.jsx)(q.N,{href:t,children:e.title||e.name})})}let eN=[{name:es,header:eh[es],width:400,defaultOrder:A.Ay.DESCENDING,sortAccessor:({preparedVersions:e})=>e.map(e=>e.version.replace(/^[0-9]\+\./g,"")).sort((e,t)=>e.localeCompare(t))[0]||void 0,render:({row:e})=>{let{versions:t=[]}=e;return!t.length||t.some(e=>!e.version)?ej:(0,s.jsx)(e_,{row:e})}},{name:el,header:eh[el],width:180,sortable:!0,render:({row:e})=>(0,s.jsx)(Q.J,{children:e.status})},{name:en,header:eh[en],width:100,sortable:!0},{name:"dc",header:eh.dc,width:120,sortable:!1,render:({row:e})=>{let t=e.cluster&&e.cluster.DataCenters||[];return(0,s.jsx)("div",{className:ex("cluster-dc"),children:t.filter(Boolean).join(", ")||ej})}},{name:ea,header:eh[ea],width:170,resizeMinWidth:170,defaultOrder:A.Ay.DESCENDING,sortAccessor:({cluster:e={}})=>{let{NodesTotal:t=0}=e;return t},render:({row:e})=>{let{NodesAlive:t=0,NodesTotal:r=0,Overall:n}=e.cluster||{};return n?(0,s.jsx)(ey,{value:t,capacity:r,description:eg("entities-count",{value:(0,X.ZV)(t),capacity:(0,X.ZV)(r)})}):ej}},{name:ei,header:eh[ei],width:170,resizeMinWidth:170,defaultOrder:A.Ay.DESCENDING,sortAccessor:({cluster:e})=>e?.NumberOfCpus||0,render:({row:e})=>{let{LoadAverage:t=0,NumberOfCpus:r=0,RealNumberOfCpus:n,Overall:l}=e.cluster||{};return l?(0,s.jsx)(ey,{value:t,capacity:n??r,description:eg("entities-count",{value:(0,X.ZV)(Math.round(t)),capacity:(0,X.ZV)(n??r)})}):ej}},{name:eo,header:eh[eo],width:170,resizeMinWidth:170,defaultOrder:A.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(e?.StorageTotal)||0,render:({row:e})=>{let{StorageUsed:t=0,StorageTotal:r=0,Overall:n}=e.cluster||{};if(!n)return ej;let[l,a]=(0,X.ki)(Number(t),Number(r));return(0,s.jsx)(ey,{value:Number(t),capacity:Number(r),description:eg("entities-count",{value:l,capacity:a})})}},{name:ec,header:eh[ec],width:80,defaultOrder:A.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(e?.Hosts)||0,render:({row:e})=>Number(e.cluster?.Hosts)||ej},{name:eu,header:eh[eu],width:80,defaultOrder:A.Ay.DESCENDING,sortAccessor:({cluster:e})=>Number(e?.Tenants)||0,render:({row:e})=>Number(e.cluster?.Tenants)||ej},{name:ed,header:eh[ed],sortable:!1,width:200,render:({row:e})=>e.description?(0,s.jsx)("div",{className:ex("description"),children:e.description}):ej}];function e_({row:e}){let{preparedVersions:t}=e;if(!t.length)return null;let r=eb(e,et.Bi.versions);return(0,s.jsx)(q.N,{className:ex("cluster-versions"),href:r,children:(0,s.jsx)(Z.p,{preparedVersions:t})})}function ey({value:e,capacity:t,description:r}){return(0,s.jsxs)(a.s,{direction:"column",gap:2,children:[(0,s.jsx)("div",{children:(0,s.jsx)($.k,{theme:"success",size:"s",value:t?e/t*100:0,className:ex("progress")})}),r]})}function eA({scrollContainerRef:e}){let[t]=(0,w.Nt)(),r=G.ub.useGetClustersListQuery(void 0,{pollingInterval:t}),l=(0,w.YQ)(),o=(0,h.zA)()&&void 0!==g.J.onEditCluster,c=(0,h.oW)()&&void 0!==g.J.onDeleteCluster,u=(0,w.N4)(I),d=(0,w.N4)(J),m=(0,w.N4)(z),p=(0,w.N4)(R),v=n.useMemo(()=>[function({isEditClusterAvailable:e,isDeleteClusterAvailable:t}){return{name:er,header:eh[er],width:320,defaultOrder:A.Ay.ASCENDING,sortAccessor:e=>e.title||e.name,render:({row:r})=>{let n=r.cluster?.Overall,l=r.balancer?(0,ee.Zd)(r.balancer):null;return(0,s.jsxs)(a.s,{direction:"column",gap:.5,children:[(0,s.jsxs)(a.s,{alignItems:"flex-start",justifyContent:"space-between",gap:1,children:[(0,s.jsx)(ew,{row:r}),(0,s.jsxs)(a.s,{gap:1,children:[n?(0,s.jsx)(Y.c.Label,{status:n,size:"xs"}):(0,s.jsx)(Y.c.Label,{status:K.m.Grey,note:r.cluster?.error||eg("tooltip_no-cluster-data"),size:"xs"}),(()=>{let n=[],{onEditCluster:l,onDeleteCluster:a}=g.J;return(e&&l&&n.push({text:eg("edit-cluster"),iconStart:(0,s.jsx)(W.A,{}),action:()=>{l({clusterData:r})}}),t&&a&&n.push({text:eg("remove-cluster"),iconStart:(0,s.jsx)(H.A,{}),action:()=>{a({clusterData:r})},theme:"danger"}),n.length)?(0,s.jsx)(U.r,{items:n,defaultSwitcherProps:{view:"flat-secondary",size:"xs"},size:"s",menuProps:{size:"l"}}):null})()]})]}),l?(0,s.jsxs)(a.s,{gap:.5,alignItems:"center",children:[(0,s.jsx)(i.E,{variant:"caption-2",color:"secondary",children:l}),(0,s.jsx)(F.b,{size:"xs",text:l,className:ex("balancer-copy-icon")})]}):null]})}}}({isEditClusterAvailable:o,isDeleteClusterAvailable:c}),...eN],[c,o]),{columnsToShow:x,columnsToSelect:f,setColumns:b}=(0,P.K)(v,"selectedColumns",eh,em,[er]),j=r.data,{servicesToSelect:N,versions:_}=n.useMemo(()=>{let e=new Set,t=new Set;return(j??[]).forEach(r=>{r.service&&e.add(r.service),r.cluster?.Versions?.forEach(e=>{t.add((0,V.U)(e))})}),{servicesToSelect:Array.from(e).map(e=>({value:e,content:e})),versions:Array.from(t).map(e=>({value:e,content:e}))}},[j]),M=n.useMemo(()=>{var e,t;return e=j??[],t={clusterName:u,status:d,service:m,version:p},e.filter(e=>{let r,s,n;return(0===(r=t.status).length||e.status&&r.includes(e.status))&&(0===(s=t.service).length||e.service&&s.includes(e.service))&&(0===(n=t.version).length||n.some(t=>e.cluster?.Versions?.some(e=>e.startsWith(t))))&&((e,t="")=>{if(!t)return!0;let r=t.toLowerCase(),s=r.split(" "),n=e.title?.toLowerCase().match(/[^\d\s]+|\d+|[^-\s]+|[^_\s]+/g)||[],l=s.every(t=>{let r=T()(t),s=RegExp(`^${r}|[\\s\\-_]${r}`,"i");return e.title&&s.test(e.title)||n.some(e=>e.startsWith(t))}),a=e.preparedVersions.some(e=>e.version.includes(r)),i=!!(e.hosts&&e.hosts[r]);return l||a||i})(e,t.clusterName)})},[u,j,m,d,p]),q=n.useMemo(()=>Array.from(new Set((j??[]).map(e=>e.status).filter(Boolean))).sort().map(e=>({value:e,content:e})),[j]);return(0,s.jsxs)(O.L,{fullHeight:!0,className:ex(null),children:[(0,s.jsx)(O.L.Controls,{renderExtraControls:()=>(0,s.jsx)(D.O,{className:ex("column-setup"),popupWidth:242,items:f,showStatus:!0,onUpdate:b},"TableColumnSetup"),children:(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(L.v,{placeholder:eg("controls_search-placeholder"),endContent:(0,s.jsx)(C.I,{data:y,className:ex("search-icon")}),onChange:e=>{l((0,G.Fe)({clusterName:e}))},value:u,width:320}),(0,s.jsx)(E.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:eg("controls_select-placeholder"),label:eg("controls_status-select-label"),value:d,options:q,onUpdate:e=>{l((0,G.Fe)({status:e}))},width:200}),(0,s.jsx)(E.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:eg("controls_select-placeholder"),label:eg("controls_service-select-label"),value:m,options:N,onUpdate:e=>{l((0,G.Fe)({service:e}))},width:200}),(0,s.jsx)(E.l,{multiple:!0,filterable:!0,hasClear:!0,placeholder:eg("controls_select-placeholder"),label:eg("controls_version-select-label"),value:p,options:_,onUpdate:e=>{l((0,G.Fe)({version:e}))},width:200})]})}),r.isError?(0,s.jsx)(k.o,{error:r.error}):null,(0,s.jsx)(O.L.Table,{scrollContainerRef:e,className:ex("table-wrapper"),children:(0,s.jsx)(S.l,{isLoading:r.isLoading,columnsWidthLSKey:"clustersTableColumnsWidth",wrapperClassName:ex("table"),data:M,columns:x,settings:{...B.N3,dynamicRender:!1},initialSortOrder:{columnId:er,order:A.Ay.ASCENDING}})})]})}var eC=r(21116),eE=JSON.parse('{"page-title_databases":"Databases","page-title_clusters":"Clusters","value_all-clusters":"All Clusters","value_my-databases":"My Databases"}');let ek=(0,ep.g4)("ydb-home-page",{en:eE});var eS=r(22708),eL=r(35448);let eD=(0,j.cn)("ydb-home-page");function eO(){let e=(0,w.YQ)(),t=(0,c.W6)(),r=n.useRef(null),p=(0,eL.N)(),v=(0,h.iB)(),j=(0,N.b)(),[y,A]=(0,w.iK)(b.GS.HOME_PAGE_TAB),{data:C,isLoading:E,error:k}=x.useGetMetaEnvironmentsQuery(void 0,{skip:!v}),S=!v||!E&&(!C||C?.length===0),{databasesPageEnvironment:L,envParamFromQuery:D,handleEnvironmentChange:O}=function(e){let[t,r]=(0,eS.useQueryParam)("env",eS.StringParam),[s,l]=(0,w.iK)(b.GS.DATABASES_PAGE_ENVIRONMENT),a=(0,h.iB)();return{databasesPageEnvironment:n.useMemo(()=>{if(!a)return;if(!e)return s;let r=t??s;if(r&&e?.includes(r))return r;let n=g.J.databasesEnvironmentsConfig?.defaultEnvironment;return n&&e?.includes(n)?n:e?.[0]},[a,t,s,e]),envParamFromQuery:t,handleEnvironmentChange:n.useCallback(e=>{r(e,"replaceIn"),l(e)},[r,l])}}(C),G=n.useMemo(()=>v?j?m.Jd.parse(p??y):"databases":"clusters",[j,p,y,v]),M="clusters"===G?ek("page-title_clusters"):ek("page-title_databases"),T=g.J.homePageTitle??M,I=(0,_.Pq)(k),J=I?g.J.clusterOrDatabaseAccessError:void 0;n.useEffect(()=>{e((0,f.g)("homePage",{}))},[e]),n.useEffect(()=>{"databases"===G&&C&&C?.length>1&&L&&L!==D&&O(L)},[G,C,L,D,O]);let z=n.useMemo(()=>{let e=g.J.databasesEnvironmentsConfig?.getEnvironmentTitle;return C?.map(t=>({title:e?.(t)??t,value:t}))},[C]),R=n.useCallback(e=>{A(e);let r=(0,m.Q5)({activeTab:e});t.replace(r)},[t,A]),B=n.useCallback(e=>{let t=g.J.databasesEnvironmentsConfig?.getEnvironmentDomain?.(e);if(t){let e=new URL((0,m.Ad)(),t).toString();window.location.href=e}else O(e)},[O]),P=()=>"clusters"===G||!C||C?.length<=1?null:(0,s.jsx)("div",{children:(0,s.jsx)(l.x,{size:"l",value:L,onUpdate:B,children:z?.map(({title:e,value:t})=>(0,s.jsx)(l.x.Option,{value:t,children:e},t))})});return(0,s.jsx)(u.A,{error:I?k:void 0,...J,errorPageTitle:T,children:(0,s.jsxs)(d.r,{loading:E,children:[(0,s.jsx)(o.mg,{children:(0,s.jsx)("title",{children:M})}),(0,s.jsxs)(a.s,{direction:"column",className:eD(),ref:r,children:[S?(0,s.jsx)(a.s,{gap:4,direction:"column",className:eD("controls-wrapper"),children:(0,s.jsx)(i.E,{variant:"header-1",children:T})}):j?(0,s.jsxs)(a.s,{gap:4,className:eD("controls-wrapper"),children:[(0,s.jsxs)(l.x,{size:"l",value:G,onUpdate:R,children:[(0,s.jsx)(l.x.Option,{value:"clusters",children:ek("value_all-clusters")}),(0,s.jsx)(l.x.Option,{value:"databases",children:ek("value_my-databases")})]}),P()]}):(0,s.jsxs)(a.s,{gap:4,direction:"column",className:eD("controls-wrapper"),children:[(0,s.jsx)(i.E,{variant:"header-1",children:T}),P()]}),(0,s.jsx)(a.s,{className:eD("content-wrapper"),children:(()=>{let e=(0,m.a3)((0,m.ZD)()).pathname,t=(0,m.a3)((0,m.Ad)()).pathname;if(S&&"clusters"!==G)return(0,s.jsx)(c.rd,{to:e});if(G!==p){let e=(0,m.a3)((0,m.Q5)({activeTab:G})).pathname;return(0,s.jsx)(c.rd,{to:e})}return(0,s.jsxs)(c.dO,{children:[(0,s.jsx)(c.qh,{path:e,children:(0,s.jsx)(eA,{scrollContainerRef:r})}),(0,s.jsx)(c.qh,{path:t,children:(0,s.jsx)(eC.A,{clusterName:void 0,environmentName:L,isMetaDatabasesAvailable:!0,showDomainDatabase:!0,scrollContainerRef:r,additionalTenantsProps:void 0})})]})})()})]})]})})}},79121:function(e,t,r){r.d(t,{f:()=>i,y:()=>o});var s=r(9500),n=r(9259),l=r(74848);r(96540);let a=e=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",...e,children:(0,l.jsx)("path",{d:"M14.195 11.375H3.125v-7.82a.33.33 0 0 0-.305-.305H1.805a.31.31 0 0 0-.305.305v9.14c0 .178.127.305.305.305h12.39a.31.31 0 0 0 .305-.305V11.68a.33.33 0 0 0-.305-.305m-3.25-5.687L8.812 7.109 6.63 4.24c-.127-.178-.38-.178-.508.026L3.937 7.922v2.64h9.75l-2.285-4.748c-.101-.177-.304-.228-.457-.127"})});function i(e,t,r){if(!e)return[];let l=[];if(e.getMonitoringLink){let s=e.getMonitoringLink(t,r);s&&l.push({title:(0,n.A)("field_monitoring-link"),url:s,icon:a})}if(e.getLogsLink){let r=e.getLogsLink(t);r&&l.push({title:(0,n.A)("field_logs-link"),url:r,icon:s.A})}return e.getLinks&&l.push(...e.getLinks(t,r)),l}function o(e,t,r){if(!e)return[];let l=[];if(e.getLogsLink){let r=e.getLogsLink(t);r&&l.push({title:(0,n.A)("field_logs-link"),url:r,icon:s.A})}return e.getLinks&&l.push(...e.getLinks(t,r)),l}},47037:function(e,t,r){r.d(t,{k:()=>d});var s=r(74848),n=r(96540);let l=(0,r(54699).om)("progress");function a(e){let{text:t,offset:r=0}=e;return t?(0,s.jsx)("div",{className:l("text-inner"),style:{transform:`translateX(calc(var(--g-flow-direction) * ${-r}%))`},children:t}):null}function i({item:e}){let{value:t,color:r,className:n,theme:a,title:i,content:o,loading:c}=e,u={loading:c};return(void 0===r&&(u.theme=a||"default"),Number.isFinite(t))?(0,s.jsx)("div",{className:l("item",u,n),style:{width:`${t}%`,backgroundColor:r},title:i,children:o}):null}function o(e){return e<100?e-100:0}function c(e){let{stack:t,stackClassName:r,value:n,text:c}=e,u=o(n||t.reduce((e,{value:t})=>e+t,0));return(0,s.jsxs)("div",{className:l("stack",r),style:{transform:`translateX(calc(var(--g-flow-direction) * ${u}%))`},children:[(0,s.jsx)("div",{className:l("item"),style:{width:`${-u}%`}}),t.map((e,t)=>(0,s.jsx)(i,{item:e},t)),(0,s.jsx)(a,{offset:u,text:c})]})}function u(e){let{value:t,loading:r,text:n}=e,i=o(t);return Number.isFinite(t)?(0,s.jsx)("div",{className:l("item",{theme:function(e){let{theme:t,colorStops:r,colorStopsValue:s,value:n}=e;if(r){let e=r.find((e,t)=>{let l="number"==typeof s?s:n,a=t>1?r[t-1].stop:0,i=t<r.length-1?e.stop:100;return l>=a&&l<=i});return e?e.theme:t}return t}(e),loading:r}),style:{transform:`translateX(calc(var(--g-flow-direction) * ${i}%))`},children:(0,s.jsx)(a,{offset:i,text:n})}):null}let d=n.forwardRef(function(e,t){let{text:r="",theme:n="default",size:a="m",loading:i=!1,className:o,qa:d}=e,m={...e,text:r,theme:n,size:a,loading:i};return(0,s.jsxs)("div",{ref:t,className:l({size:a},o),"data-qa":d,children:[(0,s.jsx)("div",{className:l("text"),children:r}),void 0!==m.stack?(0,s.jsx)(c,{...m}):(0,s.jsx)(u,{...m})]})})}}]);