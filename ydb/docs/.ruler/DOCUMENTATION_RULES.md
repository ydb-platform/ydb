# Правила проверки документации для ИИ-агента

## 1. Первый абзац определяет понятие

**Правило:** Первый абзац концептуальной статьи должен содержать определение описываемого понятия через более общие, широко известные термины.

**Проверка:**
1. Прочитать заголовок статьи — определить описываемое понятие.
2. Прочитать первый абзац.
3. Проверить: содержит ли он ответ на вопрос «что это такое?», сформулированный через термины, не требующие знания данного продукта?
4. Если первый абзац начинается с перечисления use-cases, примеров, инструкций или команд — это нарушение. Определение должно быть до них.

**Пример нарушения:**
> «Потоковые запросы используются для: мониторинга, агрегации метрик, трансформации данных...»

Нет ответа на вопрос «что такое потоковый запрос». Начинается сразу с применений.

**Пример исправления:**
> «Потоковый запрос — это тип запроса, предназначенный для непрерывной обработки неограниченного потока данных ([stream processing](https://en.wikipedia.org/wiki/Stream_processing)). В отличие от обычных запросов, потоковый запрос не завершается после получения результата, а работает постоянно.»

---

## 2. Постановка задачи перед техническим содержимым

**Правило:** Перед первым блоком кода, схемой или техническим описанием в статье должен быть текст, объясняющий, какую задачу решает описываемое.

**Проверка:**
1. Найти первый блок кода, таблицу параметров или техническую схему в статье.
2. Прочитать текст перед ним.
3. Проверить: содержит ли предшествующий текст описание задачи/проблемы, которую этот код/схема решает?
4. Если статья начинается с кода, списка параметров или шагов без объяснения «зачем» — это нарушение.

---

## 3. Термин определён до первого использования

**Правило:** Любой термин, параметр, опция или концепция должны быть определены или иметь ссылку на определение до первого содержательного использования в тексте.

**Проверка:**
1. Составить список всех специфических терминов, параметров и концепций, встречающихся в статье.
2. Для каждого термина найти первое место, где он используется содержательно (не в заголовке и не в определении).
3. Проверить: есть ли до этого места определение или ссылка на страницу с определением?
4. Отдельно проверить примеры кода: если в коде используется параметр (например, `FORCE = TRUE`), он должен быть описан в разделе синтаксиса или параметров этой же статьи.

---

## 4. Логическая связность разделов

**Правило:** Каждый раздел статьи должен логически следовать из контекста. Читатель должен понимать, зачем этот раздел здесь, из его заголовка и первого предложения.

**Проверка:**
1. Для каждого раздела (заголовка H2/H3) прочитать его заголовок и первое предложение.
2. Проверить: понятно ли из них, какое отношение раздел имеет к теме статьи (определённой в заголовке H1)?
3. Если раздел посвящён побочной или смежной теме — есть ли вводное предложение, объясняющее связь?
4. Если связь не прослеживается — раздел либо нуждается во вводном предложении, либо должен быть вынесен в отдельную статью.

---

## 5. Корректная иерархия в перечислениях

**Правило:** В списках и перечислениях элемент, являющийся частным случаем другого элемента того же списка, не должен стоять на одном уровне с ним.

**Проверка:**
1. Найти все маркированные/нумерованные списки в статье.
2. Для каждой пары элементов в списке проверить: является ли один элемент подвидом, частным случаем или подмножеством другого?
3. Если да — это нарушение. Частный случай должен быть оформлен как подпункт или иметь пометку «частный случай X».

**Пример нарушения:**
> Источники данных:
> - Топики
> - CDC
> - S3

CDC является частным случаем топиков, но стоит на том же уровне.

---

## 6. Ограничения сопровождаются объяснением

**Правило:** Каждое упомянутое ограничение должно сопровождаться объяснением причины, либо пометкой о его статусе (временное / архитектурное / планируется к устранению).

**Проверка:**
1. Найти все места, где описаны ограничения (слова «не поддерживается», «нельзя», «не допускается», блоки `warning`/`alert`).
2. Для каждого ограничения проверить: есть ли после него хотя бы одно предложение, объясняющее причину или статус?
3. Если ограничение дано без объяснения — это нарушение.

**Пример нарушения:**
> «Операция INSERT INTO для таблиц не поддерживается.»

Нет объяснения — почему? Это принципиальное ограничение или временное?

---

## 7. Примеры кода не содержат необъяснённых конструкций

**Правило:** Каждая конструкция, функция или оператор в примере кода должны быть объяснены на текущей странице или иметь ссылку на страницу с объяснением.

**Проверка:**
1. Для каждого блока кода составить список использованных конструкций, функций, ключевых слов и операторов.
2. Для каждого элемента проверить: объяснён ли он в тексте статьи (до или после примера) или имеет ссылку на документацию?
3. Если элемент не объяснён и не имеет ссылки — рекомендовать либо упростить пример, убрав этот элемент, либо добавить ссылку.

---

## 8. Синтаксическая корректность и согласованность примеров

**Правило:** Примеры кода должны быть синтаксически корректными и соответствовать описанному на той же странице синтаксису. Порядок конструкций в примере должен совпадать с порядком в описании синтаксиса.

**Проверка:**
1. Если на странице есть раздел «Синтаксис» с шаблоном — сравнить каждый пример с этим шаблоном.
2. Проверить: совпадает ли порядок ключевых слов и блоков в примере с порядком в описании синтаксиса?
3. Проверить: нет ли в примерах незакрытых скобок, пропущенных ключевых слов, неверных разделителей?
4. Если пример — фрагмент, а не полная команда, это должно быть явно указано в тексте.

---

## 9. Полнота описания поведения

**Правило:** Если описывается механизм или поведение системы, текст должен охватывать не только основной сценарий, но и пограничные: что происходит при обновлении данных, при ошибке, при перезапуске. Если поведение в этих случаях не определено — написать это явно.

**Проверка:**
1. Найти все места, где описано поведение системы (загрузка данных, обработка, кэширование и т.п.).
2. Для каждого такого описания задать вопросы:
   - Что происходит, если входные данные изменились?
   - Что происходит при ошибке?
   - Что происходит при перезапуске?
3. Если ответов нет в тексте — это нарушение.

**Пример нарушения:**
> «Справочник загружается в память и присоединяется к событиям через JOIN.»

Не сказано: обновляется ли справочник? Что будет, если файл в S3 изменился? Что будет при перезапуске запроса?

---

## 10. Предусловия сопровождаются способом проверки

**Правило:** Если текст упоминает предусловие, настройку или зависимость, должен быть дан способ проверить, что предусловие выполнено, или ссылка на инструкцию.

**Проверка:**
1. Найти все упоминания предусловий (слова «требуется», «необходимо», «должен быть включён», «должен существовать», разделы «Предварительные условия»).
2. Для каждого предусловия проверить: дана ли команда, запрос или ссылка на инструкцию, позволяющая проверить/обеспечить его выполнение?
3. Если предусловие указано, но нет способа его проверить — это нарушение.

**Пример нарушения:**
> «Для выполнения примеров вам потребуется включённый флаг `enable_streaming_queries`.»

Не сказано, как проверить, включён ли он.

---

## 11. Разграничение альтернативных способов

**Правило:** Если в документации описано несколько способов решить одну задачу, должно быть явно указано, чем они отличаются и когда какой применять.

**Проверка:**
1. Найти места, где описываются два или более способа выполнить похожее действие (в рамках одной статьи или связанных статей).
2. Проверить: есть ли текст, объясняющий разницу между способами и критерии выбора?
3. Если альтернативы просто перечислены без рекомендации — это нарушение.

---

## 12. Точность формулировок

**Правило:** (а) Существительные, обозначающие сущности системы, должны быть конкретными — если речь об объекте конкретной системы, система должна быть названа. (б) Глаголы должны точно описывать действие. (в) Определение не должно содержать определяемый термин (тавтология).

**Проверка:**
1. Найти существительные, обозначающие сущности: «таблица», «запрос», «сервер» и т.п. Проверить: можно ли их неоднозначно интерпретировать? Если да — нужно уточнение (например, «таблица» -> «таблица YDB»).
2. Найти глаголы в ключевых утверждениях. Проверить: точно ли глагол описывает действие? («Запросы управляются через YQL» — управляются? создаются? выполняются?)
3. Найти определения. Проверить: не содержит ли определение определяемый термин? («Потоковые запросы предназначены для потоковой обработки» — тавтология.)

---

## 13. Визуальная консистентность

**Правило:** Все визуальные элементы (схемы, диаграммы, скриншоты) должны быть выполнены в едином стиле, принятом в данной документации.

**Проверка:**
1. Если в статье есть изображения — сравнить их стиль (цветовая палитра, шрифты, уровень детализации, формат подписей) с изображениями в других статьях той же документации.
2. Если стиль отличается — отметить как нарушение.

---

## Приоритеты при проверке

| Приоритет | Правила | Почему |
|-----------|---------|--------|
| Критический | 3, 7, 8 | Ошибки в терминологии и коде вводят читателя в заблуждение |
| Высокий | 1, 2, 6, 9 | Структурные проблемы, из-за которых читатель не понимает текст |
| Средний | 4, 5, 10, 11, 12 | Проблемы, затрудняющие использование документации |
| Низкий | 13 | Визуальные несоответствия |

## Формат вывода

Сообщение обязательно должно включать полный путь к файлу документации.
