## Правила форматирования

Формат "подробнее о" должен быть оформлен в виде блока "Подробнее о функциях" или "Где", за чем следует список с маркером в виде "-", как ниже


```
Подробнее о функциях:

- [String::SplitToList](../../yql/reference/udf/list/string.md#splittolist)
- [DictLookup](../../yql/reference/builtins/dict.md#dictlookup).
```

## Правила форматирования sql-кода

При форматировании блоков SQL-кода используй диалект yql

То есть блок sql-кода должен выглядеть следующим образом:

```yql
<sql-code>
```

## Markdown-линтинг

После написания или редактирования `.md`-файлов агент обязан проверить результат на соответствие следующим правилам markdown-линтера. Проверяются только изменённые файлы.

### MD032: Пустые строки вокруг списков

Перед первым элементом списка (`- `, `* `, `1. `) и после последнего элемента списка должна быть пустая строка (или начало/конец файла, заголовок, блок кода).

Нарушение:
```
Подробнее о функциях:
- [Func1](link1)
- [Func2](link2).
```

Правильно:
```
Подробнее о функциях:

- [Func1](link1)
- [Func2](link2).
```

### MD051: Валидность якорей ссылок

Каждый фрагмент ссылки (часть после `#`) должен соответствовать существующему якорю на целевой странице. Якоря задаются двумя способами:

1. Явно: `## Заголовок {#my-anchor}` — якорь `#my-anchor`.
2. Автоматически: из текста заголовка (пробелы → `-`, спецсимволы удаляются, приводится к нижнему регистру).

Проверка: для каждой ссылки вида `[текст](файл.md#якорь)` убедиться, что в целевом файле есть заголовок с таким якорем. Если якоря нет — либо исправить ссылку, либо добавить явный якорь `{#...}` к заголовку.

### MD009: Пробелы в конце строки

Строки не должны заканчиваться пробелами (trailing whitespace). Исключение: два пробела для принудительного переноса строки (line break), но в этом проекте лучше использовать пустую строку для разделения абзацев.

### Проверка ссылок и якорей

Агент **обязан** проверять все ссылки и якоря в изменённых файлах перед коммитом. Проверяются два аспекта:

**1. Существование целевого файла.** Для каждой относительной ссылки вида `[текст](путь/к/файлу.md)` убедиться, что файл по указанному пути реально существует. Путь разрешается относительно директории текущего файла.

Нарушение:
```
Подробнее: [чекпоинты](../streaming-query/checkpionts.md)
```
Файл `checkpionts.md` не существует (опечатка), правильно — `checkpoints.md`.

**2. Существование якоря в целевом файле.** Для каждой ссылки с фрагментом `[текст](файл.md#якорь)` открыть целевой файл и убедиться, что в нём есть заголовок с соответствующим якорем. Якоря задаются:

- Явно: `## Заголовок {#my-anchor}` — якорь `my-anchor`.
- Автоматически: из текста заголовка без явного `{#...}` (пробелы → `-`, спецсимволы удаляются, нижний регистр).

Если якорь не найден — либо исправить фрагмент в ссылке, либо добавить явный якорь `{#...}` к заголовку в целевом файле.

**3. Ссылки внутри одного файла.** Для ссылок вида `[текст](#якорь)` убедиться, что якорь существует в текущем файле.

### Порядок проверки

1. Прочитать изменённый файл целиком.
2. Найти все списки (последовательности строк, начинающихся на `- `, `* `, `1. `). Для каждого списка проверить: есть ли пустая строка до и после (MD032).
3. Найти все ссылки (относительные и внутренние). Для каждой проверить:
   - существование целевого файла (разрешить путь относительно директории текущего файла);
   - существование якоря в целевом файле (если ссылка содержит `#`).
4. Проверить отсутствие trailing whitespace (MD009).
5. Исправить найденные нарушения перед коммитом.
