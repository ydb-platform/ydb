# Концепции резервного копирования

В этом разделе рассматриваются концепции и технологии резервного копирования, доступные в {{ ydb-short-name }}.

{{ ydb-short-name }} предоставляет несколько возможностей резервного копирования, которые можно классифицировать двумя способами: по типу хранилища и по методу резервного копирования.

## Классификация по типу хранилища {#by-storage}

Резервные копии могут храниться в различных местах в зависимости от ваших требований:

#|
|| **Тип хранилища** | **Тип резервной копии** | **Защита от отказа кластера** | **Сценарии использования** | **Как использовать** ||
|| S3-совместимое хранилище | Полные резервные копии | Да | Крупная миграция данных, архивирование, передача производственных данных | [`ydb export s3`](../reference/ydb-cli/export-import/export-s3.md) / [`ydb import s3`](../reference/ydb-cli/export-import/import-s3.md) ||
|| Файловая система | Полные резервные копии | Да | Локальная разработка, тестирование, небольшие производственные среды | [`ydb tools dump`](../reference/ydb-cli/export-import/tools-dump.md) / [`ydb tools restore`](../reference/ydb-cli/export-import/tools-restore.md) ||
|| Кластерное хранилище | Полные и инкрементальные резервные копии | Нет | Производственные среды с регулярным расписанием резервного копирования, большие наборы данных | [Коллекции резервных копий](datamodel/backup-collection.md) ||
|#

{% note info %}

Резервные копии в кластере используют встроенную репликацию и отказоустойчивость {{ ydb-short-name }}, но не защищают от отказа всего кластера. Для аварийного восстановления комбинируйте коллекции резервных копий в кластере с регулярным экспортом во внешнее хранилище.

{% endnote %}

## Классификация по методу резервного копирования {#by-method}

Резервные копии могут создаваться различными методами:

#|
|| **Тип резервной копии** | **Варианты хранилища** | **Сценарии использования** | **Поддерживаемые таблицы** ||
|| Полная резервная копия | S3, файловая система, кластер | Разовые резервные копии, миграция базы данных, тестирование | Все типы таблиц ||
|| Инкрементальная резервная копия | Кластер (с возможностью экспорта в S3/файловую систему) | Регулярное резервное копирование, большие наборы данных с низкой частотой изменений | Только [строковые таблицы](datamodel/table.md#row-oriented-tables) ||
|#

Инкрементальные резервные копии эффективнее по использованию хранилища, чем множество полных резервных копий, так как захватывают только изменения с момента предыдущей резервной копии.

## Коллекции резервных копий {#backup-collections}

[Коллекции резервных копий](datamodel/backup-collection.md) — это [схемные объекты](datamodel/index.md), которые организуют полные и инкрементальные резервные копии структурированным образом, обеспечивая эффективное восстановление на момент времени для производственных нагрузок.

Ключевые характеристики:

- **Кластерное хранение с возможностью экспорта**: Коллекции хранятся в кластере и могут быть экспортированы во внешнее хранилище с помощью операций [export/import](../reference/ydb-cli/export-import/index.md) или [dump/restore](../reference/ydb-cli/export-import/tools-dump.md).
- **Согласованные снимки**: Все таблицы в коллекции создаются из одного глобального снимка.
- **Поддержка инкрементов**: После начальной полной резервной копии инкрементальные резервные копии захватывают только изменения.

## См. также

- [Коллекции резервных копий](datamodel/backup-collection.md): Справочник по схемному объекту и детали архитектуры
- [Руководство по резервному копированию и восстановлению](../devops/backup-and-recovery.md): Практическое руководство
- [Справочник по export/import](../reference/ydb-cli/export-import/index.md): Команды CLI для операций резервного копирования
- Справочник YQL:
  - [`CREATE BACKUP COLLECTION`](../yql/reference/syntax/create-backup-collection.md)
  - [`BACKUP`](../yql/reference/syntax/backup.md)
  - [`RESTORE`](../yql/reference/syntax/restore-backup-collection.md)
  - [`DROP BACKUP COLLECTION`](../yql/reference/syntax/drop-backup-collection.md)
