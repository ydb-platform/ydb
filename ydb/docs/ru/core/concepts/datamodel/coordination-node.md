# Узел координации

Узел координации (coordination node) — это объект в {{ ydb-short-name }}, который позволяет клиентским приложениям распределённо координировать свои действия. Типовые сценарии использования узлов координации:

* Распределённые [семафоры](https://ru.wikipedia.org/wiki/Семафор_(программирование)) и [мьютексы](https://ru.wikipedia.org/wiki/Мьютекс).
* Обнаружение сервисов (service discovery).
* Выбор лидера (leader election).
* Очереди задач (task queue).
* Публикация небольших объёмов данных с возможностью получать оповещения об изменениях.
* Эфеменрные блокировки произвольных заранее неизвестных сущностей.

## Семафоры {#semaphore}

Узлы координации позволяют создавать внутри себя семафоры и управлять ими. Типовые операции с семафорами:

* Создание (create);
* Захват (acquire);
* Освобождение (release);
* Получение содержимого (describe);
* Удаление (delete).

К семафору может быть приложен счётчик, который ограничивает количество одновременных его захватов, а также небольшой объём произвольных данных.

{{ ydb-short-name }} поддерживает два типа семафоров: персистентные и эфемерные. Персистентный семафор перед захватом необходимо создать, он будет существовать либо до момента его явного удаления, либо до удаления узла координации, в котором он был создан. Эфемерные семафоры автоматически создаются в момент их первого захвата и удаляются при последнем освобождении, что удобно использовать, например, в сценариях распределённой блокировки.

{% note info %}

Семафоры в {{ ydb-short-name }} **не** являются рекурсивными. Таким образом, захват и освобождение семафора являются идемпотентными операциями.

{% endnote %}

## Использование {#usage}

Работа с узлами координации и семафорами осуществляется через [отдельные методы в {{ ydb-short-name }} SDK](../../reference/ydb-sdk/coordination.md).

## Аналогичные системы {#similar-systems}

С помощью узлов координации {{ ydb-short-name }} можно решать задачи, которые традиционно выполняются с помощью таких систем, как [Apache Zookeeper](https://zookeeper.apache.org/), [etcd](https://etcd.io/), [Consul](https://www.consul.io/) и других. Если в проекте используется {{ ydb-short-name }} для хранения данных, а также одна из этих сторонних систем для координации, то переход на узлы координации {{ ydb-short-name }} может сократить количество систем, которые необходимо эксплуатировать и поддерживать.