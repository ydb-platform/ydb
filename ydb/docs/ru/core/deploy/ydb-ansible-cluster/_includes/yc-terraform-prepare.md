## Создание инфраструктуры для {{ ydb-short-name }} в Яндекс Облаке с помощью Terraform { #infra-create }

{% note info %}

Для создания инфраструктуры в Яндекс Облаке потребуется:
* Активный платёжный аккаунт с балансом достаточным для создания и работы 10 виртуальных машин. 
* Сервисный аккаунт с ролями: `vpc.admin`, `resource-manager.admin`, `compute.admin`, `admin`.
* Авторизованный ключ и API-ключ для работы Terraform с Яндекс Облаком.  
* Увеличенные лимиты ресурсов Яндекс Облако:
    + `Compute Cloud`:
        - Количество vCPU виртуальных машин – 130 (стандартное значение 48)
        - Общий объём SSD-дисков – 1700 ГБ (стандартное значение 1000 ГБ)
    + `Virtual Private Cloud`:
        - Количество всех публичных IP-адресов – 15 (стандартное значение 8)

{% endnote %}

### Создание инфраструктуры в облаке { #ydb-yc-infra-create }

После установки актуальных значений переменных группы `SSH credentials zone` – выполните команду `terraform plan`, которая проверит синтаксис сценария развертывания инфраструктуры и составит план его выполнения. Затем выполняется команда `terraform apply`, которая создаёт реальные ресурсы в облаке.

В результате исполнения Terraform сценария будут созданы десять виртуальных машин (девять виртуальных машин для установки YDB и одна виртуальная машина для Ansible проекта):

![ydb-9-nodes](../_assets/YDB-9-nodes.png)

Также будет создана внутренняя DNS-зона:

![DNS](../_assets/DNS.png)

### Проверка доступности виртуальных машин между собой { #vm-network-check }

Для проверки доступности виртуальных машин между собой – подключитесь по SSH к любой созданной с помощью скаченного Terraform сценария виртуальной машине и выполните команду `ping <another FQDN YDB VM>` – в терминал будет выведен отчет о соединении:
```
$ ping static-node-2.ydb-cluster.com
PING static-node-2.ydb-cluster.com (10.128.0.22) 56(84) bytes of data.
64 bytes from static-node-2.ydb-cluster.com (10.128.0.22): icmp_seq=1 ttl=61 time=1.21 ms
...
```