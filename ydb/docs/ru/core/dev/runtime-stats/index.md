# Статистика выполнения запросов и её анализ

При выполнении пользовательского запроса {{ ydb-short-name }} собирает статистику его выполнения. Она помогает исследовать план выполнения запроса, находить и устранять узкие места, например, выбирая более оптимальные решения. В результате можно существенно сократить время работы запроса. Особенно это проявляется в аналитических (OLAP) запросах.

Статистика рабоы запроса доступна вместе с планом его выполнения в формате JSON. Большое количество метрик затрудняет его анализ и понимание, который, поэтому была разработка визуализация в графическом формате SVG. В данном разделе содержится информация об этом визуальном формате.

В качестве примера в данном разделе используется набор данных от промышленного бенчмарка TPC-H scale 100. Описание структуры таблиц и связей между ними вы можете найти в спецификации данного стандарта. Для иллюстрации мы использовали некоторые адаптированные из бенчмарка запросы, а также оригинальные, текст которых был специально подготовлен для иллюстрации материала. Текст каждого запроса приведён рядом с его планом выполнения.

Данный раздел рассчитан, главным образом, на анализ сложных аналитических запросов. Поэтому материал будет подразумевать колоночный формат таблиц хранения данных.

Формат графического представления спроектирован таким образом, чтобы акцентировать внимание на наиболее нужных и полезных элементах. При этом опытный разработчик сможет получить из него больше информации, обращая внимание на дополнительные элементы и их свойства.

- [Как получить графическое представление плана](how-to-get.md)
    - [UI](how-to-get.md#ui)
    - [ydb cli](how-to-get.md#cli)
    - [ydb_int](how-to-get.md#ydb_int)
    - [kqprun](how-to-get.md#kqprun)
- [Структура плана запроса](structure.md)
    - [Стадии](structure.md#stages)
    - [Каналы связи](structure.md#connections)
    - [Объединение](structure.md#join)
    - [Множественные выходы](structure.md#multiout)
    - [Составные графы](structure.md#complex)
- [Визуализация метрик](metrics.md)
    - [Параллельность](metrics.md#parallelism)
    - [Агрегаты](metrics.md#aggregates)
    - [Масштаб метрик](metrics.md#scale)
    - [Перекос данных](metrics.md#dataskew)
    - [Перекос времени](metrics.md#timeskew)
    - [Потребление CPU](metrics.md#cpu)
    - [Потребление памяти](metrics.md#memory)
