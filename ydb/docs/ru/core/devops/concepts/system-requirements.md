# Системные требования и рекомендации для {{ ydb-short-name }}

В данном разделе приводятся рекомендации для развёртывания кластеров {{ ydb-short-name }}, применимые вне зависимости от выбранного способа управления инфраструктурой ([Ansible](../deployment-options/ansible/index.md), [Kubernetes](../deployment-options/kubernetes/index.md) или [вручную](../deployment-options/manual/index.md)).

## Аппаратная конфигурация {#hardware}

Необходимое количество серверов и дисков определяется требованиями к отказоустойчивости. Подробнее читайте в разделе [{#T}](../../concepts/topology.md).

* **Процессор (CPU)**

  {{ ydb-short-name }} сервер может быть запущен только на процессорах с архитектурой x86-64 с поддержкой инструкций AVX2: Intel Haswell (4-е поколение) и более поздние, AMD EPYC и более поздние.

  Архитектура ARM в настоящее время не поддерживается.

* **Оперативная память**

  Рекомендуется использовать оперативную память с поддержкой коррекции ошибок (ECC) для защиты от аппаратных сбоев.

* **Дисковая подсистема**

  {{ ydb-short-name }} сервер может быть запущен на серверах с дисками любого типа (HDD/SSD/NVMe). Однако рекомендуется использовать диски SSD/NVMe для достижения большей производительности.

  {% include [_includes/storage-device-requirements.md](../../_includes/storage-device-requirements.md) %}

  {{ ydb-short-name }} не использует файловую систему для хранения данных и работает с диском напрямую. Поэтому не следует монтировать файловую систему или выполнять другие операции с разделом, который использует {{ ydb-short-name }}. Также не рекомендуется делить блочное устройство с другими процессами — это может привести к существенному снижению производительности.

  Работоспособность и производительность {{ ydb-short-name }} не тестировались ни на каких видах виртуальных или сетевых устройств хранения.

  При планировании объёма хранилища следует учитывать, что {{ ydb-short-name }} использует часть дискового пространства для своих внутренних нужд. Так, например, на кластере среднего размера из 8 узлов можно ожидать потребления порядка 100 ГБ на весь кластер под статическую группу. На большом кластере с >1500 узлов — около 200 ГБ. Также имеются системные логи объёмом 25.6 ГБ на каждом Pdisk и системная область на каждом Pdisk. Её размер зависит от объёма Pdisk, но составляет не менее 0.2 ГБ.

  Также диск используется для [спиллинга](../../concepts/glossary.md#spilling) — механизма управления памятью, который позволяет временно сохранять промежуточные результаты выполнения запросов на диск при нехватке оперативной памяти. Это также важно учитывать при планировании объёма диска. Подробная конфигурация спиллинга описана в разделе [Конфигурация спиллинга](../../reference/configuration/spilling.md).

## Программная конфигурация {#software}

{{ ydb-short-name }} сервер может быть запущен на серверах с операционной системой Linux с ядром версии 4.19 и выше и libc версии 2.30. Например, Ubuntu 20.04, Debian 11, Fedora 34 или более новые версии. {{ ydb-short-name }} использует аллокатор памяти [TCMalloc](https://google.github.io/tcmalloc), для его эффективной работы рекомендуется [включить](https://google.github.io/tcmalloc/tuning.html#system-level-optimizations) Transparent Huge Pages и Memory overcommitment.



Если сервер имеет более 32 ядер CPU, для повышения производительности {{ ydb-short-name }} динноды следует запускать в раздельных taskset/cpuset, размером от 10 до 32 ядер. Например, в случае 128 ядер оптимально запустить 4 динноды: каждую в своём taskset, размером 32 ядра.

Операционные системы macOS и Windows в данный момент не поддерживаются для запуска серверной части {{ ydb-short-name }}. Тем не менее, для целей разработки и функционального тестирования допустимо запускать {{ ydb-short-name }} на них в [Docker-контейнере](../../quickstart.md).