---
title: "YDB. Ответы на вопросы"
description: "Что такое YDB? Для каких задач стоит использовать YDB, а для каких виртуальные машины с базами данных? Какую часть работы по управлению и сопровождению баз данных берет на себя YDB? Ответы на эти и другие вопросы в данной статье."
---

# Общие вопросы про {{ ydb-short-name }}

## Что такое {{ ydb-short-name }}? {#what-is-ydb}

{{ ydb-short-name }} — это распределенная отказоустойчивая Distributed SQL СУБД. {{ ydb-short-name }} обеспечивает высокую доступность и масштабируемость, и, в то же время, строгую консистентность и поддержку ACID-транзакций. Для запросов используется диалект SQL (YQL).

{{ ydb-short-name }} — это полностью управляемая база данных, для создания инстанса базы данных используется сервис управления базами данных {{ ydb-short-name }}.

## Какие возможности предоставляет {{ ydb-short-name }}? {#ydb-features}

{{ ydb-short-name }} обеспечивает высокую доступность и сохранность данных благодаря синхронной репликации в трех зонах доступности. Также {{ ydb-short-name }} следит за равномерным распределением нагрузки на доступные аппаратные ресурсы. Это значит, что не нужно заказывать ресурсы, {{ ydb-short-name }} автоматически выделяет и освобождает ресурсы, исходя из пользовательской нагрузки.

## Какая модель консистентности используется в {{ ydb-short-name }}? {#ydb-consistency}

Для чтения данных {{ ydb-short-name }} использует модель строгой консистентности (непротиворечивости) данных.

## Как проектировать первичный ключ? {#create-pk}

Чтобы правильно спроектировать первичный ключ, стоит придерживаться следующих правил:

* Необходимо избегать ситуаций, когда основная часть нагрузки приходится на одну [партицию](../../concepts/datamodel/table.md#partitioning) таблицы. При равномерной нагрузке проще достигается высокая общая производительность.

  Как следствие этого правила, не стоит в качестве первичного ключа таблицы использовать монотонно возрастающую последовательность, например, timestamp.
* Чем меньше партиций таблиц будет задействовано во время исполнения запроса, тем быстрее он будет исполнен. Чтобы достичь большей производительности стоит руководствоваться правилом: один запрос — одна партиция.
* Необходимо избегать ситуаций, при которых какая-то малая часть БД нагружена существенно больше, чем остальные части БД.

Подробнее читайте в разделе [{#T}](../../dev/primary-key/index.md).

## Как равномерно распределить нагрузку по партициям таблицы? {#balance-shard-load}

Для равномерного распределения нагрузки по партициям таблиц и увеличения общей производительности БД, можно использовать следующие техники:

* Для избежания использования монотонно возрастающих значений первичного ключа можно:
  * изменить порядок следования его компонентов;
  * использовать хеш от значений ключевых колонок в качестве первичного ключа.
* Необходимо уменьшать количество партиций таблиц, задействованных в одном запросе.

Подробнее читайте в разделе [{#T}](../../dev/primary-key/index.md).

## Можно ли использовать NULL в ключевой колонке? {#null}

В {{ ydb-short-name }} все колонки, включая ключевые, могут содержать значение `NULL`, однако использовать `NULL` в качестве значений в ключевых колонках не рекомендуется.

По стандарту языка SQL (ISO/IEC 9075) значение `NULL` нельзя сравнивать с другими значениями, вследствие чего использование лаконичных конструкций SQL с простыми операторами сравнения может приводить, например, к тому, что строки, содержащие значение NULL, могут быть пропущены при фильтрации.

## Существует ли оптимальный размер строки базы данных? {#string-size}

Для достижения высокой производительности не рекомендуется записывать в БД строки размером более 8 МБ и ключевые колонки размером более 2 КБ.

Подробнее существующие ограничения описаны в разделе [Ограничения базы данных](../../concepts/limits-ydb.md).

## Как работают вторичные индексы в {{ ydb-short-name }}? {#secondary_indexes}

Вторичные индексы в {{ ydb-short-name }} — глобальные и могут быть неуникальными.

Подробнее читайте в разделе [Вторичные индексы](../../concepts/secondary_indexes.md).

## Как осуществляется постраничный вывод? {#paging}

Для организации постраничного вывода рекомендуется последовательно выбирать данные, отсортированные по первичному ключу, ограничивая количество строк ключевым словом `LIMIT`. Использование ключевого слова `OFFSET` для решения этой задачи крайне не желательно.

Подробнее читайте в разделе [Постраничный вывод](../../dev/paging.md).

## Как удалять устаревшие данные? {#ttl}

Для эффективного удаления устаревших данных рекомендуется использовать [TTL](../../concepts/ttl.md).

## Как происходит синхронизация данных между дата-центрами в геораспределенных кластерах {#sinc-between-dc}

[Таблетка](../../concepts/cluster/common_scheme_ydb.md#tablets)-лидер записывает данные в [распределенное сетевое хранилище](../../concepts/cluster/distributed_storage.md), которое сохраняет копии в нескольких дата-центрах. {{ ydb-short-name }} подтверждает пользователю запрос только после успешного сохранения нужного числа копий в нужном числе дата-центров.
