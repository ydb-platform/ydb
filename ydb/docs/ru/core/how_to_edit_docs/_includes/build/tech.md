## Технология сборки

### Наложение слоев

Сборка любого варианта документации осуществляется по одном шаблону:

1. В базовой директории сборки размещаются два каталога: `core` и `overlay`. 
1. В каталоге `core` размещается базовая документация, которая может быть подключена как внешняя зависимость (например, git submodule).
1. В каталоге `overlay` размещается специфический для данной сборки контент.
1. В рабочую директорию копируется содержимое core.
1. В рабочую директорию копируется содержимое overlay, перезаписывая все файлы, относительный путь которых внутри overlay совпадет с каким-либо файлом из core.

В результате в рабочей директории сборки получается контент из core, в котором заменены файлы, присутствующие в overlay. Если в `overlay` файла нет -- в сборку попадет файл из `core`.

Такое наложение позволяет переопределить контент, сохранив размещение статей, а значит -- все ссылки на них их других статей, неважно идут они из статьей `core`, или из статей `overlay`. В результате, адаптация контента может быть локализована в рамках той статьи, которая требует адаптации, без необходимости делать технические корректировки в других статьях.

{% note warning %}

Так как наложение директорий `core` и `overlay` производится только при сборке, ссылки из статей в `overlay` на статьи в `core` не будут кликабельны в IDE, которое ничего не знает о том что какие-то директории будут при сборке оказываться наложенными друг поверх друга.

{% endnote %}