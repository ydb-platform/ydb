# Безопасный рестарт и выключение узлов

## Остановка/рестарт процесса ydb на узле {#restart_process}

Чтобы убедиться, что процесс можно остановить, надо выполнить следующие шаги.

1. Перейти в узел по ssh.

1. Выполнить команду

    ```bash
    ydbd cms request restart host {node_id} --user {user} --duration 60 --dry --reason 'some-reason'
    ```

    При разрешение выведет `ALLOW`.

1. Остановить процесс

    ```bash
    sudo service ydbd stop
    ```

1. Если потребуется, запустить процесс

   ```bash
    sudo service ydbd start
    ```

## Замена оборудования {#replace-hardware}

Перед заменой нужно убедиться, что процесс {{ ydb-short-name }} можно [остановить](#restart_process).
При длительном отсутствии стоит перед этим перевезти все VDisk'и с данного узла и дождаться окончания репликации.
После окончания репликации узел можно безопасно выключать.

Чтобы отключение динамического узла не оказало влияние на обработку запросов, необходимо перед отключением выполнить мягкий перенос (drain) таблеток с этого узла.

Стоит перейти на страницу [Hive web-viewer](../../reference/embedded-ui/hive.md).
После нажатия на кнопку "View Nodes" отобразится список всех узлов.

Перед отключением узла, сначала требуется отключить перевоз таблеток через кнопку Active, после чего нажать Drain и дождаться увоза всех таблеток.
