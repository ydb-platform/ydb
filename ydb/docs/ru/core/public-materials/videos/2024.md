# Видеозаписи 2024

## Методы и подходы к тестированию распределённой базы данных {#2024-conf-heisenbug-gridnev}

{% include notitle [testing_tag](../_includes/tags.md#testing) %}

[{{ team.gridnev.name }}]({{ team.gridnev.profile }}) ({{ team.gridnev.position }}) подробно рассказал о тестировании {{ ydb-short-name }}. Доклад начинается с общего представления того, как организовано тестирование {{ ydb-short-name }}, какие проблемы возникают при тестировании распределённых компонентов базы данных и почему в {{ ydb-short-name }} необходимо проводить хаос-тестирование.

Затем Виталий углубляется в архитектуру тестового сценария для хаос-тестирования, рассматривая все этапы — от разработки генераторов и сценариев нагрузки до создания инструментов для внешнего воздействия на систему.

@[Youtube](https://youtu.be/UDhfjeJsv-o?si=2GEo_77hmuAvLi1o)

Вы узнаете, как с помощью характеристик safety и liveness можно выявлять дефекты в системе. Доклад будет полезен разработчикам в тестировании, интересующимся тестированием распределённых систем.

[Слайды](https://presentations.ydb.tech/2024/ru/heisenbug/presentation.pdf)

## Стоимостный оптимизатор в {{ ydb-short-name }} — как, зачем и почему? {#2024-conf-hl-cbo-velikhov}

{% include notitle [database_internals_tag](../_includes/tags.md#database_internals) %}

{{ ydb-short-name }} создавалась как OLTP-система для высоконагруженных проектов, но со временем в ней появились и аналитические запросы. Их сложно оптимизировать вручную, поэтому важную роль играет стоимостный оптимизатор.

Несколько лет назад команда {{ ydb-short-name }} добавила поддержку колоночного хранения и сложной аналитики, что повысило требования к оптимизации. Теперь система может работать в режиме HTAP, где запросы автоматически распределяются между строковым и колоночным хранилищем.

В этом докладе Павел Велихов расскажет, как команда разработала стоимостный оптимизатор, какие задачи он решает и как {{ ydb-short-name }} выглядит на фоне конкурентов в OLTP, OLAP и HTAP-сценариях.

@[YouTube](https://www.youtube.com/watch?v=nyc3nmyQTvA)

[Слайды](https://presentations.ydb.tech/2024/ru/highload/cost-based-optimizer/presentation.pdf)

Доклад будет полезен разработчикам СУБД, аналитических платформ и высоконагруженных систем.

## Транзакционная работа с топиками. Архитектура и сравнение решений в Apache Kafka и {{ ydb-short-name }} {#2024-conf-hl-transactional-topics}

{% include notitle [database_internals_tag](../_includes/tags.md#database_internals) %}

Транзакции упрощают код и обеспечивают гарантии, такие как exactly-once доставка сообщений. В Apache Kafka транзакции позволяют достичь этих гарантий, но требуют сложной внутренней архитектуры. {{ ydb-short-name }} изначально поддерживает транзакции, что влияет на подход к работе с топиками.

В докладе Алексея Николаевского рассматриваются:

- Понятия топика, транзакционной записи и чтения.
- Решение задачи решардирования с сохранением порядка и exactly-once обработки в Apache Kafka и {{ ydb-short-name }}.
- Архитектуры транзакций в обеих системах.
- Сравнение производительности транзакций.

@[YouTube](https://www.youtube.com/watch?v=EHpa3Zd8yGw)

[Слайды](https://presentations.ydb.tech/2024/ru/highload/transactional-topics/presentation.pdf)

Доклад будет полезен разработчикам распределенных и высоконагруженных систем, стремящимся к высоким гарантиям в обработке данных.

## Как объединять данные из разных СУБД и делать это эффективно {#2024-conf-hl-federated-queries}

{% include notitle [database_internals_tag](../_includes/tags.md#overview) %}

Анализ данных, распределённых по различным системам хранения, таким как реляционные СУБД и CSV-файлы в S3, представляет собой сложную задачу. При небольшом объёме данных можно использовать скрипты для последовательного чтения и объединения информации в оперативной памяти. Однако с увеличением объёмов и сложности данных такой подход становится неэффективным.

В таких случаях на помощь приходят СУБД и движки обработки запросов с федеративными возможностями. Они позволяют использовать выразительный SQL для описания аналитических операций и эффективно обрабатывать большие объёмы данных из различных источников.

В своём докладе Виталий Исаев расскажет о принципах работы подобных систем и ключевых оптимизациях, обеспечивающих быструю и эффективную обработку данных.

@[YouTube](https://www.youtube.com/watch?v=OFoZDKv3Lrw)

[Слайды](https://presentations.ydb.tech/2024/ru/highload/federated-queries/presentation.pdf)

Доклад будет полезен разработчикам и аналитикам, работающим с данными, размещёнными в различных СУБД и хранилищах.

## Гарантии доставки сообщений в {{ ydb-short-name }} Topics {#2024-it-picnic}

{% include notitle [database_internals_tag](../_includes/tags.md#database_internals) %}

[{{ team.zevaykin.name }}]({{ team.zevaykin.profile }})({{ team.zevaykin.position }}) продемонстрировал базовые проблемы ненадежной передачи данных и способы борьбы с ними: повторы и дедупликацию. На примере паттернов микропроцессорной архитектуры он проиллюстрировал гарантии доставки: at-most-once, at-least-once, exactly-once.

@[YouTube](https://youtu.be/bdj_JrRPju0?si=392etOk5RyZVY6Kp)

В завершение выступления Александр показал детали реализации гарантий доставки на примере двух брокеров очередей сообщений: Kafka и {{ ydb-short-name }} Topics.

[Слайды](https://presentations.ydb.tech/2024/ru/it_picnic/ydb_topics/presentation.pdf)

## Интеграция распределенных SQL-хранилищ с Java-фреймворками на примере {{ ydb-short-name }}

{% include notitle [database_internals_tag](../_includes/tags.md#database_internals) %}

В докладе рассматриваются ключевые аспекты и основные вызовы, возникающие при интеграции популярных Java-фреймворков с распределённой СУБД на примере {{ ydb-short-name }}. Освещаются проблемы, которые необходимо учесть для успешной интеграции. Докладчик раскрывает, как Java-фреймворки могут быть адаптированы и интегрированы с распределёнными SQL-хранилищами, и сравнивает различные решения в этой области.

Доклад будет полезен разработчикам, архитекторам и DevOps-инженерам, занимающимся внедрением или миграцией отечественных и распределённых СУБД в корпоративных Java-проектах.

@[rutube](6840af8411a8be4e7da9f82cb4a25103)

[Слайды](https://presentations.ydb.tech/2024/ru/joker/ydb_java_frameworks/presentation.pdf)

## Гарантии доставки сообщений в {{ ydb-short-name }} Topics {#2024-saint-highload}

{% include notitle [database_internals_tag](../_includes/tags.md#database_internals) %}

[{{ team.zevaykin.name }}]({{ team.zevaykin.profile }}) ({{ team.zevaykin.position }}) рассмотрел основные проблемы ненадёжной передачи данных и методы борьбы с ними: повторы и дедупликацию. Александр на примере паттернов микропроцессорной архитектуры продемонстрировал гарантии доставки: at-most-once, at-least-once, exactly-once.

Александр с докладом «Гарантии доставки сообщений в {{ ydb-short-name }} Topics» выступал на конференциях Saint HighLoad++ 2024 и ИТ-Пикник 2024:

{% list tabs %}

- Saint HighLoad++ 2024

    @[YouTube](https://youtu.be/6l64n8t8Ivs?si=coC70xmfuaoIzxPA)

- ИТ-Пикник 2024

    @[YouTube](https://youtu.be/bdj_JrRPju0?si=392etOk5RyZVY6Kp)

{% endlist %}

В заключение Александр на примере двух брокеров очередей сообщений — Kafka и {{ ydb-short-name }} Topics — показал детали реализации гарантий доставки.

[Слайды](https://presentations.ydb.tech/2024/ru/saint_highload/ydb_topics/presentation.pdf)

## Шардированный не значит распределенный: что важно знать, когда PostgreSQL мало {#2024-conf-smartdata}

{% include notitle [testing_tag](../_includes/tags.md#testing) %}

[{{ team.ivanov.name }}]({{ team.ivanov.profile }}) ({{ team.ivanov.position }}) и [{{ team.bondar.name }}]({{ team.bondar.profile }}) ({{ team.bondar.position }}) рассказали, чем отличаются распределённые СУБД от шардированных. Особое внимание уделили тому, почему решения, подобные Citus, не являются ACID в случае широких транзакций. В конце выступления на примере бенчмарка TPC-C показали, что в PostgreSQL вертикальное масштабирование ограничено ботлнеком в синхронной репликации, и сравнили производительность PostgreSQL и распределённых СУБД CockroachDB и YDB.

@[YouTube](https://youtu.be/BDpLLmV37hY)

Доклад будет интересен как разработчикам приложений, которым требуется надёжная СУБД, так и людям, интересующимся распределёнными системами и базами данных.

[Слайды](https://presentations.ydb.tech/2024/ru/smartdataconf/sharded_is_not_distributed/presentation.pdf)

## {{ ydb-short-name }} — параллельная асинхронная репликация в распределенной базе {#2024-true-tech}

{% include notitle [database_internals_tag](../_includes/tags.md#database_internals) %}

Асинхронная репликация — хорошо известный метод создания независимой реплики базы данных, который дает возможность решить такие задачи, как обеспечение дополнительного уровня отказоустойчивости, георепликация и масштабирование рабочей нагрузки на чтение. Обычно все изменения исходной реплики пишутся в журнал изменений, который обрабатывается как входные данные для базы данных целевой реплики.

В {{ ydb-short-name }} исходная и целевая реплики — это распределенные базы данных, которые справляются с высокой рабочей нагрузкой. В такой ситуации невозможно ограничиться единым журналом изменений, который можно было бы перенести в целевую базу данных. [{{ team.bondar.name }}]({{ team.bondar.profile }}) ({{ team.bondar.position }}) рассказал про то, как используются внутренние возможности {{ ydb-short-name }}, чтобы обеспечить  масштабируемость журнала изменений базы данных и гарантировать согласованность целевой базы данных.

@[YouTube](https://youtu.be/qrPF8Rjhh2c?si=u0uh6ywqrQ-7mxS5)

Из доклада вы узнаете:

* Почему традиционный вариант хранения логов не подходит для распределенной БД?
* Что такое топики и как они помогают в хранении логов?
* С какими проблемами использования топиков для хранения логов столкнулась команда {{ ydb-short-name }} и как их решала?
* Как обеспечить запись данных в целевой кластер при работе с распределенными транзакциями?

[Слайды](https://presentations.ydb.tech/2024/ru/mts_true_tech/presentation.pdf)

## {{ ydb-short-name }} Topics: история взаимоотношений с Kafka {#2024-ya-inf}

{% include notitle [database_internals_tag](../_includes/tags.md#database_internals) %}

Шина данных уровня Яндекса требует нестандартных решений. [{{ team.zevaykin.name }}]({{ team.zevaykin.profile }}) ({{ team.zevaykin.position }}) рассказал о том, как появился сервис {{ ydb-short-name }} Topics и какие оптимизации были в нём применены. Также Александр описал архитектуру {{ ydb-short-name }} Topics и объяснил, почему было принято решение отказаться от Kafka.

@[YouTube](https://youtu.be/lZ5SUzdQO7k?si=cWx3sE6eDE_sx7f8)

В завершение вы узнаете, как команда {{ ydb-short-name }} реализовала Kafka API в режиме serverless.

[Слайды](https://presentations.ydb.tech/2024/ru/infra_conf/ydb_topics/presentaion.pdf)