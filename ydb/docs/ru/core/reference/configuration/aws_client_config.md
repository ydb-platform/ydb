# aws_client_config

Секция `aws_client_config` задаёт параметры по умолчанию для клиентов AWS SDK, которые {{ ydb-short-name }} использует для работы с S3 и другими совместимыми хранилищами. Эти значения применяются, если конкретная конфигурация хранилища не переопределяет их.

## Синтаксис

```yaml
aws_client_config:
  log_config:
    log_level: 0
    filename_prefix: ""
  verify_ssl: true
  request_timeout_ms: 0
  http_request_timeout_ms: 0
  connection_timeout_ms: 10000
  enable_tcp_keep_alive: true
  tcp_keep_alive_interval_ms: 30000
  max_connections_count: 32
  executor_threads_count: 32
  ca_path: "/etc/ssl/certs"
  ca_file: ""
```

## Параметры

| Параметр | Значение по умолчанию | Описание |
| --- | --- | --- |
| `log_config.log_level` | `0` (Off) | Уровень логов AWS SDK (`Off`, `Fatal`, `Error`, `Warn`, `Info`, `Debug`, `Trace`, значения `0–6`). Определяет подробность логов клиентов AWS. |
| `log_config.filename_prefix` | — | Префикс для файлов логов AWS SDK. При задании файлы создаются как `<prefix>YYYY-MM-DD-HH.log`; иначе вывод идёт в stdout/stderr. |
| `verify_ssl` | `true` | Проверять TLS-сертификаты при подключении к конечным точкам AWS. Отключать стоит только для тестов. |
| `request_timeout_ms` | `0` (выкл.) | Общий тайм-аут запроса в миллисекундах, включая DNS, соединение, TLS и передачу данных. `0` оставляет поведение AWS SDK без тайм-аута. |
| `http_request_timeout_ms` | `0` (выкл.) | Тайм-аут на уровне HTTP-клиента (Curl), в миллисекундах. `0` — без тайм-аута. |
| `connection_timeout_ms` | `10000` | Тайм-аут установления TCP-соединения в миллисекундах. |
| `enable_tcp_keep_alive` | `true` | Включить TCP keep-alive на клиентских сокетах. |
| `tcp_keep_alive_interval_ms` | `30000` | Интервал между keep-alive пакетами в миллисекундах. Для Curl округляется до секунд; должен быть ≥ 15000. |
| `max_connections_count` | `32` | Максимум одновременных TCP‑соединений, которые может открыть HTTP-клиент AWS. |
| `executor_threads_count` | `32` | Размер пула потоков, разделяемого клиентами AWS для одного endpoint. Определяет параллелизм асинхронных запросов. |
| `ca_path` | `"/etc/ssl/certs"` | Путь к каталогу с корневыми сертификатами для проверки TLS. |
| `ca_file` | — | Путь к файлу с набором корневых сертификатов. Используется, если хранилище доверенных сертификатов расположено нестандартно. |

### Уровни логов

| Уровень | Значение | Описание |
| --- | --- | --- |
| `Off` | `0` | Отключить логирование AWS SDK. |
| `Fatal` | `1` | Только фатальные ошибки. |
| `Error` | `2` | Некритические ошибки. |
| `Warn` | `3` | Предупреждения, требующие внимания. |
| `Info` | `4` | Общая информационная сводка. |
| `Debug` | `5` | Отладочная информация. |
| `Trace` | `6` | Максимально подробная диагностика. |
