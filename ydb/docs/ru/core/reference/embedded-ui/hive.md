# Hive web-viewer

Web-viewer Hive предоставляет интерфейс работы с Hive.
Hive бывает общим на кластер и тенантный.
Попасть на страницу Web-viewer Hive можно из {{ ydb-short-name }} Monitoring.

## Главная страница

Главная страница представляет информацию о распределении и потреблении ресурсов таблетками на каждой из нод представленной в виде таблицы.

Перед таблицей представлена краткая информация:

* **Tenant** - тенант, за который отвечает Hive
* **Tablets** - процентное и количественное соотношение поднятых таблеток к имеющимся
* **Boot Queue** - количество таблеток, которые находятся в очереди на запуск
* **Wait Queue** - количество таблеток, которые не имеют возможности подняться
* **Resource Total** - потребление ресурсов таблетками (cpu, net)
* **Resource StDev** - среднеквадратическое отклонение потребления ресурсов (cnt, cpu, mem, net)

После идет таблица, где каждая строка представляет из себя один из узлов под управлением Hive и имеет следующие столбцы:

* **Node** - номер узла
* **Name** - fqdn узла и ic-port
* **DC** - датацентр, в котором расположен узел
* **Domain** - тенант узла
* **Uptime** - время, прошедшее с начала работы узла
* **Unknown** - количество таблеток в неопределенном состоянии
* **Starting** - количество таблеток в процессе подъема
* **Running** - количество работающих таблеток
* **Types** - распределение таблеток по их типу
* **Usage** - отнормированный доминантный ресурс
* **Resources** :
  * **cnt** - количество таблеток без потребления ресурсов
  * **cpu** - потребление ядра таблетками
  * **mem** - потребление ОЗУ таблетками
  * **net** - потребление полосы таблетками
* **Active** - включение/отключение узла для перевоза таблеток на данный узел
* **Freeze** - запрет для таблеток подниматься на других узлах
* **Kick** - перевоз всех таблеток разом с узла
* **Drain** - плавный перевоз всех таблеток с узла

Ниже таблицы представлены дополнительные страницы:

* **Bad tablets** - список таблеток, имеющих проблемы или ошибки
* **Heavy tablets** - список таблеток, потребляющих значительное количество ресурсов
* **Waiting tablets** - список таблеток без возможности подняться
* **Resources** - потребление ресурсов каждой таблеткой
* **Tenants** - список тенантов с указанием их локальных Hive таблеток
* **Nodes** -  список узлов
* **Storage** - список пулов групп хранения
* **Groups** - список групп хранения для каждой таблетки
* **Settings** - страница конфигураций Hive
* **Reassign Groups** - страница перераспределения групп хранения между таблетками

Также можно посмотреть, какие таблетки используют конкретную группу, и наоборот, какие группы используются в конкретной таблетке.

## Reassign Groups {#reassign_groups}

При нажатии на кнопку **Reassign Groups** появится окно с параметрами для балансировки:

* **Storage pool** - пул групп хранения для балансировки
* **Storage group** - в случае если не указан предыдущий пункт, можно указать отдельно только одну группу
* **Type** - тип таблеток для которых будет производиться балансировка
* **Channels** - диапазон каналов, для которых будет производиться балансировка
* **Percent** - процент от общего количества каналов таблеток которые переедут в результате балансировки
* **Inflight** - количество одновременно переезжающих на другие группы таблеток

После указания всех параметров, следует нажать сначала "Query", который покажет количество каналов, попавших под переезд, и разблокирует кнопку "Reassign".
При нажатии которой начнется перераспределение.
