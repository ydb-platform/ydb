# Привилегированные пользователи

- `root` -- суперпользователь
- администратор кластера (СУБД)
- администратор базы

## Суперпользователь

Суперпользователь создаётся при первом развёртывании кластера.

По-умолчанию суперпользователь имеет логин `root` и пустой пароль.

Задать другое имя и пароль для суперпользователя можно в секции [`auth_config`](../reference/configuration/index.md#auth-config) конфигурации кластера. Суперпользователем становится первый пользователь из списка `auth_config.default_users`.

TODO: суперпользователь -- не полный суперпользователь, если не состоит прямо или косвенно в `domains_config.security_config.administration_allowed_sids`.

## Администратор кластера (СУБД)

Администратор кластера имеет неограниченные права на всём кластере.

Для этого администратор кластера должен:

1. принадлежать списку `domains_config.security_config.administration_allowed_sids`
2. и иметь полные права на корне схемы кластера

Принадлежность списку `domains_config.security_config.administration_allowed_sids` определяется прямым вхождением или через группу.

Например, если кластер развёрнут со [встроенными группами безопасности](./builtin-security.md), то администратор кластера должен принадлежать группе `ADMINS`.

## Администратор базы данных

---

## Конфиг

## Пользователи, группа и права по-умолчанию

`auth_config.default_users` -- какие пользователи должны быть созданы на кластере по-умолчанию
`auth_config.default_groups` -- какие группы должны быть созданы на кластере по-умолчанию
`auth_config.default_access` -- права доступа по-умолчанию на корне кластера

## Справка по конфигурации

Эфемерные флаги:
    - `domains_config.disable_builtin_security` -- отключить ли использование суперпользователя `root`, "встроенных" групп, и "встроенных" прав доступа на корне кластера (флаг, default: false)
    - `domains_config.default_groups` -- регистрировать ли "встроенные" группы, если явные группы по-умолчанию `auth_config.default_groups` не заданы (флаг, default: false)
    - `domains_config.default_access` -- прописывать ли "встроенные" права доступа на корне кластера (флаг, default: false)

`auth_config.default_users` -- какие пользователи должны быть созданы на кластере по-умолчанию (список пар логин-пароль), первый пользователь становится суперпользователем)
`auth_config.default_groups` -- какие группы должны быть созданы на кластере по-умолчанию
`auth_config.default_access` -- права доступа по-умолчанию на корне кластера

`auth_config.use_builtin_domain` -- разрешено ли использование "встроенных" sid'ов (из аутентификационного домена `@builtin`): `root@builtin` и т.п. (default: true)
`auth_config.enable_login_authentication` -- включена ли возможность логина (то есть обмена логина-пароля на токен) (default: true)

`auth_config.domain_login_only` -- логины делаются только против корневой базы (то есть против кластера) или можно логиниться в конкретную базу (default: true)

`auth_config.all_authenticated_users` -- sid для виртуальной группы пользователей, прошедших аутентификацию. Автоматически добавляется к пользовательскому токену в момент аутентификации (default: `all-users@well-known`)

