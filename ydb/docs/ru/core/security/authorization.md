# Авторизация

## Основные понятия

Авторизация в {{ ydb-short-name }} основана на понятиях:

* [Объект доступа](#object)
* [Субъект доступа](#subject)
* [Право](#right)
* [Владелец](#owner)

Независимо от метода аутентификации, авторизация всегда выполняется на стороне {{ ydb-short-name }} на основе хранящейся в ней информацию об объектах и правах доступа. Права доступа определяют набор доступных для выполнения операций.
Авторизация выполняется на каждое действие пользователя: его права не кешируются, так как могут быть отозваны или предоставлены в любой момент времени.

## Объект доступа {#object}

Объект доступа - узел дерева [директорий](../concepts/glossary.md#папка-folder) (схемный объект, объект схемы), например: база данных, директории, таблицы, представления, топики.

Директории организованы в иерархическую структуру объектов схемы в виде  и вложенных объектов в них: баз данных, таблиц, представлений, топиков. Директории могут содержать поддиректории, и такая вложенность может быть произвольной глубины.

## Субъект доступа {#subject}

### SID

Субъект доступа является [пользователем](#user) или [группой](#group).

Субъект доступа идентифицируется SID (Security Identifier) в формате `"login@subsystem"`. Суффикс `subsystem` — это пространство имён, внутри которого гарантируется уникальность всех login.
Например, в случае интеграции с LDAP, имена пользователей будут `user1@ldap` и `user2@ldap`.
Если указан login без суффикса, то имеются ввиду пользователи, непосредственно созданные в кластере {{ ydb-short-name }}.

SID является уникальным в рамках кластера.

### Пользователь {#user}

Для создания, изменения и удаления пользователей {{ ydb-short-name }} есть команды:

* [{#T}](../yql/reference/syntax/create-user.md)
* [{#T}](../yql/reference/syntax/alter-user.md)
* [{#T}](../yql/reference/syntax/drop-user.md)

{% include [!](../_includes/do-not-create-users-in-ldap.md) %}

### Группа {#group}

Группа пользователей - именованное множество пользователей, предназначенное для упрощения контроля доступа.
За группой можно закрепить любые необходимые права на произвольный набор объектов доступа.

Ограничений по количеству пользователей в группе нет. Группа доступа может быть пустой, когда в неё не входит ни один пользователь.

Любого пользователя можно включить ту или иную группу доступа или исключить из неё. Как только пользователь включается в группу доступа, он получает все права на объекты базы данных, которые предоставлялись группе доступа.
Так с помощью групп доступа YDB можно реализовать бизнес-роли пользовательских приложений, заранее настроив требуемые права доступа на нужные объекты.

Для создания, изменения и удаления групп есть команды:

* [{#T}](../yql/reference/syntax/create-group.md)
* [{#T}](../yql/reference/syntax/alter-group.md)
* [{#T}](../yql/reference/syntax/drop-group.md)

Подробнее о группах пользователей: [{#T}](group.md).

## Право {#right}

Обладание правом в {{ ydb-short-name }} даёт возможность выполнять определённые операции в кластере или базе данных.
Права в {{ ydb-short-name }} выдаются на объекты доступа (узлы дерева директорий).
У каждого такого объекта есть список разрешений — ACL (Access Control List) — он хранит все предоставленные пользователям и группам права на объект.

Для управления правами служат следующие YQL-команды:

* [{#T}](../yql/reference/syntax/grant.md).
* [{#T}](../yql/reference/syntax/revoke.md).

Пример использования команды GRANT:

```yql
GRANT CREATE DIRECTORY ON `/Root/db1` TO testuser
```

Подробнее о правах и их полный перечень: [{#T}](right.md).

## Владелец объекта {#owner}

У каждого объекта доступа есть владелец, в том числе у кластера в целом и каждой базы данных.  Владельцем объекта по умолчанию становится субъект доступа, создавший объект.

Для владельца не проверяются ACL права на данный объект. Он имеет полный набор прав на объект.

Сменить владельца можно с помощью CLI команды [CHOWN](../reference/ydb-cli/commands/scheme-permissions.md#chown).

Пример команды chown:

```bash
{{ ydb-cli }} scheme permissions chown '/Root/db1' testuser
```
