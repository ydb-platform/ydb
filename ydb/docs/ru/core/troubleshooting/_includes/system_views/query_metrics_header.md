## Подробная информация о запросах {#query-metrics}

Следующая системная таблица хранит подробную информацию о запросах:

* `query_metrics_one_minute` — данные разбиты по минутным интервалам, содержит до 256 запросов за последние 6 часов.

Каждая строка таблицы содержит информацию о множестве случившихся за интервал запросов с одинаковым текстом. Поля таблицы предоставляют минимальное, максимальное и суммарное значение по каждой отслеживаемой характеристике запроса. В пределах интервала запросы отсортированы по убыванию суммарного потраченного процессорного времени.

Ограничения:

* текст запроса ограничен 4 килобайтами;
* статистика может быть неполной, если база испытывает сильную нагрузку.

Структура таблицы:

Поле | Описание
---|---
`IntervalEnd` | Момент закрытия минутного интервала.<br>Тип: `Timestamp`.<br>Ключ: `0`.
`Rank` | Ранг запроса в пределах интервала (по полю SumCPUTime).<br>Тип: `Uint32`.<br>Ключ: `1`.
`QueryText` | Текст запроса.<br>Тип: `Utf8`.
`Count` | Количество запусков запроса.<br>Тип: `Uint64`.
`SumDuration` | Общая длительность запросов.<br>Тип: `Interval`.
`Count` | Количество запусков запроса.<br>Тип: `Uint64`.
`SumDuration` | Общая длительность запросов.<br>Тип: `Interval`.
`MinDuration` | Минимальная длительность запроса.<br>Тип: `Interval`.
`MaxDuration` | Максимальная длительность запроса.<br>Тип: `Interval`.
`SumCPUTime` | Общее затраченное процессорное время.<br>Тип: `Uint64`.
`MinCPUTime` | Минимальное затраченное процессорное время.<br>Тип: `Uint64`.
`MaxCPUTime` | Максимальное затраченное процессорное время.<br>Тип: `Uint64`.
`SumReadRows` | Общее количество прочитанных строк.<br>Тип: `Uint64`.
`MinReadRows` | Минимальное количество прочитанных строк.<br>Тип: `Uint64`.
`MaxReadRows` | Максимальное количество прочитанных строк.<br>Тип: `Uint64`.
`SumReadBytes` | Общее количество прочитанных байт.<br>Тип: `Uint64`.
`MinReadBytes` | Минимальное количество прочитанных байт.<br>Тип: `Uint64`.
`MaxReadBytes` | Максимальное количество прочитанных байт.<br>Тип: `Uint64`.
`SumUpdateRows` | Общее количество записанных строк.<br>Тип: `Uint64`.
`MinUpdateRows` | Минимальное количество записанных строк.<br>Тип: `Uint64`.
`MaxUpdateRows` | Максимальное количество записанных строк.<br>Тип: `Uint64`.
`SumUpdateBytes` | Общее количество записанных байт.<br>Тип: `Uint64`.
`MinUpdateBytes` | Минимальное количество записанных байт.<br>Тип: `Uint64`.
`MaxUpdateBytes` | Максимальное количество записанных байт.<br>Тип: `Uint64`.
`SumDeleteRows` | Общее количество удалённых строк.<br>Тип: `Uint64`.
`MinDeleteRows` | Минимальное количество удалённых строк.<br>Тип: `Uint64`.
`MaxDeleteRows` | Максимальное количество удалённых строк.<br>Тип: `Uint64`.
