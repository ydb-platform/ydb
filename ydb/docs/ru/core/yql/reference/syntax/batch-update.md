
# BATCH UPDATE

{% note tip %}

Перед тем как изучать `BATCH UPDATE`, рекомендуется ознакомиться со стандартным [UPDATE](update.md).

{% endnote %}

`BATCH UPDATE` позволяет обновлять записи в таблицах большого размера, минимизируя риск отмены блокировок и отката транзакции за счет ослабления гарантий, а именно — обновление данных выполняется в виде серии транзакций для каждой [партиции](../../../concepts/datamodel/_includes/table.md#partitioning_row_table) указанной таблицы отдельно, обрабатывая ограниченное количество строк за итерацию (по умолчанию — 10000 строк). В момент выполнения запроса одновременно обрабатывается ограниченное число партиций (по умолчанию — не больше 10 партиций).

Данный запрос, как и стандартный `UPDATE`, выполняется синхронно и завершается с некоторым статусом. В случае возникновения ошибки или отключения клиента обновление данных останавливается, применённые изменения не откатываются.

Семантика наследуется от стандартного `UPDATE` с ограничениями:

* Поддерживается только для [строковых таблиц](../../../concepts/glossary.md#row-oriented-table).
* Поддерживается только для транзакций в режиме `NoTx`.
* Поддерживаются только идемпотентные обновления: выражения после `SET` не должны зависеть от текущих значений изменяемых колонок.
* Запрещено использование подзапросов и нескольких запросов в одном выражении, включая `UPDATE ON`.
* Недоступно ключевое слово `RETURNING`.

### Пример

```yql
BATCH UPDATE my_table
SET Value1 = YQL::ToString(0), Value2 = 0
WHERE Key1 > 1;
```