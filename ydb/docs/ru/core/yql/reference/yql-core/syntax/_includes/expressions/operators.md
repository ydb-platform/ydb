## Операторы

### Арифметические операторы {#math-operators}

Операторы `+`, `-`, `*`, `/`, `%` определены для [примитивных типов данных](../../../types/primitive.md), являющихся разновидностями чисел.

Для типа данных Decimal используется банковское округление (до ближайшего четного).

**Примеры**

``` yql
SELECT 2 + 2;
```

``` yql
SELECT 0.0 / 0.0;
```

### Операторы сравнения {#comparison-operators}

Операторы `=`, `==`, `!=`, `<>`, `>`, `<` определены для:

* Примитивных типов данных за исключением Yson и Json.
* Кортежей и структур с одинаковым набором полей. Для структур не определен порядок, но можно проверять на (не-)равенство, а кортежи сравниваются поэлементно слева направо.

**Примеры**

``` yql
SELECT 2 > 1;
```

### Логические операторы {#logic-operators}

С помощью операторов `AND`, `OR`, `XOR` осуществляются логические операции над булевыми значениями (`Bool`).

**Примеры**

``` yql
SELECT 3 > 0 AND false;
```

### Битовые операторы {#bit-operators}

Битовые операции над числами:

* `&`, `|`, `^` — AND, OR и XOR соответственно. Не следует путать битовые операции с аналогичными ключевыми словами. Ключевые слова `AND`, `OR` и `XOR` используются *только для булевых значений*, но не для чисел;
* ` ~ ` — отрицание;
* `<<`, `>>` — сдвиги влево-вправо;
* `|<<`, `>>|` — кольцевые сдвиги влево-вправо.

**Примеры**

``` yql
SELECT
    key << 10 AS key,
    ~value AS value
FROM my_table;
```

### Приоритет и ассоциативность операторов {#operator-priority}

Приоритет оператора определяет порядок вычисления выражения содержащего разные операторы.
Например, выражение `1 + 2 * 3` вычисляется как `1 + (2 * 3)`,
поскольку приоритет оператора умножения больше приоритета оператора сложения.

Ассоциативность определяет порядок вычисления в выражениях содержащих операторы одного типа.
Например, выражение `1 + 2 + 3` вычисляется как `(1 + 2) + 3`, поскольку оператор сложения является лево-ассоциативным.
С другой стороны, выражение `a ?? b ?? c` вычисляется как `a ?? (b ?? c)` из-за право-ассоциативности оператора `??`

В таблице ниже указаны приоритет и ассоциативность операторов языка YQL.
Операторы в таблице перечислены в порядке убывания приоритета.

| Приоритет | Оператор | Описание | Ассоциативность |
| --- | --- | --- | --- |
| 1 | <code>a[], a.foo, a()</code> | Обращение к элементу контейнера, вызов функции | Левая |
| 2 | <code>+a, -a, ~a, NOT a</code> | Унарные операторы: плюс, минус, битовое и логическое отрицание | Правая |
| 3 | <code>a &#124;&#124; b</code> | [Конкатенация строк](../../../syntax/expressions.md#concatenation) | Левая |
| 4 | <code>a*b, a/b, a%b</code> | Умножение,деление, остаток от деления | Левая |
| 5 | <code>a+b, a-b</code> | Сложение / вычитание | Левая |
| 6 | <code>a ?? b</code> | Операторная форма записи [NVL/COALESCE](../../../builtins/basic.md#coalesce) | Правая |
| 7 | <code>a<<b, a>>b, a&#124;<<b, a>>&#124;b,</code> <code>a&#124;b, a^b, a&b</code> | Сдвиговые и логические битовые операторы | Левая |
| 8 | <code>a<b, a<=b, a>=b, a>b</code> | Сравнение | Левая |
| 9 | <code>a IN b</code> | Вхождение элемента в множество | Левая |
| 9 | <code>a==b, a=b, a!=b, a<>b,</code> <code>a is (not) distinct from b</code> | Сравнение на (не)равенство | Левая |
| 10 | <code>a XOR b</code> | Логическое XOR | Левая |
| 11 | <code>a AND b</code> | Логическое AND | Левая |
| 12 | <code>a OR b</code> | Логическое OR | Левая |
