# CREATE TOPIC

С помощью оператора `CREATE TOPIC` можно создать [топик](../../../../concepts/topic), а также [читателей](../../../../concepts/topic#consumer) для него.

Общий вид команды:

```sql
CREATE TOPIC topic_path (
    CONSUMER consumer_name [WITH (consumer_option = value[, ...])]
    ) WITH (topic_option = value[, ...]);
```

* `consumer_option` — параметр читателя;
* `topic_option` — параметр топика.

Все параметры команды, кроме `topic_path` не обязательны. По умолчанию топик создается без читателей. Все
не указанные явно параметры также выставляются по умолчанию (и для топика, и для читателя).

Параметры читателя:

* `important`— определяет важного читателя. Никакие данные из топика не будут удалены, пока все важные читатели их не прочитали. Тип значения — `boolean`, значение по умолчанию: `false`.
* `read_from`— определяет момент времени записи сообщений, начиная с которого читатель будет получать данные. Данные, записанные ранее этого момента, прочитаны не будут. Тип значения: `Datetime` ИЛИ `Timestamp` или `integer` (unix-timestamp в виде числа). Значение по умолчанию — `now`
{% if feature_topic_codecs %}
* `supported_codecs` — список [кодеков](../../../../concepts/topic#message-codec), поддерживаемых читателем.
{% endif %}

Параметры топика:

* `metering_mode` — способ метеринга ресурсов (`RESERVED_CAPACITY` - по выделенным ресурсам или `REQUEST_UNITS` - по фактическому использованию). Актуально для топиков в serverless базах данных. Тип значения - `String`.
* `min_active_partitions` — минимальное количество активных партиций топика. Автоматическая балансировка нагрузки не будет уменьшать количество активных партиций ниже этого количества. Тип значения — `integer`, значение по умолчанию — `1`.
* `retention_period` — время хранения данных в топике. Тип значения — `Interval`, значение по умолчанию — `18h`.
* `retention_storage_mb` — ограничение на максимальное место на диске, занимаемое данными топика. При превышении этого значения старые данные будут удаляться, как по retention. Тип значения — `integer`, значение по умолчанию — `0` (не ограничено).
* `partition_count_limit` — максимальное количество активных партиций топика. Тип значения — `integer`, значение по умолчанию: `0` (не ограничено).
* `partition_write_burst_bytes` — размер запаса квоты на запись в партицию на случай всплесков записи. При выставлении в `0` фактическое значение write_burst принимается равным значению квоты (что позволяет всплески записи длительностью до 1 секунды). Тип значения — `integer`, значение по умолчанию: `0`.
* `partition_write_speed_bytes_per_second` — максимальная разрешенная скорость записи в 1 партицию. Если поток записи в партицию превысит это значение, запись будет квотироваться. Тип значения — `integer`, значение по умолчанию — `2097152` (2 МБ).
{% if feature_topic_codecs %}
* `supported_codecs` — список [кодеков](../../../../concepts/topic#message-codec), поддерживаемых топиком. Тип значения — `String`.
{% endif %}

Следующая команда создаст топик без читателей с настройками по умолчанию:

```sql
CREATE TOPIC `my_topic`;
```

{% if feature_topic_codecs %}
* `supported_codecs` - список [кодеков](../../../../concepts/topic#message-codec), поддерживаемых топиком. Тип значения - `String`.
{% endif %}

Чтобы создать топик с важным читателем и временем хранения данных 1 сутки, выполните команду:

```sql
CREATE TOPIC `my_topic` (
    CONSUMER my_consumer WITH (important = true)
    ) WITH (retention_period = Interval('P1D')
);
```
