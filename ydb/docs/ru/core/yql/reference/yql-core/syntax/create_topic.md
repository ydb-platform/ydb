# CREATE TOPIC

Вызов `CREATE TOPIC` создает [топик](../../../../concepts/topic).

{% include [trunk](../../../_includes/trunk.md) %}

При создании можно указать [читаталей](../../../../concepts/topic#consumer) топика, которые будут созданы для него а так же настройки топика. 

```
    CREATE TOPIC topic_path (
        CONSUMER consumer1,
        CONSUMER consumer2 WITH (setting1 = value1)
    ) WITH (
        topic_setting2 = value2
    );
```

Все параметры, кроме имени топика - опциональны. По умолчанию топик создается без читателей. Все
не указанные явно настройки также выставляются по умолчанию (и для топика, и для читаталей).

## Примеры

Создание топика без читателей с настройками по умолчанию:

```sql
CREATE TOPIC `my_topic`;
```

Создание топика с одним читателем, с включением опции important:

```sql
CREATE TOPIC `my_topic` (
    CONSUMER my_consumer WITH (important = true)
);
```

### Полный список доступных настроек читателей топика

* `important` - определяет важного читателя. Никакие данные из топика не будут удалены, пока все важные читатели их не прочитали. Тип значения - `boolean`, значение по умолчанию: `false`.
* `read_from` - определяет момент времени записи сообщений, начиная с которого читатель будет получать данные. Данные, записанные раньше этого момента прочитаны не будут. Тип значения: `Datetime` ИЛИ `Timestamp` или `integer` (unix-timestamp в виде числа). Значение по умолчанию - `now`

{% if feature_topic_codecs %}
* `supported_codecs` - список [кодеков](../../../../concepts/topic#message-codec), поддерживаемых читателем.

{% endif %}

Создание топика с указанием времени хранения данных в 1 сутки:

```sql
CREATE TOPIC `my_topic` WITH(
    retention_period = Interval('P1D')
);
```

### Полный список доступных настроек топика

* `min_active_partitions` - минимальное количество активных партиций топика. Автоматическая балансировка нагрузки не будет уменьшать количество активных партиций ниже этого количества. Тип значения - `integer`, значение по умолчанию: `1`.
* `partition_count_limit` - максимальное количество активных партиций топика. `0` интерпретируется как unlimited. Тип значения - `integer`, значение по умолчанию: `0`.
* `retention_period` - время хранения данных в топике. Тип значения - `Interval`, значение по умолчанию: `18h`.
* `retention_storage_mb` - ограничение на максимальное место на диске, занимаемое данными топика. При превышении этого значения старые данные будут удаляться, как по retention. `0` интерпретируется как unlimited. Тип значения - `integer`, значение по умолчанию: `0`
* `partition_write_speed_bytes_per_second` - максимальная разрешенная скорость записи в 1 партицию. Если поток записи в партицию превысит это значение, запись будет квотироваться. Тип значения - `integer`, значение по умолчанию: `2097152` (2MB).
* `partition_write_burst_bytes` - размер "запаса" квоты на запись в партицию на случай всплесков записи. При выставлении в 0 фактическое значение write_burst принимается равным значению квоты (что позволяет всплески записи длительностью до 1 секунды). Тип значения - `integer`, значение по умолчанию: `0`.
* `metering_mode` - способ метеринга ресурсов (`RESERVED_CAPACITY` - по выделенным ресурсам или `REQUEST_UNITS` - по фактическому использованию). Актуально для топиков в serverless базах данных. Тип значения - `String`.

{% if feature_topic_codecs %}
* `supported_codecs` - список [кодеков](../../../../concepts/topic#message-codec), поддерживаемых топиком. Тип значения - `String`.

{% endif %}
