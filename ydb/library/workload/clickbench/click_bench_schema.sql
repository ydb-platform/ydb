--!syntax_v1
{createExternal}

CREATE {external} TABLE `{path}`
(
    WatchID Int64 {notnull},
    JavaEnable Int16 {notnull},
    Title {string_type} {notnull},
    GoodEvent Int16 {notnull},
    EventTime {timestamp_type} {notnull},
    EventDate {date_type} {notnull},
    CounterID Int32 {notnull},
    ClientIP Int32 {notnull},
    RegionID Int32 {notnull},
    UserID Int64 {notnull},
    CounterClass Int16 {notnull},
    OS Int16 {notnull},
    UserAgent Int16 {notnull},
    URL {string_type} {notnull},
    Referer {string_type} {notnull},
    IsRefresh Int16 {notnull},
    RefererCategoryID Int16 {notnull},
    RefererRegionID Int32 {notnull},
    URLCategoryID Int16 {notnull},
    URLRegionID Int32 {notnull},
    ResolutionWidth Int16 {notnull},
    ResolutionHeight Int16 {notnull},
    ResolutionDepth Int16 {notnull},
    FlashMajor Int16 {notnull},
    FlashMinor Int16 {notnull},
    FlashMinor2 {string_type} {notnull},
    NetMajor Int16 {notnull},
    NetMinor Int16 {notnull},
    UserAgentMajor Int16 {notnull},
    UserAgentMinor Bytes {notnull},
    CookieEnable Int16 {notnull},
    JavascriptEnable Int16 {notnull},
    IsMobile Int16 {notnull},
    MobilePhone Int16 {notnull},
    MobilePhoneModel {string_type} {notnull},
    Params {string_type} {notnull},
    IPNetworkID Int32 {notnull},
    TraficSourceID Int16 {notnull},
    SearchEngineID Int16 {notnull},
    SearchPhrase {string_type} {notnull},
    AdvEngineID Int16 {notnull},
    IsArtifical Int16 {notnull},
    WindowClientWidth Int16 {notnull},
    WindowClientHeight Int16 {notnull},
    ClientTimeZone Int16 {notnull},
    ClientEventTime {timestamp_type} {notnull},
    SilverlightVersion1 Int16 {notnull},
    SilverlightVersion2 Int16 {notnull},
    SilverlightVersion3 Int32 {notnull},
    SilverlightVersion4 Int16 {notnull},
    PageCharset {string_type} {notnull},
    CodeVersion Int32 {notnull},
    IsLink Int16 {notnull},
    IsDownload Int16 {notnull},
    IsNotBounce Int16 {notnull},
    FUniqID Int64 {notnull},
    OriginalURL {string_type} {notnull},
    HID Int32 {notnull},
    IsOldCounter Int16 {notnull},
    IsEvent Int16 {notnull},
    IsParameter Int16 {notnull},
    DontCountHits Int16 {notnull},
    WithHash Int16 {notnull},
    HitColor {string_type} {notnull},
    LocalEventTime {timestamp_type} {notnull},
    Age Int16 {notnull},
    Sex Int16 {notnull},
    Income Int16 {notnull},
    Interests Int16 {notnull},
    Robotness Int16 {notnull},
    RemoteIP Int32 {notnull},
    WindowName Int32 {notnull},
    OpenerName Int32 {notnull},
    HistoryLength Int16 {notnull},
    BrowserLanguage {string_type} {notnull},
    BrowserCountry {string_type} {notnull},
    SocialNetwork {string_type} {notnull},
    SocialAction {string_type} {notnull},
    HTTPError Int16 {notnull},
    SendTiming Int32 {notnull},
    DNSTiming Int32 {notnull},
    ConnectTiming Int32 {notnull},
    ResponseStartTiming Int32 {notnull},
    ResponseEndTiming Int32 {notnull},
    FetchTiming Int32 {notnull},
    SocialSourceNetworkID Int16 {notnull},
    SocialSourcePage {string_type} {notnull},
    ParamPrice Int64 {notnull},
    ParamOrderID {string_type} {notnull},
    ParamCurrency {string_type} {notnull},
    ParamCurrencyID Int16 {notnull},
    OpenstatServiceName {string_type} {notnull},
    OpenstatCampaignID {string_type} {notnull},
    OpenstatAdID {string_type} {notnull},
    OpenstatSourceID {string_type} {notnull},
    UTMSource {string_type} {notnull},
    UTMMedium {string_type} {notnull},
    UTMCampaign {string_type} {notnull},
    UTMContent {string_type} {notnull},
    UTMTerm {string_type} {notnull},
    FromTag {string_type} {notnull},
    HasGCLID Int16 {notnull},
    RefererHash Int64 {notnull},
    URLHash Int64 {notnull},
    CLID Int32 {notnull}
    {primary_key}(CounterID, EventDate, UserID, EventTime, WatchID)
)
{partition_by}(CounterID, EventDate, UserID, EventTime, WatchID)
WITH (
--    AUTO_PARTITIONING_BY_SIZE = "ENABLED",
    {store}"{s3_prefix}/hits"
    {partitioning} = 128
);
