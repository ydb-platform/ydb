syntax = "proto3";

package yandex.cloud.priv.vpc.v1.admin;

import "ydb/public/api/client/yc_common/api/operation.proto";
import "ydb/public/api/client/yc_private/vpc/v1/address_service.proto";
import "ydb/public/api/client/yc_private/operation/operation.proto";
import "ydb/public/api/client/yc_private/common/validation.proto";
import "ydb/public/api/client/yc_private/vpc/v1/address.proto";

option go_package = "github.com/ydb-platform/ydb/ydb/public/api/client/yc_private/vpc/v1/admin;admin";
option java_outer_classname = "PVADMS";

service AdminService {
  rpc AllocateAddressRange (AllocateAddressRangeRequest) returns (operation.Operation) {
    option (yandex.cloud.api.operation) = {
      metadata: "AllocateAddressRangeMetadata"
      response: "AddressIdList"
    };
  }

  rpc MoveAddress (MoveAddressRequest) returns (Address) {
  }
}

message MoveAddressRequest {
  string address_id = 1 [(required) = true, (length) = "<=50"];
  string destination_folder_id = 2 [(required) = true, (length) = "<=50"];
  string source_cloud_id = 3 [(required) = true, (length) = "<=50"];
  string destination_cloud_id = 4 [(required) = true, (length) = "<=50"];
}

message AllocateAddressRangeRequest {
  CreateAddressRequest create_address_spec = 1 [(required) = true];
  oneof amount {
    option (exactly_one) = true;
    int64 prefixlen = 2;
    int64 count = 3;
  }
  string requested_cidr = 4;
  bool strict = 5;
}

message AllocateAddressRangeMetadata {
  repeated string address_ids = 1;
}

message AddressIdList {
  repeated string address_ids = 1;
}
