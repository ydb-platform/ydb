--!syntax_v1
{createExternal}

CREATE {external} TABLE `{path}`
(
    WatchID Int64 {notnull},
    JavaEnable Int16 {notnull},
    Title Text {notnull},
    GoodEvent Int16 {notnull},
    EventTime Timestamp {notnull},
    EventDate Date {notnull},
    CounterID Int32 {notnull},
    ClientIP Int32 {notnull},
    RegionID Int32 {notnull},
    UserID Int64 {notnull},
    CounterClass Int16 {notnull},
    OS Int16 {notnull},
    UserAgent Int16 {notnull},
    URL Text {notnull},
    Referer Text {notnull},
    IsRefresh Int16 {notnull},
    RefererCategoryID Int16 {notnull},
    RefererRegionID Int32 {notnull},
    URLCategoryID Int16 {notnull},
    URLRegionID Int32 {notnull},
    ResolutionWidth Int16 {notnull},
    ResolutionHeight Int16 {notnull},
    ResolutionDepth Int16 {notnull},
    FlashMajor Int16 {notnull},
    FlashMinor Int16 {notnull},
    FlashMinor2 Text {notnull},
    NetMajor Int16 {notnull},
    NetMinor Int16 {notnull},
    UserAgentMajor Int16 {notnull},
    UserAgentMinor Bytes {notnull},
    CookieEnable Int16 {notnull},
    JavascriptEnable Int16 {notnull},
    IsMobile Int16 {notnull},
    MobilePhone Int16 {notnull},
    MobilePhoneModel Text {notnull},
    Params Text {notnull},
    IPNetworkID Int32 {notnull},
    TraficSourceID Int16 {notnull},
    SearchEngineID Int16 {notnull},
    SearchPhrase Text {notnull},
    AdvEngineID Int16 {notnull},
    IsArtifical Int16 {notnull},
    WindowClientWidth Int16 {notnull},
    WindowClientHeight Int16 {notnull},
    ClientTimeZone Int16 {notnull},
    ClientEventTime Timestamp {notnull},
    SilverlightVersion1 Int16 {notnull},
    SilverlightVersion2 Int16 {notnull},
    SilverlightVersion3 Int32 {notnull},
    SilverlightVersion4 Int16 {notnull},
    PageCharset Text {notnull},
    CodeVersion Int32 {notnull},
    IsLink Int16 {notnull},
    IsDownload Int16 {notnull},
    IsNotBounce Int16 {notnull},
    FUniqID Int64 {notnull},
    OriginalURL Text {notnull},
    HID Int32 {notnull},
    IsOldCounter Int16 {notnull},
    IsEvent Int16 {notnull},
    IsParameter Int16 {notnull},
    DontCountHits Int16 {notnull},
    WithHash Int16 {notnull},
    HitColor Text {notnull},
    LocalEventTime Timestamp {notnull},
    Age Int16 {notnull},
    Sex Int16 {notnull},
    Income Int16 {notnull},
    Interests Int16 {notnull},
    Robotness Int16 {notnull},
    RemoteIP Int32 {notnull},
    WindowName Int32 {notnull},
    OpenerName Int32 {notnull},
    HistoryLength Int16 {notnull},
    BrowserLanguage Text {notnull},
    BrowserCountry Text {notnull},
    SocialNetwork Text {notnull},
    SocialAction Text {notnull},
    HTTPError Int16 {notnull},
    SendTiming Int32 {notnull},
    DNSTiming Int32 {notnull},
    ConnectTiming Int32 {notnull},
    ResponseStartTiming Int32 {notnull},
    ResponseEndTiming Int32 {notnull},
    FetchTiming Int32 {notnull},
    SocialSourceNetworkID Int16 {notnull},
    SocialSourcePage Text {notnull},
    ParamPrice Int64 {notnull},
    ParamOrderID Text {notnull},
    ParamCurrency Text {notnull},
    ParamCurrencyID Int16 {notnull},
    OpenstatServiceName Text {notnull},
    OpenstatCampaignID Text {notnull},
    OpenstatAdID Text {notnull},
    OpenstatSourceID Text {notnull},
    UTMSource Text {notnull},
    UTMMedium Text {notnull},
    UTMCampaign Text {notnull},
    UTMContent Text {notnull},
    UTMTerm Text {notnull},
    FromTag Text {notnull},
    HasGCLID Int16 {notnull},
    RefererHash Int64 {notnull},
    URLHash Int64 {notnull},
    CLID Int32 {notnull}
    {primary_key}(CounterID, EventDate, UserID, EventTime, WatchID)
)
{partition_by}(CounterID, EventDate, UserID, EventTime, WatchID)
WITH (
    {store}"{s3_prefix}/hits",
    AUTO_PARTITIONING_BY_SIZE = ENABLED,
    {partitioning} = 128
);
